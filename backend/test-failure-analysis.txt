
> equoria-backend@1.0.0 test
> node --experimental-vm-modules node_modules/jest/bin/jest.js --verbose

[2026-01-28 13:41:32] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:41:32] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:41:32] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:41:32] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:41:34] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:34] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:34] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:34] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:34] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:34] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:34] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:34] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:34] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:34] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:41:34] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 13:41:34] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:34] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:41:34] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:41:34] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:41:34] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:41:34] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:41:34] info: [Sentry] Sentry error handler not attached (DSN not configured).
(node:73184) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
[2026-01-28 13:41:35] info: [POST] /api/auth/register
[2026-01-28 13:41:35] warn: [Validation] Input validation failed
[2026-01-28 13:41:35] info: [POST] /api/auth/register - 400
[2026-01-28 13:41:35] info: [POST] /api/auth/register
[2026-01-28 13:41:35] warn: [Validation] Input validation failed
[2026-01-28 13:41:35] info: [POST] /api/auth/register - 400
[2026-01-28 13:41:35] info: [POST] /api/auth/register
[2026-01-28 13:41:35] warn: [Validation] Input validation failed
[2026-01-28 13:41:35] info: [POST] /api/auth/register - 400
[2026-01-28 13:41:35] info: [POST] /api/auth/register
[2026-01-28 13:41:35] warn: [Validation] Input validation failed
[2026-01-28 13:41:35] info: [POST] /api/auth/register - 400
[2026-01-28 13:41:35] info: [POST] /api/auth/register
[2026-01-28 13:41:35] warn: [Validation] Input validation failed
[2026-01-28 13:41:35] info: [POST] /api/auth/register - 400
[2026-01-28 13:41:35] info: [GET] /health
[2026-01-28 13:41:35] info: [GET] /health - 200
[2026-01-28 13:41:35] info: [GET] /health
[2026-01-28 13:41:35] info: [GET] /health - 200
[2026-01-28 13:41:35] info: [GET] /api/users/00000000-0000-0000-0000-000000000000/progress
[2026-01-28 13:41:35] info: [auth:qrkxqg] Starting auth for GET /users/00000000-0000-0000-0000-000000000000/progress
[2026-01-28 13:41:35] info: [auth:qrkxqg] Token from cookie: false
[2026-01-28 13:41:35] info: [auth:qrkxqg] Token from header: true
[2026-01-28 13:41:35] info: [auth:qrkxqg] Authenticated user 592b341a-4771-40da-ac15-1c5de757dab9
[2026-01-28 13:41:35] info: [auth:xucmll] Starting auth for GET /00000000-0000-0000-0000-000000000000/progress
[2026-01-28 13:41:35] info: [auth:xucmll] Token from cookie: false
[2026-01-28 13:41:35] info: [auth:xucmll] Token from header: true
[2026-01-28 13:41:35] info: [auth:xucmll] Authenticated user 592b341a-4771-40da-ac15-1c5de757dab9
[2026-01-28 13:41:35] warn: [userRoutes] Self-access violation: user 592b341a-4771-40da-ac15-1c5de757dab9 attempted to access user 00000000-0000-0000-0000-000000000000
[2026-01-28 13:41:35] info: [GET] /api/users/00000000-0000-0000-0000-000000000000/progress - 403
[2026-01-28 13:41:35] info: [POST] /api/horses/99999/train
[2026-01-28 13:41:35] info: [auth:3t6wob] Starting auth for POST /horses/99999/train
[2026-01-28 13:41:35] info: [auth:3t6wob] Token from cookie: false
[2026-01-28 13:41:35] info: [auth:3t6wob] Token from header: true
[2026-01-28 13:41:35] info: [auth:3t6wob] Authenticated user 592b341a-4771-40da-ac15-1c5de757dab9
[2026-01-28 13:41:35] warn: 404 - Route not found: POST /api/horses/99999/train from ::ffff:127.0.0.1
[2026-01-28 13:41:35] info: [POST] /api/horses/99999/train - 404
[2026-01-28 13:41:35] warn: CORS blocked request from origin: https://malicious-site.com
[2026-01-28 13:41:35] error: [OPTIONS] /api/auth/login - ERROR
[2026-01-28 13:41:35] error: Error Not allowed by CORS
[2026-01-28 13:41:35] info: [POST] /api/auth/login
[2026-01-28 13:41:35] info: [POST] /api/auth/login
[2026-01-28 13:41:35] info: [POST] /api/auth/login
[2026-01-28 13:41:35] info: [POST] /api/auth/login
[2026-01-28 13:41:35] info: [POST] /api/auth/login
[2026-01-28 13:41:35] info: [POST] /api/auth/login
[2026-01-28 13:41:35] info: [POST] /api/auth/login
[2026-01-28 13:41:35] info: [POST] /api/auth/login
[2026-01-28 13:41:35] info: [POST] /api/auth/login
[2026-01-28 13:41:35] info: [POST] /api/auth/login
[2026-01-28 13:41:35] info: [POST] /api/auth/login
[2026-01-28 13:41:35] info: [POST] /api/auth/login
[2026-01-28 13:41:35] info: [POST] /api/auth/login
[2026-01-28 13:41:35] info: [POST] /api/auth/login
[2026-01-28 13:41:35] info: [POST] /api/auth/login
[2026-01-28 13:41:35] info: [POST] /api/auth/login
[2026-01-28 13:41:35] info: [POST] /api/auth/login
[2026-01-28 13:41:35] info: [POST] /api/auth/login
[2026-01-28 13:41:35] info: [POST] /api/auth/login
[2026-01-28 13:41:35] info: [POST] /api/auth/login
[2026-01-28 13:41:35] info: [POST] /api/auth/login
[2026-01-28 13:41:35] info: [POST] /api/auth/login
[2026-01-28 13:41:35] info: [POST] /api/auth/login
[2026-01-28 13:41:35] info: [POST] /api/auth/login
[2026-01-28 13:41:35] info: [POST] /api/auth/login
[2026-01-28 13:41:35] info: [POST] /api/auth/login
[2026-01-28 13:41:35] info: [POST] /api/auth/login
[2026-01-28 13:41:35] info: [POST] /api/auth/login
[2026-01-28 13:41:35] info: [POST] /api/auth/login
[2026-01-28 13:41:35] info: [POST] /api/auth/login
[2026-01-28 13:41:35] info: [POST] /api/auth/login
[2026-01-28 13:41:35] info: [POST] /api/auth/login
[2026-01-28 13:41:35] info: [POST] /api/auth/login
[2026-01-28 13:41:35] info: [POST] /api/auth/login
[2026-01-28 13:41:35] info: [POST] /api/auth/login
[2026-01-28 13:41:35] info: [POST] /api/auth/login
[2026-01-28 13:41:35] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] info: [POST] /api/auth/login
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:36] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:36] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:36] error: Error Invalid credentials
[2026-01-28 13:41:36] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:37] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:37] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:37] error: Error Invalid credentials
[2026-01-28 13:41:37] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:37] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:37] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:37] error: Error Invalid credentials
[2026-01-28 13:41:37] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:37] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:37] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:37] error: Error Invalid credentials
[2026-01-28 13:41:37] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:37] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:37] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:37] error: Error Invalid credentials
[2026-01-28 13:41:37] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:37] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:37] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:37] error: Error Invalid credentials
[2026-01-28 13:41:37] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:37] info: [PUT] /api/horses/146623
[2026-01-28 13:41:37] info: [auth:umw3vu] Starting auth for PUT /horses/146623
[2026-01-28 13:41:37] info: [auth:umw3vu] Token from cookie: false
[2026-01-28 13:41:37] info: [auth:umw3vu] Token from header: true
[2026-01-28 13:41:37] info: [auth:umw3vu] Authenticated user 592b341a-4771-40da-ac15-1c5de757dab9
[2026-01-28 13:41:37] info: [ownership] Validated ownership: user 592b341a-4771-40da-ac15-1c5de757dab9 owns horse 146623
[2026-01-28 13:41:37] info: [PUT] /api/horses/146623 - 400
[2026-01-28 13:41:37] info: [POST] /api/training/train
[2026-01-28 13:41:37] info: [auth:pa5hus] Starting auth for POST /training/train
[2026-01-28 13:41:37] info: [auth:pa5hus] Token from cookie: false
[2026-01-28 13:41:37] info: [auth:pa5hus] Token from header: true
[2026-01-28 13:41:37] info: [auth:pa5hus] Authenticated user 592b341a-4771-40da-ac15-1c5de757dab9
[2026-01-28 13:41:37] info: [ownership] Found owned horse 146623 for user 592b341a-4771-40da-ac15-1c5de757dab9
[2026-01-28 13:41:37] info: [trainingController.trainRouteHandler] Training request for horse 146623 in Dressage
[2026-01-28 13:41:37] info: [trainingController.trainHorse] Attempting to train horse 146623 in Dressage
[2026-01-28 13:41:37] info: [trainingController.canTrain] Checking training eligibility for horse 146623 in Dressage
[2026-01-28 13:41:37] info: [trainingModel.getHorseAge] Getting age for horse 146623
[2026-01-28 13:41:37] info: [trainingModel.getHorseAge] Horse 146623 is 4 years old
[2026-01-28 13:41:37] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146623 across all disciplines
[2026-01-28 13:41:37] info: [trainingModel.getAnyRecentTraining] No training records found for horse 146623
[2026-01-28 13:41:37] info: [trainingController.canTrain] Horse 146623 is eligible to train in Dressage
[2026-01-28 13:41:37] info: [horseModel.getHorseById] Successfully found horse: OWASP Test Horse (ID: 146623)
[2026-01-28 13:41:37] info: [trainingController.trainHorse] Horse 146623 has traits: 
[2026-01-28 13:41:37] info: [trainingModel.logTrainingSession] Logging training session for horse 146623 in Dressage
[2026-01-28 13:41:37] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 8976
[2026-01-28 13:41:37] info: [horseModel.incrementDisciplineScore] Incrementing Dressage score for horse 146623 by +5
[2026-01-28 13:41:37] info: [horseModel.updateDisciplineScore] Updating Dressage score for horse 146623 by +5
[2026-01-28 13:41:37] info: [horseModel.updateDisciplineScore] Successfully updated Dressage score for horse 146623: 0 -> 5
[2026-01-28 13:41:37] info: [horseModel.incrementDisciplineScore] Successfully incremented Dressage score for horse 146623
[2026-01-28 13:41:37] info: [xpLogModel.logXpEvent] Logging XP event: User 592b341a-4771-40da-ac15-1c5de757dab9, Amount: 5, Reason: Trained horse OWASP Test Horse in Dressage
[2026-01-28 13:41:37] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 4430, User 592b341a-4771-40da-ac15-1c5de757dab9, Amount: 5
[2026-01-28 13:41:37] info: [trainingController.trainHorse] Awarded 5 XP to user 592b341a-4771-40da-ac15-1c5de757dab9 for training
[2026-01-28 13:41:37] info: [trainingController.trainHorse] Successfully trained horse 146623 in Dressage (Log ID: 8976, Score +5)
[2026-01-28 13:41:37] info: [POST] /api/training/train - 200
[2026-01-28 13:41:37] info: [GET] /api/users/me
[2026-01-28 13:41:37] info: [auth:0q72z] Starting auth for GET /users/me
[2026-01-28 13:41:37] info: [auth:0q72z] Token from cookie: false
[2026-01-28 13:41:37] info: [auth:0q72z] Token from header: true
[2026-01-28 13:41:37] warn: [auth:0q72z] Invalid or expired token for GET /users/me from ::ffff:127.0.0.1
[2026-01-28 13:41:37] info: [GET] /api/users/me - 401
[2026-01-28 13:41:37] info: [GET] /api/admin/users
[2026-01-28 13:41:37] info: [auth:aehwc] Starting auth for GET /users
[2026-01-28 13:41:37] info: [auth:aehwc] Token from cookie: false
[2026-01-28 13:41:37] info: [auth:aehwc] Token from header: true
[2026-01-28 13:41:37] warn: [auth:aehwc] Invalid or expired token for GET /users from ::ffff:127.0.0.1
[2026-01-28 13:41:37] info: [GET] /api/admin/users - 401
[2026-01-28 13:41:37] info: [POST] /api/auth/login
[2026-01-28 13:41:37] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:37] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:37] error: Error Invalid credentials
[2026-01-28 13:41:37] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:37] info: [POST] /api/auth/login
[2026-01-28 13:41:37] info: [TokenRotation] Created new token pair
[2026-01-28 13:41:37] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 13:41:37] info: [POST] /api/auth/login - 200
[2026-01-28 13:41:37] info: [POST] /api/auth/login
[2026-01-28 13:41:38] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:38] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:38] error: Error Invalid credentials
[2026-01-28 13:41:38] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:38] info: [GET] /api/horses/146624
[2026-01-28 13:41:38] info: [auth:h6a9gs] Starting auth for GET /horses/146624
[2026-01-28 13:41:38] info: [auth:h6a9gs] Token from cookie: false
[2026-01-28 13:41:38] info: [auth:h6a9gs] Token from header: true
[2026-01-28 13:41:38] info: [auth:h6a9gs] Authenticated user 592b341a-4771-40da-ac15-1c5de757dab9
[2026-01-28 13:41:38] warn: [ownership] horse 146624 not found or not owned by user 592b341a-4771-40da-ac15-1c5de757dab9
[2026-01-28 13:41:38] info: [GET] /api/horses/146624 - 404
[2026-01-28 13:41:38] info: [POST] /api/auth/login
[2026-01-28 13:41:38] info: [POST] /api/auth/login
[2026-01-28 13:41:38] info: [POST] /api/auth/login
[2026-01-28 13:41:38] info: [POST] /api/auth/login
[2026-01-28 13:41:38] info: [POST] /api/auth/login
[2026-01-28 13:41:38] info: [POST] /api/auth/login
[2026-01-28 13:41:38] info: [POST] /api/auth/login
[2026-01-28 13:41:38] info: [POST] /api/auth/login
[2026-01-28 13:41:38] info: [POST] /api/auth/login
[2026-01-28 13:41:38] info: [POST] /api/auth/login
[2026-01-28 13:41:38] info: [POST] /api/auth/login
[2026-01-28 13:41:38] info: [POST] /api/auth/login
[2026-01-28 13:41:38] info: [POST] /api/auth/login
[2026-01-28 13:41:38] info: [POST] /api/auth/login
[2026-01-28 13:41:38] info: [POST] /api/auth/login
[2026-01-28 13:41:38] info: [POST] /api/auth/login
[2026-01-28 13:41:38] info: [POST] /api/auth/login
[2026-01-28 13:41:38] info: [POST] /api/auth/login
[2026-01-28 13:41:38] info: [POST] /api/auth/login
[2026-01-28 13:41:38] info: [POST] /api/auth/login
[2026-01-28 13:41:38] info: [POST] /api/auth/login
[2026-01-28 13:41:38] info: [POST] /api/auth/login
[2026-01-28 13:41:38] info: [POST] /api/auth/login
[2026-01-28 13:41:38] info: [POST] /api/auth/login
[2026-01-28 13:41:38] info: [POST] /api/auth/login
[2026-01-28 13:41:38] info: [POST] /api/auth/login
[2026-01-28 13:41:38] info: [POST] /api/auth/login
[2026-01-28 13:41:38] info: [POST] /api/auth/login
[2026-01-28 13:41:38] info: [POST] /api/auth/login
[2026-01-28 13:41:38] info: [POST] /api/auth/login
[2026-01-28 13:41:38] info: [POST] /api/auth/login
[2026-01-28 13:41:38] info: [POST] /api/auth/login
[2026-01-28 13:41:38] info: [POST] /api/auth/login
[2026-01-28 13:41:38] info: [POST] /api/auth/login
[2026-01-28 13:41:38] info: [POST] /api/auth/login
[2026-01-28 13:41:38] info: [POST] /api/auth/login
[2026-01-28 13:41:38] info: [POST] /api/auth/login
[2026-01-28 13:41:38] info: [POST] /api/auth/login
[2026-01-28 13:41:38] info: [POST] /api/auth/login
[2026-01-28 13:41:38] info: [POST] /api/auth/login
[2026-01-28 13:41:38] info: [POST] /api/auth/login
[2026-01-28 13:41:38] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] info: [POST] /api/auth/login
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:39] error: Error Invalid credentials
[2026-01-28 13:41:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:40] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:40] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:40] error: Error Invalid credentials
[2026-01-28 13:41:40] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:40] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:40] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:40] error: Error Invalid credentials
[2026-01-28 13:41:40] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:40] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:40] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:40] error: Error Invalid credentials
[2026-01-28 13:41:40] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:40] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:40] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:40] error: Error Invalid credentials
[2026-01-28 13:41:40] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:40] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:40] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:40] error: Error Invalid credentials
[2026-01-28 13:41:40] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:40] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:40] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:40] error: Error Invalid credentials
[2026-01-28 13:41:40] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:40] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:41:40] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:41:40] error: Error Invalid credentials
[2026-01-28 13:41:40] info: [POST] /api/auth/login - 401
[2026-01-28 13:41:40] info: [POST] /api/auth/login
[2026-01-28 13:41:40] info: [TokenRotation] Created new token pair
[2026-01-28 13:41:40] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 13:41:40] info: [POST] /api/auth/login - 200
[2026-01-28 13:41:40] info: [POST] /api/training/train
[2026-01-28 13:41:40] info: [auth:0e6l2] Starting auth for POST /training/train
[2026-01-28 13:41:40] info: [auth:0e6l2] Token from cookie: false
[2026-01-28 13:41:40] warn: [auth:0e6l2] Access token is required for POST /training/train from ::ffff:127.0.0.1
[2026-01-28 13:41:40] info: [POST] /api/training/train - 401
[2026-01-28 13:41:40] info: [GET] /health
[2026-01-28 13:41:40] info: [GET] /health - 200
[2026-01-28 13:41:40] info: [GET] /api/auth/login
[2026-01-28 13:41:40] info: [auth:21xqtr] Starting auth for GET /auth/login
[2026-01-28 13:41:40] info: [auth:21xqtr] Token from cookie: false
[2026-01-28 13:41:40] warn: [auth:21xqtr] Access token is required for GET /auth/login from ::ffff:127.0.0.1
[2026-01-28 13:41:40] info: [GET] /api/auth/login - 401
[2026-01-28 13:41:40] info: [GET] /api/horses
[2026-01-28 13:41:40] info: [auth:u8ywdb] Starting auth for GET /horses
[2026-01-28 13:41:40] info: [auth:u8ywdb] Token from cookie: false
[2026-01-28 13:41:40] warn: [auth:u8ywdb] Access token is required for GET /horses from ::ffff:127.0.0.1
[2026-01-28 13:41:40] info: [GET] /api/horses - 401
FAIL __tests__/integration/security/owasp-comprehensive.test.mjs (8.605 s)
  🔒 OWASP Top 10 - Comprehensive Security Tests
    🛡️ A06:2021 - Security Misconfiguration
      Default Credentials Prevention
        × should reject common default passwords (96 ms)
        √ should enforce minimum password complexity (74 ms)
      HTTP Security Headers
        √ should include security headers in responses (18 ms)
        × should not expose server version information (16 ms)
      Error Message Handling
        √ should not leak sensitive information in error messages (26 ms)
        √ should not expose stack traces in production-like errors (27 ms)
      CORS Configuration
        × should enforce CORS policies (18 ms)
      Rate Limiting Configuration
        × should have rate limiting enabled (1832 ms)
    🔐 A08:2021 - Software and Data Integrity Failures
      Dependency Integrity
        √ should have package-lock.json for dependency pinning (2 ms)
        × should validate critical dependencies are up-to-date (1 ms)
      Data Integrity Checks
        √ should validate data integrity for critical operations (77 ms)
        √ should prevent stat manipulation through tampering (84 ms)
      Unsigned or Tampered JWT Prevention
        √ should reject unsigned JWT tokens (19 ms)
        √ should reject JWT tokens with tampered payload (21 ms)
      Insecure Deserialization Prevention
        √ should reject malformed JSON payloads (18 ms)
    📊 A09:2021 - Security Logging and Monitoring Failures
      Authentication Event Logging
        √ should log successful authentication attempts (312 ms)
        √ should log failed authentication attempts (301 ms)
      Sensitive Operation Logging
        × should log ownership violations (301 ms)
        × should log rate limit violations (1847 ms)
      Audit Log Completeness
        √ should include required audit fields (344 ms)
      Sentry Integration
        √ should have Sentry configured for error tracking (1 ms)
    🌐 A10:2021 - Server-Side Request Forgery (SSRF)
      URL Validation
        √ should reject internal IP addresses in URLs
        √ should reject file:// protocol URLs
      External Request Validation
        √ should sanitize redirect URLs (1 ms)
        √ should validate webhook URLs
      DNS Rebinding Prevention
        √ should prevent DNS rebinding attacks
    🔄 Cross-Category Security Validation
      Defense in Depth
        √ should enforce multiple security layers (25 ms)
      Security Configuration Consistency
        √ should have consistent security settings across all endpoints (57 ms)

  ● 🔒 OWASP Top 10 - Comprehensive Security Tests › 🛡️ A06:2021 - Security Misconfiguration › Default Credentials Prevention › should reject common default passwords

    expect(received).toContain(expected) // indexOf

    Expected substring: "password"
    Received string:    "Username can only contain letters, numbers, and underscores"

    [0m [90m  97 |[39m
     [90m  98 |[39m           expect(response[33m.[39mstatus)[33m.[39mtoBe([35m400[39m)[33m;[39m
    [31m[1m>[22m[39m[90m  99 |[39m           expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoContain([32m'password'[39m)[33m;[39m
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 100 |[39m         }
     [90m 101 |[39m       })[33m;[39m
     [90m 102 |[39m[0m

      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:99:41)

  ● 🔒 OWASP Top 10 - Comprehensive Security Tests › 🛡️ A06:2021 - Security Misconfiguration › HTTP Security Headers › should not expose server version information

    expect(received).not.toContain(expected) // indexOf

    Matcher error: received value must not be null nor undefined

    Received has value: undefined

    [0m [90m 140 |[39m         [90m// Should not expose server software version[39m
     [90m 141 |[39m         expect(response[33m.[39mheaders[[32m'x-powered-by'[39m])[33m.[39mtoBeUndefined()[33m;[39m
    [31m[1m>[22m[39m[90m 142 |[39m         expect(response[33m.[39mheaders[[32m'server'[39m])[33m.[39mnot[33m.[39mtoContain([32m'Express'[39m)[33m;[39m
     [90m     |[39m                                                [31m[1m^[22m[39m
     [90m 143 |[39m         expect(response[33m.[39mheaders[[32m'server'[39m])[33m.[39mnot[33m.[39mtoContain([32m'Node'[39m)[33m;[39m
     [90m 144 |[39m       })[33m;[39m
     [90m 145 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:142:48)

  ● 🔒 OWASP Top 10 - Comprehensive Security Tests › 🛡️ A06:2021 - Security Misconfiguration › CORS Configuration › should enforce CORS policies

    expect(received).toBeLessThan(expected)

    Expected: < 500
    Received:   500

    [0m [90m 179 |[39m         [90m// CORS should be configured to restrict origins[39m
     [90m 180 |[39m         [90m// (specific test depends on CORS configuration)[39m
    [31m[1m>[22m[39m[90m 181 |[39m         expect(response[33m.[39mstatus)[33m.[39mtoBeLessThan([35m500[39m)[33m;[39m
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 182 |[39m       })[33m;[39m
     [90m 183 |[39m     })[33m;[39m
     [90m 184 |[39m[0m

      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:181:33)

  ● 🔒 OWASP Top 10 - Comprehensive Security Tests › 🛡️ A06:2021 - Security Misconfiguration › Rate Limiting Configuration › should have rate limiting enabled

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 199 |[39m         [36mconst[39m rateLimited [33m=[39m responses[33m.[39msome(r [33m=>[39m r[33m.[39mstatus [33m===[39m [35m429[39m)[33m;[39m
     [90m 200 |[39m
    [31m[1m>[22m[39m[90m 201 |[39m         expect(rateLimited)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 202 |[39m       })[33m;[39m
     [90m 203 |[39m     })[33m;[39m
     [90m 204 |[39m   })[33m;[39m[0m

      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:201:29)

  ● 🔒 OWASP Top 10 - Comprehensive Security Tests › 🔐 A08:2021 - Software and Data Integrity Failures › Dependency Integrity › should validate critical dependencies are up-to-date

    expect(received).toBeDefined()

    Received: undefined

    [0m [90m 217 |[39m         [90m// Critical security packages should be present[39m
     [90m 218 |[39m         expect(packageJson[33m.[39mdependencies[33m.[39mhelmet)[33m.[39mtoBeDefined()[33m;[39m
    [31m[1m>[22m[39m[90m 219 |[39m         expect(packageJson[33m.[39mdependencies[33m.[39mbcrypt)[33m.[39mtoBeDefined()[33m;[39m
     [90m     |[39m                                                 [31m[1m^[22m[39m
     [90m 220 |[39m         expect(packageJson[33m.[39mdependencies[33m.[39mjsonwebtoken)[33m.[39mtoBeDefined()[33m;[39m
     [90m 221 |[39m       })[33m;[39m
     [90m 222 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:219:49)

  ● 🔒 OWASP Top 10 - Comprehensive Security Tests › 📊 A09:2021 - Security Logging and Monitoring Failures › Sensitive Operation Logging › should log ownership violations

    expect(received).toBe(expected) // Object.is equality

    Expected: 403
    Received: 404

    [0m [90m 377 |[39m           [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 378 |[39m
    [31m[1m>[22m[39m[90m 379 |[39m         expect(response[33m.[39mstatus)[33m.[39mtoBe([35m403[39m)[33m;[39m
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 380 |[39m         [90m// Ownership violation should be logged[39m
     [90m 381 |[39m
     [90m 382 |[39m         [90m// Cleanup[39m[0m

      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:379:33)

  ● 🔒 OWASP Top 10 - Comprehensive Security Tests › 📊 A09:2021 - Security Logging and Monitoring Failures › Sensitive Operation Logging › should log rate limit violations

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 400 |[39m         [36mconst[39m rateLimited [33m=[39m responses[33m.[39msome(r [33m=>[39m r[33m.[39mstatus [33m===[39m [35m429[39m)[33m;[39m
     [90m 401 |[39m
    [31m[1m>[22m[39m[90m 402 |[39m         expect(rateLimited)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 403 |[39m         [90m// Rate limit violation should be logged[39m
     [90m 404 |[39m       })[33m;[39m
     [90m 405 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:402:29)

[2026-01-28 13:41:40] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:41:40] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:41:40] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:41:40] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:41:41] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:41] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:41] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:41] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:41] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:41] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:41] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:41] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:41] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:41] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:41:41] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 13:41:41] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:41] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:41:41] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:41:41] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:41:41] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:41:41] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:41:41] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 13:41:42] info: [GET] /api/users/a638c7aa-cca1-4436-bb3d-863e3011ffc9/progress
[2026-01-28 13:41:42] info: [auth:4dtgyk] Starting auth for GET /users/a638c7aa-cca1-4436-bb3d-863e3011ffc9/progress
[2026-01-28 13:41:42] info: [auth:4dtgyk] Token from cookie: false
[2026-01-28 13:41:42] info: [auth:4dtgyk] Token from header: true
[2026-01-28 13:41:42] info: [auth:4dtgyk] Authenticated user a638c7aa-cca1-4436-bb3d-863e3011ffc9
[2026-01-28 13:41:42] info: [auth:8bpcv] Starting auth for GET /a638c7aa-cca1-4436-bb3d-863e3011ffc9/progress
[2026-01-28 13:41:42] info: [auth:8bpcv] Token from cookie: false
[2026-01-28 13:41:42] info: [auth:8bpcv] Token from header: true
[2026-01-28 13:41:42] info: [auth:8bpcv] Authenticated user a638c7aa-cca1-4436-bb3d-863e3011ffc9
[2026-01-28 13:41:42] info: [userRoutes] Self-access validated: user a638c7aa-cca1-4436-bb3d-863e3011ffc9 accessing own data
[2026-01-28 13:41:42] info: [userController.getUserProgressAPI] Cache MISS - Getting comprehensive progress for user a638c7aa-cca1-4436-bb3d-863e3011ffc9
[2026-01-28 13:41:42] info: [GET] /api/users/a638c7aa-cca1-4436-bb3d-863e3011ffc9/progress - 200
[2026-01-28 13:41:42] info: [GET] /api/users/550e8400-e29b-41d4-a716-446655440999/progress
[2026-01-28 13:41:42] info: [auth:4vgtnj] Starting auth for GET /users/550e8400-e29b-41d4-a716-446655440999/progress
[2026-01-28 13:41:42] info: [auth:4vgtnj] Token from cookie: false
[2026-01-28 13:41:42] info: [auth:4vgtnj] Token from header: true
[2026-01-28 13:41:42] info: [auth:4vgtnj] Authenticated user a638c7aa-cca1-4436-bb3d-863e3011ffc9
[2026-01-28 13:41:42] info: [auth:6fqtzl] Starting auth for GET /550e8400-e29b-41d4-a716-446655440999/progress
[2026-01-28 13:41:42] info: [auth:6fqtzl] Token from cookie: false
[2026-01-28 13:41:42] info: [auth:6fqtzl] Token from header: true
[2026-01-28 13:41:42] info: [auth:6fqtzl] Authenticated user a638c7aa-cca1-4436-bb3d-863e3011ffc9
[2026-01-28 13:41:42] warn: [userRoutes] Self-access violation: user a638c7aa-cca1-4436-bb3d-863e3011ffc9 attempted to access user 550e8400-e29b-41d4-a716-446655440999
[2026-01-28 13:41:42] info: [GET] /api/users/550e8400-e29b-41d4-a716-446655440999/progress - 403
[2026-01-28 13:41:42] info: [GET] /api/users//progress
[2026-01-28 13:41:42] info: [auth:hlql9y] Starting auth for GET /users//progress
[2026-01-28 13:41:42] info: [auth:hlql9y] Token from cookie: false
[2026-01-28 13:41:42] info: [auth:hlql9y] Token from header: true
[2026-01-28 13:41:42] info: [auth:hlql9y] Authenticated user a638c7aa-cca1-4436-bb3d-863e3011ffc9
[2026-01-28 13:41:42] info: [auth:7mdqc] Starting auth for GET /progress
[2026-01-28 13:41:42] info: [auth:7mdqc] Token from cookie: false
[2026-01-28 13:41:42] info: [auth:7mdqc] Token from header: true
[2026-01-28 13:41:42] info: [auth:7mdqc] Authenticated user a638c7aa-cca1-4436-bb3d-863e3011ffc9
[2026-01-28 13:41:42] warn: [userRoutes] Validation errors for /:id: [{"type":"field","value":"progress","msg":"User ID must be a valid UUID","path":"id","location":"params"}]
[2026-01-28 13:41:42] info: [GET] /api/users//progress - 400
[2026-01-28 13:41:42] info: [GET] /api/users/a/progress
[2026-01-28 13:41:42] info: [auth:za0wdq] Starting auth for GET /users/a/progress
[2026-01-28 13:41:42] info: [auth:za0wdq] Token from cookie: false
[2026-01-28 13:41:42] info: [auth:za0wdq] Token from header: true
[2026-01-28 13:41:42] info: [auth:za0wdq] Authenticated user a638c7aa-cca1-4436-bb3d-863e3011ffc9
[2026-01-28 13:41:42] info: [auth:omsq0o] Starting auth for GET /a/progress
[2026-01-28 13:41:42] info: [auth:omsq0o] Token from cookie: false
[2026-01-28 13:41:42] info: [auth:omsq0o] Token from header: true
[2026-01-28 13:41:42] info: [auth:omsq0o] Authenticated user a638c7aa-cca1-4436-bb3d-863e3011ffc9
[2026-01-28 13:41:42] warn: [userRoutes] Validation errors for /:id: [{"type":"field","value":"a","msg":"User ID must be a valid UUID","path":"id","location":"params"}]
[2026-01-28 13:41:42] info: [GET] /api/users/a/progress - 400
[2026-01-28 13:41:42] info: [GET] /api/users/aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa/progress
[2026-01-28 13:41:42] info: [auth:7f4kw9] Starting auth for GET /users/aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa/progress
[2026-01-28 13:41:42] info: [auth:7f4kw9] Token from cookie: false
[2026-01-28 13:41:42] info: [auth:7f4kw9] Token from header: true
[2026-01-28 13:41:42] info: [auth:7f4kw9] Authenticated user a638c7aa-cca1-4436-bb3d-863e3011ffc9
[2026-01-28 13:41:42] info: [auth:69sbs] Starting auth for GET /aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa/progress
[2026-01-28 13:41:42] info: [auth:69sbs] Token from cookie: false
[2026-01-28 13:41:42] info: [auth:69sbs] Token from header: true
[2026-01-28 13:41:42] info: [auth:69sbs] Authenticated user a638c7aa-cca1-4436-bb3d-863e3011ffc9
[2026-01-28 13:41:42] warn: [userRoutes] Validation errors for /:id: [{"type":"field","value":"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa","msg":"User ID must be a valid UUID","path":"id","location":"params"}]
[2026-01-28 13:41:42] info: [GET] /api/users/aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa/progress - 400
[2026-01-28 13:41:42] info: [GET] /api/users/550e8400-e29b-41d4-a716-446655440998/progress
[2026-01-28 13:41:42] info: [auth:vi0c3xs] Starting auth for GET /users/550e8400-e29b-41d4-a716-446655440998/progress
[2026-01-28 13:41:42] info: [auth:vi0c3xs] Token from cookie: false
[2026-01-28 13:41:42] info: [auth:vi0c3xs] Token from header: true
[2026-01-28 13:41:42] info: [auth:vi0c3xs] Authenticated user a638c7aa-cca1-4436-bb3d-863e3011ffc9
[2026-01-28 13:41:42] info: [auth:1zyhd] Starting auth for GET /550e8400-e29b-41d4-a716-446655440998/progress
[2026-01-28 13:41:42] info: [auth:1zyhd] Token from cookie: false
[2026-01-28 13:41:42] info: [auth:1zyhd] Token from header: true
[2026-01-28 13:41:42] info: [auth:1zyhd] Authenticated user a638c7aa-cca1-4436-bb3d-863e3011ffc9
[2026-01-28 13:41:42] warn: [userRoutes] Self-access violation: user a638c7aa-cca1-4436-bb3d-863e3011ffc9 attempted to access user 550e8400-e29b-41d4-a716-446655440998
[2026-01-28 13:41:42] info: [GET] /api/users/550e8400-e29b-41d4-a716-446655440998/progress - 403
[2026-01-28 13:41:42] info: [GET] /api/users/a638c7aa-cca1-4436-bb3d-863e3011ffc9/progress
[2026-01-28 13:41:42] info: [auth:dn5gn] Starting auth for GET /users/a638c7aa-cca1-4436-bb3d-863e3011ffc9/progress
[2026-01-28 13:41:42] info: [auth:dn5gn] Token from cookie: false
[2026-01-28 13:41:42] info: [auth:dn5gn] Token from header: true
[2026-01-28 13:41:42] info: [auth:dn5gn] Authenticated user a638c7aa-cca1-4436-bb3d-863e3011ffc9
[2026-01-28 13:41:42] info: [auth:4pqbzc] Starting auth for GET /a638c7aa-cca1-4436-bb3d-863e3011ffc9/progress
[2026-01-28 13:41:42] info: [auth:4pqbzc] Token from cookie: false
[2026-01-28 13:41:42] info: [auth:4pqbzc] Token from header: true
[2026-01-28 13:41:42] info: [auth:4pqbzc] Authenticated user a638c7aa-cca1-4436-bb3d-863e3011ffc9
[2026-01-28 13:41:42] info: [userRoutes] Self-access validated: user a638c7aa-cca1-4436-bb3d-863e3011ffc9 accessing own data
[2026-01-28 13:41:42] info: [GET] /api/users/a638c7aa-cca1-4436-bb3d-863e3011ffc9/progress - 200
[2026-01-28 13:41:42] info: [GET] /api/users/a638c7aa-cca1-4436-bb3d-863e3011ffc9/progress
[2026-01-28 13:41:42] info: [auth:7hmti] Starting auth for GET /users/a638c7aa-cca1-4436-bb3d-863e3011ffc9/progress
[2026-01-28 13:41:42] info: [auth:7hmti] Token from cookie: false
[2026-01-28 13:41:42] info: [auth:7hmti] Token from header: true
[2026-01-28 13:41:42] info: [auth:7hmti] Authenticated user a638c7aa-cca1-4436-bb3d-863e3011ffc9
[2026-01-28 13:41:42] info: [auth:hnudrx] Starting auth for GET /a638c7aa-cca1-4436-bb3d-863e3011ffc9/progress
[2026-01-28 13:41:42] info: [auth:hnudrx] Token from cookie: false
[2026-01-28 13:41:42] info: [auth:hnudrx] Token from header: true
[2026-01-28 13:41:42] info: [auth:hnudrx] Authenticated user a638c7aa-cca1-4436-bb3d-863e3011ffc9
[2026-01-28 13:41:42] info: [userRoutes] Self-access validated: user a638c7aa-cca1-4436-bb3d-863e3011ffc9 accessing own data
[2026-01-28 13:41:42] info: [GET] /api/users/a638c7aa-cca1-4436-bb3d-863e3011ffc9/progress - 200
[2026-01-28 13:41:42] info: [GET] /api/users/user-123_test/progress
[2026-01-28 13:41:42] info: [auth:iea1ei] Starting auth for GET /users/user-123_test/progress
[2026-01-28 13:41:42] info: [auth:iea1ei] Token from cookie: false
[2026-01-28 13:41:42] info: [auth:iea1ei] Token from header: true
[2026-01-28 13:41:42] info: [auth:iea1ei] Authenticated user a638c7aa-cca1-4436-bb3d-863e3011ffc9
[2026-01-28 13:41:42] info: [auth:9r5pl3] Starting auth for GET /user-123_test/progress
[2026-01-28 13:41:42] info: [auth:9r5pl3] Token from cookie: false
[2026-01-28 13:41:42] info: [auth:9r5pl3] Token from header: true
[2026-01-28 13:41:42] info: [auth:9r5pl3] Authenticated user a638c7aa-cca1-4436-bb3d-863e3011ffc9
[2026-01-28 13:41:42] warn: [userRoutes] Validation errors for /:id: [{"type":"field","value":"user-123_test","msg":"User ID must be a valid UUID","path":"id","location":"params"}]
[2026-01-28 13:41:42] info: [GET] /api/users/user-123_test/progress - 400
[2026-01-28 13:41:42] info: [GET] /api/users/30258ab9-a1fe-4193-830c-bc8b4cb15216
[2026-01-28 13:41:42] info: [auth:zup1v2] Starting auth for GET /users/30258ab9-a1fe-4193-830c-bc8b4cb15216
[2026-01-28 13:41:42] info: [auth:zup1v2] Token from cookie: false
[2026-01-28 13:41:42] info: [auth:zup1v2] Token from header: true
[2026-01-28 13:41:42] info: [auth:zup1v2] Authenticated user 30258ab9-a1fe-4193-830c-bc8b4cb15216
[2026-01-28 13:41:42] info: [auth:q1inhk] Starting auth for GET /30258ab9-a1fe-4193-830c-bc8b4cb15216
[2026-01-28 13:41:42] info: [auth:q1inhk] Token from cookie: false
[2026-01-28 13:41:42] info: [auth:q1inhk] Token from header: true
[2026-01-28 13:41:42] info: [auth:q1inhk] Authenticated user 30258ab9-a1fe-4193-830c-bc8b4cb15216
[2026-01-28 13:41:42] info: [userRoutes] Self-access validated: user 30258ab9-a1fe-4193-830c-bc8b4cb15216 accessing own data
[2026-01-28 13:41:42] info: [userController.getUser] Getting user 30258ab9-a1fe-4193-830c-bc8b4cb15216
[2026-01-28 13:41:42] info: [GET] /api/users/30258ab9-a1fe-4193-830c-bc8b4cb15216 - 200
[2026-01-28 13:41:42] info: [GET] /api/users/550e8400-e29b-41d4-a716-446655440001
[2026-01-28 13:41:42] info: [auth:1labyb] Starting auth for GET /users/550e8400-e29b-41d4-a716-446655440001
[2026-01-28 13:41:42] info: [auth:1labyb] Token from cookie: false
[2026-01-28 13:41:42] info: [auth:1labyb] Token from header: true
[2026-01-28 13:41:42] info: [auth:1labyb] Authenticated user a638c7aa-cca1-4436-bb3d-863e3011ffc9
[2026-01-28 13:41:42] info: [auth:z8xvc] Starting auth for GET /550e8400-e29b-41d4-a716-446655440001
[2026-01-28 13:41:42] info: [auth:z8xvc] Token from cookie: false
[2026-01-28 13:41:42] info: [auth:z8xvc] Token from header: true
[2026-01-28 13:41:42] info: [auth:z8xvc] Authenticated user a638c7aa-cca1-4436-bb3d-863e3011ffc9
[2026-01-28 13:41:42] warn: [userRoutes] Self-access violation: user a638c7aa-cca1-4436-bb3d-863e3011ffc9 attempted to access user 550e8400-e29b-41d4-a716-446655440001
[2026-01-28 13:41:42] info: [GET] /api/users/550e8400-e29b-41d4-a716-446655440001 - 403
[2026-01-28 13:41:42] info: [POST] /api/users
[2026-01-28 13:41:42] info: [auth:a74axv] Starting auth for POST /users
[2026-01-28 13:41:42] info: [auth:a74axv] Token from cookie: false
[2026-01-28 13:41:42] info: [auth:a74axv] Token from header: true
[2026-01-28 13:41:42] info: [auth:a74axv] Authenticated user a638c7aa-cca1-4436-bb3d-863e3011ffc9
[2026-01-28 13:41:42] info: [userController.createUser] Creating user NewUser_1769625702890
[2026-01-28 13:41:42] info: [createUser] User created: NewUser_1769625702890
[2026-01-28 13:41:42] info: [POST] /api/users - 201
[2026-01-28 13:41:42] info: [POST] /api/users
[2026-01-28 13:41:42] info: [auth:l7b1js] Starting auth for POST /users
[2026-01-28 13:41:42] info: [auth:l7b1js] Token from cookie: false
[2026-01-28 13:41:42] info: [auth:l7b1js] Token from header: true
[2026-01-28 13:41:42] info: [auth:l7b1js] Authenticated user a638c7aa-cca1-4436-bb3d-863e3011ffc9
[2026-01-28 13:41:42] info: [POST] /api/users - 400
[2026-01-28 13:41:42] info: [PUT] /api/users/30258ab9-a1fe-4193-830c-bc8b4cb15216
[2026-01-28 13:41:42] info: [auth:ctdir] Starting auth for PUT /users/30258ab9-a1fe-4193-830c-bc8b4cb15216
[2026-01-28 13:41:42] info: [auth:ctdir] Token from cookie: false
[2026-01-28 13:41:42] info: [auth:ctdir] Token from header: true
[2026-01-28 13:41:42] info: [auth:ctdir] Authenticated user 30258ab9-a1fe-4193-830c-bc8b4cb15216
[2026-01-28 13:41:42] info: [auth:xqh5jp] Starting auth for PUT /30258ab9-a1fe-4193-830c-bc8b4cb15216
[2026-01-28 13:41:42] info: [auth:xqh5jp] Token from cookie: false
[2026-01-28 13:41:42] info: [auth:xqh5jp] Token from header: true
[2026-01-28 13:41:42] info: [auth:xqh5jp] Authenticated user 30258ab9-a1fe-4193-830c-bc8b4cb15216
[2026-01-28 13:41:42] info: [userRoutes] Self-access validated: user 30258ab9-a1fe-4193-830c-bc8b4cb15216 accessing own data
[2026-01-28 13:41:42] info: [userController.updateUser] Updating user 30258ab9-a1fe-4193-830c-bc8b4cb15216
[2026-01-28 13:41:42] info: [PUT] /api/users/30258ab9-a1fe-4193-830c-bc8b4cb15216 - 200
[2026-01-28 13:41:42] info: [PUT] /api/users/550e8400-e29b-41d4-a716-446655440001
[2026-01-28 13:41:42] info: [auth:3fhw3s] Starting auth for PUT /users/550e8400-e29b-41d4-a716-446655440001
[2026-01-28 13:41:42] info: [auth:3fhw3s] Token from cookie: false
[2026-01-28 13:41:42] info: [auth:3fhw3s] Token from header: true
[2026-01-28 13:41:42] info: [auth:3fhw3s] Authenticated user a638c7aa-cca1-4436-bb3d-863e3011ffc9
[2026-01-28 13:41:42] info: [auth:8xpexp] Starting auth for PUT /550e8400-e29b-41d4-a716-446655440001
[2026-01-28 13:41:42] info: [auth:8xpexp] Token from cookie: false
[2026-01-28 13:41:43] info: [auth:8xpexp] Token from header: true
[2026-01-28 13:41:43] info: [auth:8xpexp] Authenticated user a638c7aa-cca1-4436-bb3d-863e3011ffc9
[2026-01-28 13:41:43] warn: [userRoutes] Self-access violation: user a638c7aa-cca1-4436-bb3d-863e3011ffc9 attempted to access user 550e8400-e29b-41d4-a716-446655440001
[2026-01-28 13:41:43] info: [PUT] /api/users/550e8400-e29b-41d4-a716-446655440001 - 403
[2026-01-28 13:41:43] info: [DELETE] /api/users/d32e546d-d4b1-4e78-91fa-df71c258fb89
[2026-01-28 13:41:43] info: [auth:6nyl9n] Starting auth for DELETE /users/d32e546d-d4b1-4e78-91fa-df71c258fb89
[2026-01-28 13:41:43] info: [auth:6nyl9n] Token from cookie: false
[2026-01-28 13:41:43] info: [auth:6nyl9n] Token from header: true
[2026-01-28 13:41:43] info: [auth:6nyl9n] Authenticated user d32e546d-d4b1-4e78-91fa-df71c258fb89
[2026-01-28 13:41:43] info: [auth:fhjcon] Starting auth for DELETE /d32e546d-d4b1-4e78-91fa-df71c258fb89
[2026-01-28 13:41:43] info: [auth:fhjcon] Token from cookie: false
[2026-01-28 13:41:43] info: [auth:fhjcon] Token from header: true
[2026-01-28 13:41:43] info: [auth:fhjcon] Authenticated user d32e546d-d4b1-4e78-91fa-df71c258fb89
[2026-01-28 13:41:43] info: [userRoutes] Self-access validated: user d32e546d-d4b1-4e78-91fa-df71c258fb89 accessing own data
[2026-01-28 13:41:43] info: [userController.deleteUser] Deleting user d32e546d-d4b1-4e78-91fa-df71c258fb89
[2026-01-28 13:41:43] info: [DELETE] /api/users/d32e546d-d4b1-4e78-91fa-df71c258fb89 - 200
[2026-01-28 13:41:43] info: [DELETE] /api/users/550e8400-e29b-41d4-a716-446655440001
[2026-01-28 13:41:43] info: [auth:ccfhvh] Starting auth for DELETE /users/550e8400-e29b-41d4-a716-446655440001
[2026-01-28 13:41:43] info: [auth:ccfhvh] Token from cookie: false
[2026-01-28 13:41:43] info: [auth:ccfhvh] Token from header: true
[2026-01-28 13:41:43] info: [auth:ccfhvh] Authenticated user a638c7aa-cca1-4436-bb3d-863e3011ffc9
[2026-01-28 13:41:43] info: [auth:hevbx] Starting auth for DELETE /550e8400-e29b-41d4-a716-446655440001
[2026-01-28 13:41:43] info: [auth:hevbx] Token from cookie: false
[2026-01-28 13:41:43] info: [auth:hevbx] Token from header: true
[2026-01-28 13:41:43] info: [auth:hevbx] Authenticated user a638c7aa-cca1-4436-bb3d-863e3011ffc9
[2026-01-28 13:41:43] warn: [userRoutes] Self-access violation: user a638c7aa-cca1-4436-bb3d-863e3011ffc9 attempted to access user 550e8400-e29b-41d4-a716-446655440001
[2026-01-28 13:41:43] info: [DELETE] /api/users/550e8400-e29b-41d4-a716-446655440001 - 403
[2026-01-28 13:41:43] info: [POST] /api/users/a638c7aa-cca1-4436-bb3d-863e3011ffc9/add-xp
[2026-01-28 13:41:43] info: [auth:p1yefr] Starting auth for POST /users/a638c7aa-cca1-4436-bb3d-863e3011ffc9/add-xp
[2026-01-28 13:41:43] info: [auth:p1yefr] Token from cookie: false
[2026-01-28 13:41:43] info: [auth:p1yefr] Token from header: true
[2026-01-28 13:41:43] info: [auth:p1yefr] Authenticated user a638c7aa-cca1-4436-bb3d-863e3011ffc9
[2026-01-28 13:41:43] info: [auth:18o1os] Starting auth for POST /a638c7aa-cca1-4436-bb3d-863e3011ffc9/add-xp
[2026-01-28 13:41:43] info: [auth:18o1os] Token from cookie: false
[2026-01-28 13:41:43] info: [auth:18o1os] Token from header: true
[2026-01-28 13:41:43] info: [auth:18o1os] Authenticated user a638c7aa-cca1-4436-bb3d-863e3011ffc9
[2026-01-28 13:41:43] info: [userRoutes] Self-access validated: user a638c7aa-cca1-4436-bb3d-863e3011ffc9 accessing own data
[2026-01-28 13:41:43] info: [userController.addXp] Adding 50 XP to user a638c7aa-cca1-4436-bb3d-863e3011ffc9
[2026-01-28 13:41:43] info: [POST] /api/users/a638c7aa-cca1-4436-bb3d-863e3011ffc9/add-xp - 200
[2026-01-28 13:41:43] info: [POST] /api/users/550e8400-e29b-41d4-a716-446655440001/add-xp
[2026-01-28 13:41:43] info: [auth:amq0r] Starting auth for POST /users/550e8400-e29b-41d4-a716-446655440001/add-xp
[2026-01-28 13:41:43] info: [auth:amq0r] Token from cookie: false
[2026-01-28 13:41:43] info: [auth:amq0r] Token from header: true
[2026-01-28 13:41:43] info: [auth:amq0r] Authenticated user a638c7aa-cca1-4436-bb3d-863e3011ffc9
[2026-01-28 13:41:43] info: [auth:7m9dpe] Starting auth for POST /550e8400-e29b-41d4-a716-446655440001/add-xp
[2026-01-28 13:41:43] info: [auth:7m9dpe] Token from cookie: false
[2026-01-28 13:41:43] info: [auth:7m9dpe] Token from header: true
[2026-01-28 13:41:43] info: [auth:7m9dpe] Authenticated user a638c7aa-cca1-4436-bb3d-863e3011ffc9
[2026-01-28 13:41:43] warn: [userRoutes] Self-access violation: user a638c7aa-cca1-4436-bb3d-863e3011ffc9 attempted to access user 550e8400-e29b-41d4-a716-446655440001
[2026-01-28 13:41:43] info: [POST] /api/users/550e8400-e29b-41d4-a716-446655440001/add-xp - 403
FAIL tests/integration/userRoutes.test.mjs
  🌐 INTEGRATION: User Routes - HTTP API Endpoints
    GET /api/users/:id/progress
      × should return user progress successfully (66 ms)
      √ should return 403 for non-existent user (unauthorized access) (31 ms)
      √ should return validation error for empty user ID (26 ms)
      √ should return validation error for invalid user ID format (28 ms)
      √ should return validation error for extremely long user ID (26 ms)
      √ should return 403 when attempting to access a different user (database error path blocked) (24 ms)
      √ should calculate xpToNextLevel correctly for edge cases (25 ms)
      √ should only return required fields in response (25 ms)
      √ should handle invalid special characters in user ID (26 ms)
    GET /api/users/:id
      √ should return a user by ID (42 ms)
      √ should return 403 if user not authorized (matches different user) (32 ms)
    POST /api/users
      √ should create a new user (38 ms)
      √ should return 400 for invalid user data (24 ms)
    PUT /api/users/:id
      √ should update an existing user (30 ms)
      √ should return 403 if user to update is not authorized (25 ms)
    DELETE /api/users/:id
      √ should delete a user (314 ms)
      √ should return 403 if user to delete is not authorized (25 ms)
    POST /api/users/:id/add-xp
      √ should add XP to a user and potentially level them up (31 ms)
      √ should return 404 if user not found for XP addition (matches authorized user check) (25 ms)

  ● 🌐 INTEGRATION: User Routes - HTTP API Endpoints › GET /api/users/:id/progress › should return user progress successfully

    expect(received).toMatchObject(expected)

    - Expected  - 5
    + Received  + 0

    @@ -1,14 +1,9 @@
      Object {
        "level": Any<Number>,
        "progressPercentage": Any<Number>,
        "totalEarnings": Any<Number>,
    -   "user": Object {
    -     "connect": Object {
    -       "id": "a638c7aa-cca1-4436-bb3d-863e3011ffc9",
    -     },
    -   },
        "username": "userroutes_1769625701925",
        "xp": Any<Number>,
        "xpForCurrentLevel": Any<Number>,
        "xpForNextLevel": Any<Number>,
        "xpToNextLevel": Any<Number>,

    [0m [90m 91 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 92 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoBe([32m'User progress retrieved successfully'[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 93 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoMatchObject({
     [90m    |[39m                                  [31m[1m^[22m[39m
     [90m 94 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m
     [90m 95 |[39m         username[33m:[39m testUser[33m.[39musername[33m,[39m
     [90m 96 |[39m         level[33m:[39m expect[33m.[39many([33mNumber[39m)[33m,[39m[0m

      at Object.<anonymous> (tests/integration/userRoutes.test.mjs:93:34)

[2026-01-28 13:41:43] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:41:43] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:41:43] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:41:43] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:41:44] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:44] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:44] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:44] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:44] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:44] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:44] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:44] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:44] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:44] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:41:44] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 13:41:44] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:44] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:41:44] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:41:44] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:41:44] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:41:44] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:41:44] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 13:41:44] info: [POST] /api/groom-assignments
[2026-01-28 13:41:44] info: [auth:h05ypr] Starting auth for POST /groom-assignments
[2026-01-28 13:41:44] info: [auth:h05ypr] Token from cookie: false
[2026-01-28 13:41:44] info: [auth:h05ypr] Token from header: true
[2026-01-28 13:41:44] info: [auth:h05ypr] Authenticated user 8ed89b0a-71bc-4053-8ffb-c7d97abdb2b4
[2026-01-28 13:41:44] info: [auth:t4kcq] Starting auth for POST /
[2026-01-28 13:41:44] info: [auth:t4kcq] Token from cookie: false
[2026-01-28 13:41:44] info: [auth:t4kcq] Token from header: true
[2026-01-28 13:41:44] info: [auth:t4kcq] Authenticated user 8ed89b0a-71bc-4053-8ffb-c7d97abdb2b4
[2026-01-28 13:41:44] info: [groomAssignmentController] Creating assignment: groom 73258 -> horse 146625
[2026-01-28 13:41:44] error: [groomAssignmentService] Error creating assignment: You do not own this horse
[2026-01-28 13:41:44] error: [groomAssignmentController] Error creating assignment: You do not own this horse
[2026-01-28 13:41:44] info: [POST] /api/groom-assignments - 400
[2026-01-28 13:41:44] info: [POST] /api/groom-assignments
[2026-01-28 13:41:44] info: [auth:7admhp] Starting auth for POST /groom-assignments
[2026-01-28 13:41:44] info: [auth:7admhp] Token from cookie: false
[2026-01-28 13:41:44] info: [auth:7admhp] Token from header: true
[2026-01-28 13:41:44] info: [auth:7admhp] Authenticated user 8ed89b0a-71bc-4053-8ffb-c7d97abdb2b4
[2026-01-28 13:41:44] info: [auth:eui84f] Starting auth for POST /
[2026-01-28 13:41:44] info: [auth:eui84f] Token from cookie: false
[2026-01-28 13:41:44] info: [auth:eui84f] Token from header: true
[2026-01-28 13:41:44] info: [auth:eui84f] Authenticated user 8ed89b0a-71bc-4053-8ffb-c7d97abdb2b4
[2026-01-28 13:41:44] info: [groomAssignmentController] Creating assignment: groom 73258 -> horse 146626
[2026-01-28 13:41:44] error: [groomAssignmentService] Error creating assignment: You do not own this horse
[2026-01-28 13:41:44] error: [groomAssignmentController] Error creating assignment: You do not own this horse
[2026-01-28 13:41:44] info: [POST] /api/groom-assignments - 400
[2026-01-28 13:41:44] info: [POST] /api/groom-assignments
[2026-01-28 13:41:44] info: [auth:rirril] Starting auth for POST /groom-assignments
[2026-01-28 13:41:44] info: [auth:rirril] Token from cookie: false
[2026-01-28 13:41:44] info: [auth:rirril] Token from header: true
[2026-01-28 13:41:44] info: [auth:rirril] Authenticated user 8ed89b0a-71bc-4053-8ffb-c7d97abdb2b4
[2026-01-28 13:41:44] info: [auth:hjcf3o] Starting auth for POST /
[2026-01-28 13:41:44] info: [auth:hjcf3o] Token from cookie: false
[2026-01-28 13:41:44] info: [auth:hjcf3o] Token from header: true
[2026-01-28 13:41:44] info: [auth:hjcf3o] Authenticated user 8ed89b0a-71bc-4053-8ffb-c7d97abdb2b4
[2026-01-28 13:41:44] info: [groomAssignmentController] Creating assignment: groom 73258 -> horse 146625
[2026-01-28 13:41:44] error: [groomAssignmentService] Error creating assignment: You do not own this horse
[2026-01-28 13:41:44] error: [groomAssignmentController] Error creating assignment: You do not own this horse
[2026-01-28 13:41:44] info: [POST] /api/groom-assignments - 400
[2026-01-28 13:41:44] info: [POST] /api/groom-assignments
[2026-01-28 13:41:44] info: [auth:1ir0pf] Starting auth for POST /groom-assignments
[2026-01-28 13:41:44] info: [auth:1ir0pf] Token from cookie: false
[2026-01-28 13:41:44] info: [auth:1ir0pf] Token from header: true
[2026-01-28 13:41:44] info: [auth:1ir0pf] Authenticated user 8ed89b0a-71bc-4053-8ffb-c7d97abdb2b4
[2026-01-28 13:41:44] info: [auth:l6enhi] Starting auth for POST /
[2026-01-28 13:41:44] info: [auth:l6enhi] Token from cookie: false
[2026-01-28 13:41:44] info: [auth:l6enhi] Token from header: true
[2026-01-28 13:41:44] info: [auth:l6enhi] Authenticated user 8ed89b0a-71bc-4053-8ffb-c7d97abdb2b4
[2026-01-28 13:41:44] warn: [groomAssignmentRoutes] Validation errors: [{"type":"field","msg":"Horse ID must be a positive integer","path":"horseId","location":"body"}]
[2026-01-28 13:41:44] info: [POST] /api/groom-assignments - 400
[2026-01-28 13:41:44] info: [POST] /api/groom-assignments
[2026-01-28 13:41:44] info: [auth:od882k] Starting auth for POST /groom-assignments
[2026-01-28 13:41:44] info: [auth:od882k] Token from cookie: false
[2026-01-28 13:41:44] info: [auth:od882k] Token from header: true
[2026-01-28 13:41:44] info: [auth:od882k] Authenticated user 8ed89b0a-71bc-4053-8ffb-c7d97abdb2b4
[2026-01-28 13:41:44] info: [auth:jyxeuj] Starting auth for POST /
[2026-01-28 13:41:44] info: [auth:jyxeuj] Token from cookie: false
[2026-01-28 13:41:44] info: [auth:jyxeuj] Token from header: true
[2026-01-28 13:41:44] info: [auth:jyxeuj] Authenticated user 8ed89b0a-71bc-4053-8ffb-c7d97abdb2b4
[2026-01-28 13:41:44] info: [groomAssignmentController] Creating assignment: groom 73258 -> horse 146627
[2026-01-28 13:41:44] error: [groomAssignmentService] Error creating assignment: You do not own this horse
[2026-01-28 13:41:44] error: [groomAssignmentController] Error creating assignment: You do not own this horse
[2026-01-28 13:41:44] info: [POST] /api/groom-assignments - 400
[2026-01-28 13:41:44] info: [GET] /api/groom-assignments
[2026-01-28 13:41:44] info: [auth:x2rw4v] Starting auth for GET /groom-assignments
[2026-01-28 13:41:44] info: [auth:x2rw4v] Token from cookie: false
[2026-01-28 13:41:44] info: [auth:x2rw4v] Token from header: true
[2026-01-28 13:41:44] info: [auth:x2rw4v] Authenticated user 8ed89b0a-71bc-4053-8ffb-c7d97abdb2b4
[2026-01-28 13:41:44] info: [auth:9l9mwt] Starting auth for GET /
[2026-01-28 13:41:44] info: [auth:9l9mwt] Token from cookie: false
[2026-01-28 13:41:44] info: [auth:9l9mwt] Token from header: true
[2026-01-28 13:41:44] info: [auth:9l9mwt] Authenticated user 8ed89b0a-71bc-4053-8ffb-c7d97abdb2b4
[2026-01-28 13:41:44] info: [groomAssignmentController] Getting assignments for user 8ed89b0a-71bc-4053-8ffb-c7d97abdb2b4
[2026-01-28 13:41:44] info: [GET] /api/groom-assignments - 200
[2026-01-28 13:41:44] info: [GET] /api/groom-assignments?groomId=73258
[2026-01-28 13:41:44] info: [auth:hx3zlj] Starting auth for GET /groom-assignments
[2026-01-28 13:41:44] info: [auth:hx3zlj] Token from cookie: false
[2026-01-28 13:41:44] info: [auth:hx3zlj] Token from header: true
[2026-01-28 13:41:44] info: [auth:hx3zlj] Authenticated user 8ed89b0a-71bc-4053-8ffb-c7d97abdb2b4
[2026-01-28 13:41:44] info: [auth:j3n97] Starting auth for GET /
[2026-01-28 13:41:44] info: [auth:j3n97] Token from cookie: false
[2026-01-28 13:41:44] info: [auth:j3n97] Token from header: true
[2026-01-28 13:41:44] info: [auth:j3n97] Authenticated user 8ed89b0a-71bc-4053-8ffb-c7d97abdb2b4
[2026-01-28 13:41:44] info: [groomAssignmentController] Getting assignments for user 8ed89b0a-71bc-4053-8ffb-c7d97abdb2b4
[2026-01-28 13:41:44] info: [GET] /api/groom-assignments?groomId=73258 - 200
[2026-01-28 13:41:44] info: [GET] /api/groom-assignments/dashboard
[2026-01-28 13:41:44] info: [auth:6i7gee] Starting auth for GET /groom-assignments/dashboard
[2026-01-28 13:41:44] info: [auth:6i7gee] Token from cookie: false
[2026-01-28 13:41:44] info: [auth:6i7gee] Token from header: true
[2026-01-28 13:41:44] info: [auth:6i7gee] Authenticated user 8ed89b0a-71bc-4053-8ffb-c7d97abdb2b4
[2026-01-28 13:41:44] info: [auth:ere5bn] Starting auth for GET /dashboard
[2026-01-28 13:41:44] info: [auth:ere5bn] Token from cookie: false
[2026-01-28 13:41:44] info: [auth:ere5bn] Token from header: true
[2026-01-28 13:41:44] info: [auth:ere5bn] Authenticated user 8ed89b0a-71bc-4053-8ffb-c7d97abdb2b4
[2026-01-28 13:41:44] info: [groomAssignmentController] Getting assignment dashboard for user 8ed89b0a-71bc-4053-8ffb-c7d97abdb2b4
[2026-01-28 13:41:44] info: [GET] /api/groom-assignments/dashboard - 200
[2026-01-28 13:41:44] info: [GET] /api/groom-assignments/groom/73258/limits
[2026-01-28 13:41:44] info: [auth:jh247g] Starting auth for GET /groom-assignments/groom/73258/limits
[2026-01-28 13:41:44] info: [auth:jh247g] Token from cookie: false
[2026-01-28 13:41:44] info: [auth:jh247g] Token from header: true
[2026-01-28 13:41:44] info: [auth:jh247g] Authenticated user 8ed89b0a-71bc-4053-8ffb-c7d97abdb2b4
[2026-01-28 13:41:44] info: [auth:unz0sn] Starting auth for GET /groom/73258/limits
[2026-01-28 13:41:44] info: [auth:unz0sn] Token from cookie: false
[2026-01-28 13:41:44] info: [auth:unz0sn] Token from header: true
[2026-01-28 13:41:45] info: [auth:unz0sn] Authenticated user 8ed89b0a-71bc-4053-8ffb-c7d97abdb2b4
[2026-01-28 13:41:45] info: [ownership] Validated ownership: user 8ed89b0a-71bc-4053-8ffb-c7d97abdb2b4 owns groom 73258
[2026-01-28 13:41:45] info: [groomAssignmentController] Getting limits for groom 73258
[2026-01-28 13:41:45] info: [GET] /api/groom-assignments/groom/73258/limits - 200
[2026-01-28 13:41:45] info: [POST] /api/groom-assignments
[2026-01-28 13:41:45] info: [auth:9ijijq] Starting auth for POST /groom-assignments
[2026-01-28 13:41:45] info: [auth:9ijijq] Token from cookie: false
[2026-01-28 13:41:45] info: [auth:9ijijq] Token from header: true
[2026-01-28 13:41:45] info: [auth:9ijijq] Authenticated user 8ed89b0a-71bc-4053-8ffb-c7d97abdb2b4
[2026-01-28 13:41:45] info: [auth:n39e2] Starting auth for POST /
[2026-01-28 13:41:45] info: [auth:n39e2] Token from cookie: false
[2026-01-28 13:41:45] info: [auth:n39e2] Token from header: true
[2026-01-28 13:41:45] info: [auth:n39e2] Authenticated user 8ed89b0a-71bc-4053-8ffb-c7d97abdb2b4
[2026-01-28 13:41:45] info: [groomAssignmentController] Creating assignment: groom 73258 -> horse 146628
[2026-01-28 13:41:45] error: [groomAssignmentService] Error creating assignment: You do not own this horse
[2026-01-28 13:41:45] error: [groomAssignmentController] Error creating assignment: You do not own this horse
[2026-01-28 13:41:45] info: [POST] /api/groom-assignments - 400
[2026-01-28 13:41:45] info: [GET] /api/groom-assignments/salary-costs
[2026-01-28 13:41:45] info: [auth:w657n] Starting auth for GET /groom-assignments/salary-costs
[2026-01-28 13:41:45] info: [auth:w657n] Token from cookie: false
[2026-01-28 13:41:45] info: [auth:w657n] Token from header: true
[2026-01-28 13:41:45] info: [auth:w657n] Authenticated user 8ed89b0a-71bc-4053-8ffb-c7d97abdb2b4
[2026-01-28 13:41:45] info: [auth:v9gtvl] Starting auth for GET /salary-costs
[2026-01-28 13:41:45] info: [auth:v9gtvl] Token from cookie: false
[2026-01-28 13:41:45] info: [auth:v9gtvl] Token from header: true
[2026-01-28 13:41:45] info: [auth:v9gtvl] Authenticated user 8ed89b0a-71bc-4053-8ffb-c7d97abdb2b4
[2026-01-28 13:41:45] info: [groomAssignmentController] Calculating salary costs for user 8ed89b0a-71bc-4053-8ffb-c7d97abdb2b4
[2026-01-28 13:41:45] info: [GET] /api/groom-assignments/salary-costs - 200
[2026-01-28 13:41:45] info: [POST] /api/groom-assignments/validate
[2026-01-28 13:41:45] info: [auth:vc75tx] Starting auth for POST /groom-assignments/validate
[2026-01-28 13:41:45] info: [auth:vc75tx] Token from cookie: false
[2026-01-28 13:41:45] info: [auth:vc75tx] Token from header: true
[2026-01-28 13:41:45] info: [auth:vc75tx] Authenticated user 8ed89b0a-71bc-4053-8ffb-c7d97abdb2b4
[2026-01-28 13:41:45] info: [auth:qw0oza] Starting auth for POST /validate
[2026-01-28 13:41:45] info: [auth:qw0oza] Token from cookie: false
[2026-01-28 13:41:45] info: [auth:qw0oza] Token from header: true
[2026-01-28 13:41:45] info: [auth:qw0oza] Authenticated user 8ed89b0a-71bc-4053-8ffb-c7d97abdb2b4
[2026-01-28 13:41:45] info: [groomAssignmentController] Validating assignment: groom 73259 -> horse 146625
[2026-01-28 13:41:45] info: [POST] /api/groom-assignments/validate - 200
[2026-01-28 13:41:45] info: [GET] /api/groom-assignments
[2026-01-28 13:41:45] info: [auth:yimzo2] Starting auth for GET /groom-assignments
[2026-01-28 13:41:45] info: [auth:yimzo2] Token from cookie: false
[2026-01-28 13:41:45] info: [auth:yimzo2] Token from header: true
[2026-01-28 13:41:45] info: [auth:yimzo2] Authenticated user 8ed89b0a-71bc-4053-8ffb-c7d97abdb2b4
[2026-01-28 13:41:45] info: [auth:rcpva8] Starting auth for GET /
[2026-01-28 13:41:45] info: [auth:rcpva8] Token from cookie: false
[2026-01-28 13:41:45] info: [auth:rcpva8] Token from header: true
[2026-01-28 13:41:45] info: [auth:rcpva8] Authenticated user 8ed89b0a-71bc-4053-8ffb-c7d97abdb2b4
[2026-01-28 13:41:45] info: [groomAssignmentController] Getting assignments for user 8ed89b0a-71bc-4053-8ffb-c7d97abdb2b4
[2026-01-28 13:41:45] info: [GET] /api/groom-assignments - 200
[2026-01-28 13:41:45] info: [DELETE] /api/groom-assignments/99999
[2026-01-28 13:41:45] info: [auth:szjulm] Starting auth for DELETE /groom-assignments/99999
[2026-01-28 13:41:45] info: [auth:szjulm] Token from cookie: false
[2026-01-28 13:41:45] info: [auth:szjulm] Token from header: true
[2026-01-28 13:41:45] info: [auth:szjulm] Authenticated user 8ed89b0a-71bc-4053-8ffb-c7d97abdb2b4
[2026-01-28 13:41:45] info: [auth:tq9x8] Starting auth for DELETE /99999
[2026-01-28 13:41:45] info: [auth:tq9x8] Token from cookie: false
[2026-01-28 13:41:45] info: [auth:tq9x8] Token from header: true
[2026-01-28 13:41:45] info: [auth:tq9x8] Authenticated user 8ed89b0a-71bc-4053-8ffb-c7d97abdb2b4
[2026-01-28 13:41:45] warn: [ownership] groom-assignment 99999 not found or not owned by user 8ed89b0a-71bc-4053-8ffb-c7d97abdb2b4
[2026-01-28 13:41:45] info: [DELETE] /api/groom-assignments/99999 - 404
[2026-01-28 13:41:45] info: [GET] /api/groom-assignments/config
[2026-01-28 13:41:45] info: [auth:73jusa] Starting auth for GET /groom-assignments/config
[2026-01-28 13:41:45] info: [auth:73jusa] Token from cookie: false
[2026-01-28 13:41:45] info: [auth:73jusa] Token from header: true
[2026-01-28 13:41:45] info: [auth:73jusa] Authenticated user 8ed89b0a-71bc-4053-8ffb-c7d97abdb2b4
[2026-01-28 13:41:45] info: [auth:yvxyj] Starting auth for GET /config
[2026-01-28 13:41:45] info: [auth:yvxyj] Token from cookie: false
[2026-01-28 13:41:45] info: [auth:yvxyj] Token from header: true
[2026-01-28 13:41:45] info: [auth:yvxyj] Authenticated user 8ed89b0a-71bc-4053-8ffb-c7d97abdb2b4
[2026-01-28 13:41:45] info: [GET] /api/groom-assignments/config - 200
[2026-01-28 13:41:45] info: [GET] /api/groom-assignments/statistics
[2026-01-28 13:41:45] info: [auth:fmu9ag] Starting auth for GET /groom-assignments/statistics
[2026-01-28 13:41:45] info: [auth:fmu9ag] Token from cookie: false
[2026-01-28 13:41:45] info: [auth:fmu9ag] Token from header: true
[2026-01-28 13:41:45] info: [auth:fmu9ag] Authenticated user 8ed89b0a-71bc-4053-8ffb-c7d97abdb2b4
[2026-01-28 13:41:45] info: [auth:d32bqu] Starting auth for GET /statistics
[2026-01-28 13:41:45] info: [auth:d32bqu] Token from cookie: false
[2026-01-28 13:41:45] info: [auth:d32bqu] Token from header: true
[2026-01-28 13:41:45] info: [auth:d32bqu] Authenticated user 8ed89b0a-71bc-4053-8ffb-c7d97abdb2b4
[2026-01-28 13:41:45] info: [groomAssignmentRoutes] Getting assignment statistics for user 8ed89b0a-71bc-4053-8ffb-c7d97abdb2b4
[2026-01-28 13:41:45] info: [GET] /api/groom-assignments/statistics - 200
[2026-01-28 13:41:45] info: [GET] /api/groom-assignments
[2026-01-28 13:41:45] info: [auth:m51ql7] Starting auth for GET /groom-assignments
[2026-01-28 13:41:45] info: [auth:m51ql7] Token from cookie: false
[2026-01-28 13:41:45] warn: [auth:m51ql7] Access token is required for GET /groom-assignments from ::ffff:127.0.0.1
[2026-01-28 13:41:45] info: [GET] /api/groom-assignments - 401
[2026-01-28 13:41:45] info: [POST] /api/groom-assignments
[2026-01-28 13:41:45] info: [auth:t2swzk] Starting auth for POST /groom-assignments
[2026-01-28 13:41:45] info: [auth:t2swzk] Token from cookie: false
[2026-01-28 13:41:45] warn: [auth:t2swzk] Access token is required for POST /groom-assignments from ::ffff:127.0.0.1
[2026-01-28 13:41:45] info: [POST] /api/groom-assignments - 401
[2026-01-28 13:41:45] info: [GET] /api/groom-assignments/dashboard
[2026-01-28 13:41:45] info: [auth:elijf] Starting auth for GET /groom-assignments/dashboard
[2026-01-28 13:41:45] info: [auth:elijf] Token from cookie: false
[2026-01-28 13:41:45] warn: [auth:elijf] Access token is required for GET /groom-assignments/dashboard from ::ffff:127.0.0.1
[2026-01-28 13:41:45] info: [GET] /api/groom-assignments/dashboard - 401
[2026-01-28 13:41:45] info: [GET] /api/groom-assignments/salary-costs
[2026-01-28 13:41:45] info: [auth:kfrfjq] Starting auth for GET /groom-assignments/salary-costs
[2026-01-28 13:41:45] info: [auth:kfrfjq] Token from cookie: false
[2026-01-28 13:41:45] warn: [auth:kfrfjq] Access token is required for GET /groom-assignments/salary-costs from ::ffff:127.0.0.1
[2026-01-28 13:41:45] info: [GET] /api/groom-assignments/salary-costs - 401
FAIL tests/integration/groomAssignmentSystem.test.mjs
  Enhanced Groom Assignment System Integration Tests
    1. Assignment Creation
      × should create a new groom assignment (104 ms)
      × should create multiple assignments for different horses (46 ms)
      × should prevent duplicate assignments (49 ms)
      √ should validate required fields (31 ms)
      √ should prevent assignment to non-owned horses (54 ms)
    2. Assignment Retrieval
      × should get all assignments for user (35 ms)
      √ should filter assignments by groom (32 ms)
      × should get assignment dashboard (33 ms)
    3. Assignment Limits
      √ should get groom assignment limits (37 ms)
      × should enforce assignment limits (75 ms)
    4. Salary Calculations
      × should calculate weekly salary costs (32 ms)
    5. Assignment Validation
      √ should validate assignment eligibility (31 ms)
    6. Assignment Removal
      × should remove an assignment (33 ms)
      √ should validate assignment ownership for removal (31 ms)
    7. Configuration and Statistics
      √ should get assignment configuration (28 ms)
      √ should get assignment statistics (75 ms)
    8. Authentication and Authorization
      √ should require authentication for all endpoints (73 ms)

  ● Enhanced Groom Assignment System Integration Tests › 1. Assignment Creation › should create a new groom assignment

    expect(received).toBe(expected) // Object.is equality

    Expected: 201
    Received: 400

    [0m [90m 116 |[39m         [33m.[39msend(assignmentData)[33m;[39m
     [90m 117 |[39m
    [31m[1m>[22m[39m[90m 118 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m201[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 119 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 120 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoHaveProperty([32m'assignment'[39m)[33m;[39m
     [90m 121 |[39m[0m

      at Object.<anonymous> (tests/integration/groomAssignmentSystem.test.mjs:118:31)

  ● Enhanced Groom Assignment System Integration Tests › 1. Assignment Creation › should create multiple assignments for different horses

    expect(received).toBe(expected) // Object.is equality

    Expected: 201
    Received: 400

    [0m [90m 142 |[39m         [33m.[39msend(assignmentData)[33m;[39m
     [90m 143 |[39m
    [31m[1m>[22m[39m[90m 144 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m201[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 145 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 146 |[39m     })[33m;[39m
     [90m 147 |[39m[0m

      at Object.<anonymous> (tests/integration/groomAssignmentSystem.test.mjs:144:31)

  ● Enhanced Groom Assignment System Integration Tests › 1. Assignment Creation › should prevent duplicate assignments

    expect(received).toContain(expected) // indexOf

    Expected substring: "already assigned"
    Received string:    "You do not own this horse"

    [0m [90m 161 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m400[39m)[33m;[39m
     [90m 162 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 163 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoContain([32m'already assigned'[39m)[33m;[39m
     [90m     |[39m                                     [31m[1m^[22m[39m
     [90m 164 |[39m     })[33m;[39m
     [90m 165 |[39m
     [90m 166 |[39m     it([32m'should validate required fields'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.<anonymous> (tests/integration/groomAssignmentSystem.test.mjs:163:37)

  ● Enhanced Groom Assignment System Integration Tests › 2. Assignment Retrieval › should get all assignments for user

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

    [0m [90m 240 |[39m       [36mconst[39m { assignments[33m,[39m statistics } [33m=[39m response[33m.[39mbody[33m.[39mdata[33m;[39m
     [90m 241 |[39m       expect([33mArray[39m[33m.[39misArray(assignments))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 242 |[39m       expect(assignments[33m.[39mlength)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 243 |[39m       expect(statistics[33m.[39mactiveAssignments)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m 244 |[39m     })[33m;[39m
     [90m 245 |[39m[0m

      at Object.<anonymous> (tests/integration/groomAssignmentSystem.test.mjs:242:34)

  ● Enhanced Groom Assignment System Integration Tests › 2. Assignment Retrieval › should get assignment dashboard

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

    [0m [90m 273 |[39m
     [90m 274 |[39m       [36mconst[39m { summary[33m,[39m salaryCosts } [33m=[39m response[33m.[39mbody[33m.[39mdata[33m;[39m
    [31m[1m>[22m[39m[90m 275 |[39m       expect(summary[33m.[39mtotalActiveAssignments)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m     |[39m                                              [31m[1m^[22m[39m
     [90m 276 |[39m       expect(salaryCosts[33m.[39mtotalWeeklyCost)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m 277 |[39m     })[33m;[39m
     [90m 278 |[39m   })[33m;[39m[0m

      at Object.<anonymous> (tests/integration/groomAssignmentSystem.test.mjs:275:46)

  ● Enhanced Groom Assignment System Integration Tests › 3. Assignment Limits › should enforce assignment limits

    expect(received).toContain(expected) // indexOf

    Expected substring: "maximum assignments"
    Received string:    "You do not own this horse"

    [0m [90m 332 |[39m           } [36melse[39m {
     [90m 333 |[39m             failedAssignments[33m++[39m[33m;[39m
    [31m[1m>[22m[39m[90m 334 |[39m             expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoContain([32m'maximum assignments'[39m)[33m;[39m
     [90m     |[39m                                           [31m[1m^[22m[39m
     [90m 335 |[39m           }
     [90m 336 |[39m         }
     [90m 337 |[39m[0m

      at Object.<anonymous> (tests/integration/groomAssignmentSystem.test.mjs:334:43)

  ● Enhanced Groom Assignment System Integration Tests › 4. Salary Calculations › should calculate weekly salary costs

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

    [0m [90m 362 |[39m
     [90m 363 |[39m       [36mconst[39m { totalWeeklyCost[33m,[39m groomCosts } [33m=[39m response[33m.[39mbody[33m.[39mdata[33m;[39m
    [31m[1m>[22m[39m[90m 364 |[39m       expect(totalWeeklyCost)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 365 |[39m       expect([33mArray[39m[33m.[39misArray(groomCosts))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 366 |[39m       expect(groomCosts[33m.[39mlength)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m 367 |[39m[0m

      at Object.<anonymous> (tests/integration/groomAssignmentSystem.test.mjs:364:31)

  ● Enhanced Groom Assignment System Integration Tests › 6. Assignment Removal › should remove an assignment

    expect(received).toBeDefined()

    Received: undefined

    [0m [90m 411 |[39m
     [90m 412 |[39m       [36mconst[39m assignment [33m=[39m assignmentsResponse[33m.[39mbody[33m.[39mdata[33m.[39massignments[33m.[39mfind(a [33m=>[39m a[33m.[39misActive)[33m;[39m
    [31m[1m>[22m[39m[90m 413 |[39m       expect(assignment)[33m.[39mtoBeDefined()[33m;[39m
     [90m     |[39m                          [31m[1m^[22m[39m
     [90m 414 |[39m
     [90m 415 |[39m       [90m// Remove the assignment[39m
     [90m 416 |[39m       [36mconst[39m response [33m=[39m [36mawait[39m request(app)[0m

      at Object.<anonymous> (tests/integration/groomAssignmentSystem.test.mjs:413:26)

[2026-01-28 13:41:45] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:41:45] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:41:45] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:41:45] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:41:46] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:46] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:46] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:46] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:46] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:46] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:46] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:46] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:46] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:46] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:41:46] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 13:41:46] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:46] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:41:46] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:41:46] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:41:46] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:41:46] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:41:46] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 13:41:46] info: [GET] /api/horses/146634/enhanced-trait-history
[2026-01-28 13:41:46] info: [auth:vmgn0q] Starting auth for GET /horses/146634/enhanced-trait-history
[2026-01-28 13:41:46] info: [auth:vmgn0q] Token from cookie: false
[2026-01-28 13:41:46] info: [auth:vmgn0q] Token from header: true
[2026-01-28 13:41:46] info: [auth:vmgn0q] Authenticated user 5589e746-68ca-46ae-b5ec-e073c8501064
[2026-01-28 13:41:46] info: [auth:1sl7pj] Starting auth for GET /horses/146634/enhanced-trait-history
[2026-01-28 13:41:46] info: [auth:1sl7pj] Token from cookie: false
[2026-01-28 13:41:46] info: [auth:1sl7pj] Token from header: true
[2026-01-28 13:41:46] info: [auth:1sl7pj] Authenticated user 5589e746-68ca-46ae-b5ec-e073c8501064
[2026-01-28 13:41:46] info: [ownership] Validated ownership: user 5589e746-68ca-46ae-b5ec-e073c8501064 owns horse 146634
[2026-01-28 13:41:46] info: Enhanced trait history generated for horse 146634 by user 5589e746-68ca-46ae-b5ec-e073c8501064
[2026-01-28 13:41:46] info: [GET] /api/horses/146634/enhanced-trait-history - 200
[2026-01-28 13:41:46] info: [GET] /api/horses/146635/epigenetic-insights
[2026-01-28 13:41:46] info: [auth:n1gk7l] Starting auth for GET /horses/146635/epigenetic-insights
[2026-01-28 13:41:46] info: [auth:n1gk7l] Token from cookie: false
[2026-01-28 13:41:46] info: [auth:n1gk7l] Token from header: true
[2026-01-28 13:41:46] info: [auth:n1gk7l] Authenticated user 5589e746-68ca-46ae-b5ec-e073c8501064
[2026-01-28 13:41:46] info: [auth:pkrw0t] Starting auth for GET /horses/146635/epigenetic-insights
[2026-01-28 13:41:46] info: [auth:pkrw0t] Token from cookie: false
[2026-01-28 13:41:46] info: [auth:pkrw0t] Token from header: true
[2026-01-28 13:41:46] info: [auth:pkrw0t] Authenticated user 5589e746-68ca-46ae-b5ec-e073c8501064
[2026-01-28 13:41:46] info: [ownership] Validated ownership: user 5589e746-68ca-46ae-b5ec-e073c8501064 owns horse 146635
[2026-01-28 13:41:46] info: Epigenetic insights generated for horse 146635 by user 5589e746-68ca-46ae-b5ec-e073c8501064
[2026-01-28 13:41:46] info: [GET] /api/horses/146635/epigenetic-insights - 200
[2026-01-28 13:41:46] info: [GET] /api/horses/146634/trait-timeline
[2026-01-28 13:41:46] info: [auth:rgjv2] Starting auth for GET /horses/146634/trait-timeline
[2026-01-28 13:41:46] info: [auth:rgjv2] Token from cookie: false
[2026-01-28 13:41:46] info: [auth:rgjv2] Token from header: true
[2026-01-28 13:41:46] info: [auth:rgjv2] Authenticated user 5589e746-68ca-46ae-b5ec-e073c8501064
[2026-01-28 13:41:46] info: [auth:onx102] Starting auth for GET /horses/146634/trait-timeline
[2026-01-28 13:41:46] info: [auth:onx102] Token from cookie: false
[2026-01-28 13:41:46] info: [auth:onx102] Token from header: true
[2026-01-28 13:41:46] info: [auth:onx102] Authenticated user 5589e746-68ca-46ae-b5ec-e073c8501064
[2026-01-28 13:41:46] info: [ownership] Validated ownership: user 5589e746-68ca-46ae-b5ec-e073c8501064 owns horse 146634
[2026-01-28 13:41:46] info: Trait timeline generated for horse 146634 by user 5589e746-68ca-46ae-b5ec-e073c8501064
[2026-01-28 13:41:46] info: [GET] /api/horses/146634/trait-timeline - 200
[2026-01-28 13:41:47] info: [GET] /api/users/5589e746-68ca-46ae-b5ec-e073c8501064/stable-epigenetic-report
[2026-01-28 13:41:47] info: [auth:ptb2zd] Starting auth for GET /users/5589e746-68ca-46ae-b5ec-e073c8501064/stable-epigenetic-report
[2026-01-28 13:41:47] info: [auth:ptb2zd] Token from cookie: false
[2026-01-28 13:41:47] info: [auth:ptb2zd] Token from header: true
[2026-01-28 13:41:47] info: [auth:ptb2zd] Authenticated user 5589e746-68ca-46ae-b5ec-e073c8501064
[2026-01-28 13:41:47] info: [auth:7p70mp] Starting auth for GET /users/5589e746-68ca-46ae-b5ec-e073c8501064/stable-epigenetic-report
[2026-01-28 13:41:47] info: [auth:7p70mp] Token from cookie: false
[2026-01-28 13:41:47] info: [auth:7p70mp] Token from header: true
[2026-01-28 13:41:47] info: [auth:7p70mp] Authenticated user 5589e746-68ca-46ae-b5ec-e073c8501064
[2026-01-28 13:41:47] info: [GET] /api/users/5589e746-68ca-46ae-b5ec-e073c8501064/stable-epigenetic-report - 200
[2026-01-28 13:41:47] info: [POST] /api/horses/compare-epigenetics
[2026-01-28 13:41:47] info: [auth:10rp8j] Starting auth for POST /horses/compare-epigenetics
[2026-01-28 13:41:47] info: [auth:10rp8j] Token from cookie: false
[2026-01-28 13:41:47] info: [auth:10rp8j] Token from header: true
[2026-01-28 13:41:47] info: [auth:10rp8j] Authenticated user 5589e746-68ca-46ae-b5ec-e073c8501064
[2026-01-28 13:41:47] info: [auth:la9a2w] Starting auth for POST /horses/compare-epigenetics
[2026-01-28 13:41:47] info: [auth:la9a2w] Token from cookie: false
[2026-01-28 13:41:47] info: [auth:la9a2w] Token from header: true
[2026-01-28 13:41:47] info: [auth:la9a2w] Authenticated user 5589e746-68ca-46ae-b5ec-e073c8501064
[2026-01-28 13:41:47] info: [POST] /api/horses/compare-epigenetics - 403
[2026-01-28 13:41:47] info: [GET] /api/horses/trait-trends?user%5Bconnect%5D%5Bid%5D=5589e746-68ca-46ae-b5ec-e073c8501064&timeframe=30
[2026-01-28 13:41:47] info: [auth:p4pwwn] Starting auth for GET /horses/trait-trends
[2026-01-28 13:41:47] info: [auth:p4pwwn] Token from cookie: false
[2026-01-28 13:41:47] info: [auth:p4pwwn] Token from header: true
[2026-01-28 13:41:47] info: [auth:p4pwwn] Authenticated user 5589e746-68ca-46ae-b5ec-e073c8501064
[2026-01-28 13:41:47] info: [auth:a3xfol] Starting auth for GET /trait-trends
[2026-01-28 13:41:47] info: [auth:a3xfol] Token from cookie: false
[2026-01-28 13:41:47] info: [auth:a3xfol] Token from header: true
[2026-01-28 13:41:47] info: [auth:a3xfol] Authenticated user 5589e746-68ca-46ae-b5ec-e073c8501064
[2026-01-28 13:41:47] info: [GET] /api/horses/trait-trends?user%5Bconnect%5D%5Bid%5D=5589e746-68ca-46ae-b5ec-e073c8501064&timeframe=30 - 400
[2026-01-28 13:41:47] info: [GET] /api/horses/146634/enhanced-trait-history?traitType=positive&discoveryMethod=milestone_evaluation&dateFrom=2026-01-18T18%3A41%3A47.147Z&dateTo=2026-01-28T18%3A41%3A47.147Z
[2026-01-28 13:41:47] info: [auth:9clls7] Starting auth for GET /horses/146634/enhanced-trait-history
[2026-01-28 13:41:47] info: [auth:9clls7] Token from cookie: false
[2026-01-28 13:41:47] info: [auth:9clls7] Token from header: true
[2026-01-28 13:41:47] info: [auth:9clls7] Authenticated user 5589e746-68ca-46ae-b5ec-e073c8501064
[2026-01-28 13:41:47] info: [auth:ip7d1p] Starting auth for GET /horses/146634/enhanced-trait-history
[2026-01-28 13:41:47] info: [auth:ip7d1p] Token from cookie: false
[2026-01-28 13:41:47] info: [auth:ip7d1p] Token from header: true
[2026-01-28 13:41:47] info: [auth:ip7d1p] Authenticated user 5589e746-68ca-46ae-b5ec-e073c8501064
[2026-01-28 13:41:47] info: [ownership] Validated ownership: user 5589e746-68ca-46ae-b5ec-e073c8501064 owns horse 146634
[2026-01-28 13:41:47] info: Enhanced trait history generated for horse 146634 by user 5589e746-68ca-46ae-b5ec-e073c8501064
[2026-01-28 13:41:47] info: [GET] /api/horses/146634/enhanced-trait-history?traitType=positive&discoveryMethod=milestone_evaluation&dateFrom=2026-01-18T18%3A41%3A47.147Z&dateTo=2026-01-28T18%3A41%3A47.147Z - 200
[2026-01-28 13:41:47] info: [GET] /api/horses/146635/epigenetic-report-export?format=detailed
[2026-01-28 13:41:47] info: [auth:xfo7ac] Starting auth for GET /horses/146635/epigenetic-report-export
[2026-01-28 13:41:47] info: [auth:xfo7ac] Token from cookie: false
[2026-01-28 13:41:47] info: [auth:xfo7ac] Token from header: true
[2026-01-28 13:41:47] info: [auth:xfo7ac] Authenticated user 5589e746-68ca-46ae-b5ec-e073c8501064
[2026-01-28 13:41:47] info: [auth:o1zilp] Starting auth for GET /horses/146635/epigenetic-report-export
[2026-01-28 13:41:47] info: [auth:o1zilp] Token from cookie: false
[2026-01-28 13:41:47] info: [auth:o1zilp] Token from header: true
[2026-01-28 13:41:47] info: [auth:o1zilp] Authenticated user 5589e746-68ca-46ae-b5ec-e073c8501064
[2026-01-28 13:41:47] info: [ownership] Validated ownership: user 5589e746-68ca-46ae-b5ec-e073c8501064 owns horse 146635
[2026-01-28 13:41:47] info: Epigenetic report export generated for horse 146635 (detailed) by user 5589e746-68ca-46ae-b5ec-e073c8501064
[2026-01-28 13:41:47] info: [GET] /api/horses/146635/epigenetic-report-export?format=detailed - 200
[2026-01-28 13:41:47] info: [GET] /api/horses/146633/enhanced-trait-history
[2026-01-28 13:41:47] info: [auth:jl6tkd] Starting auth for GET /horses/146633/enhanced-trait-history
[2026-01-28 13:41:47] info: [auth:jl6tkd] Token from cookie: false
[2026-01-28 13:41:47] warn: [auth:jl6tkd] Access token is required for GET /horses/146633/enhanced-trait-history from ::ffff:127.0.0.1
[2026-01-28 13:41:47] info: [GET] /api/horses/146633/enhanced-trait-history - 401
[2026-01-28 13:41:47] info: [GET] /api/horses/146636/enhanced-trait-history
[2026-01-28 13:41:47] info: [auth:t50zl5g] Starting auth for GET /horses/146636/enhanced-trait-history
[2026-01-28 13:41:47] info: [auth:t50zl5g] Token from cookie: false
[2026-01-28 13:41:47] info: [auth:t50zl5g] Token from header: true
[2026-01-28 13:41:47] info: [auth:t50zl5g] Authenticated user 5589e746-68ca-46ae-b5ec-e073c8501064
[2026-01-28 13:41:47] info: [auth:8337yr] Starting auth for GET /horses/146636/enhanced-trait-history
[2026-01-28 13:41:47] info: [auth:8337yr] Token from cookie: false
[2026-01-28 13:41:47] info: [auth:8337yr] Token from header: true
[2026-01-28 13:41:47] info: [auth:8337yr] Authenticated user 5589e746-68ca-46ae-b5ec-e073c8501064
[2026-01-28 13:41:47] warn: [ownership] horse 146636 not found or not owned by user 5589e746-68ca-46ae-b5ec-e073c8501064
[2026-01-28 13:41:47] info: [GET] /api/horses/146636/enhanced-trait-history - 404
[2026-01-28 13:41:47] info: [POST] /api/horses/compare-epigenetics
[2026-01-28 13:41:47] info: [auth:0sb5ha] Starting auth for POST /horses/compare-epigenetics
[2026-01-28 13:41:47] info: [auth:0sb5ha] Token from cookie: false
[2026-01-28 13:41:47] info: [auth:0sb5ha] Token from header: true
[2026-01-28 13:41:47] info: [auth:0sb5ha] Authenticated user 5589e746-68ca-46ae-b5ec-e073c8501064
[2026-01-28 13:41:47] info: [auth:s0bw8] Starting auth for POST /horses/compare-epigenetics
[2026-01-28 13:41:47] info: [auth:s0bw8] Token from cookie: false
[2026-01-28 13:41:47] info: [auth:s0bw8] Token from header: true
[2026-01-28 13:41:47] info: [auth:s0bw8] Authenticated user 5589e746-68ca-46ae-b5ec-e073c8501064
[2026-01-28 13:41:47] info: [POST] /api/horses/compare-epigenetics - 400
[2026-01-28 13:41:47] info: [GET] /api/horses/99999/enhanced-trait-history
[2026-01-28 13:41:47] info: [auth:39snt6] Starting auth for GET /horses/99999/enhanced-trait-history
[2026-01-28 13:41:47] info: [auth:39snt6] Token from cookie: false
[2026-01-28 13:41:47] info: [auth:39snt6] Token from header: true
[2026-01-28 13:41:47] info: [auth:39snt6] Authenticated user 5589e746-68ca-46ae-b5ec-e073c8501064
[2026-01-28 13:41:47] info: [auth:2ssha] Starting auth for GET /horses/99999/enhanced-trait-history
[2026-01-28 13:41:47] info: [auth:2ssha] Token from cookie: false
[2026-01-28 13:41:47] info: [auth:2ssha] Token from header: true
[2026-01-28 13:41:47] info: [auth:2ssha] Authenticated user 5589e746-68ca-46ae-b5ec-e073c8501064
[2026-01-28 13:41:47] warn: [ownership] horse 99999 not found or not owned by user 5589e746-68ca-46ae-b5ec-e073c8501064
[2026-01-28 13:41:47] info: [GET] /api/horses/99999/enhanced-trait-history - 404
FAIL tests/routes/enhancedReportingRoutes.test.mjs
  Enhanced Reporting API Routes
    Enhanced Trait History Endpoints
      √ GET /api/horses/:id/enhanced-trait-history should return comprehensive trait history (98 ms)
      √ GET /api/horses/:id/epigenetic-insights should return advanced epigenetic analysis (80 ms)
      √ GET /api/horses/:id/trait-timeline should return detailed trait development timeline (50 ms)
    Multi-Horse Analysis Endpoints
      √ GET /api/users/:id/stable-epigenetic-report should return stable-wide epigenetic analysis (44 ms)
      × POST /api/horses/compare-epigenetics should compare multiple horses (59 ms)
      × GET /api/horses/trait-trends should return trait development trends (37 ms)
    Advanced Filtering and Export
      √ GET /api/horses/:id/enhanced-trait-history with filters should return filtered results (79 ms)
      √ GET /api/horses/:id/epigenetic-report-export should return exportable report data (41 ms)
    Authentication and Validation
      √ should require authentication for enhanced reporting endpoints (22 ms)
      √ should validate horse ownership for reporting endpoints (55 ms)
      √ should validate input parameters for comparison endpoint (29 ms)
      √ should handle non-existent horse IDs in reporting (32 ms)

  ● Enhanced Reporting API Routes › Multi-Horse Analysis Endpoints › POST /api/horses/compare-epigenetics should compare multiple horses

    expected 200 "OK", got 403 "Forbidden"

    [0m [90m 257 |[39m           horseIds[33m:[39m [testHorses[[35m0[39m][33m.[39mid[33m,[39m testHorses[[35m1[39m][33m.[39mid[33m,[39m testHorses[[35m2[39m][33m.[39mid][33m,[39m
     [90m 258 |[39m         })
    [31m[1m>[22m[39m[90m 259 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 260 |[39m
     [90m 261 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 262 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoBeDefined()[33m;[39m[0m

      at Object.<anonymous> (tests/routes/enhancedReportingRoutes.test.mjs:259:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ● Enhanced Reporting API Routes › Multi-Horse Analysis Endpoints › GET /api/horses/trait-trends should return trait development trends

    expected 200 "OK", got 400 "Bad Request"

    [0m [90m 274 |[39m         [33m.[39mquery({ user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m timeframe[33m:[39m [35m30[39m })
     [90m 275 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)
    [31m[1m>[22m[39m[90m 276 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 277 |[39m
     [90m 278 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 279 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoBeDefined()[33m;[39m[0m

      at Object.<anonymous> (tests/routes/enhancedReportingRoutes.test.mjs:276:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

[2026-01-28 13:41:47] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:41:47] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:41:47] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:41:47] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:41:48] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:48] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:48] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:48] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:48] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:48] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:48] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:48] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:48] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:48] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:41:48] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 13:41:48] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:48] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:41:48] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:41:48] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:41:48] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:41:48] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:41:48] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 13:41:48] info: [POST] /api/auth/register
[2026-01-28 13:41:48] info: [TokenRotation] Created new token pair
[2026-01-28 13:41:48] info: [EmailVerification] Created verification token
[2026-01-28 13:41:48] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:41:48] info: [authController.register] Verification email sent
[2026-01-28 13:41:49] info: [POST] /api/auth/register - 201
[2026-01-28 13:41:49] info: [POST] /api/auth/login
[2026-01-28 13:41:49] info: [TokenRotation] Created new token pair
[2026-01-28 13:41:49] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 13:41:49] info: [POST] /api/auth/login - 200
[2026-01-28 13:41:49] info: [GET] /api/users/383f9ffe-4704-459f-b903-5a9eff788504/progress
[2026-01-28 13:41:49] info: [auth:uinwio] Starting auth for GET /users/383f9ffe-4704-459f-b903-5a9eff788504/progress
[2026-01-28 13:41:49] info: [auth:uinwio] Token from cookie: false
[2026-01-28 13:41:49] info: [auth:uinwio] Token from header: true
[2026-01-28 13:41:49] info: [auth:uinwio] Authenticated user 383f9ffe-4704-459f-b903-5a9eff788504
[2026-01-28 13:41:49] info: [auth:7tzhkr] Starting auth for GET /383f9ffe-4704-459f-b903-5a9eff788504/progress
[2026-01-28 13:41:49] info: [auth:7tzhkr] Token from cookie: false
[2026-01-28 13:41:49] info: [auth:7tzhkr] Token from header: true
[2026-01-28 13:41:49] info: [auth:7tzhkr] Authenticated user 383f9ffe-4704-459f-b903-5a9eff788504
[2026-01-28 13:41:49] info: [userRoutes] Self-access validated: user 383f9ffe-4704-459f-b903-5a9eff788504 accessing own data
[2026-01-28 13:41:49] info: [userController.getUserProgressAPI] Cache MISS - Getting comprehensive progress for user 383f9ffe-4704-459f-b903-5a9eff788504
[2026-01-28 13:41:49] info: [GET] /api/users/383f9ffe-4704-459f-b903-5a9eff788504/progress - 200
[2026-01-28 13:41:49] info: [GET] /api/users/383f9ffe-4704-459f-b903-5a9eff788504/progress
[2026-01-28 13:41:49] info: [auth:lr7knq] Starting auth for GET /users/383f9ffe-4704-459f-b903-5a9eff788504/progress
[2026-01-28 13:41:49] info: [auth:lr7knq] Token from cookie: false
[2026-01-28 13:41:49] info: [auth:lr7knq] Token from header: true
[2026-01-28 13:41:49] info: [auth:lr7knq] Authenticated user 383f9ffe-4704-459f-b903-5a9eff788504
[2026-01-28 13:41:49] info: [auth:cm5x7i] Starting auth for GET /383f9ffe-4704-459f-b903-5a9eff788504/progress
[2026-01-28 13:41:49] info: [auth:cm5x7i] Token from cookie: false
[2026-01-28 13:41:49] info: [auth:cm5x7i] Token from header: true
[2026-01-28 13:41:49] info: [auth:cm5x7i] Authenticated user 383f9ffe-4704-459f-b903-5a9eff788504
[2026-01-28 13:41:49] info: [userRoutes] Self-access validated: user 383f9ffe-4704-459f-b903-5a9eff788504 accessing own data
[2026-01-28 13:41:49] info: [userController.getUserProgressAPI] Cache MISS - Getting comprehensive progress for user 383f9ffe-4704-459f-b903-5a9eff788504
[2026-01-28 13:41:49] info: [GET] /api/users/383f9ffe-4704-459f-b903-5a9eff788504/progress - 200
[2026-01-28 13:41:49] info: [GET] /api/users/dashboard/383f9ffe-4704-459f-b903-5a9eff788504
[2026-01-28 13:41:49] info: [auth:630zx] Starting auth for GET /users/dashboard/383f9ffe-4704-459f-b903-5a9eff788504
[2026-01-28 13:41:49] info: [auth:630zx] Token from cookie: false
[2026-01-28 13:41:49] info: [auth:630zx] Token from header: true
[2026-01-28 13:41:49] info: [auth:630zx] Authenticated user 383f9ffe-4704-459f-b903-5a9eff788504
[2026-01-28 13:41:49] info: [auth:mzn20c] Starting auth for GET /dashboard/383f9ffe-4704-459f-b903-5a9eff788504
[2026-01-28 13:41:49] info: [auth:mzn20c] Token from cookie: false
[2026-01-28 13:41:49] info: [auth:mzn20c] Token from header: true
[2026-01-28 13:41:49] info: [auth:mzn20c] Authenticated user 383f9ffe-4704-459f-b903-5a9eff788504
[2026-01-28 13:41:49] info: [userRoutes] Self-access validated: user 383f9ffe-4704-459f-b903-5a9eff788504 accessing own data
[2026-01-28 13:41:49] info: [userController.getDashboardData] Cache MISS - Getting dashboard for user 383f9ffe-4704-459f-b903-5a9eff788504
[2026-01-28 13:41:49] info: [trainingController.getTrainableHorses] Getting trainable horses for user 383f9ffe-4704-459f-b903-5a9eff788504
[2026-01-28 13:41:49] info: [trainingController.getTrainableHorses] User 383f9ffe-4704-459f-b903-5a9eff788504 has no horses
[2026-01-28 13:41:49] info: [GET] /api/users/dashboard/383f9ffe-4704-459f-b903-5a9eff788504 - 200
[2026-01-28 13:41:49] info: [GET] /api/users/999999/progress
[2026-01-28 13:41:49] info: [auth:wxxymb] Starting auth for GET /users/999999/progress
[2026-01-28 13:41:49] info: [auth:wxxymb] Token from cookie: false
[2026-01-28 13:41:49] info: [auth:wxxymb] Token from header: true
[2026-01-28 13:41:49] info: [auth:wxxymb] Authenticated user 383f9ffe-4704-459f-b903-5a9eff788504
[2026-01-28 13:41:49] info: [auth:nqn8be] Starting auth for GET /999999/progress
[2026-01-28 13:41:49] info: [auth:nqn8be] Token from cookie: false
[2026-01-28 13:41:49] info: [auth:nqn8be] Token from header: true
[2026-01-28 13:41:49] info: [auth:nqn8be] Authenticated user 383f9ffe-4704-459f-b903-5a9eff788504
[2026-01-28 13:41:49] warn: [userRoutes] Validation errors for /:id: [{"type":"field","value":"999999","msg":"User ID must be a valid UUID","path":"id","location":"params"}]
[2026-01-28 13:41:49] info: [GET] /api/users/999999/progress - 400
[2026-01-28 13:41:49] info: [GET] /api/users/invalid/progress
[2026-01-28 13:41:49] info: [auth:18jic5] Starting auth for GET /users/invalid/progress
[2026-01-28 13:41:49] info: [auth:18jic5] Token from cookie: false
[2026-01-28 13:41:49] info: [auth:18jic5] Token from header: true
[2026-01-28 13:41:49] info: [auth:18jic5] Authenticated user 383f9ffe-4704-459f-b903-5a9eff788504
[2026-01-28 13:41:49] info: [auth:8n0d77] Starting auth for GET /invalid/progress
[2026-01-28 13:41:49] info: [auth:8n0d77] Token from cookie: false
[2026-01-28 13:41:49] info: [auth:8n0d77] Token from header: true
[2026-01-28 13:41:49] info: [auth:8n0d77] Authenticated user 383f9ffe-4704-459f-b903-5a9eff788504
[2026-01-28 13:41:49] warn: [userRoutes] Validation errors for /:id: [{"type":"field","value":"invalid","msg":"User ID must be a valid UUID","path":"id","location":"params"}]
[2026-01-28 13:41:49] info: [GET] /api/users/invalid/progress - 400
[2026-01-28 13:41:49] info: [GET] /api/users/383f9ffe-4704-459f-b903-5a9eff788504/progress
[2026-01-28 13:41:49] info: [auth:7nd5d9] Starting auth for GET /users/383f9ffe-4704-459f-b903-5a9eff788504/progress
[2026-01-28 13:41:49] info: [auth:7nd5d9] Token from cookie: false
[2026-01-28 13:41:49] warn: [auth:7nd5d9] Access token is required for GET /users/383f9ffe-4704-459f-b903-5a9eff788504/progress from ::ffff:127.0.0.1
[2026-01-28 13:41:49] info: [GET] /api/users/383f9ffe-4704-459f-b903-5a9eff788504/progress - 401
[2026-01-28 13:41:49] info: [GET] /api/users/383f9ffe-4704-459f-b903-5a9eff788504/progress
[2026-01-28 13:41:49] info: [auth:anda0q] Starting auth for GET /users/383f9ffe-4704-459f-b903-5a9eff788504/progress
[2026-01-28 13:41:49] info: [auth:anda0q] Token from cookie: false
[2026-01-28 13:41:49] info: [auth:anda0q] Token from header: true
[2026-01-28 13:41:49] info: [auth:anda0q] Authenticated user 383f9ffe-4704-459f-b903-5a9eff788504
[2026-01-28 13:41:49] info: [auth:0e00rr] Starting auth for GET /383f9ffe-4704-459f-b903-5a9eff788504/progress
[2026-01-28 13:41:49] info: [auth:0e00rr] Token from cookie: false
[2026-01-28 13:41:49] info: [auth:0e00rr] Token from header: true
[2026-01-28 13:41:49] info: [auth:0e00rr] Authenticated user 383f9ffe-4704-459f-b903-5a9eff788504
[2026-01-28 13:41:49] info: [userRoutes] Self-access validated: user 383f9ffe-4704-459f-b903-5a9eff788504 accessing own data
[2026-01-28 13:41:49] info: [GET] /api/users/383f9ffe-4704-459f-b903-5a9eff788504/progress - 200
FAIL tests/integration/userProgressAPI.integration.test.mjs
  🎯 INTEGRATION: User Progress API - Complete Progress Tracking
    🔐 STEP 1: User Setup & Initial Progress State
      √ should create user and establish initial progress state (673 ms)
      × should return correct initial progress data via API (39 ms)
    🐎 STEP 2: Horse Creation for Training Integration
      × should create training-eligible horse (10 ms)
    🏋️ STEP 3: XP Gain Through Training & Progress Updates
      × should gain XP from training and update progress correctly (2 ms)
      × should handle multiple training sessions and XP accumulation (1 ms)
    🎯 STEP 4: Level-Up Detection & Multi-Level Progression
      × should level up when reaching XP threshold (3 ms)
      × should handle multiple level gains in single XP award (32 ms)
    📊 STEP 5: Dashboard Data Integration
      × should return comprehensive dashboard data with progress integration (48 ms)
    🔍 STEP 6: API Consistency & Edge Cases
      √ should handle invalid user ID gracefully (26 ms)
      √ should validate user ID format (27 ms)
      √ should require authentication for progress endpoints (19 ms)
    🎊 STEP 7: End-to-End Progress Validation
      √ should validate complete progress tracking integrity (28 ms)
      × should validate all business rules were enforced throughout progression

  ● 🎯 INTEGRATION: User Progress API - Complete Progress Tracking › 🔐 STEP 1: User Setup & Initial Progress State › should return correct initial progress data via API

    expect(received).toEqual(expected) // deep equality

    - Expected  - 5
    + Received  + 1

    @@ -1,14 +1,10 @@
      Object {
        "level": 1,
        "progressPercentage": 0,
        "totalEarnings": 1000,
    -   "user": Object {
    -     "connect": Object {
    -       "id": "383f9ffe-4704-459f-b903-5a9eff788504",
    -     },
    -   },
    +   "userId": "383f9ffe-4704-459f-b903-5a9eff788504",
        "username": "progresstest",
        "xp": 0,
        "xpForCurrentLevel": 0,
        "xpForNextLevel": 200,
        "xpToNextLevel": 200,

    [0m [90m 156 |[39m
     [90m 157 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 158 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoEqual({
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 159 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m
     [90m 160 |[39m         username[33m:[39m testUser[33m.[39musername[33m,[39m
     [90m 161 |[39m         level[33m:[39m [35m1[39m[33m,[39m[0m

      at Object.<anonymous> (tests/integration/userProgressAPI.integration.test.mjs:158:34)

  ● 🎯 INTEGRATION: User Progress API - Complete Progress Tracking › 🐎 STEP 2: Horse Creation for Training Integration › should create training-eligible horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Progress Test Horse",
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "383f9ffe-4704-459f-b903-5a9eff788504"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        age: 7,
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [
            "athletic",
            "focused"
          ],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 188 |[39m       [36mconst[39m calculatedAge [33m=[39m currentDate[33m.[39mgetFullYear() [33m-[39m birthDate[33m.[39mgetFullYear()[33m;[39m
     [90m 189 |[39m
    [31m[1m>[22m[39m[90m 190 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 191 |[39m         data[33m:[39m {
     [90m 192 |[39m           name[33m:[39m [32m'Progress Test Horse'[39m[33m,[39m
     [90m 193 |[39m           breedId[33m:[39m breed[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/userProgressAPI.integration.test.mjs:190:19)

  ● 🎯 INTEGRATION: User Progress API - Complete Progress Tracking › 🏋️ STEP 3: XP Gain Through Training & Progress Updates › should gain XP from training and update progress correctly

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 218 |[39m       [36mconst[39m trainingResponse [33m=[39m [36mawait[39m trainingRequest()
     [90m 219 |[39m         [33m.[39msend({
    [31m[1m>[22m[39m[90m 220 |[39m           horseId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 221 |[39m           discipline[33m:[39m [32m'Racing'[39m[33m,[39m
     [90m 222 |[39m         })
     [90m 223 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/integration/userProgressAPI.integration.test.mjs:220:30)

  ● 🎯 INTEGRATION: User Progress API - Complete Progress Tracking › 🏋️ STEP 3: XP Gain Through Training & Progress Updates › should handle multiple training sessions and XP accumulation

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 251 |[39m         [90m// Update previous training log to be in the past[39m
     [90m 252 |[39m         [36mconst[39m lastLog [33m=[39m [36mawait[39m prisma[33m.[39mtrainingLog[33m.[39mfindFirst({
    [31m[1m>[22m[39m[90m 253 |[39m           where[33m:[39m { horseId[33m:[39m testHorse[33m.[39mid }[33m,[39m
     [90m     |[39m                                       [31m[1m^[22m[39m
     [90m 254 |[39m           orderBy[33m:[39m { trainedAt[33m:[39m [32m'desc'[39m }[33m,[39m
     [90m 255 |[39m         })[33m;[39m
     [90m 256 |[39m[0m

      at Object.<anonymous> (tests/integration/userProgressAPI.integration.test.mjs:253:39)

  ● 🎯 INTEGRATION: User Progress API - Complete Progress Tracking › 🎯 STEP 4: Level-Up Detection & Multi-Level Progression › should level up when reaching XP threshold

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 298 |[39m       [90m// STEP 2: One more training to trigger level-up (195 + 5 = 200 XP)[39m
     [90m 299 |[39m       [36mconst[39m lastLog [33m=[39m [36mawait[39m prisma[33m.[39mtrainingLog[33m.[39mfindFirst({
    [31m[1m>[22m[39m[90m 300 |[39m         where[33m:[39m { horseId[33m:[39m testHorse[33m.[39mid }[33m,[39m
     [90m     |[39m                                     [31m[1m^[22m[39m
     [90m 301 |[39m         orderBy[33m:[39m { trainedAt[33m:[39m [32m'desc'[39m }[33m,[39m
     [90m 302 |[39m       })[33m;[39m
     [90m 303 |[39m[0m

      at Object.<anonymous> (tests/integration/userProgressAPI.integration.test.mjs:300:37)

  ● 🎯 INTEGRATION: User Progress API - Complete Progress Tracking › 🎯 STEP 4: Level-Up Detection & Multi-Level Progression › should handle multiple level gains in single XP award

    expect(received).toEqual(expected) // deep equality

    - Expected  - 5
    + Received  + 1

    @@ -1,14 +1,10 @@
      Object {
        "level": 3,
        "progressPercentage": 50,
        "totalEarnings": 1000,
    -   "user": Object {
    -     "connect": Object {
    -       "id": "383f9ffe-4704-459f-b903-5a9eff788504",
    -     },
    -   },
    +   "userId": "383f9ffe-4704-459f-b903-5a9eff788504",
        "username": "progresstest",
        "xp": 350,
        "xpForCurrentLevel": 300,
        "xpForNextLevel": 400,
        "xpToNextLevel": 50,

    [0m [90m 360 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m 361 |[39m
    [31m[1m>[22m[39m[90m 362 |[39m       expect(progressResponse[33m.[39mbody[33m.[39mdata)[33m.[39mtoEqual({
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 363 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m
     [90m 364 |[39m         username[33m:[39m testUser[33m.[39musername[33m,[39m
     [90m 365 |[39m         level[33m:[39m [35m3[39m[33m,[39m[0m

      at Object.<anonymous> (tests/integration/userProgressAPI.integration.test.mjs:362:42)

  ● 🎯 INTEGRATION: User Progress API - Complete Progress Tracking › 📊 STEP 5: Dashboard Data Integration › should return comprehensive dashboard data with progress integration

    expect(received).toEqual(expected) // deep equality

    - Expected  - 1
    + Received  + 1

    @@ -2,11 +2,11 @@
        "activity": Object {
          "lastShowPlaced": "never",
          "lastTrained": Any<String>,
        },
        "horses": Object {
    -     "total": 1,
    +     "total": 0,
          "trainable": Any<Number>,
        },
        "shows": Object {
          "nextShowRuns": Any<Array>,
          "upcomingEntries": 0,

    [0m [90m 382 |[39m
     [90m 383 |[39m       expect(dashboardResponse[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 384 |[39m       expect(dashboardResponse[33m.[39mbody[33m.[39mdata)[33m.[39mtoEqual({
     [90m     |[39m                                           [31m[1m^[22m[39m
     [90m 385 |[39m         user[33m:[39m {
     [90m 386 |[39m           id[33m:[39m testUser[33m.[39mid[33m,[39m
     [90m 387 |[39m           username[33m:[39m testUser[33m.[39musername[33m,[39m[0m

      at Object.<anonymous> (tests/integration/userProgressAPI.integration.test.mjs:384:43)

  ● 🎯 INTEGRATION: User Progress API - Complete Progress Tracking › 🎊 STEP 7: End-to-End Progress Validation › should validate all business rules were enforced throughout progression

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 472 |[39m       [90m// STEP 1: Verify training cooldown was respected[39m
     [90m 473 |[39m       [36mconst[39m trainingLogs [33m=[39m [36mawait[39m prisma[33m.[39mtrainingLog[33m.[39mfindMany({
    [31m[1m>[22m[39m[90m 474 |[39m         where[33m:[39m { horseId[33m:[39m testHorse[33m.[39mid }[33m,[39m
     [90m     |[39m                                     [31m[1m^[22m[39m
     [90m 475 |[39m         orderBy[33m:[39m { trainedAt[33m:[39m [32m'asc'[39m }[33m,[39m
     [90m 476 |[39m       })[33m;[39m
     [90m 477 |[39m[0m

      at Object.<anonymous> (tests/integration/userProgressAPI.integration.test.mjs:474:37)

[2026-01-28 13:41:49] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:41:49] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:41:49] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:41:49] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:41:50] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:50] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:50] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:50] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:50] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:50] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:50] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:50] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:50] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:50] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:41:50] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 13:41:50] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:50] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:41:50] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:41:50] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:41:50] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:41:50] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:41:50] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 13:41:50] info: [POST] /api/auth/register
[2026-01-28 13:41:51] info: [TokenRotation] Created new token pair
[2026-01-28 13:41:51] info: [EmailVerification] Created verification token
[2026-01-28 13:41:51] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:41:51] info: [authController.register] Verification email sent
[2026-01-28 13:41:51] info: [POST] /api/auth/register - 201
[2026-01-28 13:41:51] info: [GET] /api/leaderboards/competition?metric=wins&limit=10
[2026-01-28 13:41:51] info: [auth:82yzu] Starting auth for GET /leaderboards/competition
[2026-01-28 13:41:51] info: [auth:82yzu] Token from cookie: false
[2026-01-28 13:41:51] info: [auth:82yzu] Token from header: true
[2026-01-28 13:41:51] info: [auth:82yzu] Authenticated user 5cf63094-4f46-4b20-9b9f-00f554864f36
[2026-01-28 13:41:51] info: [auth:yurgai] Starting auth for GET /competition
[2026-01-28 13:41:51] info: [auth:yurgai] Token from cookie: false
[2026-01-28 13:41:51] info: [auth:yurgai] Token from header: true
[2026-01-28 13:41:51] info: [auth:yurgai] Authenticated user 5cf63094-4f46-4b20-9b9f-00f554864f36
[2026-01-28 13:41:51] info: [leaderboardRoutes.GET /competition] Getting competition leaderboard: discipline=undefined, period=all, metric=wins
[2026-01-28 13:41:51] info: [leaderboardRoutes.GET /competition] Retrieved 0 leaderboard entries
[2026-01-28 13:41:51] info: [GET] /api/leaderboards/competition?metric=wins&limit=10 - 200
FAIL tests/integration/competitionWorkflow.integration.test.mjs
  🏆 INTEGRATION: Complete Competition Workflow
    🔐 STEP 1: User & Horse Setup
      × should create user and prepare competition-ready horse (390 ms)
    🏟️ STEP 2: Competition Setup & Show Creation
      √ should create competition show with proper configuration (5 ms)
    📝 STEP 3: Competition Entry & Validation
      × should validate horse meets competition requirements using API (1 ms)
      × should successfully enter horse in competition using API endpoint (2 ms)
    🏁 STEP 4: Competition Execution & Scoring
      × should execute competition and calculate results (1 ms)
    💰 STEP 5: Prize Distribution & XP Awards
      × should award prize money and XP for competition performance (2 ms)
    📊 STEP 6: Leaderboard & Rankings
      √ should update leaderboards with competition results using API (52 ms)
      × should track historical performance (1 ms)
    🎯 STEP 7: Performance Impact on Horse Value
      × should increase horse value based on competition success (2 ms)
    🏆 STEP 8: Multi-Discipline Competition Readiness
      × should validate horse can compete in multiple disciplines (2 ms)
    🎊 STEP 9: End-to-End Competition Workflow Validation
      × should validate complete competition workflow integrity (7 ms)
      × should validate all business rules enforced throughout competition (1 ms)

  ● 🏆 INTEGRATION: Complete Competition Workflow › 🔐 STEP 1: User & Horse Setup › should create user and prepare competition-ready horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Competition Integration Champion",
        age: 35,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "5cf63094-4f46-4b20-9b9f-00f554864f36"
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2019-01-01T00:00:00.000Z"),
        healthStatus: "Excellent",
        disciplineScores: {
          Racing: 75,
          Dressage: 68,
          Show Jumping: 82,
          Cross Country: 70
        },
        epigeneticModifiers: {
          positive: [
            "fast",
            "athletic",
            "focused",
            "brave",
            "resilient",
            "peopleTrusting"
          ],
          negative: [],
          hidden: [
            "champion_heart"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 122 |[39m
     [90m 123 |[39m       [90m// Create competition-ready horse[39m
    [31m[1m>[22m[39m[90m 124 |[39m       competitionHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                          [31m[1m^[22m[39m
     [90m 125 |[39m         data[33m:[39m {
     [90m 126 |[39m           name[33m:[39m [32m'Competition Integration Champion'[39m[33m,[39m
     [90m 127 |[39m           age[33m:[39m [35m35[39m[33m,[39m [90m// 5 years = 35 days (mature and experienced)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/competitionWorkflow.integration.test.mjs:124:26)

  ● 🏆 INTEGRATION: Complete Competition Workflow › 📝 STEP 3: Competition Entry & Validation › should validate horse meets competition requirements using API

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 182 |[39m       [90m// Test the eligibility API endpoint[39m
     [90m 183 |[39m       [36mconst[39m response [33m=[39m [36mawait[39m request(app)
    [31m[1m>[22m[39m[90m 184 |[39m         [33m.[39m[36mget[39m([32m`/api/competition/eligibility/${competitionHorse.id}/${testShow.discipline}`[39m)
     [90m     |[39m                                                               [31m[1m^[22m[39m
     [90m 185 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)
     [90m 186 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m 187 |[39m[0m

      at Object.<anonymous> (tests/integration/competitionWorkflow.integration.test.mjs:184:63)

  ● 🏆 INTEGRATION: Complete Competition Workflow › 📝 STEP 3: Competition Entry & Validation › should successfully enter horse in competition using API endpoint

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 221 |[39m         [33m.[39m[36mset[39m([32m'x-test-skip-csrf'[39m[33m,[39m [32m'true'[39m)
     [90m 222 |[39m         [33m.[39msend({
    [31m[1m>[22m[39m[90m 223 |[39m           horseId[33m:[39m competitionHorse[33m.[39mid[33m,[39m
     [90m     |[39m                                     [31m[1m^[22m[39m
     [90m 224 |[39m           showId[33m:[39m testShow[33m.[39mid[33m,[39m
     [90m 225 |[39m         })
     [90m 226 |[39m         [33m.[39mexpect([35m201[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/integration/competitionWorkflow.integration.test.mjs:223:37)

  ● 🏆 INTEGRATION: Complete Competition Workflow › 🏁 STEP 4: Competition Execution & Scoring › should execute competition and calculate results

    TypeError: Cannot read properties of undefined (reading 'disciplineScores')

    [0m [90m 258 |[39m       [90m// Calculate competition score (real algorithm, mocked randomness)[39m
     [90m 259 |[39m       [36mconst[39m competitionScore [33m=[39m calculateCompetitionScore(
    [31m[1m>[22m[39m[90m 260 |[39m         horse[33m.[39mdisciplineScores[show[33m.[39mdiscipline][33m,[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 261 |[39m         horse[33m.[39mepigeneticModifiers[33m,[39m
     [90m 262 |[39m         horse[33m.[39mage[33m,[39m
     [90m 263 |[39m         show[33m.[39mdiscipline[33m,[39m[0m

      at Object.<anonymous> (tests/integration/competitionWorkflow.integration.test.mjs:260:15)

  ● 🏆 INTEGRATION: Complete Competition Workflow › 💰 STEP 5: Prize Distribution & XP Awards › should award prize money and XP for competition performance

    TypeError: Cannot read properties of undefined (reading 'prizeWon')

    [0m [90m 302 |[39m
     [90m 303 |[39m       [90m// Award prize money[39m
    [31m[1m>[22m[39m[90m 304 |[39m       [36mconst[39m prizeAmount [33m=[39m [33mNumber[39m(competitionResult[33m.[39mprizeWon)[33m;[39m
     [90m     |[39m                                                    [31m[1m^[22m[39m
     [90m 305 |[39m       [36mconst[39m updatedUser [33m=[39m [36mawait[39m prisma[33m.[39muser[33m.[39mupdate({
     [90m 306 |[39m         where[33m:[39m { id[33m:[39m testUser[33m.[39mid }[33m,[39m
     [90m 307 |[39m         data[33m:[39m {[0m

      at Object.<anonymous> (tests/integration/competitionWorkflow.integration.test.mjs:304:52)

  ● 🏆 INTEGRATION: Complete Competition Workflow › 📊 STEP 6: Leaderboard & Rankings › should track historical performance

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 369 |[39m       [90m// Get horse competition history[39m
     [90m 370 |[39m       [36mconst[39m competitionHistory [33m=[39m [36mawait[39m prisma[33m.[39mcompetitionResult[33m.[39mfindMany({
    [31m[1m>[22m[39m[90m 371 |[39m         where[33m:[39m { horseId[33m:[39m competitionHorse[33m.[39mid }[33m,[39m
     [90m     |[39m                                            [31m[1m^[22m[39m
     [90m 372 |[39m         include[33m:[39m {
     [90m 373 |[39m           show[33m:[39m [36mtrue[39m[33m,[39m
     [90m 374 |[39m         }[33m,[39m[0m

      at Object.<anonymous> (tests/integration/competitionWorkflow.integration.test.mjs:371:44)

  ● 🏆 INTEGRATION: Complete Competition Workflow › 🎯 STEP 7: Performance Impact on Horse Value › should increase horse value based on competition success

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 393 |[39m       [90m// Competition success should affect horse's perceived value[39m
     [90m 394 |[39m       [36mconst[39m horseWithResults [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mfindUnique({
    [31m[1m>[22m[39m[90m 395 |[39m         where[33m:[39m { id[33m:[39m competitionHorse[33m.[39mid }[33m,[39m
     [90m     |[39m                                       [31m[1m^[22m[39m
     [90m 396 |[39m         include[33m:[39m {
     [90m 397 |[39m           competitionResults[33m:[39m [36mtrue[39m[33m,[39m
     [90m 398 |[39m         }[33m,[39m[0m

      at Object.<anonymous> (tests/integration/competitionWorkflow.integration.test.mjs:395:39)

  ● 🏆 INTEGRATION: Complete Competition Workflow › 🏆 STEP 8: Multi-Discipline Competition Readiness › should validate horse can compete in multiple disciplines

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 419 |[39m     it([32m'should validate horse can compete in multiple disciplines'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 420 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mfindUnique({
    [31m[1m>[22m[39m[90m 421 |[39m         where[33m:[39m { id[33m:[39m competitionHorse[33m.[39mid }[33m,[39m
     [90m     |[39m                                       [31m[1m^[22m[39m
     [90m 422 |[39m       })[33m;[39m
     [90m 423 |[39m
     [90m 424 |[39m       [90m// Check all disciplines where horse meets minimum requirements[39m[0m

      at Object.<anonymous> (tests/integration/competitionWorkflow.integration.test.mjs:421:39)

  ● 🏆 INTEGRATION: Complete Competition Workflow › 🎊 STEP 9: End-to-End Competition Workflow Validation › should validate complete competition workflow integrity

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

    [0m [90m 461 |[39m
     [90m 462 |[39m       [90m// User progression[39m
    [31m[1m>[22m[39m[90m 463 |[39m       expect(finalUser[33m.[39mxp)[33m.[39mtoBeGreaterThan(initialXp)[33m;[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 464 |[39m       expect(finalUser[33m.[39mmoney)[33m.[39mtoBeGreaterThan(initialMoney [33m-[39m testShow[33m.[39mentryFee)[33m;[39m
     [90m 465 |[39m
     [90m 466 |[39m       [90m// Horse competition record[39m[0m

      at Object.<anonymous> (tests/integration/competitionWorkflow.integration.test.mjs:463:28)

  ● 🏆 INTEGRATION: Complete Competition Workflow › 🎊 STEP 9: End-to-End Competition Workflow Validation › should validate all business rules enforced throughout competition

    TypeError: Cannot read properties of undefined (reading 'age')

    [0m [90m 483 |[39m     it([32m'should validate all business rules enforced throughout competition'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 484 |[39m       [90m// Entry requirements enforced[39m
    [31m[1m>[22m[39m[90m 485 |[39m       expect(competitionHorse[33m.[39mage)[33m.[39mtoBeGreaterThanOrEqual(testShow[33m.[39mrequirements[33m.[39mminAge)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 486 |[39m       expect(competitionHorse[33m.[39mdisciplineScores[testShow[33m.[39mdiscipline])[33m.[39mtoBeGreaterThanOrEqual(
     [90m 487 |[39m         testShow[33m.[39mrequirements[33m.[39mminDisciplineScore[33m,[39m
     [90m 488 |[39m       )[33m;[39m[0m

      at Object.<anonymous> (tests/integration/competitionWorkflow.integration.test.mjs:485:31)

[2026-01-28 13:41:51] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:41:51] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:41:51] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:41:51] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:41:52] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:52] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:52] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:52] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:52] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:52] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:52] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:52] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:52] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:52] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:41:52] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 13:41:52] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:52] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:41:52] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:41:52] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:41:52] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:41:52] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:41:52] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 13:41:52] info: [POST] /api/compatibility/calculate
[2026-01-28 13:41:52] info: [auth:uczgk] Starting auth for POST /compatibility/calculate
[2026-01-28 13:41:52] info: [auth:uczgk] Token from cookie: false
[2026-01-28 13:41:52] info: [auth:uczgk] Token from header: true
[2026-01-28 13:41:52] info: [auth:uczgk] Authenticated user 5c1dbd22-8eb4-4fc4-8bb3-a4c878fdc628
[2026-01-28 13:41:52] info: [auth:y3t97d] Starting auth for POST /calculate
[2026-01-28 13:41:52] info: [auth:y3t97d] Token from cookie: false
[2026-01-28 13:41:52] info: [auth:y3t97d] Token from header: true
[2026-01-28 13:41:52] info: [auth:y3t97d] Authenticated user 5c1dbd22-8eb4-4fc4-8bb3-a4c878fdc628
[2026-01-28 13:41:52] info: [dynamicCompatibilityController.calculateCompatibility] Calculating compatibility for groom 73261 and horse 146637
[2026-01-28 13:41:52] info: [ownership] Found owned groom 73261 for user 5c1dbd22-8eb4-4fc4-8bb3-a4c878fdc628
[2026-01-28 13:41:52] info: [ownership] Found owned horse 146637 for user 5c1dbd22-8eb4-4fc4-8bb3-a4c878fdc628
[2026-01-28 13:41:52] info: [dynamicCompatibilityController.calculateCompatibility] Compatibility calculated: 1.381 (highly_recommended)
[2026-01-28 13:41:52] info: [POST] /api/compatibility/calculate - 200
[2026-01-28 13:41:52] info: [POST] /api/compatibility/calculate
[2026-01-28 13:41:52] info: [auth:1esc8n] Starting auth for POST /compatibility/calculate
[2026-01-28 13:41:52] info: [auth:1esc8n] Token from cookie: false
[2026-01-28 13:41:52] info: [auth:1esc8n] Token from header: true
[2026-01-28 13:41:52] info: [auth:1esc8n] Authenticated user 5c1dbd22-8eb4-4fc4-8bb3-a4c878fdc628
[2026-01-28 13:41:52] info: [auth:ygpod8] Starting auth for POST /calculate
[2026-01-28 13:41:52] info: [auth:ygpod8] Token from cookie: false
[2026-01-28 13:41:52] info: [auth:ygpod8] Token from header: true
[2026-01-28 13:41:52] info: [auth:ygpod8] Authenticated user 5c1dbd22-8eb4-4fc4-8bb3-a4c878fdc628
[2026-01-28 13:41:52] info: [dynamicCompatibilityController.calculateCompatibility] Calculating compatibility for groom 73262 and horse 146637
[2026-01-28 13:41:52] info: [ownership] Found owned groom 73262 for user 5c1dbd22-8eb4-4fc4-8bb3-a4c878fdc628
[2026-01-28 13:41:52] info: [ownership] Found owned horse 146637 for user 5c1dbd22-8eb4-4fc4-8bb3-a4c878fdc628
[2026-01-28 13:41:52] info: [dynamicCompatibilityController.calculateCompatibility] Compatibility calculated: 0.340 (not_recommended)
[2026-01-28 13:41:52] info: [POST] /api/compatibility/calculate - 200
[2026-01-28 13:41:52] info: [POST] /api/compatibility/calculate
[2026-01-28 13:41:52] info: [auth:oqmk1k] Starting auth for POST /compatibility/calculate
[2026-01-28 13:41:52] info: [auth:oqmk1k] Token from cookie: false
[2026-01-28 13:41:52] info: [auth:oqmk1k] Token from header: true
[2026-01-28 13:41:52] info: [auth:oqmk1k] Authenticated user 5c1dbd22-8eb4-4fc4-8bb3-a4c878fdc628
[2026-01-28 13:41:52] info: [auth:bn4jte] Starting auth for POST /calculate
[2026-01-28 13:41:52] info: [auth:bn4jte] Token from cookie: false
[2026-01-28 13:41:52] info: [auth:bn4jte] Token from header: true
[2026-01-28 13:41:52] info: [auth:bn4jte] Authenticated user 5c1dbd22-8eb4-4fc4-8bb3-a4c878fdc628
[2026-01-28 13:41:52] warn: [Validation] Input validation failed
[2026-01-28 13:41:52] info: [POST] /api/compatibility/calculate - 400
[2026-01-28 13:41:52] info: [POST] /api/compatibility/calculate
[2026-01-28 13:41:52] info: [auth:zdqy3p] Starting auth for POST /compatibility/calculate
[2026-01-28 13:41:52] info: [auth:zdqy3p] Token from cookie: false
[2026-01-28 13:41:52] warn: [auth:zdqy3p] Access token is required for POST /compatibility/calculate from ::ffff:127.0.0.1
[2026-01-28 13:41:52] info: [POST] /api/compatibility/calculate - 401
[2026-01-28 13:41:52] info: [GET] /api/compatibility/factors/73261/146637
[2026-01-28 13:41:52] info: [auth:7vhjja] Starting auth for GET /compatibility/factors/73261/146637
[2026-01-28 13:41:52] info: [auth:7vhjja] Token from cookie: false
[2026-01-28 13:41:52] info: [auth:7vhjja] Token from header: true
[2026-01-28 13:41:52] info: [auth:7vhjja] Authenticated user 5c1dbd22-8eb4-4fc4-8bb3-a4c878fdc628
[2026-01-28 13:41:52] info: [auth:tsqq8] Starting auth for GET /factors/73261/146637
[2026-01-28 13:41:52] info: [auth:tsqq8] Token from cookie: false
[2026-01-28 13:41:52] info: [auth:tsqq8] Token from header: true
[2026-01-28 13:41:52] info: [auth:tsqq8] Authenticated user 5c1dbd22-8eb4-4fc4-8bb3-a4c878fdc628
[2026-01-28 13:41:52] info: [ownership] Validated ownership: user 5c1dbd22-8eb4-4fc4-8bb3-a4c878fdc628 owns groom 73261
[2026-01-28 13:41:52] info: [ownership] Validated ownership: user 5c1dbd22-8eb4-4fc4-8bb3-a4c878fdc628 owns horse 146637
[2026-01-28 13:41:52] info: [dynamicCompatibilityController.getCompatibilityFactors] Analyzing factors for groom 73261 and horse 146637
[2026-01-28 13:41:52] info: [dynamicCompatibilityController.getCompatibilityFactors] Factors analyzed: excellent compatibility
[2026-01-28 13:41:52] info: [GET] /api/compatibility/factors/73261/146637 - 200
[2026-01-28 13:41:52] info: [GET] /api/compatibility/factors/invalid/146637
[2026-01-28 13:41:52] info: [auth:n2f92g] Starting auth for GET /compatibility/factors/invalid/146637
[2026-01-28 13:41:52] info: [auth:n2f92g] Token from cookie: false
[2026-01-28 13:41:52] info: [auth:n2f92g] Token from header: true
[2026-01-28 13:41:52] info: [auth:n2f92g] Authenticated user 5c1dbd22-8eb4-4fc4-8bb3-a4c878fdc628
[2026-01-28 13:41:52] info: [auth:4rktg] Starting auth for GET /factors/invalid/146637
[2026-01-28 13:41:52] info: [auth:4rktg] Token from cookie: false
[2026-01-28 13:41:52] info: [auth:4rktg] Token from header: true
[2026-01-28 13:41:52] info: [auth:4rktg] Authenticated user 5c1dbd22-8eb4-4fc4-8bb3-a4c878fdc628
[2026-01-28 13:41:52] warn: [Validation] Input validation failed
[2026-01-28 13:41:52] info: [GET] /api/compatibility/factors/invalid/146637 - 400
[2026-01-28 13:41:52] info: [POST] /api/compatibility/predict
[2026-01-28 13:41:52] info: [auth:jetyll] Starting auth for POST /compatibility/predict
[2026-01-28 13:41:52] info: [auth:jetyll] Token from cookie: false
[2026-01-28 13:41:52] info: [auth:jetyll] Token from header: true
[2026-01-28 13:41:52] info: [auth:jetyll] Authenticated user 5c1dbd22-8eb4-4fc4-8bb3-a4c878fdc628
[2026-01-28 13:41:52] info: [auth:k735um] Starting auth for POST /predict
[2026-01-28 13:41:52] info: [auth:k735um] Token from cookie: false
[2026-01-28 13:41:52] info: [auth:k735um] Token from header: true
[2026-01-28 13:41:52] info: [auth:k735um] Authenticated user 5c1dbd22-8eb4-4fc4-8bb3-a4c878fdc628
[2026-01-28 13:41:52] info: [dynamicCompatibilityController.predictOutcome] Predicting outcome for groom 73261 and horse 146637
[2026-01-28 13:41:52] info: [ownership] Found owned groom 73261 for user 5c1dbd22-8eb4-4fc4-8bb3-a4c878fdc628
[2026-01-28 13:41:52] info: [ownership] Found owned horse 146637 for user 5c1dbd22-8eb4-4fc4-8bb3-a4c878fdc628
[2026-01-28 13:41:53] info: [dynamicCompatibilityController.predictOutcome] Outcome predicted: excellent quality, 0.95 success probability
[2026-01-28 13:41:53] info: [POST] /api/compatibility/predict - 200
[2026-01-28 13:41:53] info: [POST] /api/compatibility/predict
[2026-01-28 13:41:53] info: [auth:yi80vk] Starting auth for POST /compatibility/predict
[2026-01-28 13:41:53] info: [auth:yi80vk] Token from cookie: false
[2026-01-28 13:41:53] info: [auth:yi80vk] Token from header: true
[2026-01-28 13:41:53] info: [auth:yi80vk] Authenticated user 5c1dbd22-8eb4-4fc4-8bb3-a4c878fdc628
[2026-01-28 13:41:53] info: [auth:vzqkvc] Starting auth for POST /predict
[2026-01-28 13:41:53] info: [auth:vzqkvc] Token from cookie: false
[2026-01-28 13:41:53] info: [auth:vzqkvc] Token from header: true
[2026-01-28 13:41:53] info: [auth:vzqkvc] Authenticated user 5c1dbd22-8eb4-4fc4-8bb3-a4c878fdc628
[2026-01-28 13:41:53] info: [dynamicCompatibilityController.predictOutcome] Predicting outcome for groom 73262 and horse 146637
[2026-01-28 13:41:53] info: [ownership] Found owned groom 73262 for user 5c1dbd22-8eb4-4fc4-8bb3-a4c878fdc628
[2026-01-28 13:41:53] info: [ownership] Found owned horse 146637 for user 5c1dbd22-8eb4-4fc4-8bb3-a4c878fdc628
[2026-01-28 13:41:53] info: [dynamicCompatibilityController.predictOutcome] Outcome predicted: fair quality, 0.52 success probability
[2026-01-28 13:41:53] info: [POST] /api/compatibility/predict - 200
[2026-01-28 13:41:53] info: [POST] /api/compatibility/recommendations
[2026-01-28 13:41:53] info: [auth:8pnagr] Starting auth for POST /compatibility/recommendations
[2026-01-28 13:41:53] info: [auth:8pnagr] Token from cookie: false
[2026-01-28 13:41:53] info: [auth:8pnagr] Token from header: true
[2026-01-28 13:41:53] info: [auth:8pnagr] Authenticated user 5c1dbd22-8eb4-4fc4-8bb3-a4c878fdc628
[2026-01-28 13:41:53] info: [auth:mj4fz] Starting auth for POST /recommendations
[2026-01-28 13:41:53] info: [auth:mj4fz] Token from cookie: false
[2026-01-28 13:41:53] info: [auth:mj4fz] Token from header: true
[2026-01-28 13:41:53] info: [auth:mj4fz] Authenticated user 5c1dbd22-8eb4-4fc4-8bb3-a4c878fdc628
[2026-01-28 13:41:53] info: [dynamicCompatibilityController.getRecommendations] Getting recommendations for horse 146637
[2026-01-28 13:41:53] info: [ownership] Found owned horse 146637 for user 5c1dbd22-8eb4-4fc4-8bb3-a4c878fdc628
[2026-01-28 13:41:53] error: Error getting groom personality traits for groom 73102: Unknown personality type: balanced
[2026-01-28 13:41:53] error: Error getting groom personality traits for groom 73103: Unknown personality type: balanced
[2026-01-28 13:41:53] error: Error getting groom personality traits for groom 73099: Unknown personality type: balanced
[2026-01-28 13:41:53] error: Error getting groom personality traits for groom 73100: Unknown personality type: balanced
[2026-01-28 13:41:53] error: Error getting groom personality traits for groom 73101: Unknown personality type: balanced
[2026-01-28 13:41:53] error: Error calculating personality modifiers: Unknown personality type: balanced
[2026-01-28 13:41:53] error: Error calculating personality modifiers: Unknown personality type: balanced
[2026-01-28 13:41:53] error: Error calculating personality modifiers: Unknown personality type: balanced
[2026-01-28 13:41:53] error: Error calculating personality modifiers: Unknown personality type: balanced
[2026-01-28 13:41:53] error: Error calculating personality modifiers: Unknown personality type: balanced
[2026-01-28 13:41:53] error: Error calculating dynamic compatibility: Unknown personality type: balanced
[2026-01-28 13:41:53] error: Error calculating dynamic compatibility: Unknown personality type: balanced
[2026-01-28 13:41:53] error: Error calculating dynamic compatibility: Unknown personality type: balanced
[2026-01-28 13:41:53] error: Error calculating dynamic compatibility: Unknown personality type: balanced
[2026-01-28 13:41:53] error: Error calculating dynamic compatibility: Unknown personality type: balanced
[2026-01-28 13:41:53] error: Error getting optimal groom recommendations: Unknown personality type: balanced
[2026-01-28 13:41:53] error: [dynamicCompatibilityController.getRecommendations] Error: Unknown personality type: balanced
[2026-01-28 13:41:53] info: [POST] /api/compatibility/recommendations - 500
[2026-01-28 13:41:53] info: [GET] /api/compatibility/trends/73261/146637
[2026-01-28 13:41:53] info: [auth:gf6pj3] Starting auth for GET /compatibility/trends/73261/146637
[2026-01-28 13:41:53] info: [auth:gf6pj3] Token from cookie: false
[2026-01-28 13:41:53] info: [auth:gf6pj3] Token from header: true
[2026-01-28 13:41:53] info: [auth:gf6pj3] Authenticated user 5c1dbd22-8eb4-4fc4-8bb3-a4c878fdc628
[2026-01-28 13:41:53] info: [auth:0fsic] Starting auth for GET /trends/73261/146637
[2026-01-28 13:41:53] info: [auth:0fsic] Token from cookie: false
[2026-01-28 13:41:53] info: [auth:0fsic] Token from header: true
[2026-01-28 13:41:53] info: [auth:0fsic] Authenticated user 5c1dbd22-8eb4-4fc4-8bb3-a4c878fdc628
[2026-01-28 13:41:53] info: [ownership] Validated ownership: user 5c1dbd22-8eb4-4fc4-8bb3-a4c878fdc628 owns groom 73261
[2026-01-28 13:41:53] info: [ownership] Validated ownership: user 5c1dbd22-8eb4-4fc4-8bb3-a4c878fdc628 owns horse 146637
[2026-01-28 13:41:53] info: [dynamicCompatibilityController.getCompatibilityTrends] Analyzing trends for groom 73261 and horse 146637
[2026-01-28 13:41:53] info: [dynamicCompatibilityController.getCompatibilityTrends] Trends analyzed: insufficient_data trend with 0 data points
[2026-01-28 13:41:53] info: [GET] /api/compatibility/trends/73261/146637 - 200
[2026-01-28 13:41:53] info: [GET] /api/compatibility/config
[2026-01-28 13:41:53] info: [auth:ddrej4] Starting auth for GET /compatibility/config
[2026-01-28 13:41:53] info: [auth:ddrej4] Token from cookie: false
[2026-01-28 13:41:53] info: [auth:ddrej4] Token from header: true
[2026-01-28 13:41:53] info: [auth:ddrej4] Authenticated user 5c1dbd22-8eb4-4fc4-8bb3-a4c878fdc628
[2026-01-28 13:41:53] info: [auth:mxduv8] Starting auth for GET /config
[2026-01-28 13:41:53] info: [auth:mxduv8] Token from cookie: false
[2026-01-28 13:41:53] info: [auth:mxduv8] Token from header: true
[2026-01-28 13:41:53] info: [auth:mxduv8] Authenticated user 5c1dbd22-8eb4-4fc4-8bb3-a4c878fdc628
[2026-01-28 13:41:53] info: [dynamicCompatibilityController.getCompatibilityConfig] Getting compatibility system configuration
[2026-01-28 13:41:53] info: [GET] /api/compatibility/config - 200
FAIL tests/controllers/dynamicCompatibilityController.test.mjs
  Dynamic Compatibility Controller API
    POST /api/compatibility/calculate
      √ should calculate high compatibility for calm groom with fearful horse (79 ms)
      √ should calculate low compatibility for energetic groom with fearful horse (46 ms)
      √ should return 400 for missing required fields (28 ms)
      √ should return 401 for missing authentication (20 ms)
    GET /api/compatibility/factors/:groomId/:horseId
      √ should analyze compatibility factors comprehensively (42 ms)
      √ should return 400 for invalid groom ID (27 ms)
    POST /api/compatibility/predict
      √ should predict positive outcome for good compatibility (47 ms)
      √ should predict negative outcome for poor compatibility (44 ms)
    POST /api/compatibility/recommendations
      × should recommend optimal grooms for specific horse and context (60 ms)
    GET /api/compatibility/trends/:groomId/:horseId
      √ should analyze compatibility trends with insufficient data (37 ms)
    GET /api/compatibility/config
      √ should return compatibility system configuration (28 ms)

  ● Dynamic Compatibility Controller API › POST /api/compatibility/recommendations › should recommend optimal grooms for specific horse and context

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

    [0m [90m 327 |[39m         [33m.[39msend(requestBody)[33m;[39m
     [90m 328 |[39m
    [31m[1m>[22m[39m[90m 329 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 330 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 331 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoBeDefined()[33m;[39m
     [90m 332 |[39m       expect([33mArray[39m[33m.[39misArray(response[33m.[39mbody[33m.[39mdata[33m.[39mrankedGrooms))[33m.[39mtoBe([36mtrue[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/controllers/dynamicCompatibilityController.test.mjs:329:31)

[2026-01-28 13:41:53] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:41:53] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:41:53] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:41:53] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:41:54] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:54] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:54] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:54] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:54] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:54] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:54] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:54] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:54] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:54] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:41:54] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 13:41:54] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:54] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:41:54] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:41:54] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:41:54] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:41:54] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:41:54] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 13:41:54] info: [POST] /api/auth/register
[2026-01-28 13:41:54] info: [TokenRotation] Created new token pair
[2026-01-28 13:41:54] info: [EmailVerification] Created verification token
[2026-01-28 13:41:54] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:41:54] info: [authController.register] Verification email sent
[2026-01-28 13:41:54] info: [POST] /api/auth/register - 201
FAIL tests/integration/horseBreedingWorkflow.integration.test.mjs
  🐎 INTEGRATION: Complete Horse Breeding Workflow
    🔐 STEP 1: User Registration & Authentication
      √ should register user and obtain authentication token (361 ms)
    🐴 STEP 2: Horse Creation (Breeding Stock)
      × should create mare with quality traits (8 ms)
      × should create stallion with complementary traits (5 ms)
    🤱 STEP 3: Breeding Process & Foal Birth
      × should create foal with inherited and epigenetic traits (2 ms)
    👥 STEP 4: Groom Assignment & Care
      × should assign specialized foal care groom to newborn (1 ms)
      × should record groom interaction with foal (1 ms)
    📈 STEP 5: Foal Development Tracking
      × should track foal development progress (1 ms)
    🎯 STEP 6: End-to-End Workflow Validation
      × should validate complete breeding workflow integrity (1 ms)
      × should validate business rules are enforced throughout workflow (1 ms)

  ● 🐎 INTEGRATION: Complete Horse Breeding Workflow › 🐴 STEP 2: Horse Creation (Breeding Stock) › should create mare with quality traits

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Integration Test Mare",
        age: 5,
        breedId: 26468,
        ~~~~~~~
        sex: "Mare",
        healthStatus: "Excellent",
        user: {
          connect: {
            id: "98405677-dcac-476f-b09b-e13de814eda5"
          }
        },
        dateOfBirth: new Date("2021-01-28T18:41:54.722Z"),
        disciplineScores: {
          Racing: 85,
          Dressage: 78
        },
        epigeneticModifiers: {
          positive: [
            "fast",
            "intelligent",
            "calm",
            "resilient"
          ],
          negative: [],
          hidden: [
            "strong_heart"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 155 |[39m
     [90m 156 |[39m       [90m// Create mare with proper schema fields (matching working tests)[39m
    [31m[1m>[22m[39m[90m 157 |[39m       mare [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m              [31m[1m^[22m[39m
     [90m 158 |[39m         data[33m:[39m {
     [90m 159 |[39m           name[33m:[39m [32m'Integration Test Mare'[39m[33m,[39m
     [90m 160 |[39m           age[33m:[39m [35m5[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/horseBreedingWorkflow.integration.test.mjs:157:14)

  ● 🐎 INTEGRATION: Complete Horse Breeding Workflow › 🐴 STEP 2: Horse Creation (Breeding Stock) › should create stallion with complementary traits

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Integration Test Stallion",
        age: 6,
        breedId: 26468,
        ~~~~~~~
        sex: "Stallion",
        healthStatus: "Excellent",
        user: {
          connect: {
            id: "98405677-dcac-476f-b09b-e13de814eda5"
          }
        },
        dateOfBirth: new Date("2020-01-28T18:41:54.731Z"),
        disciplineScores: {
          Racing: 90,
          Show Jumping: 82
        },
        epigeneticModifiers: {
          positive: [
            "powerful",
            "brave",
            "athletic",
            "peopleTrusting"
          ],
          negative: [],
          hidden: [
            "endurance"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 191 |[39m
     [90m 192 |[39m       [90m// Create stallion with proper schema fields (matching working tests)[39m
    [31m[1m>[22m[39m[90m 193 |[39m       stallion [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 194 |[39m         data[33m:[39m {
     [90m 195 |[39m           name[33m:[39m [32m'Integration Test Stallion'[39m[33m,[39m
     [90m 196 |[39m           age[33m:[39m [35m6[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/horseBreedingWorkflow.integration.test.mjs:193:18)

  ● 🐎 INTEGRATION: Complete Horse Breeding Workflow › 🤱 STEP 3: Breeding Process & Foal Birth › should create foal with inherited and epigenetic traits

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 231 |[39m           breedId[33m:[39m breed[33m.[39mid[33m,[39m
     [90m 232 |[39m           sex[33m:[39m [32m'Colt'[39m[33m,[39m
    [31m[1m>[22m[39m[90m 233 |[39m           sireId[33m:[39m stallion[33m.[39mid[33m,[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 234 |[39m           damId[33m:[39m mare[33m.[39mid[33m,[39m
     [90m 235 |[39m           healthStatus[33m:[39m [32m'Excellent'[39m[33m,[39m
     [90m 236 |[39m           user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at Object.<anonymous> (tests/integration/horseBreedingWorkflow.integration.test.mjs:233:28)

  ● 🐎 INTEGRATION: Complete Horse Breeding Workflow › 👥 STEP 4: Groom Assignment & Care › should assign specialized foal care groom to newborn

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 282 |[39m
     [90m 283 |[39m       [90m// Ensure foal has a groom assignment[39m
    [31m[1m>[22m[39m[90m 284 |[39m       [36mconst[39m assignmentResult [33m=[39m [36mawait[39m ensureDefaultGroomAssignment(foal[33m.[39mid[33m,[39m testUser[33m.[39mid)[33m;[39m
     [90m     |[39m                                                                        [31m[1m^[22m[39m
     [90m 285 |[39m
     [90m 286 |[39m       expect(assignmentResult[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 287 |[39m       expect(assignmentResult[33m.[39massignment [33m||[39m assignmentResult[33m.[39mnewAssignment)[33m.[39mtoBeDefined()[33m;[39m[0m

      at Object.<anonymous> (tests/integration/horseBreedingWorkflow.integration.test.mjs:284:72)

  ● 🐎 INTEGRATION: Complete Horse Breeding Workflow › 👥 STEP 4: Groom Assignment & Care › should record groom interaction with foal

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 304 |[39m
     [90m 305 |[39m       [36mconst[39m interactionData [33m=[39m {
    [31m[1m>[22m[39m[90m 306 |[39m         foalId[33m:[39m foal[33m.[39mid[33m,[39m
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 307 |[39m         groomId[33m:[39m assignedGroom[33m.[39mid[33m,[39m
     [90m 308 |[39m         interactionType[33m:[39m [32m'daily_care'[39m[33m,[39m
     [90m 309 |[39m         duration[33m:[39m [35m60[39m[33m,[39m [90m// 1 hour[39m[0m

      at Object.<anonymous> (tests/integration/horseBreedingWorkflow.integration.test.mjs:306:22)

  ● 🐎 INTEGRATION: Complete Horse Breeding Workflow › 📈 STEP 5: Foal Development Tracking › should track foal development progress

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 341 |[39m       [36mconst[39m { getFoalDevelopment } [33m=[39m [36mawait[39m [36mimport[39m([32m'../../models/foalModel.js'[39m)[33m;[39m
     [90m 342 |[39m
    [31m[1m>[22m[39m[90m 343 |[39m       [36mconst[39m developmentData [33m=[39m [36mawait[39m getFoalDevelopment(foal[33m.[39mid)[33m;[39m
     [90m     |[39m                                                             [31m[1m^[22m[39m
     [90m 344 |[39m
     [90m 345 |[39m       expect(developmentData)[33m.[39mtoBeDefined()[33m;[39m
     [90m 346 |[39m       expect(developmentData[33m.[39mfoal[33m.[39mid)[33m.[39mtoBe(foal[33m.[39mid)[33m;[39m[0m

      at Object.<anonymous> (tests/integration/horseBreedingWorkflow.integration.test.mjs:343:61)

  ● 🐎 INTEGRATION: Complete Horse Breeding Workflow › 🎯 STEP 6: End-to-End Workflow Validation › should validate complete breeding workflow integrity

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 361 |[39m       [90m// VERIFY: Complete family tree exists[39m
     [90m 362 |[39m       [36mconst[39m foalWithFamily [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mfindUnique({
    [31m[1m>[22m[39m[90m 363 |[39m         where[33m:[39m { id[33m:[39m foal[33m.[39mid }[33m,[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 364 |[39m         include[33m:[39m {
     [90m 365 |[39m           sire[33m:[39m [36mtrue[39m[33m,[39m
     [90m 366 |[39m           dam[33m:[39m [36mtrue[39m[33m,[39m[0m

      at Object.<anonymous> (tests/integration/horseBreedingWorkflow.integration.test.mjs:363:27)

  ● 🐎 INTEGRATION: Complete Horse Breeding Workflow › 🎯 STEP 6: End-to-End Workflow Validation › should validate business rules are enforced throughout workflow

    TypeError: Cannot read properties of undefined (reading 'age')

    [0m [90m 395 |[39m     it([32m'should validate business rules are enforced throughout workflow'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 396 |[39m       [90m// Age validation[39m
    [31m[1m>[22m[39m[90m 397 |[39m       expect(foal[33m.[39mage)[33m.[39mtoBe([35m0[39m)[33m;[39m [90m// Newborn[39m
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 398 |[39m       expect(mare[33m.[39mage)[33m.[39mtoBeGreaterThanOrEqual([35m3[39m)[33m;[39m [90m// Breeding age[39m
     [90m 399 |[39m       expect(stallion[33m.[39mage)[33m.[39mtoBeGreaterThanOrEqual([35m3[39m)[33m;[39m [90m// Breeding age[39m
     [90m 400 |[39m[0m

      at Object.<anonymous> (tests/integration/horseBreedingWorkflow.integration.test.mjs:397:19)

[2026-01-28 13:41:54] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:41:54] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:41:54] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:41:54] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:41:55] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:55] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:55] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:55] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:55] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:55] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:55] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:55] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:55] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:55] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:41:55] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 13:41:55] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:55] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:41:55] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:41:55] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:41:55] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:41:55] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:41:55] info: [Sentry] Sentry error handler not attached (DSN not configured).
FAIL tests/integration/epigeneticTraitSystem.test.mjs
  Epigenetic Trait System Integration Tests
    API Endpoints
      × GET /api/epigenetic-traits/definitions should return flag and personality definitions (1 ms)
      × POST /api/epigenetic-traits/evaluate-milestone/:horseId should evaluate enhanced milestone
      × POST /api/epigenetic-traits/log-trait should log trait assignment
      × GET /api/epigenetic-traits/history/:horseId should return trait history
      × GET /api/epigenetic-traits/summary/:horseId should return development summary
      × GET /api/epigenetic-traits/breeding-insights/:horseId should return breeding insights
      × Should handle authentication errors properly
      × Should handle horse ownership validation
      × Should validate input parameters properly
    Epigenetic Flag System
      × Should apply epigenetic flags based on care patterns
    Enhanced Milestone Evaluation
      × Should factor in groom personality bonuses
  Trait History Service
    √ Should log and retrieve trait assignments correctly (60 ms)

  ● Epigenetic Trait System Integration Tests › API Endpoints › GET /api/epigenetic-traits/definitions should return flag and personality definitions

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    → 110 await prisma.groomAssignment.create({
            data: {
              foalId: 146640,
              groomId: 73264,
              user: {
              ~~~~
                connect: {
                  id: "c7bb7042-52f6-4f68-a6a7-3d8467b73359"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ● Epigenetic Trait System Integration Tests › API Endpoints › POST /api/epigenetic-traits/evaluate-milestone/:horseId should evaluate enhanced milestone

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    → 110 await prisma.groomAssignment.create({
            data: {
              foalId: 146640,
              groomId: 73264,
              user: {
              ~~~~
                connect: {
                  id: "c7bb7042-52f6-4f68-a6a7-3d8467b73359"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ● Epigenetic Trait System Integration Tests › API Endpoints › POST /api/epigenetic-traits/log-trait should log trait assignment

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    → 110 await prisma.groomAssignment.create({
            data: {
              foalId: 146640,
              groomId: 73264,
              user: {
              ~~~~
                connect: {
                  id: "c7bb7042-52f6-4f68-a6a7-3d8467b73359"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ● Epigenetic Trait System Integration Tests › API Endpoints › GET /api/epigenetic-traits/history/:horseId should return trait history

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    → 110 await prisma.groomAssignment.create({
            data: {
              foalId: 146640,
              groomId: 73264,
              user: {
              ~~~~
                connect: {
                  id: "c7bb7042-52f6-4f68-a6a7-3d8467b73359"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ● Epigenetic Trait System Integration Tests › API Endpoints › GET /api/epigenetic-traits/summary/:horseId should return development summary

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    → 110 await prisma.groomAssignment.create({
            data: {
              foalId: 146640,
              groomId: 73264,
              user: {
              ~~~~
                connect: {
                  id: "c7bb7042-52f6-4f68-a6a7-3d8467b73359"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ● Epigenetic Trait System Integration Tests › API Endpoints › GET /api/epigenetic-traits/breeding-insights/:horseId should return breeding insights

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    → 110 await prisma.groomAssignment.create({
            data: {
              foalId: 146640,
              groomId: 73264,
              user: {
              ~~~~
                connect: {
                  id: "c7bb7042-52f6-4f68-a6a7-3d8467b73359"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ● Epigenetic Trait System Integration Tests › API Endpoints › Should handle authentication errors properly

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    → 110 await prisma.groomAssignment.create({
            data: {
              foalId: 146640,
              groomId: 73264,
              user: {
              ~~~~
                connect: {
                  id: "c7bb7042-52f6-4f68-a6a7-3d8467b73359"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ● Epigenetic Trait System Integration Tests › API Endpoints › Should handle horse ownership validation

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    → 110 await prisma.groomAssignment.create({
            data: {
              foalId: 146640,
              groomId: 73264,
              user: {
              ~~~~
                connect: {
                  id: "c7bb7042-52f6-4f68-a6a7-3d8467b73359"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ● Epigenetic Trait System Integration Tests › API Endpoints › Should validate input parameters properly

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    → 110 await prisma.groomAssignment.create({
            data: {
              foalId: 146640,
              groomId: 73264,
              user: {
              ~~~~
                connect: {
                  id: "c7bb7042-52f6-4f68-a6a7-3d8467b73359"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ● Epigenetic Trait System Integration Tests › Epigenetic Flag System › Should apply epigenetic flags based on care patterns

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    → 110 await prisma.groomAssignment.create({
            data: {
              foalId: 146640,
              groomId: 73264,
              user: {
              ~~~~
                connect: {
                  id: "c7bb7042-52f6-4f68-a6a7-3d8467b73359"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ● Epigenetic Trait System Integration Tests › Enhanced Milestone Evaluation › Should factor in groom personality bonuses

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    → 110 await prisma.groomAssignment.create({
            data: {
              foalId: 146640,
              groomId: 73264,
              user: {
              ~~~~
                connect: {
                  id: "c7bb7042-52f6-4f68-a6a7-3d8467b73359"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

[2026-01-28 13:41:56] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:41:56] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:41:56] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:41:56] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:41:57] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:57] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:57] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:57] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:57] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:57] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:57] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:57] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:57] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:57] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:41:57] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 13:41:57] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:57] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:41:57] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:41:57] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:41:57] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:41:57] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:41:57] info: [Sentry] Sentry error handler not attached (DSN not configured).
FAIL tests/integration/dashboardRoutes.test.mjs
  🏠 INTEGRATION: Dashboard API - Real Database Integration
    GET /api/user/dashboard/:userId
      × should return complete dashboard data successfully (94 ms)
      × should return 400 for invalid user ID format (34 ms)
      × should return 401 for missing authentication (24 ms)
      × should return validation error for invalid user ID format (37 ms)
      × should handle user with no horses gracefully (25 ms)
      × should handle user with horses but no activity gracefully (19 ms)

  ● 🏠 INTEGRATION: Dashboard API - Real Database Integration › GET /api/user/dashboard/:userId › should return complete dashboard data successfully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestDashboard Horse 1",
        age: 5,
        sex: "Mare",
        breedId: 31430,
        ~~~~~~~
        user: {
          connect: {
            id: "61554af4-d04e-43f6-8960-4b98b1df4c11"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Good",
        totalEarnings: 1500,
        disciplineScores: {
          Dressage: 15
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m  98 |[39m
     [90m  99 |[39m     [90m// Create test horses with real data[39m
    [31m[1m>[22m[39m[90m 100 |[39m     testHorses [33m=[39m [36mawait[39m [33mPromise[39m[33m.[39mall([
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 101 |[39m       prisma[33m.[39mhorse[33m.[39mcreate({
     [90m 102 |[39m         data[33m:[39m {
     [90m 103 |[39m           name[33m:[39m [32m'TestDashboard Horse 1'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
          at async Promise.all (index 0)
      at Object.<anonymous> (tests/integration/dashboardRoutes.test.mjs:100:18)

  ● 🏠 INTEGRATION: Dashboard API - Real Database Integration › GET /api/user/dashboard/:userId › should return 400 for invalid user ID format

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestDashboard Horse 1",
        age: 5,
        sex: "Mare",
        breedId: 31431,
        ~~~~~~~
        user: {
          connect: {
            id: "cd6af976-8caa-4665-a76a-113057bb93a8"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Good",
        totalEarnings: 1500,
        disciplineScores: {
          Dressage: 15
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m  98 |[39m
     [90m  99 |[39m     [90m// Create test horses with real data[39m
    [31m[1m>[22m[39m[90m 100 |[39m     testHorses [33m=[39m [36mawait[39m [33mPromise[39m[33m.[39mall([
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 101 |[39m       prisma[33m.[39mhorse[33m.[39mcreate({
     [90m 102 |[39m         data[33m:[39m {
     [90m 103 |[39m           name[33m:[39m [32m'TestDashboard Horse 1'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
          at async Promise.all (index 0)
      at Object.<anonymous> (tests/integration/dashboardRoutes.test.mjs:100:18)

  ● 🏠 INTEGRATION: Dashboard API - Real Database Integration › GET /api/user/dashboard/:userId › should return 401 for missing authentication

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestDashboard Horse 1",
        age: 5,
        sex: "Mare",
        breedId: 31432,
        ~~~~~~~
        user: {
          connect: {
            id: "94f3942b-690b-436c-a1cc-a2b3da63d3f2"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Good",
        totalEarnings: 1500,
        disciplineScores: {
          Dressage: 15
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m  98 |[39m
     [90m  99 |[39m     [90m// Create test horses with real data[39m
    [31m[1m>[22m[39m[90m 100 |[39m     testHorses [33m=[39m [36mawait[39m [33mPromise[39m[33m.[39mall([
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 101 |[39m       prisma[33m.[39mhorse[33m.[39mcreate({
     [90m 102 |[39m         data[33m:[39m {
     [90m 103 |[39m           name[33m:[39m [32m'TestDashboard Horse 1'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
          at async Promise.all (index 0)
      at Object.<anonymous> (tests/integration/dashboardRoutes.test.mjs:100:18)

  ● 🏠 INTEGRATION: Dashboard API - Real Database Integration › GET /api/user/dashboard/:userId › should return validation error for invalid user ID format

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestDashboard Horse 1",
        age: 5,
        sex: "Mare",
        breedId: 31433,
        ~~~~~~~
        user: {
          connect: {
            id: "552f7209-3437-40e5-98c8-1b7c09361b8a"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Good",
        totalEarnings: 1500,
        disciplineScores: {
          Dressage: 15
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m  98 |[39m
     [90m  99 |[39m     [90m// Create test horses with real data[39m
    [31m[1m>[22m[39m[90m 100 |[39m     testHorses [33m=[39m [36mawait[39m [33mPromise[39m[33m.[39mall([
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 101 |[39m       prisma[33m.[39mhorse[33m.[39mcreate({
     [90m 102 |[39m         data[33m:[39m {
     [90m 103 |[39m           name[33m:[39m [32m'TestDashboard Horse 1'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
          at async Promise.all (index 0)
      at Object.<anonymous> (tests/integration/dashboardRoutes.test.mjs:100:18)

  ● 🏠 INTEGRATION: Dashboard API - Real Database Integration › GET /api/user/dashboard/:userId › should handle user with no horses gracefully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestDashboard Horse 1",
        age: 5,
        sex: "Mare",
        breedId: 31434,
        ~~~~~~~
        user: {
          connect: {
            id: "43454e71-ace3-4dc5-9ce5-d387c449225f"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Good",
        totalEarnings: 1500,
        disciplineScores: {
          Dressage: 15
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m  98 |[39m
     [90m  99 |[39m     [90m// Create test horses with real data[39m
    [31m[1m>[22m[39m[90m 100 |[39m     testHorses [33m=[39m [36mawait[39m [33mPromise[39m[33m.[39mall([
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 101 |[39m       prisma[33m.[39mhorse[33m.[39mcreate({
     [90m 102 |[39m         data[33m:[39m {
     [90m 103 |[39m           name[33m:[39m [32m'TestDashboard Horse 1'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
          at async Promise.all (index 0)
      at Object.<anonymous> (tests/integration/dashboardRoutes.test.mjs:100:18)

  ● 🏠 INTEGRATION: Dashboard API - Real Database Integration › GET /api/user/dashboard/:userId › should handle user with horses but no activity gracefully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestDashboard Horse 1",
        age: 5,
        sex: "Mare",
        breedId: 31435,
        ~~~~~~~
        user: {
          connect: {
            id: "30e917c4-4ab8-4c12-96c9-5a6325c7e8e8"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Good",
        totalEarnings: 1500,
        disciplineScores: {
          Dressage: 15
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m  98 |[39m
     [90m  99 |[39m     [90m// Create test horses with real data[39m
    [31m[1m>[22m[39m[90m 100 |[39m     testHorses [33m=[39m [36mawait[39m [33mPromise[39m[33m.[39mall([
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 101 |[39m       prisma[33m.[39mhorse[33m.[39mcreate({
     [90m 102 |[39m         data[33m:[39m {
     [90m 103 |[39m           name[33m:[39m [32m'TestDashboard Horse 1'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
          at async Promise.all (index 0)
      at Object.<anonymous> (tests/integration/dashboardRoutes.test.mjs:100:18)

[2026-01-28 13:41:57] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:41:57] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:41:57] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:41:57] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:41:58] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:58] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:58] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:58] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:58] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:58] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:58] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:58] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:58] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:58] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:41:58] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 13:41:58] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:41:58] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:41:58] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:41:58] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:41:58] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:41:58] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:41:58] info: [Sentry] Sentry error handler not attached (DSN not configured).
FAIL tests/groomBondingIntegration.test.mjs
  Groom Bonding System Integration
    New Grooming Tasks for Horses 3+ Years Old
      × should successfully process brushing interaction (93 ms)
      × should successfully process hand-walking interaction (23 ms)
      × should successfully process stall_care interaction (18 ms)
    Age Restrictions
      × should reject new grooming tasks for horses under 3 years old (18 ms)
    Bond Score Updates
      × should update horse bond score after grooming (19 ms)
      × should grant burnout immunity after 7 consecutive days (19 ms)
    Daily Interaction Limits
      × should enforce one grooming session per horse per day (17 ms)

  ● Groom Bonding System Integration › New Grooming Tasks for Horses 3+ Years Old › should successfully process brushing interaction

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 146642,
        groomId: 73266,
        isActive: true,
        user: {
        ~~~~
          connect: {
            id: "user-bonding-1769625718780_haeuk"
          }
        },
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 132 |[39m
     [90m 133 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 134 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 135 |[39m       data[33m:[39m {
     [90m 136 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 137 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBondingIntegration.test.mjs:134:22)

  ● Groom Bonding System Integration › New Grooming Tasks for Horses 3+ Years Old › should successfully process hand-walking interaction

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 146643,
        groomId: 73267,
        isActive: true,
        user: {
        ~~~~
          connect: {
            id: "user-bonding-1769625718873_6al68"
          }
        },
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 132 |[39m
     [90m 133 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 134 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 135 |[39m       data[33m:[39m {
     [90m 136 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 137 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBondingIntegration.test.mjs:134:22)

  ● Groom Bonding System Integration › New Grooming Tasks for Horses 3+ Years Old › should successfully process stall_care interaction

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 146644,
        groomId: 73268,
        isActive: true,
        user: {
        ~~~~
          connect: {
            id: "user-bonding-1769625718897_ult0u"
          }
        },
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 132 |[39m
     [90m 133 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 134 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 135 |[39m       data[33m:[39m {
     [90m 136 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 137 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBondingIntegration.test.mjs:134:22)

  ● Groom Bonding System Integration › Age Restrictions › should reject new grooming tasks for horses under 3 years old

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 146645,
        groomId: 73269,
        isActive: true,
        user: {
        ~~~~
          connect: {
            id: "user-bonding-1769625718916_5luvm"
          }
        },
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 132 |[39m
     [90m 133 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 134 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 135 |[39m       data[33m:[39m {
     [90m 136 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 137 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBondingIntegration.test.mjs:134:22)

  ● Groom Bonding System Integration › Bond Score Updates › should update horse bond score after grooming

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 146646,
        groomId: 73270,
        isActive: true,
        user: {
        ~~~~
          connect: {
            id: "user-bonding-1769625718933_f62x5"
          }
        },
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 132 |[39m
     [90m 133 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 134 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 135 |[39m       data[33m:[39m {
     [90m 136 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 137 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBondingIntegration.test.mjs:134:22)

  ● Groom Bonding System Integration › Bond Score Updates › should grant burnout immunity after 7 consecutive days

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 146647,
        groomId: 73271,
        isActive: true,
        user: {
        ~~~~
          connect: {
            id: "user-bonding-1769625718953_1lfme"
          }
        },
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 132 |[39m
     [90m 133 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 134 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 135 |[39m       data[33m:[39m {
     [90m 136 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 137 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBondingIntegration.test.mjs:134:22)

  ● Groom Bonding System Integration › Daily Interaction Limits › should enforce one grooming session per horse per day

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 146648,
        groomId: 73272,
        isActive: true,
        user: {
        ~~~~
          connect: {
            id: "user-bonding-1769625718972_9nk79"
          }
        },
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 132 |[39m
     [90m 133 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 134 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 135 |[39m       data[33m:[39m {
     [90m 136 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 137 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBondingIntegration.test.mjs:134:22)

[2026-01-28 13:41:59] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:41:59] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:41:59] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:41:59] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:42:00] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:00] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:00] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:00] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:00] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:00] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:00] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:00] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:00] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:00] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:42:00] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 13:42:00] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:00] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:42:00] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:42:00] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:42:00] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:42:00] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:42:00] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 13:42:00] info: [POST] /api/auth/register
[2026-01-28 13:42:00] warn: [MemoryMonitoring] Memory threshold exceeded: 615MB
[2026-01-28 13:42:00] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:00] info: [EmailVerification] Created verification token
[2026-01-28 13:42:00] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:42:00] info: [authController.register] Verification email sent
[2026-01-28 13:42:00] info: [POST] /api/auth/register - 201
FAIL tests/integration/trainingProgression.integration.test.mjs
  🏋️ INTEGRATION: Complete Training Progression Workflow
    🔐 STEP 1: User Setup & Authentication
      √ should create user for training progression testing (366 ms)
    🐴 STEP 2: Horse Creation & Age Validation
      × should create young horse (under training age) (9 ms)
      × should create mature horse (training eligible) (5 ms)
    🚫 STEP 3: Age Restriction Enforcement
      × should block training for young horse (under 3 years) (2 ms)
    🏋️ STEP 4: First Training Session
      × should successfully train mature horse for first time (3 ms)
    ⏰ STEP 5: Training Cooldown Management
      × should enforce 7-day cooldown period (1 ms)
      × should allow training after cooldown expires (using test data manipulation) (1 ms)
    🎯 STEP 6: User Progression Tracking
      × should track user XP and level progression from training (4 ms)
    🏆 STEP 7: Competition Readiness Validation
      × should validate horse is ready for competition (1 ms)
    🎊 STEP 8: End-to-End Workflow Validation
      × should validate complete training progression integrity (1 ms)
      × should validate all business rules were enforced throughout progression (1 ms)

  ● 🏋️ INTEGRATION: Complete Training Progression Workflow › 🐴 STEP 2: Horse Creation & Age Validation › should create young horse (under training age)

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Training Integration Young Horse",
        age: 2,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "aaecf0e2-4aeb-43da-b6e7-66c9068a56ba"
          }
        },
        sex: "Colt",
        dateOfBirth: new Date("2024-01-28T18:42:00.593Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [
            "energetic",
            "curious"
          ],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 129 |[39m       twoYearsAgo[33m.[39msetFullYear(twoYearsAgo[33m.[39mgetFullYear() [33m-[39m [35m2[39m)[33m;[39m
     [90m 130 |[39m
    [31m[1m>[22m[39m[90m 131 |[39m       youngHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                    [31m[1m^[22m[39m
     [90m 132 |[39m         data[33m:[39m {
     [90m 133 |[39m           name[33m:[39m [32m'Training Integration Young Horse'[39m[33m,[39m
     [90m 134 |[39m           age[33m:[39m [35m2[39m[33m,[39m [90m// Too young for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/trainingProgression.integration.test.mjs:131:20)

  ● 🏋️ INTEGRATION: Complete Training Progression Workflow › 🐴 STEP 2: Horse Creation & Age Validation › should create mature horse (training eligible)

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Training Integration Mature Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "aaecf0e2-4aeb-43da-b6e7-66c9068a56ba"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:00.602Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [
            "athletic",
            "focused",
            "brave",
            "resilient"
          ],
          negative: [],
          hidden: [
            "strong_heart"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 159 |[39m       fourYearsAgo[33m.[39msetFullYear(fourYearsAgo[33m.[39mgetFullYear() [33m-[39m [35m4[39m)[33m;[39m
     [90m 160 |[39m
    [31m[1m>[22m[39m[90m 161 |[39m       matureHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                     [31m[1m^[22m[39m
     [90m 162 |[39m         data[33m:[39m {
     [90m 163 |[39m           name[33m:[39m [32m'Training Integration Mature Horse'[39m[33m,[39m
     [90m 164 |[39m           age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/trainingProgression.integration.test.mjs:161:21)

  ● 🏋️ INTEGRATION: Complete Training Progression Workflow › 🚫 STEP 3: Age Restriction Enforcement › should block training for young horse (under 3 years)

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 190 |[39m         [33m.[39m[36mset[39m([32m'x-test-skip-csrf'[39m[33m,[39m [32m'true'[39m)
     [90m 191 |[39m         [33m.[39msend({
    [31m[1m>[22m[39m[90m 192 |[39m           horseId[33m:[39m youngHorse[33m.[39mid[33m,[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 193 |[39m           discipline[33m:[39m [32m'Racing'[39m[33m,[39m
     [90m 194 |[39m         })
     [90m 195 |[39m         [33m.[39mexpect([35m400[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/integration/trainingProgression.integration.test.mjs:192:31)

  ● 🏋️ INTEGRATION: Complete Training Progression Workflow › 🏋️ STEP 4: First Training Session › should successfully train mature horse for first time

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 225 |[39m         [33m.[39m[36mset[39m([32m'x-test-skip-csrf'[39m[33m,[39m [32m'true'[39m)
     [90m 226 |[39m         [33m.[39msend({
    [31m[1m>[22m[39m[90m 227 |[39m           horseId[33m:[39m matureHorse[33m.[39mid[33m,[39m
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 228 |[39m           discipline[33m:[39m [32m'Racing'[39m[33m,[39m
     [90m 229 |[39m         })
     [90m 230 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/integration/trainingProgression.integration.test.mjs:227:32)

  ● 🏋️ INTEGRATION: Complete Training Progression Workflow › ⏰ STEP 5: Training Cooldown Management › should enforce 7-day cooldown period

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 273 |[39m         [33m.[39m[36mset[39m([32m'x-test-skip-csrf'[39m[33m,[39m [32m'true'[39m)
     [90m 274 |[39m         [33m.[39msend({
    [31m[1m>[22m[39m[90m 275 |[39m           horseId[33m:[39m matureHorse[33m.[39mid[33m,[39m
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 276 |[39m           discipline[33m:[39m [32m'Dressage'[39m[33m,[39m [90m// Different discipline, but still in cooldown[39m
     [90m 277 |[39m         })
     [90m 278 |[39m         [33m.[39mexpect([35m400[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/integration/trainingProgression.integration.test.mjs:275:32)

  ● 🏋️ INTEGRATION: Complete Training Progression Workflow › ⏰ STEP 5: Training Cooldown Management › should allow training after cooldown expires (using test data manipulation)

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 303 |[39m       [90m// STEP 1: Get the existing training log from the first training session[39m
     [90m 304 |[39m       [36mconst[39m existingTrainingLog [33m=[39m [36mawait[39m prisma[33m.[39mtrainingLog[33m.[39mfindFirst({
    [31m[1m>[22m[39m[90m 305 |[39m         where[33m:[39m { horseId[33m:[39m matureHorse[33m.[39mid }[33m,[39m
     [90m     |[39m                                       [31m[1m^[22m[39m
     [90m 306 |[39m         orderBy[33m:[39m { trainedAt[33m:[39m [32m'desc'[39m }[33m,[39m
     [90m 307 |[39m       })[33m;[39m
     [90m 308 |[39m[0m

      at Object.<anonymous> (tests/integration/trainingProgression.integration.test.mjs:305:39)

  ● 🏋️ INTEGRATION: Complete Training Progression Workflow › 🎯 STEP 6: User Progression Tracking › should track user XP and level progression from training

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

    [0m [90m 379 |[39m
     [90m 380 |[39m       [90m// VERIFY: User has gained significant XP from multiple training sessions[39m
    [31m[1m>[22m[39m[90m 381 |[39m       expect(finalUser[33m.[39mxp)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 382 |[39m
     [90m 383 |[39m       [90m// VERIFY: Multiple XP events logged[39m
     [90m 384 |[39m       [36mconst[39m allXpEvents [33m=[39m [36mawait[39m prisma[33m.[39mxpEvent[33m.[39mfindMany({[0m

      at Object.<anonymous> (tests/integration/trainingProgression.integration.test.mjs:381:28)

  ● 🏋️ INTEGRATION: Complete Training Progression Workflow › 🏆 STEP 7: Competition Readiness Validation › should validate horse is ready for competition

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 400 |[39m     it([32m'should validate horse is ready for competition'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 401 |[39m       [36mconst[39m competitionReadyHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mfindUnique({
    [31m[1m>[22m[39m[90m 402 |[39m         where[33m:[39m { id[33m:[39m matureHorse[33m.[39mid }[33m,[39m
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 403 |[39m         include[33m:[39m {
     [90m 404 |[39m           trainingLogs[33m:[39m [36mtrue[39m[33m,[39m
     [90m 405 |[39m         }[33m,[39m[0m

      at Object.<anonymous> (tests/integration/trainingProgression.integration.test.mjs:402:34)

  ● 🏋️ INTEGRATION: Complete Training Progression Workflow › 🎊 STEP 8: End-to-End Workflow Validation › should validate complete training progression integrity

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 429 |[39m       [90m// VERIFY: Complete training progression from young to competition-ready[39m
     [90m 430 |[39m       [36mconst[39m youngHorseCheck [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mfindUnique({
    [31m[1m>[22m[39m[90m 431 |[39m         where[33m:[39m { id[33m:[39m youngHorse[33m.[39mid }[33m,[39m
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 432 |[39m         include[33m:[39m { trainingLogs[33m:[39m [36mtrue[39m }[33m,[39m
     [90m 433 |[39m       })[33m;[39m
     [90m 434 |[39m[0m

      at Object.<anonymous> (tests/integration/trainingProgression.integration.test.mjs:431:33)

  ● 🏋️ INTEGRATION: Complete Training Progression Workflow › 🎊 STEP 8: End-to-End Workflow Validation › should validate all business rules were enforced throughout progression

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 459 |[39m       [90m// Age restrictions enforced[39m
     [90m 460 |[39m       [36mconst[39m youngHorseTrainingLogs [33m=[39m [36mawait[39m prisma[33m.[39mtrainingLog[33m.[39mfindMany({
    [31m[1m>[22m[39m[90m 461 |[39m         where[33m:[39m { horseId[33m:[39m youngHorse[33m.[39mid }[33m,[39m
     [90m     |[39m                                      [31m[1m^[22m[39m
     [90m 462 |[39m       })[33m;[39m
     [90m 463 |[39m       expect(youngHorseTrainingLogs)[33m.[39mtoHaveLength([35m0[39m)[33m;[39m
     [90m 464 |[39m[0m

      at Object.<anonymous> (tests/integration/trainingProgression.integration.test.mjs:461:38)

[2026-01-28 13:42:00] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:42:00] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:42:00] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:42:00] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:42:01] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:01] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:01] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:01] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:01] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:01] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:01] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:01] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:01] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:01] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:42:01] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 13:42:01] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:01] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:42:01] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:42:01] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:42:01] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:42:01] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:42:01] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 13:42:01] info: [POST] /api/foals/1/enrichment
[2026-01-28 13:42:01] info: [auth:73t3s4] Starting auth for POST /foals/1/enrichment
[2026-01-28 13:42:01] info: [auth:73t3s4] Token from cookie: false
[2026-01-28 13:42:01] info: [auth:73t3s4] Token from header: true
[2026-01-28 13:42:01] info: [auth:73t3s4] Authenticated user undefined
[2026-01-28 13:42:01] warn: [ownership] Missing user for foal ownership check
[2026-01-28 13:42:01] info: [POST] /api/foals/1/enrichment - 401
[2026-01-28 13:42:01] info: [POST] /api/foals/1/enrichment
[2026-01-28 13:42:01] warn: [MemoryMonitoring] Memory threshold exceeded: 501MB
[2026-01-28 13:42:01] info: [auth:r5ytzv] Starting auth for POST /foals/1/enrichment
[2026-01-28 13:42:01] info: [auth:r5ytzv] Token from cookie: false
[2026-01-28 13:42:01] info: [auth:r5ytzv] Token from header: true
[2026-01-28 13:42:01] info: [auth:r5ytzv] Authenticated user undefined
[2026-01-28 13:42:02] warn: [ownership] Missing user for foal ownership check
[2026-01-28 13:42:02] info: [POST] /api/foals/1/enrichment - 401
[2026-01-28 13:42:02] info: [POST] /api/foals/1/enrichment
[2026-01-28 13:42:02] warn: [MemoryMonitoring] Memory threshold exceeded: 502MB
[2026-01-28 13:42:02] info: [auth:lzprvb] Starting auth for POST /foals/1/enrichment
[2026-01-28 13:42:02] info: [auth:lzprvb] Token from cookie: false
[2026-01-28 13:42:02] info: [auth:lzprvb] Token from header: true
[2026-01-28 13:42:02] info: [auth:lzprvb] Authenticated user undefined
[2026-01-28 13:42:02] warn: [ownership] Missing user for foal ownership check
[2026-01-28 13:42:02] info: [POST] /api/foals/1/enrichment - 401
[2026-01-28 13:42:02] info: [POST] /api/foals/99999/enrichment
[2026-01-28 13:42:02] warn: [MemoryMonitoring] Memory threshold exceeded: 503MB
[2026-01-28 13:42:02] info: [auth:dbxr5] Starting auth for POST /foals/99999/enrichment
[2026-01-28 13:42:02] info: [auth:dbxr5] Token from cookie: false
[2026-01-28 13:42:02] info: [auth:dbxr5] Token from header: true
[2026-01-28 13:42:02] info: [auth:dbxr5] Authenticated user undefined
[2026-01-28 13:42:02] warn: [ownership] Missing user for foal ownership check
[2026-01-28 13:42:02] info: [POST] /api/foals/99999/enrichment - 401
[2026-01-28 13:42:02] info: [POST] /api/foals/1/enrichment
[2026-01-28 13:42:02] warn: [MemoryMonitoring] Memory threshold exceeded: 504MB
[2026-01-28 13:42:02] info: [auth:kwod8s] Starting auth for POST /foals/1/enrichment
[2026-01-28 13:42:02] info: [auth:kwod8s] Token from cookie: false
[2026-01-28 13:42:02] info: [auth:kwod8s] Token from header: true
[2026-01-28 13:42:02] info: [auth:kwod8s] Authenticated user undefined
[2026-01-28 13:42:02] warn: [ownership] Missing user for foal ownership check
[2026-01-28 13:42:02] info: [POST] /api/foals/1/enrichment - 401
[2026-01-28 13:42:02] info: [POST] /api/foals/1/enrichment
[2026-01-28 13:42:02] warn: [MemoryMonitoring] Memory threshold exceeded: 505MB
[2026-01-28 13:42:02] info: [auth:wyupzc] Starting auth for POST /foals/1/enrichment
[2026-01-28 13:42:02] info: [auth:wyupzc] Token from cookie: false
[2026-01-28 13:42:02] info: [auth:wyupzc] Token from header: true
[2026-01-28 13:42:02] info: [auth:wyupzc] Authenticated user undefined
[2026-01-28 13:42:02] warn: [ownership] Missing user for foal ownership check
[2026-01-28 13:42:02] info: [POST] /api/foals/1/enrichment - 401
[2026-01-28 13:42:02] info: [POST] /api/foals/1/enrichment
[2026-01-28 13:42:02] warn: [MemoryMonitoring] Memory threshold exceeded: 506MB
[2026-01-28 13:42:02] info: [auth:3zgwcq] Starting auth for POST /foals/1/enrichment
[2026-01-28 13:42:02] info: [auth:3zgwcq] Token from cookie: false
[2026-01-28 13:42:02] info: [auth:3zgwcq] Token from header: true
[2026-01-28 13:42:02] info: [auth:3zgwcq] Authenticated user undefined
[2026-01-28 13:42:02] warn: [ownership] Missing user for foal ownership check
[2026-01-28 13:42:02] info: [POST] /api/foals/1/enrichment - 401
[2026-01-28 13:42:02] info: [POST] /api/foals/1/enrichment
[2026-01-28 13:42:02] warn: [MemoryMonitoring] Memory threshold exceeded: 506MB
[2026-01-28 13:42:02] info: [auth:sgpzrti] Starting auth for POST /foals/1/enrichment
[2026-01-28 13:42:02] info: [auth:sgpzrti] Token from cookie: false
[2026-01-28 13:42:02] info: [auth:sgpzrti] Token from header: true
[2026-01-28 13:42:02] info: [auth:sgpzrti] Authenticated user undefined
[2026-01-28 13:42:02] warn: [ownership] Missing user for foal ownership check
[2026-01-28 13:42:02] info: [POST] /api/foals/1/enrichment - 401
[2026-01-28 13:42:02] info: [POST] /api/foals/999/enrichment
[2026-01-28 13:42:02] warn: [MemoryMonitoring] Memory threshold exceeded: 507MB
[2026-01-28 13:42:02] info: [auth:mpm8e9] Starting auth for POST /foals/999/enrichment
[2026-01-28 13:42:02] info: [auth:mpm8e9] Token from cookie: false
[2026-01-28 13:42:02] info: [auth:mpm8e9] Token from header: true
[2026-01-28 13:42:02] info: [auth:mpm8e9] Authenticated user undefined
[2026-01-28 13:42:02] warn: [ownership] Missing user for foal ownership check
[2026-01-28 13:42:02] info: [POST] /api/foals/999/enrichment - 401
FAIL tests/foalEnrichmentIntegration.test.mjs
  🐴 INTEGRATION: Foal Enrichment API Integration - Complete API Workflow Validation
    POST /api/foals/:foalId/enrichment
      × should complete enrichment activity successfully (55 ms)
      × should update horse bond_score and stress_level in database (28 ms)
      × should validate request parameters (31 ms)
      × should return 404 for non-existent foal (27 ms)
      × should return 400 for inappropriate activity for day (27 ms)
      × should accept different activity name formats (26 ms)
      × should handle all day 3 activities (29 ms)
      × should create training history records for each activity (26 ms)
      × should handle edge cases with bond and stress levels (29 ms)

  ● 🐴 INTEGRATION: Foal Enrichment API Integration - Complete API Workflow Validation › POST /api/foals/:foalId/enrichment › should complete enrichment activity successfully

    expected 200 "OK", got 401 "Unauthorized"

    [0m [90m 172 |[39m           activity[33m:[39m [32m'Trailer Exposure'[39m[33m,[39m
     [90m 173 |[39m         })
    [31m[1m>[22m[39m[90m 174 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 175 |[39m
     [90m 176 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 177 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoContain([32m'Trailer Exposure'[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/foalEnrichmentIntegration.test.mjs:174:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ● 🐴 INTEGRATION: Foal Enrichment API Integration - Complete API Workflow Validation › POST /api/foals/:foalId/enrichment › should update horse bond_score and stress_level in database

    expected 200 "OK", got 401 "Unauthorized"

    [0m [90m 234 |[39m           activity[33m:[39m [32m'Halter Introduction'[39m[33m,[39m
     [90m 235 |[39m         })
    [31m[1m>[22m[39m[90m 236 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 237 |[39m
     [90m 238 |[39m       [90m// Verify horse was updated in database[39m
     [90m 239 |[39m       expect(mockPrisma[33m.[39mhorse[33m.[39mupdate)[33m.[39mtoHaveBeenCalledWith({[0m

      at Object.<anonymous> (tests/foalEnrichmentIntegration.test.mjs:236:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ● 🐴 INTEGRATION: Foal Enrichment API Integration - Complete API Workflow Validation › POST /api/foals/:foalId/enrichment › should validate request parameters

    expected 400 "Bad Request", got 401 "Unauthorized"

    [0m [90m 259 |[39m           activity[33m:[39m [32m'Trailer Exposure'[39m[33m,[39m
     [90m 260 |[39m         })
    [31m[1m>[22m[39m[90m 261 |[39m         [33m.[39mexpect([35m400[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 262 |[39m
     [90m 263 |[39m       [90m// Missing activity[39m
     [90m 264 |[39m       [36mawait[39m request(app)[0m

      at Object.<anonymous> (tests/foalEnrichmentIntegration.test.mjs:261:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ● 🐴 INTEGRATION: Foal Enrichment API Integration - Complete API Workflow Validation › POST /api/foals/:foalId/enrichment › should return 404 for non-existent foal

    expected 404 "Not Found", got 401 "Unauthorized"

    [0m [90m 314 |[39m           activity[33m:[39m [32m'Trailer Exposure'[39m[33m,[39m
     [90m 315 |[39m         })
    [31m[1m>[22m[39m[90m 316 |[39m         [33m.[39mexpect([35m404[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 317 |[39m
     [90m 318 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m 319 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoContain([32m'not found'[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/foalEnrichmentIntegration.test.mjs:316:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ● 🐴 INTEGRATION: Foal Enrichment API Integration - Complete API Workflow Validation › POST /api/foals/:foalId/enrichment › should return 400 for inappropriate activity for day

    expected 400 "Bad Request", got 401 "Unauthorized"

    [0m [90m 329 |[39m           activity[33m:[39m [32m'Trailer Exposure'[39m[33m,[39m [90m// This is a day 3 activity[39m
     [90m 330 |[39m         })
    [31m[1m>[22m[39m[90m 331 |[39m         [33m.[39mexpect([35m400[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 332 |[39m
     [90m 333 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m 334 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoContain([32m'not appropriate for day 0'[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/foalEnrichmentIntegration.test.mjs:331:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ● 🐴 INTEGRATION: Foal Enrichment API Integration - Complete API Workflow Validation › POST /api/foals/:foalId/enrichment › should accept different activity name formats

    expected 200 "OK", got 401 "Unauthorized"

    [0m [90m 345 |[39m           activity[33m:[39m [32m'leading_practice'[39m[33m,[39m
     [90m 346 |[39m         })
    [31m[1m>[22m[39m[90m 347 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 348 |[39m
     [90m 349 |[39m       [90m// Test exact name[39m
     [90m 350 |[39m       [36mawait[39m request(app)[0m

      at Object.<anonymous> (tests/foalEnrichmentIntegration.test.mjs:347:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ● 🐴 INTEGRATION: Foal Enrichment API Integration - Complete API Workflow Validation › POST /api/foals/:foalId/enrichment › should handle all day 3 activities

    expected 200 "OK", got 401 "Unauthorized"

    [0m [90m 382 |[39m             activity[33m,[39m
     [90m 383 |[39m           })
    [31m[1m>[22m[39m[90m 384 |[39m           [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m            [31m[1m^[22m[39m
     [90m 385 |[39m
     [90m 386 |[39m         expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 387 |[39m         expect(response[33m.[39mbody[33m.[39mdata[33m.[39mactivity[33m.[39mname)[33m.[39mtoBe(activity)[33m;[39m[0m

      at Object.<anonymous> (tests/foalEnrichmentIntegration.test.mjs:384:12)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ● 🐴 INTEGRATION: Foal Enrichment API Integration - Complete API Workflow Validation › POST /api/foals/:foalId/enrichment › should create training history records for each activity

    expected 200 "OK", got 401 "Unauthorized"

    [0m [90m 414 |[39m           activity[33m:[39m [32m'Feeding Assistance'[39m[33m,[39m
     [90m 415 |[39m         })
    [31m[1m>[22m[39m[90m 416 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 417 |[39m
     [90m 418 |[39m       [90m// Verify training record was created[39m
     [90m 419 |[39m       expect(mockPrisma[33m.[39mfoalTrainingHistory[33m.[39mcreate)[33m.[39mtoHaveBeenCalledWith({[0m

      at Object.<anonymous> (tests/foalEnrichmentIntegration.test.mjs:416:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ● 🐴 INTEGRATION: Foal Enrichment API Integration - Complete API Workflow Validation › POST /api/foals/:foalId/enrichment › should handle edge cases with bond and stress levels

    expected 200 "OK", got 401 "Unauthorized"

    [0m [90m 461 |[39m           activity[33m:[39m [32m'Trailer Exposure'[39m[33m,[39m
     [90m 462 |[39m         })
    [31m[1m>[22m[39m[90m 463 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 464 |[39m
     [90m 465 |[39m       [90m// Values should be capped at bounds[39m
     [90m 466 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mupdatedLevels[33m.[39mbondScore)[33m.[39mtoBeLessThanOrEqual([35m100[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/foalEnrichmentIntegration.test.mjs:463:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

[2026-01-28 13:42:02] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:42:02] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:42:02] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:42:02] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:42:03] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:03] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:03] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:03] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:03] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:03] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:03] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:03] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:03] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:03] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:42:03] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 13:42:03] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:03] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:42:03] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:42:03] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:42:03] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:42:03] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:42:03] info: [Sentry] Sentry error handler not attached (DSN not configured).
FAIL tests/groomPersonalityTraitBonus.test.mjs
  Groom Personality Trait Bonus System - REAL SYSTEM TESTS
    Personality Compatibility Matrix
      × should correctly identify compatible personality-temperament pairs (69 ms)
      × should correctly identify incompatible personality-temperament pairs (10 ms)
      × should handle regular matches without high bond (12 ms)
    Personality Modifier Engine
      × should apply personality effects to milestone evaluation (9 ms)
      × should handle missing personality or temperament gracefully (9 ms)
    Enhanced Milestone Evaluation Integration
      × should integrate personality effects into milestone evaluation (8 ms)
      × should handle milestone evaluation without groom assignment (9 ms)
    Compatible Grooms Utility
      × should return all compatible grooms for a temperament (9 ms)
      × should return empty array for unknown temperament (9 ms)
    API Endpoints - REAL HTTP TESTS
      GET /api/grooms/:id/profile
        × should return groom profile with personality information (11 ms)
        × should return 404 for non-existent groom (8 ms)
        × should return 400 for invalid groom ID (8 ms)
      GET /api/horses/:id/personality-impact
        × should return personality compatibility for horse (8 ms)
        × should return 404 for non-existent horse (8 ms)
        × should return 400 for horse without temperament (8 ms)
      POST /api/milestones/evaluate-milestone (with personality impact)
        × should evaluate milestone with personality effects (9 ms)

  ● Groom Personality Trait Bonus System - REAL SYSTEM TESTS › Personality Compatibility Matrix › should correctly identify compatible personality-temperament pairs

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625723459",
        user: {
          connect: {
            id: "31120b09-542b-4ef8-9b8e-710fea73485e"
          }
        },
        dateOfBirth: new Date("2026-01-28T18:42:03.459Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31436,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ● Groom Personality Trait Bonus System - REAL SYSTEM TESTS › Personality Compatibility Matrix › should correctly identify incompatible personality-temperament pairs

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625723482",
        user: {
          connect: {
            id: "026e67af-c5f3-468d-b6a5-86dcc4755c7f"
          }
        },
        dateOfBirth: new Date("2026-01-28T18:42:03.482Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31437,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ● Groom Personality Trait Bonus System - REAL SYSTEM TESTS › Personality Compatibility Matrix › should handle regular matches without high bond

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625723494",
        user: {
          connect: {
            id: "f9720238-b3c1-4472-bb76-9ffba80b0d76"
          }
        },
        dateOfBirth: new Date("2026-01-28T18:42:03.494Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31438,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ● Groom Personality Trait Bonus System - REAL SYSTEM TESTS › Personality Modifier Engine › should apply personality effects to milestone evaluation

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625723504",
        user: {
          connect: {
            id: "ec321170-eeaa-4755-b76f-ba3ed574bae2"
          }
        },
        dateOfBirth: new Date("2026-01-28T18:42:03.504Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31439,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ● Groom Personality Trait Bonus System - REAL SYSTEM TESTS › Personality Modifier Engine › should handle missing personality or temperament gracefully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625723514",
        user: {
          connect: {
            id: "45be5bf5-b141-4872-b599-2fd72805b02f"
          }
        },
        dateOfBirth: new Date("2026-01-28T18:42:03.514Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31440,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ● Groom Personality Trait Bonus System - REAL SYSTEM TESTS › Enhanced Milestone Evaluation Integration › should integrate personality effects into milestone evaluation

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625723523",
        user: {
          connect: {
            id: "fa1c3439-e974-4482-adc8-54213352545b"
          }
        },
        dateOfBirth: new Date("2026-01-28T18:42:03.523Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31441,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ● Groom Personality Trait Bonus System - REAL SYSTEM TESTS › Enhanced Milestone Evaluation Integration › should handle milestone evaluation without groom assignment

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625723532",
        user: {
          connect: {
            id: "20ce3cca-776b-4d10-91f0-c1c9a0f3cc10"
          }
        },
        dateOfBirth: new Date("2026-01-28T18:42:03.532Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31442,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ● Groom Personality Trait Bonus System - REAL SYSTEM TESTS › Compatible Grooms Utility › should return all compatible grooms for a temperament

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625723541",
        user: {
          connect: {
            id: "71cd7e3f-e462-4ee9-b14d-15e2fcb7b518"
          }
        },
        dateOfBirth: new Date("2026-01-28T18:42:03.541Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31443,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ● Groom Personality Trait Bonus System - REAL SYSTEM TESTS › Compatible Grooms Utility › should return empty array for unknown temperament

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625723550",
        user: {
          connect: {
            id: "f22f19d7-b68d-4f88-b687-fdb55d8e1c41"
          }
        },
        dateOfBirth: new Date("2026-01-28T18:42:03.550Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31444,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ● Groom Personality Trait Bonus System - REAL SYSTEM TESTS › API Endpoints - REAL HTTP TESTS › GET /api/grooms/:id/profile › should return groom profile with personality information

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625723562",
        user: {
          connect: {
            id: "1c48eaee-9c64-43de-969d-47e8d929850c"
          }
        },
        dateOfBirth: new Date("2026-01-28T18:42:03.562Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31445,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ● Groom Personality Trait Bonus System - REAL SYSTEM TESTS › API Endpoints - REAL HTTP TESTS › GET /api/grooms/:id/profile › should return 404 for non-existent groom

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625723571",
        user: {
          connect: {
            id: "967a0f20-36c4-4a7c-8b5d-f620452314a7"
          }
        },
        dateOfBirth: new Date("2026-01-28T18:42:03.571Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31446,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ● Groom Personality Trait Bonus System - REAL SYSTEM TESTS › API Endpoints - REAL HTTP TESTS › GET /api/grooms/:id/profile › should return 400 for invalid groom ID

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625723579",
        user: {
          connect: {
            id: "794ce6c5-d1db-4b70-87cb-827156d57099"
          }
        },
        dateOfBirth: new Date("2026-01-28T18:42:03.579Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31447,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ● Groom Personality Trait Bonus System - REAL SYSTEM TESTS › API Endpoints - REAL HTTP TESTS › GET /api/horses/:id/personality-impact › should return personality compatibility for horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625723588",
        user: {
          connect: {
            id: "0687c7c6-6ca4-4327-a8c6-e144e1356a7a"
          }
        },
        dateOfBirth: new Date("2026-01-28T18:42:03.588Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31448,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ● Groom Personality Trait Bonus System - REAL SYSTEM TESTS › API Endpoints - REAL HTTP TESTS › GET /api/horses/:id/personality-impact › should return 404 for non-existent horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625723596",
        user: {
          connect: {
            id: "9c76e3f0-0603-4b69-9046-699ac3f9404a"
          }
        },
        dateOfBirth: new Date("2026-01-28T18:42:03.596Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31449,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ● Groom Personality Trait Bonus System - REAL SYSTEM TESTS › API Endpoints - REAL HTTP TESTS › GET /api/horses/:id/personality-impact › should return 400 for horse without temperament

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625723605",
        user: {
          connect: {
            id: "dce407fa-c856-46c1-9403-ef828d66c495"
          }
        },
        dateOfBirth: new Date("2026-01-28T18:42:03.605Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31450,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ● Groom Personality Trait Bonus System - REAL SYSTEM TESTS › API Endpoints - REAL HTTP TESTS › POST /api/milestones/evaluate-milestone (with personality impact) › should evaluate milestone with personality effects

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625723613",
        user: {
          connect: {
            id: "7a7feee8-85e0-46b1-a57b-09901078fd43"
          }
        },
        dateOfBirth: new Date("2026-01-28T18:42:03.613Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31451,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

[2026-01-28 13:42:03] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:42:03] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:42:03] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:42:03] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:42:04] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:04] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:04] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:04] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:04] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:04] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:04] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:04] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:04] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:04] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:42:04] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 13:42:04] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:04] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:42:04] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:42:04] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:42:04] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:42:04] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:42:04] info: [Sentry] Sentry error handler not attached (DSN not configured).
FAIL tests/legacyScoreTraitIntegration.test.mjs
  Legacy Score Trait Integration System
    Trait Score Calculation
      × should calculate trait score based on count, diversity, and rarity (86 ms)
      × should apply negative trait penalties (15 ms)
      × should only count traits gained before age 4 (14 ms)
      × should calculate groom care consistency from milestone logs (14 ms)
    Legacy Score Integration
      × should integrate trait score into overall legacy score (13 ms)
      × should calculate legacy score without traits (15 ms)
    API Endpoints
      × should get horse legacy score via API (12 ms)
      × should require authentication for legacy score endpoint (11 ms)
      × should return 404 for non-existent horse (11 ms)

  ● Legacy Score Trait Integration System › Trait Score Calculation › should calculate trait score based on count, diversity, and rarity

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625724840",
        sex: "stallion",
        dateOfBirth: new Date("2022-01-29T18:42:04.840Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "cecf240f-d923-4d25-b8d7-fe38b311f324"
          }
        },
        breedId: 31452,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
        speed: 75,
        stamina: 80,
        agility: 70,
        balance: 85,
        precision: 90,
        intelligence: 88,
        boldness: 65,
        flexibility: 72,
        obedience: 95,
        focus: 82,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 67 |[39m
     [90m 68 |[39m     [90m// Create test horse (4 years old to test legacy score calculation)[39m
    [31m[1m>[22m[39m[90m 69 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 70 |[39m       data[33m:[39m {
     [90m 71 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 72 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/legacyScoreTraitIntegration.test.mjs:69:17)

  ● Legacy Score Trait Integration System › Trait Score Calculation › should apply negative trait penalties

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625724873",
        sex: "stallion",
        dateOfBirth: new Date("2022-01-29T18:42:04.873Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "9b4e3d94-f579-4c03-900e-f73b3fb16908"
          }
        },
        breedId: 31453,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
        speed: 75,
        stamina: 80,
        agility: 70,
        balance: 85,
        precision: 90,
        intelligence: 88,
        boldness: 65,
        flexibility: 72,
        obedience: 95,
        focus: 82,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 67 |[39m
     [90m 68 |[39m     [90m// Create test horse (4 years old to test legacy score calculation)[39m
    [31m[1m>[22m[39m[90m 69 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 70 |[39m       data[33m:[39m {
     [90m 71 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 72 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/legacyScoreTraitIntegration.test.mjs:69:17)

  ● Legacy Score Trait Integration System › Trait Score Calculation › should only count traits gained before age 4

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625724887",
        sex: "stallion",
        dateOfBirth: new Date("2022-01-29T18:42:04.887Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "b1156305-29f3-4b45-9159-7445dc4842ef"
          }
        },
        breedId: 31454,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
        speed: 75,
        stamina: 80,
        agility: 70,
        balance: 85,
        precision: 90,
        intelligence: 88,
        boldness: 65,
        flexibility: 72,
        obedience: 95,
        focus: 82,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 67 |[39m
     [90m 68 |[39m     [90m// Create test horse (4 years old to test legacy score calculation)[39m
    [31m[1m>[22m[39m[90m 69 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 70 |[39m       data[33m:[39m {
     [90m 71 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 72 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/legacyScoreTraitIntegration.test.mjs:69:17)

  ● Legacy Score Trait Integration System › Trait Score Calculation › should calculate groom care consistency from milestone logs

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625724901",
        sex: "stallion",
        dateOfBirth: new Date("2022-01-29T18:42:04.901Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "54539f25-70e0-4155-92db-d96aa666bec2"
          }
        },
        breedId: 31455,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
        speed: 75,
        stamina: 80,
        agility: 70,
        balance: 85,
        precision: 90,
        intelligence: 88,
        boldness: 65,
        flexibility: 72,
        obedience: 95,
        focus: 82,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 67 |[39m
     [90m 68 |[39m     [90m// Create test horse (4 years old to test legacy score calculation)[39m
    [31m[1m>[22m[39m[90m 69 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 70 |[39m       data[33m:[39m {
     [90m 71 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 72 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/legacyScoreTraitIntegration.test.mjs:69:17)

  ● Legacy Score Trait Integration System › Legacy Score Integration › should integrate trait score into overall legacy score

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625724915",
        sex: "stallion",
        dateOfBirth: new Date("2022-01-29T18:42:04.915Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "5807c28a-7ce6-45bb-882a-46d53f3f47e8"
          }
        },
        breedId: 31456,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
        speed: 75,
        stamina: 80,
        agility: 70,
        balance: 85,
        precision: 90,
        intelligence: 88,
        boldness: 65,
        flexibility: 72,
        obedience: 95,
        focus: 82,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 67 |[39m
     [90m 68 |[39m     [90m// Create test horse (4 years old to test legacy score calculation)[39m
    [31m[1m>[22m[39m[90m 69 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 70 |[39m       data[33m:[39m {
     [90m 71 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 72 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/legacyScoreTraitIntegration.test.mjs:69:17)

  ● Legacy Score Trait Integration System › Legacy Score Integration › should calculate legacy score without traits

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625724931",
        sex: "stallion",
        dateOfBirth: new Date("2022-01-29T18:42:04.931Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "d6d475f8-8106-4a1e-963e-7a595aaa2e1e"
          }
        },
        breedId: 31457,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
        speed: 75,
        stamina: 80,
        agility: 70,
        balance: 85,
        precision: 90,
        intelligence: 88,
        boldness: 65,
        flexibility: 72,
        obedience: 95,
        focus: 82,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 67 |[39m
     [90m 68 |[39m     [90m// Create test horse (4 years old to test legacy score calculation)[39m
    [31m[1m>[22m[39m[90m 69 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 70 |[39m       data[33m:[39m {
     [90m 71 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 72 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/legacyScoreTraitIntegration.test.mjs:69:17)

  ● Legacy Score Trait Integration System › API Endpoints › should get horse legacy score via API

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625724946",
        sex: "stallion",
        dateOfBirth: new Date("2022-01-29T18:42:04.946Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "97c191db-2a81-4528-900f-844e1d687a2a"
          }
        },
        breedId: 31458,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
        speed: 75,
        stamina: 80,
        agility: 70,
        balance: 85,
        precision: 90,
        intelligence: 88,
        boldness: 65,
        flexibility: 72,
        obedience: 95,
        focus: 82,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 67 |[39m
     [90m 68 |[39m     [90m// Create test horse (4 years old to test legacy score calculation)[39m
    [31m[1m>[22m[39m[90m 69 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 70 |[39m       data[33m:[39m {
     [90m 71 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 72 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/legacyScoreTraitIntegration.test.mjs:69:17)

  ● Legacy Score Trait Integration System › API Endpoints › should require authentication for legacy score endpoint

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625724957",
        sex: "stallion",
        dateOfBirth: new Date("2022-01-29T18:42:04.957Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "633924f0-b2d5-439e-b1f7-dbd23473a57d"
          }
        },
        breedId: 31459,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
        speed: 75,
        stamina: 80,
        agility: 70,
        balance: 85,
        precision: 90,
        intelligence: 88,
        boldness: 65,
        flexibility: 72,
        obedience: 95,
        focus: 82,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 67 |[39m
     [90m 68 |[39m     [90m// Create test horse (4 years old to test legacy score calculation)[39m
    [31m[1m>[22m[39m[90m 69 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 70 |[39m       data[33m:[39m {
     [90m 71 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 72 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/legacyScoreTraitIntegration.test.mjs:69:17)

  ● Legacy Score Trait Integration System › API Endpoints › should return 404 for non-existent horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625724969",
        sex: "stallion",
        dateOfBirth: new Date("2022-01-29T18:42:04.969Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "c548752c-ede4-4854-8e60-e49bb757558d"
          }
        },
        breedId: 31460,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
        speed: 75,
        stamina: 80,
        agility: 70,
        balance: 85,
        precision: 90,
        intelligence: 88,
        boldness: 65,
        flexibility: 72,
        obedience: 95,
        focus: 82,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 67 |[39m
     [90m 68 |[39m     [90m// Create test horse (4 years old to test legacy score calculation)[39m
    [31m[1m>[22m[39m[90m 69 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 70 |[39m       data[33m:[39m {
     [90m 71 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 72 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/legacyScoreTraitIntegration.test.mjs:69:17)

[2026-01-28 13:42:05] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:42:05] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:42:05] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:42:05] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:42:06] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:06] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:06] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:06] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:06] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:06] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:06] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:06] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:06] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:06] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:42:06] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 13:42:06] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:06] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:42:06] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:42:06] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:42:06] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:42:06] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:42:06] info: [Sentry] Sentry error handler not attached (DSN not configured).
FAIL tests/foalTaskLoggingIntegration.test.mjs
  Foal Task Logging Integration
    Task Log JSON Updates
      × should initialize task log with first enrichment task (93 ms)
      × should increment existing task count in task log (25 ms)
      × should add new task to existing task log (20 ms)
      × should handle multiple task types across different foals (21 ms)
    Streak Tracking Integration
      × should update lastGroomed timestamp on each interaction (19 ms)
      × should enforce daily interaction limits correctly (21 ms)
    Age-Based Task Eligibility Enforcement
      × should reject enrichment tasks for horses too old (17 ms)
      × should reject grooming tasks for horses too young (17 ms)

  ● Foal Task Logging Integration › Task Log JSON Updates › should initialize task log with first enrichment task

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 146649,
        groomId: 73282,
        user: {
        ~~~~
          connect: {
            id: "test-user-task-logging-1"
          }
        },
        isActive: true,
        priority: 1,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 150 |[39m
     [90m 151 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 152 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 153 |[39m       data[33m:[39m {
     [90m 154 |[39m         foalId[33m:[39m testFoal[33m.[39mid[33m,[39m
     [90m 155 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/foalTaskLoggingIntegration.test.mjs:152:22)

  ● Foal Task Logging Integration › Task Log JSON Updates › should increment existing task count in task log

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 146650,
        groomId: 73283,
        user: {
        ~~~~
          connect: {
            id: "test-user-task-logging-2"
          }
        },
        isActive: true,
        priority: 1,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 150 |[39m
     [90m 151 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 152 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 153 |[39m       data[33m:[39m {
     [90m 154 |[39m         foalId[33m:[39m testFoal[33m.[39mid[33m,[39m
     [90m 155 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/foalTaskLoggingIntegration.test.mjs:152:22)

  ● Foal Task Logging Integration › Task Log JSON Updates › should add new task to existing task log

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 146651,
        groomId: 73284,
        user: {
        ~~~~
          connect: {
            id: "test-user-task-logging-3"
          }
        },
        isActive: true,
        priority: 1,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 150 |[39m
     [90m 151 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 152 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 153 |[39m       data[33m:[39m {
     [90m 154 |[39m         foalId[33m:[39m testFoal[33m.[39mid[33m,[39m
     [90m 155 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/foalTaskLoggingIntegration.test.mjs:152:22)

  ● Foal Task Logging Integration › Task Log JSON Updates › should handle multiple task types across different foals

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 146652,
        groomId: 73285,
        user: {
        ~~~~
          connect: {
            id: "test-user-task-logging-4"
          }
        },
        isActive: true,
        priority: 1,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 150 |[39m
     [90m 151 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 152 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 153 |[39m       data[33m:[39m {
     [90m 154 |[39m         foalId[33m:[39m testFoal[33m.[39mid[33m,[39m
     [90m 155 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/foalTaskLoggingIntegration.test.mjs:152:22)

  ● Foal Task Logging Integration › Streak Tracking Integration › should update lastGroomed timestamp on each interaction

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 146653,
        groomId: 73286,
        user: {
        ~~~~
          connect: {
            id: "test-user-task-logging-5"
          }
        },
        isActive: true,
        priority: 1,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 150 |[39m
     [90m 151 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 152 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 153 |[39m       data[33m:[39m {
     [90m 154 |[39m         foalId[33m:[39m testFoal[33m.[39mid[33m,[39m
     [90m 155 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/foalTaskLoggingIntegration.test.mjs:152:22)

  ● Foal Task Logging Integration › Streak Tracking Integration › should enforce daily interaction limits correctly

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 146654,
        groomId: 73287,
        user: {
        ~~~~
          connect: {
            id: "test-user-task-logging-6"
          }
        },
        isActive: true,
        priority: 1,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 150 |[39m
     [90m 151 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 152 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 153 |[39m       data[33m:[39m {
     [90m 154 |[39m         foalId[33m:[39m testFoal[33m.[39mid[33m,[39m
     [90m 155 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/foalTaskLoggingIntegration.test.mjs:152:22)

  ● Foal Task Logging Integration › Age-Based Task Eligibility Enforcement › should reject enrichment tasks for horses too old

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 146655,
        groomId: 73288,
        user: {
        ~~~~
          connect: {
            id: "test-user-task-logging-7"
          }
        },
        isActive: true,
        priority: 1,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 150 |[39m
     [90m 151 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 152 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 153 |[39m       data[33m:[39m {
     [90m 154 |[39m         foalId[33m:[39m testFoal[33m.[39mid[33m,[39m
     [90m 155 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/foalTaskLoggingIntegration.test.mjs:152:22)

  ● Foal Task Logging Integration › Age-Based Task Eligibility Enforcement › should reject grooming tasks for horses too young

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 146656,
        groomId: 73289,
        user: {
        ~~~~
          connect: {
            id: "test-user-task-logging-8"
          }
        },
        isActive: true,
        priority: 1,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 150 |[39m
     [90m 151 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 152 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 153 |[39m       data[33m:[39m {
     [90m 154 |[39m         foalId[33m:[39m testFoal[33m.[39mid[33m,[39m
     [90m 155 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/foalTaskLoggingIntegration.test.mjs:152:22)

[2026-01-28 13:42:06] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:42:06] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:42:06] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:42:06] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:42:07] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:07] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:07] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:07] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:07] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:07] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:07] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:07] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:07] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:07] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:42:07] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 13:42:07] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:07] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:42:07] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:42:07] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:42:07] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:42:07] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:42:07] info: [Sentry] Sentry error handler not attached (DSN not configured).
FAIL tests/integration/groomSalarySystem.test.mjs
  Groom Salary System
    Salary Calculation
      × should calculate correct weekly salary for expert groom with specialty (99 ms)
      × should calculate correct salary for novice groom (23 ms)
      × should calculate user total salary cost (20 ms)
    API Endpoints
      × should get user salary cost (17 ms)
      × should get salary summary (18 ms)
      × should get groom salary (21 ms)
      × should get salary payment history (14 ms)
      × should get cron job status (14 ms)
      × should validate groom ownership (15 ms)
    Salary Processing
      × should process weekly salaries successfully (15 ms)
      × should handle insufficient funds (14 ms)
      × should trigger salary processing via API (17 ms)
    Authentication
      × should require authentication for GET /api/groom-salaries/cost (14 ms)
      × should require authentication for GET /api/groom-salaries/summary (14 ms)
      × should require authentication for GET /api/groom-salaries/history (14 ms)
      × should require authentication for GET /api/groom-salaries/groom/:groomId/salary (13 ms)
      × should require authentication for GET /api/groom-salaries/status (15 ms)
      × should require authentication for POST /api/groom-salaries/process (14 ms)

  ● Groom Salary System › Salary Calculation › should calculate correct weekly salary for expert groom with specialty

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73290,
        foalId: 146657,
        user: {
        ~~~~
          connect: {
            id: "354f4955-62f8-4a44-b5ff-94491c3ec4d1"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ● Groom Salary System › Salary Calculation › should calculate correct salary for novice groom

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73291,
        foalId: 146658,
        user: {
        ~~~~
          connect: {
            id: "55b5d9d6-68b7-41d4-98de-939a0b7ff0e1"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ● Groom Salary System › Salary Calculation › should calculate user total salary cost

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73292,
        foalId: 146659,
        user: {
        ~~~~
          connect: {
            id: "13f97bf9-b150-4cb8-abe6-b6b1f7fd0987"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ● Groom Salary System › API Endpoints › should get user salary cost

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73293,
        foalId: 146660,
        user: {
        ~~~~
          connect: {
            id: "66676a1c-e280-4e14-bca5-13245572418b"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ● Groom Salary System › API Endpoints › should get salary summary

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73294,
        foalId: 146661,
        user: {
        ~~~~
          connect: {
            id: "83c80d8c-1ee5-49e1-89b8-37be783b3972"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ● Groom Salary System › API Endpoints › should get groom salary

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73295,
        foalId: 146662,
        user: {
        ~~~~
          connect: {
            id: "7f255b4b-9c19-40b1-a6b8-6ecca22daa06"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ● Groom Salary System › API Endpoints › should get salary payment history

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73296,
        foalId: 146663,
        user: {
        ~~~~
          connect: {
            id: "201cbbcd-bfdc-413a-9302-dc76ec7e49be"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ● Groom Salary System › API Endpoints › should get cron job status

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73297,
        foalId: 146664,
        user: {
        ~~~~
          connect: {
            id: "cc5f9688-4dbc-40bc-827f-ec30411cffc2"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ● Groom Salary System › API Endpoints › should validate groom ownership

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73298,
        foalId: 146665,
        user: {
        ~~~~
          connect: {
            id: "157ef307-56ff-4ce6-b322-e2cadd52454e"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ● Groom Salary System › Salary Processing › should process weekly salaries successfully

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73299,
        foalId: 146666,
        user: {
        ~~~~
          connect: {
            id: "aeee2474-3411-4410-8204-418cc99371d0"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ● Groom Salary System › Salary Processing › should handle insufficient funds

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73300,
        foalId: 146667,
        user: {
        ~~~~
          connect: {
            id: "dfdefa47-f475-4a26-ae0b-aebfecfcbffe"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ● Groom Salary System › Salary Processing › should trigger salary processing via API

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73301,
        foalId: 146668,
        user: {
        ~~~~
          connect: {
            id: "c2fcad64-1ae0-44a3-9267-6d170c4206f1"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ● Groom Salary System › Authentication › should require authentication for GET /api/groom-salaries/cost

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73302,
        foalId: 146669,
        user: {
        ~~~~
          connect: {
            id: "b8ceb017-04ca-464c-95fc-f84d00059f8b"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ● Groom Salary System › Authentication › should require authentication for GET /api/groom-salaries/summary

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73303,
        foalId: 146670,
        user: {
        ~~~~
          connect: {
            id: "d7fa2e12-40da-48ca-b959-28575e52c2c7"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ● Groom Salary System › Authentication › should require authentication for GET /api/groom-salaries/history

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73304,
        foalId: 146671,
        user: {
        ~~~~
          connect: {
            id: "5f5d3624-91ea-4378-b43d-5928aee6c645"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ● Groom Salary System › Authentication › should require authentication for GET /api/groom-salaries/groom/:groomId/salary

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73305,
        foalId: 146672,
        user: {
        ~~~~
          connect: {
            id: "be4b07e4-b50c-453b-941d-dcbb8cd12840"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ● Groom Salary System › Authentication › should require authentication for GET /api/groom-salaries/status

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73306,
        foalId: 146673,
        user: {
        ~~~~
          connect: {
            id: "89bd1d28-0cfc-4ba4-9ff2-d7e247db8a63"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ● Groom Salary System › Authentication › should require authentication for POST /api/groom-salaries/process

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73307,
        foalId: 146674,
        user: {
        ~~~~
          connect: {
            id: "493b848f-b692-40b6-976f-0a4142fe8917"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

[2026-01-28 13:42:08] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:42:08] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:42:08] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:42:08] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:42:09] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:09] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:09] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:09] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:09] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:09] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:09] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:09] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:09] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:09] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:42:09] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 13:42:09] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:09] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:42:09] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:42:09] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:42:09] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:42:09] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:42:09] info: [Sentry] Sentry error handler not attached (DSN not configured).
  console.error
    [ERROR] Failed in beforeAll setup: PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:
    
    {
      data: {
        name: "Test Discovery Horse 1769625729587",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T18:42:09.587Z"),
        breedId: 31461,
        ~~~~~~~
        user: {
          connect: {
            id: "cd87b7c9-dd6e-4f21-bb77-003b687dc3a4"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }
    
    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.
        at kn (C:\Users\heirr\OneDrive\Desktop\Equoria\packages\database\node_modules\@prisma\client\runtime\library.js:29:1363)
        at Zn.handleRequestError (C:\Users\heirr\OneDrive\Desktop\Equoria\packages\database\node_modules\@prisma\client\runtime\library.js:121:7102)
        at Zn.handleAndLogRequestError (C:\Users\heirr\OneDrive\Desktop\Equoria\packages\database\node_modules\@prisma\client\runtime\library.js:121:6784)
        at Zn.request (C:\Users\heirr\OneDrive\Desktop\Equoria\packages\database\node_modules\@prisma\client\runtime\library.js:121:6491)
        at l (C:\Users\heirr\OneDrive\Desktop\Equoria\packages\database\node_modules\@prisma\client\runtime\library.js:130:9778)
        at Object.<anonymous> (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\traitRoutes.test.mjs:52:19) {
      clientVersion: '6.8.2'
    }

    [0m [90m 69 |[39m       console[33m.[39mlog([32m'[DEBUG] Created test horse:'[39m[33m,[39m testHorse[33m.[39mid[33m,[39m [32m'owned by user:'[39m[33m,[39m testUser[33m.[39mid)[33m;[39m
     [90m 70 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 71 |[39m       console[33m.[39merror([32m'[ERROR] Failed in beforeAll setup:'[39m[33m,[39m error)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 72 |[39m       [36mthrow[39m error[33m;[39m
     [90m 73 |[39m     }
     [90m 74 |[39m   })[33m;[39m[0m

      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:71:15)

FAIL tests/integration/traitRoutes.test.mjs
  Trait Routes Integration Tests
    POST /api/traits/discover/:horseId
      × should trigger trait discovery successfully (1 ms)
      × should return validation error for invalid horse ID
      × should return 404 for non-existent horse (1 ms)
      × should handle optional parameters correctly
    GET /api/traits/horse/:horseId
      × should get horse traits successfully
      × should return validation error for invalid horse ID
      × should return 404 for non-existent horse
    GET /api/traits/definitions
      × should get all trait definitions
      × should filter traits by type
      × should return validation error for invalid type
    GET /api/traits/discovery-status/:horseId
      × should get discovery status successfully (1 ms)
      × should return validation error for invalid horse ID
      × should return 404 for non-existent horse
    POST /api/traits/batch-discover
      × should process batch discovery successfully
      × should return validation error for empty horse IDs array
      × should return validation error for too many horse IDs
      × should return validation error for invalid horse IDs (1 ms)
      × should handle mix of valid and invalid horse IDs

  ● Trait Routes Integration Tests › POST /api/traits/discover/:horseId › should trigger trait discovery successfully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769625729587",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T18:42:09.587Z"),
        breedId: 31461,
        ~~~~~~~
        user: {
          connect: {
            id: "cd87b7c9-dd6e-4f21-bb77-003b687dc3a4"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ● Trait Routes Integration Tests › POST /api/traits/discover/:horseId › should return validation error for invalid horse ID

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769625729587",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T18:42:09.587Z"),
        breedId: 31461,
        ~~~~~~~
        user: {
          connect: {
            id: "cd87b7c9-dd6e-4f21-bb77-003b687dc3a4"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ● Trait Routes Integration Tests › POST /api/traits/discover/:horseId › should return 404 for non-existent horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769625729587",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T18:42:09.587Z"),
        breedId: 31461,
        ~~~~~~~
        user: {
          connect: {
            id: "cd87b7c9-dd6e-4f21-bb77-003b687dc3a4"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ● Trait Routes Integration Tests › POST /api/traits/discover/:horseId › should handle optional parameters correctly

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769625729587",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T18:42:09.587Z"),
        breedId: 31461,
        ~~~~~~~
        user: {
          connect: {
            id: "cd87b7c9-dd6e-4f21-bb77-003b687dc3a4"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ● Trait Routes Integration Tests › GET /api/traits/horse/:horseId › should get horse traits successfully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769625729587",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T18:42:09.587Z"),
        breedId: 31461,
        ~~~~~~~
        user: {
          connect: {
            id: "cd87b7c9-dd6e-4f21-bb77-003b687dc3a4"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ● Trait Routes Integration Tests › GET /api/traits/horse/:horseId › should return validation error for invalid horse ID

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769625729587",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T18:42:09.587Z"),
        breedId: 31461,
        ~~~~~~~
        user: {
          connect: {
            id: "cd87b7c9-dd6e-4f21-bb77-003b687dc3a4"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ● Trait Routes Integration Tests › GET /api/traits/horse/:horseId › should return 404 for non-existent horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769625729587",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T18:42:09.587Z"),
        breedId: 31461,
        ~~~~~~~
        user: {
          connect: {
            id: "cd87b7c9-dd6e-4f21-bb77-003b687dc3a4"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ● Trait Routes Integration Tests › GET /api/traits/definitions › should get all trait definitions

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769625729587",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T18:42:09.587Z"),
        breedId: 31461,
        ~~~~~~~
        user: {
          connect: {
            id: "cd87b7c9-dd6e-4f21-bb77-003b687dc3a4"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ● Trait Routes Integration Tests › GET /api/traits/definitions › should filter traits by type

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769625729587",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T18:42:09.587Z"),
        breedId: 31461,
        ~~~~~~~
        user: {
          connect: {
            id: "cd87b7c9-dd6e-4f21-bb77-003b687dc3a4"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ● Trait Routes Integration Tests › GET /api/traits/definitions › should return validation error for invalid type

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769625729587",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T18:42:09.587Z"),
        breedId: 31461,
        ~~~~~~~
        user: {
          connect: {
            id: "cd87b7c9-dd6e-4f21-bb77-003b687dc3a4"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ● Trait Routes Integration Tests › GET /api/traits/discovery-status/:horseId › should get discovery status successfully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769625729587",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T18:42:09.587Z"),
        breedId: 31461,
        ~~~~~~~
        user: {
          connect: {
            id: "cd87b7c9-dd6e-4f21-bb77-003b687dc3a4"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ● Trait Routes Integration Tests › GET /api/traits/discovery-status/:horseId › should return validation error for invalid horse ID

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769625729587",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T18:42:09.587Z"),
        breedId: 31461,
        ~~~~~~~
        user: {
          connect: {
            id: "cd87b7c9-dd6e-4f21-bb77-003b687dc3a4"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ● Trait Routes Integration Tests › GET /api/traits/discovery-status/:horseId › should return 404 for non-existent horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769625729587",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T18:42:09.587Z"),
        breedId: 31461,
        ~~~~~~~
        user: {
          connect: {
            id: "cd87b7c9-dd6e-4f21-bb77-003b687dc3a4"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ● Trait Routes Integration Tests › POST /api/traits/batch-discover › should process batch discovery successfully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769625729587",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T18:42:09.587Z"),
        breedId: 31461,
        ~~~~~~~
        user: {
          connect: {
            id: "cd87b7c9-dd6e-4f21-bb77-003b687dc3a4"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ● Trait Routes Integration Tests › POST /api/traits/batch-discover › should return validation error for empty horse IDs array

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769625729587",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T18:42:09.587Z"),
        breedId: 31461,
        ~~~~~~~
        user: {
          connect: {
            id: "cd87b7c9-dd6e-4f21-bb77-003b687dc3a4"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ● Trait Routes Integration Tests › POST /api/traits/batch-discover › should return validation error for too many horse IDs

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769625729587",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T18:42:09.587Z"),
        breedId: 31461,
        ~~~~~~~
        user: {
          connect: {
            id: "cd87b7c9-dd6e-4f21-bb77-003b687dc3a4"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ● Trait Routes Integration Tests › POST /api/traits/batch-discover › should return validation error for invalid horse IDs

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769625729587",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T18:42:09.587Z"),
        breedId: 31461,
        ~~~~~~~
        user: {
          connect: {
            id: "cd87b7c9-dd6e-4f21-bb77-003b687dc3a4"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ● Trait Routes Integration Tests › POST /api/traits/batch-discover › should handle mix of valid and invalid horse IDs

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769625729587",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T18:42:09.587Z"),
        breedId: 31461,
        ~~~~~~~
        user: {
          connect: {
            id: "cd87b7c9-dd6e-4f21-bb77-003b687dc3a4"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

[2026-01-28 13:42:09] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:42:09] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:42:09] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:42:09] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:42:10] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:10] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:10] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:10] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:10] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:10] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:10] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:10] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:10] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:10] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:42:10] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 13:42:10] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:10] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:42:10] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:42:10] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:42:10] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:42:10] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:42:10] info: [Sentry] Sentry error handler not attached (DSN not configured).
FAIL tests/integration/groomHandlerSystem.test.mjs
  Groom Handler System Integration Tests
    1. Handler Assignment
      × should get the assigned handler for a horse (1 ms)
      × should return no handler for a horse without assignment
      × should validate horse ownership
    2. Handler Eligibility
      × should check handler eligibility for a conformation class (1 ms)
      × should validate conformation class
    3. Handler Configuration
      × should get handler configuration
    4. Handler Recommendations
      × should get handler recommendations for a horse
    5. Authentication and Authorization
      × should require authentication for all endpoints

  ● Groom Handler System Integration Tests › 1. Handler Assignment › should get the assigned handler for a horse

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73308,
        foalId: 146675,
        user: {
        ~~~~
          connect: {
            id: "b221db0c-2e37-4597-8de7-991492570af3"
          }
        },
        priority: 1,
        isActive: true,
        notes: "Test assignment for handler system",
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 58 |[39m
     [90m 59 |[39m     [90m// Create test assignment[39m
    [31m[1m>[22m[39m[90m 60 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 61 |[39m       data[33m:[39m {
     [90m 62 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 63 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomHandlerSystem.test.mjs:60:5)

  ● Groom Handler System Integration Tests › 1. Handler Assignment › should return no handler for a horse without assignment

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73308,
        foalId: 146675,
        user: {
        ~~~~
          connect: {
            id: "b221db0c-2e37-4597-8de7-991492570af3"
          }
        },
        priority: 1,
        isActive: true,
        notes: "Test assignment for handler system",
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 58 |[39m
     [90m 59 |[39m     [90m// Create test assignment[39m
    [31m[1m>[22m[39m[90m 60 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 61 |[39m       data[33m:[39m {
     [90m 62 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 63 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomHandlerSystem.test.mjs:60:5)

  ● Groom Handler System Integration Tests › 1. Handler Assignment › should validate horse ownership

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73308,
        foalId: 146675,
        user: {
        ~~~~
          connect: {
            id: "b221db0c-2e37-4597-8de7-991492570af3"
          }
        },
        priority: 1,
        isActive: true,
        notes: "Test assignment for handler system",
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 58 |[39m
     [90m 59 |[39m     [90m// Create test assignment[39m
    [31m[1m>[22m[39m[90m 60 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 61 |[39m       data[33m:[39m {
     [90m 62 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 63 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomHandlerSystem.test.mjs:60:5)

  ● Groom Handler System Integration Tests › 2. Handler Eligibility › should check handler eligibility for a conformation class

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73308,
        foalId: 146675,
        user: {
        ~~~~
          connect: {
            id: "b221db0c-2e37-4597-8de7-991492570af3"
          }
        },
        priority: 1,
        isActive: true,
        notes: "Test assignment for handler system",
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 58 |[39m
     [90m 59 |[39m     [90m// Create test assignment[39m
    [31m[1m>[22m[39m[90m 60 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 61 |[39m       data[33m:[39m {
     [90m 62 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 63 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomHandlerSystem.test.mjs:60:5)

  ● Groom Handler System Integration Tests › 2. Handler Eligibility › should validate conformation class

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73308,
        foalId: 146675,
        user: {
        ~~~~
          connect: {
            id: "b221db0c-2e37-4597-8de7-991492570af3"
          }
        },
        priority: 1,
        isActive: true,
        notes: "Test assignment for handler system",
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 58 |[39m
     [90m 59 |[39m     [90m// Create test assignment[39m
    [31m[1m>[22m[39m[90m 60 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 61 |[39m       data[33m:[39m {
     [90m 62 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 63 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomHandlerSystem.test.mjs:60:5)

  ● Groom Handler System Integration Tests › 3. Handler Configuration › should get handler configuration

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73308,
        foalId: 146675,
        user: {
        ~~~~
          connect: {
            id: "b221db0c-2e37-4597-8de7-991492570af3"
          }
        },
        priority: 1,
        isActive: true,
        notes: "Test assignment for handler system",
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 58 |[39m
     [90m 59 |[39m     [90m// Create test assignment[39m
    [31m[1m>[22m[39m[90m 60 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 61 |[39m       data[33m:[39m {
     [90m 62 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 63 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomHandlerSystem.test.mjs:60:5)

  ● Groom Handler System Integration Tests › 4. Handler Recommendations › should get handler recommendations for a horse

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73308,
        foalId: 146675,
        user: {
        ~~~~
          connect: {
            id: "b221db0c-2e37-4597-8de7-991492570af3"
          }
        },
        priority: 1,
        isActive: true,
        notes: "Test assignment for handler system",
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 58 |[39m
     [90m 59 |[39m     [90m// Create test assignment[39m
    [31m[1m>[22m[39m[90m 60 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 61 |[39m       data[33m:[39m {
     [90m 62 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 63 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomHandlerSystem.test.mjs:60:5)

  ● Groom Handler System Integration Tests › 5. Authentication and Authorization › should require authentication for all endpoints

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73308,
        foalId: 146675,
        user: {
        ~~~~
          connect: {
            id: "b221db0c-2e37-4597-8de7-991492570af3"
          }
        },
        priority: 1,
        isActive: true,
        notes: "Test assignment for handler system",
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 58 |[39m
     [90m 59 |[39m     [90m// Create test assignment[39m
    [31m[1m>[22m[39m[90m 60 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 61 |[39m       data[33m:[39m {
     [90m 62 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 63 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomHandlerSystem.test.mjs:60:5)

[2026-01-28 13:42:11] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:42:11] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:42:11] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:42:11] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:42:12] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:12] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:12] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:12] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:12] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:12] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:12] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:12] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:12] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:12] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:42:12] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 13:42:12] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:12] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:42:12] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:42:12] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:42:12] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:42:12] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:42:12] info: [Sentry] Sentry error handler not attached (DSN not configured).
FAIL tests/training.test.mjs
  🏋️ INTEGRATION: Training System - Complete Business Logic Validation
    BUSINESS RULE: Age Requirements (3+ years old)
      × BLOCKS training for horses under 3 years old (1 ms)
      × ALLOWS training for horses 3+ years old
    BUSINESS RULE: Discipline Score Progression (+5 base)
      × INCREASES discipline scores by +5 for first-time training
      × ACCUMULATES discipline scores across multiple training sessions (different horses)
    BUSINESS RULE: Global Cooldown (One Discipline Per Week)
      × BLOCKS training when horse has trained ANY discipline within 7 days
      × ALLOWS training after 7-day cooldown expires
    BUSINESS RULE: XP Award for Training
      × AWARDS XP to horse owner (Player) when training succeeds
    BUSINESS RULE: Training Log Creation
      × CREATES training log entry for successful training
    BUSINESS RULE: Error Handling and Data Integrity
      × MAINTAINS database integrity when training non-existent horse
      × VALIDATES input parameters and rejects invalid requests
    BUSINESS RULE: Next Training Date Calculation
      × PROVIDES accurate next training date (7 days from training)

  ● 🏋️ INTEGRATION: Training System - Complete Business Logic Validation › BUSINESS RULE: Age Requirements (3+ years old) › BLOCKS training for horses under 3 years old

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "21c19110-5e4d-4a94-b939-1d1ddec04323"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:12.258Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 136 |[39m
     [90m 137 |[39m     [90m// Create test horses with User relationships[39m
    [31m[1m>[22m[39m[90m 138 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 139 |[39m       data[33m:[39m {
     [90m 140 |[39m         name[33m:[39m [32m'Test Adult Horse'[39m[33m,[39m
     [90m 141 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/training.test.mjs:138:18)

  ● 🏋️ INTEGRATION: Training System - Complete Business Logic Validation › BUSINESS RULE: Age Requirements (3+ years old) › ALLOWS training for horses 3+ years old

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "21c19110-5e4d-4a94-b939-1d1ddec04323"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:12.258Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 136 |[39m
     [90m 137 |[39m     [90m// Create test horses with User relationships[39m
    [31m[1m>[22m[39m[90m 138 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 139 |[39m       data[33m:[39m {
     [90m 140 |[39m         name[33m:[39m [32m'Test Adult Horse'[39m[33m,[39m
     [90m 141 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/training.test.mjs:138:18)

  ● 🏋️ INTEGRATION: Training System - Complete Business Logic Validation › BUSINESS RULE: Discipline Score Progression (+5 base) › INCREASES discipline scores by +5 for first-time training

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "21c19110-5e4d-4a94-b939-1d1ddec04323"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:12.258Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 136 |[39m
     [90m 137 |[39m     [90m// Create test horses with User relationships[39m
    [31m[1m>[22m[39m[90m 138 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 139 |[39m       data[33m:[39m {
     [90m 140 |[39m         name[33m:[39m [32m'Test Adult Horse'[39m[33m,[39m
     [90m 141 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/training.test.mjs:138:18)

  ● 🏋️ INTEGRATION: Training System - Complete Business Logic Validation › BUSINESS RULE: Discipline Score Progression (+5 base) › ACCUMULATES discipline scores across multiple training sessions (different horses)

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "21c19110-5e4d-4a94-b939-1d1ddec04323"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:12.258Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 136 |[39m
     [90m 137 |[39m     [90m// Create test horses with User relationships[39m
    [31m[1m>[22m[39m[90m 138 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 139 |[39m       data[33m:[39m {
     [90m 140 |[39m         name[33m:[39m [32m'Test Adult Horse'[39m[33m,[39m
     [90m 141 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/training.test.mjs:138:18)

  ● 🏋️ INTEGRATION: Training System - Complete Business Logic Validation › BUSINESS RULE: Global Cooldown (One Discipline Per Week) › BLOCKS training when horse has trained ANY discipline within 7 days

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "21c19110-5e4d-4a94-b939-1d1ddec04323"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:12.258Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 136 |[39m
     [90m 137 |[39m     [90m// Create test horses with User relationships[39m
    [31m[1m>[22m[39m[90m 138 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 139 |[39m       data[33m:[39m {
     [90m 140 |[39m         name[33m:[39m [32m'Test Adult Horse'[39m[33m,[39m
     [90m 141 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/training.test.mjs:138:18)

  ● 🏋️ INTEGRATION: Training System - Complete Business Logic Validation › BUSINESS RULE: Global Cooldown (One Discipline Per Week) › ALLOWS training after 7-day cooldown expires

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "21c19110-5e4d-4a94-b939-1d1ddec04323"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:12.258Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 136 |[39m
     [90m 137 |[39m     [90m// Create test horses with User relationships[39m
    [31m[1m>[22m[39m[90m 138 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 139 |[39m       data[33m:[39m {
     [90m 140 |[39m         name[33m:[39m [32m'Test Adult Horse'[39m[33m,[39m
     [90m 141 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/training.test.mjs:138:18)

  ● 🏋️ INTEGRATION: Training System - Complete Business Logic Validation › BUSINESS RULE: XP Award for Training › AWARDS XP to horse owner (Player) when training succeeds

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "21c19110-5e4d-4a94-b939-1d1ddec04323"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:12.258Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 136 |[39m
     [90m 137 |[39m     [90m// Create test horses with User relationships[39m
    [31m[1m>[22m[39m[90m 138 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 139 |[39m       data[33m:[39m {
     [90m 140 |[39m         name[33m:[39m [32m'Test Adult Horse'[39m[33m,[39m
     [90m 141 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/training.test.mjs:138:18)

  ● 🏋️ INTEGRATION: Training System - Complete Business Logic Validation › BUSINESS RULE: Training Log Creation › CREATES training log entry for successful training

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "21c19110-5e4d-4a94-b939-1d1ddec04323"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:12.258Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 136 |[39m
     [90m 137 |[39m     [90m// Create test horses with User relationships[39m
    [31m[1m>[22m[39m[90m 138 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 139 |[39m       data[33m:[39m {
     [90m 140 |[39m         name[33m:[39m [32m'Test Adult Horse'[39m[33m,[39m
     [90m 141 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/training.test.mjs:138:18)

  ● 🏋️ INTEGRATION: Training System - Complete Business Logic Validation › BUSINESS RULE: Error Handling and Data Integrity › MAINTAINS database integrity when training non-existent horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "21c19110-5e4d-4a94-b939-1d1ddec04323"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:12.258Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 136 |[39m
     [90m 137 |[39m     [90m// Create test horses with User relationships[39m
    [31m[1m>[22m[39m[90m 138 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 139 |[39m       data[33m:[39m {
     [90m 140 |[39m         name[33m:[39m [32m'Test Adult Horse'[39m[33m,[39m
     [90m 141 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/training.test.mjs:138:18)

  ● 🏋️ INTEGRATION: Training System - Complete Business Logic Validation › BUSINESS RULE: Error Handling and Data Integrity › VALIDATES input parameters and rejects invalid requests

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "21c19110-5e4d-4a94-b939-1d1ddec04323"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:12.258Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 136 |[39m
     [90m 137 |[39m     [90m// Create test horses with User relationships[39m
    [31m[1m>[22m[39m[90m 138 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 139 |[39m       data[33m:[39m {
     [90m 140 |[39m         name[33m:[39m [32m'Test Adult Horse'[39m[33m,[39m
     [90m 141 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/training.test.mjs:138:18)

  ● 🏋️ INTEGRATION: Training System - Complete Business Logic Validation › BUSINESS RULE: Next Training Date Calculation › PROVIDES accurate next training date (7 days from training)

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "21c19110-5e4d-4a94-b939-1d1ddec04323"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:12.258Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 136 |[39m
     [90m 137 |[39m     [90m// Create test horses with User relationships[39m
    [31m[1m>[22m[39m[90m 138 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 139 |[39m       data[33m:[39m {
     [90m 140 |[39m         name[33m:[39m [32m'Test Adult Horse'[39m[33m,[39m
     [90m 141 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/training.test.mjs:138:18)

[2026-01-28 13:42:12] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:42:12] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:42:12] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:42:12] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:42:13] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:13] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:13] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:13] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:13] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:13] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:13] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:13] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:13] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:13] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:42:13] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 13:42:13] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:13] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:42:13] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:42:13] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:42:13] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:42:13] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:42:13] info: [Sentry] Sentry error handler not attached (DSN not configured).
FAIL tests/traitTimeline.test.mjs
  Trait Timeline System
    Trait Timeline Data Aggregation
      × should aggregate trait timeline with milestone and groom data (187 ms)
      × should include detailed trait context and groom involvement (20 ms)
      × should filter traits by age cutoff (before age 4) (13 ms)
      × should categorize traits by type and rarity (13 ms)
      × should handle horses with no trait history (13 ms)
    Timeline Formatting and Organization
      × should organize events by age ranges (15 ms)
      × should include bond and stress trend analysis (16 ms)
    API Endpoints
      × should get trait timeline card via API (12 ms)
      × should require authentication for trait card endpoint (13 ms)
      × should return 404 for non-existent horse (12 ms)
      × should handle horses with empty trait timeline (11 ms)

  ● Trait Timeline System › Trait Timeline Data Aggregation › should aggregate trait timeline with milestone and groom data

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625733697",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T18:42:13.697Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "2bb58bac-b8ea-46ad-9c4c-57cbac32d6a6"
          }
        },
        breedId: 31462,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ● Trait Timeline System › Trait Timeline Data Aggregation › should include detailed trait context and groom involvement

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625733735",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T18:42:13.735Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "210e7ff4-ff35-4615-8df5-39bb2f704d26"
          }
        },
        breedId: 31463,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ● Trait Timeline System › Trait Timeline Data Aggregation › should filter traits by age cutoff (before age 4)

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625733749",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T18:42:13.749Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "48b0729b-162b-414c-9252-c583935248c7"
          }
        },
        breedId: 31464,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ● Trait Timeline System › Trait Timeline Data Aggregation › should categorize traits by type and rarity

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625733762",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T18:42:13.762Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "4c997b20-a62b-4181-9251-7524d65f1198"
          }
        },
        breedId: 31465,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ● Trait Timeline System › Trait Timeline Data Aggregation › should handle horses with no trait history

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625733775",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T18:42:13.775Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "190100bc-060a-460b-af9d-ca1038deedc6"
          }
        },
        breedId: 31466,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ● Trait Timeline System › Timeline Formatting and Organization › should organize events by age ranges

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625733791",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T18:42:13.791Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "6a62f200-f13d-4d54-a1a4-2cc7014fc38a"
          }
        },
        breedId: 31467,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ● Trait Timeline System › Timeline Formatting and Organization › should include bond and stress trend analysis

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625733806",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T18:42:13.806Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "8f243663-2583-4179-b9aa-24bd99a04979"
          }
        },
        breedId: 31468,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ● Trait Timeline System › API Endpoints › should get trait timeline card via API

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625733822",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T18:42:13.822Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "dd87c0f5-833d-4cff-86bf-f58879346fa3"
          }
        },
        breedId: 31469,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ● Trait Timeline System › API Endpoints › should require authentication for trait card endpoint

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625733834",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T18:42:13.834Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "de52b50d-fd2a-433f-b654-2fbb4cae211d"
          }
        },
        breedId: 31470,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ● Trait Timeline System › API Endpoints › should return 404 for non-existent horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625733848",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T18:42:13.848Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "976c1c6e-582d-4327-b5ca-9e0133203704"
          }
        },
        breedId: 31471,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ● Trait Timeline System › API Endpoints › should handle horses with empty trait timeline

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625733860",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T18:42:13.860Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "d9b7606b-e9b0-4a1b-a8db-05fd9de0b44e"
          }
        },
        breedId: 31472,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

[2026-01-28 13:42:14] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:42:14] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:42:14] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:42:14] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:42:14] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:14] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:14] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:14] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:14] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:14] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:14] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:14] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:14] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:14] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:42:15] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 13:42:15] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:15] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:42:15] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:42:15] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:42:15] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:42:15] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:42:15] info: [Sentry] Sentry error handler not attached (DSN not configured).
FAIL tests/integration/horseOverview.test.mjs
  🏇 INTEGRATION: Horse Overview API - Real Database Integration
    GET /api/horses/:id/overview
      × should return complete horse overview data successfully (83 ms)
      × should return 404 for non-existent horse (18 ms)
      × should return validation error for invalid horse ID (19 ms)
      × should handle horse with no training history gracefully (20 ms)
      × should calculate next training date correctly when horse has recent training (18 ms)
      × should handle missing optional fields gracefully (17 ms)

  ● 🏇 INTEGRATION: Horse Overview API - Real Database Integration › GET /api/horses/:id/overview › should return complete horse overview data successfully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse Nova",
        age: 5,
        sex: "Mare",
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "4e0a4334-7d3c-40a4-8cd4-e680eccdffb4"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Excellent",
        disciplineScores: {
          Dressage: 25,
          Show Jumping: 10
        },
        totalEarnings: 2200,
        tack: {
          saddleBonus: 5,
          bridleBonus: 3
        },
        rider: {
          name: "Jenna Black",
          bonusPercent: 0.08,
          penaltyPercent: 0
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 90 |[39m
     [90m 91 |[39m     [90m// Create test horse with real data[39m
    [31m[1m>[22m[39m[90m 92 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 93 |[39m       data[33m:[39m {
     [90m 94 |[39m         name[33m:[39m [32m'TestHorse Nova'[39m[33m,[39m
     [90m 95 |[39m         age[33m:[39m [35m5[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/horseOverview.test.mjs:92:17)

  ● 🏇 INTEGRATION: Horse Overview API - Real Database Integration › GET /api/horses/:id/overview › should return 404 for non-existent horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse Nova",
        age: 5,
        sex: "Mare",
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "d963280b-1bdc-41f5-bf8b-2c552944c7ae"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Excellent",
        disciplineScores: {
          Dressage: 25,
          Show Jumping: 10
        },
        totalEarnings: 2200,
        tack: {
          saddleBonus: 5,
          bridleBonus: 3
        },
        rider: {
          name: "Jenna Black",
          bonusPercent: 0.08,
          penaltyPercent: 0
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 90 |[39m
     [90m 91 |[39m     [90m// Create test horse with real data[39m
    [31m[1m>[22m[39m[90m 92 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 93 |[39m       data[33m:[39m {
     [90m 94 |[39m         name[33m:[39m [32m'TestHorse Nova'[39m[33m,[39m
     [90m 95 |[39m         age[33m:[39m [35m5[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/horseOverview.test.mjs:92:17)

  ● 🏇 INTEGRATION: Horse Overview API - Real Database Integration › GET /api/horses/:id/overview › should return validation error for invalid horse ID

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse Nova",
        age: 5,
        sex: "Mare",
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "7aa54db3-f823-4677-b509-ed8efdade063"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Excellent",
        disciplineScores: {
          Dressage: 25,
          Show Jumping: 10
        },
        totalEarnings: 2200,
        tack: {
          saddleBonus: 5,
          bridleBonus: 3
        },
        rider: {
          name: "Jenna Black",
          bonusPercent: 0.08,
          penaltyPercent: 0
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 90 |[39m
     [90m 91 |[39m     [90m// Create test horse with real data[39m
    [31m[1m>[22m[39m[90m 92 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 93 |[39m       data[33m:[39m {
     [90m 94 |[39m         name[33m:[39m [32m'TestHorse Nova'[39m[33m,[39m
     [90m 95 |[39m         age[33m:[39m [35m5[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/horseOverview.test.mjs:92:17)

  ● 🏇 INTEGRATION: Horse Overview API - Real Database Integration › GET /api/horses/:id/overview › should handle horse with no training history gracefully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse Nova",
        age: 5,
        sex: "Mare",
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "2d2823f1-6c61-4dc7-94f3-757e4c5eab64"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Excellent",
        disciplineScores: {
          Dressage: 25,
          Show Jumping: 10
        },
        totalEarnings: 2200,
        tack: {
          saddleBonus: 5,
          bridleBonus: 3
        },
        rider: {
          name: "Jenna Black",
          bonusPercent: 0.08,
          penaltyPercent: 0
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 90 |[39m
     [90m 91 |[39m     [90m// Create test horse with real data[39m
    [31m[1m>[22m[39m[90m 92 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 93 |[39m       data[33m:[39m {
     [90m 94 |[39m         name[33m:[39m [32m'TestHorse Nova'[39m[33m,[39m
     [90m 95 |[39m         age[33m:[39m [35m5[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/horseOverview.test.mjs:92:17)

  ● 🏇 INTEGRATION: Horse Overview API - Real Database Integration › GET /api/horses/:id/overview › should calculate next training date correctly when horse has recent training

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse Nova",
        age: 5,
        sex: "Mare",
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "36107a95-a90b-41d6-b803-f9bf1ce3b92f"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Excellent",
        disciplineScores: {
          Dressage: 25,
          Show Jumping: 10
        },
        totalEarnings: 2200,
        tack: {
          saddleBonus: 5,
          bridleBonus: 3
        },
        rider: {
          name: "Jenna Black",
          bonusPercent: 0.08,
          penaltyPercent: 0
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 90 |[39m
     [90m 91 |[39m     [90m// Create test horse with real data[39m
    [31m[1m>[22m[39m[90m 92 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 93 |[39m       data[33m:[39m {
     [90m 94 |[39m         name[33m:[39m [32m'TestHorse Nova'[39m[33m,[39m
     [90m 95 |[39m         age[33m:[39m [35m5[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/horseOverview.test.mjs:92:17)

  ● 🏇 INTEGRATION: Horse Overview API - Real Database Integration › GET /api/horses/:id/overview › should handle missing optional fields gracefully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse Nova",
        age: 5,
        sex: "Mare",
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "f1fad6ae-5972-4c44-99b6-b22c57dd4428"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Excellent",
        disciplineScores: {
          Dressage: 25,
          Show Jumping: 10
        },
        totalEarnings: 2200,
        tack: {
          saddleBonus: 5,
          bridleBonus: 3
        },
        rider: {
          name: "Jenna Black",
          bonusPercent: 0.08,
          penaltyPercent: 0
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 90 |[39m
     [90m 91 |[39m     [90m// Create test horse with real data[39m
    [31m[1m>[22m[39m[90m 92 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 93 |[39m       data[33m:[39m {
     [90m 94 |[39m         name[33m:[39m [32m'TestHorse Nova'[39m[33m,[39m
     [90m 95 |[39m         age[33m:[39m [35m5[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/horseOverview.test.mjs:92:17)

[2026-01-28 13:42:15] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:42:15] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:42:15] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:42:15] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:42:16] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:16] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:16] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:16] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:16] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:16] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:16] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:16] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:16] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:16] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:42:16] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 13:42:16] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:16] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:42:16] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:42:16] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:42:16] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:42:16] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:42:16] info: [Sentry] Sentry error handler not attached (DSN not configured).
FAIL tests/groomBonusTraits.test.mjs
  Groom Bonus Traits System
    Groom Bonus Trait Management
      × should assign bonus traits to a groom (81 ms)
      × should validate bonus trait constraints (15 ms)
      × should get groom bonus traits (15 ms)
    Trait Assignment Logic Integration
      × should apply bonus probability when conditions are met (14 ms)
      × should not apply bonus when bond is too low (15 ms)
      × should not apply bonus when coverage is insufficient (19 ms)
    API Endpoints
      × should get groom bonus traits via API (12 ms)
      × should update groom bonus traits via API (10 ms)
      × should reject invalid bonus trait updates (12 ms)
      × should require authentication for bonus trait endpoints (12 ms)

  ● Groom Bonus Traits System › Groom Bonus Trait Management › should assign bonus traits to a groom

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625736566",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T18:42:16.566Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "ecda0732-4b4f-490b-8df7-4dc959b8a279"
          }
        },
        breedId: 31473,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

  ● Groom Bonus Traits System › Groom Bonus Trait Management › should validate bonus trait constraints

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625736598",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T18:42:16.598Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "c2dbb2d8-7a30-4dc6-92f1-589be7f3ca96"
          }
        },
        breedId: 31474,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

  ● Groom Bonus Traits System › Groom Bonus Trait Management › should get groom bonus traits

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625736612",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T18:42:16.612Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "c5bcc35a-6ec8-4d4f-b7c8-8d6a4894bc0b"
          }
        },
        breedId: 31475,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

  ● Groom Bonus Traits System › Trait Assignment Logic Integration › should apply bonus probability when conditions are met

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625736627",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T18:42:16.627Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "dc07bfa2-338e-45d6-8d10-2cdd0434ab4e"
          }
        },
        breedId: 31476,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

  ● Groom Bonus Traits System › Trait Assignment Logic Integration › should not apply bonus when bond is too low

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625736641",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T18:42:16.641Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "18a8cb08-c4ba-406c-b3b6-ef9bf31ec058"
          }
        },
        breedId: 31477,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

  ● Groom Bonus Traits System › Trait Assignment Logic Integration › should not apply bonus when coverage is insufficient

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625736659",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T18:42:16.659Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "1edc1567-fe64-4888-aab9-a45991d07693"
          }
        },
        breedId: 31478,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

  ● Groom Bonus Traits System › API Endpoints › should get groom bonus traits via API

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625736675",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T18:42:16.675Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "757019ca-89f7-4b9b-8af4-85fd8736a25c"
          }
        },
        breedId: 31479,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

  ● Groom Bonus Traits System › API Endpoints › should update groom bonus traits via API

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625736687",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T18:42:16.687Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "50781ec7-9e1d-45ee-be5f-3aaf79ade0ec"
          }
        },
        breedId: 31480,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

  ● Groom Bonus Traits System › API Endpoints › should reject invalid bonus trait updates

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625736697",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T18:42:16.697Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "cbb71d95-f84d-4d7e-9ed1-ced684b8f55f"
          }
        },
        breedId: 31481,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

  ● Groom Bonus Traits System › API Endpoints › should require authentication for bonus trait endpoints

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625736709",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T18:42:16.709Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "ad7dbe8a-5a16-4c4b-8436-f02676e98aa3"
          }
        },
        breedId: 31482,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

[2026-01-28 13:42:16] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:42:16] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:42:16] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:42:16] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:42:17] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:17] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:17] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:17] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:17] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:17] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:17] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:17] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:17] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:17] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:42:17] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 13:42:17] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:17] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:42:17] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:42:17] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:42:17] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:42:17] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:42:17] info: [Sentry] Sentry error handler not attached (DSN not configured).
FAIL tests/breedingPrediction.test.mjs
  Breeding Prediction System
    Inheritance Probability Logic
      × should calculate trait inheritance probabilities from parent history (81 ms)
      × should calculate flag inheritance scores (15 ms)
      × should handle horses with no trait history (15 ms)
      × should calculate temperament influence modifiers (16 ms)
    Child Prediction Algorithms
      × should predict trait categories with probability ranges (14 ms)
      × should handle epigenetic flag inheritance with stacking limits (14 ms)
    API Extension
      × should extend breeding-data endpoint with prediction data (15 ms)
      × should require authentication for breeding-data endpoint (12 ms)
      × should handle horses with minimal breeding data (13 ms)

  ● Breeding Prediction System › Inheritance Probability Logic › should calculate trait inheritance probabilities from parent history

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestStallion_1769625737966",
        sex: "stallion",
        dateOfBirth: new Date("2021-01-29T18:42:17.966Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "a27fd71a-c210-401d-803e-bf66d5555dfc"
          }
        },
        breedId: 31483,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [
            "sensitive",
            "noble"
          ],
          negative: [],
          hidden: [
            "quick_learner"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 70 |[39m
     [90m 71 |[39m     [90m// Create test stallion (5 years old)[39m
    [31m[1m>[22m[39m[90m 72 |[39m     testStallion [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 73 |[39m       data[33m:[39m {
     [90m 74 |[39m         name[33m:[39m [32m`TestStallion_${Date.now()}`[39m[33m,[39m
     [90m 75 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/breedingPrediction.test.mjs:72:20)

  ● Breeding Prediction System › Inheritance Probability Logic › should calculate flag inheritance scores

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestStallion_1769625737999",
        sex: "stallion",
        dateOfBirth: new Date("2021-01-29T18:42:17.999Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "c2f3c47c-4d24-43f2-9c66-4dbdcf2e35e9"
          }
        },
        breedId: 31484,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [
            "sensitive",
            "noble"
          ],
          negative: [],
          hidden: [
            "quick_learner"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 70 |[39m
     [90m 71 |[39m     [90m// Create test stallion (5 years old)[39m
    [31m[1m>[22m[39m[90m 72 |[39m     testStallion [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 73 |[39m       data[33m:[39m {
     [90m 74 |[39m         name[33m:[39m [32m`TestStallion_${Date.now()}`[39m[33m,[39m
     [90m 75 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/breedingPrediction.test.mjs:72:20)

  ● Breeding Prediction System › Inheritance Probability Logic › should handle horses with no trait history

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestStallion_1769625738013",
        sex: "stallion",
        dateOfBirth: new Date("2021-01-29T18:42:18.013Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "743810a7-f9f6-4782-b328-2f61c1c889ff"
          }
        },
        breedId: 31485,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [
            "sensitive",
            "noble"
          ],
          negative: [],
          hidden: [
            "quick_learner"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 70 |[39m
     [90m 71 |[39m     [90m// Create test stallion (5 years old)[39m
    [31m[1m>[22m[39m[90m 72 |[39m     testStallion [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 73 |[39m       data[33m:[39m {
     [90m 74 |[39m         name[33m:[39m [32m`TestStallion_${Date.now()}`[39m[33m,[39m
     [90m 75 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/breedingPrediction.test.mjs:72:20)

  ● Breeding Prediction System › Inheritance Probability Logic › should calculate temperament influence modifiers

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestStallion_1769625738029",
        sex: "stallion",
        dateOfBirth: new Date("2021-01-29T18:42:18.029Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "8135a1d2-eafb-4d50-8c0e-b47e37d73789"
          }
        },
        breedId: 31486,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [
            "sensitive",
            "noble"
          ],
          negative: [],
          hidden: [
            "quick_learner"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 70 |[39m
     [90m 71 |[39m     [90m// Create test stallion (5 years old)[39m
    [31m[1m>[22m[39m[90m 72 |[39m     testStallion [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 73 |[39m       data[33m:[39m {
     [90m 74 |[39m         name[33m:[39m [32m`TestStallion_${Date.now()}`[39m[33m,[39m
     [90m 75 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/breedingPrediction.test.mjs:72:20)

  ● Breeding Prediction System › Child Prediction Algorithms › should predict trait categories with probability ranges

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestStallion_1769625738043",
        sex: "stallion",
        dateOfBirth: new Date("2021-01-29T18:42:18.043Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "a476fca8-c4d4-4155-8397-dbc4d9c8b47b"
          }
        },
        breedId: 31487,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [
            "sensitive",
            "noble"
          ],
          negative: [],
          hidden: [
            "quick_learner"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 70 |[39m
     [90m 71 |[39m     [90m// Create test stallion (5 years old)[39m
    [31m[1m>[22m[39m[90m 72 |[39m     testStallion [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 73 |[39m       data[33m:[39m {
     [90m 74 |[39m         name[33m:[39m [32m`TestStallion_${Date.now()}`[39m[33m,[39m
     [90m 75 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/breedingPrediction.test.mjs:72:20)

  ● Breeding Prediction System › Child Prediction Algorithms › should handle epigenetic flag inheritance with stacking limits

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestStallion_1769625738057",
        sex: "stallion",
        dateOfBirth: new Date("2021-01-29T18:42:18.057Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "285874fc-4f56-42e7-8dc9-5ae3f05034e1"
          }
        },
        breedId: 31488,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [
            "sensitive",
            "noble"
          ],
          negative: [],
          hidden: [
            "quick_learner"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 70 |[39m
     [90m 71 |[39m     [90m// Create test stallion (5 years old)[39m
    [31m[1m>[22m[39m[90m 72 |[39m     testStallion [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 73 |[39m       data[33m:[39m {
     [90m 74 |[39m         name[33m:[39m [32m`TestStallion_${Date.now()}`[39m[33m,[39m
     [90m 75 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/breedingPrediction.test.mjs:72:20)

  ● Breeding Prediction System › API Extension › should extend breeding-data endpoint with prediction data

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestStallion_1769625738075",
        sex: "stallion",
        dateOfBirth: new Date("2021-01-29T18:42:18.075Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "4bbe73dc-feed-411c-9c8b-f3de49825acd"
          }
        },
        breedId: 31489,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [
            "sensitive",
            "noble"
          ],
          negative: [],
          hidden: [
            "quick_learner"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 70 |[39m
     [90m 71 |[39m     [90m// Create test stallion (5 years old)[39m
    [31m[1m>[22m[39m[90m 72 |[39m     testStallion [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 73 |[39m       data[33m:[39m {
     [90m 74 |[39m         name[33m:[39m [32m`TestStallion_${Date.now()}`[39m[33m,[39m
     [90m 75 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/breedingPrediction.test.mjs:72:20)

  ● Breeding Prediction System › API Extension › should require authentication for breeding-data endpoint

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestStallion_1769625738087",
        sex: "stallion",
        dateOfBirth: new Date("2021-01-29T18:42:18.087Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "1126fd4c-d2e4-4269-8c8f-4dfc7feda88c"
          }
        },
        breedId: 31490,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [
            "sensitive",
            "noble"
          ],
          negative: [],
          hidden: [
            "quick_learner"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 70 |[39m
     [90m 71 |[39m     [90m// Create test stallion (5 years old)[39m
    [31m[1m>[22m[39m[90m 72 |[39m     testStallion [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 73 |[39m       data[33m:[39m {
     [90m 74 |[39m         name[33m:[39m [32m`TestStallion_${Date.now()}`[39m[33m,[39m
     [90m 75 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/breedingPrediction.test.mjs:72:20)

  ● Breeding Prediction System › API Extension › should handle horses with minimal breeding data

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestStallion_1769625738099",
        sex: "stallion",
        dateOfBirth: new Date("2021-01-29T18:42:18.099Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "9d4da667-9c6a-4832-8163-7ec5ee7d80eb"
          }
        },
        breedId: 31491,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [
            "sensitive",
            "noble"
          ],
          negative: [],
          hidden: [
            "quick_learner"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 70 |[39m
     [90m 71 |[39m     [90m// Create test stallion (5 years old)[39m
    [31m[1m>[22m[39m[90m 72 |[39m     testStallion [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 73 |[39m       data[33m:[39m {
     [90m 74 |[39m         name[33m:[39m [32m`TestStallion_${Date.now()}`[39m[33m,[39m
     [90m 75 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/breedingPrediction.test.mjs:72:20)

[2026-01-28 13:42:18] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:42:18] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:42:18] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:42:18] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:42:19] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:19] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:19] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:19] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:19] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:19] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:19] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:19] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:19] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:19] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:42:19] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 13:42:19] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:19] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:42:19] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:42:19] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:42:19] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:42:19] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:42:19] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 13:42:19] info: [GET] /api/horses/trainable/test-user-uuid-123
[2026-01-28 13:42:19] warn: [MemoryMonitoring] Memory threshold exceeded: 1029MB
[2026-01-28 13:42:19] info: [auth:kvp7so] Starting auth for GET /horses/trainable/test-user-uuid-123
[2026-01-28 13:42:19] info: [auth:kvp7so] Token from cookie: false
[2026-01-28 13:42:19] info: [auth:kvp7so] Token from header: true
[2026-01-28 13:42:19] info: [auth:kvp7so] Authenticated user test-user-uuid-123
[2026-01-28 13:42:19] info: [trainingController.getTrainableHorses] Getting trainable horses for user test-user-uuid-123
[2026-01-28 13:42:19] info: [trainingModel.getRecentTrainingForMultipleHorses] Fetching latest training for 2 horses
[2026-01-28 13:42:19] info: [trainingController.getTrainableHorses] Found 2 trainable horses for user test-user-uuid-123
[2026-01-28 13:42:19] info: [GET] /api/horses/trainable/test-user-uuid-123 - 200
[2026-01-28 13:42:19] info: [GET] /api/horses/trainable/nonexistent-user-uuid-456
[2026-01-28 13:42:19] warn: [MemoryMonitoring] Memory threshold exceeded: 1036MB
[2026-01-28 13:42:19] info: [auth:t07j2z] Starting auth for GET /horses/trainable/nonexistent-user-uuid-456
[2026-01-28 13:42:19] info: [auth:t07j2z] Token from cookie: false
[2026-01-28 13:42:19] info: [auth:t07j2z] Token from header: true
[2026-01-28 13:42:19] info: [auth:t07j2z] Authenticated user test-user-uuid-123
[2026-01-28 13:42:19] warn: [horseRoutes] User test-user-uuid-123 attempted to access trainable horses for user nonexistent-user-uuid-456
[2026-01-28 13:42:19] info: [GET] /api/horses/trainable/nonexistent-user-uuid-456 - 403
[2026-01-28 13:42:19] info: [GET] /api/horses/trainable/
[2026-01-28 13:42:19] warn: [MemoryMonitoring] Memory threshold exceeded: 1024MB
[2026-01-28 13:42:19] info: [auth:5hudpm] Starting auth for GET /horses/trainable/
[2026-01-28 13:42:19] info: [auth:5hudpm] Token from cookie: false
[2026-01-28 13:42:19] info: [auth:5hudpm] Token from header: true
[2026-01-28 13:42:19] info: [auth:5hudpm] Authenticated user test-user-uuid-123
[2026-01-28 13:42:19] info: [GET] /api/horses/trainable/ - 400
[2026-01-28 13:42:19] info: [GET] /api/horses/trainable/aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[2026-01-28 13:42:19] warn: [MemoryMonitoring] Memory threshold exceeded: 1025MB
[2026-01-28 13:42:19] info: [auth:pzv59] Starting auth for GET /horses/trainable/aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[2026-01-28 13:42:19] info: [auth:pzv59] Token from cookie: false
[2026-01-28 13:42:19] info: [auth:pzv59] Token from header: true
[2026-01-28 13:42:19] info: [auth:pzv59] Authenticated user test-user-uuid-123
[2026-01-28 13:42:19] info: [GET] /api/horses/trainable/aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa - 400
[2026-01-28 13:42:19] info: [GET] /api/horses/trainable/test-user-uuid-123
[2026-01-28 13:42:19] warn: [MemoryMonitoring] Memory threshold exceeded: 1025MB
[2026-01-28 13:42:19] info: [auth:vornwg] Starting auth for GET /horses/trainable/test-user-uuid-123
[2026-01-28 13:42:19] info: [auth:vornwg] Token from cookie: false
[2026-01-28 13:42:19] info: [auth:vornwg] Token from header: true
[2026-01-28 13:42:19] info: [auth:vornwg] Authenticated user test-user-uuid-123
[2026-01-28 13:42:19] info: [GET] /api/horses/trainable/test-user-uuid-123 - 200
FAIL tests/integration/horseRoutes.test.mjs
  Horse Routes Integration Tests
    GET /api/horses/trainable/:userId
      × should return trainable horses for valid user ID (57 ms)
      √ should return 403 when accessing another user's trainable horses (27 ms)
      √ should return validation error for invalid user ID (26 ms)
      √ should return validation error for user ID that is too long (26 ms)
      √ should handle server errors gracefully (25 ms)

  ● Horse Routes Integration Tests › GET /api/horses/trainable/:userId › should return trainable horses for valid user ID

    expect(received).toBeGreaterThanOrEqual(expected)

    Matcher error: received value must be a number or bigint

    Received has value: null

    [0m [90m 122 |[39m         expect(horse)[33m.[39mtoHaveProperty([32m'trainableDisciplines'[39m)[33m;[39m
     [90m 123 |[39m         expect([33mArray[39m[33m.[39misArray(horse[33m.[39mtrainableDisciplines))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 124 |[39m         expect(horse[33m.[39mage)[33m.[39mtoBeGreaterThanOrEqual([35m3[39m)[33m;[39m [90m// Only horses 3+ should be returned[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 125 |[39m       })[33m;[39m
     [90m 126 |[39m     })[33m;[39m
     [90m 127 |[39m[0m

      at tests/integration/horseRoutes.test.mjs:124:27
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (tests/integration/horseRoutes.test.mjs:118:26)

[2026-01-28 13:42:19] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:42:19] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:42:19] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:42:19] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:42:20] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:20] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:20] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:20] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:20] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:20] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:20] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:20] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:20] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:20] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:42:20] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 13:42:20] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:20] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:42:20] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:42:20] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:42:20] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:42:20] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:42:20] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 13:42:20] info: [GET] /api/leaderboards/players/level?limit=10&offset=0
[2026-01-28 13:42:20] warn: [MemoryMonitoring] Memory threshold exceeded: 904MB
[2026-01-28 13:42:20] info: [auth:56zgb2] Starting auth for GET /leaderboards/players/level
[2026-01-28 13:42:20] info: [auth:56zgb2] Token from cookie: false
[2026-01-28 13:42:20] info: [auth:56zgb2] Token from header: true
[2026-01-28 13:42:20] info: [auth:56zgb2] Authenticated user 5de6abf8-d8f6-403a-b6ca-7e0d0dc3d130
[2026-01-28 13:42:20] info: [auth:pbce39] Starting auth for GET /players/level
[2026-01-28 13:42:20] info: [auth:pbce39] Token from cookie: false
[2026-01-28 13:42:20] info: [auth:pbce39] Token from header: true
[2026-01-28 13:42:20] info: [auth:pbce39] Authenticated user 5de6abf8-d8f6-403a-b6ca-7e0d0dc3d130
[2026-01-28 13:42:21] info: [GET] /api/leaderboards/players/level?limit=10&offset=0 - 200
[2026-01-28 13:42:21] info: [GET] /api/leaderboards/players/level
[2026-01-28 13:42:21] warn: [MemoryMonitoring] Memory threshold exceeded: 905MB
[2026-01-28 13:42:21] info: [auth:s1p6gd] Starting auth for GET /leaderboards/players/level
[2026-01-28 13:42:21] info: [auth:s1p6gd] Token from cookie: false
[2026-01-28 13:42:21] warn: [auth:s1p6gd] Access token is required for GET /leaderboards/players/level from ::ffff:127.0.0.1
[2026-01-28 13:42:21] info: [GET] /api/leaderboards/players/level - 401
[2026-01-28 13:42:21] info: [GET] /api/leaderboards/horses/earnings
[2026-01-28 13:42:21] warn: [MemoryMonitoring] Memory threshold exceeded: 911MB
[2026-01-28 13:42:21] info: [auth:7w2v3q] Starting auth for GET /leaderboards/horses/earnings
[2026-01-28 13:42:21] info: [auth:7w2v3q] Token from cookie: false
[2026-01-28 13:42:21] info: [auth:7w2v3q] Token from header: true
[2026-01-28 13:42:21] info: [auth:7w2v3q] Authenticated user 7f6db199-b0aa-498e-80d5-96abcc9ba09e
[2026-01-28 13:42:21] info: [auth:082n7] Starting auth for GET /horses/earnings
[2026-01-28 13:42:21] info: [auth:082n7] Token from cookie: false
[2026-01-28 13:42:21] info: [auth:082n7] Token from header: true
[2026-01-28 13:42:21] info: [auth:082n7] Authenticated user 7f6db199-b0aa-498e-80d5-96abcc9ba09e
[2026-01-28 13:42:21] info: [GET] /api/leaderboards/horses/earnings - 200
[2026-01-28 13:42:21] info: [GET] /api/leaderboards/recent-winners
[2026-01-28 13:42:21] warn: [MemoryMonitoring] Memory threshold exceeded: 910MB
[2026-01-28 13:42:21] info: [auth:mjbvn] Starting auth for GET /leaderboards/recent-winners
[2026-01-28 13:42:21] info: [auth:mjbvn] Token from cookie: false
[2026-01-28 13:42:21] info: [auth:mjbvn] Token from header: true
[2026-01-28 13:42:21] info: [auth:mjbvn] Authenticated user 88271275-858d-40fb-84ca-a8965e8795bc
[2026-01-28 13:42:21] info: [auth:uiqbcs] Starting auth for GET /recent-winners
[2026-01-28 13:42:21] info: [auth:uiqbcs] Token from cookie: false
[2026-01-28 13:42:21] info: [auth:uiqbcs] Token from header: true
[2026-01-28 13:42:21] info: [auth:uiqbcs] Authenticated user 88271275-858d-40fb-84ca-a8965e8795bc
[2026-01-28 13:42:21] info: [GET] /api/leaderboards/recent-winners - 200
[2026-01-28 13:42:21] info: [GET] /api/leaderboards/recent-winners?discipline=Dressage
[2026-01-28 13:42:21] warn: [MemoryMonitoring] Memory threshold exceeded: 909MB
[2026-01-28 13:42:21] info: [auth:p9k1r] Starting auth for GET /leaderboards/recent-winners
[2026-01-28 13:42:21] info: [auth:p9k1r] Token from cookie: false
[2026-01-28 13:42:21] info: [auth:p9k1r] Token from header: true
[2026-01-28 13:42:21] info: [auth:p9k1r] Authenticated user e1c77aad-c978-4968-8880-e8e388d0a26e
[2026-01-28 13:42:21] info: [auth:xw40v] Starting auth for GET /recent-winners
[2026-01-28 13:42:21] info: [auth:xw40v] Token from cookie: false
[2026-01-28 13:42:21] info: [auth:xw40v] Token from header: true
[2026-01-28 13:42:21] info: [auth:xw40v] Authenticated user e1c77aad-c978-4968-8880-e8e388d0a26e
[2026-01-28 13:42:21] info: [GET] /api/leaderboards/recent-winners?discipline=Dressage - 200
[2026-01-28 13:42:21] info: [GET] /api/leaderboards/stats
[2026-01-28 13:42:21] warn: [MemoryMonitoring] Memory threshold exceeded: 908MB
[2026-01-28 13:42:21] info: [auth:bxh5wc] Starting auth for GET /leaderboards/stats
[2026-01-28 13:42:21] info: [auth:bxh5wc] Token from cookie: false
[2026-01-28 13:42:21] info: [auth:bxh5wc] Token from header: true
[2026-01-28 13:42:21] info: [auth:bxh5wc] Authenticated user 3e8c0f70-edcd-4a51-b2e9-bac85a3c8c38
[2026-01-28 13:42:21] info: [auth:acijyl] Starting auth for GET /stats
[2026-01-28 13:42:21] info: [auth:acijyl] Token from cookie: false
[2026-01-28 13:42:21] info: [auth:acijyl] Token from header: true
[2026-01-28 13:42:21] info: [auth:acijyl] Authenticated user 3e8c0f70-edcd-4a51-b2e9-bac85a3c8c38
[2026-01-28 13:42:21] info: [GET] /api/leaderboards/stats - 200
FAIL tests/integration/leaderboardRoutes.test.mjs
  🏆 INTEGRATION: Leaderboard API - Real Database Integration
    GET /api/leaderboards/players/level
      √ should return top players by level (238 ms)
      √ should handle unauthorized access (65 ms)
    GET /api/leaderboards/horses/earnings
      √ should return top horses by earnings (88 ms)
    GET /api/leaderboards/recent-winners
      × should return recent competition winners (66 ms)
      √ should filter by discipline (61 ms)
    GET /api/leaderboards/stats
      √ should return comprehensive leaderboard statistics (71 ms)

  ● 🏆 INTEGRATION: Leaderboard API - Real Database Integration › GET /api/leaderboards/recent-winners › should return recent competition winners

    expect(received).toHaveLength(expected)

    Expected length: 3
    Received length: 4
    Received array:  [{"competition": {"discipline": "Racing"}, "horse": {"name": "Cross System Test Horse"}, "id": 12329, "owner": "Unknown Owner", "runDate": {}, "show": "Cross System Test Show 1769624398121"}, {"competition": {"discipline": "Dressage"}, "horse": {"name": "TestLeaderboard Champion"}, "id": 12385, "owner": "Top Player1", "runDate": {}, "show": "Grand Prix Classic 1769625741211"}, {"competition": {"discipline": "Show Jumping"}, "horse": {"name": "TestLeaderboard Silver Star"}, "id": 12386, "owner": "Top Player2", "runDate": {}, "show": "Regional Championship 1769625741211"}, {"competition": {"discipline": "Cross Country"}, "horse": {"name": "TestLeaderboard Gold Rush"}, "id": 12387, "owner": "Top Player3", "runDate": {}, "show": "Evening Classic 1769625741211"}]

    [0m [90m 400 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 401 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoBe([32m'Recent winners retrieved successfully'[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 402 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mwinners)[33m.[39mtoHaveLength([35m3[39m)[33m;[39m
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 403 |[39m
     [90m 404 |[39m       [90m// Verify proper sorting by date (most recent first)[39m
     [90m 405 |[39m       [36mconst[39m { winners } [33m=[39m response[33m.[39mbody[33m.[39mdata[33m;[39m[0m

      at Object.<anonymous> (tests/integration/leaderboardRoutes.test.mjs:402:42)

[2026-01-28 13:42:21] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:42:21] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:42:21] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:42:21] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:42:21] info: Incremented career weeks for groom 73339 to 1
[2026-01-28 13:42:21] info: Incremented career weeks for groom 73340 to 1
[2026-01-28 13:42:21] info: Incremented career weeks for groom 73340 to 2
[2026-01-28 13:42:21] info: Incremented career weeks for groom 73340 to 3
[2026-01-28 13:42:21] error: Error incrementing career weeks for groom 99999: 
Invalid `prisma.groom.update()` invocation:


An operation failed because it depends on one or more records that were required but not found. No record was found for an update.
[2026-01-28 13:42:22] info: Processed retirement for groom 73348 with reason: mandatory_career_limit
[2026-01-28 13:42:22] info: Processed retirement for groom 73349 with reason: voluntary
[2026-01-28 13:42:22] error: Error processing retirement for groom 73351: Groom 73351 is not eligible for retirement
[2026-01-28 13:42:22] info: Starting weekly career progression processing
[2026-01-28 13:42:22] info: Incremented career weeks for groom 73102 to 1
[2026-01-28 13:42:22] info: Incremented career weeks for groom 73103 to 1
[2026-01-28 13:42:22] info: Incremented career weeks for groom 73352 to 1
[2026-01-28 13:42:22] info: Incremented career weeks for groom 73353 to 11
[2026-01-28 13:42:22] info: Incremented career weeks for groom 73354 to 51
[2026-01-28 13:42:22] info: Incremented career weeks for groom 73355 to 104
[2026-01-28 13:42:22] info: Processed retirement for groom 73355 with reason: mandatory_career_limit
[2026-01-28 13:42:22] info: Groom Test Groom Near Retirement 1769625742063 (ID: 73355) retired: mandatory_career_limit
[2026-01-28 13:42:22] info: Incremented career weeks for groom 73356 to 81
[2026-01-28 13:42:22] info: Processed retirement for groom 73356 with reason: early_level_cap
[2026-01-28 13:42:22] info: Groom Test Groom Level 10 1769625742063 (ID: 73356) retired: early_level_cap
[2026-01-28 13:42:22] info: Incremented career weeks for groom 73099 to 1
[2026-01-28 13:42:22] info: Incremented career weeks for groom 73100 to 1
[2026-01-28 13:42:22] info: Incremented career weeks for groom 73101 to 1
[2026-01-28 13:42:22] info: Weekly career progression completed: 10 processed, 2 retired, 0 errors
[2026-01-28 13:42:22] info: Starting weekly career progression processing
[2026-01-28 13:42:22] info: Incremented career weeks for groom 73102 to 2
[2026-01-28 13:42:22] info: Incremented career weeks for groom 73103 to 2
[2026-01-28 13:42:22] info: Incremented career weeks for groom 73099 to 2
[2026-01-28 13:42:22] info: Incremented career weeks for groom 73100 to 2
[2026-01-28 13:42:22] info: Incremented career weeks for groom 73101 to 2
[2026-01-28 13:42:22] info: Incremented career weeks for groom 73357 to 1
[2026-01-28 13:42:22] info: Incremented career weeks for groom 73358 to 11
[2026-01-28 13:42:22] info: Incremented career weeks for groom 73359 to 51
[2026-01-28 13:42:22] info: Incremented career weeks for groom 73360 to 104
[2026-01-28 13:42:22] info: Processed retirement for groom 73360 with reason: mandatory_career_limit
[2026-01-28 13:42:22] info: Groom Test Groom Near Retirement 1769625742182 (ID: 73360) retired: mandatory_career_limit
[2026-01-28 13:42:22] info: Incremented career weeks for groom 73361 to 81
[2026-01-28 13:42:22] info: Processed retirement for groom 73361 with reason: early_level_cap
[2026-01-28 13:42:22] info: Groom Test Groom Level 10 1769625742182 (ID: 73361) retired: early_level_cap
[2026-01-28 13:42:22] info: Incremented career weeks for groom 73362 to 1
[2026-01-28 13:42:22] info: Weekly career progression completed: 11 processed, 2 retired, 0 errors
[2026-01-28 13:42:22] info: Starting weekly career progression processing
[2026-01-28 13:42:22] info: Incremented career weeks for groom 73102 to 3
[2026-01-28 13:42:22] info: Incremented career weeks for groom 73103 to 3
[2026-01-28 13:42:22] info: Incremented career weeks for groom 73099 to 3
[2026-01-28 13:42:22] info: Incremented career weeks for groom 73100 to 3
[2026-01-28 13:42:22] info: Incremented career weeks for groom 73101 to 3
[2026-01-28 13:42:22] info: Incremented career weeks for groom 73363 to 1
[2026-01-28 13:42:22] info: Incremented career weeks for groom 73365 to 104
[2026-01-28 13:42:22] info: Processed retirement for groom 73365 with reason: mandatory_career_limit
[2026-01-28 13:42:22] info: Groom Test Groom Near Retirement 1769625742288 (ID: 73365) retired: mandatory_career_limit
[2026-01-28 13:42:22] info: Incremented career weeks for groom 73366 to 51
[2026-01-28 13:42:22] info: Incremented career weeks for groom 73367 to 81
[2026-01-28 13:42:22] info: Processed retirement for groom 73367 with reason: early_level_cap
[2026-01-28 13:42:22] info: Groom Test Groom Level 10 1769625742288 (ID: 73367) retired: early_level_cap
[2026-01-28 13:42:22] info: Weekly career progression completed: 9 processed, 2 retired, 0 errors
[2026-01-28 13:42:22] info: Starting weekly career progression processing
[2026-01-28 13:42:22] info: Incremented career weeks for groom 73102 to 4
[2026-01-28 13:42:22] info: Incremented career weeks for groom 73103 to 4
[2026-01-28 13:42:22] info: Incremented career weeks for groom 73099 to 4
[2026-01-28 13:42:22] info: Incremented career weeks for groom 73100 to 4
[2026-01-28 13:42:22] info: Incremented career weeks for groom 73101 to 4
[2026-01-28 13:42:22] info: Incremented career weeks for groom 73368 to 1
[2026-01-28 13:42:22] info: Incremented career weeks for groom 73369 to 51
[2026-01-28 13:42:22] info: Incremented career weeks for groom 73370 to 11
[2026-01-28 13:42:22] info: Incremented career weeks for groom 73371 to 104
[2026-01-28 13:42:22] info: Processed retirement for groom 73371 with reason: mandatory_career_limit
[2026-01-28 13:42:22] info: Groom Test Groom Near Retirement 1769625742396 (ID: 73371) retired: mandatory_career_limit
[2026-01-28 13:42:22] info: Incremented career weeks for groom 73372 to 81
[2026-01-28 13:42:22] info: Processed retirement for groom 73372 with reason: early_level_cap
[2026-01-28 13:42:22] info: Groom Test Groom Level 10 1769625742396 (ID: 73372) retired: early_level_cap
[2026-01-28 13:42:22] info: Weekly career progression completed: 10 processed, 2 retired, 0 errors
FAIL tests/services/groomRetirementService.test.mjs
  Groom Retirement Service
    Career Week Tracking
      √ should increment career weeks correctly (29 ms)
      √ should handle multiple career week increments (20 ms)
      √ should throw error for non-existent groom (20 ms)
    Retirement Eligibility
      √ should identify groom not eligible for retirement (13 ms)
      √ should identify mandatory retirement at 104 weeks (14 ms)
      √ should identify early retirement at level 10 (13 ms)
      √ should identify early retirement with 12+ assignments (173 ms)
      √ should identify retirement notice period (15 ms)
      √ should handle already retired groom (12 ms)
    Retirement Processing
      √ should process mandatory retirement correctly (22 ms)
      √ should process voluntary retirement (17 ms)
      × should remove active assignments on retirement (11 ms)
      √ should reject retirement for ineligible groom (12 ms)
    Weekly Career Progression
      √ should process weekly career progression for all active grooms (118 ms)
      √ should handle errors gracefully during weekly progression (107 ms)
      √ should skip already retired grooms (107 ms)
      √ should provide detailed statistics (113 ms)

  ● Groom Retirement Service › Retirement Processing › should remove active assignments on retirement

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73350,
        foalId: 146694,
        user: {
        ~~~~
          connect: {
            id: "f9fff968-ba67-480f-8757-9820c6aa1eb5"
          }
        },
        priority: 1,
        notes: "Test assignment",
        isActive: true,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 257 |[39m     test([32m'should remove active assignments on retirement'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 258 |[39m       [90m// Create an active assignment[39m
    [31m[1m>[22m[39m[90m 259 |[39m       [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 260 |[39m         data[33m:[39m {
     [90m 261 |[39m           groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 262 |[39m           foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/services/groomRetirementService.test.mjs:259:7)

[2026-01-28 13:42:22] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:42:22] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:42:22] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:42:22] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:42:22] info: [groomController.hireGroom] Hiring new groom Sarah Johnson for user user-groom-int-1769625742771_pa55f
[2026-01-28 13:42:22] info: [groomController.hireGroom] Successfully hired groom Sarah Johnson (ID: 73373) for 750 coins
[2026-01-28 13:42:22] info: [groomController.hireGroom] Hiring new groom Invalid Groom for user user-groom-int-1769625742896_j819y
[2026-01-28 13:42:22] info: [groomController.hireGroom] Hiring new groom Expert Groom for user user-groom-int-1769625742925_19x3y
[2026-01-28 13:42:22] info: [groomController.hireGroom] Successfully hired groom Expert Groom (ID: 73374) for 750 coins
[2026-01-28 13:42:22] info: [groomController.hireGroom] Hiring new groom Novice Groom for user user-groom-int-1769625742925_19x3y
[2026-01-28 13:42:22] info: [groomController.hireGroom] Successfully hired groom Novice Groom (ID: 73375) for 350 coins
[2026-01-28 13:42:22] info: [groomController.assignGroom] Assigning groom 73376 to foal 146704
[2026-01-28 13:42:22] info: [groomSystem.assignGroomToFoal] Assigning groom 73376 to foal 146704
[2026-01-28 13:42:23] info: [groomSystem.assignGroomToFoal] Successfully assigned Test Assignment Groom to foal Test Foal 1769625742975_8bvph
[2026-01-28 13:42:23] info: [groomController.assignGroom] Assigning groom 73378 to foal 146707
[2026-01-28 13:42:23] info: [groomSystem.assignGroomToFoal] Assigning groom 73378 to foal 146707
[2026-01-28 13:42:23] info: [groomSystem.assignGroomToFoal] Successfully assigned Second Test Groom to foal Test Foal 1769625743025_3y91r
[2026-01-28 13:42:23] info: [groomController.assignGroom] Assigning groom 73379 to foal 146710
[2026-01-28 13:42:23] info: [groomController.recordInteraction] Recording trust_building interaction for foal 146713
[2026-01-28 13:42:23] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task trust_building
[2026-01-28 13:42:23] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: 
[2026-01-28 13:42:23] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none
[2026-01-28 13:42:23] info: [groomController.recordInteraction] Interaction recorded: 6 bonding, -6 stress
[2026-01-28 13:42:23] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 73380 for interaction_completed
[2026-01-28 13:42:23] info: [groomProgressionService.awardGroomXP] Groom 73380 gained 2 XP: 0 → 2 (Level 1 → 1)
[2026-01-28 13:42:23] info: [groomController.recordInteraction] Awarded 2 XP to groom 73380 for interaction
[2026-01-28 13:42:23] info: [groomController.recordInteraction] Recording hoof_handling interaction for foal 146717
[2026-01-28 13:42:23] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task hoof_handling
[2026-01-28 13:42:23] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: 
[2026-01-28 13:42:23] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none
[2026-01-28 13:42:23] info: [groomController.recordInteraction] Interaction recorded: 6 bonding, -3 stress
[2026-01-28 13:42:23] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 73381 for interaction_completed
[2026-01-28 13:42:23] info: [groomProgressionService.awardGroomXP] Groom 73381 gained 2 XP: 0 → 2 (Level 1 → 1)
[2026-01-28 13:42:23] info: [groomController.recordInteraction] Awarded 2 XP to groom 73381 for interaction
[2026-01-28 13:42:23] info: [groomController.recordInteraction] Recording brushing interaction for foal 146721
[2026-01-28 13:42:23] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task brushing
[2026-01-28 13:42:23] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: task_specialty
[2026-01-28 13:42:23] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: task_specialty
[2026-01-28 13:42:23] info: [groomController.recordInteraction] Interaction recorded: 10 bonding, -10 stress
[2026-01-28 13:42:23] info: [groomController.recordInteraction] Personality effects applied (gentle): task_specialty - 10% increased success rate on nervous or timid horses
[2026-01-28 13:42:23] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 73382 for interaction_completed
[2026-01-28 13:42:23] info: [groomProgressionService.awardGroomXP] Groom 73382 gained 2 XP: 0 → 2 (Level 1 → 1)
[2026-01-28 13:42:23] info: [groomController.recordInteraction] Awarded 2 XP to groom 73382 for interaction
FAIL tests/integration/groomWorkflowIntegration.test.mjs
  Groom Workflow Integration Tests
    1. Complete Groom Hiring Workflow
      × should hire groom with proper skill calculations and validation (124 ms)
      √ should validate required fields and reject invalid groom data (29 ms)
      √ should calculate proper session rates based on skill level (50 ms)
    2. Groom Assignment Management
      √ should assign groom to foal with proper validation (49 ms)
      √ should handle assignment conflicts and priority management (49 ms)
      √ should validate ownership and authorization (31 ms)
    3. Age-Based Task Validation
      √ should allow enrichment tasks for foals (0-2 years) (284 ms)
      √ should allow grooming tasks for horses 1-3 years old (76 ms)
      √ should allow grooming tasks for horses over 3 years old (55 ms)

  ● Groom Workflow Integration Tests › 1. Complete Groom Hiring Workflow › should hire groom with proper skill calculations and validation

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: ObjectContaining {"data": ObjectContaining {"experience": 8, "name": "Sarah Johnson", "personality": "gentle", "sessionRate": Any<Object>, "skillLevel": "expert", "speciality": "foal_care", "user": {"connect": {"id": "user-groom-int-1769625742771_pa55f"}}}, "message": "Successfully hired Sarah Johnson", "success": true}
    Received: {"data": {"availability": {}, "bio": "Experienced foal care specialist", "bonusTraitMap": {}, "careerWeeks": 0, "createdAt": 2026-01-28T18:42:22.852Z, "experience": 8, "groomPersonality": "balanced", "hiredDate": 2026-01-28T18:42:22.852Z, "hiringCost": 750, "id": 73373, "imageUrl": null, "isActive": true, "level": 1, "name": "Sarah Johnson", "personality": "gentle", "rareTraitPerks": {}, "remainingFunds": 4250, "retired": false, "retirementReason": null, "retirementTimestamp": null, "sessionRate": "25", "skillLevel": "expert", "speciality": "foal_care", "updatedAt": 2026-01-28T18:42:22.852Z, "userId": "user-groom-int-1769625742771_pa55f"}, "message": "Successfully hired Sarah Johnson", "success": true}

    Number of calls: 1

    [0m [90m 242 |[39m
     [90m 243 |[39m       expect(res[33m.[39mstatus)[33m.[39mtoHaveBeenCalledWith([35m201[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 244 |[39m       expect(res[33m.[39mjson)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                        [31m[1m^[22m[39m
     [90m 245 |[39m         expect[33m.[39mobjectContaining({
     [90m 246 |[39m           success[33m:[39m [36mtrue[39m[33m,[39m
     [90m 247 |[39m           message[33m:[39m [32m'Successfully hired Sarah Johnson'[39m[33m,[39m[0m

      at Object.<anonymous> (tests/integration/groomWorkflowIntegration.test.mjs:244:24)

[2026-01-28 13:42:23] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:42:23] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:42:23] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:42:23] info: [envValidator] Test environment validation complete. Success: true
FAIL tests/groomProgression.test.mjs
  Groom Progression System
    XP and Leveling System
      × Should award XP for milestone completion (95 ms)
      × Should award XP for trait shaping (31 ms)
      × Should award XP for show wins (28 ms)
      × Should level up when reaching XP threshold (21 ms)
      × Should calculate correct level from experience (29 ms)
      × Should cap level at 10 (24 ms)
    Groom-Horse Synergy System
      × Should create synergy record for new groom-horse pair (25 ms)
      × Should award correct synergy for different actions (26 ms)
      × Should penalize synergy for reassignment (21 ms)
      × Should track sessions together (20 ms)
    Assignment History Logging
      × Should log assignment start (21 ms)
      × Should log assignment completion with performance data (18 ms)
    Enhanced Groom Profile API
      × Should return comprehensive groom profile (21 ms)
      × Should include synergy effects in profile (20 ms)

  ● Groom Progression System › XP and Leveling System › Should award XP for milestone completion

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    → 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T18:42:23.843Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31507,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ● Groom Progression System › XP and Leveling System › Should award XP for trait shaping

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    → 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T18:42:23.878Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31508,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ● Groom Progression System › XP and Leveling System › Should award XP for show wins

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    → 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T18:42:23.910Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31509,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ● Groom Progression System › XP and Leveling System › Should level up when reaching XP threshold

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    → 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T18:42:23.934Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31510,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ● Groom Progression System › XP and Leveling System › Should calculate correct level from experience

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    → 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T18:42:23.957Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31511,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ● Groom Progression System › XP and Leveling System › Should cap level at 10

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    → 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T18:42:23.987Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31512,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ● Groom Progression System › Groom-Horse Synergy System › Should create synergy record for new groom-horse pair

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    → 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T18:42:24.008Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31513,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ● Groom Progression System › Groom-Horse Synergy System › Should award correct synergy for different actions

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    → 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T18:42:24.037Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31514,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ● Groom Progression System › Groom-Horse Synergy System › Should penalize synergy for reassignment

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    → 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T18:42:24.059Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31515,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ● Groom Progression System › Groom-Horse Synergy System › Should track sessions together

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    → 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T18:42:24.080Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31516,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ● Groom Progression System › Assignment History Logging › Should log assignment start

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    → 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T18:42:24.103Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31517,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ● Groom Progression System › Assignment History Logging › Should log assignment completion with performance data

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    → 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T18:42:24.122Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31518,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ● Groom Progression System › Enhanced Groom Profile API › Should return comprehensive groom profile

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    → 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T18:42:24.141Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31519,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ● Groom Progression System › Enhanced Groom Profile API › Should include synergy effects in profile

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    → 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T18:42:24.163Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31520,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

[2026-01-28 13:42:24] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:42:24] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:42:24] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:42:24] info: [envValidator] Test environment validation complete. Success: true
FAIL __tests__/performance/apiResponseOptimization.test.mjs
  API Response Optimization System
    Pagination Service
      × creates offset-based pagination correctly (1 ms)
      × creates cursor-based pagination correctly
      × generates optimized Prisma query for cursor pagination
    Serialization Service
      × optimizes response data correctly
      × selects specific fields correctly
      × excludes specific fields correctly
      × handles nested field selection
    Response Cache Service
      × generates consistent ETags for same data
      × generates different ETags for different data
      × determines cacheable requests correctly
    Lazy Loading Service
      × creates lazy loading configuration
      × loads related data on demand
    Middleware Integration
      × handles pagination middleware correctly
      × handles field selection via query parameters
      × adds performance headers to responses
      × handles large response optimization
      × supports debug mode with optimization info
    Performance Metrics
      × tracks performance metrics correctly
    ETag and Caching
      × generates and validates ETags correctly
    Response Size Monitoring
      × monitors and warns about large responses
      × handles response size limits

  ● API Response Optimization System › Pagination Service › creates offset-based pagination correctly

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "730aa356-7f1e-43f3-a73a-fab050ab5098",
        ~~~~~~
        breed: {
          connect: {
            id: 31521
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T18:42:24.602Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ● API Response Optimization System › Pagination Service › creates cursor-based pagination correctly

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "730aa356-7f1e-43f3-a73a-fab050ab5098",
        ~~~~~~
        breed: {
          connect: {
            id: 31521
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T18:42:24.602Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ● API Response Optimization System › Pagination Service › generates optimized Prisma query for cursor pagination

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "730aa356-7f1e-43f3-a73a-fab050ab5098",
        ~~~~~~
        breed: {
          connect: {
            id: 31521
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T18:42:24.602Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ● API Response Optimization System › Serialization Service › optimizes response data correctly

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "730aa356-7f1e-43f3-a73a-fab050ab5098",
        ~~~~~~
        breed: {
          connect: {
            id: 31521
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T18:42:24.602Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ● API Response Optimization System › Serialization Service › selects specific fields correctly

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "730aa356-7f1e-43f3-a73a-fab050ab5098",
        ~~~~~~
        breed: {
          connect: {
            id: 31521
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T18:42:24.602Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ● API Response Optimization System › Serialization Service › excludes specific fields correctly

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "730aa356-7f1e-43f3-a73a-fab050ab5098",
        ~~~~~~
        breed: {
          connect: {
            id: 31521
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T18:42:24.602Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ● API Response Optimization System › Serialization Service › handles nested field selection

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "730aa356-7f1e-43f3-a73a-fab050ab5098",
        ~~~~~~
        breed: {
          connect: {
            id: 31521
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T18:42:24.602Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ● API Response Optimization System › Response Cache Service › generates consistent ETags for same data

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "730aa356-7f1e-43f3-a73a-fab050ab5098",
        ~~~~~~
        breed: {
          connect: {
            id: 31521
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T18:42:24.602Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ● API Response Optimization System › Response Cache Service › generates different ETags for different data

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "730aa356-7f1e-43f3-a73a-fab050ab5098",
        ~~~~~~
        breed: {
          connect: {
            id: 31521
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T18:42:24.602Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ● API Response Optimization System › Response Cache Service › determines cacheable requests correctly

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "730aa356-7f1e-43f3-a73a-fab050ab5098",
        ~~~~~~
        breed: {
          connect: {
            id: 31521
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T18:42:24.602Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ● API Response Optimization System › Lazy Loading Service › creates lazy loading configuration

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "730aa356-7f1e-43f3-a73a-fab050ab5098",
        ~~~~~~
        breed: {
          connect: {
            id: 31521
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T18:42:24.602Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ● API Response Optimization System › Lazy Loading Service › loads related data on demand

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "730aa356-7f1e-43f3-a73a-fab050ab5098",
        ~~~~~~
        breed: {
          connect: {
            id: 31521
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T18:42:24.602Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ● API Response Optimization System › Middleware Integration › handles pagination middleware correctly

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "730aa356-7f1e-43f3-a73a-fab050ab5098",
        ~~~~~~
        breed: {
          connect: {
            id: 31521
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T18:42:24.602Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ● API Response Optimization System › Middleware Integration › handles field selection via query parameters

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "730aa356-7f1e-43f3-a73a-fab050ab5098",
        ~~~~~~
        breed: {
          connect: {
            id: 31521
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T18:42:24.602Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ● API Response Optimization System › Middleware Integration › adds performance headers to responses

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "730aa356-7f1e-43f3-a73a-fab050ab5098",
        ~~~~~~
        breed: {
          connect: {
            id: 31521
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T18:42:24.602Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ● API Response Optimization System › Middleware Integration › handles large response optimization

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "730aa356-7f1e-43f3-a73a-fab050ab5098",
        ~~~~~~
        breed: {
          connect: {
            id: 31521
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T18:42:24.602Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ● API Response Optimization System › Middleware Integration › supports debug mode with optimization info

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "730aa356-7f1e-43f3-a73a-fab050ab5098",
        ~~~~~~
        breed: {
          connect: {
            id: 31521
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T18:42:24.602Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ● API Response Optimization System › Performance Metrics › tracks performance metrics correctly

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "730aa356-7f1e-43f3-a73a-fab050ab5098",
        ~~~~~~
        breed: {
          connect: {
            id: 31521
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T18:42:24.602Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ● API Response Optimization System › ETag and Caching › generates and validates ETags correctly

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "730aa356-7f1e-43f3-a73a-fab050ab5098",
        ~~~~~~
        breed: {
          connect: {
            id: 31521
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T18:42:24.602Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ● API Response Optimization System › Response Size Monitoring › monitors and warns about large responses

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "730aa356-7f1e-43f3-a73a-fab050ab5098",
        ~~~~~~
        breed: {
          connect: {
            id: 31521
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T18:42:24.602Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ● API Response Optimization System › Response Size Monitoring › handles response size limits

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "730aa356-7f1e-43f3-a73a-fab050ab5098",
        ~~~~~~
        breed: {
          connect: {
            id: 31521
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T18:42:24.602Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

[2026-01-28 13:42:24] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:42:24] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:42:24] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:42:24] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:42:25] error: Error getting groom personality traits for groom 73102: Unknown personality type: balanced
[2026-01-28 13:42:25] error: Error getting groom personality traits for groom 73103: Unknown personality type: balanced
[2026-01-28 13:42:25] error: Error getting groom personality traits for groom 73099: Unknown personality type: balanced
[2026-01-28 13:42:25] error: Error getting groom personality traits for groom 73100: Unknown personality type: balanced
[2026-01-28 13:42:25] error: Error getting groom personality traits for groom 73101: Unknown personality type: balanced
[2026-01-28 13:42:25] error: Error calculating personality modifiers: Unknown personality type: balanced
[2026-01-28 13:42:25] error: Error calculating personality modifiers: Unknown personality type: balanced
[2026-01-28 13:42:25] error: Error calculating personality modifiers: Unknown personality type: balanced
[2026-01-28 13:42:25] error: Error calculating personality modifiers: Unknown personality type: balanced
[2026-01-28 13:42:25] error: Error calculating personality modifiers: Unknown personality type: balanced
[2026-01-28 13:42:25] error: Error calculating dynamic compatibility: Unknown personality type: balanced
[2026-01-28 13:42:25] error: Error calculating dynamic compatibility: Unknown personality type: balanced
[2026-01-28 13:42:25] error: Error calculating dynamic compatibility: Unknown personality type: balanced
[2026-01-28 13:42:25] error: Error calculating dynamic compatibility: Unknown personality type: balanced
[2026-01-28 13:42:25] error: Error calculating dynamic compatibility: Unknown personality type: balanced
[2026-01-28 13:42:25] error: Error getting optimal groom recommendations: Unknown personality type: balanced
[2026-01-28 13:42:25] error: Error getting groom personality traits for groom 73102: Unknown personality type: balanced
[2026-01-28 13:42:25] error: Error getting groom personality traits for groom 73103: Unknown personality type: balanced
[2026-01-28 13:42:25] error: Error getting groom personality traits for groom 73099: Unknown personality type: balanced
[2026-01-28 13:42:25] error: Error getting groom personality traits for groom 73100: Unknown personality type: balanced
[2026-01-28 13:42:25] error: Error getting groom personality traits for groom 73101: Unknown personality type: balanced
[2026-01-28 13:42:25] error: Error calculating personality modifiers: Unknown personality type: balanced
[2026-01-28 13:42:25] error: Error calculating personality modifiers: Unknown personality type: balanced
[2026-01-28 13:42:25] error: Error calculating personality modifiers: Unknown personality type: balanced
[2026-01-28 13:42:25] error: Error calculating personality modifiers: Unknown personality type: balanced
[2026-01-28 13:42:25] error: Error calculating personality modifiers: Unknown personality type: balanced
[2026-01-28 13:42:25] error: Error calculating dynamic compatibility: Unknown personality type: balanced
[2026-01-28 13:42:25] error: Error calculating dynamic compatibility: Unknown personality type: balanced
[2026-01-28 13:42:25] error: Error calculating dynamic compatibility: Unknown personality type: balanced
[2026-01-28 13:42:25] error: Error calculating dynamic compatibility: Unknown personality type: balanced
[2026-01-28 13:42:25] error: Error calculating dynamic compatibility: Unknown personality type: balanced
[2026-01-28 13:42:25] error: Error getting optimal groom recommendations: Unknown personality type: balanced
FAIL tests/services/dynamicCompatibilityScoring.test.mjs
  Dynamic Compatibility Scoring
    calculateDynamicCompatibility
      √ should calculate high compatibility for calm groom with fearful horse (16 ms)
      √ should calculate low compatibility for energetic groom with fearful horse (8 ms)
      √ should calculate moderate compatibility with contextual improvements (7 ms)
      √ should apply experience bonuses correctly (15 ms)
    analyzeCompatibilityFactors
      √ should analyze all compatibility factors comprehensively (9 ms)
      √ should identify risk factors for poor matches (6 ms)
    predictInteractionOutcome
      √ should predict positive outcome for good compatibility (10 ms)
      √ should predict negative outcome for poor compatibility (11 ms)
    updateCompatibilityHistory
      √ should update compatibility history with interaction results (7 ms)
    getOptimalGroomRecommendations
      × should recommend optimal grooms for specific horse and context (20 ms)
      × should provide alternative recommendations (18 ms)
    analyzeCompatibilityTrends
      √ should analyze compatibility trends over time (11 ms)

  ● Dynamic Compatibility Scoring › getOptimalGroomRecommendations › should recommend optimal grooms for specific horse and context

    Unknown personality type: balanced

    [0m [90m 195 |[39m     [36mconst[39m personalityDef [33m=[39m [33mPERSONALITY_TRAIT_DEFINITIONS[39m[groom[33m.[39mgroomPersonality][33m;[39m
     [90m 196 |[39m     [36mif[39m ([33m![39mpersonalityDef) {
    [31m[1m>[22m[39m[90m 197 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Unknown personality type: ${groom.groomPersonality}`[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 198 |[39m     }
     [90m 199 |[39m
     [90m 200 |[39m     [90m// Calculate experience level and trait strength[39m[0m

      at getGroomPersonalityTraits (services/groomPersonalityTraits.mjs:197:13)
      at calculatePersonalityModifiers (services/groomPersonalityTraits.mjs:236:25)
      at calculateDynamicCompatibility (services/dynamicCompatibilityScoring.mjs:31:27)
      at services/dynamicCompatibilityScoring.mjs:337:31
          at async Promise.all (index 0)
      at getOptimalGroomRecommendations (services/dynamicCompatibilityScoring.mjs:335:34)
      at Object.<anonymous> (tests/services/dynamicCompatibilityScoring.test.mjs:378:31)

  ● Dynamic Compatibility Scoring › getOptimalGroomRecommendations › should provide alternative recommendations

    Unknown personality type: balanced

    [0m [90m 195 |[39m     [36mconst[39m personalityDef [33m=[39m [33mPERSONALITY_TRAIT_DEFINITIONS[39m[groom[33m.[39mgroomPersonality][33m;[39m
     [90m 196 |[39m     [36mif[39m ([33m![39mpersonalityDef) {
    [31m[1m>[22m[39m[90m 197 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Unknown personality type: ${groom.groomPersonality}`[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 198 |[39m     }
     [90m 199 |[39m
     [90m 200 |[39m     [90m// Calculate experience level and trait strength[39m[0m

      at getGroomPersonalityTraits (services/groomPersonalityTraits.mjs:197:13)
      at calculatePersonalityModifiers (services/groomPersonalityTraits.mjs:236:25)
      at calculateDynamicCompatibility (services/dynamicCompatibilityScoring.mjs:31:27)
      at services/dynamicCompatibilityScoring.mjs:337:31
          at async Promise.all (index 0)
      at getOptimalGroomRecommendations (services/dynamicCompatibilityScoring.mjs:335:34)
      at Object.<anonymous> (tests/services/dynamicCompatibilityScoring.test.mjs:405:31)

[2026-01-28 13:42:25] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:42:25] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:42:25] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:42:25] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:42:25] info: [trainingController.canTrain] Checking training eligibility for horse 146725 in Dressage
[2026-01-28 13:42:25] info: [trainingModel.getHorseAge] Getting age for horse 146725
[2026-01-28 13:42:25] info: [trainingModel.getHorseAge] Horse 146725 is 4 years old
[2026-01-28 13:42:25] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146725 across all disciplines
[2026-01-28 13:42:25] info: [trainingModel.getAnyRecentTraining] No training records found for horse 146725
[2026-01-28 13:42:25] info: [trainingController.canTrain] Horse 146725 is eligible to train in Dressage
[2026-01-28 13:42:25] info: [trainingController.canTrain] Checking training eligibility for horse 146727 in Dressage
[2026-01-28 13:42:25] info: [trainingModel.getHorseAge] Getting age for horse 146727
[2026-01-28 13:42:25] info: [trainingModel.getHorseAge] Horse 146727 is 2 years old
[2026-01-28 13:42:25] info: [trainingController.canTrain] Horse 146727 is too young (2 years old)
[2026-01-28 13:42:25] info: [trainingController.canTrain] Checking training eligibility for horse 146728 in Dressage
[2026-01-28 13:42:25] info: [trainingModel.getHorseAge] Getting age for horse 146728
[2026-01-28 13:42:25] info: [trainingModel.getHorseAge] Horse 146728 is 4 years old
[2026-01-28 13:42:25] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146728 across all disciplines
[2026-01-28 13:42:25] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 146728: Sun Jan 25 2026 13:42:25 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 13:42:25] info: [trainingController.canTrain] Horse 146728 still in cooldown for any training (4 days remaining)
[2026-01-28 13:42:25] info: [trainingController.canTrain] Checking training eligibility for horse 146729 in Dressage
[2026-01-28 13:42:25] info: [trainingModel.getHorseAge] Getting age for horse 146729
[2026-01-28 13:42:25] info: [trainingModel.getHorseAge] Horse 146729 is 4 years old
[2026-01-28 13:42:25] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146729 across all disciplines
[2026-01-28 13:42:25] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 146729: Tue Jan 20 2026 13:42:25 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 13:42:25] info: [trainingController.canTrain] Horse 146729 is eligible to train in Dressage
[2026-01-28 13:42:25] info: [trainingController.canTrain] Checking training eligibility for horse 99999 in Dressage
[2026-01-28 13:42:25] info: [trainingModel.getHorseAge] Getting age for horse 99999
[2026-01-28 13:42:25] info: [trainingModel.getHorseAge] Horse 99999 not found or missing dateOfBirth
[2026-01-28 13:42:25] warn: [trainingController.canTrain] Horse 99999 not found
[2026-01-28 13:42:25] error: [trainingController.canTrain] Error checking training eligibility: Horse ID must be a positive integer
[2026-01-28 13:42:25] error: [trainingController.canTrain] Error checking training eligibility: Discipline is required
[2026-01-28 13:42:25] error: [trainingController.canTrain] Error checking training eligibility: Horse ID is required
[2026-01-28 13:42:25] info: [trainingController.canTrain] Checking training eligibility for horse 146730 in Dressage
[2026-01-28 13:42:25] info: [trainingModel.getHorseAge] Getting age for horse 146730
[2026-01-28 13:42:25] info: [trainingModel.getHorseAge] Horse 146730 is 4 years old
[2026-01-28 13:42:25] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146730 across all disciplines
[2026-01-28 13:42:25] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 146730: Wed Jan 21 2026 13:42:24 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 13:42:25] info: [trainingController.canTrain] Horse 146730 is eligible to train in Dressage
[2026-01-28 13:42:25] info: [trainingController.trainHorse] Attempting to train horse 146725 in Racing
[2026-01-28 13:42:25] info: [trainingController.canTrain] Checking training eligibility for horse 146725 in Racing
[2026-01-28 13:42:25] info: [trainingModel.getHorseAge] Getting age for horse 146725
[2026-01-28 13:42:25] info: [trainingModel.getHorseAge] Horse 146725 is 4 years old
[2026-01-28 13:42:25] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146725 across all disciplines
[2026-01-28 13:42:25] info: [trainingModel.getAnyRecentTraining] No training records found for horse 146725
[2026-01-28 13:42:25] info: [trainingController.canTrain] Horse 146725 is eligible to train in Racing
[2026-01-28 13:42:25] info: [horseModel.getHorseById] Successfully found horse: Eligible Horse (ID: 146725)
[2026-01-28 13:42:25] info: [trainingController.trainHorse] Horse 146725 has traits: 
[2026-01-28 13:42:25] info: [trainingModel.logTrainingSession] Logging training session for horse 146725 in Racing
[2026-01-28 13:42:25] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 8980
[2026-01-28 13:42:25] info: [horseModel.incrementDisciplineScore] Incrementing Racing score for horse 146725 by +5
[2026-01-28 13:42:25] info: [horseModel.updateDisciplineScore] Updating Racing score for horse 146725 by +5
[2026-01-28 13:42:25] info: [horseModel.updateDisciplineScore] Successfully updated Racing score for horse 146725: 0 -> 5
[2026-01-28 13:42:25] info: [horseModel.incrementDisciplineScore] Successfully incremented Racing score for horse 146725
[2026-01-28 13:42:25] info: [xpLogModel.logXpEvent] Logging XP event: User be02fe72-4da0-490e-b0b4-5679089c388e, Amount: 5, Reason: Trained horse Eligible Horse in Racing
[2026-01-28 13:42:25] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 4431, User be02fe72-4da0-490e-b0b4-5679089c388e, Amount: 5
[2026-01-28 13:42:25] info: [trainingController.trainHorse] Awarded 5 XP to user be02fe72-4da0-490e-b0b4-5679089c388e for training
[2026-01-28 13:42:25] info: [trainingController.trainHorse] Successfully trained horse 146725 in Racing (Log ID: 8980, Score +5)
[2026-01-28 13:42:25] info: [trainingController.trainHorse] Attempting to train horse 146727 in Racing
[2026-01-28 13:42:25] info: [trainingController.canTrain] Checking training eligibility for horse 146727 in Racing
[2026-01-28 13:42:25] info: [trainingModel.getHorseAge] Getting age for horse 146727
[2026-01-28 13:42:25] info: [trainingModel.getHorseAge] Horse 146727 is 2 years old
[2026-01-28 13:42:25] info: [trainingController.canTrain] Horse 146727 is too young (2 years old)
[2026-01-28 13:42:25] warn: [trainingController.trainHorse] Training rejected: Horse is under age
[2026-01-28 13:42:25] info: [trainingController.trainHorse] Attempting to train horse 146728 in Racing
[2026-01-28 13:42:25] info: [trainingController.canTrain] Checking training eligibility for horse 146728 in Racing
[2026-01-28 13:42:25] info: [trainingModel.getHorseAge] Getting age for horse 146728
[2026-01-28 13:42:25] info: [trainingModel.getHorseAge] Horse 146728 is 4 years old
[2026-01-28 13:42:25] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146728 across all disciplines
[2026-01-28 13:42:25] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 146728: Sun Jan 25 2026 13:42:25 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 13:42:25] info: [trainingController.canTrain] Horse 146728 still in cooldown for any training (4 days remaining)
[2026-01-28 13:42:25] warn: [trainingController.trainHorse] Training rejected: Training cooldown active for this horse
[2026-01-28 13:42:25] info: [trainingController.trainHorse] Attempting to train horse 146725 in Dressage
[2026-01-28 13:42:25] info: [trainingController.canTrain] Checking training eligibility for horse 146725 in Dressage
[2026-01-28 13:42:25] info: [trainingModel.getHorseAge] Getting age for horse 146725
[2026-01-28 13:42:25] info: [trainingModel.getHorseAge] Horse 146725 is 4 years old
[2026-01-28 13:42:25] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146725 across all disciplines
[2026-01-28 13:42:25] info: [trainingModel.getAnyRecentTraining] No training records found for horse 146725
[2026-01-28 13:42:25] info: [trainingController.canTrain] Horse 146725 is eligible to train in Dressage
[2026-01-28 13:42:25] info: [horseModel.getHorseById] Successfully found horse: Eligible Horse (ID: 146725)
[2026-01-28 13:42:25] info: [trainingController.trainHorse] Horse 146725 has traits: 
[2026-01-28 13:42:25] info: [trainingModel.logTrainingSession] Logging training session for horse 146725 in Dressage
[2026-01-28 13:42:25] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 8981
[2026-01-28 13:42:25] info: [horseModel.incrementDisciplineScore] Incrementing Dressage score for horse 146725 by +5
[2026-01-28 13:42:25] info: [horseModel.updateDisciplineScore] Updating Dressage score for horse 146725 by +5
[2026-01-28 13:42:25] info: [horseModel.updateDisciplineScore] Successfully updated Dressage score for horse 146725: 0 -> 5
[2026-01-28 13:42:25] info: [horseModel.incrementDisciplineScore] Successfully incremented Dressage score for horse 146725
[2026-01-28 13:42:25] info: [xpLogModel.logXpEvent] Logging XP event: User be02fe72-4da0-490e-b0b4-5679089c388e, Amount: 5, Reason: Trained horse Eligible Horse in Dressage
[2026-01-28 13:42:25] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 4432, User be02fe72-4da0-490e-b0b4-5679089c388e, Amount: 5
[2026-01-28 13:42:25] info: [trainingController.trainHorse] Awarded 5 XP to user be02fe72-4da0-490e-b0b4-5679089c388e for training
[2026-01-28 13:42:25] info: [trainingController.trainHorse] Successfully trained horse 146725 in Dressage (Log ID: 8981, Score +5)
[2026-01-28 13:42:25] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 146725 in Racing
[2026-01-28 13:42:25] info: [trainingController.canTrain] Checking training eligibility for horse 146725 in Racing
[2026-01-28 13:42:25] info: [trainingModel.getHorseAge] Getting age for horse 146725
[2026-01-28 13:42:25] info: [trainingModel.getHorseAge] Horse 146725 is 4 years old
[2026-01-28 13:42:25] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146725 across all disciplines
[2026-01-28 13:42:25] info: [trainingModel.getAnyRecentTraining] No training records found for horse 146725
[2026-01-28 13:42:25] info: [trainingController.canTrain] Horse 146725 is eligible to train in Racing
[2026-01-28 13:42:25] info: [trainingModel.getHorseAge] Getting age for horse 146725
[2026-01-28 13:42:25] info: [trainingModel.getHorseAge] Horse 146725 is 4 years old
[2026-01-28 13:42:25] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 146725 in Racing
[2026-01-28 13:42:25] info: [trainingModel.getLastTrainingDate] No training records found for horse 146725 in Racing
[2026-01-28 13:42:25] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146725 across all disciplines
[2026-01-28 13:42:25] info: [trainingModel.getAnyRecentTraining] No training records found for horse 146725
[2026-01-28 13:42:25] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 146728 in Dressage
[2026-01-28 13:42:25] info: [trainingController.canTrain] Checking training eligibility for horse 146728 in Dressage
[2026-01-28 13:42:25] info: [trainingModel.getHorseAge] Getting age for horse 146728
[2026-01-28 13:42:25] info: [trainingModel.getHorseAge] Horse 146728 is 4 years old
[2026-01-28 13:42:25] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146728 across all disciplines
[2026-01-28 13:42:25] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 146728: Sun Jan 25 2026 13:42:25 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 13:42:25] info: [trainingController.canTrain] Horse 146728 still in cooldown for any training (4 days remaining)
[2026-01-28 13:42:25] info: [trainingModel.getHorseAge] Getting age for horse 146728
[2026-01-28 13:42:25] info: [trainingModel.getHorseAge] Horse 146728 is 4 years old
[2026-01-28 13:42:25] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 146728 in Dressage
[2026-01-28 13:42:25] info: [trainingModel.getLastTrainingDate] No training records found for horse 146728 in Dressage
[2026-01-28 13:42:25] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146728 across all disciplines
[2026-01-28 13:42:25] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 146728: Sun Jan 25 2026 13:42:25 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 13:42:25] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 146731 in Racing
[2026-01-28 13:42:25] info: [trainingController.canTrain] Checking training eligibility for horse 146731 in Racing
[2026-01-28 13:42:25] info: [trainingModel.getHorseAge] Getting age for horse 146731
[2026-01-28 13:42:25] info: [trainingModel.getHorseAge] Horse 146731 is 4 years old
[2026-01-28 13:42:25] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146731 across all disciplines
[2026-01-28 13:42:25] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 146731: Tue Jan 20 2026 13:42:25 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 13:42:25] info: [trainingController.canTrain] Horse 146731 is eligible to train in Racing
[2026-01-28 13:42:25] info: [trainingModel.getHorseAge] Getting age for horse 146731
[2026-01-28 13:42:25] info: [trainingModel.getHorseAge] Horse 146731 is 4 years old
[2026-01-28 13:42:25] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 146731 in Racing
[2026-01-28 13:42:25] info: [trainingModel.getLastTrainingDate] Last training date for horse 146731 in Racing: Tue Jan 20 2026 13:42:25 GMT-0500 (Eastern Standard Time)
[2026-01-28 13:42:25] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146731 across all disciplines
[2026-01-28 13:42:25] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 146731: Tue Jan 20 2026 13:42:25 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 13:42:25] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 146727 in Racing
[2026-01-28 13:42:25] info: [trainingController.canTrain] Checking training eligibility for horse 146727 in Racing
[2026-01-28 13:42:25] info: [trainingModel.getHorseAge] Getting age for horse 146727
[2026-01-28 13:42:25] info: [trainingModel.getHorseAge] Horse 146727 is 2 years old
[2026-01-28 13:42:25] info: [trainingController.canTrain] Horse 146727 is too young (2 years old)
[2026-01-28 13:42:25] info: [trainingModel.getHorseAge] Getting age for horse 146727
[2026-01-28 13:42:25] info: [trainingModel.getHorseAge] Horse 146727 is 2 years old
[2026-01-28 13:42:25] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 146727 in Racing
[2026-01-28 13:42:25] info: [trainingModel.getLastTrainingDate] No training records found for horse 146727 in Racing
[2026-01-28 13:42:25] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146727 across all disciplines
[2026-01-28 13:42:25] info: [trainingModel.getAnyRecentTraining] No training records found for horse 146727
[2026-01-28 13:42:25] info: [trainingController.canTrain] Checking training eligibility for horse 146728 in Racing
[2026-01-28 13:42:25] info: [trainingModel.getHorseAge] Getting age for horse 146728
[2026-01-28 13:42:25] info: [trainingModel.getHorseAge] Horse 146728 is 4 years old
[2026-01-28 13:42:25] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146728 across all disciplines
[2026-01-28 13:42:25] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 146728: Sun Jan 25 2026 13:42:25 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 13:42:25] info: [trainingController.canTrain] Horse 146728 still in cooldown for any training (4 days remaining)
[2026-01-28 13:42:25] info: [trainingController.canTrain] Checking training eligibility for horse 146728 in Show Jumping
[2026-01-28 13:42:25] info: [trainingModel.getHorseAge] Getting age for horse 146728
[2026-01-28 13:42:25] info: [trainingModel.getHorseAge] Horse 146728 is 4 years old
[2026-01-28 13:42:25] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146728 across all disciplines
[2026-01-28 13:42:25] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 146728: Sun Jan 25 2026 13:42:25 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 13:42:25] info: [trainingController.canTrain] Horse 146728 still in cooldown for any training (4 days remaining)
[2026-01-28 13:42:25] info: [trainingController.canTrain] Checking training eligibility for horse 146732 in Racing
[2026-01-28 13:42:25] info: [trainingModel.getHorseAge] Getting age for horse 146732
[2026-01-28 13:42:25] info: [trainingModel.getHorseAge] Horse 146732 is 4 years old
[2026-01-28 13:42:25] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146732 across all disciplines
[2026-01-28 13:42:25] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 146732: Wed Jan 21 2026 13:42:24 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 13:42:25] info: [trainingController.canTrain] Horse 146732 is eligible to train in Racing
[2026-01-28 13:42:26] info: [trainingController.getTrainableHorses] Getting trainable horses for user be02fe72-4da0-490e-b0b4-5679089c388e
[2026-01-28 13:42:26] info: [trainingModel.getRecentTrainingForMultipleHorses] Fetching latest training for 4 horses
[2026-01-28 13:42:26] info: [trainingController.getTrainableHorses] Found 2 trainable horses for user be02fe72-4da0-490e-b0b4-5679089c388e
[2026-01-28 13:42:26] info: [trainingController.getTrainableHorses] Getting trainable horses for user 60e53e0f-f93c-4172-bc5a-6fc1bc29339c
[2026-01-28 13:42:26] info: [trainingController.getTrainableHorses] User 60e53e0f-f93c-4172-bc5a-6fc1bc29339c has no horses
[2026-01-28 13:42:26] info: [trainingController.getTrainableHorses] Getting trainable horses for user aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee
[2026-01-28 13:42:26] warn: [trainingController.getTrainableHorses] User aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee not found
[2026-01-28 13:42:26] info: [trainingController.getTrainableHorses] Getting trainable horses for user be02fe72-4da0-490e-b0b4-5679089c388e
[2026-01-28 13:42:26] info: [trainingModel.getRecentTrainingForMultipleHorses] Fetching latest training for 4 horses
[2026-01-28 13:42:26] info: [trainingController.getTrainableHorses] Found 2 trainable horses for user be02fe72-4da0-490e-b0b4-5679089c388e
[2026-01-28 13:42:26] info: [trainingController.getTrainableHorses] Getting trainable horses for user be02fe72-4da0-490e-b0b4-5679089c388e
[2026-01-28 13:42:26] info: [trainingModel.getRecentTrainingForMultipleHorses] Fetching latest training for 4 horses
[2026-01-28 13:42:26] info: [trainingController.getTrainableHorses] Found 2 trainable horses for user be02fe72-4da0-490e-b0b4-5679089c388e
[2026-01-28 13:42:26] error: [trainingController.getTrainableHorses] Error getting trainable horses: User ID is required
[2026-01-28 13:42:26] error: [trainingController.getTrainableHorses] Error getting trainable horses: User ID is required
PASS tests/trainingController.test.mjs
  🏋️ UNIT: Training Controller - Horse Training Business Logic
    canTrain
      √ should return eligible true for horse that meets all requirements (17 ms)
      √ should return eligible false for horse under 3 years old (7 ms)
      √ should return eligible false for horse with recent training in any discipline (9 ms)
      √ should return eligible true for horse with old training (8+ days ago) (29 ms)
      √ should return eligible false for non-existent horse (7 ms)
      √ should throw error for invalid horse ID (6 ms)
      √ should throw error for missing discipline (4 ms)
      √ should throw error for missing horse ID (5 ms)
      √ should handle database errors gracefully (3 ms)
      √ should calculate cooldown correctly for edge case (exactly 7 days) (50 ms)
    trainHorse
      √ should successfully train eligible horse (45 ms)
      √ should reject training for ineligible horse (under age) (10 ms)
      √ should reject training for horse in cooldown (13 ms)
      √ should handle training log errors gracefully (2 ms)
      √ should award +5 XP after successful training (43 ms)
      √ should handle XP system errors gracefully without breaking training (2 ms)
    getTrainingStatus
      √ should return complete status for eligible horse with no training history (20 ms)
      √ should return complete status for horse in active cooldown (22 ms)
      √ should return complete status for horse with expired cooldown (32 ms)
      √ should return status for ineligible horse (under age) (17 ms)
      √ should handle database errors gracefully (2 ms)
    Integration scenarios
      √ should handle different disciplines with global cooldown (18 ms)
      √ should handle edge case of exactly 7 days cooldown (19 ms)
      √ should handle complete training workflow (2 ms)
    getTrainableHorses
      √ should return trainable horses for user with eligible horses (11 ms)
      √ should return empty array for player with no horses (16 ms)
      √ should return empty array for non-existent player (6 ms)
      √ should filter out horses under 3 years old (9 ms)
      √ should exclude horses with recent training (global cooldown) (10 ms)
      √ should handle database errors gracefully for individual horses (1 ms)
      √ should throw error for missing player ID (5 ms)
      √ should handle player model errors (2 ms)
    trainRouteHandler
      √ should handle successful training workflow - placeholder for integration testing (2 ms)
      √ should handle validation errors - placeholder for integration testing (2 ms)
      √ should handle missing data gracefully - placeholder for integration testing (2 ms)
      √ should handle server errors gracefully - placeholder for integration testing (2 ms)
      √ should handle trait effects in training - placeholder for integration testing (2 ms)

[2026-01-28 13:42:26] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:42:26] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:42:26] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:42:26] info: [envValidator] Test environment validation complete. Success: true
FAIL tests/unit/breedingAnalyticsService.test.mjs
  Breeding Analytics Service
    Lineage Tracking
      × should track breeding pair lineage (67 ms)
      × should identify parent-offspring relationships (6 ms)
    Trait Inheritance Analysis
      × should analyze trait inheritance patterns (8 ms)
      × should calculate trait inheritance rates (5 ms)
    Breeding Success Metrics
      × should calculate breeding success rates (5 ms)
      × should track foal development outcomes (6 ms)
    Statistical Analysis
      × should calculate average offspring stats (6 ms)
      × should compare offspring to parent averages (5 ms)
    Error Handling
      × should handle user with no breeding data (6 ms)
      × should handle non-existent user gracefully (5 ms)

  ● Breeding Analytics Service › Lineage Tracking › should track breeding pair lineage

    PrismaClientValidationError: 
    Invalid `prisma.horse.count()` invocation:

    {
      select: {
        _count: {
          select: {
            _all: true
          }
        }
      },
      where: {
        user: {
          connect: {
          ~~~~~~~
            id: "bde5625c-4468-4580-9462-a600c46ea9cb"
          },
    ?     is?: UserWhereInput | Null,
    ?     isNot?: UserWhereInput | Null
        },
        sireId: 146733,
        damId: 146734
      }
    }

    Unknown argument `connect`. Available options are marked with ?.

    [0m [90m 165 |[39m     }
     [90m 166 |[39m
    [31m[1m>[22m[39m[90m 167 |[39m     [36mconst[39m foalCount [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcount({
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 168 |[39m       where[33m:[39m { user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m sireId[33m:[39m testStallion[33m.[39mid[33m,[39m damId[33m:[39m testMare[33m.[39mid }[33m,[39m
     [90m 169 |[39m     })[33m;[39m
     [90m 170 |[39m     [36mif[39m (foalCount [33m<[39m [35m5[39m) {[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at ensureBreedingData (tests/unit/breedingAnalyticsService.test.mjs:167:23)
      at Object.<anonymous> (tests/unit/breedingAnalyticsService.test.mjs:180:5)

  ● Breeding Analytics Service › Lineage Tracking › should identify parent-offspring relationships

    PrismaClientValidationError: 
    Invalid `prisma.horse.count()` invocation:

    {
      select: {
        _count: {
          select: {
            _all: true
          }
        }
      },
      where: {
        user: {
          connect: {
          ~~~~~~~
            id: "bde5625c-4468-4580-9462-a600c46ea9cb"
          },
    ?     is?: UserWhereInput | Null,
    ?     isNot?: UserWhereInput | Null
        },
        sireId: 146733,
        damId: 146734
      }
    }

    Unknown argument `connect`. Available options are marked with ?.

    [0m [90m 165 |[39m     }
     [90m 166 |[39m
    [31m[1m>[22m[39m[90m 167 |[39m     [36mconst[39m foalCount [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcount({
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 168 |[39m       where[33m:[39m { user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m sireId[33m:[39m testStallion[33m.[39mid[33m,[39m damId[33m:[39m testMare[33m.[39mid }[33m,[39m
     [90m 169 |[39m     })[33m;[39m
     [90m 170 |[39m     [36mif[39m (foalCount [33m<[39m [35m5[39m) {[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at ensureBreedingData (tests/unit/breedingAnalyticsService.test.mjs:167:23)
      at Object.<anonymous> (tests/unit/breedingAnalyticsService.test.mjs:180:5)

  ● Breeding Analytics Service › Trait Inheritance Analysis › should analyze trait inheritance patterns

    PrismaClientValidationError: 
    Invalid `prisma.horse.count()` invocation:

    {
      select: {
        _count: {
          select: {
            _all: true
          }
        }
      },
      where: {
        user: {
          connect: {
          ~~~~~~~
            id: "bde5625c-4468-4580-9462-a600c46ea9cb"
          },
    ?     is?: UserWhereInput | Null,
    ?     isNot?: UserWhereInput | Null
        },
        sireId: 146733,
        damId: 146734
      }
    }

    Unknown argument `connect`. Available options are marked with ?.

    [0m [90m 165 |[39m     }
     [90m 166 |[39m
    [31m[1m>[22m[39m[90m 167 |[39m     [36mconst[39m foalCount [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcount({
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 168 |[39m       where[33m:[39m { user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m sireId[33m:[39m testStallion[33m.[39mid[33m,[39m damId[33m:[39m testMare[33m.[39mid }[33m,[39m
     [90m 169 |[39m     })[33m;[39m
     [90m 170 |[39m     [36mif[39m (foalCount [33m<[39m [35m5[39m) {[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at ensureBreedingData (tests/unit/breedingAnalyticsService.test.mjs:167:23)
      at Object.<anonymous> (tests/unit/breedingAnalyticsService.test.mjs:180:5)

  ● Breeding Analytics Service › Trait Inheritance Analysis › should calculate trait inheritance rates

    PrismaClientValidationError: 
    Invalid `prisma.horse.count()` invocation:

    {
      select: {
        _count: {
          select: {
            _all: true
          }
        }
      },
      where: {
        user: {
          connect: {
          ~~~~~~~
            id: "bde5625c-4468-4580-9462-a600c46ea9cb"
          },
    ?     is?: UserWhereInput | Null,
    ?     isNot?: UserWhereInput | Null
        },
        sireId: 146733,
        damId: 146734
      }
    }

    Unknown argument `connect`. Available options are marked with ?.

    [0m [90m 165 |[39m     }
     [90m 166 |[39m
    [31m[1m>[22m[39m[90m 167 |[39m     [36mconst[39m foalCount [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcount({
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 168 |[39m       where[33m:[39m { user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m sireId[33m:[39m testStallion[33m.[39mid[33m,[39m damId[33m:[39m testMare[33m.[39mid }[33m,[39m
     [90m 169 |[39m     })[33m;[39m
     [90m 170 |[39m     [36mif[39m (foalCount [33m<[39m [35m5[39m) {[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at ensureBreedingData (tests/unit/breedingAnalyticsService.test.mjs:167:23)
      at Object.<anonymous> (tests/unit/breedingAnalyticsService.test.mjs:180:5)

  ● Breeding Analytics Service › Breeding Success Metrics › should calculate breeding success rates

    PrismaClientValidationError: 
    Invalid `prisma.horse.count()` invocation:

    {
      select: {
        _count: {
          select: {
            _all: true
          }
        }
      },
      where: {
        user: {
          connect: {
          ~~~~~~~
            id: "bde5625c-4468-4580-9462-a600c46ea9cb"
          },
    ?     is?: UserWhereInput | Null,
    ?     isNot?: UserWhereInput | Null
        },
        sireId: 146733,
        damId: 146734
      }
    }

    Unknown argument `connect`. Available options are marked with ?.

    [0m [90m 165 |[39m     }
     [90m 166 |[39m
    [31m[1m>[22m[39m[90m 167 |[39m     [36mconst[39m foalCount [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcount({
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 168 |[39m       where[33m:[39m { user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m sireId[33m:[39m testStallion[33m.[39mid[33m,[39m damId[33m:[39m testMare[33m.[39mid }[33m,[39m
     [90m 169 |[39m     })[33m;[39m
     [90m 170 |[39m     [36mif[39m (foalCount [33m<[39m [35m5[39m) {[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at ensureBreedingData (tests/unit/breedingAnalyticsService.test.mjs:167:23)
      at Object.<anonymous> (tests/unit/breedingAnalyticsService.test.mjs:180:5)

  ● Breeding Analytics Service › Breeding Success Metrics › should track foal development outcomes

    PrismaClientValidationError: 
    Invalid `prisma.horse.count()` invocation:

    {
      select: {
        _count: {
          select: {
            _all: true
          }
        }
      },
      where: {
        user: {
          connect: {
          ~~~~~~~
            id: "bde5625c-4468-4580-9462-a600c46ea9cb"
          },
    ?     is?: UserWhereInput | Null,
    ?     isNot?: UserWhereInput | Null
        },
        sireId: 146733,
        damId: 146734
      }
    }

    Unknown argument `connect`. Available options are marked with ?.

    [0m [90m 165 |[39m     }
     [90m 166 |[39m
    [31m[1m>[22m[39m[90m 167 |[39m     [36mconst[39m foalCount [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcount({
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 168 |[39m       where[33m:[39m { user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m sireId[33m:[39m testStallion[33m.[39mid[33m,[39m damId[33m:[39m testMare[33m.[39mid }[33m,[39m
     [90m 169 |[39m     })[33m;[39m
     [90m 170 |[39m     [36mif[39m (foalCount [33m<[39m [35m5[39m) {[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at ensureBreedingData (tests/unit/breedingAnalyticsService.test.mjs:167:23)
      at Object.<anonymous> (tests/unit/breedingAnalyticsService.test.mjs:180:5)

  ● Breeding Analytics Service › Statistical Analysis › should calculate average offspring stats

    PrismaClientValidationError: 
    Invalid `prisma.horse.count()` invocation:

    {
      select: {
        _count: {
          select: {
            _all: true
          }
        }
      },
      where: {
        user: {
          connect: {
          ~~~~~~~
            id: "bde5625c-4468-4580-9462-a600c46ea9cb"
          },
    ?     is?: UserWhereInput | Null,
    ?     isNot?: UserWhereInput | Null
        },
        sireId: 146733,
        damId: 146734
      }
    }

    Unknown argument `connect`. Available options are marked with ?.

    [0m [90m 165 |[39m     }
     [90m 166 |[39m
    [31m[1m>[22m[39m[90m 167 |[39m     [36mconst[39m foalCount [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcount({
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 168 |[39m       where[33m:[39m { user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m sireId[33m:[39m testStallion[33m.[39mid[33m,[39m damId[33m:[39m testMare[33m.[39mid }[33m,[39m
     [90m 169 |[39m     })[33m;[39m
     [90m 170 |[39m     [36mif[39m (foalCount [33m<[39m [35m5[39m) {[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at ensureBreedingData (tests/unit/breedingAnalyticsService.test.mjs:167:23)
      at Object.<anonymous> (tests/unit/breedingAnalyticsService.test.mjs:180:5)

  ● Breeding Analytics Service › Statistical Analysis › should compare offspring to parent averages

    PrismaClientValidationError: 
    Invalid `prisma.horse.count()` invocation:

    {
      select: {
        _count: {
          select: {
            _all: true
          }
        }
      },
      where: {
        user: {
          connect: {
          ~~~~~~~
            id: "bde5625c-4468-4580-9462-a600c46ea9cb"
          },
    ?     is?: UserWhereInput | Null,
    ?     isNot?: UserWhereInput | Null
        },
        sireId: 146733,
        damId: 146734
      }
    }

    Unknown argument `connect`. Available options are marked with ?.

    [0m [90m 165 |[39m     }
     [90m 166 |[39m
    [31m[1m>[22m[39m[90m 167 |[39m     [36mconst[39m foalCount [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcount({
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 168 |[39m       where[33m:[39m { user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m sireId[33m:[39m testStallion[33m.[39mid[33m,[39m damId[33m:[39m testMare[33m.[39mid }[33m,[39m
     [90m 169 |[39m     })[33m;[39m
     [90m 170 |[39m     [36mif[39m (foalCount [33m<[39m [35m5[39m) {[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at ensureBreedingData (tests/unit/breedingAnalyticsService.test.mjs:167:23)
      at Object.<anonymous> (tests/unit/breedingAnalyticsService.test.mjs:180:5)

  ● Breeding Analytics Service › Error Handling › should handle user with no breeding data

    PrismaClientValidationError: 
    Invalid `prisma.horse.count()` invocation:

    {
      select: {
        _count: {
          select: {
            _all: true
          }
        }
      },
      where: {
        user: {
          connect: {
          ~~~~~~~
            id: "bde5625c-4468-4580-9462-a600c46ea9cb"
          },
    ?     is?: UserWhereInput | Null,
    ?     isNot?: UserWhereInput | Null
        },
        sireId: 146733,
        damId: 146734
      }
    }

    Unknown argument `connect`. Available options are marked with ?.

    [0m [90m 165 |[39m     }
     [90m 166 |[39m
    [31m[1m>[22m[39m[90m 167 |[39m     [36mconst[39m foalCount [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcount({
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 168 |[39m       where[33m:[39m { user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m sireId[33m:[39m testStallion[33m.[39mid[33m,[39m damId[33m:[39m testMare[33m.[39mid }[33m,[39m
     [90m 169 |[39m     })[33m;[39m
     [90m 170 |[39m     [36mif[39m (foalCount [33m<[39m [35m5[39m) {[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at ensureBreedingData (tests/unit/breedingAnalyticsService.test.mjs:167:23)
      at Object.<anonymous> (tests/unit/breedingAnalyticsService.test.mjs:180:5)

  ● Breeding Analytics Service › Error Handling › should handle non-existent user gracefully

    PrismaClientValidationError: 
    Invalid `prisma.horse.count()` invocation:

    {
      select: {
        _count: {
          select: {
            _all: true
          }
        }
      },
      where: {
        user: {
          connect: {
          ~~~~~~~
            id: "bde5625c-4468-4580-9462-a600c46ea9cb"
          },
    ?     is?: UserWhereInput | Null,
    ?     isNot?: UserWhereInput | Null
        },
        sireId: 146733,
        damId: 146734
      }
    }

    Unknown argument `connect`. Available options are marked with ?.

    [0m [90m 165 |[39m     }
     [90m 166 |[39m
    [31m[1m>[22m[39m[90m 167 |[39m     [36mconst[39m foalCount [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcount({
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 168 |[39m       where[33m:[39m { user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m sireId[33m:[39m testStallion[33m.[39mid[33m,[39m damId[33m:[39m testMare[33m.[39mid }[33m,[39m
     [90m 169 |[39m     })[33m;[39m
     [90m 170 |[39m     [36mif[39m (foalCount [33m<[39m [35m5[39m) {[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at ensureBreedingData (tests/unit/breedingAnalyticsService.test.mjs:167:23)
      at Object.<anonymous> (tests/unit/breedingAnalyticsService.test.mjs:180:5)

[2026-01-28 13:42:26] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:42:26] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:42:26] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:42:26] info: [envValidator] Test environment validation complete. Success: true
FAIL tests/schema-validation.test.mjs
  Schema Validation
    √ should create horse with basic required fields (35 ms)
    √ should create horse with groom-related fields (16 ms)
    √ should create groom with all required fields (11 ms)
    × should create groom assignment (20 ms)
    √ should create groom interaction (18 ms)

  ● Schema Validation › should create groom assignment

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 146742,
        groomId: 73401,
        user: {
        ~~~~
          connect: {
            id: "schema-test-user-1769625746922-xu66vjsvu"
          }
        },
        priority: 1,
        notes: "Test assignment",
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isActive?: Boolean,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 180 |[39m     })[33m;[39m
     [90m 181 |[39m
    [31m[1m>[22m[39m[90m 182 |[39m     [36mconst[39m assignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                        [31m[1m^[22m[39m
     [90m 183 |[39m       data[33m:[39m {
     [90m 184 |[39m         foalId[33m:[39m horse[33m.[39mid[33m,[39m
     [90m 185 |[39m         groomId[33m:[39m groom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/schema-validation.test.mjs:182:24)

[2026-01-28 13:42:27] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:42:27] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:42:27] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:42:27] info: [envValidator] Test environment validation complete. Success: true
FAIL tests/trainingController-business-logic.test.mjs
  🏋️ INTEGRATION: Training Controller Business Logic - Complete Training Workflow
    BUSINESS RULE: canTrain() Function Validation
      × RETURNS eligible true for horse that meets all requirements
      × RETURNS eligible false for horse under 3 years old
      × RETURNS eligible false for horse with recent training (global cooldown)
      × RETURNS eligible false for non-existent horse
      × THROWS error for invalid input parameters (1 ms)
    BUSINESS RULE: trainHorse() Function Complete Workflow
      × EXECUTES successful training workflow for eligible horse
      × RETURNS error for ineligible horse (age restriction)
      × RETURNS error for horse in cooldown
      × RETURNS error for non-existent horse
      × THROWS error for invalid discipline
    BUSINESS RULE: getTrainingStatus() Function Validation
      × RETURNS accurate status for horse with no training history
      × RETURNS accurate status for horse with training history
      × RETURNS error status for non-existent horse
    BUSINESS RULE: getTrainableHorses() Function Validation
      × RETURNS empty array for user with no horses
      × RETURNS array of trainable horses for user (1 ms)
      × RETURNS empty array after training (horse in cooldown)
    API INTEGRATION: trainRouteHandler() Function Validation
      × PROCESSES valid training request and RETURNS success response
      × RETURNS error response for ineligible horse
      × RETURNS error response for horse in cooldown
      × RETURNS error response for non-existent horse
      × RETURNS error response for invalid discipline

  ● 🏋️ INTEGRATION: Training Controller Business Logic - Complete Training Workflow › BUSINESS RULE: canTrain() Function Validation › RETURNS eligible true for horse that meets all requirements

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Controller Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "f1110248-08c1-4bf3-9775-67ff6e38b8ae"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:27.264Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 162 |[39m
     [90m 163 |[39m     [90m// Create test horses[39m
    [31m[1m>[22m[39m[90m 164 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 165 |[39m       data[33m:[39m {
     [90m 166 |[39m         name[33m:[39m [32m'Controller Adult Horse'[39m[33m,[39m
     [90m 167 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/trainingController-business-logic.test.mjs:164:18)

  ● 🏋️ INTEGRATION: Training Controller Business Logic - Complete Training Workflow › BUSINESS RULE: canTrain() Function Validation › RETURNS eligible false for horse under 3 years old

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Controller Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "f1110248-08c1-4bf3-9775-67ff6e38b8ae"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:27.264Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 162 |[39m
     [90m 163 |[39m     [90m// Create test horses[39m
    [31m[1m>[22m[39m[90m 164 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 165 |[39m       data[33m:[39m {
     [90m 166 |[39m         name[33m:[39m [32m'Controller Adult Horse'[39m[33m,[39m
     [90m 167 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/trainingController-business-logic.test.mjs:164:18)

  ● 🏋️ INTEGRATION: Training Controller Business Logic - Complete Training Workflow › BUSINESS RULE: canTrain() Function Validation › RETURNS eligible false for horse with recent training (global cooldown)

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Controller Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "f1110248-08c1-4bf3-9775-67ff6e38b8ae"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:27.264Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 162 |[39m
     [90m 163 |[39m     [90m// Create test horses[39m
    [31m[1m>[22m[39m[90m 164 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 165 |[39m       data[33m:[39m {
     [90m 166 |[39m         name[33m:[39m [32m'Controller Adult Horse'[39m[33m,[39m
     [90m 167 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/trainingController-business-logic.test.mjs:164:18)

  ● 🏋️ INTEGRATION: Training Controller Business Logic - Complete Training Workflow › BUSINESS RULE: canTrain() Function Validation › RETURNS eligible false for non-existent horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Controller Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "f1110248-08c1-4bf3-9775-67ff6e38b8ae"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:27.264Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 162 |[39m
     [90m 163 |[39m     [90m// Create test horses[39m
    [31m[1m>[22m[39m[90m 164 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 165 |[39m       data[33m:[39m {
     [90m 166 |[39m         name[33m:[39m [32m'Controller Adult Horse'[39m[33m,[39m
     [90m 167 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/trainingController-business-logic.test.mjs:164:18)

  ● 🏋️ INTEGRATION: Training Controller Business Logic - Complete Training Workflow › BUSINESS RULE: canTrain() Function Validation › THROWS error for invalid input parameters

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Controller Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "f1110248-08c1-4bf3-9775-67ff6e38b8ae"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:27.264Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 162 |[39m
     [90m 163 |[39m     [90m// Create test horses[39m
    [31m[1m>[22m[39m[90m 164 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 165 |[39m       data[33m:[39m {
     [90m 166 |[39m         name[33m:[39m [32m'Controller Adult Horse'[39m[33m,[39m
     [90m 167 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/trainingController-business-logic.test.mjs:164:18)

  ● 🏋️ INTEGRATION: Training Controller Business Logic - Complete Training Workflow › BUSINESS RULE: trainHorse() Function Complete Workflow › EXECUTES successful training workflow for eligible horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Controller Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "f1110248-08c1-4bf3-9775-67ff6e38b8ae"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:27.264Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 162 |[39m
     [90m 163 |[39m     [90m// Create test horses[39m
    [31m[1m>[22m[39m[90m 164 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 165 |[39m       data[33m:[39m {
     [90m 166 |[39m         name[33m:[39m [32m'Controller Adult Horse'[39m[33m,[39m
     [90m 167 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/trainingController-business-logic.test.mjs:164:18)

  ● 🏋️ INTEGRATION: Training Controller Business Logic - Complete Training Workflow › BUSINESS RULE: trainHorse() Function Complete Workflow › RETURNS error for ineligible horse (age restriction)

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Controller Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "f1110248-08c1-4bf3-9775-67ff6e38b8ae"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:27.264Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 162 |[39m
     [90m 163 |[39m     [90m// Create test horses[39m
    [31m[1m>[22m[39m[90m 164 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 165 |[39m       data[33m:[39m {
     [90m 166 |[39m         name[33m:[39m [32m'Controller Adult Horse'[39m[33m,[39m
     [90m 167 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/trainingController-business-logic.test.mjs:164:18)

  ● 🏋️ INTEGRATION: Training Controller Business Logic - Complete Training Workflow › BUSINESS RULE: trainHorse() Function Complete Workflow › RETURNS error for horse in cooldown

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Controller Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "f1110248-08c1-4bf3-9775-67ff6e38b8ae"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:27.264Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 162 |[39m
     [90m 163 |[39m     [90m// Create test horses[39m
    [31m[1m>[22m[39m[90m 164 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 165 |[39m       data[33m:[39m {
     [90m 166 |[39m         name[33m:[39m [32m'Controller Adult Horse'[39m[33m,[39m
     [90m 167 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/trainingController-business-logic.test.mjs:164:18)

  ● 🏋️ INTEGRATION: Training Controller Business Logic - Complete Training Workflow › BUSINESS RULE: trainHorse() Function Complete Workflow › RETURNS error for non-existent horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Controller Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "f1110248-08c1-4bf3-9775-67ff6e38b8ae"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:27.264Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 162 |[39m
     [90m 163 |[39m     [90m// Create test horses[39m
    [31m[1m>[22m[39m[90m 164 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 165 |[39m       data[33m:[39m {
     [90m 166 |[39m         name[33m:[39m [32m'Controller Adult Horse'[39m[33m,[39m
     [90m 167 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/trainingController-business-logic.test.mjs:164:18)

  ● 🏋️ INTEGRATION: Training Controller Business Logic - Complete Training Workflow › BUSINESS RULE: trainHorse() Function Complete Workflow › THROWS error for invalid discipline

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Controller Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "f1110248-08c1-4bf3-9775-67ff6e38b8ae"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:27.264Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 162 |[39m
     [90m 163 |[39m     [90m// Create test horses[39m
    [31m[1m>[22m[39m[90m 164 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 165 |[39m       data[33m:[39m {
     [90m 166 |[39m         name[33m:[39m [32m'Controller Adult Horse'[39m[33m,[39m
     [90m 167 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/trainingController-business-logic.test.mjs:164:18)

  ● 🏋️ INTEGRATION: Training Controller Business Logic - Complete Training Workflow › BUSINESS RULE: getTrainingStatus() Function Validation › RETURNS accurate status for horse with no training history

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Controller Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "f1110248-08c1-4bf3-9775-67ff6e38b8ae"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:27.264Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 162 |[39m
     [90m 163 |[39m     [90m// Create test horses[39m
    [31m[1m>[22m[39m[90m 164 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 165 |[39m       data[33m:[39m {
     [90m 166 |[39m         name[33m:[39m [32m'Controller Adult Horse'[39m[33m,[39m
     [90m 167 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/trainingController-business-logic.test.mjs:164:18)

  ● 🏋️ INTEGRATION: Training Controller Business Logic - Complete Training Workflow › BUSINESS RULE: getTrainingStatus() Function Validation › RETURNS accurate status for horse with training history

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Controller Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "f1110248-08c1-4bf3-9775-67ff6e38b8ae"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:27.264Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 162 |[39m
     [90m 163 |[39m     [90m// Create test horses[39m
    [31m[1m>[22m[39m[90m 164 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 165 |[39m       data[33m:[39m {
     [90m 166 |[39m         name[33m:[39m [32m'Controller Adult Horse'[39m[33m,[39m
     [90m 167 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/trainingController-business-logic.test.mjs:164:18)

  ● 🏋️ INTEGRATION: Training Controller Business Logic - Complete Training Workflow › BUSINESS RULE: getTrainingStatus() Function Validation › RETURNS error status for non-existent horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Controller Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "f1110248-08c1-4bf3-9775-67ff6e38b8ae"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:27.264Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 162 |[39m
     [90m 163 |[39m     [90m// Create test horses[39m
    [31m[1m>[22m[39m[90m 164 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 165 |[39m       data[33m:[39m {
     [90m 166 |[39m         name[33m:[39m [32m'Controller Adult Horse'[39m[33m,[39m
     [90m 167 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/trainingController-business-logic.test.mjs:164:18)

  ● 🏋️ INTEGRATION: Training Controller Business Logic - Complete Training Workflow › BUSINESS RULE: getTrainableHorses() Function Validation › RETURNS empty array for user with no horses

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Controller Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "f1110248-08c1-4bf3-9775-67ff6e38b8ae"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:27.264Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 162 |[39m
     [90m 163 |[39m     [90m// Create test horses[39m
    [31m[1m>[22m[39m[90m 164 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 165 |[39m       data[33m:[39m {
     [90m 166 |[39m         name[33m:[39m [32m'Controller Adult Horse'[39m[33m,[39m
     [90m 167 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/trainingController-business-logic.test.mjs:164:18)

  ● 🏋️ INTEGRATION: Training Controller Business Logic - Complete Training Workflow › BUSINESS RULE: getTrainableHorses() Function Validation › RETURNS array of trainable horses for user

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Controller Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "f1110248-08c1-4bf3-9775-67ff6e38b8ae"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:27.264Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 162 |[39m
     [90m 163 |[39m     [90m// Create test horses[39m
    [31m[1m>[22m[39m[90m 164 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 165 |[39m       data[33m:[39m {
     [90m 166 |[39m         name[33m:[39m [32m'Controller Adult Horse'[39m[33m,[39m
     [90m 167 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/trainingController-business-logic.test.mjs:164:18)

  ● 🏋️ INTEGRATION: Training Controller Business Logic - Complete Training Workflow › BUSINESS RULE: getTrainableHorses() Function Validation › RETURNS empty array after training (horse in cooldown)

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Controller Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "f1110248-08c1-4bf3-9775-67ff6e38b8ae"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:27.264Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 162 |[39m
     [90m 163 |[39m     [90m// Create test horses[39m
    [31m[1m>[22m[39m[90m 164 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 165 |[39m       data[33m:[39m {
     [90m 166 |[39m         name[33m:[39m [32m'Controller Adult Horse'[39m[33m,[39m
     [90m 167 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/trainingController-business-logic.test.mjs:164:18)

  ● 🏋️ INTEGRATION: Training Controller Business Logic - Complete Training Workflow › API INTEGRATION: trainRouteHandler() Function Validation › PROCESSES valid training request and RETURNS success response

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Controller Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "f1110248-08c1-4bf3-9775-67ff6e38b8ae"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:27.264Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 162 |[39m
     [90m 163 |[39m     [90m// Create test horses[39m
    [31m[1m>[22m[39m[90m 164 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 165 |[39m       data[33m:[39m {
     [90m 166 |[39m         name[33m:[39m [32m'Controller Adult Horse'[39m[33m,[39m
     [90m 167 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/trainingController-business-logic.test.mjs:164:18)

  ● 🏋️ INTEGRATION: Training Controller Business Logic - Complete Training Workflow › API INTEGRATION: trainRouteHandler() Function Validation › RETURNS error response for ineligible horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Controller Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "f1110248-08c1-4bf3-9775-67ff6e38b8ae"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:27.264Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 162 |[39m
     [90m 163 |[39m     [90m// Create test horses[39m
    [31m[1m>[22m[39m[90m 164 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 165 |[39m       data[33m:[39m {
     [90m 166 |[39m         name[33m:[39m [32m'Controller Adult Horse'[39m[33m,[39m
     [90m 167 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/trainingController-business-logic.test.mjs:164:18)

  ● 🏋️ INTEGRATION: Training Controller Business Logic - Complete Training Workflow › API INTEGRATION: trainRouteHandler() Function Validation › RETURNS error response for horse in cooldown

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Controller Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "f1110248-08c1-4bf3-9775-67ff6e38b8ae"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:27.264Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 162 |[39m
     [90m 163 |[39m     [90m// Create test horses[39m
    [31m[1m>[22m[39m[90m 164 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 165 |[39m       data[33m:[39m {
     [90m 166 |[39m         name[33m:[39m [32m'Controller Adult Horse'[39m[33m,[39m
     [90m 167 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/trainingController-business-logic.test.mjs:164:18)

  ● 🏋️ INTEGRATION: Training Controller Business Logic - Complete Training Workflow › API INTEGRATION: trainRouteHandler() Function Validation › RETURNS error response for non-existent horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Controller Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "f1110248-08c1-4bf3-9775-67ff6e38b8ae"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:27.264Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 162 |[39m
     [90m 163 |[39m     [90m// Create test horses[39m
    [31m[1m>[22m[39m[90m 164 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 165 |[39m       data[33m:[39m {
     [90m 166 |[39m         name[33m:[39m [32m'Controller Adult Horse'[39m[33m,[39m
     [90m 167 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/trainingController-business-logic.test.mjs:164:18)

  ● 🏋️ INTEGRATION: Training Controller Business Logic - Complete Training Workflow › API INTEGRATION: trainRouteHandler() Function Validation › RETURNS error response for invalid discipline

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Controller Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "f1110248-08c1-4bf3-9775-67ff6e38b8ae"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:27.264Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 162 |[39m
     [90m 163 |[39m     [90m// Create test horses[39m
    [31m[1m>[22m[39m[90m 164 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 165 |[39m       data[33m:[39m {
     [90m 166 |[39m         name[33m:[39m [32m'Controller Adult Horse'[39m[33m,[39m
     [90m 167 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/trainingController-business-logic.test.mjs:164:18)

[2026-01-28 13:42:27] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:42:27] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:42:27] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:42:27] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:42:27] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:42:27] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:42:27] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:42:27] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:42:28] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:28] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:28] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:28] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:28] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:28] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:28] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:28] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:28] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:28] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:42:28] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 13:42:28] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:28] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:42:28] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:42:28] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:42:28] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:42:28] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:42:28] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 13:42:28] info: [POST] /auth/register
[2026-01-28 13:42:28] warn: [MemoryMonitoring] Memory threshold exceeded: 1086MB
[2026-01-28 13:42:29] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:29] info: [EmailVerification] Created verification token
[2026-01-28 13:42:29] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:42:29] info: [authController.register] Verification email sent
[2026-01-28 13:42:29] info: [POST] /auth/register - 201
[2026-01-28 13:42:29] info: [GET] /auth/csrf-token
[2026-01-28 13:42:29] warn: [MemoryMonitoring] Memory threshold exceeded: 1093MB
[2026-01-28 13:42:29] info: [CSRF] Token generated
[2026-01-28 13:42:29] info: [GET] /auth/csrf-token - 200
[2026-01-28 13:42:29] info: [POST] /auth/register
[2026-01-28 13:42:29] warn: [MemoryMonitoring] Memory threshold exceeded: 1092MB
[2026-01-28 13:42:29] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:29] info: [EmailVerification] Created verification token
[2026-01-28 13:42:29] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:42:29] info: [authController.register] Verification email sent
[2026-01-28 13:42:29] info: [POST] /auth/register - 201
[2026-01-28 13:42:29] info: [GET] /auth/csrf-token
[2026-01-28 13:42:29] warn: [MemoryMonitoring] Memory threshold exceeded: 1092MB
[2026-01-28 13:42:29] info: [CSRF] Token generated
[2026-01-28 13:42:29] info: [GET] /auth/csrf-token - 200
[2026-01-28 13:42:29] info: [POST] /auth/register
[2026-01-28 13:42:29] warn: [MemoryMonitoring] Memory threshold exceeded: 1091MB
[2026-01-28 13:42:29] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:29] info: [EmailVerification] Created verification token
[2026-01-28 13:42:29] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:42:29] info: [authController.register] Verification email sent
[2026-01-28 13:42:29] info: [POST] /auth/register - 201
[2026-01-28 13:42:29] info: [GET] /auth/csrf-token
[2026-01-28 13:42:29] warn: [MemoryMonitoring] Memory threshold exceeded: 1092MB
[2026-01-28 13:42:29] info: [CSRF] Token generated
[2026-01-28 13:42:29] info: [GET] /auth/csrf-token - 200
[2026-01-28 13:42:29] info: [GET] /auth/csrf-token
[2026-01-28 13:42:29] warn: [MemoryMonitoring] Memory threshold exceeded: 1089MB
[2026-01-28 13:42:29] info: [CSRF] Token generated
[2026-01-28 13:42:29] info: [GET] /auth/csrf-token - 200
[2026-01-28 13:42:29] info: [POST] /auth/register
[2026-01-28 13:42:29] warn: [MemoryMonitoring] Memory threshold exceeded: 1087MB
[2026-01-28 13:42:30] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:30] info: [EmailVerification] Created verification token
[2026-01-28 13:42:30] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:42:30] info: [authController.register] Verification email sent
[2026-01-28 13:42:30] info: [POST] /auth/register - 201
[2026-01-28 13:42:30] info: [GET] /auth/csrf-token
[2026-01-28 13:42:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1090MB
[2026-01-28 13:42:30] info: [CSRF] Token generated
[2026-01-28 13:42:30] info: [GET] /auth/csrf-token - 200
[2026-01-28 13:42:30] info: [PUT] /api/users/d207ce8d-1355-4c6c-9958-0d3ede3b77f3
[2026-01-28 13:42:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1087MB
[2026-01-28 13:42:30] info: [auth:ci57j] Starting auth for PUT /users/d207ce8d-1355-4c6c-9958-0d3ede3b77f3
[2026-01-28 13:42:30] info: [auth:ci57j] Token from cookie: true
[2026-01-28 13:42:30] info: [auth:ci57j] Authenticated user d207ce8d-1355-4c6c-9958-0d3ede3b77f3
[2026-01-28 13:42:30] info: [PUT] /api/users/d207ce8d-1355-4c6c-9958-0d3ede3b77f3 - 403
[2026-01-28 13:42:30] info: [POST] /auth/register
[2026-01-28 13:42:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1088MB
[2026-01-28 13:42:30] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:30] info: [EmailVerification] Created verification token
[2026-01-28 13:42:30] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:42:30] info: [authController.register] Verification email sent
[2026-01-28 13:42:30] info: [POST] /auth/register - 201
[2026-01-28 13:42:30] info: [GET] /auth/csrf-token
[2026-01-28 13:42:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1091MB
[2026-01-28 13:42:30] info: [CSRF] Token generated
[2026-01-28 13:42:30] info: [GET] /auth/csrf-token - 200
[2026-01-28 13:42:30] info: [PUT] /api/users/bef7633c-7823-4b2a-9aee-c18d8dbdad0c
[2026-01-28 13:42:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1087MB
[2026-01-28 13:42:30] info: [auth:2hzsr6] Starting auth for PUT /users/bef7633c-7823-4b2a-9aee-c18d8dbdad0c
[2026-01-28 13:42:30] info: [auth:2hzsr6] Token from cookie: true
[2026-01-28 13:42:30] info: [auth:2hzsr6] Authenticated user bef7633c-7823-4b2a-9aee-c18d8dbdad0c
[2026-01-28 13:42:30] info: [PUT] /api/users/bef7633c-7823-4b2a-9aee-c18d8dbdad0c - 403
[2026-01-28 13:42:30] info: [POST] /auth/register
[2026-01-28 13:42:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1088MB
[2026-01-28 13:42:30] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:30] info: [EmailVerification] Created verification token
[2026-01-28 13:42:30] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:42:30] info: [authController.register] Verification email sent
[2026-01-28 13:42:30] info: [POST] /auth/register - 201
[2026-01-28 13:42:31] info: [GET] /auth/csrf-token
[2026-01-28 13:42:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1091MB
[2026-01-28 13:42:31] info: [CSRF] Token generated
[2026-01-28 13:42:31] info: [GET] /auth/csrf-token - 200
[2026-01-28 13:42:31] info: [DELETE] /api/users/4721a03b-0ea4-4d2a-b63b-e121521c281f
[2026-01-28 13:42:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1088MB
[2026-01-28 13:42:31] info: [auth:30qy4e] Starting auth for DELETE /users/4721a03b-0ea4-4d2a-b63b-e121521c281f
[2026-01-28 13:42:31] info: [auth:30qy4e] Token from cookie: true
[2026-01-28 13:42:31] info: [auth:30qy4e] Authenticated user 4721a03b-0ea4-4d2a-b63b-e121521c281f
[2026-01-28 13:42:31] info: [DELETE] /api/users/4721a03b-0ea4-4d2a-b63b-e121521c281f - 403
[2026-01-28 13:42:31] info: [POST] /auth/register
[2026-01-28 13:42:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1090MB
[2026-01-28 13:42:31] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:31] info: [EmailVerification] Created verification token
[2026-01-28 13:42:31] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:42:31] info: [authController.register] Verification email sent
[2026-01-28 13:42:31] info: [POST] /auth/register - 201
[2026-01-28 13:42:31] info: [GET] /auth/csrf-token
[2026-01-28 13:42:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1092MB
[2026-01-28 13:42:31] info: [CSRF] Token generated
[2026-01-28 13:42:31] info: [GET] /auth/csrf-token - 200
[2026-01-28 13:42:31] info: [PATCH] /api/users/d476b558-2722-4f4a-8495-0b1ddf1aad2a
[2026-01-28 13:42:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1088MB
[2026-01-28 13:42:31] info: [auth:eey9tc] Starting auth for PATCH /users/d476b558-2722-4f4a-8495-0b1ddf1aad2a
[2026-01-28 13:42:31] info: [auth:eey9tc] Token from cookie: true
[2026-01-28 13:42:31] info: [auth:eey9tc] Authenticated user d476b558-2722-4f4a-8495-0b1ddf1aad2a
[2026-01-28 13:42:31] info: [PATCH] /api/users/d476b558-2722-4f4a-8495-0b1ddf1aad2a - 403
[2026-01-28 13:42:31] info: [POST] /auth/register
[2026-01-28 13:42:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1090MB
[2026-01-28 13:42:31] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:31] info: [EmailVerification] Created verification token
[2026-01-28 13:42:31] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:42:31] info: [authController.register] Verification email sent
[2026-01-28 13:42:31] info: [POST] /auth/register - 201
[2026-01-28 13:42:31] info: [GET] /api/users/bbfc618e-a774-4dbc-9a28-ebb75de3f2cb
[2026-01-28 13:42:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1091MB
[2026-01-28 13:42:31] info: [auth:yxp7rk] Starting auth for GET /users/bbfc618e-a774-4dbc-9a28-ebb75de3f2cb
[2026-01-28 13:42:31] info: [auth:yxp7rk] Token from cookie: true
[2026-01-28 13:42:31] info: [auth:yxp7rk] Authenticated user bbfc618e-a774-4dbc-9a28-ebb75de3f2cb
[2026-01-28 13:42:31] info: [auth:i0ebo] Starting auth for GET /bbfc618e-a774-4dbc-9a28-ebb75de3f2cb
[2026-01-28 13:42:31] info: [auth:i0ebo] Token from cookie: true
[2026-01-28 13:42:31] info: [auth:i0ebo] Authenticated user bbfc618e-a774-4dbc-9a28-ebb75de3f2cb
[2026-01-28 13:42:31] info: [userRoutes] Self-access validated: user bbfc618e-a774-4dbc-9a28-ebb75de3f2cb accessing own data
[2026-01-28 13:42:31] info: [userController.getUser] Getting user bbfc618e-a774-4dbc-9a28-ebb75de3f2cb
[2026-01-28 13:42:31] info: [GET] /api/users/bbfc618e-a774-4dbc-9a28-ebb75de3f2cb - 200
[2026-01-28 13:42:31] info: [POST] /auth/register
[2026-01-28 13:42:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1094MB
[2026-01-28 13:42:32] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:32] info: [EmailVerification] Created verification token
[2026-01-28 13:42:32] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:42:32] info: [authController.register] Verification email sent
[2026-01-28 13:42:32] info: [POST] /auth/register - 201
[2026-01-28 13:42:32] info: [HEAD] /health
[2026-01-28 13:42:32] warn: [MemoryMonitoring] Memory threshold exceeded: 1096MB
[2026-01-28 13:42:32] info: [HEAD] /health - 200
[2026-01-28 13:42:32] info: [POST] /auth/register
[2026-01-28 13:42:32] warn: [MemoryMonitoring] Memory threshold exceeded: 1092MB
[2026-01-28 13:42:32] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:32] info: [EmailVerification] Created verification token
[2026-01-28 13:42:32] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:42:32] info: [authController.register] Verification email sent
[2026-01-28 13:42:32] info: [POST] /auth/register - 201
[2026-01-28 13:42:32] info: [POST] /auth/register
[2026-01-28 13:42:32] warn: [MemoryMonitoring] Memory threshold exceeded: 1088MB
[2026-01-28 13:42:32] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:32] info: [EmailVerification] Created verification token
[2026-01-28 13:42:32] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:42:32] info: [authController.register] Verification email sent
[2026-01-28 13:42:32] info: [POST] /auth/register - 201
[2026-01-28 13:42:32] info: [POST] /api/users/me
[2026-01-28 13:42:32] warn: [MemoryMonitoring] Memory threshold exceeded: 1088MB
[2026-01-28 13:42:32] info: [auth:xdj0mn] Starting auth for POST /users/me
[2026-01-28 13:42:32] info: [auth:xdj0mn] Token from cookie: true
[2026-01-28 13:42:32] info: [auth:xdj0mn] Authenticated user d72ebea6-a054-45d8-8c50-2484cbd1c9c3
[2026-01-28 13:42:32] info: [POST] /api/users/me - 403
[2026-01-28 13:42:32] info: [POST] /auth/register
[2026-01-28 13:42:32] warn: [MemoryMonitoring] Memory threshold exceeded: 1090MB
[2026-01-28 13:42:33] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:33] info: [EmailVerification] Created verification token
[2026-01-28 13:42:33] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:42:33] info: [authController.register] Verification email sent
[2026-01-28 13:42:33] info: [POST] /auth/register - 201
[2026-01-28 13:42:33] info: [PUT] /api/users/89ccfec6-3687-4c91-9df5-21060a115a3d
[2026-01-28 13:42:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1091MB
[2026-01-28 13:42:33] info: [auth:2551es] Starting auth for PUT /users/89ccfec6-3687-4c91-9df5-21060a115a3d
[2026-01-28 13:42:33] info: [auth:2551es] Token from cookie: true
[2026-01-28 13:42:33] info: [auth:2551es] Authenticated user 89ccfec6-3687-4c91-9df5-21060a115a3d
[2026-01-28 13:42:33] info: [PUT] /api/users/89ccfec6-3687-4c91-9df5-21060a115a3d - 403
[2026-01-28 13:42:33] info: [POST] /auth/register
[2026-01-28 13:42:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1092MB
[2026-01-28 13:42:33] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:33] info: [EmailVerification] Created verification token
[2026-01-28 13:42:33] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:42:33] info: [authController.register] Verification email sent
[2026-01-28 13:42:33] info: [POST] /auth/register - 201
[2026-01-28 13:42:33] info: [DELETE] /api/users/6c2e3ec3-4746-4018-9076-e86a92637a67
[2026-01-28 13:42:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1094MB
[2026-01-28 13:42:33] info: [auth:cp6geu] Starting auth for DELETE /users/6c2e3ec3-4746-4018-9076-e86a92637a67
[2026-01-28 13:42:33] info: [auth:cp6geu] Token from cookie: true
[2026-01-28 13:42:33] info: [auth:cp6geu] Authenticated user 6c2e3ec3-4746-4018-9076-e86a92637a67
[2026-01-28 13:42:33] info: [DELETE] /api/users/6c2e3ec3-4746-4018-9076-e86a92637a67 - 403
[2026-01-28 13:42:33] info: [POST] /auth/register
[2026-01-28 13:42:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1095MB
[2026-01-28 13:42:33] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:33] info: [EmailVerification] Created verification token
[2026-01-28 13:42:33] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:42:33] info: [authController.register] Verification email sent
[2026-01-28 13:42:33] info: [POST] /auth/register - 201
[2026-01-28 13:42:33] info: [GET] /auth/csrf-token
[2026-01-28 13:42:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1097MB
[2026-01-28 13:42:33] info: [CSRF] Token generated
[2026-01-28 13:42:33] info: [GET] /auth/csrf-token - 200
[2026-01-28 13:42:33] info: [PUT] /api/users/e6fa98bb-9b74-49a3-b166-d60dcaa634cc
[2026-01-28 13:42:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1094MB
[2026-01-28 13:42:33] info: [auth:lkcko8] Starting auth for PUT /users/e6fa98bb-9b74-49a3-b166-d60dcaa634cc
[2026-01-28 13:42:33] info: [auth:lkcko8] Token from cookie: true
[2026-01-28 13:42:33] info: [auth:lkcko8] Authenticated user e6fa98bb-9b74-49a3-b166-d60dcaa634cc
[2026-01-28 13:42:33] info: [auth:osadkq] Starting auth for PUT /e6fa98bb-9b74-49a3-b166-d60dcaa634cc
[2026-01-28 13:42:33] info: [auth:osadkq] Token from cookie: true
[2026-01-28 13:42:33] info: [auth:osadkq] Authenticated user e6fa98bb-9b74-49a3-b166-d60dcaa634cc
[2026-01-28 13:42:33] info: [userRoutes] Self-access validated: user e6fa98bb-9b74-49a3-b166-d60dcaa634cc accessing own data
[2026-01-28 13:42:33] info: [userController.updateUser] Updating user e6fa98bb-9b74-49a3-b166-d60dcaa634cc
[2026-01-28 13:42:33] info: [PUT] /api/users/e6fa98bb-9b74-49a3-b166-d60dcaa634cc - 200
[2026-01-28 13:42:33] info: [POST] /auth/register
[2026-01-28 13:42:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1096MB
[2026-01-28 13:42:34] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:34] info: [EmailVerification] Created verification token
[2026-01-28 13:42:34] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:42:34] info: [authController.register] Verification email sent
[2026-01-28 13:42:34] info: [POST] /auth/register - 201
[2026-01-28 13:42:34] info: [GET] /auth/csrf-token
[2026-01-28 13:42:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1098MB
[2026-01-28 13:42:34] info: [CSRF] Token generated
[2026-01-28 13:42:34] info: [GET] /auth/csrf-token - 200
[2026-01-28 13:42:34] info: [GET] /auth/csrf-token
[2026-01-28 13:42:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1095MB
[2026-01-28 13:42:34] info: [CSRF] Token generated
[2026-01-28 13:42:34] info: [GET] /auth/csrf-token - 200
[2026-01-28 13:42:34] info: [GET] /auth/csrf-token
[2026-01-28 13:42:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1092MB
[2026-01-28 13:42:34] info: [CSRF] Token generated
[2026-01-28 13:42:34] info: [GET] /auth/csrf-token - 200
[2026-01-28 13:42:34] info: [POST] /auth/register
[2026-01-28 13:42:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1090MB
[2026-01-28 13:42:34] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:34] info: [EmailVerification] Created verification token
[2026-01-28 13:42:34] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:42:34] info: [authController.register] Verification email sent
[2026-01-28 13:42:34] info: [POST] /auth/register - 201
[2026-01-28 13:42:34] info: [POST] /api/users/me
[2026-01-28 13:42:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1090MB
[2026-01-28 13:42:34] info: [auth:1nx3so] Starting auth for POST /users/me
[2026-01-28 13:42:34] info: [auth:1nx3so] Token from cookie: true
[2026-01-28 13:42:34] info: [auth:1nx3so] Authenticated user fef18a4d-4af7-40c5-805d-ab401de5c5d6
[2026-01-28 13:42:34] info: [POST] /api/users/me - 403
[2026-01-28 13:42:34] info: [POST] /auth/register
[2026-01-28 13:42:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1092MB
[2026-01-28 13:42:35] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:35] info: [EmailVerification] Created verification token
[2026-01-28 13:42:35] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:42:35] info: [authController.register] Verification email sent
[2026-01-28 13:42:35] info: [POST] /auth/register - 201
[2026-01-28 13:42:35] info: [POST] /auth/register
[2026-01-28 13:42:35] warn: [MemoryMonitoring] Memory threshold exceeded: 1099MB
[2026-01-28 13:42:35] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:35] info: [EmailVerification] Created verification token
[2026-01-28 13:42:35] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:42:35] info: [authController.register] Verification email sent
[2026-01-28 13:42:35] info: [POST] /auth/register - 201
[2026-01-28 13:42:35] info: [POST] /auth/login
[2026-01-28 13:42:35] warn: [MemoryMonitoring] Memory threshold exceeded: 1099MB
[2026-01-28 13:42:35] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:35] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 13:42:35] info: [POST] /auth/login - 200
[2026-01-28 13:42:35] info: [POST] /auth/register
[2026-01-28 13:42:35] warn: [MemoryMonitoring] Memory threshold exceeded: 1096MB
[2026-01-28 13:42:35] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:35] info: [EmailVerification] Created verification token
[2026-01-28 13:42:35] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:42:35] info: [authController.register] Verification email sent
[2026-01-28 13:42:35] info: [POST] /auth/register - 201
[2026-01-28 13:42:35] info: [POST] /auth/register
[2026-01-28 13:42:35] warn: [MemoryMonitoring] Memory threshold exceeded: 1099MB
[2026-01-28 13:42:36] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:36] info: [EmailVerification] Created verification token
[2026-01-28 13:42:36] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:42:36] info: [authController.register] Verification email sent
[2026-01-28 13:42:36] info: [POST] /auth/register - 201
[2026-01-28 13:42:36] info: [POST] /auth/register
[2026-01-28 13:42:36] warn: [MemoryMonitoring] Memory threshold exceeded: 1101MB
[2026-01-28 13:42:36] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:36] info: [EmailVerification] Created verification token
[2026-01-28 13:42:36] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:42:36] info: [authController.register] Verification email sent
[2026-01-28 13:42:36] info: [POST] /auth/register - 201
[2026-01-28 13:42:36] info: [POST] /auth/forgot-password
[2026-01-28 13:42:36] warn: [MemoryMonitoring] Memory threshold exceeded: 1101MB
[2026-01-28 13:42:36] warn: 404 - Route not found: POST /auth/forgot-password from ::ffff:127.0.0.1
[2026-01-28 13:42:36] info: [POST] /auth/forgot-password - 404
PASS __tests__/integration/csrf-integration.test.mjs (9.04 s)
  CSRF Protection Integration Tests
    CSRF Token Acquisition
      √ should get CSRF token from /auth/csrf-token endpoint (403 ms)
      √ should set CSRF token in cookie (351 ms)
      √ should generate unique tokens for different requests (366 ms)
    CSRF Protection for State-Changing Operations
      √ should reject POST request without CSRF token (381 ms)
      √ should reject PUT request without CSRF token (367 ms)
      √ should reject DELETE request without CSRF token (372 ms)
      √ should reject PATCH request without CSRF token (359 ms)
    Safe HTTP Methods (No CSRF Required)
      √ should allow GET requests without CSRF token (355 ms)
      √ should allow HEAD requests without CSRF token (376 ms)
      √ should allow OPTIONS requests without CSRF token (323 ms)
    CSRF Error Messages
      √ should provide clear error message for missing token (363 ms)
      √ should include error code in response (370 ms)
      √ should return 403 status for CSRF failures (383 ms)
    CSRF Token Lifecycle
      √ should accept newly generated token (375 ms)
      √ should generate new token on each request to /auth/csrf-token (397 ms)
    CORS and CSRF Integration
      √ should require X-CSRF-Token header for cross-origin requests (344 ms)
      √ should allow CORS preflight without CSRF token (321 ms)
    Public Endpoints (No CSRF)
      √ should not require CSRF token for login (619 ms)
      √ should not require CSRF token for registration (633 ms)
      √ should not require CSRF token for password reset request (338 ms)

[2026-01-28 13:42:36] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:42:36] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:42:36] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:42:36] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:42:37] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:37] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:37] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:37] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:37] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:37] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:37] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:37] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:37] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:37] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:42:37] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 13:42:37] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:37] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:42:37] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:42:37] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:42:37] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:42:37] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:42:37] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 13:42:38] info: [POST] /api/auth/login
[2026-01-28 13:42:38] warn: [MemoryMonitoring] Memory threshold exceeded: 1152MB
[2026-01-28 13:42:38] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:42:38] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:42:38] error: Error Invalid credentials
[2026-01-28 13:42:38] info: [POST] /api/auth/login - 401
[2026-01-28 13:42:38] info: [POST] /api/auth/login
[2026-01-28 13:42:38] warn: [MemoryMonitoring] Memory threshold exceeded: 1154MB
[2026-01-28 13:42:38] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:42:38] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:42:38] error: Error Invalid credentials
[2026-01-28 13:42:38] info: [POST] /api/auth/login - 401
[2026-01-28 13:42:38] info: [POST] /api/auth/login
[2026-01-28 13:42:38] warn: [MemoryMonitoring] Memory threshold exceeded: 1153MB
[2026-01-28 13:42:38] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:42:38] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:42:38] error: Error Invalid credentials
[2026-01-28 13:42:38] info: [POST] /api/auth/login - 401
[2026-01-28 13:42:38] info: [POST] /api/auth/login
[2026-01-28 13:42:38] warn: [MemoryMonitoring] Memory threshold exceeded: 1149MB
[2026-01-28 13:42:38] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:42:38] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:42:38] error: Error Invalid credentials
[2026-01-28 13:42:38] info: [POST] /api/auth/login - 401
[2026-01-28 13:42:38] info: [POST] /api/auth/login
[2026-01-28 13:42:38] warn: [MemoryMonitoring] Memory threshold exceeded: 1148MB
[2026-01-28 13:42:38] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:42:38] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:42:38] error: Error Invalid credentials
[2026-01-28 13:42:38] info: [POST] /api/auth/login - 401
[2026-01-28 13:42:38] info: [POST] /api/auth/login
[2026-01-28 13:42:38] warn: [MemoryMonitoring] Memory threshold exceeded: 1146MB
[2026-01-28 13:42:38] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:42:38] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:42:38] error: Error Invalid credentials
[2026-01-28 13:42:38] info: [POST] /api/auth/login - 401
[2026-01-28 13:42:38] info: [POST] /api/auth/login
[2026-01-28 13:42:38] warn: [MemoryMonitoring] Memory threshold exceeded: 1158MB
[2026-01-28 13:42:38] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:42:38] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:42:38] error: Error Invalid credentials
[2026-01-28 13:42:38] info: [POST] /api/auth/login - 401
[2026-01-28 13:42:38] info: [POST] /api/auth/login
[2026-01-28 13:42:38] warn: [MemoryMonitoring] Memory threshold exceeded: 1154MB
[2026-01-28 13:42:38] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:42:38] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:42:38] error: Error Invalid credentials
[2026-01-28 13:42:38] info: [POST] /api/auth/login - 401
[2026-01-28 13:42:38] info: [POST] /api/auth/login
[2026-01-28 13:42:38] warn: [MemoryMonitoring] Memory threshold exceeded: 1150MB
[2026-01-28 13:42:38] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:42:38] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:42:38] error: Error Invalid credentials
[2026-01-28 13:42:38] info: [POST] /api/auth/login - 401
[2026-01-28 13:42:38] info: [POST] /api/auth/login
[2026-01-28 13:42:38] warn: [MemoryMonitoring] Memory threshold exceeded: 1147MB
[2026-01-28 13:42:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:42:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:42:39] error: Error Invalid credentials
[2026-01-28 13:42:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:42:39] info: [POST] /api/auth/login
[2026-01-28 13:42:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1159MB
[2026-01-28 13:42:39] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 13:42:39] info: [POST] /api/auth/login - 429
[2026-01-28 13:42:39] info: [POST] /api/auth/login
[2026-01-28 13:42:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1153MB
[2026-01-28 13:42:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:42:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:42:39] error: Error Invalid credentials
[2026-01-28 13:42:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:42:39] info: [POST] /api/auth/login
[2026-01-28 13:42:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1149MB
[2026-01-28 13:42:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:42:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:42:39] error: Error Invalid credentials
[2026-01-28 13:42:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:42:39] info: [POST] /api/auth/login
[2026-01-28 13:42:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1148MB
[2026-01-28 13:42:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:42:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:42:39] error: Error Invalid credentials
[2026-01-28 13:42:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:42:39] info: [POST] /api/auth/login
[2026-01-28 13:42:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1159MB
[2026-01-28 13:42:39] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:39] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 13:42:39] info: [POST] /api/auth/login - 200
[2026-01-28 13:42:39] info: [POST] /api/auth/login
[2026-01-28 13:42:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1154MB
[2026-01-28 13:42:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:42:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:42:39] error: Error Invalid credentials
[2026-01-28 13:42:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:42:39] info: [POST] /api/auth/login
[2026-01-28 13:42:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1150MB
[2026-01-28 13:42:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:42:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:42:39] error: Error Invalid credentials
[2026-01-28 13:42:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:42:39] info: [POST] /api/auth/login
[2026-01-28 13:42:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1148MB
[2026-01-28 13:42:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:42:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:42:39] error: Error Invalid credentials
[2026-01-28 13:42:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:42:39] info: [POST] /api/auth/login
[2026-01-28 13:42:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1160MB
[2026-01-28 13:42:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:42:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:42:39] error: Error Invalid credentials
[2026-01-28 13:42:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:42:39] info: [POST] /api/auth/login
[2026-01-28 13:42:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1156MB
[2026-01-28 13:42:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:42:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:42:39] error: Error Invalid credentials
[2026-01-28 13:42:39] info: [POST] /api/auth/login - 401
[2026-01-28 13:42:39] info: [POST] /api/auth/login
[2026-01-28 13:42:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1153MB
[2026-01-28 13:42:39] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 13:42:39] info: [POST] /api/auth/login - 429
[2026-01-28 13:42:39] info: [POST] /api/auth/login
[2026-01-28 13:42:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1149MB
[2026-01-28 13:42:39] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 13:42:39] info: [POST] /api/auth/login - 429
[2026-01-28 13:42:39] info: [POST] /api/auth/login
[2026-01-28 13:42:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1157MB
[2026-01-28 13:42:39] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 13:42:39] info: [POST] /api/auth/login - 429
[2026-01-28 13:42:39] info: [POST] /api/auth/login
[2026-01-28 13:42:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1151MB
[2026-01-28 13:42:39] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 13:42:39] info: [POST] /api/auth/login - 429
[2026-01-28 13:42:39] info: [POST] /api/auth/login
[2026-01-28 13:42:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1159MB
[2026-01-28 13:42:39] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 13:42:39] info: [POST] /api/auth/login - 429
[2026-01-28 13:42:39] info: [POST] /api/auth/login
[2026-01-28 13:42:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1152MB
[2026-01-28 13:42:39] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 13:42:39] info: [POST] /api/auth/login - 429
[2026-01-28 13:42:39] info: [POST] /api/auth/login
[2026-01-28 13:42:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1161MB
[2026-01-28 13:42:40] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:42:40] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:42:40] error: Error Invalid credentials
[2026-01-28 13:42:40] info: [POST] /api/auth/login - 401
[2026-01-28 13:42:40] info: [POST] /api/auth/login
[2026-01-28 13:42:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1158MB
[2026-01-28 13:42:40] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:42:40] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:42:40] error: Error Invalid credentials
[2026-01-28 13:42:40] info: [POST] /api/auth/login - 401
[2026-01-28 13:42:40] info: [POST] /api/auth/login
[2026-01-28 13:42:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1157MB
[2026-01-28 13:42:40] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:42:40] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:42:40] error: Error Invalid credentials
[2026-01-28 13:42:40] info: [POST] /api/auth/login - 401
[2026-01-28 13:42:40] info: [POST] /api/auth/login
[2026-01-28 13:42:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1153MB
[2026-01-28 13:42:40] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:42:40] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:42:40] error: Error Invalid credentials
[2026-01-28 13:42:40] info: [POST] /api/auth/login - 401
[2026-01-28 13:42:40] info: [POST] /api/auth/login
[2026-01-28 13:42:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1150MB
[2026-01-28 13:42:40] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:42:40] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:42:40] error: Error Invalid credentials
[2026-01-28 13:42:40] info: [POST] /api/auth/login - 401
[2026-01-28 13:42:40] info: [POST] /api/auth/login
[2026-01-28 13:42:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1162MB
[2026-01-28 13:42:40] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 13:42:40] info: [POST] /api/auth/login - 429
[2026-01-28 13:42:40] info: [POST] /api/auth/login
[2026-01-28 13:42:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1155MB
[2026-01-28 13:42:40] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:42:40] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:42:40] error: Error Invalid credentials
[2026-01-28 13:42:40] info: [POST] /api/auth/login - 401
[2026-01-28 13:42:40] info: [POST] /api/auth/register
[2026-01-28 13:42:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1153MB
[2026-01-28 13:42:40] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:40] info: [EmailVerification] Created verification token
[2026-01-28 13:42:40] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:42:40] info: [authController.register] Verification email sent
[2026-01-28 13:42:40] info: [POST] /api/auth/register - 201
[2026-01-28 13:42:40] info: [POST] /api/auth/register
[2026-01-28 13:42:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1152MB
[2026-01-28 13:42:41] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:41] info: [EmailVerification] Created verification token
[2026-01-28 13:42:41] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:42:41] info: [authController.register] Verification email sent
[2026-01-28 13:42:41] info: [POST] /api/auth/register - 201
[2026-01-28 13:42:41] info: [POST] /api/auth/register
[2026-01-28 13:42:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1152MB
[2026-01-28 13:42:41] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:41] info: [EmailVerification] Created verification token
[2026-01-28 13:42:41] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:42:41] info: [authController.register] Verification email sent
[2026-01-28 13:42:41] info: [POST] /api/auth/register - 201
[2026-01-28 13:42:41] info: [POST] /api/auth/register
[2026-01-28 13:42:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1152MB
[2026-01-28 13:42:41] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:41] info: [EmailVerification] Created verification token
[2026-01-28 13:42:41] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:42:41] info: [authController.register] Verification email sent
[2026-01-28 13:42:41] info: [POST] /api/auth/register - 201
[2026-01-28 13:42:41] info: [POST] /api/auth/register
[2026-01-28 13:42:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1153MB
[2026-01-28 13:42:42] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:42] info: [EmailVerification] Created verification token
[2026-01-28 13:42:42] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:42:42] info: [authController.register] Verification email sent
[2026-01-28 13:42:42] info: [POST] /api/auth/register - 201
[2026-01-28 13:42:42] info: [POST] /api/auth/register
[2026-01-28 13:42:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1153MB
[2026-01-28 13:42:42] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 13:42:42] info: [POST] /api/auth/register - 429
[2026-01-28 13:42:42] info: [POST] /api/auth/register
[2026-01-28 13:42:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1162MB
[2026-01-28 13:42:42] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:42] info: [EmailVerification] Created verification token
[2026-01-28 13:42:42] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:42:42] info: [authController.register] Verification email sent
[2026-01-28 13:42:42] info: [POST] /api/auth/register - 201
[2026-01-28 13:42:42] info: [POST] /api/auth/login
[2026-01-28 13:42:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1161MB
[2026-01-28 13:42:42] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:42] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 13:42:42] info: [POST] /api/auth/login - 200
[2026-01-28 13:42:42] info: [POST] /api/auth/refresh-token
[2026-01-28 13:42:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1157MB
[2026-01-28 13:42:42] info: [TokenRotation] Token rotation successful
[2026-01-28 13:42:42] info: [authController.refreshToken] Token rotation successful
[2026-01-28 13:42:42] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 13:42:42] info: [POST] /api/auth/refresh-token
[2026-01-28 13:42:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1152MB
[2026-01-28 13:42:42] info: [TokenRotation] Token rotation successful
[2026-01-28 13:42:42] info: [authController.refreshToken] Token rotation successful
[2026-01-28 13:42:42] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 13:42:42] info: [POST] /api/auth/refresh-token
[2026-01-28 13:42:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1161MB
[2026-01-28 13:42:42] info: [TokenRotation] Token rotation successful
[2026-01-28 13:42:42] info: [authController.refreshToken] Token rotation successful
[2026-01-28 13:42:42] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 13:42:42] info: [POST] /api/auth/refresh-token
[2026-01-28 13:42:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1157MB
[2026-01-28 13:42:42] info: [TokenRotation] Token rotation successful
[2026-01-28 13:42:42] info: [authController.refreshToken] Token rotation successful
[2026-01-28 13:42:42] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 13:42:42] info: [POST] /api/auth/refresh-token
[2026-01-28 13:42:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1152MB
[2026-01-28 13:42:42] info: [TokenRotation] Token rotation successful
[2026-01-28 13:42:42] info: [authController.refreshToken] Token rotation successful
[2026-01-28 13:42:42] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 13:42:42] info: [POST] /api/auth/refresh-token
[2026-01-28 13:42:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1162MB
[2026-01-28 13:42:42] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 13:42:42] info: [POST] /api/auth/refresh-token - 429
[2026-01-28 13:42:42] info: [POST] /api/auth/login
[2026-01-28 13:42:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1156MB
[2026-01-28 13:42:43] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:42:43] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:42:43] error: Error Invalid credentials
[2026-01-28 13:42:43] info: [POST] /api/auth/login - 401
[2026-01-28 13:42:43] info: [POST] /api/auth/login
[2026-01-28 13:42:43] warn: [MemoryMonitoring] Memory threshold exceeded: 1153MB
[2026-01-28 13:42:43] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 13:42:43] info: [POST] /api/auth/login - 429
[2026-01-28 13:42:43] info: [POST] /api/auth/login
[2026-01-28 13:42:43] warn: [MemoryMonitoring] Memory threshold exceeded: 1162MB
[2026-01-28 13:42:43] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 13:42:43] info: [POST] /api/auth/login - 429
[2026-01-28 13:42:43] info: [POST] /api/auth/login
[2026-01-28 13:42:43] warn: [MemoryMonitoring] Memory threshold exceeded: 1155MB
[2026-01-28 13:42:43] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 13:42:43] info: [POST] /api/auth/login - 429
[2026-01-28 13:42:43] info: [POST] /api/auth/login
[2026-01-28 13:42:43] warn: [MemoryMonitoring] Memory threshold exceeded: 1164MB
[2026-01-28 13:42:43] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 13:42:43] info: [POST] /api/auth/login - 429
[2026-01-28 13:42:43] info: [POST] /api/auth/login
[2026-01-28 13:42:43] warn: [MemoryMonitoring] Memory threshold exceeded: 1158MB
[2026-01-28 13:42:43] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 13:42:43] info: [POST] /api/auth/login - 429
[2026-01-28 13:42:43] info: [POST] /api/auth/login
[2026-01-28 13:42:43] warn: [MemoryMonitoring] Memory threshold exceeded: 1153MB
[2026-01-28 13:42:43] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 13:42:43] info: [POST] /api/auth/login - 429
[2026-01-28 13:42:43] info: [POST] /api/auth/login
[2026-01-28 13:42:43] warn: [MemoryMonitoring] Memory threshold exceeded: 1162MB
[2026-01-28 13:42:43] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 13:42:43] info: [POST] /api/auth/login - 429
[2026-01-28 13:42:43] info: [POST] /api/auth/login
[2026-01-28 13:42:43] warn: [MemoryMonitoring] Memory threshold exceeded: 1156MB
[2026-01-28 13:42:43] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 13:42:43] info: [POST] /api/auth/login - 429
[2026-01-28 13:42:43] info: [POST] /api/auth/login
[2026-01-28 13:42:43] warn: [MemoryMonitoring] Memory threshold exceeded: 1164MB
[2026-01-28 13:42:43] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 13:42:43] info: [POST] /api/auth/login - 429
[2026-01-28 13:42:43] info: [POST] /api/auth/login
[2026-01-28 13:42:43] warn: [MemoryMonitoring] Memory threshold exceeded: 1157MB
[2026-01-28 13:42:43] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 13:42:43] info: [POST] /api/auth/login - 429
[2026-01-28 13:42:45] info: [POST] /api/auth/login
[2026-01-28 13:42:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1165MB
[2026-01-28 13:42:45] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 13:42:45] info: [POST] /api/auth/login - 429
[2026-01-28 13:42:45] info: [POST] /api/auth/login
[2026-01-28 13:42:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1156MB
[2026-01-28 13:42:45] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 13:42:45] info: [POST] /api/auth/login - 429
[2026-01-28 13:42:45] info: [POST] /api/auth/login
[2026-01-28 13:42:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1162MB
[2026-01-28 13:42:45] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 13:42:45] info: [POST] /api/auth/login - 429
[2026-01-28 13:42:45] info: [POST] /api/auth/login
[2026-01-28 13:42:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1168MB
[2026-01-28 13:42:45] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 13:42:45] info: [POST] /api/auth/login - 429
[2026-01-28 13:42:45] info: [POST] /api/auth/login
[2026-01-28 13:42:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1159MB
[2026-01-28 13:42:45] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 13:42:45] info: [POST] /api/auth/login - 429
[2026-01-28 13:42:45] info: [POST] /api/auth/login
[2026-01-28 13:42:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1164MB
[2026-01-28 13:42:45] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 13:42:45] info: [POST] /api/auth/login - 429
[2026-01-28 13:42:45] info: [POST] /api/auth/login
[2026-01-28 13:42:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1155MB
[2026-01-28 13:42:45] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 13:42:45] info: [POST] /api/auth/login - 429
[2026-01-28 13:42:45] info: [POST] /api/auth/login
[2026-01-28 13:42:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1161MB
[2026-01-28 13:42:45] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 13:42:45] info: [POST] /api/auth/login - 429
[2026-01-28 13:42:45] info: [POST] /api/auth/login
[2026-01-28 13:42:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1167MB
[2026-01-28 13:42:45] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 13:42:45] info: [POST] /api/auth/login - 429
[2026-01-28 13:42:45] info: [POST] /api/auth/login
[2026-01-28 13:42:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1157MB
[2026-01-28 13:42:45] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 13:42:45] info: [POST] /api/auth/login - 429
[2026-01-28 13:42:45] info: [POST] /api/auth/login
[2026-01-28 13:42:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1163MB
[2026-01-28 13:42:45] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 13:42:45] info: [POST] /api/auth/login - 429
[2026-01-28 13:42:45] info: [POST] /api/auth/login
[2026-01-28 13:42:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1156MB
[2026-01-28 13:42:45] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 13:42:45] info: [POST] /api/auth/login - 429
[2026-01-28 13:42:45] info: [POST] /api/auth/login
[2026-01-28 13:42:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1165MB
[2026-01-28 13:42:45] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 13:42:45] info: [POST] /api/auth/login - 429
[2026-01-28 13:42:45] info: [POST] /api/auth/login
[2026-01-28 13:42:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1158MB
[2026-01-28 13:42:45] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 13:42:45] info: [POST] /api/auth/login - 429
[2026-01-28 13:42:45] info: [POST] /api/auth/login
[2026-01-28 13:42:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1166MB
[2026-01-28 13:42:45] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 13:42:45] info: [POST] /api/auth/login - 429
[2026-01-28 13:42:45] info: [POST] /api/auth/login
[2026-01-28 13:42:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1159MB
[2026-01-28 13:42:45] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 13:42:45] info: [POST] /api/auth/login - 429
[2026-01-28 13:42:45] info: [POST] /api/auth/login
[2026-01-28 13:42:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1167MB
[2026-01-28 13:42:45] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 13:42:45] info: [POST] /api/auth/login - 429
[2026-01-28 13:42:45] info: [POST] /api/auth/login
[2026-01-28 13:42:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1160MB
[2026-01-28 13:42:45] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 13:42:45] info: [POST] /api/auth/login - 429
[2026-01-28 13:42:45] info: [POST] /api/auth/login
[2026-01-28 13:42:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1157MB
[2026-01-28 13:42:45] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 13:42:45] info: [POST] /api/auth/login - 429
[2026-01-28 13:42:45] info: [POST] /api/auth/login
[2026-01-28 13:42:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1165MB
[2026-01-28 13:42:45] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 13:42:45] info: [POST] /api/auth/login - 429
[2026-01-28 13:42:45] info: [POST] /api/auth/login
[2026-01-28 13:42:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1159MB
[2026-01-28 13:42:45] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 13:42:45] info: [POST] /api/auth/login - 429
[2026-01-28 13:42:45] info: [POST] /api/auth/login
[2026-01-28 13:42:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1167MB
[2026-01-28 13:42:45] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 13:42:45] info: [POST] /api/auth/login - 429
[2026-01-28 13:42:45] info: [POST] /api/auth/login
[2026-01-28 13:42:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1160MB
[2026-01-28 13:42:45] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 13:42:45] info: [POST] /api/auth/login - 429
[2026-01-28 13:42:45] info: [POST] /api/auth/login
[2026-01-28 13:42:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1168MB
[2026-01-28 13:42:45] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 13:42:45] info: [POST] /api/auth/login - 429
PASS __tests__/integration/rate-limiting.test.mjs (9.062 s)
  Rate Limiting System
    Login Rate Limiting (Brute Force Protection)
      √ should_allow_up_to_5_failed_login_attempts (485 ms)
      √ should_block_6th_failed_login_attempt_with_429 (486 ms)
      √ should_reset_rate_limit_after_successful_authentication (815 ms)
      √ should_include_retry_after_in_rate_limit_response (94 ms)
      √ should_track_rate_limits_per_ip_address (545 ms)
    Registration Rate Limiting
      √ should_rate_limit_registration_attempts (1601 ms)
      √ should_include_rate_limit_headers_on_registration (309 ms)
    Token Refresh Rate Limiting
      √ should_rate_limit_token_refresh_attempts (147 ms)
    Rate Limit Headers
      √ should_include_standard_rate_limit_headers (90 ms)
      √ should_update_ratelimit_remaining_with_each_request (69 ms)
      √ should_provide_accurate_reset_timestamp (19 ms)
    Rate Limit Reset Mechanism
      √ should_reset_rate_limit_after_time_window (2126 ms)
    Concurrent Request Handling
      √ should_handle_concurrent_requests_correctly (169 ms)
    Edge Cases
      √ should_handle_missing_ip_address_gracefully (23 ms)
      √ should_handle_malformed_requests_with_rate_limiting (106 ms)
      √ should_not_leak_user_existence_through_rate_limiting (126 ms)
    Test Environment Configuration
      √ should_respect_test_environment_rate_limit_config (2 ms)

[2026-01-28 13:42:45] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:42:45] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:42:45] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:42:45] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:42:46] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:46] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:46] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:46] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:46] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:46] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:46] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:46] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:46] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:46] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:42:46] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 13:42:46] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:46] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:42:46] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:42:46] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:42:46] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:42:46] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:42:46] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 13:42:46] info: [GET] /api/user/victim-uuid-001
[2026-01-28 13:42:46] warn: [MemoryMonitoring] Memory threshold exceeded: 1214MB
[2026-01-28 13:42:46] info: [auth:k7b6bf] Starting auth for GET /user/victim-uuid-001
[2026-01-28 13:42:46] info: [auth:k7b6bf] Token from cookie: false
[2026-01-28 13:42:46] info: [auth:k7b6bf] Token from header: true
[2026-01-28 13:42:46] info: [auth:k7b6bf] Authenticated user attacker-uuid-999
[2026-01-28 13:42:46] warn: 404 - Route not found: GET /api/user/victim-uuid-001 from ::ffff:127.0.0.1
[2026-01-28 13:42:46] info: [GET] /api/user/victim-uuid-001 - 404
[2026-01-28 13:42:46] info: [GET] /api/user/victim-uuid-001/progress
[2026-01-28 13:42:46] warn: [MemoryMonitoring] Memory threshold exceeded: 1219MB
[2026-01-28 13:42:46] info: [auth:5x2i7n] Starting auth for GET /user/victim-uuid-001/progress
[2026-01-28 13:42:46] info: [auth:5x2i7n] Token from cookie: false
[2026-01-28 13:42:46] info: [auth:5x2i7n] Token from header: true
[2026-01-28 13:42:46] info: [auth:5x2i7n] Authenticated user attacker-uuid-999
[2026-01-28 13:42:46] warn: 404 - Route not found: GET /api/user/victim-uuid-001/progress from ::ffff:127.0.0.1
[2026-01-28 13:42:46] info: [GET] /api/user/victim-uuid-001/progress - 404
[2026-01-28 13:42:46] info: [GET] /api/user/victim-uuid-001/activity
[2026-01-28 13:42:46] warn: [MemoryMonitoring] Memory threshold exceeded: 1220MB
[2026-01-28 13:42:46] info: [auth:etvvia] Starting auth for GET /user/victim-uuid-001/activity
[2026-01-28 13:42:46] info: [auth:etvvia] Token from cookie: false
[2026-01-28 13:42:46] info: [auth:etvvia] Token from header: true
[2026-01-28 13:42:47] info: [auth:etvvia] Authenticated user attacker-uuid-999
[2026-01-28 13:42:47] warn: 404 - Route not found: GET /api/user/victim-uuid-001/activity from ::ffff:127.0.0.1
[2026-01-28 13:42:47] info: [GET] /api/user/victim-uuid-001/activity - 404
[2026-01-28 13:42:47] info: [PUT] /api/user/victim-uuid-001
[2026-01-28 13:42:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1223MB
[2026-01-28 13:42:47] info: [auth:1ya4kp] Starting auth for PUT /user/victim-uuid-001
[2026-01-28 13:42:47] info: [auth:1ya4kp] Token from cookie: false
[2026-01-28 13:42:47] info: [auth:1ya4kp] Token from header: true
[2026-01-28 13:42:47] info: [auth:1ya4kp] Authenticated user attacker-uuid-999
[2026-01-28 13:42:47] info: [PUT] /api/user/victim-uuid-001 - 403
[2026-01-28 13:42:47] info: [DELETE] /api/user/victim-uuid-001
[2026-01-28 13:42:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1225MB
[2026-01-28 13:42:47] info: [auth:varl5r] Starting auth for DELETE /user/victim-uuid-001
[2026-01-28 13:42:47] info: [auth:varl5r] Token from cookie: false
[2026-01-28 13:42:47] info: [auth:varl5r] Token from header: true
[2026-01-28 13:42:47] info: [auth:varl5r] Authenticated user attacker-uuid-999
[2026-01-28 13:42:47] info: [DELETE] /api/user/victim-uuid-001 - 403
[2026-01-28 13:42:47] info: [GET] /api/horses/1
[2026-01-28 13:42:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1213MB
[2026-01-28 13:42:47] info: [auth:b9c0e8j] Starting auth for GET /horses/1
[2026-01-28 13:42:47] info: [auth:b9c0e8j] Token from cookie: false
[2026-01-28 13:42:47] info: [auth:b9c0e8j] Token from header: true
[2026-01-28 13:42:47] info: [auth:b9c0e8j] Authenticated user attacker-uuid-999
[2026-01-28 13:42:47] warn: [ownership] horse 1 not found or not owned by user attacker-uuid-999
[2026-01-28 13:42:47] info: [GET] /api/horses/1 - 404
[2026-01-28 13:42:47] info: [PUT] /api/horses/1
[2026-01-28 13:42:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1215MB
[2026-01-28 13:42:47] info: [auth:ed6cso] Starting auth for PUT /horses/1
[2026-01-28 13:42:47] info: [auth:ed6cso] Token from cookie: false
[2026-01-28 13:42:47] info: [auth:ed6cso] Token from header: true
[2026-01-28 13:42:47] info: [auth:ed6cso] Authenticated user attacker-uuid-999
[2026-01-28 13:42:47] info: [PUT] /api/horses/1 - 403
[2026-01-28 13:42:47] info: [POST] /api/training/train
[2026-01-28 13:42:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1217MB
[2026-01-28 13:42:47] info: [auth:j3ej06] Starting auth for POST /training/train
[2026-01-28 13:42:47] info: [auth:j3ej06] Token from cookie: false
[2026-01-28 13:42:47] info: [auth:j3ej06] Token from header: true
[2026-01-28 13:42:47] info: [auth:j3ej06] Authenticated user attacker-uuid-999
[2026-01-28 13:42:47] info: [POST] /api/training/train - 403
[2026-01-28 13:42:47] info: [POST] /api/competition/enter
[2026-01-28 13:42:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1219MB
[2026-01-28 13:42:47] info: [auth:stn0sl] Starting auth for POST /competition/enter
[2026-01-28 13:42:47] info: [auth:stn0sl] Token from cookie: false
[2026-01-28 13:42:47] info: [auth:stn0sl] Token from header: true
[2026-01-28 13:42:47] info: [auth:stn0sl] Authenticated user attacker-uuid-999
[2026-01-28 13:42:47] info: [POST] /api/competition/enter - 403
[2026-01-28 13:42:47] info: [GET] /api/competition/horse/1/results
[2026-01-28 13:42:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1220MB
[2026-01-28 13:42:47] info: [auth:83wnn] Starting auth for GET /competition/horse/1/results
[2026-01-28 13:42:47] info: [auth:83wnn] Token from cookie: false
[2026-01-28 13:42:47] info: [auth:83wnn] Token from header: true
[2026-01-28 13:42:47] info: [auth:83wnn] Authenticated user attacker-uuid-999
[2026-01-28 13:42:47] info: [auth:x1hheg] Starting auth for GET /horse/1/results
[2026-01-28 13:42:47] info: [auth:x1hheg] Token from cookie: false
[2026-01-28 13:42:47] info: [auth:x1hheg] Token from header: true
[2026-01-28 13:42:47] info: [auth:x1hheg] Authenticated user attacker-uuid-999
[2026-01-28 13:42:47] warn: [ownership] horse 1 not found or not owned by user attacker-uuid-999
[2026-01-28 13:42:47] info: [GET] /api/competition/horse/1/results - 404
[2026-01-28 13:42:47] info: [GET] /api/grooms/user/victim-uuid-001
[2026-01-28 13:42:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1222MB
[2026-01-28 13:42:47] info: [auth:62o92a] Starting auth for GET /grooms/user/victim-uuid-001
[2026-01-28 13:42:47] info: [auth:62o92a] Token from cookie: false
[2026-01-28 13:42:47] info: [auth:62o92a] Token from header: true
[2026-01-28 13:42:47] info: [auth:62o92a] Authenticated user attacker-uuid-999
[2026-01-28 13:42:47] info: [auth:f1pvg7] Starting auth for GET /user/victim-uuid-001
[2026-01-28 13:42:47] info: [auth:f1pvg7] Token from cookie: false
[2026-01-28 13:42:47] info: [auth:f1pvg7] Token from header: true
[2026-01-28 13:42:47] info: [auth:f1pvg7] Authenticated user attacker-uuid-999
[2026-01-28 13:42:47] warn: [groomRoutes] Self-access violation: user attacker-uuid-999 attempted to access grooms for user victim-uuid-001
[2026-01-28 13:42:47] info: [GET] /api/grooms/user/victim-uuid-001 - 404
[2026-01-28 13:42:47] info: [POST] /api/grooms/assign
[2026-01-28 13:42:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1216MB
[2026-01-28 13:42:47] info: [auth:brcbqt] Starting auth for POST /grooms/assign
[2026-01-28 13:42:47] info: [auth:brcbqt] Token from cookie: false
[2026-01-28 13:42:47] info: [auth:brcbqt] Token from header: true
[2026-01-28 13:42:47] info: [auth:brcbqt] Authenticated user attacker-uuid-999
[2026-01-28 13:42:47] info: [POST] /api/grooms/assign - 403
[2026-01-28 13:42:47] info: [POST] /api/breeding/breed
[2026-01-28 13:42:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1219MB
[2026-01-28 13:42:47] info: [auth:6wlc5n] Starting auth for POST /breeding/breed
[2026-01-28 13:42:47] info: [auth:6wlc5n] Token from cookie: false
[2026-01-28 13:42:47] info: [auth:6wlc5n] Token from header: true
[2026-01-28 13:42:47] info: [auth:6wlc5n] Authenticated user attacker-uuid-999
[2026-01-28 13:42:47] info: [POST] /api/breeding/breed - 403
[2026-01-28 13:42:47] info: [GET] /api/admin/users
[2026-01-28 13:42:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1219MB
[2026-01-28 13:42:47] info: [auth:nzj6j] Starting auth for GET /users
[2026-01-28 13:42:47] info: [auth:nzj6j] Token from cookie: false
[2026-01-28 13:42:47] info: [auth:nzj6j] Token from header: true
[2026-01-28 13:42:47] info: [auth:nzj6j] Authenticated user attacker-uuid-999
[2026-01-28 13:42:47] warn: [auth] User attacker-uuid-999 with role 'user' attempted to access GET /users (requires: admin)
[2026-01-28 13:42:47] info: [GET] /api/admin/users - 403
[2026-01-28 13:42:47] info: [POST] /api/admin/users/ban
[2026-01-28 13:42:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1223MB
[2026-01-28 13:42:47] info: [auth:ij72ck] Starting auth for POST /users/ban
[2026-01-28 13:42:47] info: [auth:ij72ck] Token from cookie: false
[2026-01-28 13:42:47] info: [auth:ij72ck] Token from header: true
[2026-01-28 13:42:47] info: [auth:ij72ck] Authenticated user attacker-uuid-999
[2026-01-28 13:42:47] warn: [auth] User attacker-uuid-999 with role 'user' attempted to access POST /users/ban (requires: admin)
[2026-01-28 13:42:47] info: [POST] /api/admin/users/ban - 403
[2026-01-28 13:42:47] info: [POST] /api/auth/register
[2026-01-28 13:42:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1222MB
[2026-01-28 13:42:47] info: [POST] /api/auth/register
[2026-01-28 13:42:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1227MB
[2026-01-28 13:42:47] info: [POST] /api/auth/register
[2026-01-28 13:42:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1217MB
[2026-01-28 13:42:47] info: [POST] /api/auth/register
[2026-01-28 13:42:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1221MB
[2026-01-28 13:42:47] info: [POST] /api/auth/register
[2026-01-28 13:42:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1226MB
[2026-01-28 13:42:47] info: [POST] /api/auth/register
[2026-01-28 13:42:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1231MB
[2026-01-28 13:42:47] info: [POST] /api/auth/register
[2026-01-28 13:42:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1220MB
[2026-01-28 13:42:47] info: [POST] /api/auth/register
[2026-01-28 13:42:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1225MB
[2026-01-28 13:42:47] info: [POST] /api/auth/register
[2026-01-28 13:42:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1230MB
[2026-01-28 13:42:47] info: [POST] /api/auth/register
[2026-01-28 13:42:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1219MB
[2026-01-28 13:42:50] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:50] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:50] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:50] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:50] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:50] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:50] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:50] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:50] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:50] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:50] info: [EmailVerification] Created verification token
[2026-01-28 13:42:50] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:42:50] info: [authController.register] Verification email sent
[2026-01-28 13:42:50] warn: [Performance] Slow request detected: POST /register took 2920ms
[2026-01-28 13:42:50] info: [EmailVerification] Created verification token
[2026-01-28 13:42:50] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:42:50] info: [authController.register] Verification email sent
[2026-01-28 13:42:50] warn: [Performance] Slow request detected: POST /register took 2860ms
[2026-01-28 13:42:50] info: [EmailVerification] Created verification token
[2026-01-28 13:42:50] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:42:50] info: [authController.register] Verification email sent
[2026-01-28 13:42:50] warn: [Performance] Slow request detected: POST /register took 2870ms
[2026-01-28 13:42:50] info: [EmailVerification] Created verification token
[2026-01-28 13:42:50] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:42:50] info: [authController.register] Verification email sent
[2026-01-28 13:42:50] warn: [Performance] Slow request detected: POST /register took 2910ms
[2026-01-28 13:42:50] info: [EmailVerification] Created verification token
[2026-01-28 13:42:50] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:42:50] info: [authController.register] Verification email sent
[2026-01-28 13:42:50] warn: [Performance] Slow request detected: POST /register took 2924ms
[2026-01-28 13:42:50] info: [EmailVerification] Created verification token
[2026-01-28 13:42:50] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:42:50] info: [authController.register] Verification email sent
[2026-01-28 13:42:50] warn: [Performance] Slow request detected: POST /register took 2898ms
[2026-01-28 13:42:50] info: [EmailVerification] Created verification token
[2026-01-28 13:42:50] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:42:50] info: [authController.register] Verification email sent
[2026-01-28 13:42:50] warn: [Performance] Slow request detected: POST /register took 2893ms
[2026-01-28 13:42:50] info: [EmailVerification] Created verification token
[2026-01-28 13:42:50] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:42:50] info: [authController.register] Verification email sent
[2026-01-28 13:42:50] warn: [Performance] Slow request detected: POST /register took 2912ms
[2026-01-28 13:42:50] info: [EmailVerification] Created verification token
[2026-01-28 13:42:50] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:42:50] info: [authController.register] Verification email sent
[2026-01-28 13:42:50] warn: [Performance] Slow request detected: POST /register took 2922ms
[2026-01-28 13:42:50] info: [POST] /api/auth/register - 201
[2026-01-28 13:42:50] info: [POST] /api/auth/register - 201
[2026-01-28 13:42:50] info: [POST] /api/auth/register - 201
[2026-01-28 13:42:50] info: [POST] /api/auth/register - 201
[2026-01-28 13:42:50] info: [POST] /api/auth/register - 201
[2026-01-28 13:42:50] info: [POST] /api/auth/register - 201
[2026-01-28 13:42:50] info: [POST] /api/auth/register - 201
[2026-01-28 13:42:50] info: [POST] /api/auth/register - 201
[2026-01-28 13:42:50] info: [POST] /api/auth/register - 201
[2026-01-28 13:42:50] info: [EmailVerification] Created verification token
[2026-01-28 13:42:50] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:42:50] info: [authController.register] Verification email sent
[2026-01-28 13:42:50] warn: [Performance] Slow request detected: POST /register took 2911ms
[2026-01-28 13:42:50] info: [POST] /api/auth/register - 201
[2026-01-28 13:42:50] info: [POST] /api/auth/login
[2026-01-28 13:42:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1223MB
[2026-01-28 13:42:50] info: [POST] /api/auth/login
[2026-01-28 13:42:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1228MB
[2026-01-28 13:42:50] info: [POST] /api/auth/login
[2026-01-28 13:42:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1232MB
[2026-01-28 13:42:50] info: [POST] /api/auth/login
[2026-01-28 13:42:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1222MB
[2026-01-28 13:42:50] info: [POST] /api/auth/login
[2026-01-28 13:42:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1227MB
[2026-01-28 13:42:50] info: [POST] /api/auth/login
[2026-01-28 13:42:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1231MB
[2026-01-28 13:42:50] info: [POST] /api/auth/login
[2026-01-28 13:42:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1221MB
[2026-01-28 13:42:50] info: [POST] /api/auth/login
[2026-01-28 13:42:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1225MB
[2026-01-28 13:42:50] info: [POST] /api/auth/login
[2026-01-28 13:42:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1230MB
[2026-01-28 13:42:50] info: [POST] /api/auth/login
[2026-01-28 13:42:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1220MB
[2026-01-28 13:42:50] info: [POST] /api/auth/login
[2026-01-28 13:42:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1224MB
[2026-01-28 13:42:50] info: [POST] /api/auth/login
[2026-01-28 13:42:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1229MB
[2026-01-28 13:42:50] info: [POST] /api/auth/login
[2026-01-28 13:42:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1234MB
[2026-01-28 13:42:50] info: [POST] /api/auth/login
[2026-01-28 13:42:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1223MB
[2026-01-28 13:42:50] info: [POST] /api/auth/login
[2026-01-28 13:42:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1228MB
[2026-01-28 13:42:50] info: [POST] /api/auth/login
[2026-01-28 13:42:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1233MB
[2026-01-28 13:42:50] info: [POST] /api/auth/login
[2026-01-28 13:42:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1222MB
[2026-01-28 13:42:50] info: [POST] /api/auth/login
[2026-01-28 13:42:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1227MB
[2026-01-28 13:42:50] info: [POST] /api/auth/login
[2026-01-28 13:42:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1231MB
[2026-01-28 13:42:50] info: [POST] /api/auth/login
[2026-01-28 13:42:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1221MB
[2026-01-28 13:42:50] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:42:50] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:42:50] error: Error Invalid credentials
[2026-01-28 13:42:50] info: [POST] /api/auth/login - 401
[2026-01-28 13:42:50] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:42:50] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:42:50] error: Error Invalid credentials
[2026-01-28 13:42:50] info: [POST] /api/auth/login - 401
[2026-01-28 13:42:50] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:42:50] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:42:50] error: Error Invalid credentials
[2026-01-28 13:42:50] info: [POST] /api/auth/login - 401
[2026-01-28 13:42:50] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:42:50] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:42:50] error: Error Invalid credentials
[2026-01-28 13:42:50] info: [POST] /api/auth/login - 401
[2026-01-28 13:42:50] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:42:50] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:42:50] error: Error Invalid credentials
[2026-01-28 13:42:50] info: [POST] /api/auth/login - 401
[2026-01-28 13:42:50] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:42:50] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:42:50] error: Error Invalid credentials
[2026-01-28 13:42:50] info: [POST] /api/auth/login - 401
[2026-01-28 13:42:50] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:42:50] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:42:50] error: Error Invalid credentials
[2026-01-28 13:42:50] info: [POST] /api/auth/login - 401
[2026-01-28 13:42:50] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:42:50] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:42:50] error: Error Invalid credentials
[2026-01-28 13:42:50] info: [POST] /api/auth/login - 401
[2026-01-28 13:42:50] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:42:50] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:42:50] error: Error Invalid credentials
[2026-01-28 13:42:50] info: [POST] /api/auth/login - 401
[2026-01-28 13:42:50] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:42:50] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:42:50] error: Error Invalid credentials
[2026-01-28 13:42:50] info: [POST] /api/auth/login - 401
[2026-01-28 13:42:50] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:42:50] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:42:50] error: Error Invalid credentials
[2026-01-28 13:42:50] info: [POST] /api/auth/login - 401
[2026-01-28 13:42:50] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:42:50] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:42:50] error: Error Invalid credentials
[2026-01-28 13:42:50] info: [POST] /api/auth/login - 401
[2026-01-28 13:42:50] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:42:50] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:42:50] error: Error Invalid credentials
[2026-01-28 13:42:50] info: [POST] /api/auth/login - 401
[2026-01-28 13:42:50] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:42:50] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:42:50] error: Error Invalid credentials
[2026-01-28 13:42:50] info: [POST] /api/auth/login - 401
[2026-01-28 13:42:50] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:42:50] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:42:50] error: Error Invalid credentials
[2026-01-28 13:42:50] info: [POST] /api/auth/login - 401
[2026-01-28 13:42:50] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:42:50] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:42:50] error: Error Invalid credentials
[2026-01-28 13:42:50] info: [POST] /api/auth/login - 401
[2026-01-28 13:42:50] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:42:50] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:42:50] error: Error Invalid credentials
[2026-01-28 13:42:50] info: [POST] /api/auth/login - 401
[2026-01-28 13:42:50] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:42:50] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:42:50] error: Error Invalid credentials
[2026-01-28 13:42:50] info: [POST] /api/auth/login - 401
[2026-01-28 13:42:50] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:42:50] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:42:50] error: Error Invalid credentials
[2026-01-28 13:42:50] info: [POST] /api/auth/login - 401
[2026-01-28 13:42:50] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:42:50] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:42:50] error: Error Invalid credentials
[2026-01-28 13:42:50] info: [POST] /api/auth/login - 401
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 13:42:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1223MB
[2026-01-28 13:42:51] info: [auth:0om0x] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 13:42:51] info: [auth:0om0x] Token from cookie: false
[2026-01-28 13:42:51] info: [auth:0om0x] Token from header: true
[2026-01-28 13:42:51] info: [auth:0om0x] Authenticated user attacker-uuid-999
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 13:42:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1237MB
[2026-01-28 13:42:51] info: [auth:f9acs] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 13:42:51] info: [auth:f9acs] Token from cookie: false
[2026-01-28 13:42:51] info: [auth:f9acs] Token from header: true
[2026-01-28 13:42:51] info: [auth:f9acs] Authenticated user attacker-uuid-999
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 13:42:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1236MB
[2026-01-28 13:42:51] info: [auth:j21ujp] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 13:42:51] info: [auth:j21ujp] Token from cookie: false
[2026-01-28 13:42:51] info: [auth:j21ujp] Token from header: true
[2026-01-28 13:42:51] info: [auth:j21ujp] Authenticated user attacker-uuid-999
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 13:42:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1234MB
[2026-01-28 13:42:51] info: [auth:h01rf] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 13:42:51] info: [auth:h01rf] Token from cookie: false
[2026-01-28 13:42:51] info: [auth:h01rf] Token from header: true
[2026-01-28 13:42:51] info: [auth:h01rf] Authenticated user attacker-uuid-999
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 13:42:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1232MB
[2026-01-28 13:42:51] info: [auth:abjld] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 13:42:51] info: [auth:abjld] Token from cookie: false
[2026-01-28 13:42:51] info: [auth:abjld] Token from header: true
[2026-01-28 13:42:51] info: [auth:abjld] Authenticated user attacker-uuid-999
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 13:42:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1231MB
[2026-01-28 13:42:51] info: [auth:gr9scs] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 13:42:51] info: [auth:gr9scs] Token from cookie: false
[2026-01-28 13:42:51] info: [auth:gr9scs] Token from header: true
[2026-01-28 13:42:51] info: [auth:gr9scs] Authenticated user attacker-uuid-999
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 13:42:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1229MB
[2026-01-28 13:42:51] info: [auth:q2u35q] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 13:42:51] info: [auth:q2u35q] Token from cookie: false
[2026-01-28 13:42:51] info: [auth:q2u35q] Token from header: true
[2026-01-28 13:42:51] info: [auth:q2u35q] Authenticated user attacker-uuid-999
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 13:42:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1227MB
[2026-01-28 13:42:51] info: [auth:07o71s] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 13:42:51] info: [auth:07o71s] Token from cookie: false
[2026-01-28 13:42:51] info: [auth:07o71s] Token from header: true
[2026-01-28 13:42:51] info: [auth:07o71s] Authenticated user attacker-uuid-999
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 13:42:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1225MB
[2026-01-28 13:42:51] info: [auth:aswth7] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 13:42:51] info: [auth:aswth7] Token from cookie: false
[2026-01-28 13:42:51] info: [auth:aswth7] Token from header: true
[2026-01-28 13:42:51] info: [auth:aswth7] Authenticated user attacker-uuid-999
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 13:42:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1223MB
[2026-01-28 13:42:51] info: [auth:pvqnq] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 13:42:51] info: [auth:pvqnq] Token from cookie: false
[2026-01-28 13:42:51] info: [auth:pvqnq] Token from header: true
[2026-01-28 13:42:51] info: [auth:pvqnq] Authenticated user attacker-uuid-999
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 13:42:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1237MB
[2026-01-28 13:42:51] info: [auth:vnqp4n] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 13:42:51] info: [auth:vnqp4n] Token from cookie: false
[2026-01-28 13:42:51] info: [auth:vnqp4n] Token from header: true
[2026-01-28 13:42:51] info: [auth:vnqp4n] Authenticated user attacker-uuid-999
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 13:42:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1235MB
[2026-01-28 13:42:51] info: [auth:4oxtej] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 13:42:51] info: [auth:4oxtej] Token from cookie: false
[2026-01-28 13:42:51] info: [auth:4oxtej] Token from header: true
[2026-01-28 13:42:51] info: [auth:4oxtej] Authenticated user attacker-uuid-999
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 13:42:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1234MB
[2026-01-28 13:42:51] info: [auth:j4oos5] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 13:42:51] info: [auth:j4oos5] Token from cookie: false
[2026-01-28 13:42:51] info: [auth:j4oos5] Token from header: true
[2026-01-28 13:42:51] info: [auth:j4oos5] Authenticated user attacker-uuid-999
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 13:42:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1232MB
[2026-01-28 13:42:51] info: [auth:shl58p] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 13:42:51] info: [auth:shl58p] Token from cookie: false
[2026-01-28 13:42:51] info: [auth:shl58p] Token from header: true
[2026-01-28 13:42:51] info: [auth:shl58p] Authenticated user attacker-uuid-999
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 13:42:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1230MB
[2026-01-28 13:42:51] info: [auth:wz9gup] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 13:42:51] info: [auth:wz9gup] Token from cookie: false
[2026-01-28 13:42:51] info: [auth:wz9gup] Token from header: true
[2026-01-28 13:42:51] info: [auth:wz9gup] Authenticated user attacker-uuid-999
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 13:42:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1228MB
[2026-01-28 13:42:51] info: [auth:rhkd3] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 13:42:51] info: [auth:rhkd3] Token from cookie: false
[2026-01-28 13:42:51] info: [auth:rhkd3] Token from header: true
[2026-01-28 13:42:51] info: [auth:rhkd3] Authenticated user attacker-uuid-999
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 13:42:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1227MB
[2026-01-28 13:42:51] info: [auth:il6zzt] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 13:42:51] info: [auth:il6zzt] Token from cookie: false
[2026-01-28 13:42:51] info: [auth:il6zzt] Token from header: true
[2026-01-28 13:42:51] info: [auth:il6zzt] Authenticated user attacker-uuid-999
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 13:42:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1225MB
[2026-01-28 13:42:51] info: [auth:qf14gp] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 13:42:51] info: [auth:qf14gp] Token from cookie: false
[2026-01-28 13:42:51] info: [auth:qf14gp] Token from header: true
[2026-01-28 13:42:51] info: [auth:qf14gp] Authenticated user attacker-uuid-999
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 13:42:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1239MB
[2026-01-28 13:42:51] info: [auth:jqi3he] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 13:42:51] info: [auth:jqi3he] Token from cookie: false
[2026-01-28 13:42:51] info: [auth:jqi3he] Token from header: true
[2026-01-28 13:42:51] info: [auth:jqi3he] Authenticated user attacker-uuid-999
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 13:42:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1237MB
[2026-01-28 13:42:51] info: [auth:38yxz8] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 13:42:51] info: [auth:38yxz8] Token from cookie: false
[2026-01-28 13:42:51] info: [auth:38yxz8] Token from header: true
[2026-01-28 13:42:51] info: [auth:38yxz8] Authenticated user attacker-uuid-999
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 13:42:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1235MB
[2026-01-28 13:42:51] info: [auth:zv3c1c] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 13:42:51] info: [auth:zv3c1c] Token from cookie: false
[2026-01-28 13:42:51] info: [auth:zv3c1c] Token from header: true
[2026-01-28 13:42:51] info: [auth:zv3c1c] Authenticated user attacker-uuid-999
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 13:42:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1233MB
[2026-01-28 13:42:51] info: [auth:rjx40b] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 13:42:51] info: [auth:rjx40b] Token from cookie: false
[2026-01-28 13:42:51] info: [auth:rjx40b] Token from header: true
[2026-01-28 13:42:51] info: [auth:rjx40b] Authenticated user attacker-uuid-999
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 13:42:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1231MB
[2026-01-28 13:42:51] info: [auth:ptc2zs] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 13:42:51] info: [auth:ptc2zs] Token from cookie: false
[2026-01-28 13:42:51] info: [auth:ptc2zs] Token from header: true
[2026-01-28 13:42:51] info: [auth:ptc2zs] Authenticated user attacker-uuid-999
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 13:42:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1230MB
[2026-01-28 13:42:51] info: [auth:0yg73u] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 13:42:51] info: [auth:0yg73u] Token from cookie: false
[2026-01-28 13:42:51] info: [auth:0yg73u] Token from header: true
[2026-01-28 13:42:51] info: [auth:0yg73u] Authenticated user attacker-uuid-999
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 13:42:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1228MB
[2026-01-28 13:42:51] info: [auth:zr6b] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 13:42:51] info: [auth:zr6b] Token from cookie: false
[2026-01-28 13:42:51] info: [auth:zr6b] Token from header: true
[2026-01-28 13:42:51] info: [auth:zr6b] Authenticated user attacker-uuid-999
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 13:42:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1226MB
[2026-01-28 13:42:51] info: [auth:hkkc15] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 13:42:51] info: [auth:hkkc15] Token from cookie: false
[2026-01-28 13:42:51] info: [auth:hkkc15] Token from header: true
[2026-01-28 13:42:51] info: [auth:hkkc15] Authenticated user attacker-uuid-999
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 13:42:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1240MB
[2026-01-28 13:42:51] info: [auth:akcee] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 13:42:51] info: [auth:akcee] Token from cookie: false
[2026-01-28 13:42:51] info: [auth:akcee] Token from header: true
[2026-01-28 13:42:51] info: [auth:akcee] Authenticated user attacker-uuid-999
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 13:42:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1238MB
[2026-01-28 13:42:51] info: [auth:py8s1d] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 13:42:51] info: [auth:py8s1d] Token from cookie: false
[2026-01-28 13:42:51] info: [auth:py8s1d] Token from header: true
[2026-01-28 13:42:51] info: [auth:py8s1d] Authenticated user attacker-uuid-999
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 13:42:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1236MB
[2026-01-28 13:42:51] info: [auth:0evfwf] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 13:42:51] info: [auth:0evfwf] Token from cookie: false
[2026-01-28 13:42:51] info: [auth:0evfwf] Token from header: true
[2026-01-28 13:42:51] info: [auth:0evfwf] Authenticated user attacker-uuid-999
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 13:42:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1234MB
[2026-01-28 13:42:51] info: [auth:dm7mba] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 13:42:51] info: [auth:dm7mba] Token from cookie: false
[2026-01-28 13:42:51] info: [auth:dm7mba] Token from header: true
[2026-01-28 13:42:51] info: [auth:dm7mba] Authenticated user attacker-uuid-999
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 13:42:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1233MB
[2026-01-28 13:42:51] info: [auth:i8qt1i] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 13:42:51] info: [auth:i8qt1i] Token from cookie: false
[2026-01-28 13:42:51] info: [auth:i8qt1i] Token from header: true
[2026-01-28 13:42:51] info: [auth:i8qt1i] Authenticated user attacker-uuid-999
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 13:42:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1231MB
[2026-01-28 13:42:51] info: [auth:6kovb] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 13:42:51] info: [auth:6kovb] Token from cookie: false
[2026-01-28 13:42:51] info: [auth:6kovb] Token from header: true
[2026-01-28 13:42:51] info: [auth:6kovb] Authenticated user attacker-uuid-999
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 13:42:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1229MB
[2026-01-28 13:42:51] info: [auth:bi6zbj] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 13:42:51] info: [auth:bi6zbj] Token from cookie: false
[2026-01-28 13:42:51] info: [auth:bi6zbj] Token from header: true
[2026-01-28 13:42:51] info: [auth:bi6zbj] Authenticated user attacker-uuid-999
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 13:42:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1227MB
[2026-01-28 13:42:51] info: [auth:6d96sb] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 13:42:51] info: [auth:6d96sb] Token from cookie: false
[2026-01-28 13:42:51] info: [auth:6d96sb] Token from header: true
[2026-01-28 13:42:51] info: [auth:6d96sb] Authenticated user attacker-uuid-999
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 13:42:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1241MB
[2026-01-28 13:42:51] info: [auth:nwavo] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 13:42:51] info: [auth:nwavo] Token from cookie: false
[2026-01-28 13:42:51] info: [auth:nwavo] Token from header: true
[2026-01-28 13:42:51] info: [auth:nwavo] Authenticated user attacker-uuid-999
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 13:42:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1239MB
[2026-01-28 13:42:51] info: [auth:m2bvzn] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 13:42:51] info: [auth:m2bvzn] Token from cookie: false
[2026-01-28 13:42:51] info: [auth:m2bvzn] Token from header: true
[2026-01-28 13:42:51] info: [auth:m2bvzn] Authenticated user attacker-uuid-999
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 13:42:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1238MB
[2026-01-28 13:42:51] info: [auth:7r5h4] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 13:42:51] info: [auth:7r5h4] Token from cookie: false
[2026-01-28 13:42:51] info: [auth:7r5h4] Token from header: true
[2026-01-28 13:42:51] info: [auth:7r5h4] Authenticated user attacker-uuid-999
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 13:42:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1236MB
[2026-01-28 13:42:51] info: [auth:ynw4hh] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 13:42:51] info: [auth:ynw4hh] Token from cookie: false
[2026-01-28 13:42:51] info: [auth:ynw4hh] Token from header: true
[2026-01-28 13:42:51] info: [auth:ynw4hh] Authenticated user attacker-uuid-999
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 13:42:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1234MB
[2026-01-28 13:42:51] info: [auth:2jvtxd] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 13:42:51] info: [auth:2jvtxd] Token from cookie: false
[2026-01-28 13:42:51] info: [auth:2jvtxd] Token from header: true
[2026-01-28 13:42:51] info: [auth:2jvtxd] Authenticated user attacker-uuid-999
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 13:42:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1232MB
[2026-01-28 13:42:51] info: [auth:0fp0gn] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 13:42:51] info: [auth:0fp0gn] Token from cookie: false
[2026-01-28 13:42:51] info: [auth:0fp0gn] Token from header: true
[2026-01-28 13:42:51] info: [auth:0fp0gn] Authenticated user attacker-uuid-999
[2026-01-28 13:42:51] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 13:42:51] info: [GET] /api/user/attacker-uuid-999/progress
[2026-01-28 13:42:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1229MB
[2026-01-28 13:42:51] info: [auth:u99hnr] Starting auth for GET /user/attacker-uuid-999/progress
[2026-01-28 13:42:51] info: [auth:u99hnr] Token from cookie: false
[2026-01-28 13:42:51] info: [auth:u99hnr] Token from header: true
[2026-01-28 13:42:51] info: [auth:u99hnr] Authenticated user attacker-uuid-999
[2026-01-28 13:42:51] warn: 404 - Route not found: GET /api/user/attacker-uuid-999/progress from ::ffff:127.0.0.1
[2026-01-28 13:42:51] info: [GET] /api/user/attacker-uuid-999/progress - 404
[2026-01-28 13:42:51] info: [POST] /api/auth/register
[2026-01-28 13:42:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1233MB
[2026-01-28 13:42:51] warn: [Validation] Input validation failed
[2026-01-28 13:42:51] info: [POST] /api/auth/register - 400
[2026-01-28 13:42:51] info: [POST] /api/auth/register
[2026-01-28 13:42:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1242MB
[2026-01-28 13:42:51] warn: [Validation] Input validation failed
[2026-01-28 13:42:51] info: [POST] /api/auth/register - 400
[2026-01-28 13:42:51] info: [POST] /api/auth/register
[2026-01-28 13:42:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1235MB
[2026-01-28 13:42:51] warn: [Validation] Input validation failed
[2026-01-28 13:42:51] info: [POST] /api/auth/register - 400
[2026-01-28 13:42:51] info: [POST] /api/auth/register
[2026-01-28 13:42:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1230MB
[2026-01-28 13:42:51] warn: [Validation] Input validation failed
[2026-01-28 13:42:51] info: [POST] /api/auth/register - 400
[2026-01-28 13:42:51] info: [POST] /api/auth/register
[2026-01-28 13:42:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1240MB
[2026-01-28 13:42:51] warn: [Validation] Input validation failed
[2026-01-28 13:42:51] info: [POST] /api/auth/register - 400
[2026-01-28 13:42:52] info: [PUT] /api/auth/profile
[2026-01-28 13:42:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1233MB
[2026-01-28 13:42:52] info: [auth:2p37ea] Starting auth for PUT /profile
[2026-01-28 13:42:52] info: [auth:2p37ea] Token from cookie: false
[2026-01-28 13:42:52] info: [auth:2p37ea] Token from header: true
[2026-01-28 13:42:52] info: [auth:2p37ea] Authenticated user attacker-uuid-999
[2026-01-28 13:42:52] error: [authController.updateProfile] Error updating profile: At least one field is required
[2026-01-28 13:42:52] error: [PUT] /api/auth/profile - ERROR
[2026-01-28 13:42:52] error: Error At least one field is required
[2026-01-28 13:42:52] info: [PUT] /api/auth/profile - 400
[2026-01-28 13:42:52] info: [PUT] /api/auth/profile
[2026-01-28 13:42:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1233MB
[2026-01-28 13:42:52] info: [auth:7eakvm] Starting auth for PUT /profile
[2026-01-28 13:42:52] info: [auth:7eakvm] Token from cookie: false
[2026-01-28 13:42:52] info: [auth:7eakvm] Token from header: true
[2026-01-28 13:42:52] info: [auth:7eakvm] Authenticated user attacker-uuid-999
[2026-01-28 13:42:52] error: [authController.updateProfile] Error updating profile: At least one field is required
[2026-01-28 13:42:52] error: [PUT] /api/auth/profile - ERROR
[2026-01-28 13:42:52] error: Error At least one field is required
[2026-01-28 13:42:52] info: [PUT] /api/auth/profile - 400
[2026-01-28 13:42:52] info: [PUT] /api/auth/profile
[2026-01-28 13:42:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1233MB
[2026-01-28 13:42:52] info: [auth:8eogz] Starting auth for PUT /profile
[2026-01-28 13:42:52] info: [auth:8eogz] Token from cookie: false
[2026-01-28 13:42:52] info: [auth:8eogz] Token from header: true
[2026-01-28 13:42:52] info: [auth:8eogz] Authenticated user attacker-uuid-999
[2026-01-28 13:42:52] error: [authController.updateProfile] Error updating profile: At least one field is required
[2026-01-28 13:42:52] error: [PUT] /api/auth/profile - ERROR
[2026-01-28 13:42:52] error: Error At least one field is required
[2026-01-28 13:42:52] info: [PUT] /api/auth/profile - 400
[2026-01-28 13:42:52] info: [PUT] /api/auth/profile
[2026-01-28 13:42:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1233MB
[2026-01-28 13:42:52] info: [auth:6lguwb] Starting auth for PUT /profile
[2026-01-28 13:42:52] info: [auth:6lguwb] Token from cookie: false
[2026-01-28 13:42:52] info: [auth:6lguwb] Token from header: true
[2026-01-28 13:42:52] info: [auth:6lguwb] Authenticated user attacker-uuid-999
[2026-01-28 13:42:52] error: [authController.updateProfile] Error updating profile: At least one field is required
[2026-01-28 13:42:52] error: [PUT] /api/auth/profile - ERROR
[2026-01-28 13:42:52] error: Error At least one field is required
[2026-01-28 13:42:52] info: [PUT] /api/auth/profile - 400
[2026-01-28 13:42:52] info: [PUT] /api/auth/profile
[2026-01-28 13:42:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1234MB
[2026-01-28 13:42:52] info: [auth:n3429v] Starting auth for PUT /profile
[2026-01-28 13:42:52] info: [auth:n3429v] Token from cookie: false
[2026-01-28 13:42:52] info: [auth:n3429v] Token from header: true
[2026-01-28 13:42:52] info: [auth:n3429v] Authenticated user attacker-uuid-999
[2026-01-28 13:42:52] error: [authController.updateProfile] Error updating profile: At least one field is required
[2026-01-28 13:42:52] error: [PUT] /api/auth/profile - ERROR
[2026-01-28 13:42:52] error: Error At least one field is required
[2026-01-28 13:42:52] info: [PUT] /api/auth/profile - 400
[2026-01-28 13:42:52] info: [POST] /api/auth/register
[2026-01-28 13:42:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1234MB
[2026-01-28 13:42:52] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:52] info: [EmailVerification] Created verification token
[2026-01-28 13:42:52] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:42:52] info: [authController.register] Verification email sent
[2026-01-28 13:42:52] info: [POST] /api/auth/register - 201
[2026-01-28 13:42:52] info: [POST] /api/auth/register
[2026-01-28 13:42:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1234MB
[2026-01-28 13:42:52] warn: [Validation] Input validation failed
[2026-01-28 13:42:52] info: [POST] /api/auth/register - 400
[2026-01-28 13:42:52] info: [POST] /api/auth/register
[2026-01-28 13:42:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1232MB
[2026-01-28 13:42:52] warn: [Validation] Input validation failed
[2026-01-28 13:42:52] info: [POST] /api/auth/register - 400
[2026-01-28 13:42:52] info: [POST] /api/auth/register
[2026-01-28 13:42:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1243MB
[2026-01-28 13:42:52] warn: [Validation] Input validation failed
[2026-01-28 13:42:52] info: [POST] /api/auth/register - 400
[2026-01-28 13:42:52] info: [PUT] /api/auth/profile
[2026-01-28 13:42:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1237MB
[2026-01-28 13:42:52] info: [auth:m3k0nh] Starting auth for PUT /profile
[2026-01-28 13:42:52] info: [auth:m3k0nh] Token from cookie: false
[2026-01-28 13:42:52] info: [auth:m3k0nh] Token from header: true
[2026-01-28 13:42:52] info: [auth:m3k0nh] Authenticated user attacker-uuid-999
[2026-01-28 13:42:52] warn: [Validation] Input validation failed
[2026-01-28 13:42:52] info: [PUT] /api/auth/profile - 400
[2026-01-28 13:42:52] info: [POST] /api/auth/register
[2026-01-28 13:42:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1235MB
[2026-01-28 13:42:52] warn: [Validation] Input validation failed
[2026-01-28 13:42:52] info: [POST] /api/auth/register - 400
[2026-01-28 13:42:52] info: [PUT] /api/auth/profile
[2026-01-28 13:42:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1244MB
[2026-01-28 13:42:52] info: [auth:3xm1xf] Starting auth for PUT /profile
[2026-01-28 13:42:52] info: [auth:3xm1xf] Token from cookie: false
[2026-01-28 13:42:52] info: [auth:3xm1xf] Token from header: true
[2026-01-28 13:42:52] info: [auth:3xm1xf] Authenticated user attacker-uuid-999
[2026-01-28 13:42:52] error: [authController.updateProfile] Error updating profile: At least one field is required
[2026-01-28 13:42:52] error: [PUT] /api/auth/profile - ERROR
[2026-01-28 13:42:52] error: Error At least one field is required
[2026-01-28 13:42:52] info: [PUT] /api/auth/profile - 400
[2026-01-28 13:42:52] info: [GET] /api/user/attacker-uuid-999
[2026-01-28 13:42:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1243MB
[2026-01-28 13:42:52] info: [auth:8xk2lh] Starting auth for GET /user/attacker-uuid-999
[2026-01-28 13:42:52] info: [auth:8xk2lh] Token from cookie: false
[2026-01-28 13:42:52] warn: [auth:8xk2lh] Access token is required for GET /user/attacker-uuid-999 from ::ffff:127.0.0.1
[2026-01-28 13:42:52] info: [GET] /api/user/attacker-uuid-999 - 401
[2026-01-28 13:42:52] info: [GET] /api/horses/1
[2026-01-28 13:42:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1242MB
[2026-01-28 13:42:52] info: [auth:uzw1wj] Starting auth for GET /horses/1
[2026-01-28 13:42:52] info: [auth:uzw1wj] Token from cookie: false
[2026-01-28 13:42:52] warn: [auth:uzw1wj] Access token is required for GET /horses/1 from ::ffff:127.0.0.1
[2026-01-28 13:42:52] info: [GET] /api/horses/1 - 401
[2026-01-28 13:42:52] info: [POST] /api/competition/enter
[2026-01-28 13:42:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1242MB
[2026-01-28 13:42:52] info: [auth:u1jr8] Starting auth for POST /competition/enter
[2026-01-28 13:42:52] info: [auth:u1jr8] Token from cookie: false
[2026-01-28 13:42:52] warn: [auth:u1jr8] Access token is required for POST /competition/enter from ::ffff:127.0.0.1
[2026-01-28 13:42:52] info: [POST] /api/competition/enter - 401
[2026-01-28 13:42:52] info: [GET] /api/user/attacker-uuid-999
[2026-01-28 13:42:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1241MB
[2026-01-28 13:42:52] info: [auth:vvvwd4] Starting auth for GET /user/attacker-uuid-999
[2026-01-28 13:42:52] info: [auth:vvvwd4] Token from cookie: false
[2026-01-28 13:42:52] info: [auth:vvvwd4] Token from header: true
[2026-01-28 13:42:52] warn: [auth:vvvwd4] Invalid or expired token for GET /user/attacker-uuid-999 from ::ffff:127.0.0.1
[2026-01-28 13:42:52] info: [GET] /api/user/attacker-uuid-999 - 401
[2026-01-28 13:42:52] info: [GET] /api/user/attacker-uuid-999
[2026-01-28 13:42:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1242MB
[2026-01-28 13:42:52] info: [auth:wa4sf] Starting auth for GET /user/attacker-uuid-999
[2026-01-28 13:42:52] info: [auth:wa4sf] Token from cookie: false
[2026-01-28 13:42:52] warn: [auth:wa4sf] Access token is required for GET /user/attacker-uuid-999 from ::ffff:127.0.0.1
[2026-01-28 13:42:52] info: [GET] /api/user/attacker-uuid-999 - 401
[2026-01-28 13:42:52] info: [GET] /api/user/attacker-uuid-999
[2026-01-28 13:42:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1241MB
[2026-01-28 13:42:52] info: [auth:0lmejg] Starting auth for GET /user/attacker-uuid-999
[2026-01-28 13:42:52] info: [auth:0lmejg] Token from cookie: false
[2026-01-28 13:42:52] warn: [auth:0lmejg] Access token is required for GET /user/attacker-uuid-999 from ::ffff:127.0.0.1
[2026-01-28 13:42:52] info: [GET] /api/user/attacker-uuid-999 - 401
[2026-01-28 13:42:52] info: [GET] /api/user/attacker-uuid-999
[2026-01-28 13:42:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1241MB
[2026-01-28 13:42:52] info: [auth:49b92] Starting auth for GET /user/attacker-uuid-999
[2026-01-28 13:42:52] info: [auth:49b92] Token from cookie: false
[2026-01-28 13:42:52] info: [auth:49b92] Token from header: true
[2026-01-28 13:42:52] warn: [auth:49b92] Verify failed: invalid signature
[2026-01-28 13:42:52] warn: [auth:49b92] Invalid or expired token for GET /user/attacker-uuid-999 from ::ffff:127.0.0.1
[2026-01-28 13:42:52] info: [GET] /api/user/attacker-uuid-999 - 401
[2026-01-28 13:42:52] info: [GET] /api/user/attacker-uuid-999
[2026-01-28 13:42:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1243MB
[2026-01-28 13:42:52] info: [auth:j3zwp4] Starting auth for GET /user/attacker-uuid-999
[2026-01-28 13:42:52] info: [auth:j3zwp4] Token from cookie: false
[2026-01-28 13:42:52] info: [auth:j3zwp4] Token from header: true
[2026-01-28 13:42:52] warn: [auth:j3zwp4] Verify failed: invalid signature
[2026-01-28 13:42:52] warn: [auth:j3zwp4] Invalid or expired token for GET /user/attacker-uuid-999 from ::ffff:127.0.0.1
[2026-01-28 13:42:52] info: [GET] /api/user/attacker-uuid-999 - 401
[2026-01-28 13:42:52] info: [GET] /api/user/attacker-uuid-999
[2026-01-28 13:42:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1233MB
[2026-01-28 13:42:52] info: [auth:bbom3o] Starting auth for GET /user/attacker-uuid-999
[2026-01-28 13:42:52] info: [auth:bbom3o] Token from cookie: false
[2026-01-28 13:42:52] info: [auth:bbom3o] Token from header: true
[2026-01-28 13:42:52] warn: [auth:bbom3o] Verify failed: invalid signature
[2026-01-28 13:42:52] warn: [auth:bbom3o] Invalid or expired token for GET /user/attacker-uuid-999 from ::ffff:127.0.0.1
[2026-01-28 13:42:52] info: [GET] /api/user/attacker-uuid-999 - 401
[2026-01-28 13:42:52] info: [GET] /api/user/attacker-uuid-999
[2026-01-28 13:42:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1236MB
[2026-01-28 13:42:52] info: [auth:qzv291] Starting auth for GET /user/attacker-uuid-999
[2026-01-28 13:42:52] info: [auth:qzv291] Token from cookie: false
[2026-01-28 13:42:52] info: [auth:qzv291] Token from header: true
[2026-01-28 13:42:52] warn: [auth:qzv291] Invalid or expired token for GET /user/attacker-uuid-999 from ::ffff:127.0.0.1
[2026-01-28 13:42:52] info: [GET] /api/user/attacker-uuid-999 - 401
[2026-01-28 13:42:52] info: [GET] /api/user/attacker-uuid-999
[2026-01-28 13:42:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1236MB
[2026-01-28 13:42:52] info: [auth:50suf] Starting auth for GET /user/attacker-uuid-999
[2026-01-28 13:42:52] info: [auth:50suf] Token from cookie: false
[2026-01-28 13:42:52] info: [auth:50suf] Token from header: true
[2026-01-28 13:42:52] warn: [auth:50suf] Invalid or expired token for GET /user/attacker-uuid-999 from ::ffff:127.0.0.1
[2026-01-28 13:42:52] info: [GET] /api/user/attacker-uuid-999 - 401
[2026-01-28 13:42:52] info: [GET] /api/user/attacker-uuid-999
[2026-01-28 13:42:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1236MB
[2026-01-28 13:42:52] info: [auth:uqtz0b] Starting auth for GET /user/attacker-uuid-999
[2026-01-28 13:42:52] info: [auth:uqtz0b] Token from cookie: false
[2026-01-28 13:42:52] info: [auth:uqtz0b] Token from header: true
[2026-01-28 13:42:52] warn: [auth:uqtz0b] Invalid or expired token for GET /user/attacker-uuid-999 from ::ffff:127.0.0.1
[2026-01-28 13:42:52] info: [GET] /api/user/attacker-uuid-999 - 401
[2026-01-28 13:42:52] info: [GET] /api/user/invalid-uuid-format
[2026-01-28 13:42:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1237MB
[2026-01-28 13:42:52] info: [auth:bfud6c] Starting auth for GET /user/invalid-uuid-format
[2026-01-28 13:42:52] info: [auth:bfud6c] Token from cookie: false
[2026-01-28 13:42:52] info: [auth:bfud6c] Token from header: true
[2026-01-28 13:42:52] info: [auth:bfud6c] Authenticated user attacker-uuid-999
[2026-01-28 13:42:52] warn: 404 - Route not found: GET /api/user/invalid-uuid-format from ::ffff:127.0.0.1
[2026-01-28 13:42:52] info: [GET] /api/user/invalid-uuid-format - 404
[2026-01-28 13:42:52] info: [POST] /api/auth/register
[2026-01-28 13:42:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1239MB
[2026-01-28 13:42:52] warn: [Validation] Input validation failed
[2026-01-28 13:42:52] info: [POST] /api/auth/register - 400
[2026-01-28 13:42:52] info: [POST] /api/auth/login
[2026-01-28 13:42:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1235MB
[2026-01-28 13:42:52] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:42:52] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:42:52] error: Error Invalid credentials
[2026-01-28 13:42:52] info: [POST] /api/auth/login - 401
[2026-01-28 13:42:52] info: [POST] /api/auth/login
[2026-01-28 13:42:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1246MB
[2026-01-28 13:42:52] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:42:52] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:42:52] error: Error Invalid credentials
[2026-01-28 13:42:52] info: [POST] /api/auth/login - 401
PASS __tests__/integration/security-attack-simulation.test.mjs (7.224 s)
  Security Attack Simulation Tests
    IDOR (Insecure Direct Object Reference) Attack Simulation
      User Resource IDOR Attacks
        √ should block access to another user's profile (40 ms)
        √ should block access to another user's progress data (26 ms)
        √ should block access to another user's activity feed (27 ms)
        √ should block modification of another user's profile (35 ms)
        √ should block deletion of another user's account (25 ms)
      Horse Resource IDOR Attacks
        √ should block access to another user's horse details (78 ms)
        √ should block modification of another user's horse (27 ms)
        √ should block training another user's horse (25 ms)
      Competition Resource IDOR Attacks
        √ should block entering another user's horse in competition (28 ms)
        √ should block accessing another user's competition results (29 ms)
      Groom Resource IDOR Attacks
        √ should block accessing another user's groom list (31 ms)
        √ should block assigning another user's groom (29 ms)
      Breeding Resource IDOR Attacks
        √ should block breeding with another user's horse without permission (30 ms)
      Privilege Escalation Attempts
        √ should block accessing admin endpoints with user token (27 ms)
        √ should block admin operations with user token (26 ms)
    Rate Limiting Bypass Attempt Simulation
      Rapid-Fire Attack Simulation
        √ should have rate limiting configured on registration endpoint (3065 ms)
        √ should have rate limiting configured on login endpoint (brute force protection) (393 ms)
        √ should have rate limiting configured on profile update endpoint (1004 ms)
      Rate Limit Header Validation
        √ should include proper rate limit headers in all responses (44 ms)
    Input Validation Fuzzing Simulation
      SQL Injection Attempts
        √ should block SQL injection in email field (69 ms)
        √ should block SQL injection in username field (18 ms)
      XSS (Cross-Site Scripting) Attempts
        √ should sanitize XSS payloads in bio field (124 ms)
        √ should sanitize XSS payloads in name fields (302 ms)
      Buffer Overflow Attempts
        √ should reject extremely long email addresses (19 ms)
        √ should reject extremely long usernames (20 ms)
        √ should reject extremely long passwords (17 ms)
        √ should reject extremely long bio text (24 ms)
      Special Character Injection
        √ should handle null bytes in input (15 ms)
        √ should handle Unicode control characters (24 ms)
    Authentication Bypass Attempt Simulation
      Missing Authentication Token
        √ should block access to protected user endpoints without token (23 ms)
        √ should block access to protected horse endpoints without token (22 ms)
        √ should block access to protected competition endpoints without token (23 ms)
      Invalid Authentication Token
        √ should reject malformed JWT tokens (24 ms)
        √ should reject empty Bearer token (26 ms)
        √ should reject token without Bearer prefix (25 ms)
      Token Manipulation Attempts
        √ should reject token with modified payload (28 ms)
        √ should reject token with modified signature (26 ms)
      Session Fixation Attempts
        √ should not accept hardcoded or predictable tokens (94 ms)
    Information Disclosure Prevention
      √ should not leak database errors in responses (24 ms)
      √ should not leak stack traces in production (17 ms)
      √ should not reveal whether username exists during login (44 ms)

[2026-01-28 13:42:53] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:42:53] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:42:53] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:42:53] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:42:53] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:53] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:53] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:53] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:53] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:53] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:53] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:53] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:53] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:53] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:42:54] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 13:42:54] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:42:54] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:42:54] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:42:54] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:42:54] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:42:54] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:42:54] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 13:42:54] info: [POST] /auth/register
[2026-01-28 13:42:54] warn: [MemoryMonitoring] Memory threshold exceeded: 1296MB
[2026-01-28 13:42:54] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:54] info: [EmailVerification] Created verification token
[2026-01-28 13:42:54] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:42:54] info: [authController.register] Verification email sent
[2026-01-28 13:42:54] info: [POST] /auth/register - 201
[2026-01-28 13:42:54] info: [POST] /auth/register
[2026-01-28 13:42:54] warn: [MemoryMonitoring] Memory threshold exceeded: 1304MB
[2026-01-28 13:42:54] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:54] info: [EmailVerification] Created verification token
[2026-01-28 13:42:54] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:42:54] info: [authController.register] Verification email sent
[2026-01-28 13:42:54] info: [POST] /auth/register - 201
[2026-01-28 13:42:54] info: [POST] /auth/register
[2026-01-28 13:42:54] warn: [MemoryMonitoring] Memory threshold exceeded: 1293MB
[2026-01-28 13:42:55] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:55] info: [EmailVerification] Created verification token
[2026-01-28 13:42:55] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:42:55] info: [authController.register] Verification email sent
[2026-01-28 13:42:55] info: [POST] /auth/register - 201
[2026-01-28 13:42:55] info: [POST] /auth/register
[2026-01-28 13:42:55] warn: [MemoryMonitoring] Memory threshold exceeded: 1296MB
[2026-01-28 13:42:55] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:55] info: [EmailVerification] Created verification token
[2026-01-28 13:42:55] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:42:55] info: [authController.register] Verification email sent
[2026-01-28 13:42:55] info: [POST] /auth/register - 201
[2026-01-28 13:42:55] info: [POST] /auth/login
[2026-01-28 13:42:55] warn: [MemoryMonitoring] Memory threshold exceeded: 1298MB
[2026-01-28 13:42:55] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:55] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 13:42:55] info: [POST] /auth/login - 200
[2026-01-28 13:42:55] info: [POST] /auth/register
[2026-01-28 13:42:55] warn: [MemoryMonitoring] Memory threshold exceeded: 1297MB
[2026-01-28 13:42:56] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:56] info: [EmailVerification] Created verification token
[2026-01-28 13:42:56] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:42:56] info: [authController.register] Verification email sent
[2026-01-28 13:42:56] info: [POST] /auth/register - 201
[2026-01-28 13:42:56] info: [POST] /auth/login
[2026-01-28 13:42:56] warn: [MemoryMonitoring] Memory threshold exceeded: 1299MB
[2026-01-28 13:42:56] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:56] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 13:42:56] info: [POST] /auth/login - 200
[2026-01-28 13:42:56] info: [POST] /auth/register
[2026-01-28 13:42:56] warn: [MemoryMonitoring] Memory threshold exceeded: 1297MB
[2026-01-28 13:42:56] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:56] info: [EmailVerification] Created verification token
[2026-01-28 13:42:56] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:42:56] info: [authController.register] Verification email sent
[2026-01-28 13:42:56] info: [POST] /auth/register - 201
[2026-01-28 13:42:56] info: [POST] /auth/login
[2026-01-28 13:42:56] warn: [MemoryMonitoring] Memory threshold exceeded: 1299MB
[2026-01-28 13:42:56] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:56] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 13:42:56] info: [POST] /auth/login - 200
[2026-01-28 13:42:56] info: [POST] /auth/register
[2026-01-28 13:42:56] warn: [MemoryMonitoring] Memory threshold exceeded: 1298MB
[2026-01-28 13:42:57] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:57] info: [EmailVerification] Created verification token
[2026-01-28 13:42:57] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:42:57] info: [authController.register] Verification email sent
[2026-01-28 13:42:57] info: [POST] /auth/register - 201
[2026-01-28 13:42:57] info: [POST] /auth/login
[2026-01-28 13:42:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1300MB
[2026-01-28 13:42:57] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:57] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 13:42:57] info: [POST] /auth/login - 200
[2026-01-28 13:42:57] info: [POST] /auth/refresh-token
[2026-01-28 13:42:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1297MB
[2026-01-28 13:42:57] info: [TokenRotation] Token rotation successful
[2026-01-28 13:42:57] info: [authController.refreshToken] Token rotation successful
[2026-01-28 13:42:57] info: [POST] /auth/refresh-token - 200
[2026-01-28 13:42:57] info: [POST] /auth/register
[2026-01-28 13:42:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1297MB
[2026-01-28 13:42:57] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:57] info: [EmailVerification] Created verification token
[2026-01-28 13:42:57] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:42:57] info: [authController.register] Verification email sent
[2026-01-28 13:42:57] info: [POST] /auth/register - 201
[2026-01-28 13:42:57] info: [POST] /auth/login
[2026-01-28 13:42:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1297MB
[2026-01-28 13:42:58] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:58] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 13:42:58] info: [POST] /auth/login - 200
[2026-01-28 13:42:58] info: [POST] /auth/refresh-token
[2026-01-28 13:42:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1295MB
[2026-01-28 13:42:58] info: [TokenRotation] Token rotation successful
[2026-01-28 13:42:58] info: [authController.refreshToken] Token rotation successful
[2026-01-28 13:42:58] info: [POST] /auth/refresh-token - 200
[2026-01-28 13:42:58] info: [POST] /auth/register
[2026-01-28 13:42:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1295MB
[2026-01-28 13:42:58] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:58] info: [EmailVerification] Created verification token
[2026-01-28 13:42:58] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:42:58] info: [authController.register] Verification email sent
[2026-01-28 13:42:58] info: [POST] /auth/register - 201
[2026-01-28 13:42:58] info: [POST] /auth/login
[2026-01-28 13:42:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1298MB
[2026-01-28 13:42:58] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:58] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 13:42:58] info: [POST] /auth/login - 200
[2026-01-28 13:42:58] info: [POST] /auth/refresh-token
[2026-01-28 13:42:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1296MB
[2026-01-28 13:42:58] info: [TokenRotation] Token rotation successful
[2026-01-28 13:42:58] info: [authController.refreshToken] Token rotation successful
[2026-01-28 13:42:58] info: [POST] /auth/refresh-token - 200
[2026-01-28 13:42:58] info: [POST] /auth/register
[2026-01-28 13:42:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1296MB
[2026-01-28 13:42:59] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:59] info: [EmailVerification] Created verification token
[2026-01-28 13:42:59] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:42:59] info: [authController.register] Verification email sent
[2026-01-28 13:42:59] info: [POST] /auth/register - 201
[2026-01-28 13:42:59] info: [POST] /auth/login
[2026-01-28 13:42:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1298MB
[2026-01-28 13:42:59] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:59] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 13:42:59] info: [POST] /auth/login - 200
[2026-01-28 13:42:59] info: [POST] /auth/logout
[2026-01-28 13:42:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1296MB
[2026-01-28 13:42:59] info: [auth:wj5ilt] Starting auth for POST /logout
[2026-01-28 13:42:59] info: [auth:wj5ilt] Token from cookie: true
[2026-01-28 13:42:59] info: [auth:wj5ilt] Authenticated user 34f41380-9009-45c7-8dc0-8c3eb2e445af
[2026-01-28 13:42:59] info: [POST] /auth/logout - 200
[2026-01-28 13:42:59] info: [POST] /auth/register
[2026-01-28 13:42:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1298MB
[2026-01-28 13:42:59] info: [TokenRotation] Created new token pair
[2026-01-28 13:42:59] info: [EmailVerification] Created verification token
[2026-01-28 13:42:59] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:42:59] info: [authController.register] Verification email sent
[2026-01-28 13:42:59] info: [POST] /auth/register - 201
[2026-01-28 13:42:59] info: [POST] /auth/login
[2026-01-28 13:42:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1299MB
[2026-01-28 13:43:00] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:00] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 13:43:00] info: [POST] /auth/login - 200
[2026-01-28 13:43:00] info: [POST] /auth/logout
[2026-01-28 13:43:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1297MB
[2026-01-28 13:43:00] info: [auth:231tac] Starting auth for POST /logout
[2026-01-28 13:43:00] info: [auth:231tac] Token from cookie: true
[2026-01-28 13:43:00] info: [auth:231tac] Authenticated user e66a7fd2-2571-4f72-87b4-1ff940eded2a
[2026-01-28 13:43:00] info: [POST] /auth/logout - 200
[2026-01-28 13:43:00] info: [POST] /auth/register
[2026-01-28 13:43:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1299MB
[2026-01-28 13:43:00] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:00] info: [EmailVerification] Created verification token
[2026-01-28 13:43:00] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:00] info: [authController.register] Verification email sent
[2026-01-28 13:43:00] info: [POST] /auth/register - 201
[2026-01-28 13:43:00] info: [POST] /auth/login
[2026-01-28 13:43:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1299MB
[2026-01-28 13:43:00] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:00] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 13:43:00] info: [POST] /auth/login - 200
[2026-01-28 13:43:00] info: [POST] /auth/logout
[2026-01-28 13:43:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1298MB
[2026-01-28 13:43:00] info: [auth:bsuhdf] Starting auth for POST /logout
[2026-01-28 13:43:00] info: [auth:bsuhdf] Token from cookie: true
[2026-01-28 13:43:00] info: [auth:bsuhdf] Authenticated user 54a04840-4469-4d31-adb8-a6a599cf1a21
[2026-01-28 13:43:00] info: [POST] /auth/logout - 200
[2026-01-28 13:43:00] info: [POST] /auth/register
[2026-01-28 13:43:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1299MB
[2026-01-28 13:43:01] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:01] info: [EmailVerification] Created verification token
[2026-01-28 13:43:01] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:01] info: [authController.register] Verification email sent
[2026-01-28 13:43:01] info: [POST] /auth/register - 201
[2026-01-28 13:43:01] info: [POST] /auth/login
[2026-01-28 13:43:01] warn: [MemoryMonitoring] Memory threshold exceeded: 1300MB
[2026-01-28 13:43:01] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:01] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 13:43:01] info: [POST] /auth/login - 200
[2026-01-28 13:43:01] info: [POST] /auth/refresh-token
[2026-01-28 13:43:01] warn: [MemoryMonitoring] Memory threshold exceeded: 1298MB
[2026-01-28 13:43:01] info: [TokenRotation] Token rotation successful
[2026-01-28 13:43:01] info: [authController.refreshToken] Token rotation successful
[2026-01-28 13:43:01] info: [POST] /auth/refresh-token - 200
PASS __tests__/integration/cookieIntegration.test.mjs (8.465 s)
  Cookie Integration Tests
    Registration Endpoint Cookies
      √ should set accessToken cookie with correct attributes (372 ms)
      √ should set refreshToken cookie with correct attributes (313 ms)
      √ should set both cookies in a single response (312 ms)
    Login Endpoint Cookies
      √ should set cookies on successful login (604 ms)
      √ should set accessToken cookie with correct attributes on login (604 ms)
      √ should set refreshToken cookie with correct attributes on login (610 ms)
    Token Refresh Endpoint Cookies
      √ should set new cookies on token refresh (632 ms)
      √ should set new accessToken cookie with correct attributes (643 ms)
      √ should set new refreshToken cookie with correct attributes (655 ms)
    Logout Endpoint Cookie Clearing
      √ should clear accessToken cookie on logout (650 ms)
      √ should clear refreshToken cookie on logout (635 ms)
      √ should maintain same path when clearing cookies (623 ms)
    Cookie Security Attributes
      √ should use consistent security attributes across all endpoints (627 ms)

[2026-01-28 13:43:01] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:43:01] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:43:01] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:43:01] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:43:02] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:02] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:02] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:02] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:02] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:02] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:02] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:02] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:02] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:02] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:43:02] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 13:43:02] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:02] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:43:02] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:43:02] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:43:02] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:43:02] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:43:02] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 13:43:02] info: [POST] /auth/register
[2026-01-28 13:43:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1136MB
[2026-01-28 13:43:03] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:03] info: [EmailVerification] Created verification token
[2026-01-28 13:43:03] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:03] info: [authController.register] Verification email sent
[2026-01-28 13:43:03] info: [POST] /auth/register - 201
[2026-01-28 13:43:03] info: [POST] /auth/register
[2026-01-28 13:43:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1143MB
[2026-01-28 13:43:03] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:03] info: [EmailVerification] Created verification token
[2026-01-28 13:43:03] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:03] info: [authController.register] Verification email sent
[2026-01-28 13:43:03] info: [POST] /auth/register - 201
[2026-01-28 13:43:03] info: [POST] /auth/register
[2026-01-28 13:43:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1146MB
[2026-01-28 13:43:04] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:04] info: [EmailVerification] Created verification token
[2026-01-28 13:43:04] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:04] info: [authController.register] Verification email sent
[2026-01-28 13:43:04] info: [POST] /auth/register - 201
[2026-01-28 13:43:04] info: [GET] /auth/verify-email?token=aa620e95ccb2a1e38b19f9dbe696f47f4a8f7dbb82e56259a33083816926d1da
[2026-01-28 13:43:04] warn: [MemoryMonitoring] Memory threshold exceeded: 1135MB
[2026-01-28 13:43:04] info: [EmailVerification] Email verified successfully
[2026-01-28 13:43:04] info: [EmailService] Welcome email (DEV MODE - not sent)
[2026-01-28 13:43:04] info: [GET] /auth/verify-email?token=aa620e95ccb2a1e38b19f9dbe696f47f4a8f7dbb82e56259a33083816926d1da - 200
[2026-01-28 13:43:04] info: [GET] /auth/verify-email?token=83fa736b214bcfa32e2693c96d0b34478af00c75744446f41581db70400e8a87
[2026-01-28 13:43:04] warn: [MemoryMonitoring] Memory threshold exceeded: 1136MB
[2026-01-28 13:43:04] info: [EmailVerification] Email verified successfully
[2026-01-28 13:43:04] info: [EmailService] Welcome email (DEV MODE - not sent)
[2026-01-28 13:43:04] info: [GET] /auth/verify-email?token=83fa736b214bcfa32e2693c96d0b34478af00c75744446f41581db70400e8a87 - 200
[2026-01-28 13:43:04] info: [GET] /auth/verify-email?token=9c221471e4e146550c23a46986db9618dd19716d27eb2ab58f93f5b8c43ee011
[2026-01-28 13:43:04] warn: [MemoryMonitoring] Memory threshold exceeded: 1137MB
[2026-01-28 13:43:04] info: [EmailVerification] Email verified successfully
[2026-01-28 13:43:04] info: [EmailService] Welcome email (DEV MODE - not sent)
[2026-01-28 13:43:04] info: [GET] /auth/verify-email?token=9c221471e4e146550c23a46986db9618dd19716d27eb2ab58f93f5b8c43ee011 - 200
[2026-01-28 13:43:04] info: [GET] /auth/verify-email
[2026-01-28 13:43:04] warn: [MemoryMonitoring] Memory threshold exceeded: 1137MB
[2026-01-28 13:43:04] error: [authController.verifyEmail] Error verifying email: Verification token is required
[2026-01-28 13:43:04] error: [GET] /auth/verify-email - ERROR
[2026-01-28 13:43:04] error: Error Verification token is required
[2026-01-28 13:43:04] info: [GET] /auth/verify-email - 400
[2026-01-28 13:43:04] info: [GET] /auth/verify-email?token=invalid_token_here
[2026-01-28 13:43:04] warn: [MemoryMonitoring] Memory threshold exceeded: 1141MB
[2026-01-28 13:43:04] error: [authController.verifyEmail] Error verifying email: Invalid or expired verification token
[2026-01-28 13:43:04] error: [GET] /auth/verify-email?token=invalid_token_here - ERROR
[2026-01-28 13:43:04] error: Error Invalid or expired verification token
[2026-01-28 13:43:04] info: [GET] /auth/verify-email?token=invalid_token_here - 400
[2026-01-28 13:43:04] info: [GET] /auth/verify-email?token=09519adfa20b82a73cf61f30355ac044db608f5fe3f0c925d11c5643257e28ba
[2026-01-28 13:43:04] warn: [MemoryMonitoring] Memory threshold exceeded: 1144MB
[2026-01-28 13:43:04] error: [authController.verifyEmail] Error verifying email: Verification token has expired
[2026-01-28 13:43:04] error: [GET] /auth/verify-email?token=09519adfa20b82a73cf61f30355ac044db608f5fe3f0c925d11c5643257e28ba - ERROR
[2026-01-28 13:43:04] error: Error Verification token has expired
[2026-01-28 13:43:04] info: [GET] /auth/verify-email?token=09519adfa20b82a73cf61f30355ac044db608f5fe3f0c925d11c5643257e28ba - 400
[2026-01-28 13:43:04] info: [GET] /auth/verify-email?token=b9a61b8fd78ad564dc267b9dca7280425e9bef9792c321c4c7b2d0c63dfa0299
[2026-01-28 13:43:04] warn: [MemoryMonitoring] Memory threshold exceeded: 1144MB
[2026-01-28 13:43:04] info: [EmailVerification] Email verified successfully
[2026-01-28 13:43:04] info: [EmailService] Welcome email (DEV MODE - not sent)
[2026-01-28 13:43:04] info: [GET] /auth/verify-email?token=b9a61b8fd78ad564dc267b9dca7280425e9bef9792c321c4c7b2d0c63dfa0299 - 200
[2026-01-28 13:43:04] info: [GET] /auth/verify-email?token=b9a61b8fd78ad564dc267b9dca7280425e9bef9792c321c4c7b2d0c63dfa0299
[2026-01-28 13:43:04] warn: [MemoryMonitoring] Memory threshold exceeded: 1141MB
[2026-01-28 13:43:04] error: [EmailVerification] Error verifying email token: Verification token has already been used
[2026-01-28 13:43:04] error: [authController.verifyEmail] Error verifying email: Verification token has already been used
[2026-01-28 13:43:04] error: [GET] /auth/verify-email?token=b9a61b8fd78ad564dc267b9dca7280425e9bef9792c321c4c7b2d0c63dfa0299 - ERROR
[2026-01-28 13:43:04] error: Error Verification token has already been used
[2026-01-28 13:43:04] info: [GET] /auth/verify-email?token=b9a61b8fd78ad564dc267b9dca7280425e9bef9792c321c4c7b2d0c63dfa0299 - 400
[2026-01-28 13:43:04] info: [GET] /auth/verify-email?token=df6b53da5b9edb706ac9a1323b1cdec3bd3bb6da18f40e4bb2fedaa7988529be
[2026-01-28 13:43:05] warn: [MemoryMonitoring] Memory threshold exceeded: 1141MB
[2026-01-28 13:43:05] info: [EmailVerification] Email verified successfully
[2026-01-28 13:43:05] info: [EmailService] Welcome email (DEV MODE - not sent)
[2026-01-28 13:43:05] info: [GET] /auth/verify-email?token=df6b53da5b9edb706ac9a1323b1cdec3bd3bb6da18f40e4bb2fedaa7988529be - 200
[2026-01-28 13:43:05] info: [POST] /auth/resend-verification
[2026-01-28 13:43:05] warn: [MemoryMonitoring] Memory threshold exceeded: 1140MB
[2026-01-28 13:43:05] info: [auth:63tswn] Starting auth for POST /resend-verification
[2026-01-28 13:43:05] info: [auth:63tswn] Token from cookie: false
[2026-01-28 13:43:05] info: [auth:63tswn] Token from header: true
[2026-01-28 13:43:05] info: [auth:63tswn] Authenticated user 3d2d2c25-5f75-4db3-8c45-23e3473aa657
[2026-01-28 13:43:05] info: [EmailVerification] Created verification token
[2026-01-28 13:43:05] info: [EmailVerification] Resent verification email
[2026-01-28 13:43:05] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:05] info: [POST] /auth/resend-verification - 200
[2026-01-28 13:43:05] info: [POST] /auth/resend-verification
[2026-01-28 13:43:05] warn: [MemoryMonitoring] Memory threshold exceeded: 1146MB
[2026-01-28 13:43:05] info: [auth:5522kc] Starting auth for POST /resend-verification
[2026-01-28 13:43:05] info: [auth:5522kc] Token from cookie: false
[2026-01-28 13:43:05] warn: [auth:5522kc] Access token is required for POST /resend-verification from ::ffff:127.0.0.1
[2026-01-28 13:43:05] info: [POST] /auth/resend-verification - 401
[2026-01-28 13:43:05] info: [POST] /auth/resend-verification
[2026-01-28 13:43:05] warn: [MemoryMonitoring] Memory threshold exceeded: 1137MB
[2026-01-28 13:43:05] info: [auth:pu9u9g] Starting auth for POST /resend-verification
[2026-01-28 13:43:05] info: [auth:pu9u9g] Token from cookie: false
[2026-01-28 13:43:05] info: [auth:pu9u9g] Token from header: true
[2026-01-28 13:43:05] info: [auth:pu9u9g] Authenticated user 074f57da-f669-4e86-bb06-cc44ec2fe9ba
[2026-01-28 13:43:05] error: [EmailVerification] Error resending verification email: Email is already verified
[2026-01-28 13:43:05] error: [authController.resendVerification] Error resending verification: Email is already verified
[2026-01-28 13:43:05] error: [POST] /auth/resend-verification - ERROR
[2026-01-28 13:43:05] error: Error Email is already verified
[2026-01-28 13:43:05] info: [POST] /auth/resend-verification - 500
[2026-01-28 13:43:05] info: [POST] /auth/resend-verification
[2026-01-28 13:43:05] warn: [MemoryMonitoring] Memory threshold exceeded: 1143MB
[2026-01-28 13:43:05] info: [auth:bqnp5] Starting auth for POST /resend-verification
[2026-01-28 13:43:05] info: [auth:bqnp5] Token from cookie: false
[2026-01-28 13:43:05] info: [auth:bqnp5] Token from header: true
[2026-01-28 13:43:05] info: [auth:bqnp5] Authenticated user 7df46c72-f201-4ee7-8381-d66a9bcedfd2
[2026-01-28 13:43:05] info: [EmailVerification] Created verification token
[2026-01-28 13:43:05] info: [EmailVerification] Resent verification email
[2026-01-28 13:43:05] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:05] info: [POST] /auth/resend-verification - 200
[2026-01-28 13:43:05] info: [POST] /auth/resend-verification
[2026-01-28 13:43:05] warn: [MemoryMonitoring] Memory threshold exceeded: 1146MB
[2026-01-28 13:43:05] info: [auth:543hhg] Starting auth for POST /resend-verification
[2026-01-28 13:43:05] info: [auth:543hhg] Token from cookie: false
[2026-01-28 13:43:05] info: [auth:543hhg] Token from header: true
[2026-01-28 13:43:05] info: [auth:543hhg] Authenticated user 7df46c72-f201-4ee7-8381-d66a9bcedfd2
[2026-01-28 13:43:05] error: [EmailVerification] Error creating verification token: Please wait 300 seconds before requesting another verification email
[2026-01-28 13:43:05] error: [EmailVerification] Error resending verification email: Please wait 300 seconds before requesting another verification email
[2026-01-28 13:43:05] error: [authController.resendVerification] Error resending verification: Please wait 300 seconds before requesting another verification email
[2026-01-28 13:43:05] error: [POST] /auth/resend-verification - ERROR
[2026-01-28 13:43:05] error: Error Please wait 300 seconds before requesting another verification email
[2026-01-28 13:43:05] info: [POST] /auth/resend-verification - 429
[2026-01-28 13:43:05] info: [POST] /auth/resend-verification
[2026-01-28 13:43:05] warn: [MemoryMonitoring] Memory threshold exceeded: 1139MB
[2026-01-28 13:43:05] info: [auth:nn54im] Starting auth for POST /resend-verification
[2026-01-28 13:43:05] info: [auth:nn54im] Token from cookie: false
[2026-01-28 13:43:05] info: [auth:nn54im] Token from header: true
[2026-01-28 13:43:05] info: [auth:nn54im] Authenticated user 22966dae-c288-4b9f-bb4b-a6a0ad4a0235
[2026-01-28 13:43:05] info: [EmailVerification] Created verification token
[2026-01-28 13:43:05] info: [EmailVerification] Resent verification email
[2026-01-28 13:43:05] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:05] info: [POST] /auth/resend-verification - 200
[2026-01-28 13:43:05] info: [GET] /auth/verification-status
[2026-01-28 13:43:05] warn: [MemoryMonitoring] Memory threshold exceeded: 1146MB
[2026-01-28 13:43:05] info: [auth:xf8z1] Starting auth for GET /verification-status
[2026-01-28 13:43:05] info: [auth:xf8z1] Token from cookie: false
[2026-01-28 13:43:05] info: [auth:xf8z1] Token from header: true
[2026-01-28 13:43:05] info: [auth:xf8z1] Authenticated user 16434384-de2b-4723-9389-9b96598c9920
[2026-01-28 13:43:05] info: [EmailVerification] Verification status check
[2026-01-28 13:43:05] info: [GET] /auth/verification-status - 200
[2026-01-28 13:43:05] info: [GET] /auth/verification-status
[2026-01-28 13:43:05] warn: [MemoryMonitoring] Memory threshold exceeded: 1150MB
[2026-01-28 13:43:05] info: [auth:frzctb] Starting auth for GET /verification-status
[2026-01-28 13:43:05] info: [auth:frzctb] Token from cookie: false
[2026-01-28 13:43:05] info: [auth:frzctb] Token from header: true
[2026-01-28 13:43:05] info: [auth:frzctb] Authenticated user 27e0a5e8-f52f-4aa4-901a-7e46f44722d2
[2026-01-28 13:43:05] info: [EmailVerification] Verification status check
[2026-01-28 13:43:05] info: [GET] /auth/verification-status - 200
[2026-01-28 13:43:05] info: [GET] /auth/verification-status
[2026-01-28 13:43:05] warn: [MemoryMonitoring] Memory threshold exceeded: 1140MB
[2026-01-28 13:43:05] info: [auth:stekfr] Starting auth for GET /verification-status
[2026-01-28 13:43:05] info: [auth:stekfr] Token from cookie: false
[2026-01-28 13:43:05] warn: [auth:stekfr] Access token is required for GET /verification-status from ::ffff:127.0.0.1
[2026-01-28 13:43:05] info: [GET] /auth/verification-status - 401
[2026-01-28 13:43:05] info: [GET] /auth/verification-status
[2026-01-28 13:43:05] warn: [MemoryMonitoring] Memory threshold exceeded: 1143MB
[2026-01-28 13:43:05] info: [auth:ys61mi] Starting auth for GET /verification-status
[2026-01-28 13:43:05] info: [auth:ys61mi] Token from cookie: false
[2026-01-28 13:43:05] info: [auth:ys61mi] Token from header: true
[2026-01-28 13:43:05] info: [auth:ys61mi] Authenticated user 8f09f192-00e2-464f-baf0-07404ad70ad2
[2026-01-28 13:43:06] info: [EmailVerification] Verification status check
[2026-01-28 13:43:06] info: [GET] /auth/verification-status - 200
[2026-01-28 13:43:06] info: [POST] /auth/register
[2026-01-28 13:43:06] warn: [MemoryMonitoring] Memory threshold exceeded: 1146MB
[2026-01-28 13:43:06] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:06] info: [EmailVerification] Created verification token
[2026-01-28 13:43:06] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:06] info: [authController.register] Verification email sent
[2026-01-28 13:43:06] info: [POST] /auth/register - 201
[2026-01-28 13:43:06] info: [GET] /auth/verify-email?token=36210b219243dc859bff91110e400a2d249f1b724b60a9daf8c0558c6c67b920
[2026-01-28 13:43:06] warn: [MemoryMonitoring] Memory threshold exceeded: 1148MB
[2026-01-28 13:43:06] info: [EmailVerification] Email verified successfully
[2026-01-28 13:43:06] info: [EmailService] Welcome email (DEV MODE - not sent)
[2026-01-28 13:43:06] info: [GET] /auth/verify-email?token=36210b219243dc859bff91110e400a2d249f1b724b60a9daf8c0558c6c67b920 - 200
[2026-01-28 13:43:06] info: [GET] /auth/verification-status
[2026-01-28 13:43:06] warn: [MemoryMonitoring] Memory threshold exceeded: 1147MB
[2026-01-28 13:43:06] info: [auth:biy8m] Starting auth for GET /verification-status
[2026-01-28 13:43:06] info: [auth:biy8m] Token from cookie: false
[2026-01-28 13:43:06] info: [auth:biy8m] Token from header: true
[2026-01-28 13:43:06] info: [auth:biy8m] Authenticated user 9535b398-5f57-4334-b08b-2471a44830ce
[2026-01-28 13:43:06] info: [EmailVerification] Verification status check
[2026-01-28 13:43:06] info: [GET] /auth/verification-status - 200
[2026-01-28 13:43:06] info: [POST] /auth/resend-verification
[2026-01-28 13:43:06] warn: [MemoryMonitoring] Memory threshold exceeded: 1148MB
[2026-01-28 13:43:06] info: [auth:iyef0m] Starting auth for POST /resend-verification
[2026-01-28 13:43:06] info: [auth:iyef0m] Token from cookie: false
[2026-01-28 13:43:06] info: [auth:iyef0m] Token from header: true
[2026-01-28 13:43:06] info: [auth:iyef0m] Authenticated user 9535b398-5f57-4334-b08b-2471a44830ce
[2026-01-28 13:43:06] info: [EmailVerification] Created verification token
[2026-01-28 13:43:06] info: [EmailVerification] Resent verification email
[2026-01-28 13:43:06] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:06] info: [POST] /auth/resend-verification - 200
[2026-01-28 13:43:06] info: [GET] /auth/verify-email?token=47d9bf913eae4f595a47acfce05e39fbcb1e6ba99767acdb2dca836c8492537e
[2026-01-28 13:43:06] warn: [MemoryMonitoring] Memory threshold exceeded: 1139MB
[2026-01-28 13:43:06] info: [EmailVerification] Email verified successfully
[2026-01-28 13:43:06] info: [EmailService] Welcome email (DEV MODE - not sent)
[2026-01-28 13:43:06] info: [GET] /auth/verify-email?token=47d9bf913eae4f595a47acfce05e39fbcb1e6ba99767acdb2dca836c8492537e - 200
[2026-01-28 13:43:06] info: [GET] /auth/verification-status
[2026-01-28 13:43:06] warn: [MemoryMonitoring] Memory threshold exceeded: 1150MB
[2026-01-28 13:43:06] info: [auth:w8ung3] Starting auth for GET /verification-status
[2026-01-28 13:43:06] info: [auth:w8ung3] Token from cookie: false
[2026-01-28 13:43:06] info: [auth:w8ung3] Token from header: true
[2026-01-28 13:43:06] info: [auth:w8ung3] Authenticated user 9535b398-5f57-4334-b08b-2471a44830ce
[2026-01-28 13:43:06] info: [EmailVerification] Verification status check
[2026-01-28 13:43:06] info: [GET] /auth/verification-status - 200
[2026-01-28 13:43:06] info: [GET] /auth/verify-email?token=6f3338f67795737c2ddc2d50823dde5623502a06482fc393e0a1b9e0d6658554
[2026-01-28 13:43:06] warn: [MemoryMonitoring] Memory threshold exceeded: 1141MB
[2026-01-28 13:43:06] info: [EmailVerification] Email verified successfully
[2026-01-28 13:43:06] info: [EmailService] Welcome email (DEV MODE - not sent)
[2026-01-28 13:43:06] info: [GET] /auth/verify-email?token=6f3338f67795737c2ddc2d50823dde5623502a06482fc393e0a1b9e0d6658554 - 200
[2026-01-28 13:43:06] info: [GET] /auth/verify-email?token=6f3338f67795737c2ddc2d50823dde5623502a06482fc393e0a1b9e0d6658554
[2026-01-28 13:43:06] warn: [MemoryMonitoring] Memory threshold exceeded: 1152MB
[2026-01-28 13:43:06] error: [EmailVerification] Error verifying email token: Verification token has already been used
[2026-01-28 13:43:06] error: [authController.verifyEmail] Error verifying email: Verification token has already been used
[2026-01-28 13:43:06] error: [GET] /auth/verify-email?token=6f3338f67795737c2ddc2d50823dde5623502a06482fc393e0a1b9e0d6658554 - ERROR
[2026-01-28 13:43:06] error: Error Verification token has already been used
[2026-01-28 13:43:06] info: [GET] /auth/verify-email?token=6f3338f67795737c2ddc2d50823dde5623502a06482fc393e0a1b9e0d6658554 - 400
[2026-01-28 13:43:06] info: [GET] /auth/verify-email?token=6f3338f67795737c2ddc2d50823dde5623502a06482fc393e0a1b9e0d6658554
[2026-01-28 13:43:06] warn: [MemoryMonitoring] Memory threshold exceeded: 1150MB
[2026-01-28 13:43:06] error: [EmailVerification] Error verifying email token: Verification token has already been used
[2026-01-28 13:43:06] error: [authController.verifyEmail] Error verifying email: Verification token has already been used
[2026-01-28 13:43:06] error: [GET] /auth/verify-email?token=6f3338f67795737c2ddc2d50823dde5623502a06482fc393e0a1b9e0d6658554 - ERROR
[2026-01-28 13:43:06] error: Error Verification token has already been used
[2026-01-28 13:43:06] info: [GET] /auth/verify-email?token=6f3338f67795737c2ddc2d50823dde5623502a06482fc393e0a1b9e0d6658554 - 400
[2026-01-28 13:43:06] info: [GET] /auth/verify-email?token=e373874ec1e5379d11457b86b894eef164a832ebb5c49586d83d414293a18166
[2026-01-28 13:43:06] warn: [MemoryMonitoring] Memory threshold exceeded: 1151MB
[2026-01-28 13:43:06] info: [GET] /auth/verify-email?token=e373874ec1e5379d11457b86b894eef164a832ebb5c49586d83d414293a18166
[2026-01-28 13:43:06] warn: [MemoryMonitoring] Memory threshold exceeded: 1141MB
[2026-01-28 13:43:06] info: [EmailVerification] Email verified successfully
[2026-01-28 13:43:06] info: [EmailService] Welcome email (DEV MODE - not sent)
[2026-01-28 13:43:06] info: [GET] /auth/verify-email?token=e373874ec1e5379d11457b86b894eef164a832ebb5c49586d83d414293a18166 - 200
[2026-01-28 13:43:06] error: [EmailVerification] Error verifying email token: Verification token has already been used
[2026-01-28 13:43:06] error: [authController.verifyEmail] Error verifying email: Verification token has already been used
[2026-01-28 13:43:06] error: [GET] /auth/verify-email?token=e373874ec1e5379d11457b86b894eef164a832ebb5c49586d83d414293a18166 - ERROR
[2026-01-28 13:43:06] error: Error Verification token has already been used
[2026-01-28 13:43:06] info: [GET] /auth/verify-email?token=e373874ec1e5379d11457b86b894eef164a832ebb5c49586d83d414293a18166 - 400
[2026-01-28 13:43:07] info: [GET] /auth/verify-email?token=definitely_invalid_token_123
[2026-01-28 13:43:07] warn: [MemoryMonitoring] Memory threshold exceeded: 1146MB
[2026-01-28 13:43:07] error: [authController.verifyEmail] Error verifying email: Invalid or expired verification token
[2026-01-28 13:43:07] error: [GET] /auth/verify-email?token=definitely_invalid_token_123 - ERROR
[2026-01-28 13:43:07] error: Error Invalid or expired verification token
[2026-01-28 13:43:07] info: [GET] /auth/verify-email?token=definitely_invalid_token_123 - 400
[2026-01-28 13:43:07] info: [GET] /auth/verify-email?token=
[2026-01-28 13:43:07] warn: [MemoryMonitoring] Memory threshold exceeded: 1145MB
[2026-01-28 13:43:07] error: [authController.verifyEmail] Error verifying email: Verification token is required
[2026-01-28 13:43:07] error: [GET] /auth/verify-email?token= - ERROR
[2026-01-28 13:43:07] error: Error Verification token is required
[2026-01-28 13:43:07] info: [GET] /auth/verify-email?token= - 400
[2026-01-28 13:43:07] info: [GET] /auth/verify-email?token=
[2026-01-28 13:43:07] warn: [MemoryMonitoring] Memory threshold exceeded: 1147MB
[2026-01-28 13:43:07] error: [authController.verifyEmail] Error verifying email: Verification token is required
[2026-01-28 13:43:07] error: [GET] /auth/verify-email?token= - ERROR
[2026-01-28 13:43:07] error: Error Verification token is required
[2026-01-28 13:43:07] info: [GET] /auth/verify-email?token= - 400
[2026-01-28 13:43:07] info: [GET] /auth/verify-email?token=aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[2026-01-28 13:43:07] warn: [MemoryMonitoring] Memory threshold exceeded: 1149MB
[2026-01-28 13:43:07] error: [authController.verifyEmail] Error verifying email: Invalid or expired verification token
[2026-01-28 13:43:07] error: [GET] /auth/verify-email?token=aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa - ERROR
[2026-01-28 13:43:07] error: Error Invalid or expired verification token
[2026-01-28 13:43:07] info: [GET] /auth/verify-email?token=aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa - 400
[2026-01-28 13:43:07] info: [GET] /auth/verify-email?token=%3Cscript%3Ealert(%22xss%22)%3C/script%3E
[2026-01-28 13:43:07] warn: [MemoryMonitoring] Memory threshold exceeded: 1148MB
[2026-01-28 13:43:07] error: [authController.verifyEmail] Error verifying email: Invalid or expired verification token
[2026-01-28 13:43:07] error: [GET] /auth/verify-email?token=%3Cscript%3Ealert(%22xss%22)%3C/script%3E - ERROR
[2026-01-28 13:43:07] error: Error Invalid or expired verification token
[2026-01-28 13:43:07] info: [GET] /auth/verify-email?token=%3Cscript%3Ealert(%22xss%22)%3C/script%3E - 400
[2026-01-28 13:43:07] info: [GET] /auth/verify-email?token=%27;%20DROP%20TABLE%20users;%20--
[2026-01-28 13:43:07] warn: [MemoryMonitoring] Memory threshold exceeded: 1145MB
[2026-01-28 13:43:07] error: [authController.verifyEmail] Error verifying email: Invalid or expired verification token
[2026-01-28 13:43:07] error: [GET] /auth/verify-email?token=%27;%20DROP%20TABLE%20users;%20-- - ERROR
[2026-01-28 13:43:07] error: Error Invalid or expired verification token
[2026-01-28 13:43:07] info: [GET] /auth/verify-email?token=%27;%20DROP%20TABLE%20users;%20-- - 400
[2026-01-28 13:43:07] info: [GET] /auth/verify-email?token=
[2026-01-28 13:43:07] warn: [MemoryMonitoring] Memory threshold exceeded: 1142MB
[2026-01-28 13:43:07] error: [authController.verifyEmail] Error verifying email: Verification token is required
[2026-01-28 13:43:07] error: [GET] /auth/verify-email?token= - ERROR
[2026-01-28 13:43:07] error: Error Verification token is required
[2026-01-28 13:43:07] info: [GET] /auth/verify-email?token= - 400
[2026-01-28 13:43:07] info: [GET] /auth/verify-email?token=
[2026-01-28 13:43:07] warn: [MemoryMonitoring] Memory threshold exceeded: 1145MB
[2026-01-28 13:43:07] error: [authController.verifyEmail] Error verifying email: Verification token is required
[2026-01-28 13:43:07] error: [GET] /auth/verify-email?token= - ERROR
[2026-01-28 13:43:07] error: Error Verification token is required
[2026-01-28 13:43:07] info: [GET] /auth/verify-email?token= - 400
PASS __tests__/integration/email-verification.test.mjs (6.289 s)
  Email Verification System - Integration Tests
    POST /auth/register - Email Verification Integration
      √ should_create_verification_token_on_registration (497 ms)
      √ should_include_email_verified_status_in_response (392 ms)
      √ should_log_verification_email_in_development_mode (401 ms)
    GET /auth/verify-email
      √ should_verify_email_with_valid_token (120 ms)
      √ should_update_user_email_verified_status (105 ms)
      √ should_mark_token_as_used (105 ms)
      √ should_reject_missing_token (106 ms)
      √ should_reject_invalid_token (210 ms)
      √ should_reject_expired_token (103 ms)
      √ should_reject_already_used_token (144 ms)
      √ should_be_publicly_accessible_without_authentication (102 ms)
    POST /auth/resend-verification
      √ should_create_new_verification_token (119 ms)
      √ should_require_authentication (103 ms)
      √ should_reject_if_email_already_verified (108 ms)
      √ should_enforce_rate_limiting (139 ms)
      √ should_cleanup_expired_tokens (115 ms)
    GET /auth/verification-status
      √ should_return_unverified_status_for_new_user (102 ms)
      √ should_return_verified_status_after_verification (103 ms)
      √ should_require_authentication (99 ms)
      √ should_return_user_email_address (101 ms)
    Complete Email Verification Workflow
      √ should_complete_full_registration_to_verification_flow (403 ms)
      √ should_handle_resend_and_verify_workflow (197 ms)
      √ should_prevent_multiple_verification_attempts (154 ms)
    Security and Edge Cases
      √ should_handle_concurrent_verification_requests (156 ms)
      √ should_sanitize_error_messages_to_prevent_enumeration (215 ms)
      √ should_handle_malformed_token_input (545 ms)

[2026-01-28 13:43:07] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:43:07] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:43:07] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:43:07] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:43:08] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:08] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:08] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:08] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:08] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:08] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:08] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:08] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:08] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:08] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:43:08] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 13:43:08] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:08] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:43:08] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:43:08] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:43:08] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:43:08] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:43:08] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 13:43:08] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 13:43:08] info: [POST] /api/auth/register
[2026-01-28 13:43:08] warn: [MemoryMonitoring] Memory threshold exceeded: 1201MB
[2026-01-28 13:43:09] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:09] info: [EmailVerification] Created verification token
[2026-01-28 13:43:09] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:09] info: [authController.register] Verification email sent
[2026-01-28 13:43:09] info: [POST] /api/auth/register - 201
[2026-01-28 13:43:09] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 13:43:09] info: [POST] /api/auth/register
[2026-01-28 13:43:09] warn: [MemoryMonitoring] Memory threshold exceeded: 1211MB
[2026-01-28 13:43:09] warn: [Validation] Input validation failed
[2026-01-28 13:43:09] info: [POST] /api/auth/register - 400
[2026-01-28 13:43:09] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 13:43:09] info: [POST] /api/auth/register
[2026-01-28 13:43:09] warn: [MemoryMonitoring] Memory threshold exceeded: 1206MB
[2026-01-28 13:43:09] warn: [Validation] Input validation failed
[2026-01-28 13:43:09] info: [POST] /api/auth/register - 400
[2026-01-28 13:43:09] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 13:43:09] info: [POST] /api/auth/register
[2026-01-28 13:43:09] warn: [MemoryMonitoring] Memory threshold exceeded: 1204MB
[2026-01-28 13:43:09] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:09] info: [EmailVerification] Created verification token
[2026-01-28 13:43:09] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:09] info: [authController.register] Verification email sent
[2026-01-28 13:43:09] info: [POST] /api/auth/register - 201
[2026-01-28 13:43:09] info: [POST] /api/auth/register
[2026-01-28 13:43:09] warn: [MemoryMonitoring] Memory threshold exceeded: 1205MB
[2026-01-28 13:43:09] error: [authController.register] Error registering user: User with this email or username already exists
[2026-01-28 13:43:09] error: [POST] /api/auth/register - ERROR
[2026-01-28 13:43:09] error: Error User with this email or username already exists
[2026-01-28 13:43:09] info: [POST] /api/auth/register - 400
[2026-01-28 13:43:09] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 13:43:09] info: [POST] /api/auth/register
[2026-01-28 13:43:09] warn: [MemoryMonitoring] Memory threshold exceeded: 1204MB
[2026-01-28 13:43:09] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:09] info: [EmailVerification] Created verification token
[2026-01-28 13:43:09] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:09] info: [authController.register] Verification email sent
[2026-01-28 13:43:09] info: [POST] /api/auth/register - 201
[2026-01-28 13:43:09] info: [POST] /api/auth/login
[2026-01-28 13:43:09] warn: [MemoryMonitoring] Memory threshold exceeded: 1206MB
[2026-01-28 13:43:10] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:10] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 13:43:10] info: [POST] /api/auth/login - 200
[2026-01-28 13:43:10] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 13:43:10] info: [POST] /api/auth/register
[2026-01-28 13:43:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1205MB
[2026-01-28 13:43:10] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:10] info: [EmailVerification] Created verification token
[2026-01-28 13:43:10] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:10] info: [authController.register] Verification email sent
[2026-01-28 13:43:10] info: [POST] /api/auth/register - 201
[2026-01-28 13:43:10] info: [POST] /api/auth/login
[2026-01-28 13:43:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1206MB
[2026-01-28 13:43:10] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:43:10] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:43:10] error: Error Invalid credentials
[2026-01-28 13:43:10] info: [POST] /api/auth/login - 401
[2026-01-28 13:43:10] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 13:43:10] info: [POST] /api/auth/register
[2026-01-28 13:43:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1205MB
[2026-01-28 13:43:10] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:10] info: [EmailVerification] Created verification token
[2026-01-28 13:43:10] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:10] info: [authController.register] Verification email sent
[2026-01-28 13:43:10] info: [POST] /api/auth/register - 201
[2026-01-28 13:43:10] info: [POST] /api/auth/login
[2026-01-28 13:43:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1207MB
[2026-01-28 13:43:11] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:43:11] error: [POST] /api/auth/login - ERROR
[2026-01-28 13:43:11] error: Error Invalid credentials
[2026-01-28 13:43:11] info: [POST] /api/auth/login - 401
[2026-01-28 13:43:11] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 13:43:11] info: [POST] /api/auth/register
[2026-01-28 13:43:11] warn: [MemoryMonitoring] Memory threshold exceeded: 1206MB
[2026-01-28 13:43:11] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:11] info: [EmailVerification] Created verification token
[2026-01-28 13:43:11] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:11] info: [authController.register] Verification email sent
[2026-01-28 13:43:11] info: [POST] /api/auth/register - 201
[2026-01-28 13:43:11] info: [POST] /api/auth/login
[2026-01-28 13:43:11] warn: [MemoryMonitoring] Memory threshold exceeded: 1207MB
[2026-01-28 13:43:11] warn: [Validation] Input validation failed
[2026-01-28 13:43:11] info: [POST] /api/auth/login - 400
[2026-01-28 13:43:11] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 13:43:11] info: [POST] /api/auth/register
[2026-01-28 13:43:11] warn: [MemoryMonitoring] Memory threshold exceeded: 1202MB
[2026-01-28 13:43:11] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:11] info: [EmailVerification] Created verification token
[2026-01-28 13:43:11] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:11] info: [authController.register] Verification email sent
[2026-01-28 13:43:11] info: [POST] /api/auth/register - 201
[2026-01-28 13:43:11] info: [POST] /api/auth/refresh
[2026-01-28 13:43:11] warn: [MemoryMonitoring] Memory threshold exceeded: 1203MB
[2026-01-28 13:43:11] info: [TokenRotation] Token rotation successful
[2026-01-28 13:43:11] info: [authController.refreshToken] Token rotation successful
[2026-01-28 13:43:11] info: [POST] /api/auth/refresh - 200
[2026-01-28 13:43:11] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 13:43:11] info: [POST] /api/auth/register
[2026-01-28 13:43:11] warn: [MemoryMonitoring] Memory threshold exceeded: 1215MB
[2026-01-28 13:43:12] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:12] info: [EmailVerification] Created verification token
[2026-01-28 13:43:12] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:12] info: [authController.register] Verification email sent
[2026-01-28 13:43:12] info: [POST] /api/auth/register - 201
[2026-01-28 13:43:12] info: [POST] /api/auth/refresh
[2026-01-28 13:43:12] warn: [MemoryMonitoring] Memory threshold exceeded: 1214MB
[2026-01-28 13:43:12] warn: [TokenRotation] Token reuse detected during rotation
[2026-01-28 13:43:12] warn: [authController.refreshToken] Token family invalidated due to reuse detection
[2026-01-28 13:43:12] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again
[2026-01-28 13:43:12] error: [POST] /api/auth/refresh - ERROR
[2026-01-28 13:43:12] error: Error Token reuse detected - please login again
[2026-01-28 13:43:12] info: [POST] /api/auth/refresh - 401
[2026-01-28 13:43:12] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 13:43:12] info: [POST] /api/auth/register
[2026-01-28 13:43:12] warn: [MemoryMonitoring] Memory threshold exceeded: 1213MB
[2026-01-28 13:43:12] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:12] info: [EmailVerification] Created verification token
[2026-01-28 13:43:12] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:12] info: [authController.register] Verification email sent
[2026-01-28 13:43:12] info: [POST] /api/auth/register - 201
[2026-01-28 13:43:12] info: [POST] /api/auth/refresh
[2026-01-28 13:43:12] warn: [MemoryMonitoring] Memory threshold exceeded: 1213MB
[2026-01-28 13:43:12] warn: [Validation] Input validation failed
[2026-01-28 13:43:12] info: [POST] /api/auth/refresh - 400
[2026-01-28 13:43:12] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 13:43:12] info: [POST] /api/auth/register
[2026-01-28 13:43:12] warn: [MemoryMonitoring] Memory threshold exceeded: 1208MB
[2026-01-28 13:43:12] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:12] info: [EmailVerification] Created verification token
[2026-01-28 13:43:12] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:12] info: [authController.register] Verification email sent
[2026-01-28 13:43:12] info: [POST] /api/auth/register - 201
[2026-01-28 13:43:12] info: [GET] /api/auth/me
[2026-01-28 13:43:12] warn: [MemoryMonitoring] Memory threshold exceeded: 1208MB
[2026-01-28 13:43:12] info: [auth:fp2pb5] Starting auth for GET /me
[2026-01-28 13:43:12] info: [auth:fp2pb5] Token from cookie: false
[2026-01-28 13:43:12] info: [auth:fp2pb5] Token from header: true
[2026-01-28 13:43:12] info: [auth:fp2pb5] Authenticated user 51fb9e96-1d1a-4c02-a0fd-d186706d2a0f
[2026-01-28 13:43:12] info: [GET] /api/auth/me - 200
[2026-01-28 13:43:12] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 13:43:12] info: [POST] /api/auth/register
[2026-01-28 13:43:12] warn: [MemoryMonitoring] Memory threshold exceeded: 1206MB
[2026-01-28 13:43:13] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:13] info: [EmailVerification] Created verification token
[2026-01-28 13:43:13] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:13] info: [authController.register] Verification email sent
[2026-01-28 13:43:13] info: [POST] /api/auth/register - 201
[2026-01-28 13:43:13] info: [GET] /api/auth/me
[2026-01-28 13:43:13] warn: [MemoryMonitoring] Memory threshold exceeded: 1206MB
[2026-01-28 13:43:13] info: [auth:wzdc7n] Starting auth for GET /me
[2026-01-28 13:43:13] info: [auth:wzdc7n] Token from cookie: false
[2026-01-28 13:43:13] warn: [auth:wzdc7n] Access token is required for GET /me from ::ffff:127.0.0.1
[2026-01-28 13:43:13] info: [GET] /api/auth/me - 401
[2026-01-28 13:43:13] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 13:43:13] info: [POST] /api/auth/register
[2026-01-28 13:43:13] warn: [MemoryMonitoring] Memory threshold exceeded: 1204MB
[2026-01-28 13:43:13] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:13] info: [EmailVerification] Created verification token
[2026-01-28 13:43:13] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:13] info: [authController.register] Verification email sent
[2026-01-28 13:43:13] info: [POST] /api/auth/register - 201
[2026-01-28 13:43:13] info: [GET] /api/auth/me
[2026-01-28 13:43:13] warn: [MemoryMonitoring] Memory threshold exceeded: 1204MB
[2026-01-28 13:43:13] info: [auth:g01l8d] Starting auth for GET /me
[2026-01-28 13:43:13] info: [auth:g01l8d] Token from cookie: false
[2026-01-28 13:43:13] info: [auth:g01l8d] Token from header: true
[2026-01-28 13:43:13] warn: [auth:g01l8d] Invalid or expired token for GET /me from ::ffff:127.0.0.1
[2026-01-28 13:43:13] info: [GET] /api/auth/me - 401
[2026-01-28 13:43:13] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 13:43:13] info: [POST] /api/auth/register
[2026-01-28 13:43:13] warn: [MemoryMonitoring] Memory threshold exceeded: 1216MB
[2026-01-28 13:43:13] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:13] info: [EmailVerification] Created verification token
[2026-01-28 13:43:13] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:13] info: [authController.register] Verification email sent
[2026-01-28 13:43:13] info: [POST] /api/auth/register - 201
[2026-01-28 13:43:13] info: [POST] /api/auth/logout
[2026-01-28 13:43:13] warn: [MemoryMonitoring] Memory threshold exceeded: 1215MB
[2026-01-28 13:43:13] info: [auth:tvmn0d] Starting auth for POST /logout
[2026-01-28 13:43:13] info: [auth:tvmn0d] Token from cookie: false
[2026-01-28 13:43:13] info: [auth:tvmn0d] Token from header: true
[2026-01-28 13:43:13] info: [auth:tvmn0d] Authenticated user 7883ca2f-a46f-484b-8d40-a732286a2543
[2026-01-28 13:43:13] info: [POST] /api/auth/logout - 200
[2026-01-28 13:43:13] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 13:43:13] info: [POST] /api/auth/register
[2026-01-28 13:43:13] warn: [MemoryMonitoring] Memory threshold exceeded: 1216MB
[2026-01-28 13:43:14] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:14] info: [EmailVerification] Created verification token
[2026-01-28 13:43:14] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:14] info: [authController.register] Verification email sent
[2026-01-28 13:43:14] info: [POST] /api/auth/register - 201
[2026-01-28 13:43:14] info: [POST] /api/auth/logout
[2026-01-28 13:43:14] warn: [MemoryMonitoring] Memory threshold exceeded: 1215MB
[2026-01-28 13:43:14] info: [auth:obmcd17] Starting auth for POST /logout
[2026-01-28 13:43:14] info: [auth:obmcd17] Token from cookie: false
[2026-01-28 13:43:14] warn: [auth:obmcd17] Access token is required for POST /logout from ::ffff:127.0.0.1
[2026-01-28 13:43:14] info: [POST] /api/auth/logout - 401
PASS tests/auth.test.mjs (6.467 s)
  🔐 INTEGRATION: Authentication System - User Registration & Session Management
    POST /api/auth/register
      √ should register a new user and player successfully (405 ms)
      √ should reject registration with invalid email (22 ms)
      √ should reject registration with weak password (19 ms)
      √ should reject duplicate email registration (343 ms)
    POST /api/auth/login
      √ should login successfully with valid credentials (616 ms)
      √ should reject login with invalid email (339 ms)
      √ should reject login with invalid password (609 ms)
      √ should reject login with malformed email (325 ms)
    POST /api/auth/refresh
      √ should refresh token successfully with valid refresh token (341 ms)
      √ should reject refresh with invalid token (329 ms)
      √ should reject refresh without token (324 ms)
    GET /api/auth/me
      √ should get user profile successfully with valid token (327 ms)
      √ should reject profile request without token (322 ms)
      √ should reject profile request with invalid token (321 ms)
    POST /api/auth/logout
      √ should logout successfully with valid token (331 ms)
      √ should reject logout without token (330 ms)

[2026-01-28 13:43:14] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:43:14] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:43:14] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:43:14] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:43:14] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:14] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:14] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:14] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:14] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:14] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:14] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:14] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:14] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:14] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:43:15] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:15] info: [EmailVerification] Created verification token
[2026-01-28 13:43:15] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:15] info: [authController.register] Verification email sent
[2026-01-28 13:43:15] info: [auth:9r401d] Starting auth for GET /api/test/success
[2026-01-28 13:43:15] info: [auth:9r401d] Token from cookie: false
[2026-01-28 13:43:15] info: [auth:9r401d] Token from header: true
[2026-01-28 13:43:15] info: [auth:9r401d] Authenticated user 5658b915-d444-4d28-92e3-3c027d6a4de6
[2026-01-28 13:43:15] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:15] info: [EmailVerification] Created verification token
[2026-01-28 13:43:15] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:15] info: [authController.register] Verification email sent
[2026-01-28 13:43:15] info: [auth:j0d2ec] Starting auth for GET /api/test/error
[2026-01-28 13:43:15] info: [auth:j0d2ec] Token from cookie: false
[2026-01-28 13:43:15] info: [auth:j0d2ec] Token from header: true
[2026-01-28 13:43:15] info: [auth:j0d2ec] Authenticated user baee8ba1-8050-454a-ac05-16415ffc2df3
[2026-01-28 13:43:15] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:15] info: [EmailVerification] Created verification token
[2026-01-28 13:43:15] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:15] info: [authController.register] Verification email sent
[2026-01-28 13:43:16] info: [auth:rk174l] Starting auth for GET /api/test/not-found
[2026-01-28 13:43:16] info: [auth:rk174l] Token from cookie: false
[2026-01-28 13:43:16] info: [auth:rk174l] Token from header: true
[2026-01-28 13:43:16] info: [auth:rk174l] Authenticated user ef9d9247-cd16-4146-a14a-0075aa755ceb
[2026-01-28 13:43:16] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:16] info: [EmailVerification] Created verification token
[2026-01-28 13:43:16] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:16] info: [authController.register] Verification email sent
[2026-01-28 13:43:16] info: [auth:tyohfp] Starting auth for GET /api/test/validation-error
[2026-01-28 13:43:16] info: [auth:tyohfp] Token from cookie: false
[2026-01-28 13:43:16] info: [auth:tyohfp] Token from header: true
[2026-01-28 13:43:16] info: [auth:tyohfp] Authenticated user a5aedd22-defa-45e4-8dcd-fdcbce0f102a
[2026-01-28 13:43:16] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:16] info: [EmailVerification] Created verification token
[2026-01-28 13:43:16] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:16] info: [authController.register] Verification email sent
[2026-01-28 13:43:16] info: [auth:v1qk6] Starting auth for GET /api/test/paginated
[2026-01-28 13:43:16] info: [auth:v1qk6] Token from cookie: false
[2026-01-28 13:43:16] info: [auth:v1qk6] Token from header: true
[2026-01-28 13:43:16] info: [auth:v1qk6] Authenticated user 42182d8c-4056-4afa-b144-dcc0d8f6edab
[2026-01-28 13:43:16] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:16] info: [EmailVerification] Created verification token
[2026-01-28 13:43:16] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:16] info: [authController.register] Verification email sent
[2026-01-28 13:43:16] info: [auth:w90wnj] Starting auth for GET /api/test/paginated
[2026-01-28 13:43:16] info: [auth:w90wnj] Token from cookie: false
[2026-01-28 13:43:16] info: [auth:w90wnj] Token from header: true
[2026-01-28 13:43:16] info: [auth:w90wnj] Authenticated user 74befbb0-1679-4af2-bf18-c44f7cfdb7eb
[2026-01-28 13:43:17] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:17] info: [EmailVerification] Created verification token
[2026-01-28 13:43:17] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:17] info: [authController.register] Verification email sent
[2026-01-28 13:43:17] info: [auth:jl8lxj] Starting auth for GET /api/test/success
[2026-01-28 13:43:17] info: [auth:jl8lxj] Token from cookie: false
[2026-01-28 13:43:17] info: [auth:jl8lxj] Token from header: true
[2026-01-28 13:43:17] info: [auth:jl8lxj] Authenticated user e0ef90f2-3f45-46db-8206-1593244da1cb
[2026-01-28 13:43:17] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:17] info: [EmailVerification] Created verification token
[2026-01-28 13:43:17] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:17] info: [authController.register] Verification email sent
[2026-01-28 13:43:17] info: [auth:43b76j] Starting auth for GET /api/test/large-data
[2026-01-28 13:43:17] info: [auth:43b76j] Token from cookie: false
[2026-01-28 13:43:17] info: [auth:43b76j] Token from header: true
[2026-01-28 13:43:17] info: [auth:43b76j] Authenticated user b079135a-6db3-4516-9247-20fdda59f254
[2026-01-28 13:43:17] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:17] info: [EmailVerification] Created verification token
[2026-01-28 13:43:17] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:17] info: [authController.register] Verification email sent
[2026-01-28 13:43:17] info: [auth:mph0bn] Starting auth for GET /api/test/field-selection
[2026-01-28 13:43:17] info: [auth:mph0bn] Token from cookie: false
[2026-01-28 13:43:17] info: [auth:mph0bn] Token from header: true
[2026-01-28 13:43:17] info: [auth:mph0bn] Authenticated user f5f19484-f522-4374-810b-4b13ed4302b5
[2026-01-28 13:43:18] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:18] info: [EmailVerification] Created verification token
[2026-01-28 13:43:18] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:18] info: [authController.register] Verification email sent
[2026-01-28 13:43:18] info: [auth:njxtvd] Starting auth for GET /api/test/field-selection
[2026-01-28 13:43:18] info: [auth:njxtvd] Token from cookie: false
[2026-01-28 13:43:18] info: [auth:njxtvd] Token from header: true
[2026-01-28 13:43:18] info: [auth:njxtvd] Authenticated user 38a119d1-b926-47a9-948e-55176cda09cd
[2026-01-28 13:43:18] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:18] info: [EmailVerification] Created verification token
[2026-01-28 13:43:18] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:18] info: [authController.register] Verification email sent
[2026-01-28 13:43:18] info: [auth:zcdm2a] Starting auth for GET /api/test/etag
[2026-01-28 13:43:18] info: [auth:zcdm2a] Token from cookie: false
[2026-01-28 13:43:18] info: [auth:zcdm2a] Token from header: true
[2026-01-28 13:43:18] info: [auth:zcdm2a] Authenticated user db87a089-833d-43ef-b2d2-cb65d14b3697
[2026-01-28 13:43:18] info: [auth:lhib79] Starting auth for GET /api/test/etag
[2026-01-28 13:43:18] info: [auth:lhib79] Token from cookie: false
[2026-01-28 13:43:18] info: [auth:lhib79] Token from header: true
[2026-01-28 13:43:18] info: [auth:lhib79] Authenticated user db87a089-833d-43ef-b2d2-cb65d14b3697
[2026-01-28 13:43:18] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:18] info: [EmailVerification] Created verification token
[2026-01-28 13:43:18] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:18] info: [authController.register] Verification email sent
[2026-01-28 13:43:19] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:19] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 13:43:19] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:19] info: [EmailVerification] Created verification token
[2026-01-28 13:43:19] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:19] info: [authController.register] Verification email sent
[2026-01-28 13:43:19] info: [health] Health check passed
[2026-01-28 13:43:19] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:19] info: [EmailVerification] Created verification token
[2026-01-28 13:43:19] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:19] info: [authController.register] Verification email sent
[2026-01-28 13:43:19] info: [auth:tojz19] Starting auth for GET /api/test/success
[2026-01-28 13:43:19] info: [auth:tojz19] Token from cookie: false
[2026-01-28 13:43:19] warn: [auth:tojz19] Access token is required for GET /api/test/success from ::ffff:127.0.0.1
[2026-01-28 13:43:19] info: [auth:qwgsc] Starting auth for GET /api/test/error
[2026-01-28 13:43:19] info: [auth:qwgsc] Token from cookie: false
[2026-01-28 13:43:19] warn: [auth:qwgsc] Access token is required for GET /api/test/error from ::ffff:127.0.0.1
[2026-01-28 13:43:19] info: [auth:vnl4ws] Starting auth for GET /api/test/large-data
[2026-01-28 13:43:19] info: [auth:vnl4ws] Token from cookie: false
[2026-01-28 13:43:19] warn: [auth:vnl4ws] Access token is required for GET /api/test/large-data from ::ffff:127.0.0.1
[2026-01-28 13:43:20] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:20] info: [EmailVerification] Created verification token
[2026-01-28 13:43:20] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:20] info: [authController.register] Verification email sent
[2026-01-28 13:43:20] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:20] info: [EmailVerification] Created verification token
[2026-01-28 13:43:20] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:20] info: [authController.register] Verification email sent
[2026-01-28 13:43:20] warn: [Validation] Input validation failed
[2026-01-28 13:43:20] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:20] info: [EmailVerification] Created verification token
[2026-01-28 13:43:20] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:20] info: [authController.register] Verification email sent
[2026-01-28 13:43:20] info: [auth:75wtz] Starting auth for GET /api/test/success
[2026-01-28 13:43:20] info: [auth:75wtz] Token from cookie: false
[2026-01-28 13:43:20] info: [auth:75wtz] Token from header: true
[2026-01-28 13:43:20] info: [auth:75wtz] Authenticated user 87cccb00-f6e7-4c77-87dd-db14a089f338
[2026-01-28 13:43:21] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:21] info: [EmailVerification] Created verification token
[2026-01-28 13:43:21] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:21] info: [authController.register] Verification email sent
[2026-01-28 13:43:21] info: [auth:wwwvsf] Starting auth for GET /api/test/large-data
[2026-01-28 13:43:21] info: [auth:wwwvsf] Token from cookie: false
[2026-01-28 13:43:21] info: [auth:wwwvsf] Token from header: true
[2026-01-28 13:43:21] info: [auth:wwwvsf] Authenticated user 2754a0dc-8bca-4fcc-8adf-6881f37bd581
PASS tests/integration/api-response-integration.test.mjs (7.065 s)
  🔄 API Response Integration Tests
    📋 Response Format Standardization
      √ should provide consistent success response format (516 ms)
      √ should provide consistent error response format (324 ms)
      √ should provide consistent not found response format (333 ms)
      √ should provide consistent validation error response format (317 ms)
    📊 Pagination Response Validation
      √ should provide consistent paginated response format (322 ms)
      √ should handle pagination edge cases correctly (315 ms)
    ⚡ Performance Monitoring Integration
      √ should include performance headers in responses (315 ms)
      √ should monitor large response performance (332 ms)
    🔧 Response Optimization Features
      √ should support field selection optimization (325 ms)
      √ should support field exclusion optimization (327 ms)
      √ should generate and validate ETags correctly (342 ms)
    🔗 Cross-System Response Consistency
      √ should maintain consistent response format across auth endpoints (606 ms)
      √ should maintain consistent response format across health endpoints (339 ms)
      √ should handle authentication errors consistently (373 ms)
    🛡️ Error Handling Consistency
      √ should handle invalid JSON gracefully (315 ms)
      √ should handle validation errors consistently (313 ms)
    📈 Response Performance Benchmarking
      √ should meet performance benchmarks for simple responses (323 ms)
      √ should meet performance benchmarks for large responses (334 ms)

[2026-01-28 13:43:21] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:43:21] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:43:21] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:43:21] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:43:22] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:22] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:22] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:22] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:22] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:22] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:22] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:22] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:22] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:22] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:43:22] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 13:43:22] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:22] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:43:22] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:43:22] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:43:22] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:43:22] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:43:22] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 13:43:22] info: [POST] /api/horses
[2026-01-28 13:43:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1304MB
[2026-01-28 13:43:22] info: [auth:5ewc5j] Starting auth for POST /horses
[2026-01-28 13:43:22] info: [auth:5ewc5j] Token from cookie: false
[2026-01-28 13:43:22] info: [auth:5ewc5j] Token from header: true
[2026-01-28 13:43:22] info: [auth:5ewc5j] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:22] info: [auth:dhfwja] Starting auth for POST /
[2026-01-28 13:43:22] info: [auth:dhfwja] Token from cookie: false
[2026-01-28 13:43:22] info: [auth:dhfwja] Token from header: true
[2026-01-28 13:43:22] info: [auth:dhfwja] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:22] info: [horseModel.createHorse] Successfully created horse: Genetic Test Stallion (ID: 146744)
[2026-01-28 13:43:22] info: [horseRoutes] Created new horse: Genetic Test Stallion (ID: 146744)
[2026-01-28 13:43:22] info: [POST] /api/horses - 201
[2026-01-28 13:43:22] info: [POST] /api/horses
[2026-01-28 13:43:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1310MB
[2026-01-28 13:43:22] info: [auth:s9pt2s] Starting auth for POST /horses
[2026-01-28 13:43:22] info: [auth:s9pt2s] Token from cookie: false
[2026-01-28 13:43:22] info: [auth:s9pt2s] Token from header: true
[2026-01-28 13:43:22] info: [auth:s9pt2s] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:22] info: [auth:6dbe1q] Starting auth for POST /
[2026-01-28 13:43:22] info: [auth:6dbe1q] Token from cookie: false
[2026-01-28 13:43:22] info: [auth:6dbe1q] Token from header: true
[2026-01-28 13:43:22] info: [auth:6dbe1q] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:22] info: [horseModel.createHorse] Successfully created horse: Genetic Test Mare (ID: 146745)
[2026-01-28 13:43:22] info: [horseRoutes] Created new horse: Genetic Test Mare (ID: 146745)
[2026-01-28 13:43:22] info: [POST] /api/horses - 201
[2026-01-28 13:43:22] info: [POST] /api/horses
[2026-01-28 13:43:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1303MB
[2026-01-28 13:43:22] info: [auth:qe0wii] Starting auth for POST /horses
[2026-01-28 13:43:22] info: [auth:qe0wii] Token from cookie: false
[2026-01-28 13:43:22] info: [auth:qe0wii] Token from header: true
[2026-01-28 13:43:22] info: [auth:qe0wii] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:22] info: [auth:8cvbh] Starting auth for POST /
[2026-01-28 13:43:22] info: [auth:8cvbh] Token from cookie: false
[2026-01-28 13:43:22] info: [auth:8cvbh] Token from header: true
[2026-01-28 13:43:22] info: [auth:8cvbh] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:22] info: [POST] /api/horses
[2026-01-28 13:43:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1301MB
[2026-01-28 13:43:22] info: [auth:rc3j7] Starting auth for POST /horses
[2026-01-28 13:43:22] info: [auth:rc3j7] Token from cookie: false
[2026-01-28 13:43:22] info: [auth:rc3j7] Token from header: true
[2026-01-28 13:43:22] info: [auth:rc3j7] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:22] info: [auth:3gze5s] Starting auth for POST /
[2026-01-28 13:43:22] info: [auth:3gze5s] Token from cookie: false
[2026-01-28 13:43:22] info: [auth:3gze5s] Token from header: true
[2026-01-28 13:43:22] info: [auth:3gze5s] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:22] info: [horseModel.createHorse] Successfully created horse: Population Horse 1 (ID: 146746)
[2026-01-28 13:43:22] info: [horseRoutes] Created new horse: Population Horse 1 (ID: 146746)
[2026-01-28 13:43:22] info: [horseModel.createHorse] Successfully created horse: Population Horse 2 (ID: 146747)
[2026-01-28 13:43:22] info: [horseRoutes] Created new horse: Population Horse 2 (ID: 146747)
[2026-01-28 13:43:22] info: [POST] /api/horses - 201
[2026-01-28 13:43:22] info: [POST] /api/horses - 201
[2026-01-28 13:43:22] info: [POST] /api/breeding/genetic-probability
[2026-01-28 13:43:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1312MB
[2026-01-28 13:43:22] info: [auth:re6ue3] Starting auth for POST /breeding/genetic-probability
[2026-01-28 13:43:22] info: [auth:re6ue3] Token from cookie: false
[2026-01-28 13:43:22] info: [auth:re6ue3] Token from header: true
[2026-01-28 13:43:22] info: [auth:re6ue3] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:22] info: [auth:obbi9h] Starting auth for POST /breeding/genetic-probability
[2026-01-28 13:43:22] info: [auth:obbi9h] Token from cookie: false
[2026-01-28 13:43:22] info: [auth:obbi9h] Token from header: true
[2026-01-28 13:43:22] info: [auth:obbi9h] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:22] info: [advancedBreedingGeneticsRoutes.genetic-probability] User 0de0a285-7799-4b20-8bf1-0ebe5ca196f5 calculating for stallion 146744 and mare 146745
[2026-01-28 13:43:22] info: Calculating enhanced genetic probabilities
[2026-01-28 13:43:22] info: [advancedLineageAnalysisService.generateLineageTree] Generating tree for stallion 146744 and mare 146745, 3 generations
[2026-01-28 13:43:22] info: [advancedLineageAnalysisService.generateLineageTree] Generated tree with 2 horses across 1 generations
[2026-01-28 13:43:22] info: Calculating genetic diversity impact
[2026-01-28 13:43:22] info: Calculating multi-generational predictions
[2026-01-28 13:43:22] info: [POST] /api/breeding/genetic-probability - 200
[2026-01-28 13:43:22] info: [POST] /api/horses
[2026-01-28 13:43:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1313MB
[2026-01-28 13:43:22] info: [auth:ivkk6m] Starting auth for POST /horses
[2026-01-28 13:43:22] info: [auth:ivkk6m] Token from cookie: false
[2026-01-28 13:43:22] info: [auth:ivkk6m] Token from header: true
[2026-01-28 13:43:23] info: [auth:ivkk6m] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:23] info: [auth:2t108] Starting auth for POST /
[2026-01-28 13:43:23] info: [auth:2t108] Token from cookie: false
[2026-01-28 13:43:23] info: [auth:2t108] Token from header: true
[2026-01-28 13:43:23] info: [auth:2t108] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:23] info: [horseModel.createHorse] Successfully created horse: Genetic Test Stallion (ID: 146748)
[2026-01-28 13:43:23] info: [horseRoutes] Created new horse: Genetic Test Stallion (ID: 146748)
[2026-01-28 13:43:23] info: [POST] /api/horses - 201
[2026-01-28 13:43:23] info: [POST] /api/horses
[2026-01-28 13:43:23] warn: [MemoryMonitoring] Memory threshold exceeded: 1303MB
[2026-01-28 13:43:23] info: [auth:tbjr68] Starting auth for POST /horses
[2026-01-28 13:43:23] info: [auth:tbjr68] Token from cookie: false
[2026-01-28 13:43:23] info: [auth:tbjr68] Token from header: true
[2026-01-28 13:43:23] info: [auth:tbjr68] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:23] info: [auth:w66fi7] Starting auth for POST /
[2026-01-28 13:43:23] info: [auth:w66fi7] Token from cookie: false
[2026-01-28 13:43:23] info: [auth:w66fi7] Token from header: true
[2026-01-28 13:43:23] info: [auth:w66fi7] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:23] info: [horseModel.createHorse] Successfully created horse: Genetic Test Mare (ID: 146749)
[2026-01-28 13:43:23] info: [horseRoutes] Created new horse: Genetic Test Mare (ID: 146749)
[2026-01-28 13:43:23] info: [POST] /api/horses - 201
[2026-01-28 13:43:23] info: [POST] /api/horses
[2026-01-28 13:43:23] warn: [MemoryMonitoring] Memory threshold exceeded: 1309MB
[2026-01-28 13:43:23] info: [auth:o3nctd] Starting auth for POST /horses
[2026-01-28 13:43:23] info: [auth:o3nctd] Token from cookie: false
[2026-01-28 13:43:23] info: [auth:o3nctd] Token from header: true
[2026-01-28 13:43:23] info: [auth:o3nctd] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:23] info: [auth:8vh71t] Starting auth for POST /
[2026-01-28 13:43:23] info: [auth:8vh71t] Token from cookie: false
[2026-01-28 13:43:23] info: [auth:8vh71t] Token from header: true
[2026-01-28 13:43:23] info: [auth:8vh71t] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:23] info: [POST] /api/horses
[2026-01-28 13:43:23] warn: [MemoryMonitoring] Memory threshold exceeded: 1307MB
[2026-01-28 13:43:23] info: [auth:5ysfq] Starting auth for POST /horses
[2026-01-28 13:43:23] info: [auth:5ysfq] Token from cookie: false
[2026-01-28 13:43:23] info: [auth:5ysfq] Token from header: true
[2026-01-28 13:43:23] info: [auth:5ysfq] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:23] info: [auth:e9hi4t] Starting auth for POST /
[2026-01-28 13:43:23] info: [auth:e9hi4t] Token from cookie: false
[2026-01-28 13:43:23] info: [auth:e9hi4t] Token from header: true
[2026-01-28 13:43:23] info: [auth:e9hi4t] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:23] info: [horseModel.createHorse] Successfully created horse: Population Horse 1 (ID: 146750)
[2026-01-28 13:43:23] info: [horseRoutes] Created new horse: Population Horse 1 (ID: 146750)
[2026-01-28 13:43:23] info: [POST] /api/horses - 201
[2026-01-28 13:43:23] info: [horseModel.createHorse] Successfully created horse: Population Horse 2 (ID: 146751)
[2026-01-28 13:43:23] info: [horseRoutes] Created new horse: Population Horse 2 (ID: 146751)
[2026-01-28 13:43:23] info: [POST] /api/horses - 201
[2026-01-28 13:43:23] info: [POST] /api/breeding/genetic-probability
[2026-01-28 13:43:23] warn: [MemoryMonitoring] Memory threshold exceeded: 1303MB
[2026-01-28 13:43:23] info: [auth:q2jawn] Starting auth for POST /breeding/genetic-probability
[2026-01-28 13:43:23] info: [auth:q2jawn] Token from cookie: false
[2026-01-28 13:43:23] info: [auth:q2jawn] Token from header: true
[2026-01-28 13:43:23] info: [auth:q2jawn] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:23] info: [auth:356c9] Starting auth for POST /breeding/genetic-probability
[2026-01-28 13:43:23] info: [auth:356c9] Token from cookie: false
[2026-01-28 13:43:23] info: [auth:356c9] Token from header: true
[2026-01-28 13:43:23] info: [auth:356c9] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:23] info: [advancedBreedingGeneticsRoutes.genetic-probability] User 0de0a285-7799-4b20-8bf1-0ebe5ca196f5 calculating for stallion 99999 and mare 146749
[2026-01-28 13:43:23] info: [POST] /api/breeding/genetic-probability - 404
[2026-01-28 13:43:23] info: [POST] /api/horses
[2026-01-28 13:43:23] warn: [MemoryMonitoring] Memory threshold exceeded: 1311MB
[2026-01-28 13:43:23] info: [auth:k2bm3u] Starting auth for POST /horses
[2026-01-28 13:43:23] info: [auth:k2bm3u] Token from cookie: false
[2026-01-28 13:43:23] info: [auth:k2bm3u] Token from header: true
[2026-01-28 13:43:23] info: [auth:k2bm3u] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:23] info: [auth:6vlf64] Starting auth for POST /
[2026-01-28 13:43:23] info: [auth:6vlf64] Token from cookie: false
[2026-01-28 13:43:23] info: [auth:6vlf64] Token from header: true
[2026-01-28 13:43:23] info: [auth:6vlf64] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:23] info: [horseModel.createHorse] Successfully created horse: Genetic Test Stallion (ID: 146752)
[2026-01-28 13:43:23] info: [horseRoutes] Created new horse: Genetic Test Stallion (ID: 146752)
[2026-01-28 13:43:23] info: [POST] /api/horses - 201
[2026-01-28 13:43:23] info: [POST] /api/horses
[2026-01-28 13:43:23] warn: [MemoryMonitoring] Memory threshold exceeded: 1315MB
[2026-01-28 13:43:23] info: [auth:4s768p] Starting auth for POST /horses
[2026-01-28 13:43:23] info: [auth:4s768p] Token from cookie: false
[2026-01-28 13:43:23] info: [auth:4s768p] Token from header: true
[2026-01-28 13:43:23] info: [auth:4s768p] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:23] info: [auth:80z6gi] Starting auth for POST /
[2026-01-28 13:43:23] info: [auth:80z6gi] Token from cookie: false
[2026-01-28 13:43:23] info: [auth:80z6gi] Token from header: true
[2026-01-28 13:43:23] info: [auth:80z6gi] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:23] info: [horseModel.createHorse] Successfully created horse: Genetic Test Mare (ID: 146753)
[2026-01-28 13:43:23] info: [horseRoutes] Created new horse: Genetic Test Mare (ID: 146753)
[2026-01-28 13:43:23] info: [POST] /api/horses - 201
[2026-01-28 13:43:23] info: [POST] /api/horses
[2026-01-28 13:43:23] warn: [MemoryMonitoring] Memory threshold exceeded: 1306MB
[2026-01-28 13:43:23] info: [auth:1bgi5s] Starting auth for POST /horses
[2026-01-28 13:43:23] info: [auth:1bgi5s] Token from cookie: false
[2026-01-28 13:43:23] info: [auth:1bgi5s] Token from header: true
[2026-01-28 13:43:23] info: [auth:1bgi5s] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:23] info: [auth:28cec9] Starting auth for POST /
[2026-01-28 13:43:23] info: [auth:28cec9] Token from cookie: false
[2026-01-28 13:43:23] info: [auth:28cec9] Token from header: true
[2026-01-28 13:43:23] info: [auth:28cec9] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:23] info: [POST] /api/horses
[2026-01-28 13:43:23] warn: [MemoryMonitoring] Memory threshold exceeded: 1304MB
[2026-01-28 13:43:23] info: [auth:yybh5n] Starting auth for POST /horses
[2026-01-28 13:43:23] info: [auth:yybh5n] Token from cookie: false
[2026-01-28 13:43:23] info: [auth:yybh5n] Token from header: true
[2026-01-28 13:43:23] info: [auth:yybh5n] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:23] info: [auth:7ge4zn] Starting auth for POST /
[2026-01-28 13:43:23] info: [auth:7ge4zn] Token from cookie: false
[2026-01-28 13:43:23] info: [auth:7ge4zn] Token from header: true
[2026-01-28 13:43:23] info: [auth:7ge4zn] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:23] info: [horseModel.createHorse] Successfully created horse: Population Horse 1 (ID: 146754)
[2026-01-28 13:43:23] info: [horseRoutes] Created new horse: Population Horse 1 (ID: 146754)
[2026-01-28 13:43:23] info: [horseModel.createHorse] Successfully created horse: Population Horse 2 (ID: 146755)
[2026-01-28 13:43:23] info: [horseRoutes] Created new horse: Population Horse 2 (ID: 146755)
[2026-01-28 13:43:23] info: [POST] /api/horses - 201
[2026-01-28 13:43:23] info: [POST] /api/horses - 201
[2026-01-28 13:43:23] info: [POST] /api/breeding/genetic-probability
[2026-01-28 13:43:23] warn: [MemoryMonitoring] Memory threshold exceeded: 1315MB
[2026-01-28 13:43:23] info: [auth:noe7came] Starting auth for POST /breeding/genetic-probability
[2026-01-28 13:43:23] info: [auth:noe7came] Token from cookie: false
[2026-01-28 13:43:23] warn: [auth:noe7came] Access token is required for POST /breeding/genetic-probability from ::ffff:127.0.0.1
[2026-01-28 13:43:23] info: [POST] /api/breeding/genetic-probability - 401
[2026-01-28 13:43:23] info: [POST] /api/horses
[2026-01-28 13:43:23] warn: [MemoryMonitoring] Memory threshold exceeded: 1315MB
[2026-01-28 13:43:23] info: [auth:y1phqn] Starting auth for POST /horses
[2026-01-28 13:43:23] info: [auth:y1phqn] Token from cookie: false
[2026-01-28 13:43:23] info: [auth:y1phqn] Token from header: true
[2026-01-28 13:43:23] info: [auth:y1phqn] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:23] info: [auth:t130v8] Starting auth for POST /
[2026-01-28 13:43:23] info: [auth:t130v8] Token from cookie: false
[2026-01-28 13:43:23] info: [auth:t130v8] Token from header: true
[2026-01-28 13:43:23] info: [auth:t130v8] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:23] info: [horseModel.createHorse] Successfully created horse: Genetic Test Stallion (ID: 146756)
[2026-01-28 13:43:23] info: [horseRoutes] Created new horse: Genetic Test Stallion (ID: 146756)
[2026-01-28 13:43:23] info: [POST] /api/horses - 201
[2026-01-28 13:43:23] info: [POST] /api/horses
[2026-01-28 13:43:23] warn: [MemoryMonitoring] Memory threshold exceeded: 1305MB
[2026-01-28 13:43:23] info: [auth:0nn14p] Starting auth for POST /horses
[2026-01-28 13:43:23] info: [auth:0nn14p] Token from cookie: false
[2026-01-28 13:43:23] info: [auth:0nn14p] Token from header: true
[2026-01-28 13:43:23] info: [auth:0nn14p] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:23] info: [auth:r4sfl] Starting auth for POST /
[2026-01-28 13:43:23] info: [auth:r4sfl] Token from cookie: false
[2026-01-28 13:43:23] info: [auth:r4sfl] Token from header: true
[2026-01-28 13:43:23] info: [auth:r4sfl] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:23] info: [horseModel.createHorse] Successfully created horse: Genetic Test Mare (ID: 146757)
[2026-01-28 13:43:23] info: [horseRoutes] Created new horse: Genetic Test Mare (ID: 146757)
[2026-01-28 13:43:23] info: [POST] /api/horses - 201
[2026-01-28 13:43:23] info: [POST] /api/horses
[2026-01-28 13:43:23] warn: [MemoryMonitoring] Memory threshold exceeded: 1311MB
[2026-01-28 13:43:23] info: [auth:0645kr] Starting auth for POST /horses
[2026-01-28 13:43:23] info: [auth:0645kr] Token from cookie: false
[2026-01-28 13:43:23] info: [auth:0645kr] Token from header: true
[2026-01-28 13:43:23] info: [auth:0645kr] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:23] info: [auth:24of3e] Starting auth for POST /
[2026-01-28 13:43:23] info: [auth:24of3e] Token from cookie: false
[2026-01-28 13:43:23] info: [auth:24of3e] Token from header: true
[2026-01-28 13:43:23] info: [auth:24of3e] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:23] info: [POST] /api/horses
[2026-01-28 13:43:23] warn: [MemoryMonitoring] Memory threshold exceeded: 1309MB
[2026-01-28 13:43:23] info: [auth:d47ij2] Starting auth for POST /horses
[2026-01-28 13:43:23] info: [auth:d47ij2] Token from cookie: false
[2026-01-28 13:43:23] info: [auth:d47ij2] Token from header: true
[2026-01-28 13:43:23] info: [auth:d47ij2] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:23] info: [auth:7u1njg] Starting auth for POST /
[2026-01-28 13:43:23] info: [auth:7u1njg] Token from cookie: false
[2026-01-28 13:43:23] info: [auth:7u1njg] Token from header: true
[2026-01-28 13:43:23] info: [auth:7u1njg] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:23] info: [horseModel.createHorse] Successfully created horse: Population Horse 1 (ID: 146758)
[2026-01-28 13:43:23] info: [horseRoutes] Created new horse: Population Horse 1 (ID: 146758)
[2026-01-28 13:43:23] info: [POST] /api/horses - 201
[2026-01-28 13:43:23] info: [horseModel.createHorse] Successfully created horse: Population Horse 2 (ID: 146759)
[2026-01-28 13:43:23] info: [horseRoutes] Created new horse: Population Horse 2 (ID: 146759)
[2026-01-28 13:43:23] info: [POST] /api/horses - 201
[2026-01-28 13:43:23] info: [GET] /api/breeding/lineage-analysis/146756/146757?generations=3
[2026-01-28 13:43:23] warn: [MemoryMonitoring] Memory threshold exceeded: 1304MB
[2026-01-28 13:43:23] info: [auth:11236d] Starting auth for GET /breeding/lineage-analysis/146756/146757
[2026-01-28 13:43:23] info: [auth:11236d] Token from cookie: false
[2026-01-28 13:43:23] info: [auth:11236d] Token from header: true
[2026-01-28 13:43:23] info: [auth:11236d] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:23] info: [auth:668a85] Starting auth for GET /breeding/lineage-analysis/146756/146757
[2026-01-28 13:43:23] info: [auth:668a85] Token from cookie: false
[2026-01-28 13:43:23] info: [auth:668a85] Token from header: true
[2026-01-28 13:43:23] info: [auth:668a85] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:23] info: [advancedBreedingGeneticsRoutes.lineage-analysis] User 0de0a285-7799-4b20-8bf1-0ebe5ca196f5 analyzing lineage for stallion 146756 and mare 146757
[2026-01-28 13:43:23] info: [advancedLineageAnalysisService.generateLineageTree] Generating tree for stallion 146756 and mare 146757, 3 generations
[2026-01-28 13:43:23] info: [advancedLineageAnalysisService.calculateGeneticDiversityMetrics] Calculating diversity for 1 generations
[2026-01-28 13:43:23] info: [advancedLineageAnalysisService.analyzeLineagePerformance] Analyzing performance for 1 generations
[2026-01-28 13:43:23] info: [advancedLineageAnalysisService.createVisualizationData] Creating visualization for stallion 146756 and mare 146757
[2026-01-28 13:43:23] info: [advancedLineageAnalysisService.generateLineageTree] Generating tree for stallion 146756 and mare 146757, 3 generations
[2026-01-28 13:43:23] info: [advancedLineageAnalysisService.generateLineageTree] Generated tree with 2 horses across 1 generations
[2026-01-28 13:43:23] info: [advancedLineageAnalysisService.generateLineageTree] Generated tree with 2 horses across 1 generations
[2026-01-28 13:43:23] info: [GET] /api/breeding/lineage-analysis/146756/146757?generations=3 - 200
[2026-01-28 13:43:23] info: [POST] /api/horses
[2026-01-28 13:43:23] warn: [MemoryMonitoring] Memory threshold exceeded: 1309MB
[2026-01-28 13:43:23] info: [auth:ob198xk] Starting auth for POST /horses
[2026-01-28 13:43:23] info: [auth:ob198xk] Token from cookie: false
[2026-01-28 13:43:23] info: [auth:ob198xk] Token from header: true
[2026-01-28 13:43:23] info: [auth:ob198xk] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:23] info: [auth:9odoz8] Starting auth for POST /
[2026-01-28 13:43:23] info: [auth:9odoz8] Token from cookie: false
[2026-01-28 13:43:23] info: [auth:9odoz8] Token from header: true
[2026-01-28 13:43:23] info: [auth:9odoz8] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:23] info: [horseModel.createHorse] Successfully created horse: Genetic Test Stallion (ID: 146760)
[2026-01-28 13:43:23] info: [horseRoutes] Created new horse: Genetic Test Stallion (ID: 146760)
[2026-01-28 13:43:23] info: [POST] /api/horses - 201
[2026-01-28 13:43:23] info: [POST] /api/horses
[2026-01-28 13:43:23] warn: [MemoryMonitoring] Memory threshold exceeded: 1313MB
[2026-01-28 13:43:23] info: [auth:0cw3xv] Starting auth for POST /horses
[2026-01-28 13:43:23] info: [auth:0cw3xv] Token from cookie: false
[2026-01-28 13:43:23] info: [auth:0cw3xv] Token from header: true
[2026-01-28 13:43:23] info: [auth:0cw3xv] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:23] info: [auth:2n5oc] Starting auth for POST /
[2026-01-28 13:43:23] info: [auth:2n5oc] Token from cookie: false
[2026-01-28 13:43:23] info: [auth:2n5oc] Token from header: true
[2026-01-28 13:43:23] info: [auth:2n5oc] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:23] info: [horseModel.createHorse] Successfully created horse: Genetic Test Mare (ID: 146761)
[2026-01-28 13:43:23] info: [horseRoutes] Created new horse: Genetic Test Mare (ID: 146761)
[2026-01-28 13:43:23] info: [POST] /api/horses - 201
[2026-01-28 13:43:23] info: [POST] /api/horses
[2026-01-28 13:43:23] warn: [MemoryMonitoring] Memory threshold exceeded: 1318MB
[2026-01-28 13:43:23] info: [auth:prf23h] Starting auth for POST /horses
[2026-01-28 13:43:23] info: [auth:prf23h] Token from cookie: false
[2026-01-28 13:43:23] info: [auth:prf23h] Token from header: true
[2026-01-28 13:43:23] info: [auth:prf23h] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:23] info: [auth:4yoryu] Starting auth for POST /
[2026-01-28 13:43:23] info: [auth:4yoryu] Token from cookie: false
[2026-01-28 13:43:23] info: [auth:4yoryu] Token from header: true
[2026-01-28 13:43:23] info: [auth:4yoryu] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:23] info: [POST] /api/horses
[2026-01-28 13:43:23] warn: [MemoryMonitoring] Memory threshold exceeded: 1316MB
[2026-01-28 13:43:23] info: [auth:tq9x8o] Starting auth for POST /horses
[2026-01-28 13:43:23] info: [auth:tq9x8o] Token from cookie: false
[2026-01-28 13:43:23] info: [auth:tq9x8o] Token from header: true
[2026-01-28 13:43:23] info: [auth:tq9x8o] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:23] info: [auth:3y7hdn] Starting auth for POST /
[2026-01-28 13:43:23] info: [auth:3y7hdn] Token from cookie: false
[2026-01-28 13:43:23] info: [auth:3y7hdn] Token from header: true
[2026-01-28 13:43:23] info: [auth:3y7hdn] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:23] info: [horseModel.createHorse] Successfully created horse: Population Horse 1 (ID: 146762)
[2026-01-28 13:43:23] info: [horseRoutes] Created new horse: Population Horse 1 (ID: 146762)
[2026-01-28 13:43:23] info: [POST] /api/horses - 201
[2026-01-28 13:43:23] info: [horseModel.createHorse] Successfully created horse: Population Horse 2 (ID: 146763)
[2026-01-28 13:43:23] info: [horseRoutes] Created new horse: Population Horse 2 (ID: 146763)
[2026-01-28 13:43:23] info: [POST] /api/horses - 201
[2026-01-28 13:43:23] info: [GET] /api/breeding/lineage-analysis/99999/99998
[2026-01-28 13:43:23] warn: [MemoryMonitoring] Memory threshold exceeded: 1311MB
[2026-01-28 13:43:23] info: [auth:9gkz0g] Starting auth for GET /breeding/lineage-analysis/99999/99998
[2026-01-28 13:43:23] info: [auth:9gkz0g] Token from cookie: false
[2026-01-28 13:43:23] info: [auth:9gkz0g] Token from header: true
[2026-01-28 13:43:23] info: [auth:9gkz0g] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:23] info: [auth:v5pupl] Starting auth for GET /breeding/lineage-analysis/99999/99998
[2026-01-28 13:43:23] info: [auth:v5pupl] Token from cookie: false
[2026-01-28 13:43:23] info: [auth:v5pupl] Token from header: true
[2026-01-28 13:43:23] info: [auth:v5pupl] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:23] info: [advancedBreedingGeneticsRoutes.lineage-analysis] User 0de0a285-7799-4b20-8bf1-0ebe5ca196f5 analyzing lineage for stallion 99999 and mare 99998
[2026-01-28 13:43:23] info: [GET] /api/breeding/lineage-analysis/99999/99998 - 404
[2026-01-28 13:43:23] info: [POST] /api/horses
[2026-01-28 13:43:23] warn: [MemoryMonitoring] Memory threshold exceeded: 1306MB
[2026-01-28 13:43:23] info: [auth:3k4ftv] Starting auth for POST /horses
[2026-01-28 13:43:23] info: [auth:3k4ftv] Token from cookie: false
[2026-01-28 13:43:23] info: [auth:3k4ftv] Token from header: true
[2026-01-28 13:43:23] info: [auth:3k4ftv] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:23] info: [auth:34lus] Starting auth for POST /
[2026-01-28 13:43:23] info: [auth:34lus] Token from cookie: false
[2026-01-28 13:43:23] info: [auth:34lus] Token from header: true
[2026-01-28 13:43:23] info: [auth:34lus] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:23] info: [horseModel.createHorse] Successfully created horse: Genetic Test Stallion (ID: 146764)
[2026-01-28 13:43:23] info: [horseRoutes] Created new horse: Genetic Test Stallion (ID: 146764)
[2026-01-28 13:43:23] info: [POST] /api/horses - 201
[2026-01-28 13:43:23] info: [POST] /api/horses
[2026-01-28 13:43:23] warn: [MemoryMonitoring] Memory threshold exceeded: 1312MB
[2026-01-28 13:43:23] info: [auth:opgnty] Starting auth for POST /horses
[2026-01-28 13:43:23] info: [auth:opgnty] Token from cookie: false
[2026-01-28 13:43:23] info: [auth:opgnty] Token from header: true
[2026-01-28 13:43:23] info: [auth:opgnty] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:23] info: [auth:ryblw4] Starting auth for POST /
[2026-01-28 13:43:23] info: [auth:ryblw4] Token from cookie: false
[2026-01-28 13:43:23] info: [auth:ryblw4] Token from header: true
[2026-01-28 13:43:23] info: [auth:ryblw4] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:23] info: [horseModel.createHorse] Successfully created horse: Genetic Test Mare (ID: 146765)
[2026-01-28 13:43:23] info: [horseRoutes] Created new horse: Genetic Test Mare (ID: 146765)
[2026-01-28 13:43:23] info: [POST] /api/horses - 201
[2026-01-28 13:43:23] info: [POST] /api/horses
[2026-01-28 13:43:23] warn: [MemoryMonitoring] Memory threshold exceeded: 1317MB
[2026-01-28 13:43:23] info: [auth:czhtgi] Starting auth for POST /horses
[2026-01-28 13:43:23] info: [auth:czhtgi] Token from cookie: false
[2026-01-28 13:43:23] info: [auth:czhtgi] Token from header: true
[2026-01-28 13:43:23] info: [auth:czhtgi] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:23] info: [auth:n1acyo] Starting auth for POST /
[2026-01-28 13:43:23] info: [auth:n1acyo] Token from cookie: false
[2026-01-28 13:43:23] info: [auth:n1acyo] Token from header: true
[2026-01-28 13:43:23] info: [auth:n1acyo] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:23] info: [POST] /api/horses
[2026-01-28 13:43:23] warn: [MemoryMonitoring] Memory threshold exceeded: 1316MB
[2026-01-28 13:43:23] info: [auth:lxcv3m] Starting auth for POST /horses
[2026-01-28 13:43:23] info: [auth:lxcv3m] Token from cookie: false
[2026-01-28 13:43:23] info: [auth:lxcv3m] Token from header: true
[2026-01-28 13:43:23] info: [auth:lxcv3m] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:23] info: [auth:upyh4f] Starting auth for POST /
[2026-01-28 13:43:23] info: [auth:upyh4f] Token from cookie: false
[2026-01-28 13:43:23] info: [auth:upyh4f] Token from header: true
[2026-01-28 13:43:23] info: [auth:upyh4f] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:23] info: [horseModel.createHorse] Successfully created horse: Population Horse 1 (ID: 146766)
[2026-01-28 13:43:23] info: [horseRoutes] Created new horse: Population Horse 1 (ID: 146766)
[2026-01-28 13:43:23] info: [POST] /api/horses - 201
[2026-01-28 13:43:23] info: [horseModel.createHorse] Successfully created horse: Population Horse 2 (ID: 146767)
[2026-01-28 13:43:23] info: [horseRoutes] Created new horse: Population Horse 2 (ID: 146767)
[2026-01-28 13:43:23] info: [POST] /api/horses - 201
[2026-01-28 13:43:23] info: [POST] /api/breeding/breeding-recommendations
[2026-01-28 13:43:23] warn: [MemoryMonitoring] Memory threshold exceeded: 1312MB
[2026-01-28 13:43:23] info: [auth:4adpzr] Starting auth for POST /breeding/breeding-recommendations
[2026-01-28 13:43:23] info: [auth:4adpzr] Token from cookie: false
[2026-01-28 13:43:23] info: [auth:4adpzr] Token from header: true
[2026-01-28 13:43:23] info: [auth:4adpzr] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:23] info: [auth:nhh8k] Starting auth for POST /breeding/breeding-recommendations
[2026-01-28 13:43:23] info: [auth:nhh8k] Token from cookie: false
[2026-01-28 13:43:23] info: [auth:nhh8k] Token from header: true
[2026-01-28 13:43:23] info: [auth:nhh8k] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:23] info: [advancedBreedingGeneticsRoutes.breeding-recommendations] User 0de0a285-7799-4b20-8bf1-0ebe5ca196f5 generating recommendations for stallion 146764 and mare 146765
[2026-01-28 13:43:23] info: [advancedLineageAnalysisService.generateBreedingRecommendations] Generating recommendations for stallion 146764 and mare 146765
[2026-01-28 13:43:23] info: [advancedLineageAnalysisService.calculateGeneticDiversityMetrics] Calculating diversity for 1 generations
[2026-01-28 13:43:23] info: [advancedLineageAnalysisService.calculateInbreedingCoefficient] Calculating for stallion 146764 and mare 146765
[2026-01-28 13:43:23] info: [advancedLineageAnalysisService.calculateInbreedingCoefficient] Found 0 common ancestors, coefficient: 0
[2026-01-28 13:43:23] info: [advancedLineageAnalysisService.analyzeLineagePerformance] Analyzing performance for 1 generations
[2026-01-28 13:43:23] info: [POST] /api/breeding/breeding-recommendations - 200
[2026-01-28 13:43:23] info: [POST] /api/horses
[2026-01-28 13:43:23] warn: [MemoryMonitoring] Memory threshold exceeded: 1316MB
[2026-01-28 13:43:23] info: [auth:ve6i1] Starting auth for POST /horses
[2026-01-28 13:43:23] info: [auth:ve6i1] Token from cookie: false
[2026-01-28 13:43:23] info: [auth:ve6i1] Token from header: true
[2026-01-28 13:43:23] info: [auth:ve6i1] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:23] info: [auth:yom0p] Starting auth for POST /
[2026-01-28 13:43:23] info: [auth:yom0p] Token from cookie: false
[2026-01-28 13:43:23] info: [auth:yom0p] Token from header: true
[2026-01-28 13:43:23] info: [auth:yom0p] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:23] info: [horseModel.createHorse] Successfully created horse: Genetic Test Stallion (ID: 146768)
[2026-01-28 13:43:23] info: [horseRoutes] Created new horse: Genetic Test Stallion (ID: 146768)
[2026-01-28 13:43:23] info: [POST] /api/horses - 201
[2026-01-28 13:43:23] info: [POST] /api/horses
[2026-01-28 13:43:23] warn: [MemoryMonitoring] Memory threshold exceeded: 1320MB
[2026-01-28 13:43:23] info: [auth:peb44w] Starting auth for POST /horses
[2026-01-28 13:43:23] info: [auth:peb44w] Token from cookie: false
[2026-01-28 13:43:23] info: [auth:peb44w] Token from header: true
[2026-01-28 13:43:23] info: [auth:peb44w] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:23] info: [auth:bck8z4] Starting auth for POST /
[2026-01-28 13:43:23] info: [auth:bck8z4] Token from cookie: false
[2026-01-28 13:43:23] info: [auth:bck8z4] Token from header: true
[2026-01-28 13:43:23] info: [auth:bck8z4] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:23] info: [horseModel.createHorse] Successfully created horse: Genetic Test Mare (ID: 146769)
[2026-01-28 13:43:23] info: [horseRoutes] Created new horse: Genetic Test Mare (ID: 146769)
[2026-01-28 13:43:23] info: [POST] /api/horses - 201
[2026-01-28 13:43:23] info: [POST] /api/horses
[2026-01-28 13:43:23] warn: [MemoryMonitoring] Memory threshold exceeded: 1310MB
[2026-01-28 13:43:23] info: [auth:w3h26s] Starting auth for POST /horses
[2026-01-28 13:43:23] info: [auth:w3h26s] Token from cookie: false
[2026-01-28 13:43:23] info: [auth:w3h26s] Token from header: true
[2026-01-28 13:43:23] info: [auth:w3h26s] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:24] info: [auth:eejj1r] Starting auth for POST /
[2026-01-28 13:43:24] info: [auth:eejj1r] Token from cookie: false
[2026-01-28 13:43:24] info: [auth:eejj1r] Token from header: true
[2026-01-28 13:43:24] info: [auth:eejj1r] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:24] info: [POST] /api/horses
[2026-01-28 13:43:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1308MB
[2026-01-28 13:43:24] info: [auth:e711eo] Starting auth for POST /horses
[2026-01-28 13:43:24] info: [auth:e711eo] Token from cookie: false
[2026-01-28 13:43:24] info: [auth:e711eo] Token from header: true
[2026-01-28 13:43:24] info: [auth:e711eo] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:24] info: [auth:28xqut] Starting auth for POST /
[2026-01-28 13:43:24] info: [auth:28xqut] Token from cookie: false
[2026-01-28 13:43:24] info: [auth:28xqut] Token from header: true
[2026-01-28 13:43:24] info: [auth:28xqut] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:24] info: [horseModel.createHorse] Successfully created horse: Population Horse 1 (ID: 146770)
[2026-01-28 13:43:24] info: [horseRoutes] Created new horse: Population Horse 1 (ID: 146770)
[2026-01-28 13:43:24] info: [horseModel.createHorse] Successfully created horse: Population Horse 2 (ID: 146771)
[2026-01-28 13:43:24] info: [horseRoutes] Created new horse: Population Horse 2 (ID: 146771)
[2026-01-28 13:43:24] info: [POST] /api/horses - 201
[2026-01-28 13:43:24] info: [POST] /api/horses - 201
[2026-01-28 13:43:24] info: [POST] /api/genetics/population-analysis
[2026-01-28 13:43:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1319MB
[2026-01-28 13:43:24] info: [auth:idh06n] Starting auth for POST /genetics/population-analysis
[2026-01-28 13:43:24] info: [auth:idh06n] Token from cookie: false
[2026-01-28 13:43:24] info: [auth:idh06n] Token from header: true
[2026-01-28 13:43:24] info: [auth:idh06n] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:24] info: [auth:cp52q] Starting auth for POST /genetics/population-analysis
[2026-01-28 13:43:24] info: [auth:cp52q] Token from cookie: false
[2026-01-28 13:43:24] info: [auth:cp52q] Token from header: true
[2026-01-28 13:43:24] info: [auth:cp52q] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:24] info: [advancedBreedingGeneticsRoutes.population-analysis] User 0de0a285-7799-4b20-8bf1-0ebe5ca196f5 analyzing 4 horses
[2026-01-28 13:43:24] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 4 horses
[2026-01-28 13:43:24] info: [geneticDiversityTrackingService.trackPopulationGeneticHealth] Tracking health for 4 horses
[2026-01-28 13:43:24] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 4 horses
[2026-01-28 13:43:24] info: [geneticDiversityTrackingService.analyzeGeneticTrends] Analyzing trends for 4 horses
[2026-01-28 13:43:24] info: [geneticDiversityTrackingService.generateOptimalBreedingRecommendations] Generating recommendations for 4 horses
[2026-01-28 13:43:24] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 4 horses
[2026-01-28 13:43:24] info: [geneticDiversityTrackingService.calculateEffectivePopulationSize] Calculating for 4 horses
[2026-01-28 13:43:24] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 4 horses
[2026-01-28 13:43:24] info: [geneticDiversityTrackingService.identifyGeneticFounders] Identifying founders in 4 horses
[2026-01-28 13:43:24] info: [POST] /api/genetics/population-analysis - 200
[2026-01-28 13:43:24] info: [POST] /api/horses
[2026-01-28 13:43:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1310MB
[2026-01-28 13:43:24] info: [auth:jip5wp] Starting auth for POST /horses
[2026-01-28 13:43:24] info: [auth:jip5wp] Token from cookie: false
[2026-01-28 13:43:24] info: [auth:jip5wp] Token from header: true
[2026-01-28 13:43:24] info: [auth:jip5wp] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:24] info: [auth:v678h] Starting auth for POST /
[2026-01-28 13:43:24] info: [auth:v678h] Token from cookie: false
[2026-01-28 13:43:24] info: [auth:v678h] Token from header: true
[2026-01-28 13:43:24] info: [auth:v678h] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:24] info: [horseModel.createHorse] Successfully created horse: Genetic Test Stallion (ID: 146772)
[2026-01-28 13:43:24] info: [horseRoutes] Created new horse: Genetic Test Stallion (ID: 146772)
[2026-01-28 13:43:24] info: [POST] /api/horses - 201
[2026-01-28 13:43:24] info: [POST] /api/horses
[2026-01-28 13:43:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1315MB
[2026-01-28 13:43:24] info: [auth:5q17i] Starting auth for POST /horses
[2026-01-28 13:43:24] info: [auth:5q17i] Token from cookie: false
[2026-01-28 13:43:24] info: [auth:5q17i] Token from header: true
[2026-01-28 13:43:24] info: [auth:5q17i] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:24] info: [auth:o12wps] Starting auth for POST /
[2026-01-28 13:43:24] info: [auth:o12wps] Token from cookie: false
[2026-01-28 13:43:24] info: [auth:o12wps] Token from header: true
[2026-01-28 13:43:24] info: [auth:o12wps] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:24] info: [horseModel.createHorse] Successfully created horse: Genetic Test Mare (ID: 146773)
[2026-01-28 13:43:24] info: [horseRoutes] Created new horse: Genetic Test Mare (ID: 146773)
[2026-01-28 13:43:24] info: [POST] /api/horses - 201
[2026-01-28 13:43:24] info: [POST] /api/horses
[2026-01-28 13:43:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1320MB
[2026-01-28 13:43:24] info: [auth:8srj43] Starting auth for POST /horses
[2026-01-28 13:43:24] info: [auth:8srj43] Token from cookie: false
[2026-01-28 13:43:24] info: [auth:8srj43] Token from header: true
[2026-01-28 13:43:24] info: [auth:8srj43] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:24] info: [auth:kky31h] Starting auth for POST /
[2026-01-28 13:43:24] info: [auth:kky31h] Token from cookie: false
[2026-01-28 13:43:24] info: [auth:kky31h] Token from header: true
[2026-01-28 13:43:24] info: [auth:kky31h] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:24] info: [POST] /api/horses
[2026-01-28 13:43:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1318MB
[2026-01-28 13:43:24] info: [auth:maqpuc] Starting auth for POST /horses
[2026-01-28 13:43:24] info: [auth:maqpuc] Token from cookie: false
[2026-01-28 13:43:24] info: [auth:maqpuc] Token from header: true
[2026-01-28 13:43:24] info: [auth:maqpuc] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:24] info: [auth:iv67pp] Starting auth for POST /
[2026-01-28 13:43:24] info: [auth:iv67pp] Token from cookie: false
[2026-01-28 13:43:24] info: [auth:iv67pp] Token from header: true
[2026-01-28 13:43:24] info: [auth:iv67pp] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:24] info: [horseModel.createHorse] Successfully created horse: Population Horse 1 (ID: 146774)
[2026-01-28 13:43:24] info: [horseRoutes] Created new horse: Population Horse 1 (ID: 146774)
[2026-01-28 13:43:24] info: [POST] /api/horses - 201
[2026-01-28 13:43:24] info: [horseModel.createHorse] Successfully created horse: Population Horse 2 (ID: 146775)
[2026-01-28 13:43:24] info: [horseRoutes] Created new horse: Population Horse 2 (ID: 146775)
[2026-01-28 13:43:24] info: [POST] /api/horses - 201
[2026-01-28 13:43:24] info: [POST] /api/genetics/inbreeding-analysis
[2026-01-28 13:43:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1315MB
[2026-01-28 13:43:24] info: [auth:ih3bdi] Starting auth for POST /genetics/inbreeding-analysis
[2026-01-28 13:43:24] info: [auth:ih3bdi] Token from cookie: false
[2026-01-28 13:43:24] info: [auth:ih3bdi] Token from header: true
[2026-01-28 13:43:24] info: [auth:ih3bdi] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:24] info: [auth:x8lgv] Starting auth for POST /genetics/inbreeding-analysis
[2026-01-28 13:43:24] info: [auth:x8lgv] Token from cookie: false
[2026-01-28 13:43:24] info: [auth:x8lgv] Token from header: true
[2026-01-28 13:43:24] info: [auth:x8lgv] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:24] info: [advancedBreedingGeneticsRoutes.inbreeding-analysis] User 0de0a285-7799-4b20-8bf1-0ebe5ca196f5 analyzing inbreeding for stallion 146772 and mare 146773
[2026-01-28 13:43:24] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 146772 and mare 146773
[2026-01-28 13:43:24] info: [POST] /api/genetics/inbreeding-analysis - 200
[2026-01-28 13:43:24] info: [POST] /api/horses
[2026-01-28 13:43:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1311MB
[2026-01-28 13:43:24] info: [auth:ovvu3] Starting auth for POST /horses
[2026-01-28 13:43:24] info: [auth:ovvu3] Token from cookie: false
[2026-01-28 13:43:24] info: [auth:ovvu3] Token from header: true
[2026-01-28 13:43:24] info: [auth:ovvu3] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:24] info: [auth:ecpkr4j] Starting auth for POST /
[2026-01-28 13:43:24] info: [auth:ecpkr4j] Token from cookie: false
[2026-01-28 13:43:24] info: [auth:ecpkr4j] Token from header: true
[2026-01-28 13:43:24] info: [auth:ecpkr4j] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:24] info: [horseModel.createHorse] Successfully created horse: Genetic Test Stallion (ID: 146776)
[2026-01-28 13:43:24] info: [horseRoutes] Created new horse: Genetic Test Stallion (ID: 146776)
[2026-01-28 13:43:24] info: [POST] /api/horses - 201
[2026-01-28 13:43:24] info: [POST] /api/horses
[2026-01-28 13:43:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1316MB
[2026-01-28 13:43:24] info: [auth:y0unxh] Starting auth for POST /horses
[2026-01-28 13:43:24] info: [auth:y0unxh] Token from cookie: false
[2026-01-28 13:43:24] info: [auth:y0unxh] Token from header: true
[2026-01-28 13:43:24] info: [auth:y0unxh] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:24] info: [auth:90egpi] Starting auth for POST /
[2026-01-28 13:43:24] info: [auth:90egpi] Token from cookie: false
[2026-01-28 13:43:24] info: [auth:90egpi] Token from header: true
[2026-01-28 13:43:24] info: [auth:90egpi] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:24] info: [horseModel.createHorse] Successfully created horse: Genetic Test Mare (ID: 146777)
[2026-01-28 13:43:24] info: [horseRoutes] Created new horse: Genetic Test Mare (ID: 146777)
[2026-01-28 13:43:24] info: [POST] /api/horses - 201
[2026-01-28 13:43:24] info: [POST] /api/horses
[2026-01-28 13:43:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1321MB
[2026-01-28 13:43:24] info: [auth:oix2q] Starting auth for POST /horses
[2026-01-28 13:43:24] info: [auth:oix2q] Token from cookie: false
[2026-01-28 13:43:24] info: [auth:oix2q] Token from header: true
[2026-01-28 13:43:24] info: [auth:oix2q] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:24] info: [auth:t5ey] Starting auth for POST /
[2026-01-28 13:43:24] info: [auth:t5ey] Token from cookie: false
[2026-01-28 13:43:24] info: [auth:t5ey] Token from header: true
[2026-01-28 13:43:24] info: [auth:t5ey] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:24] info: [POST] /api/horses
[2026-01-28 13:43:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1320MB
[2026-01-28 13:43:24] info: [auth:02er3] Starting auth for POST /horses
[2026-01-28 13:43:24] info: [auth:02er3] Token from cookie: false
[2026-01-28 13:43:24] info: [auth:02er3] Token from header: true
[2026-01-28 13:43:24] info: [auth:02er3] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:24] info: [auth:kzvd2] Starting auth for POST /
[2026-01-28 13:43:24] info: [auth:kzvd2] Token from cookie: false
[2026-01-28 13:43:24] info: [auth:kzvd2] Token from header: true
[2026-01-28 13:43:24] info: [auth:kzvd2] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:24] info: [horseModel.createHorse] Successfully created horse: Population Horse 1 (ID: 146778)
[2026-01-28 13:43:24] info: [horseRoutes] Created new horse: Population Horse 1 (ID: 146778)
[2026-01-28 13:43:24] info: [POST] /api/horses - 201
[2026-01-28 13:43:24] info: [horseModel.createHorse] Successfully created horse: Population Horse 2 (ID: 146779)
[2026-01-28 13:43:24] info: [horseRoutes] Created new horse: Population Horse 2 (ID: 146779)
[2026-01-28 13:43:24] info: [POST] /api/horses - 201
[2026-01-28 13:43:24] info: [GET] /api/genetics/diversity-report/0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1316MB
[2026-01-28 13:43:24] info: [auth:uiiq8] Starting auth for GET /genetics/diversity-report/0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:24] info: [auth:uiiq8] Token from cookie: false
[2026-01-28 13:43:24] info: [auth:uiiq8] Token from header: true
[2026-01-28 13:43:24] info: [auth:uiiq8] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:24] info: [auth:zncu5r] Starting auth for GET /genetics/diversity-report/0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:24] info: [auth:zncu5r] Token from cookie: false
[2026-01-28 13:43:24] info: [auth:zncu5r] Token from header: true
[2026-01-28 13:43:24] info: [auth:zncu5r] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:24] info: [advancedBreedingGeneticsRoutes.diversity-report] Generating report for user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:24] info: [geneticDiversityTrackingService.generateGeneticDiversityReport] Generating report for 4 horses
[2026-01-28 13:43:24] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 4 horses
[2026-01-28 13:43:24] info: [geneticDiversityTrackingService.trackPopulationGeneticHealth] Tracking health for 4 horses
[2026-01-28 13:43:24] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 4 horses
[2026-01-28 13:43:24] info: [geneticDiversityTrackingService.analyzeGeneticTrends] Analyzing trends for 4 horses
[2026-01-28 13:43:24] info: [geneticDiversityTrackingService.generateOptimalBreedingRecommendations] Generating recommendations for 4 horses
[2026-01-28 13:43:24] info: [geneticDiversityTrackingService.trackGeneticDiversityOverTime] Tracking diversity for 4 horses
[2026-01-28 13:43:24] info: [geneticDiversityTrackingService.calculateEffectivePopulationSize] Calculating for 4 horses
[2026-01-28 13:43:24] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 4 horses
[2026-01-28 13:43:24] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 4 horses
[2026-01-28 13:43:24] info: [geneticDiversityTrackingService.identifyGeneticFounders] Identifying founders in 4 horses
[2026-01-28 13:43:24] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 4 horses
[2026-01-28 13:43:24] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 4 horses
[2026-01-28 13:43:24] info: [geneticDiversityTrackingService.trackPopulationGeneticHealth] Tracking health for 4 horses
[2026-01-28 13:43:24] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 4 horses
[2026-01-28 13:43:24] info: [geneticDiversityTrackingService.calculateEffectivePopulationSize] Calculating for 4 horses
[2026-01-28 13:43:24] info: [geneticDiversityTrackingService.identifyGeneticFounders] Identifying founders in 4 horses
[2026-01-28 13:43:24] info: [GET] /api/genetics/diversity-report/0de0a285-7799-4b20-8bf1-0ebe5ca196f5 - 200
[2026-01-28 13:43:24] info: [POST] /api/horses
[2026-01-28 13:43:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1315MB
[2026-01-28 13:43:24] info: [auth:edxxbk] Starting auth for POST /horses
[2026-01-28 13:43:24] info: [auth:edxxbk] Token from cookie: false
[2026-01-28 13:43:24] info: [auth:edxxbk] Token from header: true
[2026-01-28 13:43:24] info: [auth:edxxbk] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:24] info: [auth:21pd7] Starting auth for POST /
[2026-01-28 13:43:24] info: [auth:21pd7] Token from cookie: false
[2026-01-28 13:43:24] info: [auth:21pd7] Token from header: true
[2026-01-28 13:43:24] info: [auth:21pd7] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:24] info: [horseModel.createHorse] Successfully created horse: Genetic Test Stallion (ID: 146780)
[2026-01-28 13:43:24] info: [horseRoutes] Created new horse: Genetic Test Stallion (ID: 146780)
[2026-01-28 13:43:24] info: [POST] /api/horses - 201
[2026-01-28 13:43:24] info: [POST] /api/horses
[2026-01-28 13:43:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1319MB
[2026-01-28 13:43:24] info: [auth:zrxwrl] Starting auth for POST /horses
[2026-01-28 13:43:24] info: [auth:zrxwrl] Token from cookie: false
[2026-01-28 13:43:24] info: [auth:zrxwrl] Token from header: true
[2026-01-28 13:43:24] info: [auth:zrxwrl] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:24] info: [auth:bhovxf] Starting auth for POST /
[2026-01-28 13:43:24] info: [auth:bhovxf] Token from cookie: false
[2026-01-28 13:43:24] info: [auth:bhovxf] Token from header: true
[2026-01-28 13:43:24] info: [auth:bhovxf] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:24] info: [horseModel.createHorse] Successfully created horse: Genetic Test Mare (ID: 146781)
[2026-01-28 13:43:24] info: [horseRoutes] Created new horse: Genetic Test Mare (ID: 146781)
[2026-01-28 13:43:24] info: [POST] /api/horses - 201
[2026-01-28 13:43:24] info: [POST] /api/horses
[2026-01-28 13:43:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1324MB
[2026-01-28 13:43:24] info: [auth:x17qtm] Starting auth for POST /horses
[2026-01-28 13:43:24] info: [auth:x17qtm] Token from cookie: false
[2026-01-28 13:43:24] info: [auth:x17qtm] Token from header: true
[2026-01-28 13:43:24] info: [auth:x17qtm] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:24] info: [auth:u05v] Starting auth for POST /
[2026-01-28 13:43:24] info: [auth:u05v] Token from cookie: false
[2026-01-28 13:43:24] info: [auth:u05v] Token from header: true
[2026-01-28 13:43:24] info: [auth:u05v] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:24] info: [POST] /api/horses
[2026-01-28 13:43:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1322MB
[2026-01-28 13:43:24] info: [auth:w0ju2a] Starting auth for POST /horses
[2026-01-28 13:43:24] info: [auth:w0ju2a] Token from cookie: false
[2026-01-28 13:43:24] info: [auth:w0ju2a] Token from header: true
[2026-01-28 13:43:24] info: [auth:w0ju2a] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:24] info: [auth:4sd63] Starting auth for POST /
[2026-01-28 13:43:24] info: [auth:4sd63] Token from cookie: false
[2026-01-28 13:43:24] info: [auth:4sd63] Token from header: true
[2026-01-28 13:43:24] info: [auth:4sd63] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:24] info: [horseModel.createHorse] Successfully created horse: Population Horse 1 (ID: 146782)
[2026-01-28 13:43:24] info: [horseRoutes] Created new horse: Population Horse 1 (ID: 146782)
[2026-01-28 13:43:24] info: [POST] /api/horses - 201
[2026-01-28 13:43:24] info: [horseModel.createHorse] Successfully created horse: Population Horse 2 (ID: 146783)
[2026-01-28 13:43:24] info: [horseRoutes] Created new horse: Population Horse 2 (ID: 146783)
[2026-01-28 13:43:24] info: [POST] /api/horses - 201
[2026-01-28 13:43:24] info: [POST] /api/genetics/optimal-breeding
[2026-01-28 13:43:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1317MB
[2026-01-28 13:43:24] info: [auth:xc5nnt] Starting auth for POST /genetics/optimal-breeding
[2026-01-28 13:43:24] info: [auth:xc5nnt] Token from cookie: false
[2026-01-28 13:43:24] info: [auth:xc5nnt] Token from header: true
[2026-01-28 13:43:24] info: [auth:xc5nnt] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:24] info: [auth:5tzdzl] Starting auth for POST /genetics/optimal-breeding
[2026-01-28 13:43:24] info: [auth:5tzdzl] Token from cookie: false
[2026-01-28 13:43:24] info: [auth:5tzdzl] Token from header: true
[2026-01-28 13:43:24] info: [auth:5tzdzl] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:24] info: [advancedBreedingGeneticsRoutes.optimal-breeding] User 0de0a285-7799-4b20-8bf1-0ebe5ca196f5 generating optimal breeding for 4 horses
[2026-01-28 13:43:24] info: [geneticDiversityTrackingService.generateOptimalBreedingRecommendations] Generating recommendations for 4 horses
[2026-01-28 13:43:24] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 4 horses
[2026-01-28 13:43:24] info: [POST] /api/genetics/optimal-breeding - 200
[2026-01-28 13:43:24] info: [POST] /api/horses
[2026-01-28 13:43:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1314MB
[2026-01-28 13:43:24] info: [auth:omkp8] Starting auth for POST /horses
[2026-01-28 13:43:24] info: [auth:omkp8] Token from cookie: false
[2026-01-28 13:43:24] info: [auth:omkp8] Token from header: true
[2026-01-28 13:43:24] info: [auth:omkp8] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:24] info: [auth:q85uqo] Starting auth for POST /
[2026-01-28 13:43:24] info: [auth:q85uqo] Token from cookie: false
[2026-01-28 13:43:24] info: [auth:q85uqo] Token from header: true
[2026-01-28 13:43:24] info: [auth:q85uqo] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:24] info: [horseModel.createHorse] Successfully created horse: Genetic Test Stallion (ID: 146784)
[2026-01-28 13:43:24] info: [horseRoutes] Created new horse: Genetic Test Stallion (ID: 146784)
[2026-01-28 13:43:24] info: [POST] /api/horses - 201
[2026-01-28 13:43:24] info: [POST] /api/horses
[2026-01-28 13:43:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1318MB
[2026-01-28 13:43:24] info: [auth:sonq9] Starting auth for POST /horses
[2026-01-28 13:43:24] info: [auth:sonq9] Token from cookie: false
[2026-01-28 13:43:24] info: [auth:sonq9] Token from header: true
[2026-01-28 13:43:24] info: [auth:sonq9] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:24] info: [auth:xhpvxo] Starting auth for POST /
[2026-01-28 13:43:24] info: [auth:xhpvxo] Token from cookie: false
[2026-01-28 13:43:24] info: [auth:xhpvxo] Token from header: true
[2026-01-28 13:43:24] info: [auth:xhpvxo] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:24] info: [horseModel.createHorse] Successfully created horse: Genetic Test Mare (ID: 146785)
[2026-01-28 13:43:24] info: [horseRoutes] Created new horse: Genetic Test Mare (ID: 146785)
[2026-01-28 13:43:24] info: [POST] /api/horses - 201
[2026-01-28 13:43:24] info: [POST] /api/horses
[2026-01-28 13:43:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1324MB
[2026-01-28 13:43:24] info: [auth:cmann] Starting auth for POST /horses
[2026-01-28 13:43:24] info: [auth:cmann] Token from cookie: false
[2026-01-28 13:43:24] info: [auth:cmann] Token from header: true
[2026-01-28 13:43:24] info: [auth:cmann] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:24] info: [auth:570xt] Starting auth for POST /
[2026-01-28 13:43:24] info: [auth:570xt] Token from cookie: false
[2026-01-28 13:43:24] info: [auth:570xt] Token from header: true
[2026-01-28 13:43:24] info: [auth:570xt] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:24] info: [POST] /api/horses
[2026-01-28 13:43:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1322MB
[2026-01-28 13:43:24] info: [auth:akqxib] Starting auth for POST /horses
[2026-01-28 13:43:24] info: [auth:akqxib] Token from cookie: false
[2026-01-28 13:43:24] info: [auth:akqxib] Token from header: true
[2026-01-28 13:43:24] info: [auth:akqxib] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:24] info: [auth:vzfjr7] Starting auth for POST /
[2026-01-28 13:43:24] info: [auth:vzfjr7] Token from cookie: false
[2026-01-28 13:43:24] info: [auth:vzfjr7] Token from header: true
[2026-01-28 13:43:24] info: [auth:vzfjr7] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:24] info: [horseModel.createHorse] Successfully created horse: Population Horse 1 (ID: 146786)
[2026-01-28 13:43:24] info: [horseRoutes] Created new horse: Population Horse 1 (ID: 146786)
[2026-01-28 13:43:24] info: [POST] /api/horses - 201
[2026-01-28 13:43:24] info: [horseModel.createHorse] Successfully created horse: Population Horse 2 (ID: 146787)
[2026-01-28 13:43:24] info: [horseRoutes] Created new horse: Population Horse 2 (ID: 146787)
[2026-01-28 13:43:24] info: [POST] /api/horses - 201
[2026-01-28 13:43:24] info: [POST] /api/breeding/genetic-probability
[2026-01-28 13:43:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1318MB
[2026-01-28 13:43:24] info: [auth:6xvjls] Starting auth for POST /breeding/genetic-probability
[2026-01-28 13:43:24] info: [auth:6xvjls] Token from cookie: false
[2026-01-28 13:43:24] warn: [auth:6xvjls] Access token is required for POST /breeding/genetic-probability from ::ffff:127.0.0.1
[2026-01-28 13:43:24] info: [POST] /api/breeding/genetic-probability - 401
[2026-01-28 13:43:25] info: [GET] /api/breeding/lineage-analysis/146784/146785
[2026-01-28 13:43:25] warn: [MemoryMonitoring] Memory threshold exceeded: 1317MB
[2026-01-28 13:43:25] info: [auth:2s4693] Starting auth for GET /breeding/lineage-analysis/146784/146785
[2026-01-28 13:43:25] info: [auth:2s4693] Token from cookie: false
[2026-01-28 13:43:25] warn: [auth:2s4693] Access token is required for GET /breeding/lineage-analysis/146784/146785 from ::ffff:127.0.0.1
[2026-01-28 13:43:25] info: [GET] /api/breeding/lineage-analysis/146784/146785 - 401
[2026-01-28 13:43:25] info: [POST] /api/breeding/breeding-recommendations
[2026-01-28 13:43:25] warn: [MemoryMonitoring] Memory threshold exceeded: 1316MB
[2026-01-28 13:43:25] info: [auth:6mao3a] Starting auth for POST /breeding/breeding-recommendations
[2026-01-28 13:43:25] info: [auth:6mao3a] Token from cookie: false
[2026-01-28 13:43:25] warn: [auth:6mao3a] Access token is required for POST /breeding/breeding-recommendations from ::ffff:127.0.0.1
[2026-01-28 13:43:25] info: [POST] /api/breeding/breeding-recommendations - 401
[2026-01-28 13:43:25] info: [POST] /api/genetics/population-analysis
[2026-01-28 13:43:25] warn: [MemoryMonitoring] Memory threshold exceeded: 1315MB
[2026-01-28 13:43:25] info: [auth:93i4ai] Starting auth for POST /genetics/population-analysis
[2026-01-28 13:43:25] info: [auth:93i4ai] Token from cookie: false
[2026-01-28 13:43:25] warn: [auth:93i4ai] Access token is required for POST /genetics/population-analysis from ::ffff:127.0.0.1
[2026-01-28 13:43:25] info: [POST] /api/genetics/population-analysis - 401
[2026-01-28 13:43:25] info: [POST] /api/genetics/inbreeding-analysis
[2026-01-28 13:43:25] warn: [MemoryMonitoring] Memory threshold exceeded: 1314MB
[2026-01-28 13:43:25] info: [auth:9ucw25] Starting auth for POST /genetics/inbreeding-analysis
[2026-01-28 13:43:25] info: [auth:9ucw25] Token from cookie: false
[2026-01-28 13:43:25] warn: [auth:9ucw25] Access token is required for POST /genetics/inbreeding-analysis from ::ffff:127.0.0.1
[2026-01-28 13:43:25] info: [POST] /api/genetics/inbreeding-analysis - 401
[2026-01-28 13:43:25] info: [GET] /api/genetics/diversity-report/0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:25] warn: [MemoryMonitoring] Memory threshold exceeded: 1313MB
[2026-01-28 13:43:25] info: [auth:8luc2uj] Starting auth for GET /genetics/diversity-report/0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:25] info: [auth:8luc2uj] Token from cookie: false
[2026-01-28 13:43:25] warn: [auth:8luc2uj] Access token is required for GET /genetics/diversity-report/0de0a285-7799-4b20-8bf1-0ebe5ca196f5 from ::ffff:127.0.0.1
[2026-01-28 13:43:25] info: [GET] /api/genetics/diversity-report/0de0a285-7799-4b20-8bf1-0ebe5ca196f5 - 401
[2026-01-28 13:43:25] info: [POST] /api/genetics/optimal-breeding
[2026-01-28 13:43:25] warn: [MemoryMonitoring] Memory threshold exceeded: 1313MB
[2026-01-28 13:43:25] info: [auth:srwbc] Starting auth for POST /genetics/optimal-breeding
[2026-01-28 13:43:25] info: [auth:srwbc] Token from cookie: false
[2026-01-28 13:43:25] warn: [auth:srwbc] Access token is required for POST /genetics/optimal-breeding from ::ffff:127.0.0.1
[2026-01-28 13:43:25] info: [POST] /api/genetics/optimal-breeding - 401
[2026-01-28 13:43:25] info: [POST] /api/horses
[2026-01-28 13:43:25] warn: [MemoryMonitoring] Memory threshold exceeded: 1316MB
[2026-01-28 13:43:25] info: [auth:enq22] Starting auth for POST /horses
[2026-01-28 13:43:25] info: [auth:enq22] Token from cookie: false
[2026-01-28 13:43:25] info: [auth:enq22] Token from header: true
[2026-01-28 13:43:25] info: [auth:enq22] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:25] info: [auth:zyukb4] Starting auth for POST /
[2026-01-28 13:43:25] info: [auth:zyukb4] Token from cookie: false
[2026-01-28 13:43:25] info: [auth:zyukb4] Token from header: true
[2026-01-28 13:43:25] info: [auth:zyukb4] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:25] info: [horseModel.createHorse] Successfully created horse: Genetic Test Stallion (ID: 146788)
[2026-01-28 13:43:25] info: [horseRoutes] Created new horse: Genetic Test Stallion (ID: 146788)
[2026-01-28 13:43:25] info: [POST] /api/horses - 201
[2026-01-28 13:43:25] info: [POST] /api/horses
[2026-01-28 13:43:25] warn: [MemoryMonitoring] Memory threshold exceeded: 1320MB
[2026-01-28 13:43:25] info: [auth:x2h38o] Starting auth for POST /horses
[2026-01-28 13:43:25] info: [auth:x2h38o] Token from cookie: false
[2026-01-28 13:43:25] info: [auth:x2h38o] Token from header: true
[2026-01-28 13:43:25] info: [auth:x2h38o] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:25] info: [auth:2x51v] Starting auth for POST /
[2026-01-28 13:43:25] info: [auth:2x51v] Token from cookie: false
[2026-01-28 13:43:25] info: [auth:2x51v] Token from header: true
[2026-01-28 13:43:25] info: [auth:2x51v] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:25] info: [horseModel.createHorse] Successfully created horse: Genetic Test Mare (ID: 146789)
[2026-01-28 13:43:25] info: [horseRoutes] Created new horse: Genetic Test Mare (ID: 146789)
[2026-01-28 13:43:25] info: [POST] /api/horses - 201
[2026-01-28 13:43:25] info: [POST] /api/horses
[2026-01-28 13:43:25] warn: [MemoryMonitoring] Memory threshold exceeded: 1325MB
[2026-01-28 13:43:25] info: [auth:w5uny9] Starting auth for POST /horses
[2026-01-28 13:43:25] info: [auth:w5uny9] Token from cookie: false
[2026-01-28 13:43:25] info: [auth:w5uny9] Token from header: true
[2026-01-28 13:43:25] info: [auth:w5uny9] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:25] info: [auth:qa80u] Starting auth for POST /
[2026-01-28 13:43:25] info: [auth:qa80u] Token from cookie: false
[2026-01-28 13:43:25] info: [auth:qa80u] Token from header: true
[2026-01-28 13:43:25] info: [auth:qa80u] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:25] info: [POST] /api/horses
[2026-01-28 13:43:25] warn: [MemoryMonitoring] Memory threshold exceeded: 1324MB
[2026-01-28 13:43:25] info: [auth:xb4agk] Starting auth for POST /horses
[2026-01-28 13:43:25] info: [auth:xb4agk] Token from cookie: false
[2026-01-28 13:43:25] info: [auth:xb4agk] Token from header: true
[2026-01-28 13:43:25] info: [auth:xb4agk] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:25] info: [auth:qfzc0t] Starting auth for POST /
[2026-01-28 13:43:25] info: [auth:qfzc0t] Token from cookie: false
[2026-01-28 13:43:25] info: [auth:qfzc0t] Token from header: true
[2026-01-28 13:43:25] info: [auth:qfzc0t] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:25] info: [horseModel.createHorse] Successfully created horse: Population Horse 1 (ID: 146790)
[2026-01-28 13:43:25] info: [horseRoutes] Created new horse: Population Horse 1 (ID: 146790)
[2026-01-28 13:43:25] info: [horseModel.createHorse] Successfully created horse: Population Horse 2 (ID: 146791)
[2026-01-28 13:43:25] info: [horseRoutes] Created new horse: Population Horse 2 (ID: 146791)
[2026-01-28 13:43:25] info: [POST] /api/horses - 201
[2026-01-28 13:43:25] info: [POST] /api/horses - 201
[2026-01-28 13:43:25] info: [POST] /api/breeding/genetic-probability
[2026-01-28 13:43:25] warn: [MemoryMonitoring] Memory threshold exceeded: 1318MB
[2026-01-28 13:43:25] info: [auth:opur3k] Starting auth for POST /breeding/genetic-probability
[2026-01-28 13:43:25] info: [auth:opur3k] Token from cookie: false
[2026-01-28 13:43:25] info: [auth:opur3k] Token from header: true
[2026-01-28 13:43:25] info: [auth:opur3k] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:25] info: [auth:vygb9] Starting auth for POST /breeding/genetic-probability
[2026-01-28 13:43:25] info: [auth:vygb9] Token from cookie: false
[2026-01-28 13:43:25] info: [auth:vygb9] Token from header: true
[2026-01-28 13:43:25] info: [auth:vygb9] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:25] info: [POST] /api/breeding/genetic-probability - 400
[2026-01-28 13:43:25] info: [POST] /api/genetics/inbreeding-analysis
[2026-01-28 13:43:25] warn: [MemoryMonitoring] Memory threshold exceeded: 1324MB
[2026-01-28 13:43:25] info: [auth:8jqb7] Starting auth for POST /genetics/inbreeding-analysis
[2026-01-28 13:43:25] info: [auth:8jqb7] Token from cookie: false
[2026-01-28 13:43:25] info: [auth:8jqb7] Token from header: true
[2026-01-28 13:43:25] info: [auth:8jqb7] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:25] info: [auth:zk6tro] Starting auth for POST /genetics/inbreeding-analysis
[2026-01-28 13:43:25] info: [auth:zk6tro] Token from cookie: false
[2026-01-28 13:43:25] info: [auth:zk6tro] Token from header: true
[2026-01-28 13:43:25] info: [auth:zk6tro] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:25] info: [POST] /api/genetics/inbreeding-analysis - 400
[2026-01-28 13:43:25] info: [POST] /api/genetics/population-analysis
[2026-01-28 13:43:25] warn: [MemoryMonitoring] Memory threshold exceeded: 1315MB
[2026-01-28 13:43:25] info: [auth:iofx9] Starting auth for POST /genetics/population-analysis
[2026-01-28 13:43:25] info: [auth:iofx9] Token from cookie: false
[2026-01-28 13:43:25] info: [auth:iofx9] Token from header: true
[2026-01-28 13:43:25] info: [auth:iofx9] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:25] info: [auth:pdojip] Starting auth for POST /genetics/population-analysis
[2026-01-28 13:43:25] info: [auth:pdojip] Token from cookie: false
[2026-01-28 13:43:25] info: [auth:pdojip] Token from header: true
[2026-01-28 13:43:25] info: [auth:pdojip] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:25] info: [POST] /api/genetics/population-analysis - 400
[2026-01-28 13:43:25] info: [POST] /api/horses
[2026-01-28 13:43:25] warn: [MemoryMonitoring] Memory threshold exceeded: 1323MB
[2026-01-28 13:43:25] info: [auth:fq6hob] Starting auth for POST /horses
[2026-01-28 13:43:25] info: [auth:fq6hob] Token from cookie: false
[2026-01-28 13:43:25] info: [auth:fq6hob] Token from header: true
[2026-01-28 13:43:25] info: [auth:fq6hob] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:25] info: [auth:2zn81i] Starting auth for POST /
[2026-01-28 13:43:25] info: [auth:2zn81i] Token from cookie: false
[2026-01-28 13:43:25] info: [auth:2zn81i] Token from header: true
[2026-01-28 13:43:25] info: [auth:2zn81i] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:25] info: [horseModel.createHorse] Successfully created horse: Genetic Test Stallion (ID: 146792)
[2026-01-28 13:43:25] info: [horseRoutes] Created new horse: Genetic Test Stallion (ID: 146792)
[2026-01-28 13:43:25] info: [POST] /api/horses - 201
[2026-01-28 13:43:25] info: [POST] /api/horses
[2026-01-28 13:43:25] warn: [MemoryMonitoring] Memory threshold exceeded: 1327MB
[2026-01-28 13:43:25] info: [auth:hxqpni] Starting auth for POST /horses
[2026-01-28 13:43:25] info: [auth:hxqpni] Token from cookie: false
[2026-01-28 13:43:25] info: [auth:hxqpni] Token from header: true
[2026-01-28 13:43:25] info: [auth:hxqpni] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:25] info: [auth:nh1x1] Starting auth for POST /
[2026-01-28 13:43:25] info: [auth:nh1x1] Token from cookie: false
[2026-01-28 13:43:25] info: [auth:nh1x1] Token from header: true
[2026-01-28 13:43:25] info: [auth:nh1x1] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:25] info: [horseModel.createHorse] Successfully created horse: Genetic Test Mare (ID: 146793)
[2026-01-28 13:43:25] info: [horseRoutes] Created new horse: Genetic Test Mare (ID: 146793)
[2026-01-28 13:43:25] info: [POST] /api/horses - 201
[2026-01-28 13:43:25] info: [POST] /api/horses
[2026-01-28 13:43:25] warn: [MemoryMonitoring] Memory threshold exceeded: 1319MB
[2026-01-28 13:43:25] info: [auth:b5mhj6] Starting auth for POST /horses
[2026-01-28 13:43:25] info: [auth:b5mhj6] Token from cookie: false
[2026-01-28 13:43:25] info: [auth:b5mhj6] Token from header: true
[2026-01-28 13:43:25] info: [auth:b5mhj6] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:25] info: [auth:36ab] Starting auth for POST /
[2026-01-28 13:43:25] info: [auth:36ab] Token from cookie: false
[2026-01-28 13:43:25] info: [auth:36ab] Token from header: true
[2026-01-28 13:43:25] info: [auth:36ab] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:25] info: [POST] /api/horses
[2026-01-28 13:43:25] warn: [MemoryMonitoring] Memory threshold exceeded: 1317MB
[2026-01-28 13:43:25] info: [auth:dmqsaq] Starting auth for POST /horses
[2026-01-28 13:43:25] info: [auth:dmqsaq] Token from cookie: false
[2026-01-28 13:43:25] info: [auth:dmqsaq] Token from header: true
[2026-01-28 13:43:25] info: [auth:dmqsaq] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:25] info: [auth:onyue] Starting auth for POST /
[2026-01-28 13:43:25] info: [auth:onyue] Token from cookie: false
[2026-01-28 13:43:25] info: [auth:onyue] Token from header: true
[2026-01-28 13:43:25] info: [auth:onyue] Authenticated user 0de0a285-7799-4b20-8bf1-0ebe5ca196f5
[2026-01-28 13:43:25] info: [horseModel.createHorse] Successfully created horse: Population Horse 1 (ID: 146794)
[2026-01-28 13:43:25] info: [horseRoutes] Created new horse: Population Horse 1 (ID: 146794)
[2026-01-28 13:43:25] info: [horseModel.createHorse] Successfully created horse: Population Horse 2 (ID: 146795)
[2026-01-28 13:43:25] info: [horseRoutes] Created new horse: Population Horse 2 (ID: 146795)
[2026-01-28 13:43:25] info: [POST] /api/horses - 201
[2026-01-28 13:43:25] info: [POST] /api/horses - 201
[2026-01-28 13:43:25] info: [POST] /api/auth/register
[2026-01-28 13:43:25] warn: [MemoryMonitoring] Memory threshold exceeded: 1327MB
[2026-01-28 13:43:25] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:25] info: [EmailVerification] Created verification token
[2026-01-28 13:43:25] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:25] info: [authController.register] Verification email sent
[2026-01-28 13:43:25] info: [POST] /api/auth/register - 201
[2026-01-28 13:43:25] info: [POST] /api/auth/login
[2026-01-28 13:43:25] warn: [MemoryMonitoring] Memory threshold exceeded: 1326MB
[2026-01-28 13:43:26] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:26] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 13:43:26] info: [POST] /api/auth/login - 200
[2026-01-28 13:43:26] info: [POST] /api/breeding/genetic-probability
[2026-01-28 13:43:26] warn: [MemoryMonitoring] Memory threshold exceeded: 1323MB
[2026-01-28 13:43:26] info: [auth:h7hebj] Starting auth for POST /breeding/genetic-probability
[2026-01-28 13:43:26] info: [auth:h7hebj] Token from cookie: false
[2026-01-28 13:43:26] info: [auth:h7hebj] Token from header: true
[2026-01-28 13:43:26] info: [auth:h7hebj] Authenticated user 323182b0-16ab-406d-b1ad-ac01e1670605
[2026-01-28 13:43:26] info: [POST] /api/breeding/genetic-probability - 403
PASS tests/integration/advancedBreedingGeneticsAPI.test.mjs
  🧬 Advanced Breeding Genetics API Integration
    🎯 Enhanced Genetic Probability API
      √ POST /api/breeding/genetic-probability should calculate breeding probabilities (245 ms)
      √ POST /api/breeding/genetic-probability should handle invalid horse IDs (184 ms)
      √ POST /api/breeding/genetic-probability should require authentication (164 ms)
    🌳 Advanced Lineage Analysis API
      √ GET /api/breeding/lineage-analysis/:stallionId/:mareId should generate lineage tree (205 ms)
      √ GET /api/breeding/lineage-analysis should handle missing horses gracefully (174 ms)
      √ POST /api/breeding/breeding-recommendations should generate comprehensive recommendations (195 ms)
    📊 Genetic Diversity Tracking API
      √ POST /api/genetics/population-analysis should analyze population genetics (274 ms)
      √ POST /api/genetics/inbreeding-analysis should calculate detailed inbreeding (186 ms)
      √ GET /api/genetics/diversity-report/:userId should generate comprehensive report (279 ms)
      √ POST /api/genetics/optimal-breeding should recommend optimal breeding pairs (200 ms)
    🔒 API Security and Validation
      √ All genetic endpoints should require authentication (294 ms)
      √ Genetic endpoints should validate input parameters (267 ms)
      √ Genetic endpoints should handle ownership validation (804 ms)

[2026-01-28 13:43:26] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:43:26] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:43:26] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:43:26] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:43:26] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:26] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:26] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:26] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:26] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:26] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:26] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:26] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:26] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:26] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:43:27] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:27] info: [EmailVerification] Created verification token
[2026-01-28 13:43:27] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:27] info: [authController.register] Verification email sent
[2026-01-28 13:43:27] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:27] info: [EmailVerification] Created verification token
[2026-01-28 13:43:27] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:27] info: [authController.register] Verification email sent
[2026-01-28 13:43:27] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:27] info: [EmailVerification] Created verification token
[2026-01-28 13:43:27] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:27] info: [authController.register] Verification email sent
[2026-01-28 13:43:27] info: [health] Health check passed
[2026-01-28 13:43:28] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:28] info: [EmailVerification] Created verification token
[2026-01-28 13:43:28] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:28] info: [authController.register] Verification email sent
[2026-01-28 13:43:28] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:28] info: [EmailVerification] Created verification token
[2026-01-28 13:43:28] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:28] info: [authController.register] Verification email sent
[2026-01-28 13:43:28] info: [auth:y478s2] Starting auth for GET /health
[2026-01-28 13:43:28] info: [auth:y478s2] Token from cookie: false
[2026-01-28 13:43:28] info: [auth:y478s2] Token from header: true
[2026-01-28 13:43:28] info: [auth:y478s2] Authenticated user 40b9fb0a-8c33-4492-96be-f3879b32aaaf
[2026-01-28 13:43:28] info: [MemoryManagement] Getting system health assessment
[2026-01-28 13:43:28] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:28] info: [EmailVerification] Created verification token
[2026-01-28 13:43:28] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:28] info: [authController.register] Verification email sent
[2026-01-28 13:43:28] info: [auth:eln4zg] Starting auth for GET /health
[2026-01-28 13:43:28] info: [auth:eln4zg] Token from cookie: false
[2026-01-28 13:43:28] info: [auth:eln4zg] Token from header: true
[2026-01-28 13:43:28] info: [auth:eln4zg] Authenticated user 7bf9dbdb-3a3d-45e6-a112-21e6b741d2d2
[2026-01-28 13:43:28] info: [MemoryManagement] Getting system health assessment
[2026-01-28 13:43:29] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:29] info: [EmailVerification] Created verification token
[2026-01-28 13:43:29] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:29] info: [authController.register] Verification email sent
[2026-01-28 13:43:29] info: [auth:c5w4l] Starting auth for GET /health
[2026-01-28 13:43:29] info: [auth:c5w4l] Token from cookie: false
[2026-01-28 13:43:29] info: [auth:c5w4l] Token from header: true
[2026-01-28 13:43:29] info: [auth:c5w4l] Authenticated user 665e72c6-62a8-4f7e-ba62-4b4c05f673e7
[2026-01-28 13:43:29] info: [DocumentationRoutes] Getting documentation health status
[2026-01-28 13:43:29] info: [ApiDocService] OpenAPI specification validation passed
[2026-01-28 13:43:29] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:29] info: [EmailVerification] Created verification token
[2026-01-28 13:43:29] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:29] info: [authController.register] Verification email sent
[2026-01-28 13:43:29] info: [UserDocService] Loaded 1 documentation files
[2026-01-28 13:43:29] info: [UserDocService] Built search index with 34 terms
[2026-01-28 13:43:29] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 13:43:29] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:29] info: [EmailVerification] Created verification token
[2026-01-28 13:43:29] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:29] info: [authController.register] Verification email sent
[2026-01-28 13:43:30] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:30] info: [EmailVerification] Created verification token
[2026-01-28 13:43:30] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:30] info: [authController.register] Verification email sent
[2026-01-28 13:43:30] info: [health] Health check passed
[2026-01-28 13:43:30] info: [auth:7568re] Starting auth for GET /health
[2026-01-28 13:43:30] info: [auth:7568re] Token from cookie: false
[2026-01-28 13:43:30] info: [auth:7568re] Token from header: true
[2026-01-28 13:43:30] info: [auth:7568re] Authenticated user ae824ef7-fd42-461b-8edb-3f3e4fcd47c4
[2026-01-28 13:43:30] info: [MemoryManagement] Getting system health assessment
[2026-01-28 13:43:30] info: [auth:os5ej8] Starting auth for GET /health
[2026-01-28 13:43:30] info: [auth:os5ej8] Token from cookie: false
[2026-01-28 13:43:30] info: [auth:os5ej8] Token from header: true
[2026-01-28 13:43:30] info: [auth:os5ej8] Authenticated user ae824ef7-fd42-461b-8edb-3f3e4fcd47c4
[2026-01-28 13:43:30] info: [DocumentationRoutes] Getting documentation health status
[2026-01-28 13:43:30] info: [ApiDocService] OpenAPI specification validation passed
[2026-01-28 13:43:30] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:30] info: [EmailVerification] Created verification token
[2026-01-28 13:43:30] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:30] info: [authController.register] Verification email sent
[2026-01-28 13:43:30] info: [auth:mnfuo] Starting auth for GET /health
[2026-01-28 13:43:30] info: [auth:mnfuo] Token from cookie: false
[2026-01-28 13:43:30] info: [auth:mnfuo] Token from header: true
[2026-01-28 13:43:30] info: [auth:mnfuo] Authenticated user 3621583e-a2fc-427c-920d-d0a4da3f790d
[2026-01-28 13:43:30] info: [MemoryManagement] Getting system health assessment
[2026-01-28 13:43:30] info: [health] Health check passed
[2026-01-28 13:43:31] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:31] info: [EmailVerification] Created verification token
[2026-01-28 13:43:31] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:31] info: [authController.register] Verification email sent
[2026-01-28 13:43:31] info: [health] Health check passed
[2026-01-28 13:43:31] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:31] info: [EmailVerification] Created verification token
[2026-01-28 13:43:31] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:31] info: [authController.register] Verification email sent
[2026-01-28 13:43:31] info: [health] Health check passed
[2026-01-28 13:43:31] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:31] info: [EmailVerification] Created verification token
[2026-01-28 13:43:31] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:31] info: [authController.register] Verification email sent
[2026-01-28 13:43:31] info: [auth:azxp0r] Starting auth for GET /health
[2026-01-28 13:43:31] info: [auth:azxp0r] Token from cookie: false
[2026-01-28 13:43:31] warn: [auth:azxp0r] Access token is required for GET /health from ::ffff:127.0.0.1
[2026-01-28 13:43:31] info: [auth:z7lgcp] Starting auth for GET /health
[2026-01-28 13:43:31] info: [auth:z7lgcp] Token from cookie: false
[2026-01-28 13:43:31] warn: [auth:z7lgcp] Access token is required for GET /health from ::ffff:127.0.0.1
[2026-01-28 13:43:31] info: [auth:rqpe5] Starting auth for GET /api/test/health-status
[2026-01-28 13:43:31] info: [auth:rqpe5] Token from cookie: false
[2026-01-28 13:43:31] warn: [auth:rqpe5] Access token is required for GET /api/test/health-status from ::ffff:127.0.0.1
[2026-01-28 13:43:31] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:31] info: [EmailVerification] Created verification token
[2026-01-28 13:43:31] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:31] info: [authController.register] Verification email sent
[2026-01-28 13:43:32] info: [health] Health check passed
[2026-01-28 13:43:32] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:32] info: [EmailVerification] Created verification token
[2026-01-28 13:43:32] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:32] info: [authController.register] Verification email sent
[2026-01-28 13:43:32] info: [auth:fh5lfo] Starting auth for GET /api/test/health-status
[2026-01-28 13:43:32] info: [auth:fh5lfo] Token from cookie: false
[2026-01-28 13:43:32] info: [auth:fh5lfo] Token from header: true
[2026-01-28 13:43:32] info: [auth:fh5lfo] Authenticated user fafd7a57-b1da-484f-b4fd-bdee8aeba7ac
[2026-01-28 13:43:32] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:32] info: [EmailVerification] Created verification token
[2026-01-28 13:43:32] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:32] info: [authController.register] Verification email sent
[2026-01-28 13:43:32] info: [auth:30zehh] Starting auth for GET /health
[2026-01-28 13:43:32] info: [auth:30zehh] Token from cookie: false
[2026-01-28 13:43:32] info: [auth:30zehh] Token from header: true
[2026-01-28 13:43:32] warn: [auth:30zehh] Invalid or expired token for GET /health from ::ffff:127.0.0.1
[2026-01-28 13:43:32] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:43:32] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
PASS tests/integration/health-monitoring-integration.test.mjs (6.456 s)
  🏥 Health Monitoring Integration Tests
    🔍 Main Health Endpoints
      √ should provide basic ping health check (411 ms)
      √ should provide ping with custom name (323 ms)
      √ should provide comprehensive health check (320 ms)
      √ should provide readiness check (317 ms)
    🧠 Memory Management Health
      √ should provide memory system health assessment (327 ms)
      √ should validate memory health score ranges (330 ms)
    📚 Documentation System Health
      √ should provide API documentation health status (336 ms)
      √ should provide user documentation health status (332 ms)
    🧬 Epigenetic Flag System Health
      √ should provide flag system operational status (328 ms)
    🔗 Cross-System Health Integration
      √ should validate health across all systems (401 ms)
      √ should provide consistent health response formats (355 ms)
    ⚡ Performance Health Monitoring
      √ should monitor health endpoint response times (316 ms)
      √ should validate database performance in health checks (313 ms)
    🛡️ Health Monitoring Security
      √ should require authentication for protected health endpoints (342 ms)
      √ should allow public access to basic health endpoints (347 ms)
    🚨 Error Handling and Reporting
      √ should handle health check errors gracefully (319 ms)
      √ should provide meaningful error messages for health failures (314 ms)

[2026-01-28 13:43:32] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:43:32] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:43:32] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:43:32] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:43:33] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:33] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:33] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:33] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:33] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:33] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:33] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:33] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:33] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:33] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:43:33] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:33] info: [EmailVerification] Created verification token
[2026-01-28 13:43:33] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:33] info: [authController.register] Verification email sent
[2026-01-28 13:43:33] info: [auth:8wbt38] Starting auth for GET /status
[2026-01-28 13:43:33] info: [auth:8wbt38] Token from cookie: false
[2026-01-28 13:43:33] info: [auth:8wbt38] Token from header: true
[2026-01-28 13:43:33] info: [auth:8wbt38] Authenticated user 264a6827-ed50-4759-b835-e29c45e033a4
[2026-01-28 13:43:33] info: [MemoryManagement] Getting memory status
[2026-01-28 13:43:33] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:43:33] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:43:34] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:34] info: [EmailVerification] Created verification token
[2026-01-28 13:43:34] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:34] info: [authController.register] Verification email sent
[2026-01-28 13:43:34] info: [auth:l7mari] Starting auth for GET /metrics
[2026-01-28 13:43:34] info: [auth:l7mari] Token from cookie: false
[2026-01-28 13:43:34] info: [auth:l7mari] Token from header: true
[2026-01-28 13:43:34] info: [auth:l7mari] Authenticated user 0d46da14-920e-4805-9787-ac06a2f4b8ed
[2026-01-28 13:43:34] info: [MemoryManagement] Getting memory metrics for timeframe: 1h
[2026-01-28 13:43:34] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:43:34] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:43:34] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:34] info: [EmailVerification] Created verification token
[2026-01-28 13:43:34] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:34] info: [authController.register] Verification email sent
[2026-01-28 13:43:34] info: [auth:uqbabt] Starting auth for GET /status
[2026-01-28 13:43:34] info: [auth:uqbabt] Token from cookie: false
[2026-01-28 13:43:34] info: [auth:uqbabt] Token from header: true
[2026-01-28 13:43:34] info: [auth:uqbabt] Authenticated user 096cfc6f-aa7d-45c2-8289-1f97bc7ba4f8
[2026-01-28 13:43:34] info: [MemoryManagement] Getting memory status
[2026-01-28 13:43:34] info: [auth:gpe1x] Starting auth for POST /api/test/memory-load
[2026-01-28 13:43:34] info: [auth:gpe1x] Token from cookie: false
[2026-01-28 13:43:34] info: [auth:gpe1x] Token from header: true
[2026-01-28 13:43:34] info: [auth:gpe1x] Authenticated user 096cfc6f-aa7d-45c2-8289-1f97bc7ba4f8
[2026-01-28 13:43:35] info: [auth:w0tmco] Starting auth for GET /status
[2026-01-28 13:43:35] info: [auth:w0tmco] Token from cookie: false
[2026-01-28 13:43:35] info: [auth:w0tmco] Token from header: true
[2026-01-28 13:43:35] info: [auth:w0tmco] Authenticated user 096cfc6f-aa7d-45c2-8289-1f97bc7ba4f8
[2026-01-28 13:43:35] info: [MemoryManagement] Getting memory status
[2026-01-28 13:43:35] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:43:35] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:43:35] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:35] info: [EmailVerification] Created verification token
[2026-01-28 13:43:35] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:35] info: [authController.register] Verification email sent
[2026-01-28 13:43:35] info: [auth:qrzukg] Starting auth for GET /resources
[2026-01-28 13:43:35] info: [auth:qrzukg] Token from cookie: false
[2026-01-28 13:43:35] info: [auth:qrzukg] Token from header: true
[2026-01-28 13:43:35] info: [auth:qrzukg] Authenticated user ed64e1a2-eff3-4260-9b40-9165b6ed5418
[2026-01-28 13:43:35] info: [MemoryManagement] Getting resource analytics
[2026-01-28 13:43:35] info: [auth:5cb889] Starting auth for POST /cleanup
[2026-01-28 13:43:35] info: [auth:5cb889] Token from cookie: false
[2026-01-28 13:43:35] info: [auth:5cb889] Token from header: true
[2026-01-28 13:43:35] info: [auth:5cb889] Authenticated user ed64e1a2-eff3-4260-9b40-9165b6ed5418
[2026-01-28 13:43:35] info: [MemoryManagement] Resource cleanup requested for: all
[2026-01-28 13:43:35] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:43:35] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:43:35] info: [auth:k4cy8l] Starting auth for GET /resources
[2026-01-28 13:43:35] info: [auth:k4cy8l] Token from cookie: false
[2026-01-28 13:43:35] info: [auth:k4cy8l] Token from header: true
[2026-01-28 13:43:35] info: [auth:k4cy8l] Authenticated user ed64e1a2-eff3-4260-9b40-9165b6ed5418
[2026-01-28 13:43:35] info: [MemoryManagement] Getting resource analytics
[2026-01-28 13:43:35] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:43:35] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:43:36] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:36] info: [EmailVerification] Created verification token
[2026-01-28 13:43:36] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:36] info: [authController.register] Verification email sent
[2026-01-28 13:43:36] info: [auth:40w3kb] Starting auth for GET /resources
[2026-01-28 13:43:36] info: [auth:40w3kb] Token from cookie: false
[2026-01-28 13:43:36] info: [auth:40w3kb] Token from header: true
[2026-01-28 13:43:36] info: [auth:40w3kb] Authenticated user db4a7b63-fc20-4357-bab2-726f465b29c1
[2026-01-28 13:43:36] info: [MemoryManagement] Getting resource analytics
[2026-01-28 13:43:36] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:43:36] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:43:36] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:36] info: [EmailVerification] Created verification token
[2026-01-28 13:43:36] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:36] info: [authController.register] Verification email sent
[2026-01-28 13:43:36] info: [auth:zow4x] Starting auth for POST /gc
[2026-01-28 13:43:36] info: [auth:zow4x] Token from cookie: false
[2026-01-28 13:43:36] info: [auth:zow4x] Token from header: true
[2026-01-28 13:43:36] info: [auth:zow4x] Authenticated user d728e744-2c31-4def-bd28-6f90af25aa07
[2026-01-28 13:43:36] info: [MemoryManagement] Manual GC trigger requested (force: false)
[2026-01-28 13:43:36] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:43:36] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:43:36] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:36] info: [EmailVerification] Created verification token
[2026-01-28 13:43:36] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:36] info: [authController.register] Verification email sent
[2026-01-28 13:43:36] info: [auth:90t6ei] Starting auth for POST /gc
[2026-01-28 13:43:36] info: [auth:90t6ei] Token from cookie: false
[2026-01-28 13:43:36] info: [auth:90t6ei] Token from header: true
[2026-01-28 13:43:36] info: [auth:90t6ei] Authenticated user 9b094ca2-0379-4b03-bbef-fca469f9a32e
[2026-01-28 13:43:36] info: [MemoryManagement] Manual GC trigger requested (force: true)
[2026-01-28 13:43:36] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:43:36] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:43:37] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:37] info: [EmailVerification] Created verification token
[2026-01-28 13:43:37] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:37] info: [authController.register] Verification email sent
[2026-01-28 13:43:37] info: [auth:mmz53c] Starting auth for GET /alerts
[2026-01-28 13:43:37] info: [auth:mmz53c] Token from cookie: false
[2026-01-28 13:43:37] info: [auth:mmz53c] Token from header: true
[2026-01-28 13:43:37] info: [auth:mmz53c] Authenticated user a03c850e-dc59-4fd1-91a9-248de2f27c77
[2026-01-28 13:43:37] info: [MemoryManagement] Getting memory alerts
[2026-01-28 13:43:37] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:43:37] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:43:37] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:37] info: [EmailVerification] Created verification token
[2026-01-28 13:43:37] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:37] info: [authController.register] Verification email sent
[2026-01-28 13:43:37] info: [auth:0amwi] Starting auth for GET /alerts
[2026-01-28 13:43:37] info: [auth:0amwi] Token from cookie: false
[2026-01-28 13:43:37] info: [auth:0amwi] Token from header: true
[2026-01-28 13:43:37] info: [auth:0amwi] Authenticated user 70a7f81f-b426-4998-8c25-f096c8167792
[2026-01-28 13:43:37] info: [MemoryManagement] Getting memory alerts
[2026-01-28 13:43:37] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:43:37] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:43:37] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:37] info: [EmailVerification] Created verification token
[2026-01-28 13:43:37] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:37] info: [authController.register] Verification email sent
[2026-01-28 13:43:37] info: [auth:6qs34v] Starting auth for GET /status
[2026-01-28 13:43:37] info: [auth:6qs34v] Token from cookie: false
[2026-01-28 13:43:37] warn: [auth:6qs34v] Access token is required for GET /status from ::ffff:127.0.0.1
[2026-01-28 13:43:37] info: [auth:8jxri] Starting auth for GET /metrics
[2026-01-28 13:43:37] info: [auth:8jxri] Token from cookie: false
[2026-01-28 13:43:37] warn: [auth:8jxri] Access token is required for GET /metrics from ::ffff:127.0.0.1
[2026-01-28 13:43:37] info: [auth:tbvox8] Starting auth for GET /resources
[2026-01-28 13:43:37] info: [auth:tbvox8] Token from cookie: false
[2026-01-28 13:43:37] warn: [auth:tbvox8] Access token is required for GET /resources from ::ffff:127.0.0.1
[2026-01-28 13:43:37] info: [auth:kxbslgq] Starting auth for GET /alerts
[2026-01-28 13:43:37] info: [auth:kxbslgq] Token from cookie: false
[2026-01-28 13:43:37] warn: [auth:kxbslgq] Access token is required for GET /alerts from ::ffff:127.0.0.1
[2026-01-28 13:43:37] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:43:37] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:43:38] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:38] info: [EmailVerification] Created verification token
[2026-01-28 13:43:38] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:38] info: [authController.register] Verification email sent
[2026-01-28 13:43:38] info: [auth:sd79r] Starting auth for POST /gc
[2026-01-28 13:43:38] info: [auth:sd79r] Token from cookie: false
[2026-01-28 13:43:38] info: [auth:sd79r] Token from header: true
[2026-01-28 13:43:38] info: [auth:sd79r] Authenticated user ac45b771-5eb3-4460-9a2e-febf4e337b66
[2026-01-28 13:43:38] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:43:38] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:43:38] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:38] info: [EmailVerification] Created verification token
[2026-01-28 13:43:38] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:38] info: [authController.register] Verification email sent
[2026-01-28 13:43:38] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:43:38] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:43:38] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:38] info: [EmailVerification] Created verification token
[2026-01-28 13:43:38] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:38] info: [authController.register] Verification email sent
[2026-01-28 13:43:38] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:43:38] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:43:38] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:43:38] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
PASS tests/integration/memory-management-integration.test.mjs (6.148 s)
  🧠 Memory Management Integration Tests
    🔍 Memory Monitoring Integration
      √ should monitor memory usage and provide reports (520 ms)
      √ should provide detailed memory metrics (328 ms)
      √ should track memory usage during load operations (1365 ms)
    🔧 Resource Management Integration
      √ should track and cleanup resources correctly (366 ms)
      √ should provide resource analytics and counts (319 ms)
    🗑️ Garbage Collection Integration
      √ should trigger garbage collection when available (316 ms)
      √ should handle GC unavailability gracefully (319 ms)
    🚨 Memory Alert System Integration
      √ should provide memory alerts and warnings (320 ms)
      √ should filter alerts by severity (320 ms)
    🔒 Memory Management Security
      √ should require authentication for memory operations (356 ms)
      √ should validate input for memory operations (319 ms)
    📊 Memory Service Integration
      √ should integrate with memory service functions (297 ms)
      √ should track and untrack resources through service (306 ms)

[2026-01-28 13:43:39] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:43:39] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:43:39] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:43:39] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:43:39] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:39] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:39] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:39] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:39] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:39] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:39] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:39] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:39] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:39] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:43:40] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 13:43:40] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:40] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:43:40] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:43:40] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:43:40] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:43:40] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:43:40] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 13:43:40] info: [POST] /api/auth/login
[2026-01-28 13:43:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1446MB
[2026-01-28 13:43:40] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:40] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 13:43:40] info: [POST] /api/auth/login - 200
[2026-01-28 13:43:40] info: [POST] /api/auth/refresh-token
[2026-01-28 13:43:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1445MB
[2026-01-28 13:43:40] info: [TokenRotation] Token rotation successful
[2026-01-28 13:43:40] info: [authController.refreshToken] Token rotation successful
[2026-01-28 13:43:40] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 13:43:40] info: [POST] /api/auth/login
[2026-01-28 13:43:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1447MB
[2026-01-28 13:43:40] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:40] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 13:43:40] info: [POST] /api/auth/login - 200
[2026-01-28 13:43:40] info: [POST] /api/auth/refresh-token
[2026-01-28 13:43:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1457MB
[2026-01-28 13:43:40] info: [TokenRotation] Token rotation successful
[2026-01-28 13:43:40] info: [authController.refreshToken] Token rotation successful
[2026-01-28 13:43:40] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 13:43:40] info: [POST] /api/auth/refresh-token
[2026-01-28 13:43:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1453MB
[2026-01-28 13:43:40] warn: [TokenRotation] Token reuse detected
[2026-01-28 13:43:40] warn: [TokenRotation] Token family invalidated
[2026-01-28 13:43:40] warn: [TokenRotation] Token reuse detected during rotation
[2026-01-28 13:43:40] warn: [authController.refreshToken] Token family invalidated due to reuse detection
[2026-01-28 13:43:40] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again
[2026-01-28 13:43:40] error: [POST] /api/auth/refresh-token - ERROR
[2026-01-28 13:43:40] error: Error Token reuse detected - please login again
[2026-01-28 13:43:40] info: [POST] /api/auth/refresh-token - 401
[2026-01-28 13:43:40] info: [POST] /api/auth/login
[2026-01-28 13:43:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1459MB
[2026-01-28 13:43:40] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:40] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 13:43:40] info: [POST] /api/auth/login - 200
[2026-01-28 13:43:40] info: [POST] /api/auth/refresh-token
[2026-01-28 13:43:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1454MB
[2026-01-28 13:43:40] info: [TokenRotation] Token rotation successful
[2026-01-28 13:43:40] info: [authController.refreshToken] Token rotation successful
[2026-01-28 13:43:40] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 13:43:40] info: [POST] /api/auth/login
[2026-01-28 13:43:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1456MB
[2026-01-28 13:43:41] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:41] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 13:43:41] info: [POST] /api/auth/login - 200
[2026-01-28 13:43:41] info: [POST] /api/auth/refresh-token
[2026-01-28 13:43:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1452MB
[2026-01-28 13:43:41] info: [TokenRotation] Token rotation successful
[2026-01-28 13:43:41] info: [authController.refreshToken] Token rotation successful
[2026-01-28 13:43:41] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 13:43:41] info: [POST] /api/auth/refresh-token
[2026-01-28 13:43:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1449MB
[2026-01-28 13:43:41] warn: [TokenRotation] Token reuse detected
[2026-01-28 13:43:41] warn: [TokenRotation] Token family invalidated
[2026-01-28 13:43:41] warn: [TokenRotation] Token reuse detected during rotation
[2026-01-28 13:43:41] warn: [authController.refreshToken] Token family invalidated due to reuse detection
[2026-01-28 13:43:41] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again
[2026-01-28 13:43:41] error: [POST] /api/auth/refresh-token - ERROR
[2026-01-28 13:43:41] error: Error Token reuse detected - please login again
[2026-01-28 13:43:41] info: [POST] /api/auth/refresh-token - 401
[2026-01-28 13:43:41] info: [POST] /api/auth/login
[2026-01-28 13:43:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1453MB
[2026-01-28 13:43:41] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:41] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 13:43:41] info: [POST] /api/auth/login - 200
[2026-01-28 13:43:41] info: [POST] /api/auth/refresh-token
[2026-01-28 13:43:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1450MB
[2026-01-28 13:43:41] info: [TokenRotation] Token rotation successful
[2026-01-28 13:43:41] info: [authController.refreshToken] Token rotation successful
[2026-01-28 13:43:41] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 13:43:41] info: [POST] /api/auth/refresh-token
[2026-01-28 13:43:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1448MB
[2026-01-28 13:43:41] info: [TokenRotation] Token rotation successful
[2026-01-28 13:43:41] info: [authController.refreshToken] Token rotation successful
[2026-01-28 13:43:41] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 13:43:41] info: [POST] /api/auth/refresh-token
[2026-01-28 13:43:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1459MB
[2026-01-28 13:43:41] warn: [TokenRotation] Token reuse detected
[2026-01-28 13:43:41] warn: [TokenRotation] Token family invalidated
[2026-01-28 13:43:41] warn: [TokenRotation] Token reuse detected during rotation
[2026-01-28 13:43:41] warn: [authController.refreshToken] Token family invalidated due to reuse detection
[2026-01-28 13:43:41] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again
[2026-01-28 13:43:41] error: [POST] /api/auth/refresh-token - ERROR
[2026-01-28 13:43:41] error: Error Token reuse detected - please login again
[2026-01-28 13:43:41] info: [POST] /api/auth/refresh-token - 401
[2026-01-28 13:43:41] info: [POST] /api/auth/refresh-token
[2026-01-28 13:43:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1459MB
[2026-01-28 13:43:41] warn: [authController.refreshToken] Token rotation failed:
[2026-01-28 13:43:41] error: [authController.refreshToken] Error refreshing token: Invalid refresh token
[2026-01-28 13:43:41] error: [POST] /api/auth/refresh-token - ERROR
[2026-01-28 13:43:41] error: Error Invalid refresh token
[2026-01-28 13:43:41] info: [POST] /api/auth/refresh-token - 401
[2026-01-28 13:43:41] info: [POST] /api/auth/login
[2026-01-28 13:43:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1460MB
[2026-01-28 13:43:41] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:41] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 13:43:41] info: [POST] /api/auth/login - 200
[2026-01-28 13:43:41] info: [POST] /api/auth/refresh-token
[2026-01-28 13:43:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1455MB
[2026-01-28 13:43:41] info: [TokenRotation] Token rotation successful
[2026-01-28 13:43:41] info: [authController.refreshToken] Token rotation successful
[2026-01-28 13:43:41] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 13:43:41] info: [POST] /api/auth/refresh-token
[2026-01-28 13:43:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1454MB
[2026-01-28 13:43:41] warn: [TokenRotation] Token reuse detected
[2026-01-28 13:43:41] warn: [TokenRotation] Token family invalidated
[2026-01-28 13:43:41] warn: [TokenRotation] Token reuse detected during rotation
[2026-01-28 13:43:41] warn: [authController.refreshToken] Token family invalidated due to reuse detection
[2026-01-28 13:43:41] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again
[2026-01-28 13:43:41] error: [POST] /api/auth/refresh-token - ERROR
[2026-01-28 13:43:41] error: Error Token reuse detected - please login again
[2026-01-28 13:43:41] info: [POST] /api/auth/refresh-token - 401
[2026-01-28 13:43:41] info: [POST] /api/auth/login
[2026-01-28 13:43:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1455MB
[2026-01-28 13:43:41] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:41] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 13:43:41] info: [POST] /api/auth/login - 200
[2026-01-28 13:43:41] info: [POST] /api/auth/refresh-token
[2026-01-28 13:43:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1451MB
[2026-01-28 13:43:41] info: [TokenRotation] Token rotation successful
[2026-01-28 13:43:41] info: [authController.refreshToken] Token rotation successful
[2026-01-28 13:43:41] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 13:43:41] info: [POST] /api/auth/login
[2026-01-28 13:43:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1453MB
[2026-01-28 13:43:41] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:41] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 13:43:41] info: [POST] /api/auth/login - 200
[2026-01-28 13:43:41] info: [POST] /api/auth/refresh-token
[2026-01-28 13:43:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1452MB
[2026-01-28 13:43:41] info: [POST] /api/auth/refresh-token
[2026-01-28 13:43:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1458MB
[2026-01-28 13:43:41] info: [POST] /api/auth/refresh-token
[2026-01-28 13:43:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1448MB
[2026-01-28 13:43:41] info: [POST] /api/auth/refresh-token
[2026-01-28 13:43:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1453MB
[2026-01-28 13:43:41] info: [POST] /api/auth/refresh-token
[2026-01-28 13:43:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1458MB
[2026-01-28 13:43:41] info: [TokenRotation] Token rotation successful
[2026-01-28 13:43:41] info: [authController.refreshToken] Token rotation successful
[2026-01-28 13:43:41] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 13:43:41] warn: [TokenRotation] Token reuse detected
[2026-01-28 13:43:41] warn: [TokenRotation] Token reuse detected
[2026-01-28 13:43:41] warn: [TokenRotation] Token family invalidated
[2026-01-28 13:43:41] warn: [TokenRotation] Token reuse detected during rotation
[2026-01-28 13:43:41] warn: [authController.refreshToken] Token family invalidated due to reuse detection
[2026-01-28 13:43:41] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again
[2026-01-28 13:43:41] error: [POST] /api/auth/refresh-token - ERROR
[2026-01-28 13:43:41] error: Error Token reuse detected - please login again
[2026-01-28 13:43:41] info: [POST] /api/auth/refresh-token - 401
[2026-01-28 13:43:41] warn: [TokenRotation] Token family invalidated
[2026-01-28 13:43:41] warn: [TokenRotation] Token reuse detected during rotation
[2026-01-28 13:43:41] warn: [authController.refreshToken] Token family invalidated due to reuse detection
[2026-01-28 13:43:42] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again
[2026-01-28 13:43:42] error: [POST] /api/auth/refresh-token - ERROR
[2026-01-28 13:43:42] error: Error Token reuse detected - please login again
[2026-01-28 13:43:42] info: [POST] /api/auth/refresh-token - 401
[2026-01-28 13:43:42] info: [TokenRotation] Token rotation successful
[2026-01-28 13:43:42] info: [authController.refreshToken] Token rotation successful
[2026-01-28 13:43:42] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 13:43:42] warn: [authController.refreshToken] Token rotation failed:
[2026-01-28 13:43:42] error: [authController.refreshToken] Error refreshing token: Invalid refresh token
[2026-01-28 13:43:42] error: [POST] /api/auth/refresh-token - ERROR
[2026-01-28 13:43:42] error: Error Invalid refresh token
[2026-01-28 13:43:42] info: [POST] /api/auth/refresh-token - 401
[2026-01-28 13:43:42] info: [POST] /api/auth/login
[2026-01-28 13:43:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1457MB
[2026-01-28 13:43:42] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:42] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 13:43:42] info: [POST] /api/auth/login - 200
[2026-01-28 13:43:42] info: [POST] /api/auth/refresh-token
[2026-01-28 13:43:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1457MB
[2026-01-28 13:43:42] info: [POST] /api/auth/refresh-token
[2026-01-28 13:43:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1462MB
[2026-01-28 13:43:42] info: [POST] /api/auth/refresh-token
[2026-01-28 13:43:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1452MB
[2026-01-28 13:43:42] info: [TokenRotation] Token rotation successful
[2026-01-28 13:43:42] info: [authController.refreshToken] Token rotation successful
[2026-01-28 13:43:42] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 13:43:42] info: [TokenRotation] Token rotation successful
[2026-01-28 13:43:42] info: [authController.refreshToken] Token rotation successful
[2026-01-28 13:43:42] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 13:43:42] info: [TokenRotation] Token rotation successful
[2026-01-28 13:43:42] info: [authController.refreshToken] Token rotation successful
[2026-01-28 13:43:42] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 13:43:42] info: [POST] /api/auth/login
[2026-01-28 13:43:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1463MB
[2026-01-28 13:43:42] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:42] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 13:43:42] info: [POST] /api/auth/login - 200
[2026-01-28 13:43:42] info: [POST] /api/auth/refresh-token
[2026-01-28 13:43:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1458MB
[2026-01-28 13:43:42] info: [TokenRotation] Token rotation successful
[2026-01-28 13:43:42] info: [authController.refreshToken] Token rotation successful
[2026-01-28 13:43:42] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 13:43:42] info: [POST] /api/auth/refresh-token
[2026-01-28 13:43:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1456MB
[2026-01-28 13:43:42] warn: [TokenRotation] Token reuse detected
[2026-01-28 13:43:42] warn: [TokenRotation] Token family invalidated
[2026-01-28 13:43:42] warn: [TokenRotation] Token reuse detected during rotation
[2026-01-28 13:43:42] warn: [authController.refreshToken] Token family invalidated due to reuse detection
[2026-01-28 13:43:42] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again
[2026-01-28 13:43:42] error: [POST] /api/auth/refresh-token - ERROR
[2026-01-28 13:43:42] error: Error Token reuse detected - please login again
[2026-01-28 13:43:42] info: [POST] /api/auth/refresh-token - 401
[2026-01-28 13:43:42] info: [POST] /api/auth/refresh-token
[2026-01-28 13:43:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1456MB
[2026-01-28 13:43:42] warn: [authController.refreshToken] Token rotation failed:
[2026-01-28 13:43:42] error: [authController.refreshToken] Error refreshing token: Invalid refresh token
[2026-01-28 13:43:42] error: [POST] /api/auth/refresh-token - ERROR
[2026-01-28 13:43:42] error: Error Invalid refresh token
[2026-01-28 13:43:42] info: [POST] /api/auth/refresh-token - 401
[2026-01-28 13:43:42] info: [POST] /api/auth/login
[2026-01-28 13:43:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1457MB
[2026-01-28 13:43:42] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:42] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 13:43:42] info: [POST] /api/auth/login - 200
[2026-01-28 13:43:42] info: [POST] /api/auth/refresh-token
[2026-01-28 13:43:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1454MB
[2026-01-28 13:43:42] info: [TokenRotation] Token rotation successful
[2026-01-28 13:43:42] info: [authController.refreshToken] Token rotation successful
[2026-01-28 13:43:42] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 13:43:42] info: [POST] /api/auth/refresh-token
[2026-01-28 13:43:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1452MB
[2026-01-28 13:43:42] warn: [TokenRotation] Token reuse detected
[2026-01-28 13:43:42] warn: [TokenRotation] Token family invalidated
[2026-01-28 13:43:42] warn: [TokenRotation] Token reuse detected during rotation
[2026-01-28 13:43:42] warn: [authController.refreshToken] Token family invalidated due to reuse detection
[2026-01-28 13:43:42] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again
[2026-01-28 13:43:42] error: [POST] /api/auth/refresh-token - ERROR
[2026-01-28 13:43:42] error: Error Token reuse detected - please login again
[2026-01-28 13:43:42] info: [POST] /api/auth/refresh-token - 401
[2026-01-28 13:43:42] info: [POST] /api/auth/refresh-token
[2026-01-28 13:43:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1455MB
[2026-01-28 13:43:42] warn: [authController.refreshToken] Token rotation failed:
[2026-01-28 13:43:42] error: [authController.refreshToken] Error refreshing token: Invalid refresh token
[2026-01-28 13:43:42] error: [POST] /api/auth/refresh-token - ERROR
[2026-01-28 13:43:42] error: Error Invalid refresh token
[2026-01-28 13:43:42] info: [POST] /api/auth/refresh-token - 401
[2026-01-28 13:43:43] info: [POST] /api/auth/login
[2026-01-28 13:43:43] warn: [MemoryMonitoring] Memory threshold exceeded: 1456MB
[2026-01-28 13:43:43] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:43] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 13:43:43] info: [POST] /api/auth/login - 200
[2026-01-28 13:43:43] info: [POST] /api/auth/logout
[2026-01-28 13:43:43] warn: [MemoryMonitoring] Memory threshold exceeded: 1453MB
[2026-01-28 13:43:43] info: [auth:uufdno] Starting auth for POST /logout
[2026-01-28 13:43:43] info: [auth:uufdno] Token from cookie: false
[2026-01-28 13:43:43] warn: [auth:uufdno] Access token is required for POST /logout from ::ffff:127.0.0.1
[2026-01-28 13:43:43] info: [POST] /api/auth/logout - 401
[2026-01-28 13:43:43] info: [POST] /api/auth/login
[2026-01-28 13:43:43] warn: [MemoryMonitoring] Memory threshold exceeded: 1454MB
[2026-01-28 13:43:43] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:43] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 13:43:43] info: [POST] /api/auth/login - 200
[2026-01-28 13:43:43] info: [POST] /api/auth/refresh-token
[2026-01-28 13:43:43] warn: [MemoryMonitoring] Memory threshold exceeded: 1464MB
[2026-01-28 13:43:43] info: [TokenRotation] Token rotation successful
[2026-01-28 13:43:43] info: [authController.refreshToken] Token rotation successful
[2026-01-28 13:43:43] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 13:43:43] info: [POST] /api/auth/refresh-token
[2026-01-28 13:43:43] warn: [MemoryMonitoring] Memory threshold exceeded: 1460MB
[2026-01-28 13:43:43] warn: [TokenRotation] Token reuse detected
[2026-01-28 13:43:43] warn: [TokenRotation] Token family invalidated
[2026-01-28 13:43:43] warn: [TokenRotation] Token reuse detected during rotation
[2026-01-28 13:43:43] warn: [authController.refreshToken] Token family invalidated due to reuse detection
[2026-01-28 13:43:43] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again
[2026-01-28 13:43:43] error: [POST] /api/auth/refresh-token - ERROR
[2026-01-28 13:43:43] error: Error Token reuse detected - please login again
[2026-01-28 13:43:43] info: [POST] /api/auth/refresh-token - 401
[2026-01-28 13:43:43] info: [POST] /api/auth/cleanup-tokens
[2026-01-28 13:43:43] warn: [MemoryMonitoring] Memory threshold exceeded: 1464MB
[2026-01-28 13:43:43] info: [auth:m1g1c] Starting auth for POST /auth/cleanup-tokens
[2026-01-28 13:43:43] info: [auth:m1g1c] Token from cookie: false
[2026-01-28 13:43:43] warn: [auth:m1g1c] Access token is required for POST /auth/cleanup-tokens from ::ffff:127.0.0.1
[2026-01-28 13:43:43] info: [POST] /api/auth/cleanup-tokens - 401
[2026-01-28 13:43:43] info: [POST] /api/auth/refresh-token
[2026-01-28 13:43:43] warn: [MemoryMonitoring] Memory threshold exceeded: 1455MB
[2026-01-28 13:43:43] warn: [TokenRotation] Token reuse detected during rotation
[2026-01-28 13:43:43] warn: [authController.refreshToken] Token family invalidated due to reuse detection
[2026-01-28 13:43:43] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again
[2026-01-28 13:43:43] error: [POST] /api/auth/refresh-token - ERROR
[2026-01-28 13:43:43] error: Error Token reuse detected - please login again
[2026-01-28 13:43:43] info: [POST] /api/auth/refresh-token - 401
[2026-01-28 13:43:43] info: [POST] /api/auth/refresh-token
[2026-01-28 13:43:43] warn: [MemoryMonitoring] Memory threshold exceeded: 1454MB
[2026-01-28 13:43:43] error: [authController.refreshToken] Error refreshing token: Refresh token is required
[2026-01-28 13:43:43] error: [POST] /api/auth/refresh-token - ERROR
[2026-01-28 13:43:43] error: Error Refresh token is required
[2026-01-28 13:43:43] info: [POST] /api/auth/refresh-token - 400
[2026-01-28 13:43:43] info: [POST] /api/auth/refresh-token
[2026-01-28 13:43:43] warn: [MemoryMonitoring] Memory threshold exceeded: 1456MB
[2026-01-28 13:43:43] warn: [TokenRotation] Token reuse detected during rotation
[2026-01-28 13:43:43] warn: [authController.refreshToken] Token family invalidated due to reuse detection
[2026-01-28 13:43:43] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again
[2026-01-28 13:43:43] error: [POST] /api/auth/refresh-token - ERROR
[2026-01-28 13:43:43] error: Error Token reuse detected - please login again
[2026-01-28 13:43:43] info: [POST] /api/auth/refresh-token - 401
[2026-01-28 13:43:43] info: [POST] /api/auth/refresh-token
[2026-01-28 13:43:43] warn: [MemoryMonitoring] Memory threshold exceeded: 1455MB
[2026-01-28 13:43:43] warn: [TokenRotation] Token reuse detected during rotation
[2026-01-28 13:43:43] warn: [authController.refreshToken] Token family invalidated due to reuse detection
[2026-01-28 13:43:43] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again
[2026-01-28 13:43:43] error: [POST] /api/auth/refresh-token - ERROR
[2026-01-28 13:43:43] error: Error Token reuse detected - please login again
[2026-01-28 13:43:43] info: [POST] /api/auth/refresh-token - 401
[2026-01-28 13:43:43] info: [POST] /api/auth/refresh-token
[2026-01-28 13:43:43] warn: [MemoryMonitoring] Memory threshold exceeded: 1454MB
[2026-01-28 13:43:43] warn: [TokenRotation] Token reuse detected during rotation
[2026-01-28 13:43:43] warn: [authController.refreshToken] Token family invalidated due to reuse detection
[2026-01-28 13:43:43] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again
[2026-01-28 13:43:43] error: [POST] /api/auth/refresh-token - ERROR
[2026-01-28 13:43:43] error: Error Token reuse detected - please login again
[2026-01-28 13:43:43] info: [POST] /api/auth/refresh-token - 401
PASS __tests__/integration/token-rotation.test.mjs
  Token Rotation and Reuse Detection System
    Basic Token Rotation
      √ should_rotate_refresh_token_on_each_use (322 ms)
      √ should_invalidate_old_refresh_token_after_rotation (252 ms)
      √ should_track_token_families_in_database (225 ms)
    Token Reuse Detection
      √ should_detect_refresh_token_reuse (231 ms)
      √ should_invalidate_entire_token_family_on_reuse_detection (281 ms)
      √ should_require_reauthentication_after_family_invalidation (349 ms)
    Concurrent Token Usage
      √ should_handle_concurrent_refresh_requests_gracefully (389 ms)
      √ should_prevent_race_conditions_in_token_rotation (251 ms)
    Token Compromise Scenarios
      √ should_handle_legitimate_user_concurrent_with_attacker (250 ms)
      √ should_log_security_events_for_monitoring (226 ms)
    Token Expiration and Cleanup
      √ should_reject_expired_refresh_tokens (125 ms)
      √ should_clean_up_invalidated_token_families (373 ms)
    Database Constraints and Security
      √ should_enforce_unique_constraints_on_token_families (77 ms)
      √ should_validate_token_structure_and_signatures (193 ms)

[2026-01-28 13:43:43] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:43:43] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:43:43] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:43:43] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:43:44] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:44] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:44] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:44] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:44] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:44] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:44] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:44] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:44] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:44] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:43:44] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 13:43:44] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:44] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:43:44] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:43:44] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:43:44] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:43:44] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:43:44] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 13:43:45] info: [POST] /api/auth/register
[2026-01-28 13:43:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1300MB
[2026-01-28 13:43:45] warn: [Validation] Input validation failed
[2026-01-28 13:43:45] info: [POST] /api/auth/register - 400
[2026-01-28 13:43:45] info: [POST] /api/auth/register
[2026-01-28 13:43:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1310MB
[2026-01-28 13:43:45] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:45] info: [EmailVerification] Created verification token
[2026-01-28 13:43:45] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:45] info: [authController.register] Verification email sent
[2026-01-28 13:43:45] info: [POST] /api/auth/register - 201
[2026-01-28 13:43:45] info: [POST] /api/auth/register
[2026-01-28 13:43:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1311MB
[2026-01-28 13:43:45] warn: [Validation] Input validation failed
[2026-01-28 13:43:45] info: [POST] /api/auth/register - 400
[2026-01-28 13:43:45] info: [POST] /api/auth/register
[2026-01-28 13:43:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1305MB
[2026-01-28 13:43:45] warn: [Validation] Input validation failed
[2026-01-28 13:43:45] info: [POST] /api/auth/register - 400
[2026-01-28 13:43:45] info: [POST] /api/auth/register
[2026-01-28 13:43:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1300MB
[2026-01-28 13:43:45] warn: [Validation] Input validation failed
[2026-01-28 13:43:45] info: [POST] /api/auth/register - 400
[2026-01-28 13:43:45] info: [POST] /api/auth/register
[2026-01-28 13:43:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1309MB
[2026-01-28 13:43:45] warn: [Validation] Input validation failed
[2026-01-28 13:43:45] info: [POST] /api/auth/register - 400
[2026-01-28 13:43:45] info: [POST] /api/auth/register
[2026-01-28 13:43:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1303MB
[2026-01-28 13:43:45] warn: [Validation] Input validation failed
[2026-01-28 13:43:45] info: [POST] /api/auth/register - 400
[2026-01-28 13:43:45] info: [POST] /api/auth/register
[2026-01-28 13:43:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1313MB
[2026-01-28 13:43:45] warn: [Validation] Input validation failed
[2026-01-28 13:43:45] info: [POST] /api/auth/register - 400
[2026-01-28 13:43:45] info: [POST] /api/auth/register
[2026-01-28 13:43:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1307MB
[2026-01-28 13:43:45] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:45] info: [EmailVerification] Created verification token
[2026-01-28 13:43:45] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:45] info: [authController.register] Verification email sent
[2026-01-28 13:43:45] info: [POST] /api/auth/register - 201
[2026-01-28 13:43:45] info: [POST] /api/auth/register
[2026-01-28 13:43:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1309MB
[2026-01-28 13:43:46] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:46] info: [EmailVerification] Created verification token
[2026-01-28 13:43:46] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:46] info: [authController.register] Verification email sent
[2026-01-28 13:43:46] info: [POST] /api/auth/register - 201
[2026-01-28 13:43:46] info: [POST] /api/auth/register
[2026-01-28 13:43:46] warn: [MemoryMonitoring] Memory threshold exceeded: 1310MB
[2026-01-28 13:43:46] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:46] info: [EmailVerification] Created verification token
[2026-01-28 13:43:46] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:46] info: [authController.register] Verification email sent
[2026-01-28 13:43:46] info: [POST] /api/auth/register - 201
[2026-01-28 13:43:46] info: [POST] /api/auth/register
[2026-01-28 13:43:46] warn: [MemoryMonitoring] Memory threshold exceeded: 1311MB
[2026-01-28 13:43:46] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:46] info: [EmailVerification] Created verification token
[2026-01-28 13:43:46] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:46] info: [authController.register] Verification email sent
[2026-01-28 13:43:46] info: [POST] /api/auth/register - 201
[2026-01-28 13:43:46] info: [POST] /api/auth/register
[2026-01-28 13:43:46] warn: [MemoryMonitoring] Memory threshold exceeded: 1311MB
[2026-01-28 13:43:47] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:47] info: [EmailVerification] Created verification token
[2026-01-28 13:43:47] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:47] info: [authController.register] Verification email sent
[2026-01-28 13:43:47] info: [POST] /api/auth/register - 201
[2026-01-28 13:43:47] info: [POST] /api/auth/register
[2026-01-28 13:43:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1311MB
[2026-01-28 13:43:47] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:47] info: [EmailVerification] Created verification token
[2026-01-28 13:43:47] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:47] info: [authController.register] Verification email sent
[2026-01-28 13:43:47] info: [POST] /api/auth/register - 201
[2026-01-28 13:43:47] info: [POST] /api/auth/register
[2026-01-28 13:43:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1311MB
[2026-01-28 13:43:47] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:47] info: [EmailVerification] Created verification token
[2026-01-28 13:43:47] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:47] info: [authController.register] Verification email sent
[2026-01-28 13:43:47] info: [POST] /api/auth/register - 201
[2026-01-28 13:43:47] info: [POST] /api/auth/register
[2026-01-28 13:43:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1311MB
[2026-01-28 13:43:48] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:48] info: [EmailVerification] Created verification token
[2026-01-28 13:43:48] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:48] info: [authController.register] Verification email sent
[2026-01-28 13:43:48] info: [POST] /api/auth/register - 201
[2026-01-28 13:43:48] info: [POST] /api/auth/register
[2026-01-28 13:43:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1312MB
[2026-01-28 13:43:48] warn: [Validation] Input validation failed
[2026-01-28 13:43:48] info: [POST] /api/auth/register - 400
[2026-01-28 13:43:48] info: [POST] /api/auth/register
[2026-01-28 13:43:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1306MB
[2026-01-28 13:43:48] warn: [Validation] Input validation failed
[2026-01-28 13:43:48] info: [POST] /api/auth/register - 400
[2026-01-28 13:43:48] info: [POST] /api/auth/register
[2026-01-28 13:43:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1303MB
[2026-01-28 13:43:48] warn: [Validation] Input validation failed
[2026-01-28 13:43:48] info: [POST] /api/auth/register - 400
[2026-01-28 13:43:48] info: [POST] /api/auth/register
[2026-01-28 13:43:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1312MB
[2026-01-28 13:43:48] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:48] info: [EmailVerification] Created verification token
[2026-01-28 13:43:48] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:48] info: [authController.register] Verification email sent
[2026-01-28 13:43:48] info: [POST] /api/auth/register - 201
[2026-01-28 13:43:48] info: [POST] /api/auth/register
[2026-01-28 13:43:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1313MB
[2026-01-28 13:43:48] warn: [Validation] Input validation failed
[2026-01-28 13:43:48] info: [POST] /api/auth/register - 400
[2026-01-28 13:43:48] info: [POST] /api/auth/register
[2026-01-28 13:43:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1307MB
[2026-01-28 13:43:48] warn: [Validation] Input validation failed
[2026-01-28 13:43:48] info: [POST] /api/auth/register - 400
[2026-01-28 13:43:48] info: [PUT] /api/auth/profile
[2026-01-28 13:43:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1303MB
[2026-01-28 13:43:48] info: [auth:09c8d] Starting auth for PUT /profile
[2026-01-28 13:43:48] info: [auth:09c8d] Token from cookie: false
[2026-01-28 13:43:48] info: [auth:09c8d] Token from header: true
[2026-01-28 13:43:48] info: [auth:09c8d] Authenticated user test-user-uuid-123
[2026-01-28 13:43:48] warn: [Validation] Input validation failed
[2026-01-28 13:43:48] info: [PUT] /api/auth/profile - 400
[2026-01-28 13:43:48] info: [PUT] /api/auth/profile
[2026-01-28 13:43:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1315MB
[2026-01-28 13:43:48] info: [auth:c8gufn] Starting auth for PUT /profile
[2026-01-28 13:43:48] info: [auth:c8gufn] Token from cookie: false
[2026-01-28 13:43:48] info: [auth:c8gufn] Token from header: true
[2026-01-28 13:43:48] info: [auth:c8gufn] Authenticated user test-user-uuid-123
[2026-01-28 13:43:48] error: [authController.updateProfile] Error updating profile: At least one field is required
[2026-01-28 13:43:48] error: [PUT] /api/auth/profile - ERROR
[2026-01-28 13:43:48] error: Error At least one field is required
[2026-01-28 13:43:48] info: [PUT] /api/auth/profile - 400
[2026-01-28 13:43:48] info: [PUT] /api/auth/profile
[2026-01-28 13:43:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1314MB
[2026-01-28 13:43:48] info: [auth:vro6pw] Starting auth for PUT /profile
[2026-01-28 13:43:48] info: [auth:vro6pw] Token from cookie: false
[2026-01-28 13:43:48] info: [auth:vro6pw] Token from header: true
[2026-01-28 13:43:48] info: [auth:vro6pw] Authenticated user test-user-uuid-123
[2026-01-28 13:43:48] error: [authController.updateProfile] Error updating profile: At least one field is required
[2026-01-28 13:43:48] error: [PUT] /api/auth/profile - ERROR
[2026-01-28 13:43:48] error: Error At least one field is required
[2026-01-28 13:43:48] info: [PUT] /api/auth/profile - 400
[2026-01-28 13:43:48] info: [PUT] /api/auth/profile
[2026-01-28 13:43:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1313MB
[2026-01-28 13:43:48] info: [auth:7fhmsu] Starting auth for PUT /profile
[2026-01-28 13:43:48] info: [auth:7fhmsu] Token from cookie: false
[2026-01-28 13:43:48] info: [auth:7fhmsu] Token from header: true
[2026-01-28 13:43:48] info: [auth:7fhmsu] Authenticated user test-user-uuid-123
[2026-01-28 13:43:48] error: [authController.updateProfile] Error updating profile: At least one field is required
[2026-01-28 13:43:48] error: [PUT] /api/auth/profile - ERROR
[2026-01-28 13:43:48] error: Error At least one field is required
[2026-01-28 13:43:48] info: [PUT] /api/auth/profile - 400
[2026-01-28 13:43:48] info: [PUT] /api/auth/profile
[2026-01-28 13:43:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1312MB
[2026-01-28 13:43:48] info: [auth:ch533a] Starting auth for PUT /profile
[2026-01-28 13:43:48] info: [auth:ch533a] Token from cookie: false
[2026-01-28 13:43:48] info: [auth:ch533a] Token from header: true
[2026-01-28 13:43:48] info: [auth:ch533a] Authenticated user test-user-uuid-123
[2026-01-28 13:43:48] warn: [Validation] Input validation failed
[2026-01-28 13:43:48] info: [PUT] /api/auth/profile - 400
[2026-01-28 13:43:48] info: [PUT] /api/auth/profile
[2026-01-28 13:43:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1308MB
[2026-01-28 13:43:48] info: [auth:ndh82l] Starting auth for PUT /profile
[2026-01-28 13:43:48] info: [auth:ndh82l] Token from cookie: false
[2026-01-28 13:43:48] info: [auth:ndh82l] Token from header: true
[2026-01-28 13:43:48] info: [auth:ndh82l] Authenticated user test-user-uuid-123
[2026-01-28 13:43:48] warn: [Validation] Input validation failed
[2026-01-28 13:43:48] info: [PUT] /api/auth/profile - 400
[2026-01-28 13:43:48] info: [PUT] /api/auth/profile
[2026-01-28 13:43:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1305MB
[2026-01-28 13:43:48] info: [auth:0dqg2l] Starting auth for PUT /profile
[2026-01-28 13:43:48] info: [auth:0dqg2l] Token from cookie: false
[2026-01-28 13:43:48] info: [auth:0dqg2l] Token from header: true
[2026-01-28 13:43:48] info: [auth:0dqg2l] Authenticated user test-user-uuid-123
[2026-01-28 13:43:48] error: [authController.updateProfile] Error updating profile: At least one field is required
[2026-01-28 13:43:48] error: [PUT] /api/auth/profile - ERROR
[2026-01-28 13:43:48] error: Error At least one field is required
[2026-01-28 13:43:48] info: [PUT] /api/auth/profile - 400
[2026-01-28 13:43:48] info: [PUT] /api/auth/profile
[2026-01-28 13:43:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1305MB
[2026-01-28 13:43:48] info: [auth:81h014] Starting auth for PUT /profile
[2026-01-28 13:43:48] info: [auth:81h014] Token from cookie: false
[2026-01-28 13:43:48] info: [auth:81h014] Token from header: true
[2026-01-28 13:43:48] info: [auth:81h014] Authenticated user test-user-uuid-123
[2026-01-28 13:43:48] warn: [Validation] Input validation failed
[2026-01-28 13:43:48] info: [PUT] /api/auth/profile - 400
[2026-01-28 13:43:48] info: [PUT] /api/auth/profile
[2026-01-28 13:43:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1316MB
[2026-01-28 13:43:48] info: [auth:380mg] Starting auth for PUT /profile
[2026-01-28 13:43:48] info: [auth:380mg] Token from cookie: false
[2026-01-28 13:43:48] info: [auth:380mg] Token from header: true
[2026-01-28 13:43:48] info: [auth:380mg] Authenticated user test-user-uuid-123
[2026-01-28 13:43:48] warn: [Validation] Input validation failed
[2026-01-28 13:43:48] info: [PUT] /api/auth/profile - 400
[2026-01-28 13:43:48] info: [PUT] /api/auth/profile
[2026-01-28 13:43:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1312MB
[2026-01-28 13:43:48] info: [auth:75jdrd] Starting auth for PUT /profile
[2026-01-28 13:43:48] info: [auth:75jdrd] Token from cookie: false
[2026-01-28 13:43:48] info: [auth:75jdrd] Token from header: true
[2026-01-28 13:43:48] info: [auth:75jdrd] Authenticated user test-user-uuid-123
[2026-01-28 13:43:48] error: [authController.updateProfile] Error updating profile: 
Invalid `prisma.user.update()` invocation:


An operation failed because it depends on one or more records that were required but not found. No record was found for an update.
[2026-01-28 13:43:48] error: [PUT] /api/auth/profile - ERROR
[2026-01-28 13:43:48] error: Error 
Invalid `prisma.user.update()` invocation:


An operation failed because it depends on one or more records that were required but not found. No record was found for an update.
[2026-01-28 13:43:48] info: [PUT] /api/auth/profile - 404
[2026-01-28 13:43:48] info: [POST] /api/auth/register
[2026-01-28 13:43:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1313MB
[2026-01-28 13:43:48] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:48] info: [EmailVerification] Created verification token
[2026-01-28 13:43:48] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:48] info: [authController.register] Verification email sent
[2026-01-28 13:43:48] info: [POST] /api/auth/register - 201
[2026-01-28 13:43:48] info: [PUT] /api/auth/profile
[2026-01-28 13:43:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1315MB
[2026-01-28 13:43:48] info: [auth:eg0lak] Starting auth for PUT /profile
[2026-01-28 13:43:48] info: [auth:eg0lak] Token from cookie: false
[2026-01-28 13:43:48] info: [auth:eg0lak] Token from header: true
[2026-01-28 13:43:48] info: [auth:eg0lak] Authenticated user test-user-uuid-123
[2026-01-28 13:43:48] error: [authController.updateProfile] Error updating profile: At least one field is required
[2026-01-28 13:43:48] error: [PUT] /api/auth/profile - ERROR
[2026-01-28 13:43:48] error: Error At least one field is required
[2026-01-28 13:43:48] info: [PUT] /api/auth/profile - 400
[2026-01-28 13:43:49] info: [POST] /api/auth/register
[2026-01-28 13:43:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1314MB
[2026-01-28 13:43:49] error: [authController.register] Error registering user: User with this email or username already exists
[2026-01-28 13:43:49] error: [POST] /api/auth/register - ERROR
[2026-01-28 13:43:49] error: Error User with this email or username already exists
[2026-01-28 13:43:49] info: [POST] /api/auth/register - 400
[2026-01-28 13:43:49] info: [POST] /api/auth/register
[2026-01-28 13:43:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1314MB
[2026-01-28 13:43:49] warn: [Validation] Input validation failed
[2026-01-28 13:43:49] info: [POST] /api/auth/register - 400
[2026-01-28 13:43:49] info: [POST] /api/auth/register
[2026-01-28 13:43:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1309MB
[2026-01-28 13:43:49] warn: [Validation] Input validation failed
[2026-01-28 13:43:49] info: [POST] /api/auth/register - 400
[2026-01-28 13:43:49] info: [POST] /api/auth/register
[2026-01-28 13:43:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1318MB
[2026-01-28 13:43:49] warn: [Validation] Input validation failed
[2026-01-28 13:43:49] info: [POST] /api/auth/register - 400
[2026-01-28 13:43:49] info: [POST] /api/auth/register
[2026-01-28 13:43:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1312MB
[2026-01-28 13:43:49] warn: [Validation] Input validation failed
[2026-01-28 13:43:49] info: [POST] /api/auth/register - 400
PASS __tests__/integration/input-validation.test.mjs (5.497 s)
  Input Validation Integration Tests
    Registration Validation
      Email Validation
        √ should reject invalid email format (136 ms)
        √ should accept valid email format (379 ms)
      Password Validation - Enhanced Requirements
        √ should reject password without lowercase letter (23 ms)
        √ should reject password without uppercase letter (16 ms)
        √ should reject password without number (19 ms)
        √ should reject password without special character (18 ms)
        √ should reject password shorter than 8 characters (15 ms)
        √ should reject password longer than 128 characters (18 ms)
        √ should accept password meeting all requirements (328 ms)
        √ should accept all supported special characters (2136 ms)
      Username Validation
        √ should reject username shorter than 3 characters (18 ms)
        √ should reject username longer than 30 characters (16 ms)
        √ should reject username with special characters (19 ms)
        √ should accept valid username (302 ms)
      Name Validation
        √ should reject empty first name (17 ms)
        √ should reject first name longer than 50 characters (16 ms)
    Profile Update Validation
      Bio Field Validation
        √ should reject bio longer than 500 characters (24 ms)
        √ should accept bio at maximum length (500 characters) (26 ms)
        √ should accept empty bio (29 ms)
        √ should sanitize bio with XSS prevention (25 ms)
      Name Update Validation
        √ should reject first name longer than 50 characters (21 ms)
        √ should reject last name longer than 50 characters (18 ms)
        √ should accept valid name updates (24 ms)
      Username Update Validation
        √ should reject username shorter than 3 characters (20 ms)
        √ should reject username longer than 30 characters (23 ms)
        √ should accept valid username update (30 ms)
    XSS Prevention Integration
      √ should sanitize registration inputs with HTML tags (309 ms)
      √ should sanitize profile bio with event handlers (24 ms)
    Field Trimming and Normalization
      √ should trim whitespace from names (22 ms)
      √ should normalize email addresses (18 ms)
    Required Fields Validation
      √ should reject registration without email (16 ms)
      √ should reject registration without username (20 ms)
      √ should reject registration without password (16 ms)

[2026-01-28 13:43:49] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:43:49] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:43:49] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:43:49] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:43:49] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:49] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:49] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:49] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:49] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:49] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:49] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:49] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:49] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:49] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:43:49] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:43:49] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:43:49] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:43:49] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:43:49] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:43:50] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:50] info: [EmailVerification] Created verification token
[2026-01-28 13:43:50] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:50] info: [authController.register] Verification email sent
[2026-01-28 13:43:50] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:50] info: [EmailVerification] Created verification token
[2026-01-28 13:43:50] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:50] info: [authController.register] Verification email sent
[2026-01-28 13:43:50] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:50] info: [EmailVerification] Created verification token
[2026-01-28 13:43:50] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:50] info: [authController.register] Verification email sent
[2026-01-28 13:43:51] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:51] info: [EmailVerification] Created verification token
[2026-01-28 13:43:51] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:51] info: [authController.register] Verification email sent
[2026-01-28 13:43:51] info: [auth:ivvdsd] Starting auth for POST /endpoints
[2026-01-28 13:43:51] info: [auth:ivvdsd] Token from cookie: false
[2026-01-28 13:43:51] info: [auth:ivvdsd] Token from header: true
[2026-01-28 13:43:51] info: [auth:ivvdsd] Authenticated user 254f93f5-a8e7-40b9-b534-f1fdd21c8f90
[2026-01-28 13:43:51] info: [DocumentationRoutes] Registering endpoint: GET /api/test/integration
[2026-01-28 13:43:51] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:51] info: [EmailVerification] Created verification token
[2026-01-28 13:43:51] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:51] info: [authController.register] Verification email sent
[2026-01-28 13:43:51] info: [auth:v7uxmqi] Starting auth for POST /schemas
[2026-01-28 13:43:51] info: [auth:v7uxmqi] Token from cookie: false
[2026-01-28 13:43:51] info: [auth:v7uxmqi] Token from header: true
[2026-01-28 13:43:51] info: [auth:v7uxmqi] Authenticated user f5885fc5-1d16-4856-adb7-92cda3016a32
[2026-01-28 13:43:51] info: [DocumentationRoutes] Registering schema: TestSchema
[2026-01-28 13:43:51] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:51] info: [EmailVerification] Created verification token
[2026-01-28 13:43:51] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:51] info: [authController.register] Verification email sent
[2026-01-28 13:43:51] info: [auth:4izfnj] Starting auth for POST /endpoints
[2026-01-28 13:43:51] info: [auth:4izfnj] Token from cookie: false
[2026-01-28 13:43:51] info: [auth:4izfnj] Token from header: true
[2026-01-28 13:43:51] info: [auth:4izfnj] Authenticated user 2d2e7f2d-5a91-44b8-9f63-6a0edfc903a3
[2026-01-28 13:43:51] info: [DocumentationRoutes] Registering endpoint: POST /api/test/create
[2026-01-28 13:43:51] info: [auth:qnaeg] Starting auth for POST /schemas
[2026-01-28 13:43:51] info: [auth:qnaeg] Token from cookie: false
[2026-01-28 13:43:51] info: [auth:qnaeg] Token from header: true
[2026-01-28 13:43:51] info: [auth:qnaeg] Authenticated user 2d2e7f2d-5a91-44b8-9f63-6a0edfc903a3
[2026-01-28 13:43:51] info: [DocumentationRoutes] Registering schema: CreateTestSchema
[2026-01-28 13:43:51] info: [auth:6si7i] Starting auth for POST /generate
[2026-01-28 13:43:51] info: [auth:6si7i] Token from cookie: false
[2026-01-28 13:43:51] info: [auth:6si7i] Token from header: true
[2026-01-28 13:43:51] info: [auth:6si7i] Authenticated user 2d2e7f2d-5a91-44b8-9f63-6a0edfc903a3
[2026-01-28 13:43:51] info: [DocumentationRoutes] Generating API documentation
[2026-01-28 13:43:51] info: [ApiDocService] OpenAPI specification saved successfully
[2026-01-28 13:43:51] info: [ApiDocService] Documentation generated for 2 endpoints
[2026-01-28 13:43:52] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:52] info: [EmailVerification] Created verification token
[2026-01-28 13:43:52] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:52] info: [authController.register] Verification email sent
[2026-01-28 13:43:52] info: [auth:g929yh] Starting auth for GET /metrics
[2026-01-28 13:43:52] info: [auth:g929yh] Token from cookie: false
[2026-01-28 13:43:52] info: [auth:g929yh] Token from header: true
[2026-01-28 13:43:52] info: [auth:g929yh] Authenticated user 449ea70c-0992-4efa-a599-5e96137735c2
[2026-01-28 13:43:52] info: [DocumentationRoutes] Getting documentation metrics
[2026-01-28 13:43:52] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:52] info: [EmailVerification] Created verification token
[2026-01-28 13:43:52] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:52] info: [authController.register] Verification email sent
[2026-01-28 13:43:52] info: [auth:s12uqd] Starting auth for GET /health
[2026-01-28 13:43:52] info: [auth:s12uqd] Token from cookie: false
[2026-01-28 13:43:52] info: [auth:s12uqd] Token from header: true
[2026-01-28 13:43:52] info: [auth:s12uqd] Authenticated user 13f40560-5c20-4d7b-8cbc-737fe83f7bc5
[2026-01-28 13:43:52] info: [DocumentationRoutes] Getting documentation health status
[2026-01-28 13:43:52] info: [ApiDocService] OpenAPI specification validation passed
[2026-01-28 13:43:52] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:52] info: [EmailVerification] Created verification token
[2026-01-28 13:43:52] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:52] info: [authController.register] Verification email sent
[2026-01-28 13:43:52] info: [auth:ztqzn] Starting auth for GET /coverage
[2026-01-28 13:43:52] info: [auth:ztqzn] Token from cookie: false
[2026-01-28 13:43:52] info: [auth:ztqzn] Token from header: true
[2026-01-28 13:43:52] info: [auth:ztqzn] Authenticated user 0cb59b34-e7dc-447f-8922-2a7b96b67d87
[2026-01-28 13:43:52] info: [DocumentationRoutes] Getting documentation coverage analysis
[2026-01-28 13:43:53] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:53] info: [EmailVerification] Created verification token
[2026-01-28 13:43:53] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:53] info: [authController.register] Verification email sent
[2026-01-28 13:43:53] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:53] info: [EmailVerification] Created verification token
[2026-01-28 13:43:53] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:53] info: [authController.register] Verification email sent
[2026-01-28 13:43:53] info: [auth:02n9t9] Starting auth for GET /api/test/documented
[2026-01-28 13:43:53] info: [auth:02n9t9] Token from cookie: false
[2026-01-28 13:43:53] info: [auth:02n9t9] Token from header: true
[2026-01-28 13:43:53] info: [auth:02n9t9] Authenticated user 98a32e66-4ce1-43d5-9d02-9aa9f6c4a5f6
[2026-01-28 13:43:53] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:53] info: [EmailVerification] Created verification token
[2026-01-28 13:43:53] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:53] info: [authController.register] Verification email sent
[2026-01-28 13:43:53] info: [auth:tsj7u] Starting auth for POST /endpoints
[2026-01-28 13:43:53] info: [auth:tsj7u] Token from cookie: false
[2026-01-28 13:43:53] warn: [auth:tsj7u] Access token is required for POST /endpoints from ::ffff:127.0.0.1
[2026-01-28 13:43:54] info: [TokenRotation] Created new token pair
[2026-01-28 13:43:54] info: [EmailVerification] Created verification token
[2026-01-28 13:43:54] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:43:54] info: [authController.register] Verification email sent
[2026-01-28 13:43:54] info: [auth:bmtjd] Starting auth for POST /endpoints
[2026-01-28 13:43:54] info: [auth:bmtjd] Token from cookie: false
[2026-01-28 13:43:54] info: [auth:bmtjd] Token from header: true
[2026-01-28 13:43:54] info: [auth:bmtjd] Authenticated user c9e2a4df-ec6a-4e57-980c-17d102791f8b
PASS tests/integration/documentation-system-integration.test.mjs (5.008 s)
  📚 Documentation System Integration Tests
    📋 Swagger/OpenAPI Specification Validation
      √ should load and validate OpenAPI specification (412 ms)
      √ should serve YAML specification format (319 ms)
      √ should provide interactive Swagger UI (312 ms)
    🔍 API Documentation Service Integration
      √ should register and validate endpoint documentation (321 ms)
      √ should register and validate schema documentation (316 ms)
      √ should generate documentation with metrics (367 ms)
    📊 Documentation Coverage and Health
      √ should provide documentation metrics and coverage (322 ms)
      √ should provide documentation health status (322 ms)
      √ should analyze documentation coverage by system (318 ms)
    🔗 Live API Integration Validation
      √ should validate API root endpoint documentation (310 ms)
      √ should validate documented endpoint response format (316 ms)
    🛡️ Documentation Security and Access
      √ should require authentication for documentation management (317 ms)
      √ should validate documentation input data (319 ms)

[2026-01-28 13:43:54] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:43:54] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:43:54] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:43:54] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:43:55] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:55] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:55] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:55] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:55] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:55] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:55] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:55] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:55] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:55] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:43:55] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 13:43:55] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:55] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:43:55] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:43:55] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:43:55] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:43:55] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:43:55] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 13:43:55] info: [GET] /api/groom-marketplace
[2026-01-28 13:43:55] warn: [MemoryMonitoring] Memory threshold exceeded: 1412MB
[2026-01-28 13:43:55] info: [auth:wcpqh] Starting auth for GET /groom-marketplace
[2026-01-28 13:43:55] info: [auth:wcpqh] Token from cookie: false
[2026-01-28 13:43:55] warn: [auth:wcpqh] Access token is required for GET /groom-marketplace from ::ffff:127.0.0.1
[2026-01-28 13:43:55] info: [GET] /api/groom-marketplace - 401
[2026-01-28 13:43:55] info: [POST] /api/groom-marketplace/refresh
[2026-01-28 13:43:55] warn: [MemoryMonitoring] Memory threshold exceeded: 1414MB
[2026-01-28 13:43:55] info: [auth:6y3s2c] Starting auth for POST /groom-marketplace/refresh
[2026-01-28 13:43:55] info: [auth:6y3s2c] Token from cookie: false
[2026-01-28 13:43:55] warn: [auth:6y3s2c] Access token is required for POST /groom-marketplace/refresh from ::ffff:127.0.0.1
[2026-01-28 13:43:55] info: [POST] /api/groom-marketplace/refresh - 401
[2026-01-28 13:43:55] info: [POST] /api/groom-marketplace/hire
[2026-01-28 13:43:55] warn: [MemoryMonitoring] Memory threshold exceeded: 1413MB
[2026-01-28 13:43:55] info: [auth:ib13jq] Starting auth for POST /groom-marketplace/hire
[2026-01-28 13:43:55] info: [auth:ib13jq] Token from cookie: false
[2026-01-28 13:43:55] warn: [auth:ib13jq] Access token is required for POST /groom-marketplace/hire from ::ffff:127.0.0.1
[2026-01-28 13:43:55] info: [POST] /api/groom-marketplace/hire - 401
[2026-01-28 13:43:55] info: [GET] /api/groom-marketplace/stats
[2026-01-28 13:43:55] warn: [MemoryMonitoring] Memory threshold exceeded: 1412MB
[2026-01-28 13:43:55] info: [auth:cfrore] Starting auth for GET /groom-marketplace/stats
[2026-01-28 13:43:55] info: [auth:cfrore] Token from cookie: false
[2026-01-28 13:43:55] warn: [auth:cfrore] Access token is required for GET /groom-marketplace/stats from ::ffff:127.0.0.1
[2026-01-28 13:43:55] info: [GET] /api/groom-marketplace/stats - 401
[2026-01-28 13:43:55] info: [GET] /api/groom-marketplace
[2026-01-28 13:43:55] warn: [MemoryMonitoring] Memory threshold exceeded: 1411MB
[2026-01-28 13:43:55] info: [auth:vevvz] Starting auth for GET /groom-marketplace
[2026-01-28 13:43:55] info: [auth:vevvz] Token from cookie: false
[2026-01-28 13:43:55] info: [auth:vevvz] Token from header: true
[2026-01-28 13:43:55] info: [auth:vevvz] Authenticated user f884f77a-4139-45d3-a2e1-b19e3cec4bf6
[2026-01-28 13:43:55] info: [auth:1kq5ia] Starting auth for GET /
[2026-01-28 13:43:55] info: [auth:1kq5ia] Token from cookie: false
[2026-01-28 13:43:55] info: [auth:1kq5ia] Token from header: true
[2026-01-28 13:43:55] info: [auth:1kq5ia] Authenticated user f884f77a-4139-45d3-a2e1-b19e3cec4bf6
[2026-01-28 13:43:55] info: [groomMarketplace] Getting marketplace for user f884f77a-4139-45d3-a2e1-b19e3cec4bf6
[2026-01-28 13:43:55] info: [groomMarketplace] Generated new marketplace for user f884f77a-4139-45d3-a2e1-b19e3cec4bf6 with 12 grooms
[2026-01-28 13:43:55] info: [GET] /api/groom-marketplace - 200
[2026-01-28 13:43:55] info: [GET] /api/groom-marketplace
[2026-01-28 13:43:55] warn: [MemoryMonitoring] Memory threshold exceeded: 1409MB
[2026-01-28 13:43:55] info: [auth:lt7sqn] Starting auth for GET /groom-marketplace
[2026-01-28 13:43:55] info: [auth:lt7sqn] Token from cookie: false
[2026-01-28 13:43:55] info: [auth:lt7sqn] Token from header: true
[2026-01-28 13:43:55] info: [auth:lt7sqn] Authenticated user f884f77a-4139-45d3-a2e1-b19e3cec4bf6
[2026-01-28 13:43:55] info: [auth:416ozt] Starting auth for GET /
[2026-01-28 13:43:55] info: [auth:416ozt] Token from cookie: false
[2026-01-28 13:43:55] info: [auth:416ozt] Token from header: true
[2026-01-28 13:43:55] info: [auth:416ozt] Authenticated user f884f77a-4139-45d3-a2e1-b19e3cec4bf6
[2026-01-28 13:43:55] info: [groomMarketplace] Getting marketplace for user f884f77a-4139-45d3-a2e1-b19e3cec4bf6
[2026-01-28 13:43:55] info: [GET] /api/groom-marketplace - 200
[2026-01-28 13:43:55] info: [GET] /api/groom-marketplace
[2026-01-28 13:43:55] warn: [MemoryMonitoring] Memory threshold exceeded: 1419MB
[2026-01-28 13:43:55] info: [auth:vdwzt] Starting auth for GET /groom-marketplace
[2026-01-28 13:43:55] info: [auth:vdwzt] Token from cookie: false
[2026-01-28 13:43:55] info: [auth:vdwzt] Token from header: true
[2026-01-28 13:43:55] info: [auth:vdwzt] Authenticated user f884f77a-4139-45d3-a2e1-b19e3cec4bf6
[2026-01-28 13:43:55] info: [auth:d3h1cw] Starting auth for GET /
[2026-01-28 13:43:55] info: [auth:d3h1cw] Token from cookie: false
[2026-01-28 13:43:55] info: [auth:d3h1cw] Token from header: true
[2026-01-28 13:43:55] info: [auth:d3h1cw] Authenticated user f884f77a-4139-45d3-a2e1-b19e3cec4bf6
[2026-01-28 13:43:55] info: [groomMarketplace] Getting marketplace for user f884f77a-4139-45d3-a2e1-b19e3cec4bf6
[2026-01-28 13:43:55] info: [GET] /api/groom-marketplace - 200
[2026-01-28 13:43:55] info: [GET] /api/groom-marketplace
[2026-01-28 13:43:55] warn: [MemoryMonitoring] Memory threshold exceeded: 1415MB
[2026-01-28 13:43:55] info: [auth:yqd9lj] Starting auth for GET /groom-marketplace
[2026-01-28 13:43:55] info: [auth:yqd9lj] Token from cookie: false
[2026-01-28 13:43:55] info: [auth:yqd9lj] Token from header: true
[2026-01-28 13:43:55] info: [auth:yqd9lj] Authenticated user f884f77a-4139-45d3-a2e1-b19e3cec4bf6
[2026-01-28 13:43:55] info: [auth:uxrug] Starting auth for GET /
[2026-01-28 13:43:55] info: [auth:uxrug] Token from cookie: false
[2026-01-28 13:43:55] info: [auth:uxrug] Token from header: true
[2026-01-28 13:43:55] info: [auth:uxrug] Authenticated user f884f77a-4139-45d3-a2e1-b19e3cec4bf6
[2026-01-28 13:43:55] info: [groomMarketplace] Getting marketplace for user f884f77a-4139-45d3-a2e1-b19e3cec4bf6
[2026-01-28 13:43:55] info: [GET] /api/groom-marketplace - 200
[2026-01-28 13:43:56] info: [POST] /api/groom-marketplace/refresh
[2026-01-28 13:43:56] warn: [MemoryMonitoring] Memory threshold exceeded: 1412MB
[2026-01-28 13:43:56] info: [auth:u399zq] Starting auth for POST /groom-marketplace/refresh
[2026-01-28 13:43:56] info: [auth:u399zq] Token from cookie: false
[2026-01-28 13:43:56] info: [auth:u399zq] Token from header: true
[2026-01-28 13:43:56] info: [auth:u399zq] Authenticated user f884f77a-4139-45d3-a2e1-b19e3cec4bf6
[2026-01-28 13:43:56] info: [auth:kl94z] Starting auth for POST /refresh
[2026-01-28 13:43:56] info: [auth:kl94z] Token from cookie: false
[2026-01-28 13:43:56] info: [auth:kl94z] Token from header: true
[2026-01-28 13:43:56] info: [auth:kl94z] Authenticated user f884f77a-4139-45d3-a2e1-b19e3cec4bf6
[2026-01-28 13:43:56] info: [groomMarketplace] Refreshing marketplace for user f884f77a-4139-45d3-a2e1-b19e3cec4bf6, force: false
[2026-01-28 13:43:56] info: [groomMarketplace] Refreshed marketplace for user f884f77a-4139-45d3-a2e1-b19e3cec4bf6 with 12 new grooms
[2026-01-28 13:43:56] info: [POST] /api/groom-marketplace/refresh - 200
[2026-01-28 13:43:56] info: [POST] /api/groom-marketplace/refresh
[2026-01-28 13:43:56] warn: [MemoryMonitoring] Memory threshold exceeded: 1413MB
[2026-01-28 13:43:56] info: [auth:bvahj] Starting auth for POST /groom-marketplace/refresh
[2026-01-28 13:43:56] info: [auth:bvahj] Token from cookie: false
[2026-01-28 13:43:56] info: [auth:bvahj] Token from header: true
[2026-01-28 13:43:56] info: [auth:bvahj] Authenticated user f884f77a-4139-45d3-a2e1-b19e3cec4bf6
[2026-01-28 13:43:56] info: [POST] /api/groom-marketplace/refresh - 403
[2026-01-28 13:43:56] info: [POST] /api/groom-marketplace/refresh
[2026-01-28 13:43:56] warn: [MemoryMonitoring] Memory threshold exceeded: 1414MB
[2026-01-28 13:43:56] info: [auth:qby699] Starting auth for POST /groom-marketplace/refresh
[2026-01-28 13:43:56] info: [auth:qby699] Token from cookie: false
[2026-01-28 13:43:56] info: [auth:qby699] Token from header: true
[2026-01-28 13:43:56] info: [auth:qby699] Authenticated user f884f77a-4139-45d3-a2e1-b19e3cec4bf6
[2026-01-28 13:43:56] info: [auth:m2pe6] Starting auth for POST /refresh
[2026-01-28 13:43:56] info: [auth:m2pe6] Token from cookie: false
[2026-01-28 13:43:56] info: [auth:m2pe6] Token from header: true
[2026-01-28 13:43:56] info: [auth:m2pe6] Authenticated user f884f77a-4139-45d3-a2e1-b19e3cec4bf6
[2026-01-28 13:43:56] info: [groomMarketplace] Refreshing marketplace for user f884f77a-4139-45d3-a2e1-b19e3cec4bf6, force: false
[2026-01-28 13:43:56] info: [POST] /api/groom-marketplace/refresh - 400
[2026-01-28 13:43:56] info: [POST] /api/groom-marketplace/refresh
[2026-01-28 13:43:56] warn: [MemoryMonitoring] Memory threshold exceeded: 1411MB
[2026-01-28 13:43:56] info: [auth:1pqmm] Starting auth for POST /groom-marketplace/refresh
[2026-01-28 13:43:56] info: [auth:1pqmm] Token from cookie: false
[2026-01-28 13:43:56] info: [auth:1pqmm] Token from header: true
[2026-01-28 13:43:56] info: [auth:1pqmm] Authenticated user f884f77a-4139-45d3-a2e1-b19e3cec4bf6
[2026-01-28 13:43:56] info: [auth:wpw2t9] Starting auth for POST /refresh
[2026-01-28 13:43:56] info: [auth:wpw2t9] Token from cookie: false
[2026-01-28 13:43:56] info: [auth:wpw2t9] Token from header: true
[2026-01-28 13:43:56] info: [auth:wpw2t9] Authenticated user f884f77a-4139-45d3-a2e1-b19e3cec4bf6
[2026-01-28 13:43:56] info: [groomMarketplace] Refreshing marketplace for user f884f77a-4139-45d3-a2e1-b19e3cec4bf6, force: false
[2026-01-28 13:43:56] info: [POST] /api/groom-marketplace/refresh - 400
[2026-01-28 13:43:56] info: [POST] /api/groom-marketplace/refresh
[2026-01-28 13:43:56] warn: [MemoryMonitoring] Memory threshold exceeded: 1421MB
[2026-01-28 13:43:56] info: [auth:theem8] Starting auth for POST /groom-marketplace/refresh
[2026-01-28 13:43:56] info: [auth:theem8] Token from cookie: false
[2026-01-28 13:43:56] info: [auth:theem8] Token from header: true
[2026-01-28 13:43:56] info: [auth:theem8] Authenticated user f884f77a-4139-45d3-a2e1-b19e3cec4bf6
[2026-01-28 13:43:56] info: [auth:noqngf] Starting auth for POST /refresh
[2026-01-28 13:43:56] info: [auth:noqngf] Token from cookie: false
[2026-01-28 13:43:56] info: [auth:noqngf] Token from header: true
[2026-01-28 13:43:56] info: [auth:noqngf] Authenticated user f884f77a-4139-45d3-a2e1-b19e3cec4bf6
[2026-01-28 13:43:56] info: [groomMarketplace] Refreshing marketplace for user f884f77a-4139-45d3-a2e1-b19e3cec4bf6, force: true
[2026-01-28 13:43:56] info: [groomMarketplace] Charged user f884f77a-4139-45d3-a2e1-b19e3cec4bf6 $100 for premium refresh
[2026-01-28 13:43:56] info: [groomMarketplace] Refreshed marketplace for user f884f77a-4139-45d3-a2e1-b19e3cec4bf6 with 12 new grooms
[2026-01-28 13:43:56] info: [POST] /api/groom-marketplace/refresh - 200
[2026-01-28 13:43:56] info: [GET] /api/groom-marketplace
[2026-01-28 13:43:56] warn: [MemoryMonitoring] Memory threshold exceeded: 1418MB
[2026-01-28 13:43:56] info: [auth:wocq4] Starting auth for GET /groom-marketplace
[2026-01-28 13:43:56] info: [auth:wocq4] Token from cookie: false
[2026-01-28 13:43:56] info: [auth:wocq4] Token from header: true
[2026-01-28 13:43:56] info: [auth:wocq4] Authenticated user f884f77a-4139-45d3-a2e1-b19e3cec4bf6
[2026-01-28 13:43:56] info: [auth:s04l08] Starting auth for GET /
[2026-01-28 13:43:56] info: [auth:s04l08] Token from cookie: false
[2026-01-28 13:43:56] info: [auth:s04l08] Token from header: true
[2026-01-28 13:43:56] info: [auth:s04l08] Authenticated user f884f77a-4139-45d3-a2e1-b19e3cec4bf6
[2026-01-28 13:43:56] info: [groomMarketplace] Getting marketplace for user f884f77a-4139-45d3-a2e1-b19e3cec4bf6
[2026-01-28 13:43:56] info: [GET] /api/groom-marketplace - 200
[2026-01-28 13:43:56] info: [POST] /api/groom-marketplace/hire
[2026-01-28 13:43:56] warn: [MemoryMonitoring] Memory threshold exceeded: 1414MB
[2026-01-28 13:43:56] info: [auth:7yrey4] Starting auth for POST /groom-marketplace/hire
[2026-01-28 13:43:56] info: [auth:7yrey4] Token from cookie: false
[2026-01-28 13:43:56] info: [auth:7yrey4] Token from header: true
[2026-01-28 13:43:56] info: [auth:7yrey4] Authenticated user f884f77a-4139-45d3-a2e1-b19e3cec4bf6
[2026-01-28 13:43:56] info: [auth:p1zy2] Starting auth for POST /hire
[2026-01-28 13:43:56] info: [auth:p1zy2] Token from cookie: false
[2026-01-28 13:43:56] info: [auth:p1zy2] Token from header: true
[2026-01-28 13:43:56] info: [auth:p1zy2] Authenticated user f884f77a-4139-45d3-a2e1-b19e3cec4bf6
[2026-01-28 13:43:56] info: [groomMarketplace] User f884f77a-4139-45d3-a2e1-b19e3cec4bf6 attempting to hire groom mkt_c0e415a6-b1dc-4311-ac2f-3984a9e261ac
[2026-01-28 13:43:56] info: [groomMarketplace] User f884f77a-4139-45d3-a2e1-b19e3cec4bf6 hired groom 73403 for $119
[2026-01-28 13:43:56] info: [POST] /api/groom-marketplace/hire - 201
[2026-01-28 13:43:56] info: [GET] /api/groom-marketplace
[2026-01-28 13:43:56] warn: [MemoryMonitoring] Memory threshold exceeded: 1423MB
[2026-01-28 13:43:56] info: [auth:3qlth3] Starting auth for GET /groom-marketplace
[2026-01-28 13:43:56] info: [auth:3qlth3] Token from cookie: false
[2026-01-28 13:43:56] info: [auth:3qlth3] Token from header: true
[2026-01-28 13:43:56] info: [auth:3qlth3] Authenticated user f884f77a-4139-45d3-a2e1-b19e3cec4bf6
[2026-01-28 13:43:56] info: [auth:deapw] Starting auth for GET /
[2026-01-28 13:43:56] info: [auth:deapw] Token from cookie: false
[2026-01-28 13:43:56] info: [auth:deapw] Token from header: true
[2026-01-28 13:43:56] info: [auth:deapw] Authenticated user f884f77a-4139-45d3-a2e1-b19e3cec4bf6
[2026-01-28 13:43:56] info: [groomMarketplace] Getting marketplace for user f884f77a-4139-45d3-a2e1-b19e3cec4bf6
[2026-01-28 13:43:56] info: [GET] /api/groom-marketplace - 200
[2026-01-28 13:43:56] info: [GET] /api/groom-marketplace
[2026-01-28 13:43:56] warn: [MemoryMonitoring] Memory threshold exceeded: 1418MB
[2026-01-28 13:43:56] info: [auth:suhxm] Starting auth for GET /groom-marketplace
[2026-01-28 13:43:56] info: [auth:suhxm] Token from cookie: false
[2026-01-28 13:43:56] info: [auth:suhxm] Token from header: true
[2026-01-28 13:43:56] info: [auth:suhxm] Authenticated user f884f77a-4139-45d3-a2e1-b19e3cec4bf6
[2026-01-28 13:43:56] info: [auth:xcuir9] Starting auth for GET /
[2026-01-28 13:43:56] info: [auth:xcuir9] Token from cookie: false
[2026-01-28 13:43:56] info: [auth:xcuir9] Token from header: true
[2026-01-28 13:43:56] info: [auth:xcuir9] Authenticated user f884f77a-4139-45d3-a2e1-b19e3cec4bf6
[2026-01-28 13:43:56] info: [groomMarketplace] Getting marketplace for user f884f77a-4139-45d3-a2e1-b19e3cec4bf6
[2026-01-28 13:43:56] info: [GET] /api/groom-marketplace - 200
[2026-01-28 13:43:56] info: [POST] /api/groom-marketplace/hire
[2026-01-28 13:43:56] warn: [MemoryMonitoring] Memory threshold exceeded: 1415MB
[2026-01-28 13:43:56] info: [auth:6uqctba] Starting auth for POST /groom-marketplace/hire
[2026-01-28 13:43:56] info: [auth:6uqctba] Token from cookie: false
[2026-01-28 13:43:56] info: [auth:6uqctba] Token from header: true
[2026-01-28 13:43:56] info: [auth:6uqctba] Authenticated user f884f77a-4139-45d3-a2e1-b19e3cec4bf6
[2026-01-28 13:43:56] info: [auth:vn4se] Starting auth for POST /hire
[2026-01-28 13:43:56] info: [auth:vn4se] Token from cookie: false
[2026-01-28 13:43:56] info: [auth:vn4se] Token from header: true
[2026-01-28 13:43:56] info: [auth:vn4se] Authenticated user f884f77a-4139-45d3-a2e1-b19e3cec4bf6
[2026-01-28 13:43:56] info: [groomMarketplace] User f884f77a-4139-45d3-a2e1-b19e3cec4bf6 attempting to hire groom mkt_f4e9906d-4e45-4ef8-a8c8-46fec69143c4
[2026-01-28 13:43:56] info: [groomMarketplace] User f884f77a-4139-45d3-a2e1-b19e3cec4bf6 hired groom 73404 for $196
[2026-01-28 13:43:56] info: [POST] /api/groom-marketplace/hire - 201
[2026-01-28 13:43:56] info: [GET] /api/groom-marketplace
[2026-01-28 13:43:56] warn: [MemoryMonitoring] Memory threshold exceeded: 1423MB
[2026-01-28 13:43:56] info: [auth:rezbxb] Starting auth for GET /groom-marketplace
[2026-01-28 13:43:56] info: [auth:rezbxb] Token from cookie: false
[2026-01-28 13:43:56] info: [auth:rezbxb] Token from header: true
[2026-01-28 13:43:56] info: [auth:rezbxb] Authenticated user f884f77a-4139-45d3-a2e1-b19e3cec4bf6
[2026-01-28 13:43:56] info: [auth:80p5hp] Starting auth for GET /
[2026-01-28 13:43:56] info: [auth:80p5hp] Token from cookie: false
[2026-01-28 13:43:56] info: [auth:80p5hp] Token from header: true
[2026-01-28 13:43:56] info: [auth:80p5hp] Authenticated user f884f77a-4139-45d3-a2e1-b19e3cec4bf6
[2026-01-28 13:43:56] info: [groomMarketplace] Getting marketplace for user f884f77a-4139-45d3-a2e1-b19e3cec4bf6
[2026-01-28 13:43:56] info: [GET] /api/groom-marketplace - 200
[2026-01-28 13:43:56] info: [GET] /api/groom-marketplace
[2026-01-28 13:43:56] warn: [MemoryMonitoring] Memory threshold exceeded: 1419MB
[2026-01-28 13:43:56] info: [auth:rswkt] Starting auth for GET /groom-marketplace
[2026-01-28 13:43:56] info: [auth:rswkt] Token from cookie: false
[2026-01-28 13:43:56] info: [auth:rswkt] Token from header: true
[2026-01-28 13:43:56] info: [auth:rswkt] Authenticated user f884f77a-4139-45d3-a2e1-b19e3cec4bf6
[2026-01-28 13:43:56] info: [auth:ylql08] Starting auth for GET /
[2026-01-28 13:43:56] info: [auth:ylql08] Token from cookie: false
[2026-01-28 13:43:56] info: [auth:ylql08] Token from header: true
[2026-01-28 13:43:56] info: [auth:ylql08] Authenticated user f884f77a-4139-45d3-a2e1-b19e3cec4bf6
[2026-01-28 13:43:56] info: [groomMarketplace] Getting marketplace for user f884f77a-4139-45d3-a2e1-b19e3cec4bf6
[2026-01-28 13:43:56] info: [GET] /api/groom-marketplace - 200
[2026-01-28 13:43:57] info: [GET] /api/groom-marketplace
[2026-01-28 13:43:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1416MB
[2026-01-28 13:43:57] info: [auth:19ijau] Starting auth for GET /groom-marketplace
[2026-01-28 13:43:57] info: [auth:19ijau] Token from cookie: false
[2026-01-28 13:43:57] info: [auth:19ijau] Token from header: true
[2026-01-28 13:43:57] info: [auth:19ijau] Authenticated user 13efe367-21e2-402c-a31d-1fcc75a99a49
[2026-01-28 13:43:57] info: [auth:y1qd3] Starting auth for GET /
[2026-01-28 13:43:57] info: [auth:y1qd3] Token from cookie: false
[2026-01-28 13:43:57] info: [auth:y1qd3] Token from header: true
[2026-01-28 13:43:57] info: [auth:y1qd3] Authenticated user 13efe367-21e2-402c-a31d-1fcc75a99a49
[2026-01-28 13:43:57] info: [groomMarketplace] Getting marketplace for user 13efe367-21e2-402c-a31d-1fcc75a99a49
[2026-01-28 13:43:57] info: [groomMarketplace] Generated new marketplace for user 13efe367-21e2-402c-a31d-1fcc75a99a49 with 12 grooms
[2026-01-28 13:43:57] info: [GET] /api/groom-marketplace - 200
[2026-01-28 13:43:57] info: [POST] /api/groom-marketplace/hire
[2026-01-28 13:43:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1416MB
[2026-01-28 13:43:57] info: [auth:dux3h] Starting auth for POST /groom-marketplace/hire
[2026-01-28 13:43:57] info: [auth:dux3h] Token from cookie: false
[2026-01-28 13:43:57] info: [auth:dux3h] Token from header: true
[2026-01-28 13:43:57] info: [auth:dux3h] Authenticated user 13efe367-21e2-402c-a31d-1fcc75a99a49
[2026-01-28 13:43:57] info: [auth:111gf] Starting auth for POST /hire
[2026-01-28 13:43:57] info: [auth:111gf] Token from cookie: false
[2026-01-28 13:43:57] info: [auth:111gf] Token from header: true
[2026-01-28 13:43:57] info: [auth:111gf] Authenticated user 13efe367-21e2-402c-a31d-1fcc75a99a49
[2026-01-28 13:43:57] info: [groomMarketplace] User 13efe367-21e2-402c-a31d-1fcc75a99a49 attempting to hire groom mkt_3dc3b5d6-9f39-4981-9643-1bc5de87bd44
[2026-01-28 13:43:57] info: [POST] /api/groom-marketplace/hire - 400
[2026-01-28 13:43:57] info: [GET] /api/groom-marketplace
[2026-01-28 13:43:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1424MB
[2026-01-28 13:43:57] info: [auth:fihac8] Starting auth for GET /groom-marketplace
[2026-01-28 13:43:57] info: [auth:fihac8] Token from cookie: false
[2026-01-28 13:43:57] info: [auth:fihac8] Token from header: true
[2026-01-28 13:43:57] info: [auth:fihac8] Authenticated user f884f77a-4139-45d3-a2e1-b19e3cec4bf6
[2026-01-28 13:43:57] info: [auth:2tp4n] Starting auth for GET /
[2026-01-28 13:43:57] info: [auth:2tp4n] Token from cookie: false
[2026-01-28 13:43:57] info: [auth:2tp4n] Token from header: true
[2026-01-28 13:43:57] info: [auth:2tp4n] Authenticated user f884f77a-4139-45d3-a2e1-b19e3cec4bf6
[2026-01-28 13:43:57] info: [groomMarketplace] Getting marketplace for user f884f77a-4139-45d3-a2e1-b19e3cec4bf6
[2026-01-28 13:43:57] info: [groomMarketplace] Generated new marketplace for user f884f77a-4139-45d3-a2e1-b19e3cec4bf6 with 12 grooms
[2026-01-28 13:43:57] info: [GET] /api/groom-marketplace - 200
[2026-01-28 13:43:57] info: [POST] /api/groom-marketplace/hire
[2026-01-28 13:43:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1420MB
[2026-01-28 13:43:57] info: [auth:0s48ko] Starting auth for POST /groom-marketplace/hire
[2026-01-28 13:43:57] info: [auth:0s48ko] Token from cookie: false
[2026-01-28 13:43:57] info: [auth:0s48ko] Token from header: true
[2026-01-28 13:43:57] info: [auth:0s48ko] Authenticated user f884f77a-4139-45d3-a2e1-b19e3cec4bf6
[2026-01-28 13:43:57] info: [auth:gv35wh] Starting auth for POST /hire
[2026-01-28 13:43:57] info: [auth:gv35wh] Token from cookie: false
[2026-01-28 13:43:57] info: [auth:gv35wh] Token from header: true
[2026-01-28 13:43:57] info: [auth:gv35wh] Authenticated user f884f77a-4139-45d3-a2e1-b19e3cec4bf6
[2026-01-28 13:43:57] info: [groomMarketplace] User f884f77a-4139-45d3-a2e1-b19e3cec4bf6 attempting to hire groom non-existent-id
[2026-01-28 13:43:57] info: [POST] /api/groom-marketplace/hire - 404
[2026-01-28 13:43:57] info: [GET] /api/groom-marketplace
[2026-01-28 13:43:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1414MB
[2026-01-28 13:43:57] info: [auth:n5qthp] Starting auth for GET /groom-marketplace
[2026-01-28 13:43:57] info: [auth:n5qthp] Token from cookie: false
[2026-01-28 13:43:57] info: [auth:n5qthp] Token from header: true
[2026-01-28 13:43:57] info: [auth:n5qthp] Authenticated user f884f77a-4139-45d3-a2e1-b19e3cec4bf6
[2026-01-28 13:43:57] info: [auth:k824o5] Starting auth for GET /
[2026-01-28 13:43:57] info: [auth:k824o5] Token from cookie: false
[2026-01-28 13:43:57] info: [auth:k824o5] Token from header: true
[2026-01-28 13:43:57] info: [auth:k824o5] Authenticated user f884f77a-4139-45d3-a2e1-b19e3cec4bf6
[2026-01-28 13:43:57] info: [groomMarketplace] Getting marketplace for user f884f77a-4139-45d3-a2e1-b19e3cec4bf6
[2026-01-28 13:43:57] info: [GET] /api/groom-marketplace - 200
[2026-01-28 13:43:57] info: [POST] /api/groom-marketplace/hire
[2026-01-28 13:43:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1425MB
[2026-01-28 13:43:57] info: [auth:04mz1w] Starting auth for POST /groom-marketplace/hire
[2026-01-28 13:43:57] info: [auth:04mz1w] Token from cookie: false
[2026-01-28 13:43:57] info: [auth:04mz1w] Token from header: true
[2026-01-28 13:43:57] info: [auth:04mz1w] Authenticated user f884f77a-4139-45d3-a2e1-b19e3cec4bf6
[2026-01-28 13:43:57] info: [auth:iwgjtf] Starting auth for POST /hire
[2026-01-28 13:43:57] info: [auth:iwgjtf] Token from cookie: false
[2026-01-28 13:43:57] info: [auth:iwgjtf] Token from header: true
[2026-01-28 13:43:57] info: [auth:iwgjtf] Authenticated user f884f77a-4139-45d3-a2e1-b19e3cec4bf6
[2026-01-28 13:43:57] info: [POST] /api/groom-marketplace/hire - 400
[2026-01-28 13:43:57] info: [GET] /api/groom-marketplace
[2026-01-28 13:43:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1418MB
[2026-01-28 13:43:57] info: [auth:epr25k] Starting auth for GET /groom-marketplace
[2026-01-28 13:43:57] info: [auth:epr25k] Token from cookie: false
[2026-01-28 13:43:57] info: [auth:epr25k] Token from header: true
[2026-01-28 13:43:57] info: [auth:epr25k] Authenticated user f884f77a-4139-45d3-a2e1-b19e3cec4bf6
[2026-01-28 13:43:57] info: [auth:bk1dil] Starting auth for GET /
[2026-01-28 13:43:57] info: [auth:bk1dil] Token from cookie: false
[2026-01-28 13:43:57] info: [auth:bk1dil] Token from header: true
[2026-01-28 13:43:57] info: [auth:bk1dil] Authenticated user f884f77a-4139-45d3-a2e1-b19e3cec4bf6
[2026-01-28 13:43:57] info: [groomMarketplace] Getting marketplace for user f884f77a-4139-45d3-a2e1-b19e3cec4bf6
[2026-01-28 13:43:57] info: [GET] /api/groom-marketplace - 200
[2026-01-28 13:43:57] info: [GET] /api/groom-marketplace/stats
[2026-01-28 13:43:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1427MB
[2026-01-28 13:43:57] info: [auth:scs24r] Starting auth for GET /groom-marketplace/stats
[2026-01-28 13:43:57] info: [auth:scs24r] Token from cookie: false
[2026-01-28 13:43:57] info: [auth:scs24r] Token from header: true
[2026-01-28 13:43:57] info: [auth:scs24r] Authenticated user f884f77a-4139-45d3-a2e1-b19e3cec4bf6
[2026-01-28 13:43:57] info: [auth:mfnuh] Starting auth for GET /stats
[2026-01-28 13:43:57] info: [auth:mfnuh] Token from cookie: false
[2026-01-28 13:43:57] info: [auth:mfnuh] Token from header: true
[2026-01-28 13:43:57] info: [auth:mfnuh] Authenticated user f884f77a-4139-45d3-a2e1-b19e3cec4bf6
[2026-01-28 13:43:57] info: [GET] /api/groom-marketplace/stats - 200
[2026-01-28 13:43:57] info: [GET] /api/groom-marketplace/stats
[2026-01-28 13:43:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1421MB
[2026-01-28 13:43:57] info: [auth:3r3mbh] Starting auth for GET /groom-marketplace/stats
[2026-01-28 13:43:57] info: [auth:3r3mbh] Token from cookie: false
[2026-01-28 13:43:57] info: [auth:3r3mbh] Token from header: true
[2026-01-28 13:43:57] info: [auth:3r3mbh] Authenticated user 8fe91de3-03f2-439a-861f-86a77b0ee87d
[2026-01-28 13:43:57] info: [auth:2xjmh] Starting auth for GET /stats
[2026-01-28 13:43:57] info: [auth:2xjmh] Token from cookie: false
[2026-01-28 13:43:57] info: [auth:2xjmh] Token from header: true
[2026-01-28 13:43:57] info: [auth:2xjmh] Authenticated user 8fe91de3-03f2-439a-861f-86a77b0ee87d
[2026-01-28 13:43:57] info: [groomMarketplace.getStats] Returning empty stats: {"totalGrooms":0,"lastRefresh":"never","refreshCount":0,"qualityDistribution":{},"specialtyDistribution":{}}
[2026-01-28 13:43:57] info: [GET] /api/groom-marketplace/stats - 200
PASS tests/integration/groomMarketplaceAPI.test.mjs
  🏪 INTEGRATION: Groom Marketplace API
    Authentication
      √ should require authentication for all marketplace endpoints (102 ms)
    GET /api/groom-marketplace
      √ should get marketplace with available grooms (45 ms)
      √ should return same marketplace on subsequent calls (78 ms)
    POST /api/groom-marketplace/refresh
      √ should refresh marketplace when free refresh available (594 ms)
      √ should require payment for premium refresh when not enough time passed (61 ms)
      √ should allow premium refresh with force=true (79 ms)
    POST /api/groom-marketplace/hire
      √ should hire groom from marketplace successfully (85 ms)
      √ should remove hired groom from marketplace (156 ms)
      √ should reject hiring with insufficient funds (394 ms)
      √ should reject hiring non-existent groom (77 ms)
      √ should require marketplaceId (76 ms)
    GET /api/groom-marketplace/stats
      √ should return marketplace statistics (69 ms)
      √ should return empty stats for user with no marketplace (315 ms)

[2026-01-28 13:43:58] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:43:58] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:43:58] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:43:58] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:43:58] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:58] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:58] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:58] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:58] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:58] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:58] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:58] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:58] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:58] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:43:59] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 13:43:59] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:43:59] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:43:59] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:43:59] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:43:59] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:43:59] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:43:59] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 13:43:59] info: [POST] /api/horses/foals
[2026-01-28 13:43:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1474MB
[2026-01-28 13:43:59] info: [auth:99lwbe] Starting auth for POST /horses/foals
[2026-01-28 13:43:59] info: [auth:99lwbe] Token from cookie: false
[2026-01-28 13:43:59] info: [auth:99lwbe] Token from header: true
[2026-01-28 13:43:59] info: [auth:99lwbe] Authenticated user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:43:59] info: [auth:r1b976] Starting auth for POST /foals
[2026-01-28 13:43:59] info: [auth:r1b976] Token from cookie: false
[2026-01-28 13:43:59] info: [auth:r1b976] Token from header: true
[2026-01-28 13:43:59] info: [auth:r1b976] Authenticated user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:43:59] info: [horseController.createFoal] Creating foal: Trait Test Foal with sire 146796 and dam 146796
[2026-01-28 13:43:59] info: [horseModel.getHorseById] Successfully found horse: Cross System Test Horse (ID: 146796)
[2026-01-28 13:43:59] info: [horseModel.getHorseById] Successfully found horse: Cross System Test Horse (ID: 146796)
[2026-01-28 13:43:59] info: [horseController.gatherLineage] Gathering lineage for sire 146796 and dam 146796, 3 generations
[2026-01-28 13:43:59] info: [horseController.gatherLineage] Gathered 1 ancestors
[2026-01-28 13:43:59] info: [horseController.assessFeedQualityFromMare] Mare Cross System Test Horse feed quality: 75 (health: Good, bond: 50)
[2026-01-28 13:43:59] info: [horseController.createFoal] Mare stress: 50, Feed quality: 75, Lineage count: 1
[2026-01-28 13:43:59] info: [applyEpigeneticTraitsAtBirth] Starting trait assignment at birth
[2026-01-28 13:43:59] info: [applyEpigeneticTraitsAtBirth] Mare stress: 50, Feed quality: 75
[2026-01-28 13:43:59] info: [applyEpigeneticTraitsAtBirth] Final traits assigned: {"positive":[],"negative":[]}
[2026-01-28 13:43:59] info: [horseController.createFoal] Applied epigenetic traits: {"positive":[],"negative":[]}
[2026-01-28 13:43:59] info: [horseModel.createHorse] Applying at-birth traits for newborn with sire 146796 and dam 146796
[2026-01-28 13:43:59] info: [atBirthTraits.applyEpigeneticTraitsAtBirth] Applying at-birth traits for sire 146796 and dam 146796
[2026-01-28 13:43:59] info: [atBirthTraits.assessFeedQuality] Mare 146796 feed quality: 70
[2026-01-28 13:43:59] info: [atBirthTraits.applyEpigeneticTraitsAtBirth] Mare stress: 50, Feed quality: 70
[2026-01-28 13:43:59] info: [atBirthTraits.analyzeLineage] Analyzing lineage for sire 146796 and dam 146796
[2026-01-28 13:43:59] info: [atBirthTraits.analyzeLineage] Found 0 ancestors, 0 competitions
[2026-01-28 13:43:59] info: [atBirthTraits.detectInbreeding] Checking for inbreeding between sire 146796 and dam 146796
[2026-01-28 13:43:59] info: [atBirthTraits.detectInbreeding] Inbreeding not detected
[2026-01-28 13:43:59] info: [atBirthTraits.applyEpigeneticTraitsAtBirth] Breeding conditions: {"mareStress":50,"feedQuality":70,"disciplineSpecialization":false,"inbreedingDetected":false,"noInbreeding":true}
[2026-01-28 13:43:59] info: [atBirthTraits.applyEpigeneticTraitsAtBirth] Final traits: {"positive":[],"negative":[],"hidden":[]}
[2026-01-28 13:43:59] info: [horseModel.createHorse] Applied at-birth traits: {"positive":[],"negative":[],"hidden":[]}
[2026-01-28 13:43:59] info: [horseModel.createHorse] Breeding analysis - Lineage specialization: false, Inbreeding: false
[2026-01-28 13:43:59] info: [horseModel.createHorse] Successfully created horse: Trait Test Foal (ID: 146797)
[2026-01-28 13:43:59] info: [horseController.createFoal] Successfully created foal: Trait Test Foal (ID: 146797)
[2026-01-28 13:43:59] info: [POST] /api/horses/foals - 201
[2026-01-28 13:43:59] info: [POST] /api/foals/146797/enrichment
[2026-01-28 13:43:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1483MB
[2026-01-28 13:43:59] info: [auth:qem5o2] Starting auth for POST /foals/146797/enrichment
[2026-01-28 13:43:59] info: [auth:qem5o2] Token from cookie: false
[2026-01-28 13:43:59] info: [auth:qem5o2] Token from header: true
[2026-01-28 13:43:59] info: [auth:qem5o2] Authenticated user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:43:59] info: [ownership] Validated ownership: user 8ddfc00a-631e-44e1-9423-e27c3ca37757 owns foal 146797
[2026-01-28 13:43:59] info: [foalRoutes] POST /api/foals/146797/enrichment - Day 1, Activity: Feeding Assistance
[2026-01-28 13:43:59] info: [foalModel.completeEnrichmentActivity] Processing enrichment activity "Feeding Assistance" for foal 146797 on day 1
[2026-01-28 13:43:59] info: [foalModel.completeEnrichmentActivity] Activity completed successfully. Bond: 0 -> 6, Stress: 0 -> 3
[2026-01-28 13:43:59] info: [POST] /api/foals/146797/enrichment - 200
[2026-01-28 13:43:59] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 146797
[2026-01-28 13:43:59] info: [traitDiscovery.revealTraits] Found 0 hidden traits for horse 146797
[2026-01-28 13:43:59] info: [traitDiscovery.revealTraits] No hidden traits to reveal for horse 146797
[2026-01-28 13:43:59] info: [POST] /api/traits/discover/146797
[2026-01-28 13:43:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1473MB
[2026-01-28 13:43:59] info: [auth:jfd26c] Starting auth for POST /traits/discover/146797
[2026-01-28 13:43:59] info: [auth:jfd26c] Token from cookie: false
[2026-01-28 13:43:59] info: [auth:jfd26c] Token from header: true
[2026-01-28 13:43:59] info: [auth:jfd26c] Authenticated user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:43:59] info: [ownership] Validated ownership: user 8ddfc00a-631e-44e1-9423-e27c3ca37757 owns horse 146797
[2026-01-28 13:43:59] info: [traitController.discoverTraits] Triggering trait discovery for horse 146797
[2026-01-28 13:43:59] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 146797
[2026-01-28 13:43:59] info: [traitDiscovery.revealTraits] Found 0 hidden traits for horse 146797
[2026-01-28 13:43:59] info: [traitDiscovery.revealTraits] No hidden traits to reveal for horse 146797
[2026-01-28 13:43:59] info: [POST] /api/traits/discover/146797 - 200
[2026-01-28 13:43:59] info: [GET] /api/traits/discovery-status/146797
[2026-01-28 13:43:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1477MB
[2026-01-28 13:43:59] info: [auth:wrlmkg] Starting auth for GET /traits/discovery-status/146797
[2026-01-28 13:43:59] info: [auth:wrlmkg] Token from cookie: false
[2026-01-28 13:43:59] info: [auth:wrlmkg] Token from header: true
[2026-01-28 13:43:59] info: [auth:wrlmkg] Authenticated user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:43:59] info: [ownership] Validated ownership: user 8ddfc00a-631e-44e1-9423-e27c3ca37757 owns horse 146797
[2026-01-28 13:43:59] info: [traitController.getDiscoveryStatus] Getting discovery status for horse 146797
[2026-01-28 13:43:59] info: [GET] /api/traits/discovery-status/146797 - 200
[2026-01-28 13:43:59] info: [POST] /api/milestones/evaluate-milestone
[2026-01-28 13:43:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1479MB
[2026-01-28 13:43:59] info: [auth:tf1ijm] Starting auth for POST /milestones/evaluate-milestone
[2026-01-28 13:43:59] info: [auth:tf1ijm] Token from cookie: false
[2026-01-28 13:43:59] info: [auth:tf1ijm] Token from header: true
[2026-01-28 13:43:59] info: [auth:tf1ijm] Authenticated user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:43:59] info: [auth:tpx1pq] Starting auth for POST /evaluate-milestone
[2026-01-28 13:43:59] info: [auth:tpx1pq] Token from cookie: false
[2026-01-28 13:43:59] info: [auth:tpx1pq] Token from header: true
[2026-01-28 13:43:59] info: [auth:tpx1pq] Authenticated user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:43:59] info: [enhancedMilestoneController.evaluateMilestone] Evaluating milestone imprinting for horse 146797
[2026-01-28 13:43:59] info: [ownership] Found owned horse 146797 for user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:43:59] info: [enhancedMilestoneEvaluationSystem.evaluateEnhancedMilestone] Starting evaluation for horse 146797, milestone imprinting
[2026-01-28 13:43:59] info: [enhancedMilestoneEvaluationSystem] No personality effects applied - missing groom personality or horse temperament
[2026-01-28 13:43:59] info: [enhancedMilestoneEvaluationSystem.evaluateEnhancedMilestone] Completed evaluation for horse 146797: fearful (score: -5)
[2026-01-28 13:43:59] info: [POST] /api/milestones/evaluate-milestone - 200
[2026-01-28 13:43:59] info: [GET] /api/horses/146796/environmental-analysis
[2026-01-28 13:43:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1476MB
[2026-01-28 13:43:59] info: [auth:lwjqab] Starting auth for GET /horses/146796/environmental-analysis
[2026-01-28 13:43:59] info: [auth:lwjqab] Token from cookie: false
[2026-01-28 13:43:59] info: [auth:lwjqab] Token from header: true
[2026-01-28 13:43:59] info: [auth:lwjqab] Authenticated user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:43:59] info: [auth:ap907g] Starting auth for GET /horses/146796/environmental-analysis
[2026-01-28 13:43:59] info: [auth:ap907g] Token from cookie: false
[2026-01-28 13:43:59] info: [auth:ap907g] Token from header: true
[2026-01-28 13:43:59] info: [auth:ap907g] Authenticated user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:43:59] info: [ownership] Validated ownership: user 8ddfc00a-631e-44e1-9423-e27c3ca37757 owns horse 146796
[2026-01-28 13:43:59] info: Environmental analysis generated for horse 146796 by user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:43:59] info: [GET] /api/horses/146796/environmental-analysis - 200
[2026-01-28 13:43:59] info: [GET] /api/horses/146796/trait-matrix
[2026-01-28 13:43:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1481MB
[2026-01-28 13:43:59] info: [auth:7m14ds] Starting auth for GET /horses/146796/trait-matrix
[2026-01-28 13:43:59] info: [auth:7m14ds] Token from cookie: false
[2026-01-28 13:43:59] info: [auth:7m14ds] Token from header: true
[2026-01-28 13:43:59] info: [auth:7m14ds] Authenticated user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:43:59] info: [auth:adz5xmb] Starting auth for GET /horses/146796/trait-matrix
[2026-01-28 13:43:59] info: [auth:adz5xmb] Token from cookie: false
[2026-01-28 13:43:59] info: [auth:adz5xmb] Token from header: true
[2026-01-28 13:43:59] info: [auth:adz5xmb] Authenticated user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:43:59] info: [ownership] Validated ownership: user 8ddfc00a-631e-44e1-9423-e27c3ca37757 owns horse 146796
[2026-01-28 13:43:59] info: Trait interaction matrix generated for horse 146796 by user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:43:59] info: [GET] /api/horses/146796/trait-matrix - 200
[2026-01-28 13:43:59] info: [GET] /api/horses/146796
[2026-01-28 13:43:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1481MB
[2026-01-28 13:43:59] info: [auth:xardpw] Starting auth for GET /horses/146796
[2026-01-28 13:43:59] info: [auth:xardpw] Token from cookie: false
[2026-01-28 13:43:59] info: [auth:xardpw] Token from header: true
[2026-01-28 13:43:59] info: [auth:xardpw] Authenticated user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:43:59] info: [ownership] Validated ownership: user 8ddfc00a-631e-44e1-9423-e27c3ca37757 owns horse 146796
[2026-01-28 13:43:59] info: [GET] /api/horses/146796 - 200
[2026-01-28 13:43:59] info: [POST] /api/training/train
[2026-01-28 13:43:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1483MB
[2026-01-28 13:43:59] info: [auth:xo0gf6] Starting auth for POST /training/train
[2026-01-28 13:43:59] info: [auth:xo0gf6] Token from cookie: false
[2026-01-28 13:43:59] info: [auth:xo0gf6] Token from header: true
[2026-01-28 13:43:59] info: [auth:xo0gf6] Authenticated user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:43:59] info: [ownership] Found owned horse 146796 for user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:43:59] info: [trainingController.trainRouteHandler] Training request for horse 146796 in Racing
[2026-01-28 13:43:59] info: [trainingController.trainHorse] Attempting to train horse 146796 in Racing
[2026-01-28 13:43:59] info: [trainingController.canTrain] Checking training eligibility for horse 146796 in Racing
[2026-01-28 13:43:59] info: [trainingModel.getHorseAge] Getting age for horse 146796
[2026-01-28 13:43:59] info: [trainingModel.getHorseAge] Horse 146796 is 3 years old
[2026-01-28 13:43:59] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146796 across all disciplines
[2026-01-28 13:43:59] info: [trainingModel.getAnyRecentTraining] No training records found for horse 146796
[2026-01-28 13:43:59] info: [trainingController.canTrain] Horse 146796 is eligible to train in Racing
[2026-01-28 13:43:59] info: [horseModel.getHorseById] Successfully found horse: Cross System Test Horse (ID: 146796)
[2026-01-28 13:43:59] info: [trainingController.trainHorse] Horse 146796 has traits: 
[2026-01-28 13:43:59] info: [trainingModel.logTrainingSession] Logging training session for horse 146796 in Racing
[2026-01-28 13:43:59] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 8984
[2026-01-28 13:43:59] info: [horseModel.incrementDisciplineScore] Incrementing Racing score for horse 146796 by +5
[2026-01-28 13:43:59] info: [horseModel.updateDisciplineScore] Updating Racing score for horse 146796 by +5
[2026-01-28 13:43:59] info: [horseModel.updateDisciplineScore] Successfully updated Racing score for horse 146796: 0 -> 5
[2026-01-28 13:43:59] info: [horseModel.incrementDisciplineScore] Successfully incremented Racing score for horse 146796
[2026-01-28 13:43:59] info: [xpLogModel.logXpEvent] Logging XP event: User 8ddfc00a-631e-44e1-9423-e27c3ca37757, Amount: 5, Reason: Trained horse Cross System Test Horse in Racing
[2026-01-28 13:43:59] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 4433, User 8ddfc00a-631e-44e1-9423-e27c3ca37757, Amount: 5
[2026-01-28 13:43:59] info: [trainingController.trainHorse] Awarded 5 XP to user 8ddfc00a-631e-44e1-9423-e27c3ca37757 for training
[2026-01-28 13:43:59] info: [trainingController.trainHorse] Successfully trained horse 146796 in Racing (Log ID: 8984, Score +5)
[2026-01-28 13:43:59] info: [POST] /api/training/train - 200
[2026-01-28 13:43:59] info: [GET] /api/horses/146796
[2026-01-28 13:43:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1482MB
[2026-01-28 13:43:59] info: [auth:krp57] Starting auth for GET /horses/146796
[2026-01-28 13:43:59] info: [auth:krp57] Token from cookie: false
[2026-01-28 13:43:59] info: [auth:krp57] Token from header: true
[2026-01-28 13:43:59] info: [auth:krp57] Authenticated user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:43:59] info: [ownership] Validated ownership: user 8ddfc00a-631e-44e1-9423-e27c3ca37757 owns horse 146796
[2026-01-28 13:43:59] info: [GET] /api/horses/146796 - 200
[2026-01-28 13:43:59] info: [GET] /api/competition/eligibility/146796/Racing
[2026-01-28 13:43:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1483MB
[2026-01-28 13:43:59] info: [auth:rop5a8] Starting auth for GET /competition/eligibility/146796/Racing
[2026-01-28 13:43:59] info: [auth:rop5a8] Token from cookie: false
[2026-01-28 13:43:59] info: [auth:rop5a8] Token from header: true
[2026-01-28 13:43:59] info: [auth:rop5a8] Authenticated user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:43:59] info: [auth:usr8hr] Starting auth for GET /eligibility/146796/Racing
[2026-01-28 13:43:59] info: [auth:usr8hr] Token from cookie: false
[2026-01-28 13:43:59] info: [auth:usr8hr] Token from header: true
[2026-01-28 13:43:59] info: [auth:usr8hr] Authenticated user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:43:59] info: [ownership] Validated ownership: user 8ddfc00a-631e-44e1-9423-e27c3ca37757 owns horse 146796
[2026-01-28 13:43:59] info: [competitionRoutes.GET /eligibility] Checking eligibility for horse 146796 in Racing
[2026-01-28 13:43:59] info: [competitionRoutes.GET /eligibility] Horse 146796 eligibility checked for Racing
[2026-01-28 13:43:59] info: [GET] /api/competition/eligibility/146796/Racing - 200
[2026-01-28 13:43:59] info: [POST] /api/competition/enter
[2026-01-28 13:43:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1487MB
[2026-01-28 13:43:59] info: [auth:s3ai4t] Starting auth for POST /competition/enter
[2026-01-28 13:43:59] info: [auth:s3ai4t] Token from cookie: false
[2026-01-28 13:43:59] info: [auth:s3ai4t] Token from header: true
[2026-01-28 13:43:59] info: [auth:s3ai4t] Authenticated user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:43:59] info: [auth:6t649l] Starting auth for POST /enter
[2026-01-28 13:43:59] info: [auth:6t649l] Token from cookie: false
[2026-01-28 13:43:59] info: [auth:6t649l] Token from header: true
[2026-01-28 13:43:59] info: [auth:6t649l] Authenticated user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:43:59] info: [competitionRoutes.POST /enter] User 8ddfc00a-631e-44e1-9423-e27c3ca37757 entering horse 146796 in show 8265
[2026-01-28 13:43:59] info: [ownership] Found owned horse 146796 for user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:43:59] info: [competitionRoutes.POST /enter] Successfully entered horse 146796 in show 8265
[2026-01-28 13:43:59] info: [POST] /api/competition/enter - 201
[2026-01-28 13:43:59] info: [POST] /api/competition/execute
[2026-01-28 13:43:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1478MB
[2026-01-28 13:43:59] info: [auth:trvgu] Starting auth for POST /competition/execute
[2026-01-28 13:43:59] info: [auth:trvgu] Token from cookie: false
[2026-01-28 13:43:59] info: [auth:trvgu] Token from header: true
[2026-01-28 13:43:59] info: [auth:trvgu] Authenticated user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:43:59] info: [auth:b0pnpd] Starting auth for POST /execute
[2026-01-28 13:43:59] info: [auth:b0pnpd] Token from cookie: false
[2026-01-28 13:43:59] info: [auth:b0pnpd] Token from header: true
[2026-01-28 13:43:59] info: [auth:b0pnpd] Authenticated user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:43:59] info: [competitionRoutes.POST /execute] User 8ddfc00a-631e-44e1-9423-e27c3ca37757 executing competition for show 8265
[2026-01-28 13:43:59] info: [competitionRoutes.POST /execute] Executing competition with 1 entries
[2026-01-28 13:43:59] info: [enhancedCompetitionSimulation] Executing competition: Cross System Test Show 1769625839880 (Racing)
[2026-01-28 13:43:59] info: [calculateCompetitionScore] Horse Cross System Test Horse: Base score for Racing: 240
[2026-01-28 13:43:59] info: [calculateCompetitionScore] Horse Cross System Test Horse: Luck modifier: -8.0%, adjustment: -19.3
[2026-01-28 13:43:59] info: [calculateCompetitionScore] Horse Cross System Test Horse: Final score: 221 (base: 240, trait: +0, luck: -19.3)
[2026-01-28 13:43:59] info: [enhancedCompetitionSimulation] Horse Cross System Test Horse (ID: 146796) scored 221 in Racing
[2026-01-28 13:43:59] info: [resultModel.saveResult] Successfully updated placeholder result for horse 146796 in show 8265 with score 221
[2026-01-28 13:43:59] info: [horseXpModel.addXpToHorse] Added 30 XP to horse Cross System Test Horse (ID: 146796). New XP: 30, Stat points gained: 0, Available: 0
[2026-01-28 13:43:59] info: [enhancedCompetitionSimulation] Awarded 30 Horse XP to Cross System Test Horse for 1st place
[2026-01-28 13:43:59] info: [enhancedCompetitionSimulation] Competition completed. 1 entries processed.
[2026-01-28 13:43:59] info: [competitionRoutes.POST /execute] Competition executed successfully for show 8265
[2026-01-28 13:43:59] info: [POST] /api/competition/execute - 200
[2026-01-28 13:43:59] info: [GET] /api/horses/146796/xp
[2026-01-28 13:43:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1487MB
[2026-01-28 13:43:59] info: [auth:vtuo7] Starting auth for GET /horses/146796/xp
[2026-01-28 13:44:00] info: [auth:vtuo7] Token from cookie: false
[2026-01-28 13:44:00] info: [auth:vtuo7] Token from header: true
[2026-01-28 13:44:00] info: [auth:vtuo7] Authenticated user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:44:00] info: [ownership] Validated ownership: user 8ddfc00a-631e-44e1-9423-e27c3ca37757 owns horse 146796
[2026-01-28 13:44:00] info: [horseXpController.getHorseXpStatus] Retrieved XP status for horse Cross System Test Horse (ID: 146796)
[2026-01-28 13:44:00] info: [GET] /api/horses/146796/xp - 200
[2026-01-28 13:44:00] info: [GET] /api/leaderboards/competition?discipline=Racing&timeframe=all
[2026-01-28 13:44:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1476MB
[2026-01-28 13:44:00] info: [auth:xu698d] Starting auth for GET /leaderboards/competition
[2026-01-28 13:44:00] info: [auth:xu698d] Token from cookie: false
[2026-01-28 13:44:00] info: [auth:xu698d] Token from header: true
[2026-01-28 13:44:00] info: [auth:xu698d] Authenticated user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:44:00] info: [auth:3nwp19] Starting auth for GET /competition
[2026-01-28 13:44:00] info: [auth:3nwp19] Token from cookie: false
[2026-01-28 13:44:00] info: [auth:3nwp19] Token from header: true
[2026-01-28 13:44:00] info: [auth:3nwp19] Authenticated user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:44:00] info: [leaderboardRoutes.GET /competition] Getting competition leaderboard: discipline=Racing, period=all, metric=wins
[2026-01-28 13:44:00] info: [leaderboardRoutes.GET /competition] Retrieved 0 leaderboard entries
[2026-01-28 13:44:00] info: [GET] /api/leaderboards/competition?discipline=Racing&timeframe=all - 200
[2026-01-28 13:44:00] info: [GET] /api/grooms/user/8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:44:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1484MB
[2026-01-28 13:44:00] info: [auth:rh3sz3] Starting auth for GET /grooms/user/8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:44:00] info: [auth:rh3sz3] Token from cookie: false
[2026-01-28 13:44:00] info: [auth:rh3sz3] Token from header: true
[2026-01-28 13:44:00] info: [auth:rh3sz3] Authenticated user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:44:00] info: [auth:39rxe] Starting auth for GET /user/8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:44:00] info: [auth:39rxe] Token from cookie: false
[2026-01-28 13:44:00] info: [auth:39rxe] Token from header: true
[2026-01-28 13:44:00] info: [auth:39rxe] Authenticated user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:44:00] info: [groomController.getUserGrooms] Getting grooms for user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:44:00] info: [GET] /api/grooms/user/8ddfc00a-631e-44e1-9423-e27c3ca37757 - 200
[2026-01-28 13:44:00] info: [POST] /api/grooms/interact
[2026-01-28 13:44:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1479MB
[2026-01-28 13:44:00] info: [auth:1v2tr] Starting auth for POST /grooms/interact
[2026-01-28 13:44:00] info: [auth:1v2tr] Token from cookie: false
[2026-01-28 13:44:00] info: [auth:1v2tr] Token from header: true
[2026-01-28 13:44:00] info: [auth:1v2tr] Authenticated user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:44:00] info: [auth:fawa3] Starting auth for POST /interact
[2026-01-28 13:44:00] info: [auth:fawa3] Token from cookie: false
[2026-01-28 13:44:00] info: [auth:fawa3] Token from header: true
[2026-01-28 13:44:00] info: [auth:fawa3] Authenticated user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:44:00] info: [ownership] Found owned foal 146796 for user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:44:00] info: [ownership] Found owned groom 73405 for user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:44:00] info: [groomController.recordInteraction] Recording brushing interaction for foal 146796
[2026-01-28 13:44:00] warn: [groomPersonalityEffects.calculatePersonalityEffects] Unknown personality: methodical
[2026-01-28 13:44:00] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for methodical: none
[2026-01-28 13:44:00] info: [groomController.recordInteraction] Interaction recorded: 10 bonding, -1 stress
[2026-01-28 13:44:00] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 73405 for interaction_completed
[2026-01-28 13:44:00] info: [groomProgressionService.awardGroomXP] Groom 73405 gained 2 XP: 200 → 202 (Level 4 → 2)
[2026-01-28 13:44:00] info: [groomController.recordInteraction] Awarded 2 XP to groom 73405 for interaction
[2026-01-28 13:44:00] info: [POST] /api/grooms/interact - 200
[2026-01-28 13:44:00] info: [GET] /api/grooms/user/8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:44:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1478MB
[2026-01-28 13:44:00] info: [auth:zv0l6] Starting auth for GET /grooms/user/8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:44:00] info: [auth:zv0l6] Token from cookie: false
[2026-01-28 13:44:00] info: [auth:zv0l6] Token from header: true
[2026-01-28 13:44:00] info: [auth:zv0l6] Authenticated user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:44:00] info: [auth:taiw8] Starting auth for GET /user/8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:44:00] info: [auth:taiw8] Token from cookie: false
[2026-01-28 13:44:00] info: [auth:taiw8] Token from header: true
[2026-01-28 13:44:00] info: [auth:taiw8] Authenticated user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:44:00] info: [groomController.getUserGrooms] Getting grooms for user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:44:00] info: [GET] /api/grooms/user/8ddfc00a-631e-44e1-9423-e27c3ca37757 - 200
[2026-01-28 13:44:00] info: [GET] /api/grooms/73405/retirement/eligibility
[2026-01-28 13:44:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1486MB
[2026-01-28 13:44:00] info: [auth:nmx7vy] Starting auth for GET /grooms/73405/retirement/eligibility
[2026-01-28 13:44:00] info: [auth:nmx7vy] Token from cookie: false
[2026-01-28 13:44:00] info: [auth:nmx7vy] Token from header: true
[2026-01-28 13:44:00] info: [auth:nmx7vy] Authenticated user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:44:00] info: [ownership] Validated ownership: user 8ddfc00a-631e-44e1-9423-e27c3ca37757 owns groom 73405
[2026-01-28 13:44:00] info: [GET] /api/grooms/73405/retirement/eligibility - 200
[2026-01-28 13:44:00] info: [POST] /api/grooms/assign
[2026-01-28 13:44:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1488MB
[2026-01-28 13:44:00] info: [auth:80kxrq] Starting auth for POST /grooms/assign
[2026-01-28 13:44:00] info: [auth:80kxrq] Token from cookie: false
[2026-01-28 13:44:00] info: [auth:80kxrq] Token from header: true
[2026-01-28 13:44:00] info: [auth:80kxrq] Authenticated user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:44:00] info: [auth:fcxii] Starting auth for POST /assign
[2026-01-28 13:44:00] info: [auth:fcxii] Token from cookie: false
[2026-01-28 13:44:00] info: [auth:fcxii] Token from header: true
[2026-01-28 13:44:00] info: [auth:fcxii] Authenticated user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:44:00] info: [ownership] Found owned foal 146796 for user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:44:00] info: [ownership] Found owned groom 73405 for user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:44:00] info: [groomController.assignGroom] Assigning groom 73405 to foal 146796
[2026-01-28 13:44:00] info: [groomSystem.assignGroomToFoal] Assigning groom 73405 to foal 146796
[2026-01-28 13:44:00] info: [groomSystem.assignGroomToFoal] Successfully assigned Cross System Test Groom to foal Cross System Test Horse
[2026-01-28 13:44:00] info: [POST] /api/grooms/assign - 201
[2026-01-28 13:44:00] info: [GET] /api/grooms/assignments/146796
[2026-01-28 13:44:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1486MB
[2026-01-28 13:44:00] info: [auth:84n1d9] Starting auth for GET /grooms/assignments/146796
[2026-01-28 13:44:00] info: [auth:84n1d9] Token from cookie: false
[2026-01-28 13:44:00] info: [auth:84n1d9] Token from header: true
[2026-01-28 13:44:00] info: [auth:84n1d9] Authenticated user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:44:00] info: [auth:6c5o8] Starting auth for GET /assignments/146796
[2026-01-28 13:44:00] info: [auth:6c5o8] Token from cookie: false
[2026-01-28 13:44:00] info: [auth:6c5o8] Token from header: true
[2026-01-28 13:44:00] info: [auth:6c5o8] Authenticated user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:44:00] info: [ownership] Validated ownership: user 8ddfc00a-631e-44e1-9423-e27c3ca37757 owns foal 146796
[2026-01-28 13:44:00] info: [groomController.getFoalAssignments] Getting assignments for foal 146796
[2026-01-28 13:44:00] info: [GET] /api/grooms/assignments/146796 - 200
[2026-01-28 13:44:00] info: [GET] /api/memory/status
[2026-01-28 13:44:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1480MB
[2026-01-28 13:44:00] info: [auth:kk4pz] Starting auth for GET /memory/status
[2026-01-28 13:44:00] info: [auth:kk4pz] Token from cookie: false
[2026-01-28 13:44:00] info: [auth:kk4pz] Token from header: true
[2026-01-28 13:44:00] info: [auth:kk4pz] Authenticated user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:44:00] info: [auth:zxxo25] Starting auth for GET /status
[2026-01-28 13:44:00] info: [auth:zxxo25] Token from cookie: false
[2026-01-28 13:44:00] info: [auth:zxxo25] Token from header: true
[2026-01-28 13:44:00] info: [auth:zxxo25] Authenticated user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:44:00] info: [MemoryManagement] Getting memory status
[2026-01-28 13:44:00] info: [GET] /api/memory/status - 200
[2026-01-28 13:44:00] info: [GET] /api/horses
[2026-01-28 13:44:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1480MB
[2026-01-28 13:44:00] info: [auth:r7n47] Starting auth for GET /horses
[2026-01-28 13:44:00] info: [auth:r7n47] Token from cookie: false
[2026-01-28 13:44:00] info: [auth:r7n47] Token from header: true
[2026-01-28 13:44:00] info: [auth:r7n47] Authenticated user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:44:00] info: [GET] /api/horses
[2026-01-28 13:44:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1490MB
[2026-01-28 13:44:00] info: [auth:c3rzdm] Starting auth for GET /horses
[2026-01-28 13:44:00] info: [auth:c3rzdm] Token from cookie: false
[2026-01-28 13:44:00] info: [auth:c3rzdm] Token from header: true
[2026-01-28 13:44:00] info: [auth:c3rzdm] Authenticated user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:44:00] info: [GET] /api/horses
[2026-01-28 13:44:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1485MB
[2026-01-28 13:44:00] info: [auth:0z7dx] Starting auth for GET /horses
[2026-01-28 13:44:00] info: [auth:0z7dx] Token from cookie: false
[2026-01-28 13:44:00] info: [auth:0z7dx] Token from header: true
[2026-01-28 13:44:00] info: [auth:0z7dx] Authenticated user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:44:00] info: [GET] /api/horses
[2026-01-28 13:44:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1480MB
[2026-01-28 13:44:00] info: [auth:k9fref] Starting auth for GET /horses
[2026-01-28 13:44:00] info: [auth:k9fref] Token from cookie: false
[2026-01-28 13:44:00] info: [auth:k9fref] Token from header: true
[2026-01-28 13:44:00] info: [auth:k9fref] Authenticated user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:44:00] info: [GET] /api/horses
[2026-01-28 13:44:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1491MB
[2026-01-28 13:44:00] info: [auth:kkg657] Starting auth for GET /horses
[2026-01-28 13:44:00] info: [auth:kkg657] Token from cookie: false
[2026-01-28 13:44:00] info: [auth:kkg657] Token from header: true
[2026-01-28 13:44:00] info: [auth:kkg657] Authenticated user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:44:00] info: [GET] /api/horses
[2026-01-28 13:44:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1486MB
[2026-01-28 13:44:00] info: [auth:uy654e] Starting auth for GET /horses
[2026-01-28 13:44:00] info: [auth:uy654e] Token from cookie: false
[2026-01-28 13:44:00] info: [auth:uy654e] Token from header: true
[2026-01-28 13:44:00] info: [auth:uy654e] Authenticated user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:44:00] info: [GET] /api/horses
[2026-01-28 13:44:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1481MB
[2026-01-28 13:44:00] info: [auth:e2agop] Starting auth for GET /horses
[2026-01-28 13:44:00] info: [auth:e2agop] Token from cookie: false
[2026-01-28 13:44:00] info: [auth:e2agop] Token from header: true
[2026-01-28 13:44:00] info: [auth:e2agop] Authenticated user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:44:00] info: [GET] /api/horses
[2026-01-28 13:44:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1491MB
[2026-01-28 13:44:00] info: [auth:tl9tja] Starting auth for GET /horses
[2026-01-28 13:44:00] info: [auth:tl9tja] Token from cookie: false
[2026-01-28 13:44:00] info: [auth:tl9tja] Token from header: true
[2026-01-28 13:44:00] info: [auth:tl9tja] Authenticated user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:44:00] info: [GET] /api/horses
[2026-01-28 13:44:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1486MB
[2026-01-28 13:44:00] info: [auth:j48tre] Starting auth for GET /horses
[2026-01-28 13:44:00] info: [auth:j48tre] Token from cookie: false
[2026-01-28 13:44:00] info: [auth:j48tre] Token from header: true
[2026-01-28 13:44:00] info: [auth:j48tre] Authenticated user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:44:00] info: [GET] /api/horses
[2026-01-28 13:44:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1481MB
[2026-01-28 13:44:00] info: [auth:hvry1b] Starting auth for GET /horses
[2026-01-28 13:44:00] info: [auth:hvry1b] Token from cookie: false
[2026-01-28 13:44:00] info: [auth:hvry1b] Token from header: true
[2026-01-28 13:44:00] info: [auth:hvry1b] Authenticated user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:44:00] info: [GET] /api/horses - 200
[2026-01-28 13:44:00] info: [GET] /api/horses - 200
[2026-01-28 13:44:00] info: [GET] /api/horses - 200
[2026-01-28 13:44:00] info: [GET] /api/horses - 200
[2026-01-28 13:44:00] info: [GET] /api/horses - 200
[2026-01-28 13:44:00] info: [GET] /api/horses - 200
[2026-01-28 13:44:00] info: [GET] /api/horses - 200
[2026-01-28 13:44:00] info: [GET] /api/horses - 200
[2026-01-28 13:44:00] info: [GET] /api/horses - 200
[2026-01-28 13:44:00] info: [GET] /api/horses - 200
[2026-01-28 13:44:00] info: [GET] /api/memory/status
[2026-01-28 13:44:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1490MB
[2026-01-28 13:44:00] info: [auth:j5d5n] Starting auth for GET /memory/status
[2026-01-28 13:44:00] info: [auth:j5d5n] Token from cookie: false
[2026-01-28 13:44:00] info: [auth:j5d5n] Token from header: true
[2026-01-28 13:44:00] info: [auth:j5d5n] Authenticated user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:44:00] info: [auth:l7ud3h] Starting auth for GET /status
[2026-01-28 13:44:00] info: [auth:l7ud3h] Token from cookie: false
[2026-01-28 13:44:00] info: [auth:l7ud3h] Token from header: true
[2026-01-28 13:44:00] info: [auth:l7ud3h] Authenticated user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:44:00] info: [MemoryManagement] Getting memory status
[2026-01-28 13:44:00] info: [GET] /api/memory/status - 200
[2026-01-28 13:44:00] info: [POST] /api/memory/gc
[2026-01-28 13:44:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1481MB
[2026-01-28 13:44:00] info: [auth:ci3r5d] Starting auth for POST /memory/gc
[2026-01-28 13:44:00] info: [auth:ci3r5d] Token from cookie: false
[2026-01-28 13:44:00] info: [auth:ci3r5d] Token from header: true
[2026-01-28 13:44:00] info: [auth:ci3r5d] Authenticated user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:44:00] info: [auth:14he] Starting auth for POST /gc
[2026-01-28 13:44:00] info: [auth:14he] Token from cookie: false
[2026-01-28 13:44:00] info: [auth:14he] Token from header: true
[2026-01-28 13:44:00] info: [auth:14he] Authenticated user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:44:00] info: [MemoryManagement] Manual GC trigger requested (force: false)
[2026-01-28 13:44:00] info: [POST] /api/memory/gc - 400
[2026-01-28 13:44:00] info: [GET] /api/horses
[2026-01-28 13:44:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1485MB
[2026-01-28 13:44:00] info: [auth:bqycl] Starting auth for GET /horses
[2026-01-28 13:44:00] info: [auth:bqycl] Token from cookie: false
[2026-01-28 13:44:00] info: [auth:bqycl] Token from header: true
[2026-01-28 13:44:00] info: [auth:bqycl] Authenticated user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:44:00] info: [GET] /api/horses - 200
[2026-01-28 13:44:00] info: [GET] /api/horses?page=1&limit=5
[2026-01-28 13:44:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1486MB
[2026-01-28 13:44:00] info: [auth:pnnc0o] Starting auth for GET /horses
[2026-01-28 13:44:00] info: [auth:pnnc0o] Token from cookie: false
[2026-01-28 13:44:00] info: [auth:pnnc0o] Token from header: true
[2026-01-28 13:44:00] info: [auth:pnnc0o] Authenticated user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:44:00] info: [GET] /api/horses?page=1&limit=5 - 200
[2026-01-28 13:44:00] info: [GET] /api-docs/swagger.json
[2026-01-28 13:44:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1489MB
[2026-01-28 13:44:00] info: [GET] /api-docs/swagger.json - 200
[2026-01-28 13:44:00] info: [GET] /api/docs/health
[2026-01-28 13:44:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1487MB
[2026-01-28 13:44:00] info: [auth:pjgccl] Starting auth for GET /health
[2026-01-28 13:44:00] info: [auth:pjgccl] Token from cookie: false
[2026-01-28 13:44:00] info: [auth:pjgccl] Token from header: true
[2026-01-28 13:44:00] info: [auth:pjgccl] Authenticated user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:44:00] info: [DocumentationRoutes] Getting documentation health status
[2026-01-28 13:44:00] info: [ApiDocService] OpenAPI specification validation passed
[2026-01-28 13:44:00] info: [GET] /api/docs/health - 200
[2026-01-28 13:44:00] info: [GET] /api/user-docs/search?q=competition
[2026-01-28 13:44:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1493MB
[2026-01-28 13:44:00] info: [UserDocRoutes] Searching documentation for: "competition"
[2026-01-28 13:44:00] info: [UserDocService] Loaded 1 documentation files
[2026-01-28 13:44:00] info: [UserDocService] Built search index with 34 terms
[2026-01-28 13:44:00] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 13:44:00] info: [GET] /api/user-docs/search?q=competition - 200
[2026-01-28 13:44:00] info: [GET] /api/user-docs/feature-guide
[2026-01-28 13:44:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1487MB
[2026-01-28 13:44:00] info: [UserDocRoutes] Getting document: feature-guide
[2026-01-28 13:44:00] info: [GET] /api/user-docs/feature-guide - 200
[2026-01-28 13:44:00] info: [GET] /api/user-docs/analytics
[2026-01-28 13:44:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1483MB
[2026-01-28 13:44:00] info: [UserDocRoutes] Getting documentation analytics
[2026-01-28 13:44:00] info: [GET] /api/user-docs/analytics - 200
[2026-01-28 13:44:00] info: [GET] /health
[2026-01-28 13:44:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1496MB
[2026-01-28 13:44:00] info: [GET] /health - 200
[2026-01-28 13:44:00] info: [GET] /ping
[2026-01-28 13:44:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1492MB
[2026-01-28 13:44:00] info: [GET] /ping - 200
[2026-01-28 13:44:00] info: [GET] /api/memory/health
[2026-01-28 13:44:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1485MB
[2026-01-28 13:44:00] info: [auth:6xkkq] Starting auth for GET /memory/health
[2026-01-28 13:44:00] info: [auth:6xkkq] Token from cookie: false
[2026-01-28 13:44:00] info: [auth:6xkkq] Token from header: true
[2026-01-28 13:44:00] info: [auth:6xkkq] Authenticated user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:44:00] info: [auth:00xpp] Starting auth for GET /health
[2026-01-28 13:44:00] info: [auth:00xpp] Token from cookie: false
[2026-01-28 13:44:00] info: [auth:00xpp] Token from header: true
[2026-01-28 13:44:00] info: [auth:00xpp] Authenticated user 8ddfc00a-631e-44e1-9423-e27c3ca37757
[2026-01-28 13:44:00] info: [MemoryManagement] Getting system health assessment
[2026-01-28 13:44:01] info: [GET] /api/memory/health - 200
[2026-01-28 13:44:01] info: [GET] /api/user-docs/health
[2026-01-28 13:44:01] warn: [MemoryMonitoring] Memory threshold exceeded: 1489MB
[2026-01-28 13:44:01] info: [GET] /api/user-docs/health - 200
PASS __tests__/integration/crossSystemValidation.test.mjs
  Cross-System Validation Tests
    Epigenetic Trait System Integration
      √ Trait discovery integration with groom care patterns (280 ms)
      √ Environmental trigger system integration (331 ms)
    Competition System Integration
      √ Training system integration with competition performance (309 ms)
      √ Leaderboard integration with competition results (45 ms)
    Groom System Integration
      √ Groom career progression with horse development (226 ms)
      √ Groom assignment integration with horse care (105 ms)
    Performance System Integration
      √ Memory management integration with API operations (362 ms)
      √ API optimization integration with response compression (60 ms)
    Documentation System Integration
      √ API documentation integration with live endpoints (56 ms)
      √ User documentation integration with search functionality (55 ms)
    System Health and Monitoring
      √ Overall system health validation (88 ms)

[2026-01-28 13:44:01] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:44:01] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:44:01] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:44:01] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:44:02] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:02] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:02] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:02] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:02] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:02] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:02] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:02] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:02] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:02] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:44:02] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 13:44:02] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:02] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:44:02] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:44:02] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:44:02] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:44:02] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:44:02] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 13:44:02] info: [POST] /api/auth/register
[2026-01-28 13:44:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1542MB
[2026-01-28 13:44:02] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:02] info: [EmailVerification] Created verification token
[2026-01-28 13:44:02] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:44:02] info: [authController.register] Verification email sent
[2026-01-28 13:44:02] info: [POST] /api/auth/register - 201
[2026-01-28 13:44:02] info: [GET] /api/user-docs
[2026-01-28 13:44:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1546MB
[2026-01-28 13:44:02] info: [UserDocRoutes] Getting all documentation list
[2026-01-28 13:44:02] info: [UserDocService] Loaded 1 documentation files
[2026-01-28 13:44:02] info: [UserDocService] Built search index with 34 terms
[2026-01-28 13:44:02] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 13:44:02] info: [GET] /api/user-docs - 200
[2026-01-28 13:44:02] info: [GET] /api-docs/swagger.json
[2026-01-28 13:44:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1549MB
[2026-01-28 13:44:02] info: [GET] /api-docs/swagger.json - 200
[2026-01-28 13:44:02] info: [GET] /api/memory/status
[2026-01-28 13:44:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1545MB
[2026-01-28 13:44:02] info: [auth:q7w0r] Starting auth for GET /memory/status
[2026-01-28 13:44:02] info: [auth:q7w0r] Token from cookie: false
[2026-01-28 13:44:02] info: [auth:q7w0r] Token from header: true
[2026-01-28 13:44:02] info: [auth:q7w0r] Authenticated user 81b151fd-164a-4784-9456-be9761947a6b
[2026-01-28 13:44:02] info: [auth:tnyt3g] Starting auth for GET /status
[2026-01-28 13:44:02] info: [auth:tnyt3g] Token from cookie: false
[2026-01-28 13:44:02] info: [auth:tnyt3g] Token from header: true
[2026-01-28 13:44:02] info: [auth:tnyt3g] Authenticated user 81b151fd-164a-4784-9456-be9761947a6b
[2026-01-28 13:44:02] info: [MemoryManagement] Getting memory status
[2026-01-28 13:44:02] info: [GET] /api/memory/status - 200
[2026-01-28 13:44:02] info: [GET] /api/users/81b151fd-164a-4784-9456-be9761947a6b/progress
[2026-01-28 13:44:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1549MB
[2026-01-28 13:44:02] info: [auth:tmedrd] Starting auth for GET /users/81b151fd-164a-4784-9456-be9761947a6b/progress
[2026-01-28 13:44:02] info: [auth:tmedrd] Token from cookie: false
[2026-01-28 13:44:02] info: [auth:tmedrd] Token from header: true
[2026-01-28 13:44:02] info: [auth:tmedrd] Authenticated user 81b151fd-164a-4784-9456-be9761947a6b
[2026-01-28 13:44:02] info: [auth:ga1bqh] Starting auth for GET /81b151fd-164a-4784-9456-be9761947a6b/progress
[2026-01-28 13:44:02] info: [auth:ga1bqh] Token from cookie: false
[2026-01-28 13:44:02] info: [auth:ga1bqh] Token from header: true
[2026-01-28 13:44:02] info: [auth:ga1bqh] Authenticated user 81b151fd-164a-4784-9456-be9761947a6b
[2026-01-28 13:44:02] info: [userRoutes] Self-access validated: user 81b151fd-164a-4784-9456-be9761947a6b accessing own data
[2026-01-28 13:44:02] info: [userController.getUserProgressAPI] Cache MISS - Getting comprehensive progress for user 81b151fd-164a-4784-9456-be9761947a6b
[2026-01-28 13:44:02] info: [GET] /api/users/81b151fd-164a-4784-9456-be9761947a6b/progress - 200
[2026-01-28 13:44:02] info: [GET] /api/user-docs/search?q=horse
[2026-01-28 13:44:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1552MB
[2026-01-28 13:44:02] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 13:44:02] info: [GET] /api/user-docs/search?q=horse - 200
[2026-01-28 13:44:02] info: [GET] /health
[2026-01-28 13:44:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1547MB
[2026-01-28 13:44:02] info: [GET] /health - 200
[2026-01-28 13:44:02] info: [GET] /api/user-docs/health
[2026-01-28 13:44:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1541MB
[2026-01-28 13:44:02] info: [GET] /api/user-docs/health - 200
[2026-01-28 13:44:02] info: [GET] /api/user-docs/analytics
[2026-01-28 13:44:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1551MB
[2026-01-28 13:44:02] info: [UserDocRoutes] Getting documentation analytics
[2026-01-28 13:44:02] info: [GET] /api/user-docs/analytics - 200
[2026-01-28 13:44:02] info: [POST] /api/grooms/interact
[2026-01-28 13:44:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1548MB
[2026-01-28 13:44:02] info: [auth:tpzia8] Starting auth for POST /grooms/interact
[2026-01-28 13:44:02] info: [auth:tpzia8] Token from cookie: false
[2026-01-28 13:44:02] info: [auth:tpzia8] Token from header: true
[2026-01-28 13:44:02] info: [auth:tpzia8] Authenticated user 5bea0e44-180a-4c0a-b34b-545f5068eed4
[2026-01-28 13:44:02] info: [auth:4d4tnj] Starting auth for POST /interact
[2026-01-28 13:44:02] info: [auth:4d4tnj] Token from cookie: false
[2026-01-28 13:44:02] info: [auth:4d4tnj] Token from header: true
[2026-01-28 13:44:02] info: [auth:4d4tnj] Authenticated user 5bea0e44-180a-4c0a-b34b-545f5068eed4
[2026-01-28 13:44:02] info: [ownership] Found owned foal 146798 for user 5bea0e44-180a-4c0a-b34b-545f5068eed4
[2026-01-28 13:44:02] info: [ownership] Found owned groom 73407 for user 5bea0e44-180a-4c0a-b34b-545f5068eed4
[2026-01-28 13:44:02] info: [groomController.recordInteraction] Recording early_touch interaction for foal 146798
[2026-01-28 13:44:02] warn: [groomPersonalityEffects.calculatePersonalityEffects] Unknown personality: calm
[2026-01-28 13:44:02] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for calm: none
[2026-01-28 13:44:02] info: [groomController.recordInteraction] Interaction recorded: 4 bonding, -1 stress
[2026-01-28 13:44:02] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 73407 for interaction_completed
[2026-01-28 13:44:03] info: [groomProgressionService.awardGroomXP] Groom 73407 gained 2 XP: 0 → 2 (Level 1 → 1)
[2026-01-28 13:44:03] info: [groomController.recordInteraction] Awarded 2 XP to groom 73407 for interaction
[2026-01-28 13:44:03] info: [POST] /api/grooms/interact - 200
[2026-01-28 13:44:03] info: [GET] /api/grooms/user/5bea0e44-180a-4c0a-b34b-545f5068eed4
[2026-01-28 13:44:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1550MB
[2026-01-28 13:44:03] info: [auth:tll5y] Starting auth for GET /grooms/user/5bea0e44-180a-4c0a-b34b-545f5068eed4
[2026-01-28 13:44:03] info: [auth:tll5y] Token from cookie: false
[2026-01-28 13:44:03] info: [auth:tll5y] Token from header: true
[2026-01-28 13:44:03] info: [auth:tll5y] Authenticated user 5bea0e44-180a-4c0a-b34b-545f5068eed4
[2026-01-28 13:44:03] info: [auth:r74xbe] Starting auth for GET /user/5bea0e44-180a-4c0a-b34b-545f5068eed4
[2026-01-28 13:44:03] info: [auth:r74xbe] Token from cookie: false
[2026-01-28 13:44:03] info: [auth:r74xbe] Token from header: true
[2026-01-28 13:44:03] info: [auth:r74xbe] Authenticated user 5bea0e44-180a-4c0a-b34b-545f5068eed4
[2026-01-28 13:44:03] info: [groomController.getUserGrooms] Getting grooms for user 5bea0e44-180a-4c0a-b34b-545f5068eed4
[2026-01-28 13:44:03] info: [GET] /api/grooms/user/5bea0e44-180a-4c0a-b34b-545f5068eed4 - 200
[2026-01-28 13:44:03] info: [GET] /api-docs/swagger.json
[2026-01-28 13:44:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1546MB
[2026-01-28 13:44:03] info: [GET] /api-docs/swagger.json - 200
[2026-01-28 13:44:03] info: [GET] /api/user-docs
[2026-01-28 13:44:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1544MB
[2026-01-28 13:44:03] info: [UserDocRoutes] Getting all documentation list
[2026-01-28 13:44:03] info: [GET] /api/user-docs - 200
[2026-01-28 13:44:03] info: [GET] /api/user-docs/search?q=horse
[2026-01-28 13:44:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1542MB
[2026-01-28 13:44:03] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 13:44:03] info: [GET] /api/user-docs/search?q=horse - 200
[2026-01-28 13:44:03] info: [GET] /api/user-docs/analytics
[2026-01-28 13:44:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1550MB
[2026-01-28 13:44:03] info: [UserDocRoutes] Getting documentation analytics
[2026-01-28 13:44:03] info: [GET] /api/user-docs/analytics - 200
[2026-01-28 13:44:03] info: [GET] /api/horses
[2026-01-28 13:44:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1544MB
[2026-01-28 13:44:03] info: [auth:aidpjm] Starting auth for GET /horses
[2026-01-28 13:44:03] info: [auth:aidpjm] Token from cookie: false
[2026-01-28 13:44:03] info: [auth:aidpjm] Token from header: true
[2026-01-28 13:44:03] info: [auth:aidpjm] Authenticated user 5bea0e44-180a-4c0a-b34b-545f5068eed4
[2026-01-28 13:44:03] info: [GET] /api/horses
[2026-01-28 13:44:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1554MB
[2026-01-28 13:44:03] info: [auth:gy7s2g] Starting auth for GET /horses
[2026-01-28 13:44:03] info: [auth:gy7s2g] Token from cookie: false
[2026-01-28 13:44:03] info: [auth:gy7s2g] Token from header: true
[2026-01-28 13:44:03] info: [auth:gy7s2g] Authenticated user 5bea0e44-180a-4c0a-b34b-545f5068eed4
[2026-01-28 13:44:03] info: [GET] /api/horses
[2026-01-28 13:44:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1549MB
[2026-01-28 13:44:03] info: [auth:vi3nh] Starting auth for GET /horses
[2026-01-28 13:44:03] info: [auth:vi3nh] Token from cookie: false
[2026-01-28 13:44:03] info: [auth:vi3nh] Token from header: true
[2026-01-28 13:44:03] info: [auth:vi3nh] Authenticated user 5bea0e44-180a-4c0a-b34b-545f5068eed4
[2026-01-28 13:44:03] info: [GET] /api/horses
[2026-01-28 13:44:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1544MB
[2026-01-28 13:44:03] info: [auth:q3icv] Starting auth for GET /horses
[2026-01-28 13:44:03] info: [auth:q3icv] Token from cookie: false
[2026-01-28 13:44:03] info: [auth:q3icv] Token from header: true
[2026-01-28 13:44:03] info: [auth:q3icv] Authenticated user 5bea0e44-180a-4c0a-b34b-545f5068eed4
[2026-01-28 13:44:03] info: [GET] /api/horses
[2026-01-28 13:44:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1555MB
[2026-01-28 13:44:03] info: [auth:zehndb] Starting auth for GET /horses
[2026-01-28 13:44:03] info: [auth:zehndb] Token from cookie: false
[2026-01-28 13:44:03] info: [auth:zehndb] Token from header: true
[2026-01-28 13:44:03] info: [auth:zehndb] Authenticated user 5bea0e44-180a-4c0a-b34b-545f5068eed4
[2026-01-28 13:44:03] info: [GET] /api/horses
[2026-01-28 13:44:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1550MB
[2026-01-28 13:44:03] info: [auth:7ojeyp] Starting auth for GET /horses
[2026-01-28 13:44:03] info: [auth:7ojeyp] Token from cookie: false
[2026-01-28 13:44:03] info: [auth:7ojeyp] Token from header: true
[2026-01-28 13:44:03] info: [auth:7ojeyp] Authenticated user 5bea0e44-180a-4c0a-b34b-545f5068eed4
[2026-01-28 13:44:03] info: [GET] /api/horses
[2026-01-28 13:44:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1545MB
[2026-01-28 13:44:03] info: [auth:6qr4v7] Starting auth for GET /horses
[2026-01-28 13:44:03] info: [auth:6qr4v7] Token from cookie: false
[2026-01-28 13:44:03] info: [auth:6qr4v7] Token from header: true
[2026-01-28 13:44:03] info: [auth:6qr4v7] Authenticated user 5bea0e44-180a-4c0a-b34b-545f5068eed4
[2026-01-28 13:44:03] info: [GET] /api/horses
[2026-01-28 13:44:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1555MB
[2026-01-28 13:44:03] info: [auth:mzeq84] Starting auth for GET /horses
[2026-01-28 13:44:03] info: [auth:mzeq84] Token from cookie: false
[2026-01-28 13:44:03] info: [auth:mzeq84] Token from header: true
[2026-01-28 13:44:03] info: [auth:mzeq84] Authenticated user 5bea0e44-180a-4c0a-b34b-545f5068eed4
[2026-01-28 13:44:03] info: [GET] /api/horses
[2026-01-28 13:44:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1550MB
[2026-01-28 13:44:03] info: [auth:ybnfbi] Starting auth for GET /horses
[2026-01-28 13:44:03] info: [auth:ybnfbi] Token from cookie: false
[2026-01-28 13:44:03] info: [auth:ybnfbi] Token from header: true
[2026-01-28 13:44:03] info: [auth:ybnfbi] Authenticated user 5bea0e44-180a-4c0a-b34b-545f5068eed4
[2026-01-28 13:44:03] info: [GET] /api/horses
[2026-01-28 13:44:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1545MB
[2026-01-28 13:44:03] info: [auth:qynrhf] Starting auth for GET /horses
[2026-01-28 13:44:03] info: [auth:qynrhf] Token from cookie: false
[2026-01-28 13:44:03] info: [auth:qynrhf] Token from header: true
[2026-01-28 13:44:03] info: [auth:qynrhf] Authenticated user 5bea0e44-180a-4c0a-b34b-545f5068eed4
[2026-01-28 13:44:03] info: [GET] /api/horses - 200
[2026-01-28 13:44:03] info: [GET] /api/horses - 200
[2026-01-28 13:44:03] info: [GET] /api/horses - 200
[2026-01-28 13:44:03] info: [GET] /api/horses - 200
[2026-01-28 13:44:03] info: [GET] /api/horses - 200
[2026-01-28 13:44:03] info: [GET] /api/horses - 200
[2026-01-28 13:44:03] info: [GET] /api/horses - 200
[2026-01-28 13:44:03] info: [GET] /api/horses - 200
[2026-01-28 13:44:03] info: [GET] /api/horses - 200
[2026-01-28 13:44:03] info: [GET] /api/horses - 200
[2026-01-28 13:44:03] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 13:44:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1550MB
[2026-01-28 13:44:03] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 13:44:03] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 13:44:03] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 13:44:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1556MB
[2026-01-28 13:44:03] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 13:44:03] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 13:44:03] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 13:44:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1546MB
[2026-01-28 13:44:03] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 13:44:03] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 13:44:03] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 13:44:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1552MB
[2026-01-28 13:44:03] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 13:44:03] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 13:44:03] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 13:44:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1557MB
[2026-01-28 13:44:03] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 13:44:03] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 13:44:03] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 13:44:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1547MB
[2026-01-28 13:44:03] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 13:44:03] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 13:44:03] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 13:44:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1553MB
[2026-01-28 13:44:03] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 13:44:03] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 13:44:03] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 13:44:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1559MB
[2026-01-28 13:44:03] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 13:44:03] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 13:44:03] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 13:44:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1549MB
[2026-01-28 13:44:03] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 13:44:03] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 13:44:03] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 13:44:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1555MB
[2026-01-28 13:44:03] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 13:44:03] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 13:44:03] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 13:44:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1545MB
[2026-01-28 13:44:03] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 13:44:03] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 13:44:03] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 13:44:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1551MB
[2026-01-28 13:44:03] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 13:44:03] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 13:44:03] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 13:44:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1556MB
[2026-01-28 13:44:03] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 13:44:03] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 13:44:03] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 13:44:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1546MB
[2026-01-28 13:44:03] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 13:44:03] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 13:44:03] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 13:44:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1552MB
[2026-01-28 13:44:03] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 13:44:03] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 13:44:03] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 13:44:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1558MB
[2026-01-28 13:44:03] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 13:44:03] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 13:44:03] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 13:44:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1548MB
[2026-01-28 13:44:03] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 13:44:03] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 13:44:03] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 13:44:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1554MB
[2026-01-28 13:44:03] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 13:44:03] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 13:44:03] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 13:44:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1559MB
[2026-01-28 13:44:03] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 13:44:03] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 13:44:03] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 13:44:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1550MB
[2026-01-28 13:44:03] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 13:44:03] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 13:44:03] info: [POST] /api/horses
[2026-01-28 13:44:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1552MB
[2026-01-28 13:44:03] info: [auth:st2vcu] Starting auth for POST /horses
[2026-01-28 13:44:03] info: [auth:st2vcu] Token from cookie: false
[2026-01-28 13:44:03] info: [auth:st2vcu] Token from header: true
[2026-01-28 13:44:03] info: [auth:st2vcu] Authenticated user 5bea0e44-180a-4c0a-b34b-545f5068eed4
[2026-01-28 13:44:03] info: [auth:bj117] Starting auth for POST /
[2026-01-28 13:44:03] info: [auth:bj117] Token from cookie: false
[2026-01-28 13:44:03] info: [auth:bj117] Token from header: true
[2026-01-28 13:44:03] info: [auth:bj117] Authenticated user 5bea0e44-180a-4c0a-b34b-545f5068eed4
[2026-01-28 13:44:03] info: [horseModel.createHorse] Successfully created horse: Consistency Test Horse (ID: 146799)
[2026-01-28 13:44:03] info: [horseRoutes] Created new horse: Consistency Test Horse (ID: 146799)
[2026-01-28 13:44:03] info: [POST] /api/horses - 201
[2026-01-28 13:44:03] info: [GET] /api/users/5bea0e44-180a-4c0a-b34b-545f5068eed4/progress
[2026-01-28 13:44:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1558MB
[2026-01-28 13:44:03] info: [auth:rf5sz9] Starting auth for GET /users/5bea0e44-180a-4c0a-b34b-545f5068eed4/progress
[2026-01-28 13:44:03] info: [auth:rf5sz9] Token from cookie: false
[2026-01-28 13:44:03] info: [auth:rf5sz9] Token from header: true
[2026-01-28 13:44:03] info: [auth:rf5sz9] Authenticated user 5bea0e44-180a-4c0a-b34b-545f5068eed4
[2026-01-28 13:44:03] info: [auth:9mz47l] Starting auth for GET /5bea0e44-180a-4c0a-b34b-545f5068eed4/progress
[2026-01-28 13:44:03] info: [auth:9mz47l] Token from cookie: false
[2026-01-28 13:44:03] info: [auth:9mz47l] Token from header: true
[2026-01-28 13:44:03] info: [auth:9mz47l] Authenticated user 5bea0e44-180a-4c0a-b34b-545f5068eed4
[2026-01-28 13:44:03] info: [userRoutes] Self-access validated: user 5bea0e44-180a-4c0a-b34b-545f5068eed4 accessing own data
[2026-01-28 13:44:03] info: [userController.getUserProgressAPI] Cache MISS - Getting comprehensive progress for user 5bea0e44-180a-4c0a-b34b-545f5068eed4
[2026-01-28 13:44:03] info: [GET] /api/users/5bea0e44-180a-4c0a-b34b-545f5068eed4/progress - 200
[2026-01-28 13:44:04] info: [POST] /api/training/train
[2026-01-28 13:44:04] warn: [MemoryMonitoring] Memory threshold exceeded: 1548MB
[2026-01-28 13:44:04] info: [auth:tbuhqd] Starting auth for POST /training/train
[2026-01-28 13:44:04] info: [auth:tbuhqd] Token from cookie: false
[2026-01-28 13:44:04] info: [auth:tbuhqd] Token from header: true
[2026-01-28 13:44:04] info: [auth:tbuhqd] Authenticated user 5bea0e44-180a-4c0a-b34b-545f5068eed4
[2026-01-28 13:44:04] info: [ownership] Found owned horse 146800 for user 5bea0e44-180a-4c0a-b34b-545f5068eed4
[2026-01-28 13:44:04] info: [trainingController.trainRouteHandler] Training request for horse 146800 in Dressage
[2026-01-28 13:44:04] info: [trainingController.trainHorse] Attempting to train horse 146800 in Dressage
[2026-01-28 13:44:04] info: [trainingController.canTrain] Checking training eligibility for horse 146800 in Dressage
[2026-01-28 13:44:04] info: [trainingModel.getHorseAge] Getting age for horse 146800
[2026-01-28 13:44:04] info: [trainingModel.getHorseAge] Horse 146800 is 7 years old
[2026-01-28 13:44:04] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146800 across all disciplines
[2026-01-28 13:44:04] info: [trainingModel.getAnyRecentTraining] No training records found for horse 146800
[2026-01-28 13:44:04] info: [trainingController.canTrain] Horse 146800 is eligible to train in Dressage
[2026-01-28 13:44:04] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 146800)
[2026-01-28 13:44:04] info: [trainingController.trainHorse] Horse 146800 has traits: 
[2026-01-28 13:44:04] info: [trainingModel.logTrainingSession] Logging training session for horse 146800 in Dressage
[2026-01-28 13:44:04] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 8985
[2026-01-28 13:44:04] info: [horseModel.incrementDisciplineScore] Incrementing Dressage score for horse 146800 by +5
[2026-01-28 13:44:04] info: [horseModel.updateDisciplineScore] Updating Dressage score for horse 146800 by +5
[2026-01-28 13:44:04] info: [horseModel.updateDisciplineScore] Successfully updated Dressage score for horse 146800: 0 -> 5
[2026-01-28 13:44:04] info: [horseModel.incrementDisciplineScore] Successfully incremented Dressage score for horse 146800
[2026-01-28 13:44:04] info: [xpLogModel.logXpEvent] Logging XP event: User 5bea0e44-180a-4c0a-b34b-545f5068eed4, Amount: 5, Reason: Trained horse Progress Test Horse in Dressage
[2026-01-28 13:44:04] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 4435, User 5bea0e44-180a-4c0a-b34b-545f5068eed4, Amount: 5
[2026-01-28 13:44:04] info: [trainingController.trainHorse] Awarded 5 XP to user 5bea0e44-180a-4c0a-b34b-545f5068eed4 for training
[2026-01-28 13:44:04] info: [trainingController.trainHorse] Successfully trained horse 146800 in Dressage (Log ID: 8985, Score +5)
[2026-01-28 13:44:04] info: [POST] /api/training/train - 200
[2026-01-28 13:44:04] info: [GET] /api/users/5bea0e44-180a-4c0a-b34b-545f5068eed4/progress
[2026-01-28 13:44:04] warn: [MemoryMonitoring] Memory threshold exceeded: 1549MB
[2026-01-28 13:44:04] info: [auth:4rqxxr] Starting auth for GET /users/5bea0e44-180a-4c0a-b34b-545f5068eed4/progress
[2026-01-28 13:44:04] info: [auth:4rqxxr] Token from cookie: false
[2026-01-28 13:44:04] info: [auth:4rqxxr] Token from header: true
[2026-01-28 13:44:04] info: [auth:4rqxxr] Authenticated user 5bea0e44-180a-4c0a-b34b-545f5068eed4
[2026-01-28 13:44:04] info: [auth:8lu4i] Starting auth for GET /5bea0e44-180a-4c0a-b34b-545f5068eed4/progress
[2026-01-28 13:44:04] info: [auth:8lu4i] Token from cookie: false
[2026-01-28 13:44:04] info: [auth:8lu4i] Token from header: true
[2026-01-28 13:44:04] info: [auth:8lu4i] Authenticated user 5bea0e44-180a-4c0a-b34b-545f5068eed4
[2026-01-28 13:44:04] info: [userRoutes] Self-access validated: user 5bea0e44-180a-4c0a-b34b-545f5068eed4 accessing own data
[2026-01-28 13:44:04] info: [userController.getUserProgressAPI] Cache MISS - Getting comprehensive progress for user 5bea0e44-180a-4c0a-b34b-545f5068eed4
[2026-01-28 13:44:04] info: [GET] /api/users/5bea0e44-180a-4c0a-b34b-545f5068eed4/progress - 200
PASS __tests__/integration/systemWideIntegration.test.mjs
  System-Wide Integration Tests
    Complete User Journey: Registration to Competition
      √ End-to-end user workflow: registration → horse purchase → training → competition (484 ms)
    System Integration Validation
      √ Documentation system integration (55 ms)
      √ Groom career progression and talent system integration (212 ms)
      √ Documentation system integration with API endpoints (76 ms)
    Performance and Load Testing
      √ API response times under load (255 ms)
      √ Memory usage monitoring during operations (282 ms)
    Data Consistency Validation
      √ Database transaction integrity across systems (59 ms)
      √ User progress tracking accuracy (1251 ms)

[2026-01-28 13:44:05] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:44:05] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:44:05] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:44:05] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:44:05] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:05] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:05] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:05] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:05] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:05] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:05] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:05] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:05] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:05] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:44:06] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:06] info: [EmailVerification] Created verification token
[2026-01-28 13:44:06] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:44:06] info: [authController.register] Verification email sent
[2026-01-28 13:44:06] info: [auth:fynxlf] Starting auth for GET /api/auth/profile
[2026-01-28 13:44:06] info: [auth:fynxlf] Token from cookie: false
[2026-01-28 13:44:06] info: [auth:fynxlf] Token from header: true
[2026-01-28 13:44:06] info: [auth:fynxlf] Authenticated user 484e8c0b-3eb2-4987-ba7c-3d38226525f5
[2026-01-28 13:44:06] info: [auth:usepg8] Starting auth for GET /api/horses
[2026-01-28 13:44:06] info: [auth:usepg8] Token from cookie: false
[2026-01-28 13:44:06] info: [auth:usepg8] Token from header: true
[2026-01-28 13:44:06] info: [auth:usepg8] Authenticated user 484e8c0b-3eb2-4987-ba7c-3d38226525f5
[2026-01-28 13:44:06] info: [auth:6okaij] Starting auth for GET /api/competition/my-entries
[2026-01-28 13:44:06] info: [auth:6okaij] Token from cookie: false
[2026-01-28 13:44:06] info: [auth:6okaij] Token from header: true
[2026-01-28 13:44:06] info: [auth:6okaij] Authenticated user 484e8c0b-3eb2-4987-ba7c-3d38226525f5
[2026-01-28 13:44:06] info: [auth:gk46yn] Starting auth for GET /api/training/status
[2026-01-28 13:44:06] info: [auth:gk46yn] Token from cookie: false
[2026-01-28 13:44:06] info: [auth:gk46yn] Token from header: true
[2026-01-28 13:44:06] info: [auth:gk46yn] Authenticated user 484e8c0b-3eb2-4987-ba7c-3d38226525f5
[2026-01-28 13:44:06] info: [auth:4e2ncp] Starting auth for GET /api/grooms/my-grooms
[2026-01-28 13:44:06] info: [auth:4e2ncp] Token from cookie: false
[2026-01-28 13:44:06] info: [auth:4e2ncp] Token from header: true
[2026-01-28 13:44:06] info: [auth:4e2ncp] Authenticated user 484e8c0b-3eb2-4987-ba7c-3d38226525f5
[2026-01-28 13:44:06] info: [auth:tm48go] Starting auth for GET /api/traits/my-discoveries
[2026-01-28 13:44:06] info: [auth:tm48go] Token from cookie: false
[2026-01-28 13:44:06] info: [auth:tm48go] Token from header: true
[2026-01-28 13:44:06] info: [auth:tm48go] Authenticated user 484e8c0b-3eb2-4987-ba7c-3d38226525f5
[2026-01-28 13:44:06] info: [auth:ymead] Starting auth for GET /api/dashboard/overview
[2026-01-28 13:44:06] info: [auth:ymead] Token from cookie: false
[2026-01-28 13:44:06] info: [auth:ymead] Token from header: true
[2026-01-28 13:44:06] info: [auth:ymead] Authenticated user 484e8c0b-3eb2-4987-ba7c-3d38226525f5
[2026-01-28 13:44:06] info: [auth:9ch23r] Starting auth for GET /api/health/protected
[2026-01-28 13:44:06] info: [auth:9ch23r] Token from cookie: false
[2026-01-28 13:44:06] info: [auth:9ch23r] Token from header: true
[2026-01-28 13:44:06] info: [auth:9ch23r] Authenticated user 484e8c0b-3eb2-4987-ba7c-3d38226525f5
[2026-01-28 13:44:06] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:06] info: [EmailVerification] Created verification token
[2026-01-28 13:44:06] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:44:06] info: [authController.register] Verification email sent
[2026-01-28 13:44:06] info: [auth:fhbit9] Starting auth for GET /api/auth/profile
[2026-01-28 13:44:06] info: [auth:fhbit9] Token from cookie: false
[2026-01-28 13:44:06] warn: [auth:fhbit9] Access token is required for GET /api/auth/profile from ::ffff:127.0.0.1
[2026-01-28 13:44:06] info: [auth:k0k15r] Starting auth for GET /api/horses
[2026-01-28 13:44:06] info: [auth:k0k15r] Token from cookie: false
[2026-01-28 13:44:06] warn: [auth:k0k15r] Access token is required for GET /api/horses from ::ffff:127.0.0.1
[2026-01-28 13:44:06] info: [auth:lqp5kd] Starting auth for GET /api/competition/my-entries
[2026-01-28 13:44:06] info: [auth:lqp5kd] Token from cookie: false
[2026-01-28 13:44:06] warn: [auth:lqp5kd] Access token is required for GET /api/competition/my-entries from ::ffff:127.0.0.1
[2026-01-28 13:44:06] info: [auth:j5hxv6] Starting auth for GET /api/training/status
[2026-01-28 13:44:06] info: [auth:j5hxv6] Token from cookie: false
[2026-01-28 13:44:06] warn: [auth:j5hxv6] Access token is required for GET /api/training/status from ::ffff:127.0.0.1
[2026-01-28 13:44:06] info: [auth:k5piol] Starting auth for GET /api/grooms/my-grooms
[2026-01-28 13:44:06] info: [auth:k5piol] Token from cookie: false
[2026-01-28 13:44:06] warn: [auth:k5piol] Access token is required for GET /api/grooms/my-grooms from ::ffff:127.0.0.1
[2026-01-28 13:44:06] info: [auth:ac8oo] Starting auth for GET /api/traits/my-discoveries
[2026-01-28 13:44:06] info: [auth:ac8oo] Token from cookie: false
[2026-01-28 13:44:06] warn: [auth:ac8oo] Access token is required for GET /api/traits/my-discoveries from ::ffff:127.0.0.1
[2026-01-28 13:44:06] info: [auth:e2ph8i] Starting auth for GET /api/dashboard/overview
[2026-01-28 13:44:06] info: [auth:e2ph8i] Token from cookie: false
[2026-01-28 13:44:06] warn: [auth:e2ph8i] Access token is required for GET /api/dashboard/overview from ::ffff:127.0.0.1
[2026-01-28 13:44:06] info: [auth:yeq8ml] Starting auth for GET /api/health/protected
[2026-01-28 13:44:06] info: [auth:yeq8ml] Token from cookie: false
[2026-01-28 13:44:06] warn: [auth:yeq8ml] Access token is required for GET /api/health/protected from ::ffff:127.0.0.1
[2026-01-28 13:44:06] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:06] info: [EmailVerification] Created verification token
[2026-01-28 13:44:06] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:44:06] info: [authController.register] Verification email sent
[2026-01-28 13:44:07] info: [auth:j26odl] Starting auth for GET /api/auth/profile
[2026-01-28 13:44:07] info: [auth:j26odl] Token from cookie: false
[2026-01-28 13:44:07] info: [auth:j26odl] Token from header: true
[2026-01-28 13:44:07] warn: [auth:j26odl] Invalid or expired token for GET /api/auth/profile from ::ffff:127.0.0.1
[2026-01-28 13:44:07] info: [auth:go3uf2] Starting auth for GET /api/horses
[2026-01-28 13:44:07] info: [auth:go3uf2] Token from cookie: false
[2026-01-28 13:44:07] info: [auth:go3uf2] Token from header: true
[2026-01-28 13:44:07] warn: [auth:go3uf2] Invalid or expired token for GET /api/horses from ::ffff:127.0.0.1
[2026-01-28 13:44:07] info: [auth:m656k] Starting auth for GET /api/competition/my-entries
[2026-01-28 13:44:07] info: [auth:m656k] Token from cookie: false
[2026-01-28 13:44:07] info: [auth:m656k] Token from header: true
[2026-01-28 13:44:07] warn: [auth:m656k] Invalid or expired token for GET /api/competition/my-entries from ::ffff:127.0.0.1
[2026-01-28 13:44:07] info: [auth:fo1pyj] Starting auth for GET /api/training/status
[2026-01-28 13:44:07] info: [auth:fo1pyj] Token from cookie: false
[2026-01-28 13:44:07] info: [auth:fo1pyj] Token from header: true
[2026-01-28 13:44:07] warn: [auth:fo1pyj] Invalid or expired token for GET /api/training/status from ::ffff:127.0.0.1
[2026-01-28 13:44:07] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:07] info: [EmailVerification] Created verification token
[2026-01-28 13:44:07] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:44:07] info: [authController.register] Verification email sent
[2026-01-28 13:44:08] info: [TokenRotation] Token rotation successful
[2026-01-28 13:44:08] info: [authController.refreshToken] Token rotation successful
[2026-01-28 13:44:08] info: [auth:ot1jbmc] Starting auth for GET /api/auth/profile
[2026-01-28 13:44:08] info: [auth:ot1jbmc] Token from cookie: false
[2026-01-28 13:44:08] info: [auth:ot1jbmc] Token from header: true
[2026-01-28 13:44:08] info: [auth:ot1jbmc] Authenticated user 0c1b7c87-f0b0-46de-8e51-810f3b88498d
[2026-01-28 13:44:08] info: [auth:h8nk7vn] Starting auth for GET /api/horses
[2026-01-28 13:44:08] info: [auth:h8nk7vn] Token from cookie: false
[2026-01-28 13:44:08] info: [auth:h8nk7vn] Token from header: true
[2026-01-28 13:44:08] info: [auth:h8nk7vn] Authenticated user 0c1b7c87-f0b0-46de-8e51-810f3b88498d
[2026-01-28 13:44:08] info: [auth:hk9cy] Starting auth for GET /api/dashboard/overview
[2026-01-28 13:44:08] info: [auth:hk9cy] Token from cookie: false
[2026-01-28 13:44:08] info: [auth:hk9cy] Token from header: true
[2026-01-28 13:44:08] info: [auth:hk9cy] Authenticated user 0c1b7c87-f0b0-46de-8e51-810f3b88498d
[2026-01-28 13:44:08] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:08] info: [EmailVerification] Created verification token
[2026-01-28 13:44:08] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:44:08] info: [authController.register] Verification email sent
[2026-01-28 13:44:08] info: [auth:h90si] Starting auth for GET /api/auth/profile
[2026-01-28 13:44:08] info: [auth:h90si] Token from cookie: false
[2026-01-28 13:44:08] warn: [auth:h90si] Access token is required for GET /api/auth/profile from ::ffff:127.0.0.1
[2026-01-28 13:44:08] info: [auth:cg9u3] Starting auth for GET /api/horses
[2026-01-28 13:44:08] info: [auth:cg9u3] Token from cookie: false
[2026-01-28 13:44:08] warn: [auth:cg9u3] Access token is required for GET /api/horses from ::ffff:127.0.0.1
[2026-01-28 13:44:08] info: [auth:4ft9yr] Starting auth for GET /api/competition/my-entries
[2026-01-28 13:44:08] info: [auth:4ft9yr] Token from cookie: false
[2026-01-28 13:44:08] warn: [auth:4ft9yr] Access token is required for GET /api/competition/my-entries from ::ffff:127.0.0.1
[2026-01-28 13:44:09] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:09] info: [EmailVerification] Created verification token
[2026-01-28 13:44:09] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:44:09] info: [authController.register] Verification email sent
[2026-01-28 13:44:09] info: [auth:4vkd4p] Starting auth for GET /api/auth/profile
[2026-01-28 13:44:09] info: [auth:4vkd4p] Token from cookie: false
[2026-01-28 13:44:09] warn: [auth:4vkd4p] Access token is required for GET /api/auth/profile from ::ffff:127.0.0.1
[2026-01-28 13:44:09] info: [auth:rzcny5] Starting auth for GET /api/auth/profile
[2026-01-28 13:44:09] info: [auth:rzcny5] Token from cookie: false
[2026-01-28 13:44:09] warn: [auth:rzcny5] Access token is required for GET /api/auth/profile from ::ffff:127.0.0.1
[2026-01-28 13:44:09] info: [auth:4wncyd] Starting auth for GET /api/auth/profile
[2026-01-28 13:44:09] info: [auth:4wncyd] Token from cookie: false
[2026-01-28 13:44:09] warn: [auth:4wncyd] Access token is required for GET /api/auth/profile from ::ffff:127.0.0.1
[2026-01-28 13:44:09] info: [auth:zs8c3b] Starting auth for GET /api/auth/profile
[2026-01-28 13:44:09] info: [auth:zs8c3b] Token from cookie: false
[2026-01-28 13:44:09] warn: [auth:zs8c3b] Access token is required for GET /api/auth/profile from ::ffff:127.0.0.1
PASS tests/integration/auth-system-integration.test.mjs
  🔐 Authentication System Integration Tests
    🌐 Cross-System Authentication Validation
      √ should authenticate successfully across all protected endpoints (523 ms)
      √ should reject access to all protected endpoints without token (463 ms)
      √ should reject access with invalid token across all systems (365 ms)
    🔄 Token Refresh Integration
      √ should refresh token and maintain access across systems (1378 ms)
    🛡️ Security Validation
      √ should maintain consistent error responses across systems (343 ms)
      √ should handle malformed authorization headers consistently (354 ms)

[2026-01-28 13:44:09] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:44:09] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:44:09] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:44:09] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:44:09] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:09] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:09] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:09] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:09] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:09] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:09] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:09] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:09] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:09] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:44:10] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:10] info: [EmailVerification] Created verification token
[2026-01-28 13:44:10] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:44:10] info: [authController.register] Verification email sent
[2026-01-28 13:44:10] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:10] info: [EmailVerification] Created verification token
[2026-01-28 13:44:10] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:44:10] info: [authController.register] Verification email sent
[2026-01-28 13:44:10] error: [authController.register] Error registering user: User with this email or username already exists
[2026-01-28 13:44:10] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:10] info: [EmailVerification] Created verification token
[2026-01-28 13:44:10] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:44:10] info: [authController.register] Verification email sent
[2026-01-28 13:44:11] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:11] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 13:44:11] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:11] info: [EmailVerification] Created verification token
[2026-01-28 13:44:11] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:44:11] info: [authController.register] Verification email sent
[2026-01-28 13:44:11] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 13:44:12] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:12] info: [EmailVerification] Created verification token
[2026-01-28 13:44:12] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:44:12] info: [authController.register] Verification email sent
[2026-01-28 13:44:12] info: [TokenRotation] Token rotation successful
[2026-01-28 13:44:12] info: [authController.refreshToken] Token rotation successful
[2026-01-28 13:44:12] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:12] info: [EmailVerification] Created verification token
[2026-01-28 13:44:12] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:44:12] info: [authController.register] Verification email sent
[2026-01-28 13:44:12] warn: [TokenRotation] Token reuse detected during rotation
[2026-01-28 13:44:12] warn: [authController.refreshToken] Token family invalidated due to reuse detection
[2026-01-28 13:44:12] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again
[2026-01-28 13:44:12] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:12] info: [EmailVerification] Created verification token
[2026-01-28 13:44:12] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:44:12] info: [authController.register] Verification email sent
[2026-01-28 13:44:12] info: [auth:724l0h] Starting auth for GET /api/auth/me
[2026-01-28 13:44:12] info: [auth:724l0h] Token from cookie: false
[2026-01-28 13:44:12] info: [auth:724l0h] Token from header: true
[2026-01-28 13:44:12] info: [auth:724l0h] Authenticated user 3883bce6-1372-4564-b5d0-ef53beaa044c
[2026-01-28 13:44:12] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:12] info: [EmailVerification] Created verification token
[2026-01-28 13:44:12] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:44:12] info: [authController.register] Verification email sent
[2026-01-28 13:44:12] info: [auth:ka8dt] Starting auth for GET /api/auth/me
[2026-01-28 13:44:12] info: [auth:ka8dt] Token from cookie: false
[2026-01-28 13:44:12] warn: [auth:ka8dt] Access token is required for GET /api/auth/me from ::ffff:127.0.0.1
[2026-01-28 13:44:13] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:13] info: [EmailVerification] Created verification token
[2026-01-28 13:44:13] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:44:13] info: [authController.register] Verification email sent
[2026-01-28 13:44:13] info: [auth:2xnqi] Starting auth for POST /api/auth/logout
[2026-01-28 13:44:13] info: [auth:2xnqi] Token from cookie: false
[2026-01-28 13:44:13] info: [auth:2xnqi] Token from header: true
[2026-01-28 13:44:13] info: [auth:2xnqi] Authenticated user 21ca02a5-7e26-440e-b755-1f057599f15f
PASS tests/auth-working.test.mjs
  🔐 INTEGRATION: Authentication System - Complete Auth Workflow Validation
    User Registration
      √ should register a new user successfully (391 ms)
      √ should reject duplicate email registration (320 ms)
    User Login
      √ should login successfully with valid credentials (595 ms)
      √ should reject login with invalid credentials (576 ms)
    Token Management
      √ should refresh token successfully (321 ms)
      √ should reject invalid refresh token (313 ms)
    Protected Routes
      √ should get user profile with valid token (316 ms)
      √ should reject profile request without token (315 ms)
      √ should logout successfully (313 ms)

[2026-01-28 13:44:13] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:44:13] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:44:13] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:44:13] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:44:14] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:14] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:14] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:14] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:14] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:14] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:14] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:14] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:14] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:14] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:44:14] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 13:44:14] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:14] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:44:14] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:44:14] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:44:14] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:44:14] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:44:14] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 13:44:14] info: [POST] /api/auth/register
[2026-01-28 13:44:14] warn: [MemoryMonitoring] Memory threshold exceeded: 1680MB
[2026-01-28 13:44:14] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:14] info: [EmailVerification] Created verification token
[2026-01-28 13:44:14] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:44:14] info: [authController.register] Verification email sent
[2026-01-28 13:44:14] info: [POST] /api/auth/register - 201
[2026-01-28 13:44:15] info: [POST] /api/auth/register
[2026-01-28 13:44:15] warn: [MemoryMonitoring] Memory threshold exceeded: 1687MB
[2026-01-28 13:44:15] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:15] info: [EmailVerification] Created verification token
[2026-01-28 13:44:15] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:44:15] info: [authController.register] Verification email sent
[2026-01-28 13:44:15] info: [POST] /api/auth/register - 201
[2026-01-28 13:44:15] info: [POST] /api/auth/login
[2026-01-28 13:44:15] warn: [MemoryMonitoring] Memory threshold exceeded: 1673MB
[2026-01-28 13:44:15] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:15] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 13:44:15] info: [POST] /api/auth/login - 200
[2026-01-28 13:44:15] info: [POST] /api/auth/login
[2026-01-28 13:44:15] warn: [MemoryMonitoring] Memory threshold exceeded: 1686MB
[2026-01-28 13:44:15] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:15] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 13:44:15] info: [POST] /api/auth/login - 200
[2026-01-28 13:44:15] info: [POST] /api/auth/login
[2026-01-28 13:44:15] warn: [MemoryMonitoring] Memory threshold exceeded: 1683MB
[2026-01-28 13:44:15] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:15] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 13:44:15] info: [POST] /api/auth/login - 200
[2026-01-28 13:44:15] info: [GET] /api/auth/profile
[2026-01-28 13:44:15] warn: [MemoryMonitoring] Memory threshold exceeded: 1680MB
[2026-01-28 13:44:15] info: [auth:bol861] Starting auth for GET /profile
[2026-01-28 13:44:15] info: [auth:bol861] Token from cookie: true
[2026-01-28 13:44:15] info: [auth:bol861] Authenticated user d08897c0-7d49-45c9-91d2-362048a666ac
[2026-01-28 13:44:15] info: [GET] /api/auth/profile - 200
[2026-01-28 13:44:15] info: [GET] /api/auth/profile
[2026-01-28 13:44:15] warn: [MemoryMonitoring] Memory threshold exceeded: 1675MB
[2026-01-28 13:44:15] info: [auth:8nd3kn] Starting auth for GET /profile
[2026-01-28 13:44:15] info: [auth:8nd3kn] Token from cookie: false
[2026-01-28 13:44:15] warn: [auth:8nd3kn] Access token is required for GET /profile from ::ffff:127.0.0.1
[2026-01-28 13:44:15] info: [GET] /api/auth/profile - 401
[2026-01-28 13:44:15] info: [GET] /api/auth/profile
[2026-01-28 13:44:15] warn: [MemoryMonitoring] Memory threshold exceeded: 1685MB
[2026-01-28 13:44:15] info: [auth:qwveyh] Starting auth for GET /profile
[2026-01-28 13:44:15] info: [auth:qwveyh] Token from cookie: true
[2026-01-28 13:44:15] warn: [auth:qwveyh] Invalid or expired token for GET /profile from ::ffff:127.0.0.1
[2026-01-28 13:44:15] info: [GET] /api/auth/profile - 401
[2026-01-28 13:44:15] info: [POST] /api/auth/login
[2026-01-28 13:44:15] warn: [MemoryMonitoring] Memory threshold exceeded: 1681MB
[2026-01-28 13:44:15] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:15] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 13:44:15] info: [POST] /api/auth/login - 200
[2026-01-28 13:44:15] info: [POST] /api/auth/refresh-token
[2026-01-28 13:44:15] warn: [MemoryMonitoring] Memory threshold exceeded: 1678MB
[2026-01-28 13:44:15] info: [TokenRotation] Token rotation successful
[2026-01-28 13:44:15] info: [authController.refreshToken] Token rotation successful
[2026-01-28 13:44:15] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 13:44:15] info: [POST] /api/auth/refresh-token
[2026-01-28 13:44:15] warn: [MemoryMonitoring] Memory threshold exceeded: 1690MB
[2026-01-28 13:44:15] error: [authController.refreshToken] Error refreshing token: Refresh token is required
[2026-01-28 13:44:15] error: [POST] /api/auth/refresh-token - ERROR
[2026-01-28 13:44:15] error: Error Refresh token is required
[2026-01-28 13:44:15] info: [POST] /api/auth/refresh-token - 400
[2026-01-28 13:44:15] info: [POST] /api/auth/login
[2026-01-28 13:44:15] warn: [MemoryMonitoring] Memory threshold exceeded: 1679MB
[2026-01-28 13:44:15] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:15] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 13:44:15] info: [POST] /api/auth/login - 200
[2026-01-28 13:44:15] info: [POST] /api/auth/logout
[2026-01-28 13:44:15] warn: [MemoryMonitoring] Memory threshold exceeded: 1679MB
[2026-01-28 13:44:15] info: [auth:c9erbk] Starting auth for POST /logout
[2026-01-28 13:44:15] info: [auth:c9erbk] Token from cookie: true
[2026-01-28 13:44:15] info: [auth:c9erbk] Authenticated user d08897c0-7d49-45c9-91d2-362048a666ac
[2026-01-28 13:44:15] info: [POST] /api/auth/logout - 200
[2026-01-28 13:44:15] info: [POST] /api/auth/login
[2026-01-28 13:44:15] warn: [MemoryMonitoring] Memory threshold exceeded: 1680MB
[2026-01-28 13:44:16] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:16] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 13:44:16] info: [POST] /api/auth/login - 200
[2026-01-28 13:44:16] info: [POST] /api/auth/logout
[2026-01-28 13:44:16] warn: [MemoryMonitoring] Memory threshold exceeded: 1691MB
[2026-01-28 13:44:16] info: [auth:ibjoga] Starting auth for POST /logout
[2026-01-28 13:44:16] info: [auth:ibjoga] Token from cookie: true
[2026-01-28 13:44:16] info: [auth:ibjoga] Authenticated user d08897c0-7d49-45c9-91d2-362048a666ac
[2026-01-28 13:44:16] info: [POST] /api/auth/logout - 200
[2026-01-28 13:44:16] info: [POST] /api/auth/register
[2026-01-28 13:44:16] warn: [MemoryMonitoring] Memory threshold exceeded: 1692MB
[2026-01-28 13:44:16] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:16] info: [EmailVerification] Created verification token
[2026-01-28 13:44:16] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:44:16] info: [authController.register] Verification email sent
[2026-01-28 13:44:16] info: [POST] /api/auth/register - 201
[2026-01-28 13:44:16] info: [POST] /api/auth/login
[2026-01-28 13:44:16] warn: [MemoryMonitoring] Memory threshold exceeded: 1693MB
[2026-01-28 13:44:16] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:16] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 13:44:16] info: [POST] /api/auth/login - 200
[2026-01-28 13:44:16] info: [POST] /api/auth/login
[2026-01-28 13:44:16] warn: [MemoryMonitoring] Memory threshold exceeded: 1690MB
[2026-01-28 13:44:16] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:16] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 13:44:16] info: [POST] /api/auth/login - 200
[2026-01-28 13:44:16] info: [POST] /api/auth/login
[2026-01-28 13:44:16] warn: [MemoryMonitoring] Memory threshold exceeded: 1687MB
[2026-01-28 13:44:16] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:16] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 13:44:16] info: [POST] /api/auth/login - 200
[2026-01-28 13:44:16] info: [GET] /api/auth/profile
[2026-01-28 13:44:16] warn: [MemoryMonitoring] Memory threshold exceeded: 1685MB
[2026-01-28 13:44:16] info: [auth:rkfdsq] Starting auth for GET /profile
[2026-01-28 13:44:16] info: [auth:rkfdsq] Token from cookie: false
[2026-01-28 13:44:16] info: [auth:rkfdsq] Token from header: true
[2026-01-28 13:44:16] info: [auth:rkfdsq] Authenticated user a62652a8-820a-44fd-b5c1-f59f8e97aabe
[2026-01-28 13:44:16] info: [GET] /api/auth/profile - 200
PASS __tests__/integration/auth-cookies.test.mjs
  Authentication with HttpOnly Cookies
    POST /api/auth/register - Cookie Setting
      √ should set httpOnly cookies on successful registration (353 ms)
      √ should NOT expose tokens in response body (XSS protection) (316 ms)
    POST /api/auth/login - Cookie Setting
      √ should set httpOnly cookies on successful login (99 ms)
      √ should include SameSite=Strict for CSRF protection (98 ms)
    GET /api/auth/profile - Cookie Authentication
      √ should authenticate with httpOnly cookies (23 ms)
      √ should reject request without cookies (19 ms)
      √ should reject request with invalid cookies (20 ms)
    POST /api/auth/refresh-token - Cookie Refresh
      √ should refresh accessToken using httpOnly refreshToken cookie (36 ms)
      √ should reject refresh without refreshToken cookie (29 ms)
    POST /api/auth/logout - Cookie Clearing
      √ should clear httpOnly cookies on logout (124 ms)
      √ should invalidate refresh tokens in database on logout (123 ms)
    Security: XSS Protection Verification
      √ should never include JWT tokens in any response body (615 ms)
    Security: CSRF Protection Verification
      √ should set SameSite=Strict on all auth cookies (95 ms)
    Production Security: HTTPS Enforcement
      √ should set Secure flag in production environment (97 ms)
    Backward Compatibility: Authorization Header Fallback
      √ should still accept Authorization header for backward compatibility (21 ms)

[2026-01-28 13:44:17] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:44:17] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:44:17] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:44:17] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:44:18] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:18] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:18] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:18] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:18] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:18] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:18] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:18] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:18] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:18] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:44:18] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 13:44:18] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:18] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:44:18] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:44:18] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:44:18] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:44:18] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:44:18] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 13:44:18] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:18] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:18] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:18] info: [POST] /api/auth/login
[2026-01-28 13:44:18] warn: [MemoryMonitoring] Memory threshold exceeded: 1491MB
[2026-01-28 13:44:18] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:18] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 13:44:18] info: [POST] /api/auth/login - 200
[2026-01-28 13:44:18] info: [POST] /api/auth/login
[2026-01-28 13:44:18] warn: [MemoryMonitoring] Memory threshold exceeded: 1504MB
[2026-01-28 13:44:18] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:18] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 13:44:18] info: [POST] /api/auth/login - 200
[2026-01-28 13:44:18] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:18] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:18] info: [POST] /api/auth/login
[2026-01-28 13:44:18] warn: [MemoryMonitoring] Memory threshold exceeded: 1505MB
[2026-01-28 13:44:18] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:18] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 13:44:18] info: [POST] /api/auth/login - 200
[2026-01-28 13:44:18] info: [POST] /api/auth/logout
[2026-01-28 13:44:18] warn: [MemoryMonitoring] Memory threshold exceeded: 1500MB
[2026-01-28 13:44:18] info: [auth:rljunk] Starting auth for POST /logout
[2026-01-28 13:44:18] info: [auth:rljunk] Token from cookie: true
[2026-01-28 13:44:18] info: [auth:rljunk] Authenticated user 98a7dfec-428a-4a60-a94b-5299570185e7
[2026-01-28 13:44:18] info: [POST] /api/auth/logout - 200
[2026-01-28 13:44:18] info: [POST] /api/auth/login
[2026-01-28 13:44:18] warn: [MemoryMonitoring] Memory threshold exceeded: 1502MB
[2026-01-28 13:44:19] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:19] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 13:44:19] info: [POST] /api/auth/login - 200
[2026-01-28 13:44:19] info: [POST] /api/auth/logout
[2026-01-28 13:44:19] warn: [MemoryMonitoring] Memory threshold exceeded: 1500MB
[2026-01-28 13:44:19] info: [auth:054cbo] Starting auth for POST /logout
[2026-01-28 13:44:19] info: [auth:054cbo] Token from cookie: true
[2026-01-28 13:44:19] info: [auth:054cbo] Authenticated user 98a7dfec-428a-4a60-a94b-5299570185e7
[2026-01-28 13:44:19] info: [POST] /api/auth/logout - 200
[2026-01-28 13:44:19] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:19] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:19] info: [POST] /api/auth/login
[2026-01-28 13:44:19] warn: [MemoryMonitoring] Memory threshold exceeded: 1503MB
[2026-01-28 13:44:19] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:19] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 13:44:19] info: [POST] /api/auth/login - 200
[2026-01-28 13:44:19] info: [POST] /api/auth/change-password
[2026-01-28 13:44:19] warn: [MemoryMonitoring] Memory threshold exceeded: 1501MB
[2026-01-28 13:44:19] info: [auth:l2f97] Starting auth for POST /change-password
[2026-01-28 13:44:19] info: [auth:l2f97] Token from cookie: true
[2026-01-28 13:44:19] info: [auth:l2f97] Authenticated user 98a7dfec-428a-4a60-a94b-5299570185e7
[2026-01-28 13:44:19] info: [authController.changePassword] Password changed successfully
[2026-01-28 13:44:19] info: [POST] /api/auth/change-password - 200
[2026-01-28 13:44:19] info: [POST] /api/auth/login
[2026-01-28 13:44:19] warn: [MemoryMonitoring] Memory threshold exceeded: 1506MB
[2026-01-28 13:44:19] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:19] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 13:44:19] info: [POST] /api/auth/login - 200
[2026-01-28 13:44:19] info: [POST] /api/auth/change-password
[2026-01-28 13:44:19] warn: [MemoryMonitoring] Memory threshold exceeded: 1502MB
[2026-01-28 13:44:19] info: [auth:rz4yt9] Starting auth for POST /change-password
[2026-01-28 13:44:19] info: [auth:rz4yt9] Token from cookie: true
[2026-01-28 13:44:19] info: [auth:rz4yt9] Authenticated user 98a7dfec-428a-4a60-a94b-5299570185e7
[2026-01-28 13:44:20] error: [authController.changePassword] Error changing password: Current password is incorrect
[2026-01-28 13:44:20] error: [POST] /api/auth/change-password - ERROR
[2026-01-28 13:44:20] error: Error Current password is incorrect
[2026-01-28 13:44:20] info: [POST] /api/auth/change-password - 401
[2026-01-28 13:44:20] info: [POST] /api/auth/login
[2026-01-28 13:44:20] warn: [MemoryMonitoring] Memory threshold exceeded: 1507MB
[2026-01-28 13:44:20] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:20] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 13:44:20] info: [POST] /api/auth/login - 200
[2026-01-28 13:44:20] info: [POST] /api/auth/change-password
[2026-01-28 13:44:20] warn: [MemoryMonitoring] Memory threshold exceeded: 1503MB
[2026-01-28 13:44:20] info: [auth:uf10ci] Starting auth for POST /change-password
[2026-01-28 13:44:20] info: [auth:uf10ci] Token from cookie: true
[2026-01-28 13:44:20] info: [auth:uf10ci] Authenticated user 98a7dfec-428a-4a60-a94b-5299570185e7
[2026-01-28 13:44:20] warn: [Validation] Input validation failed
[2026-01-28 13:44:20] info: [POST] /api/auth/change-password - 400
[2026-01-28 13:44:20] info: [POST] /api/auth/login
[2026-01-28 13:44:20] warn: [MemoryMonitoring] Memory threshold exceeded: 1504MB
[2026-01-28 13:44:20] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:20] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 13:44:20] info: [POST] /api/auth/login - 200
[2026-01-28 13:44:20] info: [GET] /api/auth/profile
[2026-01-28 13:44:20] warn: [MemoryMonitoring] Memory threshold exceeded: 1501MB
[2026-01-28 13:44:20] info: [auth:hkxqvh] Starting auth for GET /profile
[2026-01-28 13:44:20] info: [auth:hkxqvh] Token from cookie: true
[2026-01-28 13:44:20] warn: [auth:hkxqvh] Session too old
[2026-01-28 13:44:20] warn: [auth:hkxqvh] Session expired. Please login again. for GET /profile from ::ffff:127.0.0.1
[2026-01-28 13:44:20] info: [GET] /api/auth/profile - 401
[2026-01-28 13:44:20] info: [POST] /api/auth/login
[2026-01-28 13:44:20] warn: [MemoryMonitoring] Memory threshold exceeded: 1506MB
[2026-01-28 13:44:20] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:20] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 13:44:20] info: [POST] /api/auth/login - 200
[2026-01-28 13:44:20] info: [GET] /api/auth/profile
[2026-01-28 13:44:20] warn: [MemoryMonitoring] Memory threshold exceeded: 1502MB
[2026-01-28 13:44:20] info: [auth:ynrnpj] Starting auth for GET /profile
[2026-01-28 13:44:20] info: [auth:ynrnpj] Token from cookie: true
[2026-01-28 13:44:20] info: [auth:ynrnpj] Authenticated user 98a7dfec-428a-4a60-a94b-5299570185e7
[2026-01-28 13:44:20] info: [GET] /api/auth/profile - 200
[2026-01-28 13:44:20] info: [POST] /api/auth/login
[2026-01-28 13:44:20] warn: [MemoryMonitoring] Memory threshold exceeded: 1503MB
[2026-01-28 13:44:20] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:20] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 13:44:20] info: [POST] /api/auth/login - 200
[2026-01-28 13:44:20] info: [GET] /api/auth/profile
[2026-01-28 13:44:20] warn: [MemoryMonitoring] Memory threshold exceeded: 1502MB
[2026-01-28 13:44:20] info: [auth:ry3gml] Starting auth for GET /profile
[2026-01-28 13:44:20] info: [auth:ry3gml] Token from cookie: true
[2026-01-28 13:44:20] info: [auth:ry3gml] Authenticated user 98a7dfec-428a-4a60-a94b-5299570185e7
[2026-01-28 13:44:20] info: [GET] /api/auth/profile - 200
[2026-01-28 13:44:20] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:20] info: [cronJobService] Manually triggering token cleanup...
[2026-01-28 13:44:20] info: [cronJobService] Starting expired token cleanup...
[2026-01-28 13:44:20] info: [TokenRotation] Token cleanup completed
[2026-01-28 13:44:20] info: [cronJobService] Token cleanup completed. Removed 1 expired/invalidated tokens
[2026-01-28 13:44:20] info: [cronJobService] Manual token cleanup completed: {"removed":1,"expired":1,"invalidated":0,"timestamp":"2026-01-28T18:44:20.541Z"}
[2026-01-28 13:44:20] info: [cronJobService] Manually triggering token cleanup...
[2026-01-28 13:44:20] info: [cronJobService] Starting expired token cleanup...
[2026-01-28 13:44:20] info: [TokenRotation] Token cleanup completed
[2026-01-28 13:44:20] info: [cronJobService] Token cleanup completed. Removed 1 expired/invalidated tokens
[2026-01-28 13:44:20] info: [cronJobService] Manual token cleanup completed: {"removed":1,"expired":1,"invalidated":0,"timestamp":"2026-01-28T18:44:20.555Z"}
[2026-01-28 13:44:20] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:20] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:20] info: [cronJobService] Manually triggering token cleanup...
[2026-01-28 13:44:20] info: [cronJobService] Starting expired token cleanup...
[2026-01-28 13:44:20] info: [TokenRotation] Token cleanup completed
[2026-01-28 13:44:20] info: [cronJobService] Token cleanup completed. Removed 0 expired/invalidated tokens
[2026-01-28 13:44:20] info: [cronJobService] Manual token cleanup completed: {"removed":0,"expired":0,"invalidated":0,"timestamp":"2026-01-28T18:44:20.577Z"}
[2026-01-28 13:44:20] info: [POST] /api/auth/register
[2026-01-28 13:44:20] warn: [MemoryMonitoring] Memory threshold exceeded: 1506MB
[2026-01-28 13:44:20] warn: [Validation] Input validation failed
[2026-01-28 13:44:20] info: [POST] /api/auth/register - 400
PASS __tests__/integration/session-lifecycle.test.mjs
  Session Lifecycle Management
    CWE-384: Token Regeneration on Login
      √ should delete all existing refresh tokens on login (147 ms)
      √ should create fresh token pair on login (101 ms)
    CWE-613: Token Cleanup on Logout
      √ should delete all refresh tokens on logout (135 ms)
      √ should clear auth cookies on logout (121 ms)
    Force Logout on Password Change
      √ should invalidate all sessions when password is changed (757 ms)
      √ should reject password change with incorrect old password (199 ms)
      √ should validate new password requirements (123 ms)
    CWE-613: Absolute Session Expiry
      √ should reject tokens older than 7 days (123 ms)
      √ should accept tokens less than 7 days old (123 ms)
      √ should calculate token age correctly at the boundary (exactly 7 days) (123 ms)
    Token Cleanup Cron Job
      √ should remove expired refresh tokens (19 ms)
      √ should remove old invalidated tokens (30+ days) (11 ms)
      √ should not remove valid active tokens (23 ms)
    Integration: Complete Session Lifecycle
      √ should handle complete user journey: register -> login -> use session -> change password -> re-login (24 ms)

[2026-01-28 13:44:20] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:44:20] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:44:20] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:44:20] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:44:21] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:21] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:21] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:21] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:21] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:21] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:21] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:21] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:21] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:21] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:44:21] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 13:44:21] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:21] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:44:21] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:44:21] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:44:21] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:44:21] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:44:21] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 13:44:21] info: [GET] /api/horses/146801?id=146801&id=999
[2026-01-28 13:44:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1555MB
[2026-01-28 13:44:21] info: [auth:y98fl] Starting auth for GET /horses/146801
[2026-01-28 13:44:21] info: [auth:y98fl] Token from cookie: false
[2026-01-28 13:44:21] info: [auth:y98fl] Token from header: true
[2026-01-28 13:44:21] info: [auth:y98fl] Authenticated user 0853c47b-acb5-4fc1-8a8e-99682e9ee385
[2026-01-28 13:44:21] info: [GET] /api/horses/146801?id=146801&id=999 - 400
[2026-01-28 13:44:21] info: [GET] /api/horses?id=1&id=2&id=3
[2026-01-28 13:44:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1558MB
[2026-01-28 13:44:21] info: [auth:1h33od] Starting auth for GET /horses
[2026-01-28 13:44:21] info: [auth:1h33od] Token from cookie: false
[2026-01-28 13:44:21] info: [auth:1h33od] Token from header: true
[2026-01-28 13:44:21] info: [auth:1h33od] Authenticated user 6a7652e5-1531-48d4-8319-49163ac24570
[2026-01-28 13:44:21] info: [GET] /api/horses?id=1&id=2&id=3 - 400
[2026-01-28 13:44:21] info: [GET] /api/horses/146803?sort=name&sort=age
[2026-01-28 13:44:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1558MB
[2026-01-28 13:44:21] info: [auth:2fm3zaa] Starting auth for GET /horses/146803
[2026-01-28 13:44:21] info: [auth:2fm3zaa] Token from cookie: false
[2026-01-28 13:44:21] info: [auth:2fm3zaa] Token from header: true
[2026-01-28 13:44:21] info: [auth:2fm3zaa] Authenticated user a1e56485-debe-447a-ac21-7be735cfe709
[2026-01-28 13:44:22] info: [ownership] Validated ownership: user a1e56485-debe-447a-ac21-7be735cfe709 owns horse 146803
[2026-01-28 13:44:22] info: [GET] /api/horses/146803?sort=name&sort=age - 200
[2026-01-28 13:44:22] info: [PUT] /api/horses/146804
[2026-01-28 13:44:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1563MB
[2026-01-28 13:44:22] info: [auth:steq4l] Starting auth for PUT /horses/146804
[2026-01-28 13:44:22] info: [auth:steq4l] Token from cookie: false
[2026-01-28 13:44:22] info: [auth:steq4l] Token from header: true
[2026-01-28 13:44:22] info: [auth:steq4l] Authenticated user d462884a-36dd-4782-b7f1-e1d70a96700f
[2026-01-28 13:44:22] info: [ownership] Validated ownership: user d462884a-36dd-4782-b7f1-e1d70a96700f owns horse 146804
[2026-01-28 13:44:22] info: [PUT] /api/horses/146804 - 400
[2026-01-28 13:44:22] info: [PUT] /api/horses/146805
[2026-01-28 13:44:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1565MB
[2026-01-28 13:44:22] info: [auth:wnjbt] Starting auth for PUT /horses/146805
[2026-01-28 13:44:22] info: [auth:wnjbt] Token from cookie: false
[2026-01-28 13:44:22] info: [auth:wnjbt] Token from header: true
[2026-01-28 13:44:22] info: [auth:wnjbt] Authenticated user 16527078-bb44-4bd7-a198-3600c561c554
[2026-01-28 13:44:22] info: [ownership] Validated ownership: user 16527078-bb44-4bd7-a198-3600c561c554 owns horse 146805
[2026-01-28 13:44:22] info: [PUT] /api/horses/146805 - 400
[2026-01-28 13:44:22] info: [PUT] /api/horses/146806
[2026-01-28 13:44:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1567MB
[2026-01-28 13:44:22] info: [auth:thki1v] Starting auth for PUT /horses/146806
[2026-01-28 13:44:22] info: [auth:thki1v] Token from cookie: false
[2026-01-28 13:44:22] info: [auth:thki1v] Token from header: true
[2026-01-28 13:44:22] info: [auth:thki1v] Authenticated user 5125ad4a-e0db-4c19-ac09-cf5255c21069
[2026-01-28 13:44:22] info: [ownership] Validated ownership: user 5125ad4a-e0db-4c19-ac09-cf5255c21069 owns horse 146806
[2026-01-28 13:44:22] info: [PUT] /api/horses/146806 - 400
[2026-01-28 13:44:22] info: [PUT] /api/horses/146807
[2026-01-28 13:44:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1557MB
[2026-01-28 13:44:22] info: [auth:gaoy17] Starting auth for PUT /horses/146807
[2026-01-28 13:44:22] info: [auth:gaoy17] Token from cookie: false
[2026-01-28 13:44:22] info: [auth:gaoy17] Token from header: true
[2026-01-28 13:44:22] info: [auth:gaoy17] Authenticated user f753bf3d-5bfb-4da9-a2be-e56f2b76acc9
[2026-01-28 13:44:22] info: [ownership] Validated ownership: user f753bf3d-5bfb-4da9-a2be-e56f2b76acc9 owns horse 146807
[2026-01-28 13:44:22] info: [PUT] /api/horses/146807 - 400
[2026-01-28 13:44:22] info: [PUT] /api/horses/146808
[2026-01-28 13:44:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1561MB
[2026-01-28 13:44:22] info: [auth:bmenm] Starting auth for PUT /horses/146808
[2026-01-28 13:44:22] info: [auth:bmenm] Token from cookie: false
[2026-01-28 13:44:22] info: [auth:bmenm] Token from header: true
[2026-01-28 13:44:22] info: [auth:bmenm] Authenticated user d11b3df0-36e0-42ca-bff5-0169623cea33
[2026-01-28 13:44:22] info: [ownership] Validated ownership: user d11b3df0-36e0-42ca-bff5-0169623cea33 owns horse 146808
[2026-01-28 13:44:22] info: [PUT] /api/horses/146808 - 400
[2026-01-28 13:44:22] info: [PUT] /api/horses/146809
[2026-01-28 13:44:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1563MB
[2026-01-28 13:44:22] info: [auth:hsv4rc] Starting auth for PUT /horses/146809
[2026-01-28 13:44:22] info: [auth:hsv4rc] Token from cookie: false
[2026-01-28 13:44:22] info: [auth:hsv4rc] Token from header: true
[2026-01-28 13:44:22] info: [auth:hsv4rc] Authenticated user 9021fa81-c14b-4eea-8ebb-f5231f2e5f81
[2026-01-28 13:44:22] info: [ownership] Validated ownership: user 9021fa81-c14b-4eea-8ebb-f5231f2e5f81 owns horse 146809
[2026-01-28 13:44:22] info: [PUT] /api/horses/146809 - 400
[2026-01-28 13:44:22] info: [PUT] /api/horses/146810
[2026-01-28 13:44:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1565MB
[2026-01-28 13:44:22] info: [auth:jwqol] Starting auth for PUT /horses/146810
[2026-01-28 13:44:22] info: [auth:jwqol] Token from cookie: false
[2026-01-28 13:44:22] info: [auth:jwqol] Token from header: true
[2026-01-28 13:44:22] info: [auth:jwqol] Authenticated user e148731f-794e-44bf-af55-dbee5bbd42a8
[2026-01-28 13:44:22] info: [ownership] Validated ownership: user e148731f-794e-44bf-af55-dbee5bbd42a8 owns horse 146810
[2026-01-28 13:44:22] info: [PUT] /api/horses/146810 - 400
[2026-01-28 13:44:22] info: [POST] /api/horses/batch-update
[2026-01-28 13:44:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1567MB
[2026-01-28 13:44:22] info: [auth:uwui1g] Starting auth for POST /horses/batch-update
[2026-01-28 13:44:22] info: [auth:uwui1g] Token from cookie: false
[2026-01-28 13:44:22] info: [auth:uwui1g] Token from header: true
[2026-01-28 13:44:22] info: [auth:uwui1g] Authenticated user 192514c5-d763-42b1-81dd-1c674e468306
[2026-01-28 13:44:22] info: [auth:yo4gck] Starting auth for POST /batch-update
[2026-01-28 13:44:22] info: [auth:yo4gck] Token from cookie: false
[2026-01-28 13:44:22] info: [auth:yo4gck] Token from header: true
[2026-01-28 13:44:22] info: [auth:yo4gck] Authenticated user 192514c5-d763-42b1-81dd-1c674e468306
[2026-01-28 13:44:22] info: [POST] /api/horses/batch-update - 400
[2026-01-28 13:44:22] info: [POST] /api/horses/batch-update
[2026-01-28 13:44:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1557MB
[2026-01-28 13:44:22] info: [auth:vjxh8r] Starting auth for POST /horses/batch-update
[2026-01-28 13:44:22] info: [auth:vjxh8r] Token from cookie: false
[2026-01-28 13:44:22] info: [auth:vjxh8r] Token from header: true
[2026-01-28 13:44:22] info: [auth:vjxh8r] Authenticated user 88938b6a-019a-4a94-aeaa-d97aa7c3d9b9
[2026-01-28 13:44:22] info: [auth:2r7t9i] Starting auth for POST /batch-update
[2026-01-28 13:44:22] info: [auth:2r7t9i] Token from cookie: false
[2026-01-28 13:44:22] info: [auth:2r7t9i] Token from header: true
[2026-01-28 13:44:22] info: [auth:2r7t9i] Authenticated user 88938b6a-019a-4a94-aeaa-d97aa7c3d9b9
[2026-01-28 13:44:22] info: [POST] /api/horses/batch-update - 400
[2026-01-28 13:44:22] info: [POST] /api/horses/batch-update
[2026-01-28 13:44:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1561MB
[2026-01-28 13:44:22] info: [auth:0k1536] Starting auth for POST /horses/batch-update
[2026-01-28 13:44:22] info: [auth:0k1536] Token from cookie: false
[2026-01-28 13:44:22] info: [auth:0k1536] Token from header: true
[2026-01-28 13:44:22] info: [auth:0k1536] Authenticated user d81d14e0-786c-41ff-aa4f-19a1541180fc
[2026-01-28 13:44:22] info: [auth:wrq2h] Starting auth for POST /batch-update
[2026-01-28 13:44:22] info: [auth:wrq2h] Token from cookie: false
[2026-01-28 13:44:22] info: [auth:wrq2h] Token from header: true
[2026-01-28 13:44:22] info: [auth:wrq2h] Authenticated user d81d14e0-786c-41ff-aa4f-19a1541180fc
[2026-01-28 13:44:22] info: [POST] /api/horses/batch-update - 400
[2026-01-28 13:44:22] info: [POST] /api/horses/batch-update
[2026-01-28 13:44:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1564MB
[2026-01-28 13:44:22] info: [auth:nefmwe] Starting auth for POST /horses/batch-update
[2026-01-28 13:44:22] info: [auth:nefmwe] Token from cookie: false
[2026-01-28 13:44:22] info: [auth:nefmwe] Token from header: true
[2026-01-28 13:44:22] info: [auth:nefmwe] Authenticated user 9da9b6c5-3737-4acb-bec0-206271b6c228
[2026-01-28 13:44:22] info: [auth:exfegg] Starting auth for POST /batch-update
[2026-01-28 13:44:22] info: [auth:exfegg] Token from cookie: false
[2026-01-28 13:44:22] info: [auth:exfegg] Token from header: true
[2026-01-28 13:44:22] info: [auth:exfegg] Authenticated user 9da9b6c5-3737-4acb-bec0-206271b6c228
[2026-01-28 13:44:22] info: [POST] /api/horses/batch-update - 400
[2026-01-28 13:44:22] info: [POST] /api/horses/batch-update
[2026-01-28 13:44:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1567MB
[2026-01-28 13:44:22] info: [auth:w4ny28] Starting auth for POST /horses/batch-update
[2026-01-28 13:44:22] info: [auth:w4ny28] Token from cookie: false
[2026-01-28 13:44:22] info: [auth:w4ny28] Token from header: true
[2026-01-28 13:44:22] info: [auth:w4ny28] Authenticated user beb50a12-a055-48ef-b607-b22596a21844
[2026-01-28 13:44:22] info: [auth:qqwdw5] Starting auth for POST /batch-update
[2026-01-28 13:44:22] info: [auth:qqwdw5] Token from cookie: false
[2026-01-28 13:44:22] info: [auth:qqwdw5] Token from header: true
[2026-01-28 13:44:22] info: [auth:qqwdw5] Authenticated user beb50a12-a055-48ef-b607-b22596a21844
[2026-01-28 13:44:22] info: [POST] /api/horses/batch-update - 400
[2026-01-28 13:44:22] info: [GET] /api/horses?breed=Thoroughbred%27%20OR%20%271%27=%271
[2026-01-28 13:44:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1569MB
[2026-01-28 13:44:22] info: [auth:qn8jwr] Starting auth for GET /horses
[2026-01-28 13:44:22] info: [auth:qn8jwr] Token from cookie: false
[2026-01-28 13:44:22] info: [auth:qn8jwr] Token from header: true
[2026-01-28 13:44:22] info: [auth:qn8jwr] Authenticated user 98c6d1dd-d6b5-450d-a47b-c5b1afa9c0c7
[2026-01-28 13:44:22] info: [GET] /api/horses?breed=Thoroughbred%27%20OR%20%271%27=%271 - 400
[2026-01-28 13:44:22] info: [GET] /api/horses?name[$ne]=null
[2026-01-28 13:44:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1570MB
[2026-01-28 13:44:22] info: [auth:gfhz6q] Starting auth for GET /horses
[2026-01-28 13:44:22] info: [auth:gfhz6q] Token from cookie: false
[2026-01-28 13:44:22] info: [auth:gfhz6q] Token from header: true
[2026-01-28 13:44:22] info: [auth:gfhz6q] Authenticated user 4ebab66d-abd8-45aa-92f3-c65b744dc706
[2026-01-28 13:44:22] info: [GET] /api/horses?name[$ne]=null - 400
[2026-01-28 13:44:22] info: [GET] /api/horses?name=%3Cscript%3Ealert(1)%3C/script%3E
[2026-01-28 13:44:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1570MB
[2026-01-28 13:44:22] info: [auth:xjv1fu] Starting auth for GET /horses
[2026-01-28 13:44:22] info: [auth:xjv1fu] Token from cookie: false
[2026-01-28 13:44:22] info: [auth:xjv1fu] Token from header: true
[2026-01-28 13:44:22] info: [auth:xjv1fu] Authenticated user b839eeab-f4fc-4ca6-b611-bfc977f6227c
[2026-01-28 13:44:22] info: [GET] /api/horses?name=%3Cscript%3Ealert(1)%3C/script%3E - 400
[2026-01-28 13:44:22] info: [GET] /api/horses?name=Horse%00Admin
[2026-01-28 13:44:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1570MB
[2026-01-28 13:44:22] info: [auth:n37hv] Starting auth for GET /horses
[2026-01-28 13:44:22] info: [auth:n37hv] Token from cookie: false
[2026-01-28 13:44:22] info: [auth:n37hv] Token from header: true
[2026-01-28 13:44:22] info: [auth:n37hv] Authenticated user 605b6bb2-8837-4059-9b9f-e1e8041b34b7
[2026-01-28 13:44:22] info: [GET] /api/horses?name=Horse%00Admin - 400
[2026-01-28 13:44:22] info: [GET] /api/horses?name=aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[2026-01-28 13:44:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1571MB
[2026-01-28 13:44:22] info: [auth:i8u7rn] Starting auth for GET /horses
[2026-01-28 13:44:22] info: [auth:i8u7rn] Token from cookie: false
[2026-01-28 13:44:22] info: [auth:i8u7rn] Token from header: true
[2026-01-28 13:44:22] info: [auth:i8u7rn] Authenticated user a910f80c-7dc7-40a7-bfa1-b2df75a99181
[2026-01-28 13:44:22] info: [GET] /api/horses?name=aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa - 414
[2026-01-28 13:44:22] error: [PUT] /api/horses/146821 - ERROR
[2026-01-28 13:44:22] error: Error Unexpected token 'n', "name=HackedName" is not valid JSON
[2026-01-28 13:44:22] info: [PUT] /api/horses/146822
[2026-01-28 13:44:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1569MB
[2026-01-28 13:44:22] info: [auth:4djye] Starting auth for PUT /horses/146822
[2026-01-28 13:44:22] info: [auth:4djye] Token from cookie: false
[2026-01-28 13:44:22] info: [auth:4djye] Token from header: true
[2026-01-28 13:44:22] info: [auth:4djye] Authenticated user d72c1be8-e423-4df0-bafd-464250b97e1d
[2026-01-28 13:44:22] info: [ownership] Validated ownership: user d72c1be8-e423-4df0-bafd-464250b97e1d owns horse 146822
[2026-01-28 13:44:22] info: [PUT] /api/horses/146822 - 400
[2026-01-28 13:44:22] info: [PUT] /api/horses/146823
[2026-01-28 13:44:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1570MB
[2026-01-28 13:44:22] info: [auth:mk2wj] Starting auth for PUT /horses/146823
[2026-01-28 13:44:22] info: [auth:mk2wj] Token from cookie: false
[2026-01-28 13:44:22] info: [auth:mk2wj] Token from header: true
[2026-01-28 13:44:22] info: [auth:mk2wj] Authenticated user 48803bef-de08-470d-af2f-f280c79415ff
[2026-01-28 13:44:22] info: [ownership] Validated ownership: user 48803bef-de08-470d-af2f-f280c79415ff owns horse 146823
[2026-01-28 13:44:22] info: [PUT] /api/horses/146823 - 400
[2026-01-28 13:44:22] info: [PUT] /api/horses/146824
[2026-01-28 13:44:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1572MB
[2026-01-28 13:44:22] info: [auth:6bt5n] Starting auth for PUT /horses/146824
[2026-01-28 13:44:22] info: [auth:6bt5n] Token from cookie: false
[2026-01-28 13:44:22] info: [auth:6bt5n] Token from header: true
[2026-01-28 13:44:22] info: [auth:6bt5n] Authenticated user a177c74f-8972-4313-ad11-3dc279ff9e9d
[2026-01-28 13:44:22] info: [ownership] Validated ownership: user a177c74f-8972-4313-ad11-3dc279ff9e9d owns horse 146824
[2026-01-28 13:44:22] info: [PUT] /api/horses/146824 - 415
[2026-01-28 13:44:22] info: [PUT] /api/horses/146825
[2026-01-28 13:44:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1561MB
[2026-01-28 13:44:22] info: [auth:1u2vdq] Starting auth for PUT /horses/146825
[2026-01-28 13:44:22] info: [auth:1u2vdq] Token from cookie: false
[2026-01-28 13:44:22] info: [auth:1u2vdq] Token from header: true
[2026-01-28 13:44:22] info: [auth:1u2vdq] Authenticated user ae6647ff-1d1d-4763-b39a-e6c44e737b87
[2026-01-28 13:44:22] info: [ownership] Validated ownership: user ae6647ff-1d1d-4763-b39a-e6c44e737b87 owns horse 146825
[2026-01-28 13:44:22] info: [PUT] /api/horses/146825 - 400
[2026-01-28 13:44:22] info: [PUT] /api/horses/146826
[2026-01-28 13:44:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1564MB
[2026-01-28 13:44:22] info: [auth:f2esnv] Starting auth for PUT /horses/146826
[2026-01-28 13:44:22] info: [auth:f2esnv] Token from cookie: false
[2026-01-28 13:44:22] info: [auth:f2esnv] Token from header: true
[2026-01-28 13:44:22] info: [auth:f2esnv] Authenticated user ae1d2bba-7a9f-4cf3-b9bd-84f777af8f95
[2026-01-28 13:44:22] info: [ownership] Validated ownership: user ae1d2bba-7a9f-4cf3-b9bd-84f777af8f95 owns horse 146826
[2026-01-28 13:44:22] info: [PUT] /api/horses/146826 - 400
[2026-01-28 13:44:22] info: [PUT] /api/horses/146827
[2026-01-28 13:44:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1566MB
[2026-01-28 13:44:22] info: [auth:w7vw6j] Starting auth for PUT /horses/146827
[2026-01-28 13:44:22] info: [auth:w7vw6j] Token from cookie: false
[2026-01-28 13:44:22] info: [auth:w7vw6j] Token from header: true
[2026-01-28 13:44:22] info: [auth:w7vw6j] Authenticated user 75d3ce87-9a59-4d5f-92c7-3fb801faa05c
[2026-01-28 13:44:22] info: [ownership] Validated ownership: user 75d3ce87-9a59-4d5f-92c7-3fb801faa05c owns horse 146827
[2026-01-28 13:44:22] info: [PUT] /api/horses/146827 - 400
[2026-01-28 13:44:22] info: [PUT] /api/horses/146828
[2026-01-28 13:44:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1568MB
[2026-01-28 13:44:22] info: [auth:rskcp] Starting auth for PUT /horses/146828
[2026-01-28 13:44:22] info: [auth:rskcp] Token from cookie: false
[2026-01-28 13:44:22] info: [auth:rskcp] Token from header: true
[2026-01-28 13:44:22] info: [auth:rskcp] Authenticated user 80a590fb-ee6e-41ec-8e05-b2635fa25a73
[2026-01-28 13:44:22] info: [ownership] Validated ownership: user 80a590fb-ee6e-41ec-8e05-b2635fa25a73 owns horse 146828
[2026-01-28 13:44:22] info: [PUT] /api/horses/146828 - 400
[2026-01-28 13:44:22] info: [PUT] /api/horses/146829
[2026-01-28 13:44:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1570MB
[2026-01-28 13:44:22] info: [auth:kyqr9] Starting auth for PUT /horses/146829
[2026-01-28 13:44:22] info: [auth:kyqr9] Token from cookie: false
[2026-01-28 13:44:22] info: [auth:kyqr9] Token from header: true
[2026-01-28 13:44:22] info: [auth:kyqr9] Authenticated user 74647961-7c81-4ad3-bab0-83e6d9ea34fa
[2026-01-28 13:44:22] info: [ownership] Validated ownership: user 74647961-7c81-4ad3-bab0-83e6d9ea34fa owns horse 146829
[2026-01-28 13:44:22] info: [PUT] /api/horses/146829 - 400
[2026-01-28 13:44:22] info: [PUT] /api/horses/146830
[2026-01-28 13:44:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1572MB
[2026-01-28 13:44:22] info: [auth:asolbl] Starting auth for PUT /horses/146830
[2026-01-28 13:44:22] info: [auth:asolbl] Token from cookie: false
[2026-01-28 13:44:22] info: [auth:asolbl] Token from header: true
[2026-01-28 13:44:22] info: [auth:asolbl] Authenticated user f7d8e2db-e8aa-440f-9dd7-5c661f644765
[2026-01-28 13:44:22] info: [ownership] Validated ownership: user f7d8e2db-e8aa-440f-9dd7-5c661f644765 owns horse 146830
[2026-01-28 13:44:22] info: [PUT] /api/horses/146830 - 400
[2026-01-28 13:44:22] info: [PUT] /api/horses/146831
[2026-01-28 13:44:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1574MB
[2026-01-28 13:44:22] info: [auth:phiydb] Starting auth for PUT /horses/146831
[2026-01-28 13:44:22] info: [auth:phiydb] Token from cookie: false
[2026-01-28 13:44:22] info: [auth:phiydb] Token from header: true
[2026-01-28 13:44:22] info: [auth:phiydb] Authenticated user 6239cb79-a293-4677-9ea2-db7c2cf17d0d
[2026-01-28 13:44:22] info: [ownership] Validated ownership: user 6239cb79-a293-4677-9ea2-db7c2cf17d0d owns horse 146831
[2026-01-28 13:44:22] info: [PUT] /api/horses/146831 - 400
[2026-01-28 13:44:22] info: [PUT] /api/horses/146832
[2026-01-28 13:44:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1562MB
[2026-01-28 13:44:22] info: [auth:ef5g8l] Starting auth for PUT /horses/146832
[2026-01-28 13:44:22] info: [auth:ef5g8l] Token from cookie: false
[2026-01-28 13:44:22] info: [auth:ef5g8l] Token from header: true
[2026-01-28 13:44:22] info: [auth:ef5g8l] Authenticated user df370698-c36f-4c48-a8ff-0b13455d7e15
[2026-01-28 13:44:22] info: [ownership] Validated ownership: user df370698-c36f-4c48-a8ff-0b13455d7e15 owns horse 146832
[2026-01-28 13:44:23] info: [PUT] /api/horses/146832 - 400
[2026-01-28 13:44:23] info: [PUT] /api/horses/146833
[2026-01-28 13:44:23] warn: [MemoryMonitoring] Memory threshold exceeded: 1566MB
[2026-01-28 13:44:23] info: [auth:0wlnme] Starting auth for PUT /horses/146833
[2026-01-28 13:44:23] info: [auth:0wlnme] Token from cookie: false
[2026-01-28 13:44:23] info: [auth:0wlnme] Token from header: true
[2026-01-28 13:44:23] info: [auth:0wlnme] Authenticated user 6056f66b-aeed-4108-bcaa-ff588e7bf936
[2026-01-28 13:44:23] info: [ownership] Validated ownership: user 6056f66b-aeed-4108-bcaa-ff588e7bf936 owns horse 146833
[2026-01-28 13:44:23] info: [PUT] /api/horses/146833 - 400
[2026-01-28 13:44:23] info: [PUT] /api/horses/146834
[2026-01-28 13:44:23] warn: [MemoryMonitoring] Memory threshold exceeded: 1568MB
[2026-01-28 13:44:23] info: [auth:qdyel] Starting auth for PUT /horses/146834
[2026-01-28 13:44:23] info: [auth:qdyel] Token from cookie: false
[2026-01-28 13:44:23] info: [auth:qdyel] Token from header: true
[2026-01-28 13:44:23] info: [auth:qdyel] Authenticated user 2a9c84fa-6030-42d5-a68e-57a9a0a34260
[2026-01-28 13:44:23] info: [ownership] Validated ownership: user 2a9c84fa-6030-42d5-a68e-57a9a0a34260 owns horse 146834
[2026-01-28 13:44:23] info: [PUT] /api/horses/146834 - 400
[2026-01-28 13:44:23] info: [PUT] /api/horses/146835
[2026-01-28 13:44:23] warn: [MemoryMonitoring] Memory threshold exceeded: 1570MB
[2026-01-28 13:44:23] info: [auth:jhv72] Starting auth for PUT /horses/146835
[2026-01-28 13:44:23] info: [auth:jhv72] Token from cookie: false
[2026-01-28 13:44:23] info: [auth:jhv72] Token from header: true
[2026-01-28 13:44:23] info: [auth:jhv72] Authenticated user 7d443a79-e441-4633-97d5-a11062a40b49
[2026-01-28 13:44:23] info: [ownership] Validated ownership: user 7d443a79-e441-4633-97d5-a11062a40b49 owns horse 146835
[2026-01-28 13:44:23] info: [PUT] /api/horses/146835 - 400
[2026-01-28 13:44:23] info: [PUT] /api/horses/146836
[2026-01-28 13:44:23] warn: [MemoryMonitoring] Memory threshold exceeded: 1572MB
[2026-01-28 13:44:23] info: [auth:jowik8] Starting auth for PUT /horses/146836
[2026-01-28 13:44:23] info: [auth:jowik8] Token from cookie: false
[2026-01-28 13:44:23] info: [auth:jowik8] Token from header: true
[2026-01-28 13:44:23] info: [auth:jowik8] Authenticated user ea907242-a22f-4434-ba4c-d35e6444ed14
[2026-01-28 13:44:23] info: [ownership] Validated ownership: user ea907242-a22f-4434-ba4c-d35e6444ed14 owns horse 146836
[2026-01-28 13:44:23] info: [PUT] /api/horses/146836 - 400
[2026-01-28 13:44:23] info: [PUT] /api/horses/146837
[2026-01-28 13:44:23] warn: [MemoryMonitoring] Memory threshold exceeded: 1574MB
[2026-01-28 13:44:23] info: [auth:r2b7il] Starting auth for PUT /horses/146837
[2026-01-28 13:44:23] info: [auth:r2b7il] Token from cookie: false
[2026-01-28 13:44:23] info: [auth:r2b7il] Token from header: true
[2026-01-28 13:44:23] info: [auth:r2b7il] Authenticated user 7c1e9b66-0263-4335-848a-0beaae07e548
[2026-01-28 13:44:23] info: [ownership] Validated ownership: user 7c1e9b66-0263-4335-848a-0beaae07e548 owns horse 146837
[2026-01-28 13:44:23] info: [PUT] /api/horses/146837 - 400
[2026-01-28 13:44:23] info: [PUT] /api/horses/146838
[2026-01-28 13:44:23] warn: [MemoryMonitoring] Memory threshold exceeded: 1564MB
[2026-01-28 13:44:23] info: [auth:xusmjo] Starting auth for PUT /horses/146838
[2026-01-28 13:44:23] info: [auth:xusmjo] Token from cookie: false
[2026-01-28 13:44:23] info: [auth:xusmjo] Token from header: true
[2026-01-28 13:44:23] info: [auth:xusmjo] Authenticated user 1ef448cf-e9cd-4675-9881-9f187cfac3c9
[2026-01-28 13:44:23] info: [ownership] Validated ownership: user 1ef448cf-e9cd-4675-9881-9f187cfac3c9 owns horse 146838
[2026-01-28 13:44:23] info: [PUT] /api/horses/146838 - 400
[2026-01-28 13:44:23] info: [GET] /api/horses/146839
[2026-01-28 13:44:23] warn: [MemoryMonitoring] Memory threshold exceeded: 1567MB
[2026-01-28 13:44:23] info: [auth:1vi8zl] Starting auth for GET /horses/146839
[2026-01-28 13:44:23] info: [auth:1vi8zl] Token from cookie: false
[2026-01-28 13:44:23] info: [auth:1vi8zl] Token from header: true
[2026-01-28 13:44:23] info: [auth:1vi8zl] Authenticated user 4d3af3d2-3eaa-4897-b3c8-fdbc17346eac
[2026-01-28 13:44:23] info: [ownership] Validated ownership: user 4d3af3d2-3eaa-4897-b3c8-fdbc17346eac owns horse 146839
[2026-01-28 13:44:23] info: [GET] /api/horses/146839 - 200
[2026-01-28 13:44:23] info: [GET] /api/horses
[2026-01-28 13:44:23] warn: [MemoryMonitoring] Memory threshold exceeded: 1571MB
[2026-01-28 13:44:23] info: [auth:nbmjls] Starting auth for GET /horses
[2026-01-28 13:44:23] info: [auth:nbmjls] Token from cookie: false
[2026-01-28 13:44:23] info: [auth:nbmjls] Token from header: true
[2026-01-28 13:44:23] info: [auth:nbmjls] Authenticated user 4498e5df-a440-430b-b95e-69deade529de
[2026-01-28 13:44:23] info: [GET] /api/horses - 400
[2026-01-28 13:44:23] info: [GET] /api/horses/146841
[2026-01-28 13:44:23] warn: [MemoryMonitoring] Memory threshold exceeded: 1571MB
[2026-01-28 13:44:23] info: [auth:3kxkmb] Starting auth for GET /horses/146841
[2026-01-28 13:44:23] info: [auth:3kxkmb] Token from cookie: false
[2026-01-28 13:44:23] info: [auth:3kxkmb] Token from header: true
[2026-01-28 13:44:23] info: [auth:3kxkmb] Authenticated user d217ca5e-ded0-4638-b6b3-5a698989c1a0
[2026-01-28 13:44:23] info: [GET] /api/horses/146841 - 406
[2026-01-28 13:44:23] info: [PUT] /api/horses/146842
[2026-01-28 13:44:23] warn: [MemoryMonitoring] Memory threshold exceeded: 1573MB
[2026-01-28 13:44:23] info: [auth:141m1f] Starting auth for PUT /horses/146842
[2026-01-28 13:44:23] info: [auth:141m1f] Token from cookie: false
[2026-01-28 13:44:23] info: [auth:141m1f] Token from header: true
[2026-01-28 13:44:23] info: [auth:141m1f] Authenticated user ddae03c7-8356-4c64-b3d7-366c0f4fdb35
[2026-01-28 13:44:23] info: [PUT] /api/horses/146842
[2026-01-28 13:44:23] warn: [MemoryMonitoring] Memory threshold exceeded: 1570MB
[2026-01-28 13:44:23] info: [auth:qul5qb] Starting auth for PUT /horses/146842
[2026-01-28 13:44:23] info: [auth:qul5qb] Token from cookie: false
[2026-01-28 13:44:23] info: [auth:qul5qb] Token from header: true
[2026-01-28 13:44:23] info: [auth:qul5qb] Authenticated user ddae03c7-8356-4c64-b3d7-366c0f4fdb35
[2026-01-28 13:44:23] info: [ownership] Validated ownership: user ddae03c7-8356-4c64-b3d7-366c0f4fdb35 owns horse 146842
[2026-01-28 13:44:23] info: [PUT] /api/horses/146842 - 400
[2026-01-28 13:44:23] info: [ownership] Validated ownership: user ddae03c7-8356-4c64-b3d7-366c0f4fdb35 owns horse 146842
[2026-01-28 13:44:23] info: [PUT] /api/horses/146842 - 400
PASS __tests__/integration/security/parameter-pollution.test.mjs
  Parameter Pollution Attack Integration Tests
    HTTP Parameter Pollution (HPP)
      √ should reject duplicate id parameters in query string (99 ms)
      √ should reject duplicate id parameters in different positions (36 ms)
      √ should use first parameter value when duplicates present (45 ms)
      √ should reject array-syntax parameters where not expected (45 ms)
      √ should reject mixed type parameters (37 ms)
    JSON Parameter Pollution
      √ should reject duplicate keys in JSON payload (38 ms)
      √ should reject nested parameter pollution (35 ms)
      √ should reject prototype pollution attempts (39 ms)
      √ should reject constructor pollution attempts (36 ms)
      √ should sanitize JSON keys with special characters (34 ms)
    Array Parameter Manipulation
      √ should reject oversized arrays in batch operations (33 ms)
      √ should reject mixed-type arrays (37 ms)
      √ should reject negative indices in array parameters (33 ms)
      √ should reject sparse arrays with undefined holes (33 ms)
      √ should enforce maximum array nesting depth (33 ms)
    Query String Pollution
      √ should reject SQL injection in query parameters (31 ms)
      √ should reject NoSQL injection in query parameters (32 ms)
      √ should reject encoded special characters in parameters (30 ms)
      √ should reject null bytes in query strings (30 ms)
      √ should enforce query string length limits (34 ms)
    Content-Type Manipulation
      √ should reject mismatched Content-Type and body format (25 ms)
      √ should reject Content-Type charset manipulation (37 ms)
      √ should reject multipart/form-data without proper boundaries (33 ms)
      √ should accept only allowed Content-Types (32 ms)
    Nested Object Pollution
      √ should reject excessive nesting depth (34 ms)
      √ should reject circular references in objects (32 ms)
      √ should sanitize nested object keys (35 ms)
      √ should reject objects with numeric string keys (33 ms)
    Type Coercion Attacks
      √ should reject boolean as string (32 ms)
      √ should reject object as number (36 ms)
      √ should reject array as string (33 ms)
      √ should reject numeric string with leading zeros (34 ms)
      √ should reject scientific notation where integers expected (32 ms)
      √ should reject Infinity and NaN values (33 ms)
    Mass Assignment Vulnerabilities
      √ should reject attempts to modify protected fields (35 ms)
      √ should reject attempts to set createdAt/updatedAt manually (32 ms)
      √ should only allow whitelisted fields in updates (33 ms)
      √ should reject attempts to add new fields (35 ms)
    Parameter Injection via Headers
      √ should reject parameter injection via custom headers (35 ms)
      √ should reject SQL injection in custom headers (31 ms)
      √ should reject malicious values in Accept header (29 ms)
    Race Condition via Parameter Timing
      √ should prevent race conditions in concurrent updates (56 ms)

[2026-01-28 13:44:23] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:44:23] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:44:23] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:44:23] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:44:24] info: [EmailVerification] Created verification token
[2026-01-28 13:44:24] info: [EmailVerification] Created verification token
[2026-01-28 13:44:24] info: [EmailVerification] Created verification token
[2026-01-28 13:44:24] info: [EmailVerification] Created verification token
[2026-01-28 13:44:24] error: [EmailVerification] Error creating verification token: Maximum pending verification tokens (5) reached
[2026-01-28 13:44:24] info: [EmailVerification] Created verification token
[2026-01-28 13:44:24] error: [EmailVerification] Error creating verification token: Please wait 300 seconds before requesting another verification email
[2026-01-28 13:44:24] info: [EmailVerification] Created verification token
[2026-01-28 13:44:24] info: [EmailVerification] Created verification token
[2026-01-28 13:44:24] info: [EmailVerification] Created verification token
[2026-01-28 13:44:24] info: [EmailVerification] Email verified successfully
[2026-01-28 13:44:24] info: [EmailVerification] Created verification token
[2026-01-28 13:44:24] info: [EmailVerification] Email verified successfully
[2026-01-28 13:44:24] info: [EmailVerification] Created verification token
[2026-01-28 13:44:24] info: [EmailVerification] Email verified successfully
[2026-01-28 13:44:25] info: [EmailVerification] Created verification token
[2026-01-28 13:44:25] info: [EmailVerification] Email verified successfully
[2026-01-28 13:44:25] error: [EmailVerification] Error verifying email token: Verification token has already been used
[2026-01-28 13:44:25] info: [EmailVerification] Created verification token
[2026-01-28 13:44:25] info: [EmailVerification] Created verification token
[2026-01-28 13:44:25] info: [EmailVerification] Email verified successfully
[2026-01-28 13:44:25] info: [EmailVerification] Created verification token
[2026-01-28 13:44:25] info: [EmailVerification] Email verified successfully
[2026-01-28 13:44:25] info: [EmailVerification] Verification status check
[2026-01-28 13:44:25] info: [EmailVerification] Verification status check
[2026-01-28 13:44:25] info: [EmailVerification] Created verification token
[2026-01-28 13:44:25] info: [EmailVerification] Resent verification email
[2026-01-28 13:44:25] info: [EmailVerification] Created verification token
[2026-01-28 13:44:25] info: [EmailVerification] Email verified successfully
[2026-01-28 13:44:25] error: [EmailVerification] Error resending verification email: Email is already verified
[2026-01-28 13:44:26] info: [EmailVerification] Created verification token
[2026-01-28 13:44:26] info: [EmailVerification] Created verification token
[2026-01-28 13:44:26] info: [EmailVerification] Resent verification email
[2026-01-28 13:44:26] info: [EmailVerification] Created verification token
[2026-01-28 13:44:26] info: [EmailVerification] Resent verification email
[2026-01-28 13:44:26] error: [EmailVerification] Error creating verification token: Please wait 300 seconds before requesting another verification email
[2026-01-28 13:44:26] error: [EmailVerification] Error resending verification email: Please wait 300 seconds before requesting another verification email
[2026-01-28 13:44:26] info: [EmailVerification] Created verification token
[2026-01-28 13:44:26] info: [EmailVerification] Token cleanup completed
[2026-01-28 13:44:26] info: [EmailVerification] Created verification token
[2026-01-28 13:44:26] info: [EmailVerification] Email verified successfully
[2026-01-28 13:44:26] info: [EmailVerification] Token cleanup completed
[2026-01-28 13:44:26] info: [EmailVerification] Created verification token
[2026-01-28 13:44:26] info: [EmailVerification] Token cleanup completed
[2026-01-28 13:44:26] info: [EmailVerification] Created verification token
[2026-01-28 13:44:26] info: [EmailVerification] Created verification token
[2026-01-28 13:44:26] info: [EmailVerification] Email verified successfully
[2026-01-28 13:44:26] info: [EmailVerification] Created verification token
PASS __tests__/unit/email-verification.test.mjs
  Email Verification Service - Unit Tests
    generateVerificationToken()
      √ should_generate_unique_tokens (244 ms)
      √ should_generate_64_character_hex_tokens (73 ms)
      √ should_generate_cryptographically_secure_tokens (76 ms)
    createVerificationToken()
      √ should_create_token_with_valid_user_id (83 ms)
      √ should_store_token_in_database (81 ms)
      √ should_set_expiration_to_24_hours (79 ms)
      √ should_store_ip_address_and_user_agent (77 ms)
      √ should_enforce_maximum_pending_tokens_limit (81 ms)
      √ should_enforce_rate_limiting_cooldown (82 ms)
      √ should_allow_token_creation_after_cooldown (84 ms)
    verifyEmailToken()
      √ should_verify_valid_token (87 ms)
      √ should_mark_user_email_as_verified (87 ms)
      √ should_mark_token_as_used (85 ms)
      √ should_reject_invalid_token (178 ms)
      √ should_reject_already_used_token (93 ms)
      √ should_reject_expired_token (80 ms)
      √ should_use_atomic_transaction_for_verification (129 ms)
      √ should_implement_timing_safe_response_for_invalid_tokens (183 ms)
    checkVerificationStatus()
      √ should_return_verification_status_for_verified_user (90 ms)
      √ should_return_verification_status_for_unverified_user (75 ms)
      √ should_handle_non_existent_user (73 ms)
    resendVerificationEmail()
      √ should_create_new_token_for_unverified_user (80 ms)
      √ should_reject_resend_for_verified_user (87 ms)
      √ should_cleanup_expired_tokens_before_creating_new (86 ms)
      √ should_enforce_rate_limiting_on_resend (87 ms)
    cleanupExpiredTokens()
      √ should_delete_expired_tokens (80 ms)
      √ should_delete_old_used_tokens (86 ms)
      √ should_keep_active_valid_tokens (81 ms)
    getTokenInfo()
      √ should_return_token_information (78 ms)
      √ should_indicate_used_token (82 ms)
      √ should_indicate_expired_token (80 ms)
      √ should_return_null_for_invalid_token (83 ms)

[2026-01-28 13:44:26] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:44:26] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:44:26] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:44:26] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:44:26] info: [RedisCircuitBreaker] Circuit breaker manually reset
[2026-01-28 13:44:26] info: [RedisCircuitBreaker] Circuit breaker manually reset
[2026-01-28 13:44:26] info: [RedisCircuitBreaker] Circuit breaker manually reset
[2026-01-28 13:44:26] info: [RedisCircuitBreaker] Circuit breaker manually reset
[2026-01-28 13:44:26] warn: [RedisCircuitBreaker] Operation failed: get
[2026-01-28 13:44:26] info: [RedisCircuitBreaker] Circuit breaker manually reset
[2026-01-28 13:44:29] warn: [RedisCircuitBreaker] Operation timeout: get
[2026-01-28 13:44:29] info: [RedisCircuitBreaker] Circuit breaker manually reset
[2026-01-28 13:44:29] info: [RedisCircuitBreaker] Circuit breaker manually reset
[2026-01-28 13:44:30] info: [RedisCircuitBreaker] Circuit breaker manually reset
[2026-01-28 13:44:30] info: [RedisCircuitBreaker] Circuit breaker manually reset
[2026-01-28 13:44:30] info: [RedisCircuitBreaker] Circuit breaker manually reset
[2026-01-28 13:44:30] info: [RedisCircuitBreaker] Circuit breaker manually reset
PASS __tests__/integration/redis-circuit-breaker.test.mjs
  Redis Circuit Breaker Integration Tests
    Circuit Breaker Initialization
      √ should create circuit breaker with default configuration (16 ms)
      √ should create circuit breaker with custom configuration (6 ms)
      √ should wrap all Redis operations with circuit breaker (12 ms)
    Circuit State Transitions
      √ should start in CLOSED state (6 ms)
      ○ skipped should open circuit after 50% error rate over 10 requests (default threshold)
      ○ skipped should enter HALF_OPEN state after reset timeout
      ○ skipped should close circuit after successful recovery in HALF_OPEN state
    Redis Failure Scenarios
      √ should handle Redis connection refused errors (11 ms)
      √ should handle Redis operation timeout (> 3s) (3024 ms)
      ○ skipped should handle intermittent Redis failures
      ○ skipped should handle multiple operation types failing simultaneously
    Fallback Strategies
      √ should allow operations to fail when circuit is CLOSED (7 ms)
      ○ skipped should reject operations immediately when circuit is OPEN
      ○ skipped should track fallback count when circuit is open
    Concurrent Request Handling
      √ should handle concurrent successful requests (315 ms)
      ○ skipped should handle concurrent requests during circuit opening
    Metrics and Health Monitoring
      √ should accurately track success count (389 ms)
      √ should return correct health status based on circuit state (9 ms)
      ○ skipped should accurately track failure count
      ○ skipped should calculate error rate correctly
      ○ skipped should return degraded health status when circuit is OPEN
    Manual Circuit Control
      √ should access raw Redis client for unwrapped operations (6 ms)
      ○ skipped should allow manual circuit reset
    Error Filtering
      √ should filter ECONNREFUSED errors in test environment (1 ms)
      √ should count ECONNREFUSED errors in production environment (1 ms)

[2026-01-28 13:44:30] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:44:30] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:44:30] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:44:30] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:44:31] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:31] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:31] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:31] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:31] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:31] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:31] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:31] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:31] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:31] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:44:31] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 13:44:31] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:31] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:44:31] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:44:31] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:44:31] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:44:31] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:44:31] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 13:44:32] info: [GET] /api/horses/146844
[2026-01-28 13:44:32] warn: [MemoryMonitoring] Memory threshold exceeded: 1643MB
[2026-01-28 13:44:32] info: [auth:1wt9wf] Starting auth for GET /horses/146844
[2026-01-28 13:44:32] info: [auth:1wt9wf] Token from cookie: false
[2026-01-28 13:44:32] info: [auth:1wt9wf] Token from header: true
[2026-01-28 13:44:32] info: [auth:1wt9wf] Authenticated user 64ec2baf-a5c2-4cf3-bc10-5870799053cb
[2026-01-28 13:44:32] warn: [ownership] horse 146844 not found or not owned by user 64ec2baf-a5c2-4cf3-bc10-5870799053cb
[2026-01-28 13:44:32] info: [GET] /api/horses/146844 - 404
[2026-01-28 13:44:32] info: [GET] /api/horses/146845
[2026-01-28 13:44:32] warn: [MemoryMonitoring] Memory threshold exceeded: 1648MB
[2026-01-28 13:44:32] info: [auth:rlt2ld] Starting auth for GET /horses/146845
[2026-01-28 13:44:32] info: [auth:rlt2ld] Token from cookie: false
[2026-01-28 13:44:32] info: [auth:rlt2ld] Token from header: true
[2026-01-28 13:44:32] info: [auth:rlt2ld] Authenticated user aa08a826-548f-4205-bd7e-7c4e9537443f
[2026-01-28 13:44:32] info: [ownership] Validated ownership: user aa08a826-548f-4205-bd7e-7c4e9537443f owns horse 146845
[2026-01-28 13:44:32] info: [GET] /api/horses/146845 - 200
[2026-01-28 13:44:32] info: [PUT] /api/horses/146848
[2026-01-28 13:44:32] warn: [MemoryMonitoring] Memory threshold exceeded: 1655MB
[2026-01-28 13:44:32] info: [auth:6cw2u2] Starting auth for PUT /horses/146848
[2026-01-28 13:44:32] info: [auth:6cw2u2] Token from cookie: false
[2026-01-28 13:44:32] info: [auth:6cw2u2] Token from header: true
[2026-01-28 13:44:32] info: [auth:6cw2u2] Authenticated user b98055cb-ab0f-46ea-8912-9b7f9693ed27
[2026-01-28 13:44:32] warn: [ownership] horse 146848 not found or not owned by user b98055cb-ab0f-46ea-8912-9b7f9693ed27
[2026-01-28 13:44:32] info: [PUT] /api/horses/146848 - 404
[2026-01-28 13:44:32] info: [PUT] /api/horses/146849
[2026-01-28 13:44:32] warn: [MemoryMonitoring] Memory threshold exceeded: 1648MB
[2026-01-28 13:44:32] info: [auth:6a1g7] Starting auth for PUT /horses/146849
[2026-01-28 13:44:32] info: [auth:6a1g7] Token from cookie: false
[2026-01-28 13:44:32] info: [auth:6a1g7] Token from header: true
[2026-01-28 13:44:32] info: [auth:6a1g7] Authenticated user 08a8a16d-dc2d-4cbe-b9fe-55f28fb393cd
[2026-01-28 13:44:32] info: [ownership] Validated ownership: user 08a8a16d-dc2d-4cbe-b9fe-55f28fb393cd owns horse 146849
[2026-01-28 13:44:32] info: [horseRoutes] User 08a8a16d-dc2d-4cbe-b9fe-55f28fb393cd updated horse: Updated Horse Name (ID: 146849)
[2026-01-28 13:44:32] info: [PUT] /api/horses/146849 - 200
[2026-01-28 13:44:32] info: [DELETE] /api/horses/146852
[2026-01-28 13:44:32] warn: [MemoryMonitoring] Memory threshold exceeded: 1656MB
[2026-01-28 13:44:32] info: [auth:1ikh8] Starting auth for DELETE /horses/146852
[2026-01-28 13:44:32] info: [auth:1ikh8] Token from cookie: false
[2026-01-28 13:44:32] info: [auth:1ikh8] Token from header: true
[2026-01-28 13:44:32] info: [auth:1ikh8] Authenticated user a8ef45d9-fbec-41e0-a72b-fc78bd6902eb
[2026-01-28 13:44:32] warn: [ownership] horse 146852 not found or not owned by user a8ef45d9-fbec-41e0-a72b-fc78bd6902eb
[2026-01-28 13:44:32] info: [DELETE] /api/horses/146852 - 404
[2026-01-28 13:44:32] info: [DELETE] /api/horses/146851
[2026-01-28 13:44:32] warn: [MemoryMonitoring] Memory threshold exceeded: 1656MB
[2026-01-28 13:44:32] info: [auth:njzyzj] Starting auth for DELETE /horses/146851
[2026-01-28 13:44:32] info: [auth:njzyzj] Token from cookie: false
[2026-01-28 13:44:32] info: [auth:njzyzj] Token from header: true
[2026-01-28 13:44:32] info: [auth:njzyzj] Authenticated user a8ef45d9-fbec-41e0-a72b-fc78bd6902eb
[2026-01-28 13:44:32] info: [ownership] Validated ownership: user a8ef45d9-fbec-41e0-a72b-fc78bd6902eb owns horse 146851
[2026-01-28 13:44:32] info: [horseRoutes] User a8ef45d9-fbec-41e0-a72b-fc78bd6902eb deleted horse ID: 146851
[2026-01-28 13:44:32] info: [DELETE] /api/horses/146851 - 200
[2026-01-28 13:44:32] info: [GET] /api/grooms/73419/profile
[2026-01-28 13:44:32] warn: [MemoryMonitoring] Memory threshold exceeded: 1649MB
[2026-01-28 13:44:32] info: [auth:lxtpvx] Starting auth for GET /grooms/73419/profile
[2026-01-28 13:44:32] info: [auth:lxtpvx] Token from cookie: false
[2026-01-28 13:44:32] info: [auth:lxtpvx] Token from header: true
[2026-01-28 13:44:32] info: [auth:lxtpvx] Authenticated user 37e35b24-044c-4c94-8dfb-a4912946443d
[2026-01-28 13:44:32] warn: [ownership] groom 73419 not found or not owned by user 37e35b24-044c-4c94-8dfb-a4912946443d
[2026-01-28 13:44:32] info: [GET] /api/grooms/73419/profile - 404
[2026-01-28 13:44:32] info: [GET] /api/grooms/73420/profile
[2026-01-28 13:44:32] warn: [MemoryMonitoring] Memory threshold exceeded: 1654MB
[2026-01-28 13:44:32] info: [auth:rhvktm] Starting auth for GET /grooms/73420/profile
[2026-01-28 13:44:32] info: [auth:rhvktm] Token from cookie: false
[2026-01-28 13:44:32] info: [auth:rhvktm] Token from header: true
[2026-01-28 13:44:32] info: [auth:rhvktm] Authenticated user 3379fe2d-2d7f-4c52-b653-ed05492ee3de
[2026-01-28 13:44:32] info: [ownership] Validated ownership: user 3379fe2d-2d7f-4c52-b653-ed05492ee3de owns groom 73420
[2026-01-28 13:44:32] info: [groomController.getGroomProfile] Retrieved profile for groom 73420
[2026-01-28 13:44:32] info: [GET] /api/grooms/73420/profile - 200
[2026-01-28 13:44:32] info: [GET] /api/horses/abc
[2026-01-28 13:44:32] warn: [MemoryMonitoring] Memory threshold exceeded: 1659MB
[2026-01-28 13:44:32] info: [auth:d6dng9] Starting auth for GET /horses/abc
[2026-01-28 13:44:32] info: [auth:d6dng9] Token from cookie: false
[2026-01-28 13:44:32] info: [auth:d6dng9] Token from header: true
[2026-01-28 13:44:32] info: [auth:d6dng9] Authenticated user af15cb2f-9cd3-43a5-85cd-6449da7f2def
[2026-01-28 13:44:32] info: [GET] /api/horses/abc - 400
[2026-01-28 13:44:32] info: [GET] /api/horses/999999
[2026-01-28 13:44:32] warn: [MemoryMonitoring] Memory threshold exceeded: 1649MB
[2026-01-28 13:44:32] info: [auth:zj1fmh] Starting auth for GET /horses/999999
[2026-01-28 13:44:32] info: [auth:zj1fmh] Token from cookie: false
[2026-01-28 13:44:32] info: [auth:zj1fmh] Token from header: true
[2026-01-28 13:44:32] info: [auth:zj1fmh] Authenticated user 5d254e1e-267e-47e6-831e-f561552db1f9
[2026-01-28 13:44:32] warn: [ownership] horse 999999 not found or not owned by user 5d254e1e-267e-47e6-831e-f561552db1f9
[2026-01-28 13:44:32] info: [GET] /api/horses/999999 - 404
[2026-01-28 13:44:32] info: [GET] /api/horses/146860
[2026-01-28 13:44:32] warn: [MemoryMonitoring] Memory threshold exceeded: 1651MB
[2026-01-28 13:44:32] info: [auth:rqiyxs] Starting auth for GET /horses/146860
[2026-01-28 13:44:32] info: [auth:rqiyxs] Token from cookie: false
[2026-01-28 13:44:32] info: [auth:rqiyxs] Token from header: true
[2026-01-28 13:44:32] info: [auth:rqiyxs] Authenticated user 5d254e1e-267e-47e6-831e-f561552db1f9
[2026-01-28 13:44:32] warn: [ownership] horse 146860 not found or not owned by user 5d254e1e-267e-47e6-831e-f561552db1f9
[2026-01-28 13:44:32] info: [GET] /api/horses/146860 - 404
PASS __tests__/integration/security/ownership-violations.test.mjs
  Ownership Violation Attempts Integration Tests
    Cross-user horse access
      √ denies access to an unowned horse (166 ms)
      √ allows owners to fetch their own horse (54 ms)
      √ blocks cross-user updates and preserves data integrity (62 ms)
      √ allows owners to update their horse with a valid payload (59 ms)
      √ blocks cross-user deletes and allows owner deletes (81 ms)
    Groom ownership
      √ denies access to an unowned groom profile (48 ms)
      √ allows owners to view their groom profile (51 ms)
    Parameter validation and enumeration safety
      √ rejects invalid horse identifiers (51 ms)
      √ returns the same 404 for missing and unowned horses (73 ms)

[2026-01-28 13:44:32] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:44:32] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:44:32] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:44:32] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:44:33] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:33] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:33] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:33] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:33] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:33] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:33] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:33] warn: [TokenRotation] Token reuse detected
[2026-01-28 13:44:34] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:34] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:34] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:34] warn: [TokenRotation] Token reuse detected
[2026-01-28 13:44:34] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:34] info: [TokenRotation] Token rotation successful
[2026-01-28 13:44:34] warn: [TokenRotation] Token reuse detected during rotation
[2026-01-28 13:44:34] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:34] warn: [TokenRotation] Token reuse detected
[2026-01-28 13:44:34] warn: [TokenRotation] Token family invalidated
[2026-01-28 13:44:34] warn: [TokenRotation] Token reuse detected during rotation
[2026-01-28 13:44:34] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:34] info: [TokenRotation] Token rotation successful
[2026-01-28 13:44:34] warn: [TokenRotation] Token reuse detected
[2026-01-28 13:44:34] warn: [TokenRotation] Token reuse detected
[2026-01-28 13:44:34] warn: [TokenRotation] Token family invalidated
[2026-01-28 13:44:34] warn: [TokenRotation] Token reuse detected during rotation
[2026-01-28 13:44:34] warn: [TokenRotation] Token family invalidated
[2026-01-28 13:44:34] warn: [TokenRotation] Token reuse detected during rotation
[2026-01-28 13:44:34] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:34] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:34] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:34] warn: [TokenRotation] Token family invalidated
[2026-01-28 13:44:34] warn: [TokenRotation] Token family invalidated
[2026-01-28 13:44:34] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:34] warn: [TokenRotation] Token family invalidated
[2026-01-28 13:44:34] info: [TokenRotation] Created new token pair
[2026-01-28 13:44:34] info: [TokenRotation] Token cleanup completed
[2026-01-28 13:44:34] info: [TokenRotation] Token cleanup completed
[2026-01-28 13:44:35] info: [TokenRotation] Token cleanup completed
[2026-01-28 13:44:35] warn: [TokenRotation] Skipping refresh token persistence in test env
[2026-01-28 13:44:35] info: [TokenRotation] Created new token pair
PASS __tests__/unit/token-rotation.test.mjs
  Token Rotation Service - Unit Tests
    generateTokenFamily()
      √ should_create_unique_family_id (147 ms)
      √ should_include_timestamp_in_family_id (81 ms)
    createTokenPair()
      √ should_create_access_and_refresh_token_pair (87 ms)
      √ should_create_refresh_token_with_family_id (82 ms)
      √ should_store_refresh_token_in_database (87 ms)
      √ should_set_correct_expiration_times (86 ms)
    validateRefreshToken()
      √ should_validate_legitimate_refresh_token (88 ms)
      √ should_reject_expired_refresh_token (97 ms)
      √ should_reject_token_with_invalid_signature (77 ms)
      √ should_reject_inactive_token_from_database (85 ms)
      √ should_reject_malformed_token (75 ms)
    detectTokenReuse()
      √ should_detect_reuse_of_invalidated_token (89 ms)
      √ should_not_flag_first_use_as_reuse (84 ms)
      √ should_identify_family_for_invalidation (92 ms)
    rotateRefreshToken()
      √ should_create_new_token_and_invalidate_old (94 ms)
      √ should_fail_rotation_for_invalid_token (76 ms)
      √ should_fail_rotation_if_reuse_detected (92 ms)
      √ should_handle_concurrent_rotation_attempts (152 ms)
    invalidateTokenFamily()
      √ should_invalidate_all_tokens_in_family (104 ms)
      √ should_handle_family_that_does_not_exist (78 ms)
      √ should_log_invalidation_for_security_audit (85 ms)
    cleanupExpiredTokens()
      √ should_remove_expired_tokens_from_database (86 ms)
      √ should_remove_old_invalidated_tokens (77 ms)
      √ should_return_cleanup_statistics (83 ms)
    Error Handling and Edge Cases
      √ should_handle_database_connection_errors (78 ms)
      √ should_handle_jwt_verification_errors_gracefully (73 ms)
      √ should_validate_token_family_id_format (75 ms)

[2026-01-28 13:44:35] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:44:35] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:44:35] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:44:35] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:44:36] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:36] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:36] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:36] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:36] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:36] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:36] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:36] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:36] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:36] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:44:36] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 13:44:36] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:36] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:44:36] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:44:36] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:44:36] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:44:36] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:44:36] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 13:44:36] info: [GET] /api/competition/disciplines
[2026-01-28 13:44:36] warn: [MemoryMonitoring] Memory threshold exceeded: 1715MB
[2026-01-28 13:44:36] info: [auth:f1phao] Starting auth for GET /competition/disciplines
[2026-01-28 13:44:36] info: [auth:f1phao] Token from cookie: false
[2026-01-28 13:44:36] info: [auth:f1phao] Token from header: true
[2026-01-28 13:44:36] info: [auth:f1phao] Authenticated user 539d45f0-27d5-4929-90ae-ac7ec3cf5735
[2026-01-28 13:44:36] info: [GET] /api/competition/disciplines - 200
[2026-01-28 13:44:36] info: [GET] /api/competition/eligibility/146861/Racing
[2026-01-28 13:44:36] warn: [MemoryMonitoring] Memory threshold exceeded: 1718MB
[2026-01-28 13:44:36] info: [auth:um3rxh] Starting auth for GET /competition/eligibility/146861/Racing
[2026-01-28 13:44:36] info: [auth:um3rxh] Token from cookie: false
[2026-01-28 13:44:36] info: [auth:um3rxh] Token from header: true
[2026-01-28 13:44:36] info: [auth:um3rxh] Authenticated user 539d45f0-27d5-4929-90ae-ac7ec3cf5735
[2026-01-28 13:44:36] info: [auth:z250b] Starting auth for GET /eligibility/146861/Racing
[2026-01-28 13:44:36] info: [auth:z250b] Token from cookie: false
[2026-01-28 13:44:36] info: [auth:z250b] Token from header: true
[2026-01-28 13:44:36] info: [auth:z250b] Authenticated user 539d45f0-27d5-4929-90ae-ac7ec3cf5735
[2026-01-28 13:44:36] info: [ownership] Validated ownership: user 539d45f0-27d5-4929-90ae-ac7ec3cf5735 owns horse 146861
[2026-01-28 13:44:36] info: [competitionRoutes.GET /eligibility] Checking eligibility for horse 146861 in Racing
[2026-01-28 13:44:36] info: [competitionRoutes.GET /eligibility] Horse 146861 eligibility checked for Racing
[2026-01-28 13:44:36] info: [GET] /api/competition/eligibility/146861/Racing - 200
[2026-01-28 13:44:36] info: [GET] /api/competition/eligibility/146861/Gaited
[2026-01-28 13:44:36] warn: [MemoryMonitoring] Memory threshold exceeded: 1722MB
[2026-01-28 13:44:36] info: [auth:3z8vu] Starting auth for GET /competition/eligibility/146861/Gaited
[2026-01-28 13:44:36] info: [auth:3z8vu] Token from cookie: false
[2026-01-28 13:44:36] info: [auth:3z8vu] Token from header: true
[2026-01-28 13:44:36] info: [auth:3z8vu] Authenticated user 539d45f0-27d5-4929-90ae-ac7ec3cf5735
[2026-01-28 13:44:36] info: [auth:bloxwb] Starting auth for GET /eligibility/146861/Gaited
[2026-01-28 13:44:36] info: [auth:bloxwb] Token from cookie: false
[2026-01-28 13:44:36] info: [auth:bloxwb] Token from header: true
[2026-01-28 13:44:36] info: [auth:bloxwb] Authenticated user 539d45f0-27d5-4929-90ae-ac7ec3cf5735
[2026-01-28 13:44:36] info: [ownership] Validated ownership: user 539d45f0-27d5-4929-90ae-ac7ec3cf5735 owns horse 146861
[2026-01-28 13:44:36] info: [competitionRoutes.GET /eligibility] Checking eligibility for horse 146861 in Gaited
[2026-01-28 13:44:36] info: [competitionRoutes.GET /eligibility] Horse 146861 eligibility checked for Gaited
[2026-01-28 13:44:36] info: [GET] /api/competition/eligibility/146861/Gaited - 200
[2026-01-28 13:44:36] info: [GET] /api/competition/eligibility/146861/InvalidDiscipline
[2026-01-28 13:44:36] warn: [MemoryMonitoring] Memory threshold exceeded: 1726MB
[2026-01-28 13:44:36] info: [auth:tiqcha] Starting auth for GET /competition/eligibility/146861/InvalidDiscipline
[2026-01-28 13:44:36] info: [auth:tiqcha] Token from cookie: false
[2026-01-28 13:44:36] info: [auth:tiqcha] Token from header: true
[2026-01-28 13:44:36] info: [auth:tiqcha] Authenticated user 539d45f0-27d5-4929-90ae-ac7ec3cf5735
[2026-01-28 13:44:36] info: [auth:l1p9pv] Starting auth for GET /eligibility/146861/InvalidDiscipline
[2026-01-28 13:44:36] info: [auth:l1p9pv] Token from cookie: false
[2026-01-28 13:44:36] info: [auth:l1p9pv] Token from header: true
[2026-01-28 13:44:36] info: [auth:l1p9pv] Authenticated user 539d45f0-27d5-4929-90ae-ac7ec3cf5735
[2026-01-28 13:44:36] info: [ownership] Validated ownership: user 539d45f0-27d5-4929-90ae-ac7ec3cf5735 owns horse 146861
[2026-01-28 13:44:36] info: [competitionRoutes.GET /eligibility] Checking eligibility for horse 146861 in InvalidDiscipline
[2026-01-28 13:44:36] info: [GET] /api/competition/eligibility/146861/InvalidDiscipline - 400
[2026-01-28 13:44:36] info: [GET] /api/competition/eligibility/146861/Racing
[2026-01-28 13:44:36] warn: [MemoryMonitoring] Memory threshold exceeded: 1716MB
[2026-01-28 13:44:36] info: [auth:lxkyn] Starting auth for GET /competition/eligibility/146861/Racing
[2026-01-28 13:44:36] info: [auth:lxkyn] Token from cookie: false
[2026-01-28 13:44:36] warn: [auth:lxkyn] Access token is required for GET /competition/eligibility/146861/Racing from ::ffff:127.0.0.1
[2026-01-28 13:44:36] info: [GET] /api/competition/eligibility/146861/Racing - 401
[2026-01-28 13:44:37] info: [GET] /api/competition/eligibility/146862/Racing
[2026-01-28 13:44:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1719MB
[2026-01-28 13:44:37] info: [auth:u90bun] Starting auth for GET /competition/eligibility/146862/Racing
[2026-01-28 13:44:37] info: [auth:u90bun] Token from cookie: false
[2026-01-28 13:44:37] info: [auth:u90bun] Token from header: true
[2026-01-28 13:44:37] info: [auth:u90bun] Authenticated user 539d45f0-27d5-4929-90ae-ac7ec3cf5735
[2026-01-28 13:44:37] info: [auth:m34uf3] Starting auth for GET /eligibility/146862/Racing
[2026-01-28 13:44:37] info: [auth:m34uf3] Token from cookie: false
[2026-01-28 13:44:37] info: [auth:m34uf3] Token from header: true
[2026-01-28 13:44:37] info: [auth:m34uf3] Authenticated user 539d45f0-27d5-4929-90ae-ac7ec3cf5735
[2026-01-28 13:44:37] warn: [ownership] horse 146862 not found or not owned by user 539d45f0-27d5-4929-90ae-ac7ec3cf5735
[2026-01-28 13:44:37] info: [GET] /api/competition/eligibility/146862/Racing - 404
[2026-01-28 13:44:37] info: [POST] /api/competition/enter
[2026-01-28 13:44:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1723MB
[2026-01-28 13:44:37] info: [auth:bxgni] Starting auth for POST /competition/enter
[2026-01-28 13:44:37] info: [auth:bxgni] Token from cookie: false
[2026-01-28 13:44:37] info: [auth:bxgni] Token from header: true
[2026-01-28 13:44:37] info: [auth:bxgni] Authenticated user 539d45f0-27d5-4929-90ae-ac7ec3cf5735
[2026-01-28 13:44:37] info: [auth:dp6w2h] Starting auth for POST /enter
[2026-01-28 13:44:37] info: [auth:dp6w2h] Token from cookie: false
[2026-01-28 13:44:37] info: [auth:dp6w2h] Token from header: true
[2026-01-28 13:44:37] info: [auth:dp6w2h] Authenticated user 539d45f0-27d5-4929-90ae-ac7ec3cf5735
[2026-01-28 13:44:37] info: [competitionRoutes.POST /enter] User 539d45f0-27d5-4929-90ae-ac7ec3cf5735 entering horse 146861 in show 8266
[2026-01-28 13:44:37] info: [ownership] Found owned horse 146861 for user 539d45f0-27d5-4929-90ae-ac7ec3cf5735
[2026-01-28 13:44:37] info: [competitionRoutes.POST /enter] Successfully entered horse 146861 in show 8266
[2026-01-28 13:44:37] info: [POST] /api/competition/enter - 201
[2026-01-28 13:44:37] info: [POST] /api/competition/enter
[2026-01-28 13:44:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1729MB
[2026-01-28 13:44:37] info: [auth:5diesd] Starting auth for POST /competition/enter
[2026-01-28 13:44:37] info: [auth:5diesd] Token from cookie: false
[2026-01-28 13:44:37] info: [auth:5diesd] Token from header: true
[2026-01-28 13:44:37] info: [auth:5diesd] Authenticated user 539d45f0-27d5-4929-90ae-ac7ec3cf5735
[2026-01-28 13:44:37] info: [auth:tdg3qd] Starting auth for POST /enter
[2026-01-28 13:44:37] info: [auth:tdg3qd] Token from cookie: false
[2026-01-28 13:44:37] info: [auth:tdg3qd] Token from header: true
[2026-01-28 13:44:37] info: [auth:tdg3qd] Authenticated user 539d45f0-27d5-4929-90ae-ac7ec3cf5735
[2026-01-28 13:44:37] info: [competitionRoutes.POST /enter] User 539d45f0-27d5-4929-90ae-ac7ec3cf5735 entering horse 146861 in show 8266
[2026-01-28 13:44:37] info: [ownership] Found owned horse 146861 for user 539d45f0-27d5-4929-90ae-ac7ec3cf5735
[2026-01-28 13:44:37] info: [POST] /api/competition/enter - 400
[2026-01-28 13:44:37] info: [POST] /api/competition/enter
[2026-01-28 13:44:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1719MB
[2026-01-28 13:44:37] info: [auth:83x57f] Starting auth for POST /competition/enter
[2026-01-28 13:44:37] info: [auth:83x57f] Token from cookie: false
[2026-01-28 13:44:37] info: [auth:83x57f] Token from header: true
[2026-01-28 13:44:37] info: [auth:83x57f] Authenticated user 539d45f0-27d5-4929-90ae-ac7ec3cf5735
[2026-01-28 13:44:37] info: [auth:12w2t9] Starting auth for POST /enter
[2026-01-28 13:44:37] info: [auth:12w2t9] Token from cookie: false
[2026-01-28 13:44:37] info: [auth:12w2t9] Token from header: true
[2026-01-28 13:44:37] info: [auth:12w2t9] Authenticated user 539d45f0-27d5-4929-90ae-ac7ec3cf5735
[2026-01-28 13:44:37] warn: [competitionRoutes.POST /enter] Validation errors: [{"type":"field","value":"invalid","msg":"Horse ID must be a positive integer","path":"horseId","location":"body"}]
[2026-01-28 13:44:37] info: [POST] /api/competition/enter - 400
[2026-01-28 13:44:37] info: [POST] /api/competition/enter
[2026-01-28 13:44:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1722MB
[2026-01-28 13:44:37] info: [auth:x37g5l] Starting auth for POST /competition/enter
[2026-01-28 13:44:37] info: [auth:x37g5l] Token from cookie: false
[2026-01-28 13:44:37] warn: [auth:x37g5l] Access token is required for POST /competition/enter from ::ffff:127.0.0.1
[2026-01-28 13:44:37] info: [POST] /api/competition/enter - 401
[2026-01-28 13:44:37] info: [POST] /api/competition/execute
[2026-01-28 13:44:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1722MB
[2026-01-28 13:44:37] info: [auth:uv836h] Starting auth for POST /competition/execute
[2026-01-28 13:44:37] info: [auth:uv836h] Token from cookie: false
[2026-01-28 13:44:37] info: [auth:uv836h] Token from header: true
[2026-01-28 13:44:37] info: [auth:uv836h] Authenticated user 539d45f0-27d5-4929-90ae-ac7ec3cf5735
[2026-01-28 13:44:37] info: [auth:5gpoc] Starting auth for POST /execute
[2026-01-28 13:44:37] info: [auth:5gpoc] Token from cookie: false
[2026-01-28 13:44:37] info: [auth:5gpoc] Token from header: true
[2026-01-28 13:44:37] info: [auth:5gpoc] Authenticated user 539d45f0-27d5-4929-90ae-ac7ec3cf5735
[2026-01-28 13:44:37] info: [competitionRoutes.POST /execute] User 539d45f0-27d5-4929-90ae-ac7ec3cf5735 executing competition for show 8266
[2026-01-28 13:44:37] info: [competitionRoutes.POST /execute] Executing competition with 1 entries
[2026-01-28 13:44:37] info: [enhancedCompetitionSimulation] Executing competition: API Test Racing Show_1769625876817_8580_73184 (Racing)
[2026-01-28 13:44:37] info: [calculateCompetitionScore] Horse API Test Horse: Base score for Racing: 205
[2026-01-28 13:44:37] info: [calculateCompetitionScore] Horse API Test Horse: Luck modifier: -4.1%, adjustment: -8.4
[2026-01-28 13:44:37] info: [calculateCompetitionScore] Horse API Test Horse: Final score: 197 (base: 205, trait: +0, luck: -8.4)
[2026-01-28 13:44:37] info: [enhancedCompetitionSimulation] Horse API Test Horse (ID: 146861) scored 197 in Racing
[2026-01-28 13:44:37] info: [resultModel.saveResult] Successfully updated placeholder result for horse 146861 in show 8266 with score 197
[2026-01-28 13:44:37] info: [horseXpModel.addXpToHorse] Added 30 XP to horse API Test Horse (ID: 146861). New XP: 30, Stat points gained: 0, Available: 0
[2026-01-28 13:44:37] info: [enhancedCompetitionSimulation] Awarded 30 Horse XP to API Test Horse for 1st place
[2026-01-28 13:44:37] info: [enhancedCompetitionSimulation] Competition completed. 1 entries processed.
[2026-01-28 13:44:37] info: [competitionRoutes.POST /execute] Competition executed successfully for show 8266
[2026-01-28 13:44:37] info: [POST] /api/competition/execute - 200
[2026-01-28 13:44:37] info: [POST] /api/competition/execute
[2026-01-28 13:44:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1722MB
[2026-01-28 13:44:37] info: [auth:fzt0lz] Starting auth for POST /competition/execute
[2026-01-28 13:44:37] info: [auth:fzt0lz] Token from cookie: false
[2026-01-28 13:44:37] info: [auth:fzt0lz] Token from header: true
[2026-01-28 13:44:37] info: [auth:fzt0lz] Authenticated user ca8cc4cc-5560-4e3c-9af2-d4c8c15090a0
[2026-01-28 13:44:37] info: [auth:apw0j] Starting auth for POST /execute
[2026-01-28 13:44:37] info: [auth:apw0j] Token from cookie: false
[2026-01-28 13:44:37] info: [auth:apw0j] Token from header: true
[2026-01-28 13:44:37] info: [auth:apw0j] Authenticated user ca8cc4cc-5560-4e3c-9af2-d4c8c15090a0
[2026-01-28 13:44:37] info: [competitionRoutes.POST /execute] User ca8cc4cc-5560-4e3c-9af2-d4c8c15090a0 executing competition for show 8266
[2026-01-28 13:44:37] info: [POST] /api/competition/execute - 403
[2026-01-28 13:44:37] info: [POST] /api/competition/execute
[2026-01-28 13:44:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1725MB
[2026-01-28 13:44:37] info: [auth:icasa] Starting auth for POST /competition/execute
[2026-01-28 13:44:37] info: [auth:icasa] Token from cookie: false
[2026-01-28 13:44:37] info: [auth:icasa] Token from header: true
[2026-01-28 13:44:37] info: [auth:icasa] Authenticated user 539d45f0-27d5-4929-90ae-ac7ec3cf5735
[2026-01-28 13:44:37] info: [auth:in4v45] Starting auth for POST /execute
[2026-01-28 13:44:37] info: [auth:in4v45] Token from cookie: false
[2026-01-28 13:44:37] info: [auth:in4v45] Token from header: true
[2026-01-28 13:44:37] info: [auth:in4v45] Authenticated user 539d45f0-27d5-4929-90ae-ac7ec3cf5735
[2026-01-28 13:44:37] info: [competitionRoutes.POST /execute] User 539d45f0-27d5-4929-90ae-ac7ec3cf5735 executing competition for show 99999
[2026-01-28 13:44:37] info: [POST] /api/competition/execute - 404
[2026-01-28 13:44:37] info: [GET] /api/leaderboards/competition?metric=wins&limit=10
[2026-01-28 13:44:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1728MB
[2026-01-28 13:44:37] info: [auth:bsbv4n] Starting auth for GET /leaderboards/competition
[2026-01-28 13:44:37] info: [auth:bsbv4n] Token from cookie: false
[2026-01-28 13:44:37] info: [auth:bsbv4n] Token from header: true
[2026-01-28 13:44:37] info: [auth:bsbv4n] Authenticated user 539d45f0-27d5-4929-90ae-ac7ec3cf5735
[2026-01-28 13:44:37] info: [auth:d4t6t] Starting auth for GET /competition
[2026-01-28 13:44:37] info: [auth:d4t6t] Token from cookie: false
[2026-01-28 13:44:37] info: [auth:d4t6t] Token from header: true
[2026-01-28 13:44:37] info: [auth:d4t6t] Authenticated user 539d45f0-27d5-4929-90ae-ac7ec3cf5735
[2026-01-28 13:44:37] info: [leaderboardRoutes.GET /competition] Getting competition leaderboard: discipline=undefined, period=all, metric=wins
[2026-01-28 13:44:37] info: [leaderboardRoutes.GET /competition] Retrieved 0 leaderboard entries
[2026-01-28 13:44:37] info: [GET] /api/leaderboards/competition?metric=wins&limit=10 - 200
[2026-01-28 13:44:37] info: [GET] /api/leaderboards/competition?metric=earnings&discipline=Racing
[2026-01-28 13:44:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1721MB
[2026-01-28 13:44:37] info: [auth:y7wzo9] Starting auth for GET /leaderboards/competition
[2026-01-28 13:44:37] info: [auth:y7wzo9] Token from cookie: false
[2026-01-28 13:44:37] info: [auth:y7wzo9] Token from header: true
[2026-01-28 13:44:37] info: [auth:y7wzo9] Authenticated user 539d45f0-27d5-4929-90ae-ac7ec3cf5735
[2026-01-28 13:44:37] info: [auth:8q7fpj] Starting auth for GET /competition
[2026-01-28 13:44:37] info: [auth:8q7fpj] Token from cookie: false
[2026-01-28 13:44:37] info: [auth:8q7fpj] Token from header: true
[2026-01-28 13:44:37] info: [auth:8q7fpj] Authenticated user 539d45f0-27d5-4929-90ae-ac7ec3cf5735
[2026-01-28 13:44:37] info: [leaderboardRoutes.GET /competition] Getting competition leaderboard: discipline=Racing, period=all, metric=earnings
[2026-01-28 13:44:37] info: [leaderboardRoutes.GET /competition] Retrieved 1 leaderboard entries
[2026-01-28 13:44:37] info: [GET] /api/leaderboards/competition?metric=earnings&discipline=Racing - 200
[2026-01-28 13:44:37] info: [GET] /api/leaderboards/competition?metric=invalid
[2026-01-28 13:44:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1729MB
[2026-01-28 13:44:37] info: [auth:v1u35] Starting auth for GET /leaderboards/competition
[2026-01-28 13:44:37] info: [auth:v1u35] Token from cookie: false
[2026-01-28 13:44:37] info: [auth:v1u35] Token from header: true
[2026-01-28 13:44:37] info: [auth:v1u35] Authenticated user 539d45f0-27d5-4929-90ae-ac7ec3cf5735
[2026-01-28 13:44:37] info: [auth:ml3cgif] Starting auth for GET /competition
[2026-01-28 13:44:37] info: [auth:ml3cgif] Token from cookie: false
[2026-01-28 13:44:37] info: [auth:ml3cgif] Token from header: true
[2026-01-28 13:44:37] info: [auth:ml3cgif] Authenticated user 539d45f0-27d5-4929-90ae-ac7ec3cf5735
[2026-01-28 13:44:37] warn: [leaderboardRoutes.GET /competition] Validation errors: [{"type":"field","value":"invalid","msg":"Metric must be one of: wins, earnings, placements, average_placement","path":"metric","location":"query"}]
[2026-01-28 13:44:37] info: [GET] /api/leaderboards/competition?metric=invalid - 400
[2026-01-28 13:44:37] info: [GET] /api/leaderboards/competition
[2026-01-28 13:44:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1721MB
[2026-01-28 13:44:37] info: [auth:rf77di] Starting auth for GET /leaderboards/competition
[2026-01-28 13:44:37] info: [auth:rf77di] Token from cookie: false
[2026-01-28 13:44:38] warn: [auth:rf77di] Access token is required for GET /leaderboards/competition from ::ffff:127.0.0.1
[2026-01-28 13:44:38] info: [GET] /api/leaderboards/competition - 401
PASS tests/integration/competitionAPIEndpoints.integration.test.mjs
  🚀 INTEGRATION: Competition API Endpoints
    🎯 GET /api/competition/disciplines
      √ should return all available disciplines (47 ms)
    🔍 GET /api/competition/eligibility/:horseId/:discipline
      √ should check horse eligibility for Racing discipline (39 ms)
      √ should check horse eligibility for Gaited discipline (33 ms)
      √ should reject invalid discipline (33 ms)
      √ should reject unauthorized access (22 ms)
      √ should reject access to horse not owned by user (312 ms)
    📝 POST /api/competition/enter
      √ should successfully enter horse in competition (57 ms)
      √ should reject duplicate entry (36 ms)
      √ should reject invalid input (33 ms)
      √ should reject unauthorized access (23 ms)
    🏁 POST /api/competition/execute
      √ should successfully execute competition (67 ms)
      √ should reject execution by non-host user (306 ms)
      √ should reject invalid show ID (33 ms)
    🏆 GET /api/leaderboard/competition
      √ should get competition leaderboard by wins (44 ms)
      √ should get competition leaderboard by earnings (44 ms)
      √ should reject invalid metric (32 ms)
      √ should reject unauthorized access (23 ms)

[2026-01-28 13:44:38] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:44:38] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:44:38] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:44:38] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:44:39] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:39] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:39] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:39] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:39] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:39] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:39] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:39] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:39] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:39] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:44:39] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 13:44:39] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:39] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:44:39] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:44:39] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:44:39] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:44:39] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:44:39] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 13:44:39] info: [GET] /api/horses/1'%20OR%20'1'='1
[2026-01-28 13:44:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1778MB
[2026-01-28 13:44:39] info: [auth:zd17bf] Starting auth for GET /horses/1'%20OR%20'1'='1
[2026-01-28 13:44:39] info: [auth:zd17bf] Token from cookie: false
[2026-01-28 13:44:39] info: [auth:zd17bf] Token from header: true
[2026-01-28 13:44:39] info: [auth:zd17bf] Authenticated user 0b93d0e6-e242-4407-bb2b-1d3bb4b2bb2f
[2026-01-28 13:44:39] info: [GET] /api/horses/1'%20OR%20'1'='1 - 400
[2026-01-28 13:44:39] info: [GET] /api/horses/1;%20DROP%20TABLE%20horses;%20--
[2026-01-28 13:44:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1781MB
[2026-01-28 13:44:39] info: [auth:wui8s] Starting auth for GET /horses/1;%20DROP%20TABLE%20horses;%20--
[2026-01-28 13:44:39] info: [auth:wui8s] Token from cookie: false
[2026-01-28 13:44:39] info: [auth:wui8s] Token from header: true
[2026-01-28 13:44:39] info: [auth:wui8s] Authenticated user 4524aa3a-eb89-475f-b6b8-9401c3de7a3a
[2026-01-28 13:44:39] info: [GET] /api/horses/1;%20DROP%20TABLE%20horses;%20-- - 400
[2026-01-28 13:44:39] info: [GET] /api/horses/1%20UNION%20SELECT%20*%20FROM%20users
[2026-01-28 13:44:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1782MB
[2026-01-28 13:44:39] info: [auth:jpquuf] Starting auth for GET /horses/1%20UNION%20SELECT%20*%20FROM%20users
[2026-01-28 13:44:39] info: [auth:jpquuf] Token from cookie: false
[2026-01-28 13:44:39] info: [auth:jpquuf] Token from header: true
[2026-01-28 13:44:39] info: [auth:jpquuf] Authenticated user 32dea37e-15ac-4e75-9f5e-c501126d4806
[2026-01-28 13:44:39] info: [GET] /api/horses/1%20UNION%20SELECT%20*%20FROM%20users - 400
[2026-01-28 13:44:39] info: [GET] /api/horses/1%20AND%20(SELECT%20COUNT(*)%20FROM%20users)%20%3E%200
[2026-01-28 13:44:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1783MB
[2026-01-28 13:44:39] info: [auth:dlokc] Starting auth for GET /horses/1%20AND%20(SELECT%20COUNT(*)%20FROM%20users)%20%3E%200
[2026-01-28 13:44:39] info: [auth:dlokc] Token from cookie: false
[2026-01-28 13:44:39] info: [auth:dlokc] Token from header: true
[2026-01-28 13:44:39] info: [auth:dlokc] Authenticated user d233b2d2-b91c-4bca-abe7-ab032c10e797
[2026-01-28 13:44:39] info: [GET] /api/horses/1%20AND%20(SELECT%20COUNT(*)%20FROM%20users)%20%3E%200 - 400
[2026-01-28 13:44:39] info: [GET] /api/horses/0x31
[2026-01-28 13:44:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1783MB
[2026-01-28 13:44:39] info: [auth:rpvstl] Starting auth for GET /horses/0x31
[2026-01-28 13:44:39] info: [auth:rpvstl] Token from cookie: false
[2026-01-28 13:44:39] info: [auth:rpvstl] Token from header: true
[2026-01-28 13:44:39] info: [auth:rpvstl] Authenticated user 59e8edf2-035f-4c09-ba93-29673f7c5aab
[2026-01-28 13:44:39] info: [GET] /api/horses/0x31 - 400
[2026-01-28 13:44:39] info: [GET] /api/horses/146868'%20AND%201=1%20AND%20'1'='1
[2026-01-28 13:44:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1784MB
[2026-01-28 13:44:39] info: [auth:3m8n2o] Starting auth for GET /horses/146868'%20AND%201=1%20AND%20'1'='1
[2026-01-28 13:44:39] info: [auth:3m8n2o] Token from cookie: false
[2026-01-28 13:44:39] info: [auth:3m8n2o] Token from header: true
[2026-01-28 13:44:39] info: [auth:3m8n2o] Authenticated user 9112e0b1-e093-4df7-b340-9e87abd7bef1
[2026-01-28 13:44:39] info: [GET] /api/horses/146868'%20AND%201=1%20AND%20'1'='1 - 400
[2026-01-28 13:44:39] info: [GET] /api/horses/1;%20WAITFOR%20DELAY%20'00:00:05';%20--
[2026-01-28 13:44:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1785MB
[2026-01-28 13:44:39] info: [auth:23ltv] Starting auth for GET /horses/1;%20WAITFOR%20DELAY%20'00:00:05';%20--
[2026-01-28 13:44:39] info: [auth:23ltv] Token from cookie: false
[2026-01-28 13:44:39] info: [auth:23ltv] Token from header: true
[2026-01-28 13:44:39] info: [auth:23ltv] Authenticated user fd4b9f89-f3ef-48f1-8f89-685b9162d38b
[2026-01-28 13:44:39] info: [GET] /api/horses/1;%20WAITFOR%20DELAY%20'00:00:05';%20-- - 400
[2026-01-28 13:44:39] info: [GET] /api/horses/1;%20SELECT%20pg_sleep(5);%20--
[2026-01-28 13:44:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1785MB
[2026-01-28 13:44:39] info: [auth:el2z8h] Starting auth for GET /horses/1;%20SELECT%20pg_sleep(5);%20--
[2026-01-28 13:44:39] info: [auth:el2z8h] Token from cookie: false
[2026-01-28 13:44:39] info: [auth:el2z8h] Token from header: true
[2026-01-28 13:44:39] info: [auth:el2z8h] Authenticated user 69ea2ff8-795f-42e2-b141-abe368843539
[2026-01-28 13:44:39] info: [GET] /api/horses/1;%20SELECT%20pg_sleep(5);%20-- - 400
[2026-01-28 13:44:39] info: [GET] /api/horses/1'%20AND%20(SELECT%201/0)
[2026-01-28 13:44:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1786MB
[2026-01-28 13:44:39] info: [auth:oosmfk] Starting auth for GET /horses/1'%20AND%20(SELECT%201/0)
[2026-01-28 13:44:39] info: [auth:oosmfk] Token from cookie: false
[2026-01-28 13:44:39] info: [auth:oosmfk] Token from header: true
[2026-01-28 13:44:39] info: [auth:oosmfk] Authenticated user a206457a-ea5c-43c0-8b9b-b3c861df4150
[2026-01-28 13:44:39] warn: 404 - Route not found: GET /api/horses/1'%20AND%20(SELECT%201/0) from ::ffff:127.0.0.1
[2026-01-28 13:44:39] info: [GET] /api/horses/1'%20AND%20(SELECT%201/0) - 404
[2026-01-28 13:44:39] info: [GET] /api/horses/1%20UNION%20SELECT%20id,email,password,NULL,NULL,NULL%20FROM%20users
[2026-01-28 13:44:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1789MB
[2026-01-28 13:44:39] info: [auth:zli9cb] Starting auth for GET /horses/1%20UNION%20SELECT%20id,email,password,NULL,NULL,NULL%20FROM%20users
[2026-01-28 13:44:39] info: [auth:zli9cb] Token from cookie: false
[2026-01-28 13:44:39] info: [auth:zli9cb] Token from header: true
[2026-01-28 13:44:39] info: [auth:zli9cb] Authenticated user 81d1dc9c-e08a-4aed-a422-782e439118bd
[2026-01-28 13:44:39] info: [GET] /api/horses/1%20UNION%20SELECT%20id,email,password,NULL,NULL,NULL%20FROM%20users - 400
[2026-01-28 13:44:39] info: [GET] /api/horses/1%20UNION%20ALL%20SELECT%20*%20FROM%20users%20WHERE%201=1
[2026-01-28 13:44:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1790MB
[2026-01-28 13:44:39] info: [auth:sskjos] Starting auth for GET /horses/1%20UNION%20ALL%20SELECT%20*%20FROM%20users%20WHERE%201=1
[2026-01-28 13:44:39] info: [auth:sskjos] Token from cookie: false
[2026-01-28 13:44:39] info: [auth:sskjos] Token from header: true
[2026-01-28 13:44:39] info: [auth:sskjos] Authenticated user eb80a05e-ab44-43d1-9433-32f1408ed2b2
[2026-01-28 13:44:39] info: [GET] /api/horses/1%20UNION%20ALL%20SELECT%20*%20FROM%20users%20WHERE%201=1 - 400
[2026-01-28 13:44:39] info: [GET] /api/horses/1%20ORDER%20BY%20100
[2026-01-28 13:44:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1790MB
[2026-01-28 13:44:39] info: [auth:smkuaf] Starting auth for GET /horses/1%20ORDER%20BY%20100
[2026-01-28 13:44:39] info: [auth:smkuaf] Token from cookie: false
[2026-01-28 13:44:39] info: [auth:smkuaf] Token from header: true
[2026-01-28 13:44:39] info: [auth:smkuaf] Authenticated user ffc3474b-e84c-438e-be9d-00b0bb0b0530
[2026-01-28 13:44:39] info: [GET] /api/horses/1%20ORDER%20BY%20100 - 400
[2026-01-28 13:44:39] info: [GET] /api/horses/1%20UNION%20SELECT%20NULL,NULL,NULL,NULL,NULL
[2026-01-28 13:44:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1791MB
[2026-01-28 13:44:39] info: [auth:rwu81] Starting auth for GET /horses/1%20UNION%20SELECT%20NULL,NULL,NULL,NULL,NULL
[2026-01-28 13:44:39] info: [auth:rwu81] Token from cookie: false
[2026-01-28 13:44:39] info: [auth:rwu81] Token from header: true
[2026-01-28 13:44:39] info: [auth:rwu81] Authenticated user 15f6e460-f1f1-4bbd-8973-09e6ecf65a6c
[2026-01-28 13:44:39] info: [GET] /api/horses/1%20UNION%20SELECT%20NULL,NULL,NULL,NULL,NULL - 400
[2026-01-28 13:44:39] info: [GET] /api/horses/1;%20DELETE%20FROM%20horses%20WHERE%20id%20%3E%200
[2026-01-28 13:44:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1791MB
[2026-01-28 13:44:39] info: [auth:jfdaj] Starting auth for GET /horses/1;%20DELETE%20FROM%20horses%20WHERE%20id%20%3E%200
[2026-01-28 13:44:39] info: [auth:jfdaj] Token from cookie: false
[2026-01-28 13:44:39] info: [auth:jfdaj] Token from header: true
[2026-01-28 13:44:39] info: [auth:jfdaj] Authenticated user 1a80b6ed-5735-4b2b-9055-dacfad34e63a
[2026-01-28 13:44:39] info: [GET] /api/horses/1;%20DELETE%20FROM%20horses%20WHERE%20id%20%3E%200 - 400
[2026-01-28 13:44:39] info: [GET] /api/horses/1;%20UPDATE%20users%20SET%20role='ADMIN'%20WHERE%20id=cfa24932-3ad8-4816-a95c-41b8124927ca
[2026-01-28 13:44:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1792MB
[2026-01-28 13:44:39] info: [auth:ldwz6g] Starting auth for GET /horses/1;%20UPDATE%20users%20SET%20role='ADMIN'%20WHERE%20id=cfa24932-3ad8-4816-a95c-41b8124927ca
[2026-01-28 13:44:39] info: [auth:ldwz6g] Token from cookie: false
[2026-01-28 13:44:39] info: [auth:ldwz6g] Token from header: true
[2026-01-28 13:44:39] info: [auth:ldwz6g] Authenticated user cfa24932-3ad8-4816-a95c-41b8124927ca
[2026-01-28 13:44:39] info: [GET] /api/horses/1;%20UPDATE%20users%20SET%20role='ADMIN'%20WHERE%20id=cfa24932-3ad8-4816-a95c-41b8124927ca - 400
[2026-01-28 13:44:39] info: [GET] /api/horses/1;%20INSERT%20INTO%20horses%20(name,%20userId)%20VALUES%20('Hacked',%201)
[2026-01-28 13:44:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1780MB
[2026-01-28 13:44:39] info: [auth:psk3ii] Starting auth for GET /horses/1;%20INSERT%20INTO%20horses%20(name,%20userId)%20VALUES%20('Hacked',%201)
[2026-01-28 13:44:39] info: [auth:psk3ii] Token from cookie: false
[2026-01-28 13:44:39] info: [auth:psk3ii] Token from header: true
[2026-01-28 13:44:39] info: [auth:psk3ii] Authenticated user 1ab15afc-8667-4bc5-bb42-0006582804fc
[2026-01-28 13:44:39] info: [GET] /api/horses/1;%20INSERT%20INTO%20horses%20(name,%20userId)%20VALUES%20('Hacked',%201) - 400
[2026-01-28 13:44:39] info: [GET] /api/horses?breed=Thoroughbred%27%20OR%20%271%27=%271
[2026-01-28 13:44:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1783MB
[2026-01-28 13:44:39] info: [auth:gd5mh7] Starting auth for GET /horses
[2026-01-28 13:44:39] info: [auth:gd5mh7] Token from cookie: false
[2026-01-28 13:44:39] info: [auth:gd5mh7] Token from header: true
[2026-01-28 13:44:39] info: [auth:gd5mh7] Authenticated user a28df89b-9b09-43f4-a845-22b6b9af1a70
[2026-01-28 13:44:39] info: [GET] /api/horses?breed=Thoroughbred%27%20OR%20%271%27=%271 - 400
[2026-01-28 13:44:39] info: [GET] /api/horses?name=Test%27;%20DROP%20TABLE%20horses;%20--
[2026-01-28 13:44:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1784MB
[2026-01-28 13:44:39] info: [auth:zazn7d] Starting auth for GET /horses
[2026-01-28 13:44:39] info: [auth:zazn7d] Token from cookie: false
[2026-01-28 13:44:39] info: [auth:zazn7d] Token from header: true
[2026-01-28 13:44:39] info: [auth:zazn7d] Authenticated user c493d7f2-ff01-496d-8c35-9af9ea45e9dd
[2026-01-28 13:44:39] info: [GET] /api/horses?name=Test%27;%20DROP%20TABLE%20horses;%20-- - 200
[2026-01-28 13:44:39] info: [GET] /api/horses?sort=name;%20UPDATE%20horses%20SET%20name=%27Hacked%27
[2026-01-28 13:44:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1788MB
[2026-01-28 13:44:39] info: [auth:0htgd] Starting auth for GET /horses
[2026-01-28 13:44:39] info: [auth:0htgd] Token from cookie: false
[2026-01-28 13:44:39] info: [auth:0htgd] Token from header: true
[2026-01-28 13:44:39] info: [auth:0htgd] Authenticated user 4fc62a31-5946-4a14-bdb2-bcf2a064a02a
[2026-01-28 13:44:39] info: [GET] /api/horses?sort=name;%20UPDATE%20horses%20SET%20name=%27Hacked%27 - 200
[2026-01-28 13:44:39] info: [GET] /api/horses?name=%%27%20OR%20%271%27=%271
[2026-01-28 13:44:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1790MB
[2026-01-28 13:44:39] info: [auth:qxwzjc] Starting auth for GET /horses
[2026-01-28 13:44:39] info: [auth:qxwzjc] Token from cookie: false
[2026-01-28 13:44:39] info: [auth:qxwzjc] Token from header: true
[2026-01-28 13:44:39] info: [auth:qxwzjc] Authenticated user 16d79ba8-afa7-4f77-8df7-9a0c488e9c4f
[2026-01-28 13:44:39] info: [GET] /api/horses?name=%%27%20OR%20%271%27=%271 - 200
[2026-01-28 13:44:40] info: [GET] /api/horses?ids=1,2,3)%20OR%201=1%20--
[2026-01-28 13:44:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1792MB
[2026-01-28 13:44:40] info: [auth:0mqrub] Starting auth for GET /horses
[2026-01-28 13:44:40] info: [auth:0mqrub] Token from cookie: false
[2026-01-28 13:44:40] info: [auth:0mqrub] Token from header: true
[2026-01-28 13:44:40] info: [auth:0mqrub] Authenticated user 68d1d4de-8ff1-421a-9e9f-dce95962bce9
[2026-01-28 13:44:40] info: [GET] /api/horses?ids=1,2,3)%20OR%201=1%20-- - 200
[2026-01-28 13:44:40] info: [GET] /api/horses?traits.strength=50%27;%20DROP%20TABLE%20horses;%20--
[2026-01-28 13:44:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1782MB
[2026-01-28 13:44:40] info: [auth:nv0fks] Starting auth for GET /horses
[2026-01-28 13:44:40] info: [auth:nv0fks] Token from cookie: false
[2026-01-28 13:44:40] info: [auth:nv0fks] Token from header: true
[2026-01-28 13:44:40] info: [auth:nv0fks] Authenticated user cc734540-eb01-45e3-9ae7-934bd75f242b
[2026-01-28 13:44:40] info: [GET] /api/horses?traits.strength=50%27;%20DROP%20TABLE%20horses;%20-- - 200
[2026-01-28 13:44:40] info: [GET] /api/horses?traits-%3E%3E%27color%27=%27Bay%27%20OR%20%271%27=%271
[2026-01-28 13:44:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1785MB
[2026-01-28 13:44:40] info: [auth:29kucn] Starting auth for GET /horses
[2026-01-28 13:44:40] info: [auth:29kucn] Token from cookie: false
[2026-01-28 13:44:40] info: [auth:29kucn] Token from header: true
[2026-01-28 13:44:40] info: [auth:29kucn] Authenticated user 4f122c24-bb13-4626-8254-a220d8de3a0d
[2026-01-28 13:44:40] info: [GET] /api/horses?traits-%3E%3E%27color%27=%27Bay%27%20OR%20%271%27=%271 - 400
[2026-01-28 13:44:40] info: [GET] /api/horses?achievements[0]=Win%27;%20DELETE%20FROM%20horses;%20--
[2026-01-28 13:44:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1786MB
[2026-01-28 13:44:40] info: [auth:93zx1] Starting auth for GET /horses
[2026-01-28 13:44:40] info: [auth:93zx1] Token from cookie: false
[2026-01-28 13:44:40] info: [auth:93zx1] Token from header: true
[2026-01-28 13:44:40] info: [auth:93zx1] Authenticated user 00a7ecf2-8211-4bed-8d9b-a0e90101572e
[2026-01-28 13:44:40] info: [GET] /api/horses?achievements[0]=Win%27;%20DELETE%20FROM%20horses;%20-- - 200
[2026-01-28 13:44:40] info: [POST] /api/horses
[2026-01-28 13:44:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1790MB
[2026-01-28 13:44:40] info: [auth:vgl2uf] Starting auth for POST /horses
[2026-01-28 13:44:40] info: [auth:vgl2uf] Token from cookie: false
[2026-01-28 13:44:40] info: [auth:vgl2uf] Token from header: true
[2026-01-28 13:44:40] info: [auth:vgl2uf] Authenticated user 3d2a0abd-04de-4080-9927-fb43d51f6303
[2026-01-28 13:44:40] info: [POST] /api/horses - 403
[2026-01-28 13:44:40] info: [PUT] /api/auth/profile
[2026-01-28 13:44:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1793MB
[2026-01-28 13:44:40] info: [auth:dh4ivg] Starting auth for PUT /profile
[2026-01-28 13:44:40] info: [auth:dh4ivg] Token from cookie: false
[2026-01-28 13:44:40] info: [auth:dh4ivg] Token from header: true
[2026-01-28 13:44:40] info: [auth:dh4ivg] Authenticated user f3e70b30-8ca3-483f-bdd5-400a82146ede
[2026-01-28 13:44:40] warn: [Validation] Input validation failed
[2026-01-28 13:44:40] info: [PUT] /api/auth/profile - 400
[2026-01-28 13:44:40] info: [POST] /api/horses/query
[2026-01-28 13:44:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1791MB
[2026-01-28 13:44:40] info: [auth:ucu4r] Starting auth for POST /horses/query
[2026-01-28 13:44:40] info: [auth:ucu4r] Token from cookie: false
[2026-01-28 13:44:40] info: [auth:ucu4r] Token from header: true
[2026-01-28 13:44:40] info: [auth:ucu4r] Authenticated user 893783ec-1c5e-459c-80cf-8aed12fef077
[2026-01-28 13:44:40] info: [POST] /api/horses/query - 403
[2026-01-28 13:44:40] info: [GET] /api/horses?raw={%22sql%22:%22SELECT%20*%20FROM%20users%22}
[2026-01-28 13:44:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1792MB
[2026-01-28 13:44:40] info: [auth:hds3x9] Starting auth for GET /horses
[2026-01-28 13:44:40] info: [auth:hds3x9] Token from cookie: false
[2026-01-28 13:44:40] info: [auth:hds3x9] Token from header: true
[2026-01-28 13:44:40] info: [auth:hds3x9] Authenticated user 2ab7d2d9-544c-4306-9e2d-00bc33db5990
[2026-01-28 13:44:40] info: [GET] /api/horses?raw={%22sql%22:%22SELECT%20*%20FROM%20users%22} - 200
[2026-01-28 13:44:40] info: [POST] /api/horses/search
[2026-01-28 13:44:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1796MB
[2026-01-28 13:44:40] info: [auth:i9d7pj] Starting auth for POST /horses/search
[2026-01-28 13:44:40] info: [auth:i9d7pj] Token from cookie: false
[2026-01-28 13:44:40] info: [auth:i9d7pj] Token from header: true
[2026-01-28 13:44:40] info: [auth:i9d7pj] Authenticated user 579a1c8c-6728-433b-91bf-413b292324e3
[2026-01-28 13:44:40] info: [POST] /api/horses/search - 403
[2026-01-28 13:44:40] info: [GET] /api/horses/1;%20SELECT%20version()
[2026-01-28 13:44:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1784MB
[2026-01-28 13:44:40] info: [auth:tqv1ad] Starting auth for GET /horses/1;%20SELECT%20version()
[2026-01-28 13:44:40] info: [auth:tqv1ad] Token from cookie: false
[2026-01-28 13:44:40] info: [auth:tqv1ad] Token from header: true
[2026-01-28 13:44:40] info: [auth:tqv1ad] Authenticated user 76d77419-b61a-4b05-a7ba-eea8b8798ee8
[2026-01-28 13:44:40] info: [GET] /api/horses/1;%20SELECT%20version() - 400
[2026-01-28 13:44:40] info: [GET] /api/horses/1;%20COPY%20users%20TO%20'/tmp/users.csv'
[2026-01-28 13:44:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1786MB
[2026-01-28 13:44:40] info: [auth:q8yyxb] Starting auth for GET /horses/1;%20COPY%20users%20TO%20'/tmp/users.csv'
[2026-01-28 13:44:40] info: [auth:q8yyxb] Token from cookie: false
[2026-01-28 13:44:40] info: [auth:q8yyxb] Token from header: true
[2026-01-28 13:44:40] info: [auth:q8yyxb] Authenticated user 40bfc404-6650-4924-a151-df73dca75643
[2026-01-28 13:44:40] warn: 404 - Route not found: GET /api/horses/1;%20COPY%20users%20TO%20'/tmp/users.csv' from ::ffff:127.0.0.1
[2026-01-28 13:44:40] info: [GET] /api/horses/1;%20COPY%20users%20TO%20'/tmp/users.csv' - 404
[2026-01-28 13:44:40] info: [GET] /api/horses/1;%20SELECT%20pg_read_file('/etc/passwd')
[2026-01-28 13:44:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1788MB
[2026-01-28 13:44:40] info: [auth:fzwz0a] Starting auth for GET /horses/1;%20SELECT%20pg_read_file('/etc/passwd')
[2026-01-28 13:44:40] info: [auth:fzwz0a] Token from cookie: false
[2026-01-28 13:44:40] info: [auth:fzwz0a] Token from header: true
[2026-01-28 13:44:40] info: [auth:fzwz0a] Authenticated user 11224b6f-5b81-429b-b1a9-c8fa9d3e1530
[2026-01-28 13:44:40] warn: 404 - Route not found: GET /api/horses/1;%20SELECT%20pg_read_file('/etc/passwd') from ::ffff:127.0.0.1
[2026-01-28 13:44:40] info: [GET] /api/horses/1;%20SELECT%20pg_read_file('/etc/passwd') - 404
[2026-01-28 13:44:40] info: [GET] /api/horses/1;%20SELECT%20lo_create(1234)
[2026-01-28 13:44:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1791MB
[2026-01-28 13:44:40] info: [auth:asps0b] Starting auth for GET /horses/1;%20SELECT%20lo_create(1234)
[2026-01-28 13:44:40] info: [auth:asps0b] Token from cookie: false
[2026-01-28 13:44:40] info: [auth:asps0b] Token from header: true
[2026-01-28 13:44:40] info: [auth:asps0b] Authenticated user 96c2ced0-2141-4cb0-9ce2-ffd97359d56a
[2026-01-28 13:44:40] info: [GET] /api/horses/1;%20SELECT%20lo_create(1234) - 400
[2026-01-28 13:44:40] info: [GET] /api/horses/1;%20CALL%20malicious_procedure()
[2026-01-28 13:44:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1791MB
[2026-01-28 13:44:40] info: [auth:ihnx0e] Starting auth for GET /horses/1;%20CALL%20malicious_procedure()
[2026-01-28 13:44:40] info: [auth:ihnx0e] Token from cookie: false
[2026-01-28 13:44:40] info: [auth:ihnx0e] Token from header: true
[2026-01-28 13:44:40] info: [auth:ihnx0e] Authenticated user 4d104ac1-c129-41ce-bf30-0d9617eaa8d7
[2026-01-28 13:44:40] info: [GET] /api/horses/1;%20CALL%20malicious_procedure() - 400
[2026-01-28 13:44:40] info: [POST] /api/horses/batch-update
[2026-01-28 13:44:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1793MB
[2026-01-28 13:44:40] info: [auth:bpeyjj] Starting auth for POST /horses/batch-update
[2026-01-28 13:44:40] info: [auth:bpeyjj] Token from cookie: false
[2026-01-28 13:44:40] info: [auth:bpeyjj] Token from header: true
[2026-01-28 13:44:40] info: [auth:bpeyjj] Authenticated user 26bacf0b-bd54-4454-a973-8cde599a1ede
[2026-01-28 13:44:40] info: [POST] /api/horses/batch-update - 403
[2026-01-28 13:44:40] info: [POST] /api/grooms/batch-delete
[2026-01-28 13:44:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1796MB
[2026-01-28 13:44:40] info: [auth:6p5yf] Starting auth for POST /grooms/batch-delete
[2026-01-28 13:44:40] info: [auth:6p5yf] Token from cookie: false
[2026-01-28 13:44:40] info: [auth:6p5yf] Token from header: true
[2026-01-28 13:44:40] info: [auth:6p5yf] Authenticated user 052d7762-e4d4-4988-80fc-a376f747e601
[2026-01-28 13:44:40] info: [POST] /api/grooms/batch-delete - 403
[2026-01-28 13:44:40] info: [GET] /api/horses/invalid-sql-injection
[2026-01-28 13:44:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1798MB
[2026-01-28 13:44:40] info: [auth:pfqc6u] Starting auth for GET /horses/invalid-sql-injection
[2026-01-28 13:44:40] info: [auth:pfqc6u] Token from cookie: false
[2026-01-28 13:44:40] info: [auth:pfqc6u] Token from header: true
[2026-01-28 13:44:40] info: [auth:pfqc6u] Authenticated user 08bddfea-b5b4-4e87-a1a6-bbf68819badb
[2026-01-28 13:44:40] info: [GET] /api/horses/invalid-sql-injection - 400
[2026-01-28 13:44:40] info: [GET] /api/horses/1'%20OR%20'1'='1
[2026-01-28 13:44:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1787MB
[2026-01-28 13:44:40] info: [auth:nym9b] Starting auth for GET /horses/1'%20OR%20'1'='1
[2026-01-28 13:44:40] info: [auth:nym9b] Token from cookie: false
[2026-01-28 13:44:40] info: [auth:nym9b] Token from header: true
[2026-01-28 13:44:40] info: [auth:nym9b] Authenticated user 9879a74e-67f4-471e-8edf-b7133c5f9e84
[2026-01-28 13:44:40] info: [GET] /api/horses/1'%20OR%20'1'='1 - 400
[2026-01-28 13:44:40] info: [GET] /api/horses/1;%20DROP%20TABLE%20horses
[2026-01-28 13:44:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1799MB
[2026-01-28 13:44:40] info: [auth:mslx2] Starting auth for GET /horses/1;%20DROP%20TABLE%20horses
[2026-01-28 13:44:40] info: [auth:mslx2] Token from cookie: false
[2026-01-28 13:44:40] info: [auth:mslx2] Token from header: true
[2026-01-28 13:44:40] info: [auth:mslx2] Authenticated user 9879a74e-67f4-471e-8edf-b7133c5f9e84
[2026-01-28 13:44:40] info: [GET] /api/horses/1;%20DROP%20TABLE%20horses - 400
[2026-01-28 13:44:40] info: [GET] /api/horses/1%20UNION%20SELECT%20*%20FROM%20users
[2026-01-28 13:44:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1795MB
[2026-01-28 13:44:40] info: [auth:8mq16] Starting auth for GET /horses/1%20UNION%20SELECT%20*%20FROM%20users
[2026-01-28 13:44:40] info: [auth:8mq16] Token from cookie: false
[2026-01-28 13:44:40] info: [auth:8mq16] Token from header: true
[2026-01-28 13:44:40] info: [auth:8mq16] Authenticated user 9879a74e-67f4-471e-8edf-b7133c5f9e84
[2026-01-28 13:44:40] info: [GET] /api/horses/1%20UNION%20SELECT%20*%20FROM%20users - 400
[2026-01-28 13:44:40] info: [GET] /api/horses/1%20AND%20(SELECT%201%20FROM%20users)
[2026-01-28 13:44:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1791MB
[2026-01-28 13:44:40] info: [auth:n3wuz] Starting auth for GET /horses/1%20AND%20(SELECT%201%20FROM%20users)
[2026-01-28 13:44:40] info: [auth:n3wuz] Token from cookie: false
[2026-01-28 13:44:40] info: [auth:n3wuz] Token from header: true
[2026-01-28 13:44:40] info: [auth:n3wuz] Authenticated user 9879a74e-67f4-471e-8edf-b7133c5f9e84
[2026-01-28 13:44:40] info: [GET] /api/horses/1%20AND%20(SELECT%201%20FROM%20users) - 400
[2026-01-28 13:44:40] info: [GET] /api/horses/146901
[2026-01-28 13:44:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1796MB
[2026-01-28 13:44:40] info: [auth:hripbk] Starting auth for GET /horses/146901
[2026-01-28 13:44:40] info: [auth:hripbk] Token from cookie: false
[2026-01-28 13:44:40] info: [auth:hripbk] Token from header: true
[2026-01-28 13:44:40] info: [auth:hripbk] Authenticated user bfa9d714-e4f8-4f89-87ae-4b51fc2b9d20
[2026-01-28 13:44:40] info: [ownership] Validated ownership: user bfa9d714-e4f8-4f89-87ae-4b51fc2b9d20 owns horse 146901
[2026-01-28 13:44:40] info: [GET] /api/horses/146901 - 200
[2026-01-28 13:44:40] info: [POST] /api/horses
[2026-01-28 13:44:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1787MB
[2026-01-28 13:44:40] info: [auth:ax8m6b] Starting auth for POST /horses
[2026-01-28 13:44:40] info: [auth:ax8m6b] Token from cookie: false
[2026-01-28 13:44:40] info: [auth:ax8m6b] Token from header: true
[2026-01-28 13:44:40] info: [auth:ax8m6b] Authenticated user 2a8d7025-b612-41a0-a29b-30280b395f28
[2026-01-28 13:44:40] info: [POST] /api/horses - 403
PASS __tests__/integration/security/sql-injection-attempts.test.mjs
  SQL Injection Attempts Integration Tests
    Classic SQL Injection in ID Parameters
      √ should reject SQL injection in horse ID (107 ms)
      √ should reject SQL injection with comment syntax (38 ms)
      √ should reject SQL injection with union select (34 ms)
      √ should reject SQL injection with nested queries (33 ms)
      √ should reject SQL injection with hex encoding (33 ms)
    Blind SQL Injection Attempts
      √ should reject boolean-based blind injection (31 ms)
      √ should reject time-based blind injection (30 ms)
      √ should reject PostgreSQL-specific time injection (31 ms)
      √ should reject error-based blind injection (35 ms)
    Union-Based SQL Injection
      √ should reject UNION SELECT attacks (32 ms)
      √ should reject UNION ALL attacks (32 ms)
      √ should reject UNION with ORDER BY column enumeration (31 ms)
      √ should reject UNION with NULL padding (31 ms)
    Stacked Queries
      √ should reject semicolon-separated queries (32 ms)
      √ should reject multiple statements in ownership check (32 ms)
      √ should reject batch operations via stacking (30 ms)
    SQL Injection in Search/Filter Parameters
      √ should reject SQL injection in breed filter (33 ms)
      √ should reject SQL injection in name search (44 ms)
      √ should reject SQL injection in sort parameter (37 ms)
      √ should reject SQL injection in LIKE wildcards (37 ms)
      √ should reject SQL injection in IN clause (38 ms)
    SQL Injection in JSON/JSONB Queries
      √ should reject SQL injection in JSONB path (38 ms)
      √ should reject SQL injection in JSON operators (29 ms)
      √ should reject SQL injection in JSON array queries (35 ms)
    Second-Order SQL Injection
      √ should sanitize stored data used in subsequent queries (44 ms)
      √ should prevent injection via profile data used in ownership checks (31 ms)
    ORM Bypass Attempts (Prisma)
      √ should reject raw query injection via Prisma (32 ms)
      √ should reject Prisma findRaw injection attempts (39 ms)
      √ should reject $queryRaw parameter injection (31 ms)
    PostgreSQL-Specific Injection Attacks
      √ should reject PostgreSQL function calls (33 ms)
      √ should reject PostgreSQL COPY command (39 ms)
      √ should reject pg_read_file attempts (32 ms)
      √ should reject large object manipulation (32 ms)
      √ should reject PostgreSQL stored procedure execution (31 ms)
    SQL Injection in Batch Operations
      √ should reject SQL injection in batch horse updates (35 ms)
      √ should reject SQL injection in batch groom deletion (36 ms)
    SQL Injection Error Handling
      √ should not leak database structure in error messages (31 ms)
      √ should return consistent error format for all injection attempts (113 ms)
    Parameterized Query Validation
      √ should use parameterized queries for ownership checks (42 ms)
      √ should properly escape special characters in valid data (33 ms)

[2026-01-28 13:44:41] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:44:41] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:44:41] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:44:41] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:44:41] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:41] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:41] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:41] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:41] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:41] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:41] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:41] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:41] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:41] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:44:42] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 13:44:42] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:42] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:44:42] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:44:42] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:44:42] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:44:42] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:44:42] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 13:44:42] info: [GET] /api/competition/disciplines
[2026-01-28 13:44:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1841MB
[2026-01-28 13:44:42] info: [auth:21rppg] Starting auth for GET /competition/disciplines
[2026-01-28 13:44:42] info: [auth:21rppg] Token from cookie: false
[2026-01-28 13:44:42] warn: [auth:21rppg] Access token is required for GET /competition/disciplines from ::ffff:127.0.0.1
[2026-01-28 13:44:42] info: [GET] /api/competition/disciplines - 401
[2026-01-28 13:44:42] info: [GET] /api/competition/show/1/results
[2026-01-28 13:44:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1843MB
[2026-01-28 13:44:42] info: [auth:p4wgyn] Starting auth for GET /competition/show/1/results
[2026-01-28 13:44:42] info: [auth:p4wgyn] Token from cookie: false
[2026-01-28 13:44:42] warn: [auth:p4wgyn] Access token is required for GET /competition/show/1/results from ::ffff:127.0.0.1
[2026-01-28 13:44:42] info: [GET] /api/competition/show/1/results - 401
[2026-01-28 13:44:42] info: [GET] /api/competition/horse/1/results
[2026-01-28 13:44:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1842MB
[2026-01-28 13:44:42] info: [auth:ine20o] Starting auth for GET /competition/horse/1/results
[2026-01-28 13:44:42] info: [auth:ine20o] Token from cookie: false
[2026-01-28 13:44:42] info: [auth:ine20o] Token from header: true
[2026-01-28 13:44:42] info: [auth:ine20o] Authenticated user test-user-uuid-123
[2026-01-28 13:44:42] info: [auth:n1b6av] Starting auth for GET /horse/1/results
[2026-01-28 13:44:42] info: [auth:n1b6av] Token from cookie: false
[2026-01-28 13:44:42] info: [auth:n1b6av] Token from header: true
[2026-01-28 13:44:42] info: [auth:n1b6av] Authenticated user test-user-uuid-123
[2026-01-28 13:44:42] warn: [ownership] horse 1 not found or not owned by user test-user-uuid-123
[2026-01-28 13:44:42] info: [GET] /api/competition/horse/1/results - 404
[2026-01-28 13:44:42] info: [GET] /api/competition/eligibility/1/showjumping
[2026-01-28 13:44:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1847MB
[2026-01-28 13:44:42] info: [auth:cd5m1f] Starting auth for GET /competition/eligibility/1/showjumping
[2026-01-28 13:44:42] info: [auth:cd5m1f] Token from cookie: false
[2026-01-28 13:44:42] info: [auth:cd5m1f] Token from header: true
[2026-01-28 13:44:42] info: [auth:cd5m1f] Authenticated user test-user-uuid-123
[2026-01-28 13:44:42] info: [auth:l3wkxo] Starting auth for GET /eligibility/1/showjumping
[2026-01-28 13:44:42] info: [auth:l3wkxo] Token from cookie: false
[2026-01-28 13:44:42] info: [auth:l3wkxo] Token from header: true
[2026-01-28 13:44:42] info: [auth:l3wkxo] Authenticated user test-user-uuid-123
[2026-01-28 13:44:42] warn: [ownership] horse 1 not found or not owned by user test-user-uuid-123
[2026-01-28 13:44:42] info: [GET] /api/competition/eligibility/1/showjumping - 404
[2026-01-28 13:44:42] info: [POST] /api/competition/enter-show
[2026-01-28 13:44:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1851MB
[2026-01-28 13:44:42] info: [auth:qidrb8] Starting auth for POST /competition/enter-show
[2026-01-28 13:44:42] info: [auth:qidrb8] Token from cookie: false
[2026-01-28 13:44:42] info: [auth:qidrb8] Token from header: true
[2026-01-28 13:44:42] info: [auth:qidrb8] Authenticated user test-user-uuid-123
[2026-01-28 13:44:42] info: [POST] /api/competition/enter-show - 403
[2026-01-28 13:44:42] info: [POST] /api/competition/enter
[2026-01-28 13:44:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1852MB
[2026-01-28 13:44:42] info: [auth:sgc2gd] Starting auth for POST /competition/enter
[2026-01-28 13:44:42] info: [auth:sgc2gd] Token from cookie: false
[2026-01-28 13:44:42] info: [auth:sgc2gd] Token from header: true
[2026-01-28 13:44:42] info: [auth:sgc2gd] Authenticated user test-user-uuid-123
[2026-01-28 13:44:42] info: [POST] /api/competition/enter - 403
[2026-01-28 13:44:42] info: [POST] /api/competition/execute
[2026-01-28 13:44:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1854MB
[2026-01-28 13:44:42] info: [auth:59jdoc] Starting auth for POST /competition/execute
[2026-01-28 13:44:42] info: [auth:59jdoc] Token from cookie: false
[2026-01-28 13:44:42] info: [auth:59jdoc] Token from header: true
[2026-01-28 13:44:42] info: [auth:59jdoc] Authenticated user test-user-uuid-123
[2026-01-28 13:44:42] info: [POST] /api/competition/execute - 403
[2026-01-28 13:44:42] info: [GET] /api/competition/disciplines
[2026-01-28 13:44:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1855MB
[2026-01-28 13:44:42] info: [auth:umnc3] Starting auth for GET /competition/disciplines
[2026-01-28 13:44:42] info: [auth:umnc3] Token from cookie: false
[2026-01-28 13:44:42] warn: [auth:umnc3] Access token is required for GET /competition/disciplines from ::ffff:127.0.0.1
[2026-01-28 13:44:42] info: [GET] /api/competition/disciplines - 401
[2026-01-28 13:44:42] info: [POST] /api/competition/enter
[2026-01-28 13:44:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1854MB
[2026-01-28 13:44:42] info: [auth:ra6gl6] Starting auth for POST /competition/enter
[2026-01-28 13:44:42] info: [auth:ra6gl6] Token from cookie: false
[2026-01-28 13:44:42] info: [auth:ra6gl6] Token from header: true
[2026-01-28 13:44:42] info: [auth:ra6gl6] Authenticated user test-user-uuid-123
[2026-01-28 13:44:42] info: [POST] /api/competition/enter - 403
[2026-01-28 13:44:42] info: [GET] /api/competition/disciplines
[2026-01-28 13:44:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1855MB
[2026-01-28 13:44:42] info: [auth:kawa8f] Starting auth for GET /competition/disciplines
[2026-01-28 13:44:42] info: [auth:kawa8f] Token from cookie: false
[2026-01-28 13:44:42] warn: [auth:kawa8f] Access token is required for GET /competition/disciplines from ::ffff:127.0.0.1
[2026-01-28 13:44:42] info: [GET] /api/competition/disciplines - 401
[2026-01-28 13:44:42] info: [GET] /api/competition/horse/1/results
[2026-01-28 13:44:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1854MB
[2026-01-28 13:44:42] info: [auth:5ddf4] Starting auth for GET /competition/horse/1/results
[2026-01-28 13:44:42] info: [auth:5ddf4] Token from cookie: false
[2026-01-28 13:44:42] warn: [auth:5ddf4] Access token is required for GET /competition/horse/1/results from ::ffff:127.0.0.1
[2026-01-28 13:44:42] info: [GET] /api/competition/horse/1/results - 401
[2026-01-28 13:44:42] info: [POST] /api/competition/enter
[2026-01-28 13:44:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1854MB
[2026-01-28 13:44:42] info: [auth:o32dlk] Starting auth for POST /competition/enter
[2026-01-28 13:44:42] info: [auth:o32dlk] Token from cookie: false
[2026-01-28 13:44:42] warn: [auth:o32dlk] Access token is required for POST /competition/enter from ::ffff:127.0.0.1
[2026-01-28 13:44:42] info: [POST] /api/competition/enter - 401
[2026-01-28 13:44:42] info: [GET] /api/competition/disciplines
[2026-01-28 13:44:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1853MB
[2026-01-28 13:44:42] info: [auth:2tv6p] Starting auth for GET /competition/disciplines
[2026-01-28 13:44:42] info: [auth:2tv6p] Token from cookie: false
[2026-01-28 13:44:42] warn: [auth:2tv6p] Access token is required for GET /competition/disciplines from ::ffff:127.0.0.1
[2026-01-28 13:44:42] info: [GET] /api/competition/disciplines - 401
[2026-01-28 13:44:42] info: [GET] /api/competition/disciplines
[2026-01-28 13:44:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1853MB
[2026-01-28 13:44:42] info: [auth:4if8t] Starting auth for GET /competition/disciplines
[2026-01-28 13:44:42] info: [auth:4if8t] Token from cookie: false
[2026-01-28 13:44:42] warn: [auth:4if8t] Access token is required for GET /competition/disciplines from ::ffff:127.0.0.1
[2026-01-28 13:44:42] info: [GET] /api/competition/disciplines - 401
[2026-01-28 13:44:42] info: [GET] /api/competition/disciplines
[2026-01-28 13:44:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1851MB
[2026-01-28 13:44:42] info: [auth:f2p2g] Starting auth for GET /competition/disciplines
[2026-01-28 13:44:42] info: [auth:f2p2g] Token from cookie: false
[2026-01-28 13:44:42] warn: [auth:f2p2g] Access token is required for GET /competition/disciplines from ::ffff:127.0.0.1
[2026-01-28 13:44:42] info: [GET] /api/competition/disciplines - 401
[2026-01-28 13:44:42] info: [GET] /api/competition/horse/999/results
[2026-01-28 13:44:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1851MB
[2026-01-28 13:44:42] info: [auth:5zj6zr] Starting auth for GET /competition/horse/999/results
[2026-01-28 13:44:42] info: [auth:5zj6zr] Token from cookie: false
[2026-01-28 13:44:42] info: [auth:5zj6zr] Token from header: true
[2026-01-28 13:44:42] info: [auth:5zj6zr] Authenticated user test-user-uuid-123
[2026-01-28 13:44:42] info: [auth:nfbzsg] Starting auth for GET /horse/999/results
[2026-01-28 13:44:42] info: [auth:nfbzsg] Token from cookie: false
[2026-01-28 13:44:42] info: [auth:nfbzsg] Token from header: true
[2026-01-28 13:44:42] info: [auth:nfbzsg] Authenticated user test-user-uuid-123
[2026-01-28 13:44:42] warn: [ownership] horse 999 not found or not owned by user test-user-uuid-123
[2026-01-28 13:44:42] info: [GET] /api/competition/horse/999/results - 404
[2026-01-28 13:44:42] info: [POST] /api/competition/execute
[2026-01-28 13:44:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1854MB
[2026-01-28 13:44:42] info: [auth:ayc2u9] Starting auth for POST /competition/execute
[2026-01-28 13:44:42] info: [auth:ayc2u9] Token from cookie: false
[2026-01-28 13:44:42] info: [auth:ayc2u9] Token from header: true
[2026-01-28 13:44:42] info: [auth:ayc2u9] Authenticated user test-user-uuid-123
[2026-01-28 13:44:42] info: [POST] /api/competition/execute - 403
[2026-01-28 13:44:42] info: [POST] /api/competition/enter
[2026-01-28 13:44:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1855MB
[2026-01-28 13:44:42] info: [auth:g1b3sm] Starting auth for POST /competition/enter
[2026-01-28 13:44:42] info: [auth:g1b3sm] Token from cookie: false
[2026-01-28 13:44:42] info: [auth:g1b3sm] Token from header: true
[2026-01-28 13:44:42] info: [auth:g1b3sm] Authenticated user test-user-uuid-123
[2026-01-28 13:44:42] info: [POST] /api/competition/enter - 403
[2026-01-28 13:44:42] info: [POST] /api/competition/enter
[2026-01-28 13:44:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1856MB
[2026-01-28 13:44:42] info: [auth:uwmgj] Starting auth for POST /competition/enter
[2026-01-28 13:44:42] info: [auth:uwmgj] Token from cookie: false
[2026-01-28 13:44:42] info: [auth:uwmgj] Token from header: true
[2026-01-28 13:44:42] info: [auth:uwmgj] Authenticated user test-user-uuid-123
[2026-01-28 13:44:42] info: [POST] /api/competition/enter - 403
PASS __tests__/integration/competition-rate-limiting.test.mjs
  Competition Routes Rate Limiting Integration Tests
    Query Rate Limiting (GET endpoints)
      √ should apply queryRateLimiter to GET /api/competition/disciplines (46 ms)
      √ should apply queryRateLimiter to GET /api/competition/show/:showId/results (24 ms)
      √ should apply queryRateLimiter to GET /api/competition/horse/:horseId/results (95 ms)
      √ should apply queryRateLimiter to GET /api/competition/eligibility/:horseId/:discipline (32 ms)
    Mutation Rate Limiting (POST endpoints)
      √ should apply mutationRateLimiter to POST /api/competition/enter-show (35 ms)
      √ should apply mutationRateLimiter to POST /api/competition/enter (26 ms)
      √ should apply mutationRateLimiter to POST /api/competition/execute (30 ms)
    Rate Limit Enforcement
      √ should enforce different limits for query vs mutation operations (51 ms)
    Public vs Authenticated Endpoints
      √ should rate limit public endpoints without requiring auth (22 ms)
      √ should require auth for horse-specific endpoints (22 ms)
      √ should require auth for competition entry endpoints (25 ms)
    Rate Limit Headers
      √ should include all standard rate limit headers (23 ms)
      √ should decrement remaining count with each request (45 ms)
    Security Integration
      √ should validate horse ownership before allowing results access (31 ms)
      √ should rate limit competition execution for show hosts only (25 ms)
    Input Validation with Rate Limiting
      √ should rate limit invalid competition entry requests (28 ms)
      √ should rate limit requests with missing required fields (27 ms)

[2026-01-28 13:44:42] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:44:42] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:44:42] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:44:42] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:44:43] info: [MemoryManager] Starting memory and resource monitoring
[2026-01-28 13:44:43] info: [auth:wtqacb] Starting auth for GET /status
[2026-01-28 13:44:43] info: [auth:wtqacb] Token from cookie: false
[2026-01-28 13:44:43] info: [auth:wtqacb] Token from header: true
[2026-01-28 13:44:43] info: [auth:wtqacb] Authenticated user 33a3c6df-774e-448a-a5e7-c80c56629e6d
[2026-01-28 13:44:43] info: [MemoryManagement] Getting memory status
[2026-01-28 13:44:43] info: [auth:p9hjlo] Starting auth for GET /status
[2026-01-28 13:44:43] info: [auth:p9hjlo] Token from cookie: false
[2026-01-28 13:44:43] warn: [auth:p9hjlo] Access token is required for GET /status from ::ffff:127.0.0.1
[2026-01-28 13:44:43] info: [auth:qg5p58] Starting auth for GET /metrics
[2026-01-28 13:44:43] info: [auth:qg5p58] Token from cookie: false
[2026-01-28 13:44:43] info: [auth:qg5p58] Token from header: true
[2026-01-28 13:44:43] info: [auth:qg5p58] Authenticated user 33a3c6df-774e-448a-a5e7-c80c56629e6d
[2026-01-28 13:44:43] info: [MemoryManagement] Getting memory metrics for timeframe: 1h
[2026-01-28 13:44:43] info: [auth:ie8158] Starting auth for GET /metrics
[2026-01-28 13:44:43] info: [auth:ie8158] Token from cookie: false
[2026-01-28 13:44:43] info: [auth:ie8158] Token from header: true
[2026-01-28 13:44:43] info: [auth:ie8158] Authenticated user 33a3c6df-774e-448a-a5e7-c80c56629e6d
[2026-01-28 13:44:43] info: [MemoryManagement] Getting memory metrics for timeframe: 1h
[2026-01-28 13:44:43] info: [auth:uv3j5f] Starting auth for GET /metrics
[2026-01-28 13:44:43] info: [auth:uv3j5f] Token from cookie: false
[2026-01-28 13:44:43] info: [auth:uv3j5f] Token from header: true
[2026-01-28 13:44:43] info: [auth:uv3j5f] Authenticated user 33a3c6df-774e-448a-a5e7-c80c56629e6d
[2026-01-28 13:44:43] info: [MemoryManagement] Getting memory metrics for timeframe: 6h
[2026-01-28 13:44:43] info: [auth:mvjoqt] Starting auth for GET /metrics
[2026-01-28 13:44:43] info: [auth:mvjoqt] Token from cookie: false
[2026-01-28 13:44:43] info: [auth:mvjoqt] Token from header: true
[2026-01-28 13:44:43] info: [auth:mvjoqt] Authenticated user 33a3c6df-774e-448a-a5e7-c80c56629e6d
[2026-01-28 13:44:43] info: [MemoryManagement] Getting memory metrics for timeframe: 24h
[2026-01-28 13:44:43] info: [auth:yudxt9] Starting auth for GET /metrics
[2026-01-28 13:44:43] info: [auth:yudxt9] Token from cookie: false
[2026-01-28 13:44:43] info: [auth:yudxt9] Token from header: true
[2026-01-28 13:44:43] info: [auth:yudxt9] Authenticated user 33a3c6df-774e-448a-a5e7-c80c56629e6d
[2026-01-28 13:44:43] info: [MemoryManagement] Getting memory metrics for timeframe: 7d
[2026-01-28 13:44:43] info: [auth:hyi8o8] Starting auth for GET /metrics
[2026-01-28 13:44:43] info: [auth:hyi8o8] Token from cookie: false
[2026-01-28 13:44:43] info: [auth:hyi8o8] Token from header: true
[2026-01-28 13:44:43] info: [auth:hyi8o8] Authenticated user 33a3c6df-774e-448a-a5e7-c80c56629e6d
[2026-01-28 13:44:43] info: [MemoryManagement] Getting memory metrics for timeframe: 1h
[2026-01-28 13:44:43] info: [auth:axf0ns] Starting auth for GET /metrics
[2026-01-28 13:44:43] info: [auth:axf0ns] Token from cookie: false
[2026-01-28 13:44:43] info: [auth:axf0ns] Token from header: true
[2026-01-28 13:44:43] info: [auth:axf0ns] Authenticated user 33a3c6df-774e-448a-a5e7-c80c56629e6d
[2026-01-28 13:44:43] info: [auth:1u30zq] Starting auth for GET /resources
[2026-01-28 13:44:43] info: [auth:1u30zq] Token from cookie: false
[2026-01-28 13:44:43] info: [auth:1u30zq] Token from header: true
[2026-01-28 13:44:43] info: [auth:1u30zq] Authenticated user 33a3c6df-774e-448a-a5e7-c80c56629e6d
[2026-01-28 13:44:43] info: [MemoryManagement] Getting resource analytics
[2026-01-28 13:44:43] info: [auth:n17u4b] Starting auth for POST /gc
[2026-01-28 13:44:43] info: [auth:n17u4b] Token from cookie: false
[2026-01-28 13:44:43] info: [auth:n17u4b] Token from header: true
[2026-01-28 13:44:43] info: [auth:n17u4b] Authenticated user 33a3c6df-774e-448a-a5e7-c80c56629e6d
[2026-01-28 13:44:43] info: [MemoryManagement] Manual GC trigger requested (force: false)
[2026-01-28 13:44:43] info: [auth:wuvq64] Starting auth for POST /gc
[2026-01-28 13:44:43] info: [auth:wuvq64] Token from cookie: false
[2026-01-28 13:44:43] info: [auth:wuvq64] Token from header: true
[2026-01-28 13:44:43] info: [auth:wuvq64] Authenticated user 33a3c6df-774e-448a-a5e7-c80c56629e6d
[2026-01-28 13:44:43] info: [auth:ahtaj] Starting auth for POST /cleanup
[2026-01-28 13:44:43] info: [auth:ahtaj] Token from cookie: false
[2026-01-28 13:44:43] info: [auth:ahtaj] Token from header: true
[2026-01-28 13:44:43] info: [auth:ahtaj] Authenticated user 33a3c6df-774e-448a-a5e7-c80c56629e6d
[2026-01-28 13:44:43] info: [MemoryManagement] Resource cleanup requested for: all
[2026-01-28 13:44:43] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:44:43] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:44:43] info: [auth:lvug9v] Starting auth for POST /cleanup
[2026-01-28 13:44:43] info: [auth:lvug9v] Token from cookie: false
[2026-01-28 13:44:43] info: [auth:lvug9v] Token from header: true
[2026-01-28 13:44:43] info: [auth:lvug9v] Authenticated user 33a3c6df-774e-448a-a5e7-c80c56629e6d
[2026-01-28 13:44:43] info: [MemoryManagement] Resource cleanup requested for: timers, intervals
[2026-01-28 13:44:43] warn: [MemoryManagement] Selective cleanup not yet implemented
[2026-01-28 13:44:43] info: [auth:od358v] Starting auth for POST /cleanup
[2026-01-28 13:44:43] info: [auth:od358v] Token from cookie: false
[2026-01-28 13:44:43] info: [auth:od358v] Token from header: true
[2026-01-28 13:44:43] info: [auth:od358v] Authenticated user 33a3c6df-774e-448a-a5e7-c80c56629e6d
[2026-01-28 13:44:43] info: [auth:kgsgio] Starting auth for GET /alerts
[2026-01-28 13:44:43] info: [auth:kgsgio] Token from cookie: false
[2026-01-28 13:44:43] info: [auth:kgsgio] Token from header: true
[2026-01-28 13:44:43] info: [auth:kgsgio] Authenticated user 33a3c6df-774e-448a-a5e7-c80c56629e6d
[2026-01-28 13:44:43] info: [MemoryManagement] Getting memory alerts
[2026-01-28 13:44:43] info: [auth:coxc] Starting auth for GET /alerts
[2026-01-28 13:44:43] info: [auth:coxc] Token from cookie: false
[2026-01-28 13:44:43] info: [auth:coxc] Token from header: true
[2026-01-28 13:44:43] info: [auth:coxc] Authenticated user 33a3c6df-774e-448a-a5e7-c80c56629e6d
[2026-01-28 13:44:43] info: [MemoryManagement] Getting memory alerts
[2026-01-28 13:44:43] info: [auth:7fuljr] Starting auth for GET /alerts
[2026-01-28 13:44:43] info: [auth:7fuljr] Token from cookie: false
[2026-01-28 13:44:43] info: [auth:7fuljr] Token from header: true
[2026-01-28 13:44:43] info: [auth:7fuljr] Authenticated user 33a3c6df-774e-448a-a5e7-c80c56629e6d
[2026-01-28 13:44:43] info: [MemoryManagement] Getting memory alerts
[2026-01-28 13:44:43] info: [auth:d89jd5] Starting auth for GET /alerts
[2026-01-28 13:44:43] info: [auth:d89jd5] Token from cookie: false
[2026-01-28 13:44:43] info: [auth:d89jd5] Token from header: true
[2026-01-28 13:44:43] info: [auth:d89jd5] Authenticated user 33a3c6df-774e-448a-a5e7-c80c56629e6d
[2026-01-28 13:44:43] info: [MemoryManagement] Getting memory alerts
[2026-01-28 13:44:43] info: [auth:y16i7bl] Starting auth for GET /alerts
[2026-01-28 13:44:43] info: [auth:y16i7bl] Token from cookie: false
[2026-01-28 13:44:43] info: [auth:y16i7bl] Token from header: true
[2026-01-28 13:44:43] info: [auth:y16i7bl] Authenticated user 33a3c6df-774e-448a-a5e7-c80c56629e6d
[2026-01-28 13:44:43] info: [MemoryManagement] Getting memory alerts
[2026-01-28 13:44:43] info: [auth:e5dgu] Starting auth for GET /alerts
[2026-01-28 13:44:43] info: [auth:e5dgu] Token from cookie: false
[2026-01-28 13:44:43] info: [auth:e5dgu] Token from header: true
[2026-01-28 13:44:43] info: [auth:e5dgu] Authenticated user 33a3c6df-774e-448a-a5e7-c80c56629e6d
[2026-01-28 13:44:43] info: [auth:cm1c0k] Starting auth for GET /alerts
[2026-01-28 13:44:43] info: [auth:cm1c0k] Token from cookie: false
[2026-01-28 13:44:43] info: [auth:cm1c0k] Token from header: true
[2026-01-28 13:44:43] info: [auth:cm1c0k] Authenticated user 33a3c6df-774e-448a-a5e7-c80c56629e6d
[2026-01-28 13:44:43] info: [auth:vrpinr] Starting auth for GET /health
[2026-01-28 13:44:43] info: [auth:vrpinr] Token from cookie: false
[2026-01-28 13:44:43] info: [auth:vrpinr] Token from header: true
[2026-01-28 13:44:43] info: [auth:vrpinr] Authenticated user 33a3c6df-774e-448a-a5e7-c80c56629e6d
[2026-01-28 13:44:43] info: [MemoryManagement] Getting system health assessment
[2026-01-28 13:44:43] info: [auth:jnreje] Starting auth for GET /health
[2026-01-28 13:44:43] info: [auth:jnreje] Token from cookie: false
[2026-01-28 13:44:43] info: [auth:jnreje] Token from header: true
[2026-01-28 13:44:43] info: [auth:jnreje] Authenticated user 33a3c6df-774e-448a-a5e7-c80c56629e6d
[2026-01-28 13:44:43] info: [MemoryManagement] Getting system health assessment
[2026-01-28 13:44:43] info: [auth:slpcnt] Starting auth for GET /health
[2026-01-28 13:44:43] info: [auth:slpcnt] Token from cookie: false
[2026-01-28 13:44:43] info: [auth:slpcnt] Token from header: true
[2026-01-28 13:44:43] info: [auth:slpcnt] Authenticated user 33a3c6df-774e-448a-a5e7-c80c56629e6d
[2026-01-28 13:44:43] info: [MemoryManagement] Getting system health assessment
[2026-01-28 13:44:43] info: [auth:lpvka] Starting auth for GET /status
[2026-01-28 13:44:43] info: [auth:lpvka] Token from cookie: false
[2026-01-28 13:44:43] info: [auth:lpvka] Token from header: true
[2026-01-28 13:44:43] warn: [auth:lpvka] Invalid or expired token for GET /status from ::ffff:127.0.0.1
[2026-01-28 13:44:43] info: [auth:k9twtc] Starting auth for GET /status
[2026-01-28 13:44:43] info: [auth:k9twtc] Token from cookie: false
[2026-01-28 13:44:43] warn: [auth:k9twtc] Access token is required for GET /status from ::ffff:127.0.0.1
[2026-01-28 13:44:43] info: [auth:uj4zfn] Starting auth for GET /metrics
[2026-01-28 13:44:43] info: [auth:uj4zfn] Token from cookie: false
[2026-01-28 13:44:43] info: [auth:uj4zfn] Token from header: true
[2026-01-28 13:44:43] info: [auth:uj4zfn] Authenticated user 33a3c6df-774e-448a-a5e7-c80c56629e6d
[2026-01-28 13:44:43] info: [MemoryManagement] Getting memory metrics for timeframe: 1h
[2026-01-28 13:44:43] info: [auth:oxujdo] Starting auth for GET /resources
[2026-01-28 13:44:43] info: [auth:oxujdo] Token from cookie: false
[2026-01-28 13:44:43] info: [auth:oxujdo] Token from header: true
[2026-01-28 13:44:43] info: [auth:oxujdo] Authenticated user 33a3c6df-774e-448a-a5e7-c80c56629e6d
[2026-01-28 13:44:43] info: [MemoryManagement] Getting resource analytics
[2026-01-28 13:44:43] info: [auth:7516ia] Starting auth for GET /health
[2026-01-28 13:44:43] info: [auth:7516ia] Token from cookie: false
[2026-01-28 13:44:43] info: [auth:7516ia] Token from header: true
[2026-01-28 13:44:43] info: [auth:7516ia] Authenticated user 33a3c6df-774e-448a-a5e7-c80c56629e6d
[2026-01-28 13:44:43] info: [MemoryManagement] Getting system health assessment
[2026-01-28 13:44:43] info: [auth:eb4kba] Starting auth for GET /status
[2026-01-28 13:44:43] info: [auth:eb4kba] Token from cookie: false
[2026-01-28 13:44:43] info: [auth:eb4kba] Token from header: true
[2026-01-28 13:44:43] info: [auth:eb4kba] Authenticated user 33a3c6df-774e-448a-a5e7-c80c56629e6d
[2026-01-28 13:44:43] info: [MemoryManagement] Getting memory status
[2026-01-28 13:44:44] warn: [MemoryManager] Memory threshold alert: 1875MB used
[2026-01-28 13:44:45] warn: [MemoryManager] Memory threshold alert: 1876MB used
[2026-01-28 13:44:45] info: [auth:1lptwc] Starting auth for GET /metrics
[2026-01-28 13:44:45] info: [auth:1lptwc] Token from cookie: false
[2026-01-28 13:44:45] info: [auth:1lptwc] Token from header: true
[2026-01-28 13:44:45] info: [auth:1lptwc] Authenticated user 33a3c6df-774e-448a-a5e7-c80c56629e6d
[2026-01-28 13:44:45] info: [MemoryManagement] Getting memory metrics for timeframe: 1h
[2026-01-28 13:44:45] info: [MemoryManager] Stopping memory and resource monitoring
[2026-01-28 13:44:45] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:44:45] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
PASS __tests__/routes/memoryManagementRoutes.test.mjs
  Memory Management Routes
    GET /api/memory/status
      √ retrieves memory status successfully (33 ms)
      √ requires authentication (14 ms)
    GET /api/memory/metrics
      √ retrieves memory metrics with default timeframe (26 ms)
      √ accepts different timeframe parameters (79 ms)
      √ includes GC data when requested (20 ms)
      √ validates timeframe parameter (21 ms)
    GET /api/memory/resources
      √ retrieves resource analytics successfully (20 ms)
    POST /api/memory/gc
      √ triggers garbage collection when available (1 ms)
      √ handles GC unavailability gracefully (30 ms)
      √ validates request body (20 ms)
    POST /api/memory/cleanup
      √ performs resource cleanup successfully (18 ms)
      √ handles selective cleanup request (21 ms)
      √ validates resource types parameter (18 ms)
    GET /api/memory/alerts
      √ retrieves memory alerts successfully (17 ms)
      √ filters alerts by severity (54 ms)
      √ limits alert results (21 ms)
      √ validates severity parameter (20 ms)
      √ validates limit parameter (18 ms)
    GET /api/memory/health
      √ retrieves system health assessment successfully (25 ms)
      √ provides memory utilization status (22 ms)
      √ provides resource efficiency metrics (19 ms)
    Error Handling
      √ handles invalid authentication tokens (14 ms)
      √ handles missing authorization header (17 ms)
    Performance Validation
      √ memory metrics show realistic values (19 ms)
      √ resource analytics show meaningful data (20 ms)
      √ health assessment provides actionable insights (21 ms)
    Real-time Monitoring Integration
      √ status endpoint reflects current monitoring state (21 ms)
      √ metrics endpoint provides recent data (1530 ms)

[2026-01-28 13:44:45] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:44:45] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:44:45] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:44:45] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:44:46] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:46] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:46] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:46] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:46] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:46] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:46] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:46] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:46] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:46] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:44:46] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 13:44:46] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:47] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:44:47] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:44:47] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:44:47] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:44:47] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:44:47] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 13:44:47] info: [GET] /api/auth/profile
[2026-01-28 13:44:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1694MB
[2026-01-28 13:44:47] info: [auth:my6p3] Starting auth for GET /profile
[2026-01-28 13:44:47] info: [auth:my6p3] Token from cookie: false
[2026-01-28 13:44:47] warn: [auth:my6p3] Access token is required for GET /profile from ::ffff:127.0.0.1
[2026-01-28 13:44:47] info: [GET] /api/auth/profile - 401
[2026-01-28 13:44:47] info: [PUT] /api/auth/profile
[2026-01-28 13:44:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1695MB
[2026-01-28 13:44:47] info: [auth:pc3c75] Starting auth for PUT /profile
[2026-01-28 13:44:47] info: [auth:pc3c75] Token from cookie: false
[2026-01-28 13:44:47] warn: [auth:pc3c75] Access token is required for PUT /profile from ::ffff:127.0.0.1
[2026-01-28 13:44:47] info: [PUT] /api/auth/profile - 401
[2026-01-28 13:44:47] info: [DELETE] /api/users/account
[2026-01-28 13:44:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1691MB
[2026-01-28 13:44:47] info: [auth:0sae2] Starting auth for DELETE /users/account
[2026-01-28 13:44:47] info: [auth:0sae2] Token from cookie: false
[2026-01-28 13:44:47] warn: [auth:0sae2] Access token is required for DELETE /users/account from ::ffff:127.0.0.1
[2026-01-28 13:44:47] info: [DELETE] /api/users/account - 401
[2026-01-28 13:44:47] info: [GET] /api/horses
[2026-01-28 13:44:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1691MB
[2026-01-28 13:44:47] info: [auth:kw4puc] Starting auth for GET /horses
[2026-01-28 13:44:47] info: [auth:kw4puc] Token from cookie: false
[2026-01-28 13:44:47] warn: [auth:kw4puc] Access token is required for GET /horses from ::ffff:127.0.0.1
[2026-01-28 13:44:47] info: [GET] /api/horses - 401
[2026-01-28 13:44:47] info: [POST] /api/horses
[2026-01-28 13:44:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1692MB
[2026-01-28 13:44:47] info: [auth:mdrt7ml] Starting auth for POST /horses
[2026-01-28 13:44:47] info: [auth:mdrt7ml] Token from cookie: false
[2026-01-28 13:44:47] warn: [auth:mdrt7ml] Access token is required for POST /horses from ::ffff:127.0.0.1
[2026-01-28 13:44:47] info: [POST] /api/horses - 401
[2026-01-28 13:44:47] info: [GET] /api/auth/profile
[2026-01-28 13:44:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1692MB
[2026-01-28 13:44:47] info: [auth:srcm5m] Starting auth for GET /profile
[2026-01-28 13:44:47] info: [auth:srcm5m] Token from cookie: false
[2026-01-28 13:44:47] info: [auth:srcm5m] Token from header: true
[2026-01-28 13:44:47] warn: [auth:srcm5m] Verify failed: invalid signature
[2026-01-28 13:44:47] warn: [auth:srcm5m] Invalid or expired token for GET /profile from ::ffff:127.0.0.1
[2026-01-28 13:44:47] info: [GET] /api/auth/profile - 401
[2026-01-28 13:44:47] info: [GET] /api/auth/profile
[2026-01-28 13:44:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1690MB
[2026-01-28 13:44:47] info: [auth:yqm47m] Starting auth for GET /profile
[2026-01-28 13:44:47] info: [auth:yqm47m] Token from cookie: false
[2026-01-28 13:44:47] info: [auth:yqm47m] Token from header: true
[2026-01-28 13:44:47] warn: [auth:yqm47m] Verify failed: invalid algorithm
[2026-01-28 13:44:47] warn: [auth:yqm47m] Invalid or expired token for GET /profile from ::ffff:127.0.0.1
[2026-01-28 13:44:47] info: [GET] /api/auth/profile - 401
[2026-01-28 13:44:47] info: [GET] /api/auth/profile
[2026-01-28 13:44:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1701MB
[2026-01-28 13:44:47] info: [auth:yd0sic] Starting auth for GET /profile
[2026-01-28 13:44:47] info: [auth:yd0sic] Token from cookie: false
[2026-01-28 13:44:47] info: [auth:yd0sic] Token from header: true
[2026-01-28 13:44:47] warn: [auth:yd0sic] Invalid or expired token for GET /profile from ::ffff:127.0.0.1
[2026-01-28 13:44:47] info: [GET] /api/auth/profile - 401
[2026-01-28 13:44:47] info: [GET] /api/auth/profile
[2026-01-28 13:44:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1697MB
[2026-01-28 13:44:47] info: [auth:rafy0g] Starting auth for GET /profile
[2026-01-28 13:44:47] info: [auth:rafy0g] Token from cookie: false
[2026-01-28 13:44:47] info: [auth:rafy0g] Token from header: true
[2026-01-28 13:44:47] warn: [auth:rafy0g] Invalid or expired token for GET /profile from ::ffff:127.0.0.1
[2026-01-28 13:44:47] info: [GET] /api/auth/profile - 401
[2026-01-28 13:44:47] info: [GET] /api/auth/profile
[2026-01-28 13:44:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1693MB
[2026-01-28 13:44:47] info: [auth:bjyrsr] Starting auth for GET /profile
[2026-01-28 13:44:47] info: [auth:bjyrsr] Token from cookie: false
[2026-01-28 13:44:47] info: [auth:bjyrsr] Token from header: true
[2026-01-28 13:44:47] warn: [auth:bjyrsr] Invalid or expired token for GET /profile from ::ffff:127.0.0.1
[2026-01-28 13:44:47] info: [GET] /api/auth/profile - 401
[2026-01-28 13:44:47] info: [GET] /api/auth/profile
[2026-01-28 13:44:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1690MB
[2026-01-28 13:44:47] info: [auth:mm4r6] Starting auth for GET /profile
[2026-01-28 13:44:47] info: [auth:mm4r6] Token from cookie: false
[2026-01-28 13:44:47] info: [auth:mm4r6] Token from header: true
[2026-01-28 13:44:47] warn: [auth:mm4r6] Token expired (precheck)
[2026-01-28 13:44:47] warn: [auth:mm4r6] Token expired for GET /profile from ::ffff:127.0.0.1
[2026-01-28 13:44:47] info: [GET] /api/auth/profile - 401
[2026-01-28 13:44:47] info: [GET] /api/auth/profile
[2026-01-28 13:44:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1701MB
[2026-01-28 13:44:47] info: [auth:deyi5f] Starting auth for GET /profile
[2026-01-28 13:44:47] info: [auth:deyi5f] Token from cookie: false
[2026-01-28 13:44:47] info: [auth:deyi5f] Token from header: true
[2026-01-28 13:44:47] warn: [auth:deyi5f] Session too old
[2026-01-28 13:44:47] warn: [auth:deyi5f] Session expired. Please login again. for GET /profile from ::ffff:127.0.0.1
[2026-01-28 13:44:47] info: [GET] /api/auth/profile - 401
[2026-01-28 13:44:47] info: [GET] /api/auth/profile
[2026-01-28 13:44:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1697MB
[2026-01-28 13:44:47] info: [auth:jfcfpn] Starting auth for GET /profile
[2026-01-28 13:44:47] info: [auth:jfcfpn] Token from cookie: false
[2026-01-28 13:44:47] info: [auth:jfcfpn] Token from header: true
[2026-01-28 13:44:47] info: [auth:jfcfpn] Authenticated user ac9efff8-16af-431e-8d2c-956f077ab6e7
[2026-01-28 13:44:47] info: [GET] /api/auth/profile - 200
[2026-01-28 13:44:47] info: [GET] /api/auth/profile
[2026-01-28 13:44:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1694MB
[2026-01-28 13:44:47] info: [auth:3chwmb] Starting auth for GET /profile
[2026-01-28 13:44:47] info: [auth:3chwmb] Token from cookie: false
[2026-01-28 13:44:47] info: [auth:3chwmb] Token from header: true
[2026-01-28 13:44:47] info: [auth:3chwmb] Authenticated user 87048622-cad2-40aa-8ea3-94b44f875157
[2026-01-28 13:44:47] info: [GET] /api/auth/profile - 200
[2026-01-28 13:44:47] info: [GET] /api/auth/profile
[2026-01-28 13:44:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1691MB
[2026-01-28 13:44:47] info: [auth:3quqxh] Starting auth for GET /profile
[2026-01-28 13:44:47] info: [auth:3quqxh] Token from cookie: false
[2026-01-28 13:44:47] info: [auth:3quqxh] Token from header: true
[2026-01-28 13:44:47] info: [auth:3quqxh] Authenticated user 87048622-cad2-40aa-8ea3-94b44f875157
[2026-01-28 13:44:47] info: [GET] /api/auth/profile - 200
[2026-01-28 13:44:47] info: [GET] /api/auth/profile
[2026-01-28 13:44:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1702MB
[2026-01-28 13:44:47] info: [auth:ot0fdn] Starting auth for GET /profile
[2026-01-28 13:44:47] info: [auth:ot0fdn] Token from cookie: true
[2026-01-28 13:44:47] info: [auth:ot0fdn] Authenticated user 7197f20e-d656-4e6f-b5be-bc037084b49b
[2026-01-28 13:44:47] info: [GET] /api/auth/profile - 200
[2026-01-28 13:44:47] info: [GET] /api/auth/profile
[2026-01-28 13:44:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1697MB
[2026-01-28 13:44:47] info: [auth:ho2vcq] Starting auth for GET /profile
[2026-01-28 13:44:47] info: [auth:ho2vcq] Token from cookie: false
[2026-01-28 13:44:47] warn: [auth:ho2vcq] Access token is required for GET /profile from ::ffff:127.0.0.1
[2026-01-28 13:44:47] info: [GET] /api/auth/profile - 401
[2026-01-28 13:44:47] info: [GET] /api/auth/profile
[2026-01-28 13:44:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1693MB
[2026-01-28 13:44:47] info: [auth:8fzni] Starting auth for GET /profile
[2026-01-28 13:44:47] info: [auth:8fzni] Token from cookie: false
[2026-01-28 13:44:47] warn: [auth:8fzni] Access token is required for GET /profile from ::ffff:127.0.0.1
[2026-01-28 13:44:47] info: [GET] /api/auth/profile - 401
[2026-01-28 13:44:47] info: [GET] /api/auth/profile
[2026-01-28 13:44:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1703MB
[2026-01-28 13:44:47] info: [auth:r4u3pj] Starting auth for GET /profile
[2026-01-28 13:44:47] info: [auth:r4u3pj] Token from cookie: false
[2026-01-28 13:44:47] warn: [auth:r4u3pj] Access token is required for GET /profile from ::ffff:127.0.0.1
[2026-01-28 13:44:47] info: [GET] /api/auth/profile - 401
[2026-01-28 13:44:47] info: [GET] /api/auth/profile
[2026-01-28 13:44:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1697MB
[2026-01-28 13:44:47] info: [auth:pl3fnn] Starting auth for GET /profile
[2026-01-28 13:44:47] info: [auth:pl3fnn] Token from cookie: false
[2026-01-28 13:44:47] warn: [auth:pl3fnn] Access token is required for GET /profile from ::ffff:127.0.0.1
[2026-01-28 13:44:47] info: [GET] /api/auth/profile - 401
[2026-01-28 13:44:47] info: [GET] /api/auth/profile
[2026-01-28 13:44:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1693MB
[2026-01-28 13:44:47] info: [auth:r7xhml] Starting auth for GET /profile
[2026-01-28 13:44:47] info: [auth:r7xhml] Token from cookie: false
[2026-01-28 13:44:47] info: [auth:r7xhml] Token from header: true
[2026-01-28 13:44:47] info: [auth:r7xhml] Authenticated user 319861ec-d488-4b2c-abc8-80b35c192adb
[2026-01-28 13:44:47] info: [GET] /api/auth/profile - 200
[2026-01-28 13:44:47] info: [GET] /api/auth/profile
[2026-01-28 13:44:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1704MB
[2026-01-28 13:44:47] info: [auth:c1mbbm] Starting auth for GET /profile
[2026-01-28 13:44:47] info: [auth:c1mbbm] Token from cookie: true
[2026-01-28 13:44:47] info: [auth:c1mbbm] Authenticated user 7753ec4c-c65f-4748-9a0f-7f8217392489
[2026-01-28 13:44:47] info: [GET] /api/auth/profile - 200
[2026-01-28 13:44:47] info: [GET] /api/auth/profile
[2026-01-28 13:44:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1698MB
[2026-01-28 13:44:47] info: [auth:3syvz8] Starting auth for GET /profile
[2026-01-28 13:44:47] info: [auth:3syvz8] Token from cookie: true
[2026-01-28 13:44:47] info: [auth:3syvz8] Authenticated user 7753ec4c-c65f-4748-9a0f-7f8217392489
[2026-01-28 13:44:47] info: [GET] /api/auth/profile - 200
[2026-01-28 13:44:47] info: [GET] /api/auth/profile
[2026-01-28 13:44:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1694MB
[2026-01-28 13:44:47] info: [auth:0mi19l] Starting auth for GET /profile
[2026-01-28 13:44:47] info: [auth:0mi19l] Token from cookie: true
[2026-01-28 13:44:47] info: [auth:0mi19l] Authenticated user 7b677b91-c322-40c7-84a3-c3b2210e75c6
[2026-01-28 13:44:47] info: [GET] /api/auth/profile - 200
[2026-01-28 13:44:47] info: [GET] /api/users/8b289b02-0e4c-4ee0-8a4d-afe183c3e978
[2026-01-28 13:44:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1704MB
[2026-01-28 13:44:47] info: [auth:5ez2hb] Starting auth for GET /users/8b289b02-0e4c-4ee0-8a4d-afe183c3e978
[2026-01-28 13:44:47] info: [auth:5ez2hb] Token from cookie: false
[2026-01-28 13:44:47] info: [auth:5ez2hb] Token from header: true
[2026-01-28 13:44:47] info: [auth:5ez2hb] Authenticated user 94df93dd-8aa1-4e16-aec5-3510d6e42c11
[2026-01-28 13:44:47] info: [auth:gb9w4] Starting auth for GET /8b289b02-0e4c-4ee0-8a4d-afe183c3e978
[2026-01-28 13:44:47] info: [auth:gb9w4] Token from cookie: false
[2026-01-28 13:44:47] info: [auth:gb9w4] Token from header: true
[2026-01-28 13:44:47] info: [auth:gb9w4] Authenticated user 94df93dd-8aa1-4e16-aec5-3510d6e42c11
[2026-01-28 13:44:47] warn: [userRoutes] Self-access violation: user 94df93dd-8aa1-4e16-aec5-3510d6e42c11 attempted to access user 8b289b02-0e4c-4ee0-8a4d-afe183c3e978
[2026-01-28 13:44:47] info: [GET] /api/users/8b289b02-0e4c-4ee0-8a4d-afe183c3e978 - 403
[2026-01-28 13:44:47] info: [GET] /api/auth/profile
[2026-01-28 13:44:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1694MB
[2026-01-28 13:44:47] info: [auth:awpy5z] Starting auth for GET /profile
[2026-01-28 13:44:47] info: [auth:awpy5z] Token from cookie: false
[2026-01-28 13:44:47] info: [auth:awpy5z] Token from header: true
[2026-01-28 13:44:47] info: [auth:awpy5z] Authenticated user e107f2df-4912-472f-a833-2f0794198994
[2026-01-28 13:44:47] info: [GET] /api/auth/profile - 200
[2026-01-28 13:44:47] info: [GET] /api/auth/profile
[2026-01-28 13:44:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1705MB
[2026-01-28 13:44:47] info: [auth:4xezn4] Starting auth for GET /profile
[2026-01-28 13:44:47] info: [auth:4xezn4] Token from cookie: false
[2026-01-28 13:44:47] info: [auth:4xezn4] Token from header: true
[2026-01-28 13:44:47] info: [auth:4xezn4] Authenticated user 798d5b71-e407-4e09-8907-b89cd85e49d6
[2026-01-28 13:44:47] info: [GET] /api/auth/profile - 200
[2026-01-28 13:44:47] info: [GET] /api/auth/profile
[2026-01-28 13:44:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1700MB
[2026-01-28 13:44:47] info: [auth:u53ica] Starting auth for GET /profile
[2026-01-28 13:44:47] info: [auth:u53ica] Token from cookie: false
[2026-01-28 13:44:47] info: [auth:u53ica] Token from header: true
[2026-01-28 13:44:47] info: [auth:u53ica] Authenticated user 798d5b71-e407-4e09-8907-b89cd85e49d6
[2026-01-28 13:44:47] info: [GET] /api/auth/profile - 200
[2026-01-28 13:44:47] info: [GET] /api/auth/profile
[2026-01-28 13:44:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1697MB
[2026-01-28 13:44:47] info: [auth:jgln3h] Starting auth for GET /profile
[2026-01-28 13:44:47] info: [auth:jgln3h] Token from cookie: false
[2026-01-28 13:44:47] info: [auth:jgln3h] Token from header: true
[2026-01-28 13:44:47] warn: [auth:jgln3h] Verify failed: invalid signature
[2026-01-28 13:44:47] warn: [auth:jgln3h] Invalid or expired token for GET /profile from ::ffff:127.0.0.1
[2026-01-28 13:44:47] info: [GET] /api/auth/profile - 401
[2026-01-28 13:44:47] info: [GET] /api/auth/profile
[2026-01-28 13:44:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1695MB
[2026-01-28 13:44:47] info: [auth:fy1o] Starting auth for GET /profile
[2026-01-28 13:44:47] info: [auth:fy1o] Token from cookie: false
[2026-01-28 13:44:47] info: [auth:fy1o] Token from header: true
[2026-01-28 13:44:47] warn: [auth:fy1o] Invalid or expired token for GET /profile from ::ffff:127.0.0.1
[2026-01-28 13:44:47] info: [GET] /api/auth/profile - 401
[2026-01-28 13:44:47] info: [GET] /api/auth/profile
[2026-01-28 13:44:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1706MB
[2026-01-28 13:44:47] info: [auth:hniynp] Starting auth for GET /profile
[2026-01-28 13:44:47] info: [auth:hniynp] Token from cookie: false
[2026-01-28 13:44:47] info: [auth:hniynp] Token from header: true
[2026-01-28 13:44:47] info: [auth:hniynp] Authenticated user 1' OR '1'='1
[2026-01-28 13:44:47] error: [authController.getProfile] Error retrieving profile: User not found
[2026-01-28 13:44:47] error: [GET] /api/auth/profile - ERROR
[2026-01-28 13:44:47] error: Error User not found
[2026-01-28 13:44:47] info: [GET] /api/auth/profile - 404
[2026-01-28 13:44:47] info: [GET] /api/auth/profile
[2026-01-28 13:44:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1704MB
[2026-01-28 13:44:47] info: [auth:idhsuu] Starting auth for GET /profile
[2026-01-28 13:44:47] info: [auth:idhsuu] Token from cookie: false
[2026-01-28 13:44:47] info: [auth:idhsuu] Token from header: true
[2026-01-28 13:44:47] info: [auth:idhsuu] Authenticated user undefined
[2026-01-28 13:44:47] error: [authController.getProfile] Error retrieving profile: Authentication error, user not found in request
[2026-01-28 13:44:47] error: [GET] /api/auth/profile - ERROR
[2026-01-28 13:44:47] error: Error Authentication error, user not found in request
[2026-01-28 13:44:47] info: [GET] /api/auth/profile - 401
[2026-01-28 13:44:47] info: [GET] /api/users/profile
[2026-01-28 13:44:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1703MB
[2026-01-28 13:44:47] info: [auth:d6tjbe] Starting auth for GET /users/profile
[2026-01-28 13:44:47] info: [auth:d6tjbe] Token from cookie: false
[2026-01-28 13:44:47] info: [auth:d6tjbe] Token from header: true
[2026-01-28 13:44:47] info: [auth:d6tjbe] Authenticated user not-a-number
[2026-01-28 13:44:47] info: [auth:2i90wq] Starting auth for GET /profile
[2026-01-28 13:44:47] info: [auth:2i90wq] Token from cookie: false
[2026-01-28 13:44:47] info: [auth:2i90wq] Token from header: true
[2026-01-28 13:44:47] info: [auth:2i90wq] Authenticated user not-a-number
[2026-01-28 13:44:47] warn: [userRoutes] Validation errors for /:id: [{"type":"field","value":"profile","msg":"User ID must be a valid UUID","path":"id","location":"params"}]
[2026-01-28 13:44:47] info: [GET] /api/users/profile - 400
PASS __tests__/integration/security/auth-bypass-attempts.test.mjs
  Authentication Bypass Attempts Integration Tests
    Direct Endpoint Access Without Authentication
      √ should reject GET /api/users/profile without token (89 ms)
      √ should reject PUT /api/users/profile without token (35 ms)
      √ should reject DELETE /api/users/account without token (27 ms)
      √ should reject GET /api/horses without token (27 ms)
      √ should reject POST /api/horses without token (28 ms)
    Forged JWT Tokens
      √ should reject token with wrong signature (22 ms)
      √ should reject token signed with different algorithm (23 ms)
      √ should reject token with modified payload (23 ms)
      √ should reject token with algorithm none (24 ms)
      √ should reject completely malformed token (23 ms)
    Expired Token Usage
      √ should reject JWT token past expiration time (37 ms)
      √ should reject token older than 7 days (CWE-613) (29 ms)
      √ should accept token exactly 7 days old (31 ms)
    Token Replay Attacks
      √ should allow same token for multiple valid requests (expected behavior) (43 ms)
      √ should accept token from both cookie and header (cookie preferred) (25 ms)
    Authorization Header Manipulation
      √ should reject token without Bearer prefix (20 ms)
      √ should reject token with wrong scheme (20 ms)
      √ should reject empty Authorization header (22 ms)
      √ should reject Authorization header with only Bearer (17 ms)
      √ should reject multiple Authorization headers (24 ms)
    Cookie Theft Simulation
      √ should reject stolen cookie with different IP (if IP binding enabled) (42 ms)
      √ should reject cookie with HttpOnly flag missing (client-side) (23 ms)
    Multi-User Session Conflicts
      √ should prevent user A from accessing user B resources with valid token (37 ms)
      √ should allow user to access their own resources only (24 ms)
      √ should prevent concurrent logins from invalidating each other (stateless tokens) (47 ms)
    Edge Cases and Attack Vectors
      √ should reject token with null bytes in payload (20 ms)
      √ should reject extremely long token (DoS prevention) (26 ms)
      √ should reject token with SQL injection in payload (33 ms)
      √ should handle token with missing userId gracefully (28 ms)
      √ should reject token with non-numeric userId (33 ms)

[2026-01-28 13:44:48] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:44:48] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:44:48] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:44:48] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:44:49] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:49] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:49] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:49] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:49] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:49] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:49] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:49] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:49] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:49] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:44:49] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 13:44:49] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:49] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:44:49] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:44:49] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:44:49] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:44:49] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:44:49] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 13:44:49] info: [POST] /api/traits/discover/146903
[2026-01-28 13:44:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1752MB
[2026-01-28 13:44:49] info: [auth:rlpi5] Starting auth for POST /traits/discover/146903
[2026-01-28 13:44:49] info: [auth:rlpi5] Token from cookie: false
[2026-01-28 13:44:49] info: [auth:rlpi5] Token from header: true
[2026-01-28 13:44:49] info: [auth:rlpi5] Authenticated user test-trait-discovery-user
[2026-01-28 13:44:49] info: [ownership] Validated ownership: user test-trait-discovery-user owns horse 146903
[2026-01-28 13:44:49] info: [traitController.discoverTraits] Triggering trait discovery for horse 146903
[2026-01-28 13:44:49] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 146903
[2026-01-28 13:44:49] info: [traitDiscovery.revealTraits] Found 5 hidden traits for horse 146903
[2026-01-28 13:44:49] info: [traitDiscovery.revealTraits] Successfully revealed 3 traits for horse 146903: athletic, calm, bold
[2026-01-28 13:44:49] info: [traitController.discoverTraits] Discovered 3 traits for horse 146903 (High Bond Foal)
[2026-01-28 13:44:49] info: [POST] /api/traits/discover/146903 - 200
[2026-01-28 13:44:49] info: [POST] /api/traits/discover/146904
[2026-01-28 13:44:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1762MB
[2026-01-28 13:44:49] info: [auth:0cvdw9] Starting auth for POST /traits/discover/146904
[2026-01-28 13:44:49] info: [auth:0cvdw9] Token from cookie: false
[2026-01-28 13:44:49] info: [auth:0cvdw9] Token from header: true
[2026-01-28 13:44:49] info: [auth:0cvdw9] Authenticated user test-trait-discovery-user
[2026-01-28 13:44:49] info: [ownership] Validated ownership: user test-trait-discovery-user owns horse 146904
[2026-01-28 13:44:49] info: [traitController.discoverTraits] Triggering trait discovery for horse 146904
[2026-01-28 13:44:49] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 146904
[2026-01-28 13:44:49] info: [traitDiscovery.revealTraits] Found 3 hidden traits for horse 146904
[2026-01-28 13:44:49] info: [traitDiscovery.revealTraits] No discovery conditions met for horse 146904
[2026-01-28 13:44:49] info: [POST] /api/traits/discover/146904 - 200
[2026-01-28 13:44:49] info: [POST] /api/traits/discover/146905
[2026-01-28 13:44:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1751MB
[2026-01-28 13:44:49] info: [auth:f5szc] Starting auth for POST /traits/discover/146905
[2026-01-28 13:44:49] info: [auth:f5szc] Token from cookie: false
[2026-01-28 13:44:49] info: [auth:f5szc] Token from header: true
[2026-01-28 13:44:49] info: [auth:f5szc] Authenticated user test-trait-discovery-user
[2026-01-28 13:44:49] info: [ownership] Validated ownership: user test-trait-discovery-user owns horse 146905
[2026-01-28 13:44:49] info: [traitController.discoverTraits] Triggering trait discovery for horse 146905
[2026-01-28 13:44:49] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 146905
[2026-01-28 13:44:49] info: [traitDiscovery.revealTraits] Found 0 hidden traits for horse 146905
[2026-01-28 13:44:49] info: [traitDiscovery.revealTraits] No hidden traits to reveal for horse 146905
[2026-01-28 13:44:49] info: [POST] /api/traits/discover/146905 - 200
[2026-01-28 13:44:49] info: [POST] /api/traits/discover/99999
[2026-01-28 13:44:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1757MB
[2026-01-28 13:44:49] info: [auth:2bidj8] Starting auth for POST /traits/discover/99999
[2026-01-28 13:44:49] info: [auth:2bidj8] Token from cookie: false
[2026-01-28 13:44:49] info: [auth:2bidj8] Token from header: true
[2026-01-28 13:44:49] info: [auth:2bidj8] Authenticated user test-trait-discovery-user
[2026-01-28 13:44:49] warn: [ownership] horse 99999 not found or not owned by user test-trait-discovery-user
[2026-01-28 13:44:49] info: [POST] /api/traits/discover/99999 - 404
[2026-01-28 13:44:49] info: [POST] /api/traits/discover/invalid
[2026-01-28 13:44:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1757MB
[2026-01-28 13:44:49] info: [auth:3wplbs] Starting auth for POST /traits/discover/invalid
[2026-01-28 13:44:49] info: [auth:3wplbs] Token from cookie: false
[2026-01-28 13:44:49] info: [auth:3wplbs] Token from header: true
[2026-01-28 13:44:49] info: [auth:3wplbs] Authenticated user test-trait-discovery-user
[2026-01-28 13:44:49] warn: [traitRoutes] Validation errors: [{"type":"field","value":"invalid","msg":"Horse ID must be a positive integer","path":"horseId","location":"params"}]
[2026-01-28 13:44:49] info: [POST] /api/traits/discover/invalid - 400
[2026-01-28 13:44:49] info: [GET] /api/traits/progress/146903
[2026-01-28 13:44:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1758MB
[2026-01-28 13:44:49] info: [auth:hk8gap] Starting auth for GET /traits/progress/146903
[2026-01-28 13:44:49] info: [auth:hk8gap] Token from cookie: false
[2026-01-28 13:44:49] info: [auth:hk8gap] Token from header: true
[2026-01-28 13:44:49] info: [auth:hk8gap] Authenticated user test-trait-discovery-user
[2026-01-28 13:44:49] info: [ownership] Validated ownership: user test-trait-discovery-user owns horse 146903
[2026-01-28 13:44:49] info: [traitRoutes] GET /progress/146903 - Getting discovery progress
[2026-01-28 13:44:49] info: [GET] /api/traits/progress/146903 - 200
[2026-01-28 13:44:49] info: [GET] /api/traits/progress/99999
[2026-01-28 13:44:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1762MB
[2026-01-28 13:44:49] info: [auth:ttojx9] Starting auth for GET /traits/progress/99999
[2026-01-28 13:44:49] info: [auth:ttojx9] Token from cookie: false
[2026-01-28 13:44:49] info: [auth:ttojx9] Token from header: true
[2026-01-28 13:44:49] info: [auth:ttojx9] Authenticated user test-trait-discovery-user
[2026-01-28 13:44:49] warn: [ownership] horse 99999 not found or not owned by user test-trait-discovery-user
[2026-01-28 13:44:49] info: [GET] /api/traits/progress/99999 - 404
[2026-01-28 13:44:49] info: [POST] /api/traits/batch-discover
[2026-01-28 13:44:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1764MB
[2026-01-28 13:44:49] info: [auth:w3dmh8] Starting auth for POST /traits/batch-discover
[2026-01-28 13:44:49] info: [auth:w3dmh8] Token from cookie: false
[2026-01-28 13:44:49] info: [auth:w3dmh8] Token from header: true
[2026-01-28 13:44:49] info: [auth:w3dmh8] Authenticated user test-trait-discovery-user
[2026-01-28 13:44:49] info: [traitController.batchDiscoverTraits] Processing batch discovery for 2 horses
[2026-01-28 13:44:49] info: [ownership] Found owned horse 146903 for user test-trait-discovery-user
[2026-01-28 13:44:49] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 146903
[2026-01-28 13:44:49] info: [traitDiscovery.revealTraits] Found 2 hidden traits for horse 146903
[2026-01-28 13:44:49] info: [traitDiscovery.revealTraits] Successfully revealed 2 traits for horse 146903: intelligent, resilient
[2026-01-28 13:44:49] info: [ownership] Found owned horse 146904 for user test-trait-discovery-user
[2026-01-28 13:44:49] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 146904
[2026-01-28 13:44:49] info: [traitDiscovery.revealTraits] Found 3 hidden traits for horse 146904
[2026-01-28 13:44:49] info: [traitDiscovery.revealTraits] No discovery conditions met for horse 146904
[2026-01-28 13:44:49] info: [POST] /api/traits/batch-discover - 200
[2026-01-28 13:44:49] info: [POST] /api/traits/batch-discover
[2026-01-28 13:44:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1761MB
[2026-01-28 13:44:49] info: [auth:xihyqq] Starting auth for POST /traits/batch-discover
[2026-01-28 13:44:49] info: [auth:xihyqq] Token from cookie: false
[2026-01-28 13:44:49] info: [auth:xihyqq] Token from header: true
[2026-01-28 13:44:49] info: [auth:xihyqq] Authenticated user test-trait-discovery-user
[2026-01-28 13:44:49] info: [traitController.batchDiscoverTraits] Processing batch discovery for 3 horses
[2026-01-28 13:44:49] info: [ownership] Found owned horse 146903 for user test-trait-discovery-user
[2026-01-28 13:44:49] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 146903
[2026-01-28 13:44:49] info: [traitDiscovery.revealTraits] Found 0 hidden traits for horse 146903
[2026-01-28 13:44:49] info: [traitDiscovery.revealTraits] No hidden traits to reveal for horse 146903
[2026-01-28 13:44:49] warn: [ownership] horse 99999 not found or not owned by user test-trait-discovery-user
[2026-01-28 13:44:49] info: [ownership] Found owned horse 146905 for user test-trait-discovery-user
[2026-01-28 13:44:49] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 146905
[2026-01-28 13:44:49] info: [traitDiscovery.revealTraits] Found 0 hidden traits for horse 146905
[2026-01-28 13:44:49] info: [traitDiscovery.revealTraits] No hidden traits to reveal for horse 146905
[2026-01-28 13:44:49] info: [POST] /api/traits/batch-discover - 200
[2026-01-28 13:44:49] info: [POST] /api/traits/batch-discover
[2026-01-28 13:44:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1754MB
[2026-01-28 13:44:49] info: [auth:a8iin4] Starting auth for POST /traits/batch-discover
[2026-01-28 13:44:49] info: [auth:a8iin4] Token from cookie: false
[2026-01-28 13:44:49] info: [auth:a8iin4] Token from header: true
[2026-01-28 13:44:49] info: [auth:a8iin4] Authenticated user test-trait-discovery-user
[2026-01-28 13:44:49] warn: [traitRoutes] Validation errors: [{"type":"field","value":[],"msg":"horseIds must be an array with 1-10 elements","path":"horseIds","location":"body"}]
[2026-01-28 13:44:49] info: [POST] /api/traits/batch-discover - 400
[2026-01-28 13:44:49] info: [GET] /api/traits/conditions
[2026-01-28 13:44:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1754MB
[2026-01-28 13:44:49] info: [auth:pb8tc] Starting auth for GET /traits/conditions
[2026-01-28 13:44:49] info: [auth:pb8tc] Token from cookie: false
[2026-01-28 13:44:49] info: [auth:pb8tc] Token from header: true
[2026-01-28 13:44:49] info: [auth:pb8tc] Authenticated user test-trait-discovery-user
[2026-01-28 13:44:49] info: [traitRoutes] GET /conditions - Getting discovery conditions
[2026-01-28 13:44:49] info: [GET] /api/traits/conditions - 200
[2026-01-28 13:44:49] info: [POST] /api/traits/check-conditions/146903
[2026-01-28 13:44:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1763MB
[2026-01-28 13:44:49] info: [auth:esknog] Starting auth for POST /traits/check-conditions/146903
[2026-01-28 13:44:49] info: [auth:esknog] Token from cookie: false
[2026-01-28 13:44:49] info: [auth:esknog] Token from header: true
[2026-01-28 13:44:49] info: [auth:esknog] Authenticated user test-trait-discovery-user
[2026-01-28 13:44:49] info: [ownership] Validated ownership: user test-trait-discovery-user owns horse 146903
[2026-01-28 13:44:49] info: [traitRoutes] POST /check-conditions/146903 - Checking conditions without discovery
[2026-01-28 13:44:49] info: [POST] /api/traits/check-conditions/146903 - 200
[2026-01-28 13:44:49] info: [POST] /api/traits/check-conditions/99999
[2026-01-28 13:44:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1755MB
[2026-01-28 13:44:49] info: [auth:mxwsfg] Starting auth for POST /traits/check-conditions/99999
[2026-01-28 13:44:49] info: [auth:mxwsfg] Token from cookie: false
[2026-01-28 13:44:49] info: [auth:mxwsfg] Token from header: true
[2026-01-28 13:44:49] info: [auth:mxwsfg] Authenticated user test-trait-discovery-user
[2026-01-28 13:44:49] warn: [ownership] horse 99999 not found or not owned by user test-trait-discovery-user
[2026-01-28 13:44:49] info: [POST] /api/traits/check-conditions/99999 - 404
[2026-01-28 13:44:49] info: [GET] /api/traits/progress/146906
[2026-01-28 13:44:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1758MB
[2026-01-28 13:44:49] info: [auth:kb3axa] Starting auth for GET /traits/progress/146906
[2026-01-28 13:44:49] info: [auth:kb3axa] Token from cookie: false
[2026-01-28 13:44:49] info: [auth:kb3axa] Token from header: true
[2026-01-28 13:44:49] info: [auth:kb3axa] Authenticated user test-trait-discovery-user
[2026-01-28 13:44:49] info: [ownership] Validated ownership: user test-trait-discovery-user owns horse 146906
[2026-01-28 13:44:49] info: [traitRoutes] GET /progress/146906 - Getting discovery progress
[2026-01-28 13:44:49] info: [GET] /api/traits/progress/146906 - 200
[2026-01-28 13:44:49] info: [POST] /api/traits/check-conditions/146906
[2026-01-28 13:44:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1762MB
[2026-01-28 13:44:49] info: [auth:h8ohkr] Starting auth for POST /traits/check-conditions/146906
[2026-01-28 13:44:49] info: [auth:h8ohkr] Token from cookie: false
[2026-01-28 13:44:49] info: [auth:h8ohkr] Token from header: true
[2026-01-28 13:44:49] info: [auth:h8ohkr] Authenticated user test-trait-discovery-user
[2026-01-28 13:44:49] info: [ownership] Validated ownership: user test-trait-discovery-user owns horse 146906
[2026-01-28 13:44:49] info: [traitRoutes] POST /check-conditions/146906 - Checking conditions without discovery
[2026-01-28 13:44:49] info: [POST] /api/traits/check-conditions/146906 - 200
[2026-01-28 13:44:49] info: [POST] /api/traits/discover/146906
[2026-01-28 13:44:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1764MB
[2026-01-28 13:44:49] info: [auth:benm8j] Starting auth for POST /traits/discover/146906
[2026-01-28 13:44:49] info: [auth:benm8j] Token from cookie: false
[2026-01-28 13:44:49] info: [auth:benm8j] Token from header: true
[2026-01-28 13:44:49] info: [auth:benm8j] Authenticated user test-trait-discovery-user
[2026-01-28 13:44:49] info: [ownership] Validated ownership: user test-trait-discovery-user owns horse 146906
[2026-01-28 13:44:49] info: [traitController.discoverTraits] Triggering trait discovery for horse 146906
[2026-01-28 13:44:49] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 146906
[2026-01-28 13:44:49] info: [traitDiscovery.revealTraits] Found 5 hidden traits for horse 146906
[2026-01-28 13:44:49] info: [traitDiscovery.revealTraits] Successfully revealed 3 traits for horse 146906: intelligent, resilient, calm
[2026-01-28 13:44:49] info: [traitController.discoverTraits] Discovered 3 traits for horse 146906 (Fresh Workflow Foal)
[2026-01-28 13:44:49] info: [POST] /api/traits/discover/146906 - 200
[2026-01-28 13:44:49] info: [GET] /api/traits/progress/146906
[2026-01-28 13:44:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1755MB
[2026-01-28 13:44:49] info: [auth:pdcbz] Starting auth for GET /traits/progress/146906
[2026-01-28 13:44:49] info: [auth:pdcbz] Token from cookie: false
[2026-01-28 13:44:49] info: [auth:pdcbz] Token from header: true
[2026-01-28 13:44:49] info: [auth:pdcbz] Authenticated user test-trait-discovery-user
[2026-01-28 13:44:49] info: [ownership] Validated ownership: user test-trait-discovery-user owns horse 146906
[2026-01-28 13:44:49] info: [traitRoutes] GET /progress/146906 - Getting discovery progress
[2026-01-28 13:44:49] info: [GET] /api/traits/progress/146906 - 200
PASS tests/traitDiscoveryIntegration.test.mjs
  Trait Discovery API Integration Tests
    POST /api/traits/discover/:foalId
      √ should discover traits for foal with high bonding (65 ms)
      √ should handle foal with no discoverable traits (39 ms)
      √ should allow trait discovery for adult horses (34 ms)
      √ should return 404 for non-existent foal (28 ms)
      √ should return 400 for invalid foal ID (26 ms)
    GET /api/traits/progress/:foalId
      √ should return discovery progress for foal (38 ms)
      √ should return 404 for non-existent foal (26 ms)
    POST /api/traits/batch-discover
      √ should process multiple foals in batch (61 ms)
      √ should handle mixed valid and invalid foals (45 ms)
      √ should return 400 for invalid request body (27 ms)
    GET /api/traits/conditions
      √ should return all discovery conditions (36 ms)
    POST /api/traits/check-conditions/:foalId
      √ should check conditions without triggering discovery (40 ms)
      √ should return 404 for non-existent foal (29 ms)
    Real-time trait discovery workflow
      √ should demonstrate complete trait discovery workflow (151 ms)

[2026-01-28 13:44:50] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:44:50] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:44:50] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:44:50] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:44:51] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:51] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:51] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:51] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:51] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:51] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:51] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:51] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:51] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:51] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:44:51] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 13:44:51] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:51] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:44:51] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:44:51] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:44:51] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:44:51] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:44:51] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 13:44:51] info: [GET] /api/horses/trainable/6c45c641-3cb4-4167-9a15-9151ab36f710
[2026-01-28 13:44:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1811MB
[2026-01-28 13:44:51] info: [auth:mcqlaf] Starting auth for GET /horses/trainable/6c45c641-3cb4-4167-9a15-9151ab36f710
[2026-01-28 13:44:51] info: [auth:mcqlaf] Token from cookie: false
[2026-01-28 13:44:51] info: [auth:mcqlaf] Token from header: true
[2026-01-28 13:44:51] info: [auth:mcqlaf] Authenticated user 6c45c641-3cb4-4167-9a15-9151ab36f710
[2026-01-28 13:44:51] info: [trainingController.getTrainableHorses] Getting trainable horses for user 6c45c641-3cb4-4167-9a15-9151ab36f710
[2026-01-28 13:44:51] info: [trainingModel.getRecentTrainingForMultipleHorses] Fetching latest training for 1 horses
[2026-01-28 13:44:51] info: [trainingController.getTrainableHorses] Found 1 trainable horses for user 6c45c641-3cb4-4167-9a15-9151ab36f710
[2026-01-28 13:44:51] info: [GET] /api/horses/trainable/6c45c641-3cb4-4167-9a15-9151ab36f710 - 200
[2026-01-28 13:44:51] info: [GET] /api/horses/trainable/6c45c641-3cb4-4167-9a15-9151ab36f710
[2026-01-28 13:44:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1814MB
[2026-01-28 13:44:51] info: [auth:4obyo8c] Starting auth for GET /horses/trainable/6c45c641-3cb4-4167-9a15-9151ab36f710
[2026-01-28 13:44:51] info: [auth:4obyo8c] Token from cookie: false
[2026-01-28 13:44:51] info: [auth:4obyo8c] Token from header: true
[2026-01-28 13:44:51] info: [auth:4obyo8c] Authenticated user 6c45c641-3cb4-4167-9a15-9151ab36f710
[2026-01-28 13:44:51] info: [GET] /api/horses/trainable/6c45c641-3cb4-4167-9a15-9151ab36f710 - 200
[2026-01-28 13:44:51] info: [POST] /api/training/train
[2026-01-28 13:44:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1815MB
[2026-01-28 13:44:51] info: [auth:hb78gv] Starting auth for POST /training/train
[2026-01-28 13:44:51] info: [auth:hb78gv] Token from cookie: false
[2026-01-28 13:44:51] info: [auth:hb78gv] Token from header: true
[2026-01-28 13:44:51] info: [auth:hb78gv] Authenticated user 6c45c641-3cb4-4167-9a15-9151ab36f710
[2026-01-28 13:44:51] info: [ownership] Found owned horse 146907 for user 6c45c641-3cb4-4167-9a15-9151ab36f710
[2026-01-28 13:44:51] info: [trainingController.trainRouteHandler] Training request for horse 146907 in Racing
[2026-01-28 13:44:51] info: [trainingController.trainHorse] Attempting to train horse 146907 in Racing
[2026-01-28 13:44:51] info: [trainingController.canTrain] Checking training eligibility for horse 146907 in Racing
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Getting age for horse 146907
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Horse 146907 is 4 years old
[2026-01-28 13:44:51] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146907 across all disciplines
[2026-01-28 13:44:51] info: [trainingModel.getAnyRecentTraining] No training records found for horse 146907
[2026-01-28 13:44:51] info: [trainingController.canTrain] Horse 146907 is eligible to train in Racing
[2026-01-28 13:44:51] info: [horseModel.getHorseById] Successfully found horse: TestHorse_1769625891511_q3xgyf (ID: 146907)
[2026-01-28 13:44:51] info: [trainingController.trainHorse] Horse 146907 has traits: 
[2026-01-28 13:44:51] info: [trainingModel.logTrainingSession] Logging training session for horse 146907 in Racing
[2026-01-28 13:44:51] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 8986
[2026-01-28 13:44:51] info: [horseModel.incrementDisciplineScore] Incrementing Racing score for horse 146907 by +5
[2026-01-28 13:44:51] info: [horseModel.updateDisciplineScore] Updating Racing score for horse 146907 by +5
[2026-01-28 13:44:51] info: [horseModel.updateDisciplineScore] Successfully updated Racing score for horse 146907: 0 -> 5
[2026-01-28 13:44:51] info: [horseModel.incrementDisciplineScore] Successfully incremented Racing score for horse 146907
[2026-01-28 13:44:51] info: [xpLogModel.logXpEvent] Logging XP event: User 6c45c641-3cb4-4167-9a15-9151ab36f710, Amount: 5, Reason: Trained horse TestHorse_1769625891511_q3xgyf in Racing
[2026-01-28 13:44:51] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 4437, User 6c45c641-3cb4-4167-9a15-9151ab36f710, Amount: 5
[2026-01-28 13:44:51] info: [trainingController.trainHorse] Awarded 5 XP to user 6c45c641-3cb4-4167-9a15-9151ab36f710 for training
[2026-01-28 13:44:51] info: [trainingController.trainHorse] Successfully trained horse 146907 in Racing (Log ID: 8986, Score +5)
[2026-01-28 13:44:51] info: [POST] /api/training/train - 200
[2026-01-28 13:44:51] info: [GET] /api/horses/trainable/6c45c641-3cb4-4167-9a15-9151ab36f710
[2026-01-28 13:44:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1818MB
[2026-01-28 13:44:51] info: [auth:q7942p] Starting auth for GET /horses/trainable/6c45c641-3cb4-4167-9a15-9151ab36f710
[2026-01-28 13:44:51] info: [auth:q7942p] Token from cookie: false
[2026-01-28 13:44:51] info: [auth:q7942p] Token from header: true
[2026-01-28 13:44:51] info: [auth:q7942p] Authenticated user 6c45c641-3cb4-4167-9a15-9151ab36f710
[2026-01-28 13:44:51] info: [trainingController.getTrainableHorses] Getting trainable horses for user 6c45c641-3cb4-4167-9a15-9151ab36f710
[2026-01-28 13:44:51] info: [trainingModel.getRecentTrainingForMultipleHorses] Fetching latest training for 1 horses
[2026-01-28 13:44:51] info: [trainingController.getTrainableHorses] Found 0 trainable horses for user 6c45c641-3cb4-4167-9a15-9151ab36f710
[2026-01-28 13:44:51] info: [GET] /api/horses/trainable/6c45c641-3cb4-4167-9a15-9151ab36f710 - 200
[2026-01-28 13:44:51] info: [GET] /api/training/status/146907/Racing
[2026-01-28 13:44:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1819MB
[2026-01-28 13:44:51] info: [auth:h65mvw] Starting auth for GET /training/status/146907/Racing
[2026-01-28 13:44:51] info: [auth:h65mvw] Token from cookie: false
[2026-01-28 13:44:51] info: [auth:h65mvw] Token from header: true
[2026-01-28 13:44:51] info: [auth:h65mvw] Authenticated user 6c45c641-3cb4-4167-9a15-9151ab36f710
[2026-01-28 13:44:51] info: [ownership] Validated ownership: user 6c45c641-3cb4-4167-9a15-9151ab36f710 owns horse 146907
[2026-01-28 13:44:51] info: [trainingRoutes.getStatus] User 6c45c641-3cb4-4167-9a15-9151ab36f710 getting training status for horse 146907 in Racing
[2026-01-28 13:44:51] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 146907 in Racing
[2026-01-28 13:44:51] info: [trainingController.canTrain] Checking training eligibility for horse 146907 in Racing
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Getting age for horse 146907
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Horse 146907 is 4 years old
[2026-01-28 13:44:51] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146907 across all disciplines
[2026-01-28 13:44:51] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 146907: Wed Jan 28 2026 13:44:51 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 13:44:51] info: [trainingController.canTrain] Horse 146907 still in cooldown for any training (7 days remaining)
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Getting age for horse 146907
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Horse 146907 is 4 years old
[2026-01-28 13:44:51] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 146907 in Racing
[2026-01-28 13:44:51] info: [trainingModel.getLastTrainingDate] Last training date for horse 146907 in Racing: Wed Jan 28 2026 13:44:51 GMT-0500 (Eastern Standard Time)
[2026-01-28 13:44:51] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146907 across all disciplines
[2026-01-28 13:44:51] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 146907: Wed Jan 28 2026 13:44:51 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 13:44:51] info: [GET] /api/training/status/146907/Racing - 200
[2026-01-28 13:44:51] info: [GET] /api/training/status/146907
[2026-01-28 13:44:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1814MB
[2026-01-28 13:44:51] info: [auth:nivfls] Starting auth for GET /training/status/146907
[2026-01-28 13:44:51] info: [auth:nivfls] Token from cookie: false
[2026-01-28 13:44:51] info: [auth:nivfls] Token from header: true
[2026-01-28 13:44:51] info: [auth:nivfls] Authenticated user 6c45c641-3cb4-4167-9a15-9151ab36f710
[2026-01-28 13:44:51] info: [ownership] Validated ownership: user 6c45c641-3cb4-4167-9a15-9151ab36f710 owns horse 146907
[2026-01-28 13:44:51] info: [trainingRoutes.getStatusAll] User 6c45c641-3cb4-4167-9a15-9151ab36f710 getting all training statuses for horse 146907
[2026-01-28 13:44:51] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 146907 in Western Pleasure
[2026-01-28 13:44:51] info: [trainingController.canTrain] Checking training eligibility for horse 146907 in Western Pleasure
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Getting age for horse 146907
[2026-01-28 13:44:51] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 146907 in Reining
[2026-01-28 13:44:51] info: [trainingController.canTrain] Checking training eligibility for horse 146907 in Reining
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Getting age for horse 146907
[2026-01-28 13:44:51] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 146907 in Cutting
[2026-01-28 13:44:51] info: [trainingController.canTrain] Checking training eligibility for horse 146907 in Cutting
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Getting age for horse 146907
[2026-01-28 13:44:51] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 146907 in Barrel Racing
[2026-01-28 13:44:51] info: [trainingController.canTrain] Checking training eligibility for horse 146907 in Barrel Racing
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Getting age for horse 146907
[2026-01-28 13:44:51] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 146907 in Roping
[2026-01-28 13:44:51] info: [trainingController.canTrain] Checking training eligibility for horse 146907 in Roping
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Getting age for horse 146907
[2026-01-28 13:44:51] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 146907 in Team Penning
[2026-01-28 13:44:51] info: [trainingController.canTrain] Checking training eligibility for horse 146907 in Team Penning
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Getting age for horse 146907
[2026-01-28 13:44:51] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 146907 in Rodeo
[2026-01-28 13:44:51] info: [trainingController.canTrain] Checking training eligibility for horse 146907 in Rodeo
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Getting age for horse 146907
[2026-01-28 13:44:51] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 146907 in Hunter
[2026-01-28 13:44:51] info: [trainingController.canTrain] Checking training eligibility for horse 146907 in Hunter
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Getting age for horse 146907
[2026-01-28 13:44:51] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 146907 in Saddleseat
[2026-01-28 13:44:51] info: [trainingController.canTrain] Checking training eligibility for horse 146907 in Saddleseat
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Getting age for horse 146907
[2026-01-28 13:44:51] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 146907 in Endurance
[2026-01-28 13:44:51] info: [trainingController.canTrain] Checking training eligibility for horse 146907 in Endurance
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Getting age for horse 146907
[2026-01-28 13:44:51] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 146907 in Eventing
[2026-01-28 13:44:51] info: [trainingController.canTrain] Checking training eligibility for horse 146907 in Eventing
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Getting age for horse 146907
[2026-01-28 13:44:51] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 146907 in Dressage
[2026-01-28 13:44:51] info: [trainingController.canTrain] Checking training eligibility for horse 146907 in Dressage
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Getting age for horse 146907
[2026-01-28 13:44:51] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 146907 in Show Jumping
[2026-01-28 13:44:51] info: [trainingController.canTrain] Checking training eligibility for horse 146907 in Show Jumping
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Getting age for horse 146907
[2026-01-28 13:44:51] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 146907 in Vaulting
[2026-01-28 13:44:51] info: [trainingController.canTrain] Checking training eligibility for horse 146907 in Vaulting
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Getting age for horse 146907
[2026-01-28 13:44:51] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 146907 in Polo
[2026-01-28 13:44:51] info: [trainingController.canTrain] Checking training eligibility for horse 146907 in Polo
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Getting age for horse 146907
[2026-01-28 13:44:51] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 146907 in Cross Country
[2026-01-28 13:44:51] info: [trainingController.canTrain] Checking training eligibility for horse 146907 in Cross Country
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Getting age for horse 146907
[2026-01-28 13:44:51] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 146907 in Combined Driving
[2026-01-28 13:44:51] info: [trainingController.canTrain] Checking training eligibility for horse 146907 in Combined Driving
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Getting age for horse 146907
[2026-01-28 13:44:51] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 146907 in Fine Harness
[2026-01-28 13:44:51] info: [trainingController.canTrain] Checking training eligibility for horse 146907 in Fine Harness
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Getting age for horse 146907
[2026-01-28 13:44:51] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 146907 in Gaited
[2026-01-28 13:44:51] info: [trainingController.canTrain] Checking training eligibility for horse 146907 in Gaited
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Getting age for horse 146907
[2026-01-28 13:44:51] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 146907 in Gymkhana
[2026-01-28 13:44:51] info: [trainingController.canTrain] Checking training eligibility for horse 146907 in Gymkhana
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Getting age for horse 146907
[2026-01-28 13:44:51] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 146907 in Steeplechase
[2026-01-28 13:44:51] info: [trainingController.canTrain] Checking training eligibility for horse 146907 in Steeplechase
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Getting age for horse 146907
[2026-01-28 13:44:51] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 146907 in Harness Racing
[2026-01-28 13:44:51] info: [trainingController.canTrain] Checking training eligibility for horse 146907 in Harness Racing
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Getting age for horse 146907
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Horse 146907 is 4 years old
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Horse 146907 is 4 years old
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Horse 146907 is 4 years old
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Horse 146907 is 4 years old
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Horse 146907 is 4 years old
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Horse 146907 is 4 years old
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Horse 146907 is 4 years old
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Horse 146907 is 4 years old
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Horse 146907 is 4 years old
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Horse 146907 is 4 years old
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Horse 146907 is 4 years old
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Horse 146907 is 4 years old
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Horse 146907 is 4 years old
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Horse 146907 is 4 years old
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Horse 146907 is 4 years old
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Horse 146907 is 4 years old
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Horse 146907 is 4 years old
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Horse 146907 is 4 years old
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Horse 146907 is 4 years old
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Horse 146907 is 4 years old
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Horse 146907 is 4 years old
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Horse 146907 is 4 years old
[2026-01-28 13:44:51] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146907 across all disciplines
[2026-01-28 13:44:51] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146907 across all disciplines
[2026-01-28 13:44:51] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146907 across all disciplines
[2026-01-28 13:44:51] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146907 across all disciplines
[2026-01-28 13:44:51] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146907 across all disciplines
[2026-01-28 13:44:51] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146907 across all disciplines
[2026-01-28 13:44:51] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146907 across all disciplines
[2026-01-28 13:44:51] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146907 across all disciplines
[2026-01-28 13:44:51] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146907 across all disciplines
[2026-01-28 13:44:51] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146907 across all disciplines
[2026-01-28 13:44:51] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146907 across all disciplines
[2026-01-28 13:44:51] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146907 across all disciplines
[2026-01-28 13:44:51] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146907 across all disciplines
[2026-01-28 13:44:51] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146907 across all disciplines
[2026-01-28 13:44:51] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146907 across all disciplines
[2026-01-28 13:44:51] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146907 across all disciplines
[2026-01-28 13:44:51] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146907 across all disciplines
[2026-01-28 13:44:51] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146907 across all disciplines
[2026-01-28 13:44:51] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146907 across all disciplines
[2026-01-28 13:44:51] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146907 across all disciplines
[2026-01-28 13:44:51] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146907 across all disciplines
[2026-01-28 13:44:51] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 146907: Wed Jan 28 2026 13:44:51 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 13:44:51] info: [trainingController.canTrain] Horse 146907 still in cooldown for any training (7 days remaining)
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Getting age for horse 146907
[2026-01-28 13:44:51] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 146907: Wed Jan 28 2026 13:44:51 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 13:44:51] info: [trainingController.canTrain] Horse 146907 still in cooldown for any training (7 days remaining)
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Getting age for horse 146907
[2026-01-28 13:44:51] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 146907: Wed Jan 28 2026 13:44:51 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 13:44:51] info: [trainingController.canTrain] Horse 146907 still in cooldown for any training (7 days remaining)
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Getting age for horse 146907
[2026-01-28 13:44:51] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 146907: Wed Jan 28 2026 13:44:51 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 13:44:51] info: [trainingController.canTrain] Horse 146907 still in cooldown for any training (7 days remaining)
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Getting age for horse 146907
[2026-01-28 13:44:51] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 146907: Wed Jan 28 2026 13:44:51 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 13:44:51] info: [trainingController.canTrain] Horse 146907 still in cooldown for any training (7 days remaining)
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Getting age for horse 146907
[2026-01-28 13:44:51] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 146907: Wed Jan 28 2026 13:44:51 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 13:44:51] info: [trainingController.canTrain] Horse 146907 still in cooldown for any training (7 days remaining)
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Getting age for horse 146907
[2026-01-28 13:44:51] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 146907: Wed Jan 28 2026 13:44:51 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 13:44:51] info: [trainingController.canTrain] Horse 146907 still in cooldown for any training (7 days remaining)
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Getting age for horse 146907
[2026-01-28 13:44:51] info: [horseModel.getHorseById] Successfully found horse: TestHorse_1769625891511_q3xgyf (ID: 146907)
[2026-01-28 13:44:51] info: [trainingController.canTrain] Horse 146907 lacks required trait for Gaited training
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Getting age for horse 146907
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Horse 146907 is 4 years old
[2026-01-28 13:44:51] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 146907 in Western Pleasure
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Horse 146907 is 4 years old
[2026-01-28 13:44:51] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 146907 in Team Penning
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Horse 146907 is 4 years old
[2026-01-28 13:44:51] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 146907 in Saddleseat
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Horse 146907 is 4 years old
[2026-01-28 13:44:51] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 146907 in Dressage
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Horse 146907 is 4 years old
[2026-01-28 13:44:51] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 146907 in Polo
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Horse 146907 is 4 years old
[2026-01-28 13:44:51] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 146907 in Fine Harness
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Horse 146907 is 4 years old
[2026-01-28 13:44:51] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 146907 in Steeplechase
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Horse 146907 is 4 years old
[2026-01-28 13:44:51] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 146907 in Gaited
[2026-01-28 13:44:51] info: [trainingModel.getLastTrainingDate] No training records found for horse 146907 in Western Pleasure
[2026-01-28 13:44:51] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146907 across all disciplines
[2026-01-28 13:44:51] info: [trainingModel.getLastTrainingDate] No training records found for horse 146907 in Team Penning
[2026-01-28 13:44:51] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146907 across all disciplines
[2026-01-28 13:44:51] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 146907: Wed Jan 28 2026 13:44:51 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 13:44:51] info: [trainingController.canTrain] Horse 146907 still in cooldown for any training (7 days remaining)
[2026-01-28 13:44:51] info: [trainingModel.getHorseAge] Getting age for horse 146907
[2026-01-28 13:44:51] info: [trainingModel.getLastTrainingDate] No training records found for horse 146907 in Saddleseat
[2026-01-28 13:44:51] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146907 across all disciplines
[2026-01-28 13:44:52] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 146907: Wed Jan 28 2026 13:44:51 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 13:44:52] info: [trainingController.canTrain] Horse 146907 still in cooldown for any training (7 days remaining)
[2026-01-28 13:44:52] info: [trainingModel.getHorseAge] Getting age for horse 146907
[2026-01-28 13:44:52] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 146907: Wed Jan 28 2026 13:44:51 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 13:44:52] info: [trainingController.canTrain] Horse 146907 still in cooldown for any training (7 days remaining)
[2026-01-28 13:44:52] info: [trainingModel.getHorseAge] Getting age for horse 146907
[2026-01-28 13:44:52] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 146907: Wed Jan 28 2026 13:44:51 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 13:44:52] info: [trainingController.canTrain] Horse 146907 still in cooldown for any training (7 days remaining)
[2026-01-28 13:44:52] info: [trainingModel.getHorseAge] Getting age for horse 146907
[2026-01-28 13:44:52] info: [trainingModel.getLastTrainingDate] No training records found for horse 146907 in Dressage
[2026-01-28 13:44:52] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146907 across all disciplines
[2026-01-28 13:44:52] info: [trainingModel.getLastTrainingDate] No training records found for horse 146907 in Polo
[2026-01-28 13:44:52] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146907 across all disciplines
[2026-01-28 13:44:52] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 146907: Wed Jan 28 2026 13:44:51 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 13:44:52] info: [trainingController.canTrain] Horse 146907 still in cooldown for any training (7 days remaining)
[2026-01-28 13:44:52] info: [trainingModel.getHorseAge] Getting age for horse 146907
[2026-01-28 13:44:52] info: [trainingModel.getLastTrainingDate] No training records found for horse 146907 in Fine Harness
[2026-01-28 13:44:52] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146907 across all disciplines
[2026-01-28 13:44:52] info: [trainingModel.getLastTrainingDate] No training records found for horse 146907 in Steeplechase
[2026-01-28 13:44:52] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146907 across all disciplines
[2026-01-28 13:44:52] info: [trainingModel.getLastTrainingDate] No training records found for horse 146907 in Gaited
[2026-01-28 13:44:52] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146907 across all disciplines
[2026-01-28 13:44:52] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 146907: Wed Jan 28 2026 13:44:51 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 13:44:52] info: [trainingController.canTrain] Horse 146907 still in cooldown for any training (7 days remaining)
[2026-01-28 13:44:52] info: [trainingModel.getHorseAge] Getting age for horse 146907
[2026-01-28 13:44:52] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 146907: Wed Jan 28 2026 13:44:51 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 13:44:52] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 146907: Wed Jan 28 2026 13:44:51 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 13:44:52] info: [trainingController.canTrain] Horse 146907 still in cooldown for any training (7 days remaining)
[2026-01-28 13:44:52] info: [trainingModel.getHorseAge] Getting age for horse 146907
[2026-01-28 13:44:52] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 146907: Wed Jan 28 2026 13:44:51 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 13:44:52] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 146907: Wed Jan 28 2026 13:44:51 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 13:44:52] info: [trainingController.canTrain] Horse 146907 still in cooldown for any training (7 days remaining)
[2026-01-28 13:44:52] info: [trainingModel.getHorseAge] Getting age for horse 146907
[2026-01-28 13:44:52] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 146907: Wed Jan 28 2026 13:44:51 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 13:44:52] info: [trainingController.canTrain] Horse 146907 still in cooldown for any training (7 days remaining)
[2026-01-28 13:44:52] info: [trainingModel.getHorseAge] Getting age for horse 146907
[2026-01-28 13:44:52] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 146907: Wed Jan 28 2026 13:44:51 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 13:44:52] info: [trainingController.canTrain] Horse 146907 still in cooldown for any training (7 days remaining)
[2026-01-28 13:44:52] info: [trainingModel.getHorseAge] Getting age for horse 146907
[2026-01-28 13:44:52] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 146907: Wed Jan 28 2026 13:44:51 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 13:44:52] info: [trainingModel.getHorseAge] Horse 146907 is 4 years old
[2026-01-28 13:44:52] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 146907 in Cutting
[2026-01-28 13:44:52] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 146907: Wed Jan 28 2026 13:44:51 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 13:44:52] info: [trainingController.canTrain] Horse 146907 still in cooldown for any training (7 days remaining)
[2026-01-28 13:44:52] info: [trainingModel.getHorseAge] Getting age for horse 146907
[2026-01-28 13:44:52] info: [trainingModel.getHorseAge] Horse 146907 is 4 years old
[2026-01-28 13:44:52] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 146907 in Barrel Racing
[2026-01-28 13:44:52] info: [trainingModel.getHorseAge] Horse 146907 is 4 years old
[2026-01-28 13:44:52] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 146907 in Roping
[2026-01-28 13:44:52] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 146907: Wed Jan 28 2026 13:44:51 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 13:44:52] info: [trainingController.canTrain] Horse 146907 still in cooldown for any training (7 days remaining)
[2026-01-28 13:44:52] info: [trainingModel.getHorseAge] Getting age for horse 146907
[2026-01-28 13:44:52] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 146907: Wed Jan 28 2026 13:44:51 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 13:44:52] info: [trainingController.canTrain] Horse 146907 still in cooldown for any training (7 days remaining)
[2026-01-28 13:44:52] info: [trainingModel.getHorseAge] Getting age for horse 146907
[2026-01-28 13:44:52] info: [trainingModel.getHorseAge] Horse 146907 is 4 years old
[2026-01-28 13:44:52] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 146907 in Reining
[2026-01-28 13:44:52] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 146907: Wed Jan 28 2026 13:44:51 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 13:44:52] info: [trainingController.canTrain] Horse 146907 still in cooldown for any training (7 days remaining)
[2026-01-28 13:44:52] info: [trainingModel.getHorseAge] Getting age for horse 146907
[2026-01-28 13:44:52] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 146907: Wed Jan 28 2026 13:44:51 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 13:44:52] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 146907: Wed Jan 28 2026 13:44:51 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 13:44:52] info: [trainingModel.getHorseAge] Horse 146907 is 4 years old
[2026-01-28 13:44:52] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 146907 in Hunter
[2026-01-28 13:44:52] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 146907: Wed Jan 28 2026 13:44:51 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 13:44:52] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 146907: Wed Jan 28 2026 13:44:51 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 13:44:52] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 146907: Wed Jan 28 2026 13:44:51 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 13:44:52] info: [trainingModel.getHorseAge] Horse 146907 is 4 years old
[2026-01-28 13:44:52] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 146907 in Eventing
[2026-01-28 13:44:52] info: [trainingModel.getHorseAge] Horse 146907 is 4 years old
[2026-01-28 13:44:52] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 146907 in Endurance
[2026-01-28 13:44:52] info: [trainingModel.getHorseAge] Horse 146907 is 4 years old
[2026-01-28 13:44:52] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 146907 in Rodeo
[2026-01-28 13:44:52] info: [trainingModel.getHorseAge] Horse 146907 is 4 years old
[2026-01-28 13:44:52] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 146907 in Vaulting
[2026-01-28 13:44:52] info: [trainingModel.getHorseAge] Horse 146907 is 4 years old
[2026-01-28 13:44:52] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 146907 in Cross Country
[2026-01-28 13:44:52] info: [trainingModel.getLastTrainingDate] No training records found for horse 146907 in Cutting
[2026-01-28 13:44:52] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146907 across all disciplines
[2026-01-28 13:44:52] info: [trainingModel.getHorseAge] Horse 146907 is 4 years old
[2026-01-28 13:44:52] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 146907 in Harness Racing
[2026-01-28 13:44:52] info: [trainingModel.getLastTrainingDate] No training records found for horse 146907 in Barrel Racing
[2026-01-28 13:44:52] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146907 across all disciplines
[2026-01-28 13:44:52] info: [trainingModel.getLastTrainingDate] No training records found for horse 146907 in Roping
[2026-01-28 13:44:52] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146907 across all disciplines
[2026-01-28 13:44:52] info: [trainingModel.getHorseAge] Horse 146907 is 4 years old
[2026-01-28 13:44:52] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 146907 in Gymkhana
[2026-01-28 13:44:52] info: [trainingModel.getHorseAge] Horse 146907 is 4 years old
[2026-01-28 13:44:52] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 146907 in Combined Driving
[2026-01-28 13:44:52] info: [trainingModel.getLastTrainingDate] No training records found for horse 146907 in Reining
[2026-01-28 13:44:52] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146907 across all disciplines
[2026-01-28 13:44:52] info: [trainingModel.getHorseAge] Horse 146907 is 4 years old
[2026-01-28 13:44:52] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 146907 in Show Jumping
[2026-01-28 13:44:52] info: [trainingModel.getLastTrainingDate] No training records found for horse 146907 in Hunter
[2026-01-28 13:44:52] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146907 across all disciplines
[2026-01-28 13:44:52] info: [trainingModel.getLastTrainingDate] No training records found for horse 146907 in Eventing
[2026-01-28 13:44:52] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146907 across all disciplines
[2026-01-28 13:44:52] info: [trainingModel.getLastTrainingDate] No training records found for horse 146907 in Endurance
[2026-01-28 13:44:52] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146907 across all disciplines
[2026-01-28 13:44:52] info: [trainingModel.getLastTrainingDate] No training records found for horse 146907 in Rodeo
[2026-01-28 13:44:52] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146907 across all disciplines
[2026-01-28 13:44:52] info: [trainingModel.getLastTrainingDate] No training records found for horse 146907 in Vaulting
[2026-01-28 13:44:52] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146907 across all disciplines
[2026-01-28 13:44:52] info: [trainingModel.getLastTrainingDate] No training records found for horse 146907 in Cross Country
[2026-01-28 13:44:52] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146907 across all disciplines
[2026-01-28 13:44:52] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 146907: Wed Jan 28 2026 13:44:51 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 13:44:52] info: [trainingModel.getLastTrainingDate] No training records found for horse 146907 in Harness Racing
[2026-01-28 13:44:52] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146907 across all disciplines
[2026-01-28 13:44:52] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 146907: Wed Jan 28 2026 13:44:51 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 13:44:52] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 146907: Wed Jan 28 2026 13:44:51 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 13:44:52] info: [trainingModel.getLastTrainingDate] No training records found for horse 146907 in Gymkhana
[2026-01-28 13:44:52] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146907 across all disciplines
[2026-01-28 13:44:52] info: [trainingModel.getLastTrainingDate] No training records found for horse 146907 in Combined Driving
[2026-01-28 13:44:52] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146907 across all disciplines
[2026-01-28 13:44:52] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 146907: Wed Jan 28 2026 13:44:51 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 13:44:52] info: [trainingModel.getLastTrainingDate] No training records found for horse 146907 in Show Jumping
[2026-01-28 13:44:52] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146907 across all disciplines
[2026-01-28 13:44:52] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 146907: Wed Jan 28 2026 13:44:51 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 13:44:52] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 146907: Wed Jan 28 2026 13:44:51 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 13:44:52] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 146907: Wed Jan 28 2026 13:44:51 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 13:44:52] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 146907: Wed Jan 28 2026 13:44:51 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 13:44:52] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 146907: Wed Jan 28 2026 13:44:51 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 13:44:52] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 146907: Wed Jan 28 2026 13:44:51 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 13:44:52] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 146907: Wed Jan 28 2026 13:44:51 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 13:44:52] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 146907: Wed Jan 28 2026 13:44:51 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 13:44:52] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 146907: Wed Jan 28 2026 13:44:51 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 13:44:52] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 146907: Wed Jan 28 2026 13:44:51 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 13:44:52] info: [GET] /api/training/status/146907 - 200
[2026-01-28 13:44:52] info: [GET] /api/horses/trainable/6c45c641-3cb4-4167-9a15-9151ab36f710
[2026-01-28 13:44:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1821MB
[2026-01-28 13:44:52] info: [auth:61uf7f] Starting auth for GET /horses/trainable/6c45c641-3cb4-4167-9a15-9151ab36f710
[2026-01-28 13:44:52] info: [auth:61uf7f] Token from cookie: false
[2026-01-28 13:44:52] info: [auth:61uf7f] Token from header: true
[2026-01-28 13:44:52] info: [auth:61uf7f] Authenticated user 6c45c641-3cb4-4167-9a15-9151ab36f710
[2026-01-28 13:44:52] info: [GET] /api/horses/trainable/6c45c641-3cb4-4167-9a15-9151ab36f710 - 200
[2026-01-28 13:44:52] info: [POST] /api/training/train
[2026-01-28 13:44:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1821MB
[2026-01-28 13:44:52] info: [auth:t8as99] Starting auth for POST /training/train
[2026-01-28 13:44:52] info: [auth:t8as99] Token from cookie: false
[2026-01-28 13:44:52] info: [auth:t8as99] Token from header: true
[2026-01-28 13:44:52] info: [auth:t8as99] Authenticated user 6c45c641-3cb4-4167-9a15-9151ab36f710
[2026-01-28 13:44:52] info: [POST] /api/training/train - 403
[2026-01-28 13:44:52] info: [POST] /api/training/train
[2026-01-28 13:44:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1822MB
[2026-01-28 13:44:52] info: [auth:q8t7ei] Starting auth for POST /training/train
[2026-01-28 13:44:52] info: [auth:q8t7ei] Token from cookie: false
[2026-01-28 13:44:52] info: [auth:q8t7ei] Token from header: true
[2026-01-28 13:44:52] info: [auth:q8t7ei] Authenticated user 6c45c641-3cb4-4167-9a15-9151ab36f710
[2026-01-28 13:44:52] warn: [ownership] horse 99999 not found or not owned by user 6c45c641-3cb4-4167-9a15-9151ab36f710
[2026-01-28 13:44:52] info: [POST] /api/training/train - 404
[2026-01-28 13:44:52] info: [POST] /api/training/train
[2026-01-28 13:44:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1823MB
[2026-01-28 13:44:52] info: [auth:hyi8up] Starting auth for POST /training/train
[2026-01-28 13:44:52] info: [auth:hyi8up] Token from cookie: false
[2026-01-28 13:44:52] info: [auth:hyi8up] Token from header: true
[2026-01-28 13:44:52] info: [auth:hyi8up] Authenticated user 6c45c641-3cb4-4167-9a15-9151ab36f710
[2026-01-28 13:44:52] info: [ownership] Found owned horse 146907 for user 6c45c641-3cb4-4167-9a15-9151ab36f710
[2026-01-28 13:44:52] info: [trainingController.trainRouteHandler] Training request for horse 146907 in InvalidDiscipline
[2026-01-28 13:44:52] info: [trainingController.trainHorse] Attempting to train horse 146907 in InvalidDiscipline
[2026-01-28 13:44:52] info: [trainingController.canTrain] Checking training eligibility for horse 146907 in InvalidDiscipline
[2026-01-28 13:44:52] info: [trainingModel.getHorseAge] Getting age for horse 146907
[2026-01-28 13:44:52] info: [trainingModel.getHorseAge] Horse 146907 is 4 years old
[2026-01-28 13:44:52] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 146907 across all disciplines
[2026-01-28 13:44:52] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 146907: Wed Jan 28 2026 13:44:51 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 13:44:52] info: [trainingController.canTrain] Horse 146907 still in cooldown for any training (7 days remaining)
[2026-01-28 13:44:52] warn: [trainingController.trainHorse] Training rejected: Training cooldown active for this horse
[2026-01-28 13:44:52] info: [POST] /api/training/train - 400
PASS tests/training-updated.test.mjs
  🏋️ INTEGRATION: Training System Updated - User Model Integration
    Age Requirement Tests
      √ should get trainable horses for authenticated user (53 ms)
      √ should block training for horse under 3 years old (102 ms)
      √ should allow training for horse 3+ years old (31 ms)
    Training Status Tests
      √ should get training status for a specific horse and discipline (48 ms)
      √ should get all training status for a horse (398 ms)
    Authenticated API Access Tests
      √ should require authentication to get trainable horses (26 ms)
      √ should require authentication for training requests (30 ms)
    Error Handling Tests
      √ should handle invalid horse ID gracefully (31 ms)
      √ should handle invalid discipline gracefully (38 ms)

[2026-01-28 13:44:52] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:44:52] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:44:52] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:44:52] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:44:53] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:53] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:53] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:53] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:53] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:53] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:53] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:53] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:53] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:53] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:44:53] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 13:44:53] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:53] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:44:53] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:44:53] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:44:53] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:44:53] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:44:53] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 13:44:53] info: [GET] /api/horses/146908/environmental-analysis
[2026-01-28 13:44:53] warn: [MemoryMonitoring] Memory threshold exceeded: 1873MB
[2026-01-28 13:44:53] info: [auth:v5hn9] Starting auth for GET /horses/146908/environmental-analysis
[2026-01-28 13:44:53] info: [auth:v5hn9] Token from cookie: false
[2026-01-28 13:44:53] info: [auth:v5hn9] Token from header: true
[2026-01-28 13:44:53] info: [auth:v5hn9] Authenticated user 749dd3b7-5793-4777-b107-3c4538a56469
[2026-01-28 13:44:53] info: [auth:eetqu] Starting auth for GET /horses/146908/environmental-analysis
[2026-01-28 13:44:53] info: [auth:eetqu] Token from cookie: false
[2026-01-28 13:44:53] info: [auth:eetqu] Token from header: true
[2026-01-28 13:44:53] info: [auth:eetqu] Authenticated user 749dd3b7-5793-4777-b107-3c4538a56469
[2026-01-28 13:44:53] info: [ownership] Validated ownership: user 749dd3b7-5793-4777-b107-3c4538a56469 owns horse 146908
[2026-01-28 13:44:53] info: Environmental analysis generated for horse 146908 by user 749dd3b7-5793-4777-b107-3c4538a56469
[2026-01-28 13:44:53] info: [GET] /api/horses/146908/environmental-analysis - 200
[2026-01-28 13:44:53] info: [GET] /api/horses/146908/environmental-forecast?days=30
[2026-01-28 13:44:53] warn: [MemoryMonitoring] Memory threshold exceeded: 1880MB
[2026-01-28 13:44:53] info: [auth:lvitoy] Starting auth for GET /horses/146908/environmental-forecast
[2026-01-28 13:44:53] info: [auth:lvitoy] Token from cookie: false
[2026-01-28 13:44:53] info: [auth:lvitoy] Token from header: true
[2026-01-28 13:44:53] info: [auth:lvitoy] Authenticated user 749dd3b7-5793-4777-b107-3c4538a56469
[2026-01-28 13:44:53] info: [auth:1q6xs] Starting auth for GET /horses/146908/environmental-forecast
[2026-01-28 13:44:53] info: [auth:1q6xs] Token from cookie: false
[2026-01-28 13:44:53] info: [auth:1q6xs] Token from header: true
[2026-01-28 13:44:53] info: [auth:1q6xs] Authenticated user 749dd3b7-5793-4777-b107-3c4538a56469
[2026-01-28 13:44:53] info: [ownership] Validated ownership: user 749dd3b7-5793-4777-b107-3c4538a56469 owns horse 146908
[2026-01-28 13:44:53] info: Environmental forecast generated for horse 146908 (30 days) by user 749dd3b7-5793-4777-b107-3c4538a56469
[2026-01-28 13:44:53] info: [GET] /api/horses/146908/environmental-forecast?days=30 - 200
[2026-01-28 13:44:53] info: [POST] /api/horses/146908/evaluate-trait-opportunity
[2026-01-28 13:44:53] warn: [MemoryMonitoring] Memory threshold exceeded: 1879MB
[2026-01-28 13:44:53] info: [auth:6x1519] Starting auth for POST /horses/146908/evaluate-trait-opportunity
[2026-01-28 13:44:53] info: [auth:6x1519] Token from cookie: false
[2026-01-28 13:44:53] info: [auth:6x1519] Token from header: true
[2026-01-28 13:44:53] info: [auth:6x1519] Authenticated user 749dd3b7-5793-4777-b107-3c4538a56469
[2026-01-28 13:44:53] info: [auth:2qbop] Starting auth for POST /horses/146908/evaluate-trait-opportunity
[2026-01-28 13:44:53] info: [auth:2qbop] Token from cookie: false
[2026-01-28 13:44:53] info: [auth:2qbop] Token from header: true
[2026-01-28 13:44:53] info: [auth:2qbop] Authenticated user 749dd3b7-5793-4777-b107-3c4538a56469
[2026-01-28 13:44:53] info: [ownership] Validated ownership: user 749dd3b7-5793-4777-b107-3c4538a56469 owns horse 146908
[2026-01-28 13:44:53] info: Trait opportunity evaluated for horse 146908 (confident in early_socialization) by user 749dd3b7-5793-4777-b107-3c4538a56469
[2026-01-28 13:44:53] info: [POST] /api/horses/146908/evaluate-trait-opportunity - 200
[2026-01-28 13:44:53] info: [GET] /api/horses/146908/environmental-analysis
[2026-01-28 13:44:53] warn: [MemoryMonitoring] Memory threshold exceeded: 1873MB
[2026-01-28 13:44:53] info: [auth:v54mbb] Starting auth for GET /horses/146908/environmental-analysis
[2026-01-28 13:44:53] info: [auth:v54mbb] Token from cookie: false
[2026-01-28 13:44:53] warn: [auth:v54mbb] Access token is required for GET /horses/146908/environmental-analysis from ::ffff:127.0.0.1
[2026-01-28 13:44:53] info: [GET] /api/horses/146908/environmental-analysis - 401
[2026-01-28 13:44:53] info: [GET] /api/horses/146910/environmental-analysis
[2026-01-28 13:44:53] warn: [MemoryMonitoring] Memory threshold exceeded: 1874MB
[2026-01-28 13:44:53] info: [auth:zeklu2] Starting auth for GET /horses/146910/environmental-analysis
[2026-01-28 13:44:53] info: [auth:zeklu2] Token from cookie: false
[2026-01-28 13:44:53] info: [auth:zeklu2] Token from header: true
[2026-01-28 13:44:53] info: [auth:zeklu2] Authenticated user 749dd3b7-5793-4777-b107-3c4538a56469
[2026-01-28 13:44:53] info: [auth:fqpc7] Starting auth for GET /horses/146910/environmental-analysis
[2026-01-28 13:44:53] info: [auth:fqpc7] Token from cookie: false
[2026-01-28 13:44:54] info: [auth:fqpc7] Token from header: true
[2026-01-28 13:44:54] info: [auth:fqpc7] Authenticated user 749dd3b7-5793-4777-b107-3c4538a56469
[2026-01-28 13:44:54] warn: [ownership] horse 146910 not found or not owned by user 749dd3b7-5793-4777-b107-3c4538a56469
[2026-01-28 13:44:54] info: [GET] /api/horses/146910/environmental-analysis - 404
[2026-01-28 13:44:54] info: [GET] /api/horses/146909/trait-interactions
[2026-01-28 13:44:54] warn: [MemoryMonitoring] Memory threshold exceeded: 1882MB
[2026-01-28 13:44:54] info: [auth:jvbw49] Starting auth for GET /horses/146909/trait-interactions
[2026-01-28 13:44:54] info: [auth:jvbw49] Token from cookie: false
[2026-01-28 13:44:54] info: [auth:jvbw49] Token from header: true
[2026-01-28 13:44:54] info: [auth:jvbw49] Authenticated user 749dd3b7-5793-4777-b107-3c4538a56469
[2026-01-28 13:44:54] info: [auth:m439ft] Starting auth for GET /horses/146909/trait-interactions
[2026-01-28 13:44:54] info: [auth:m439ft] Token from cookie: false
[2026-01-28 13:44:54] info: [auth:m439ft] Token from header: true
[2026-01-28 13:44:54] info: [auth:m439ft] Authenticated user 749dd3b7-5793-4777-b107-3c4538a56469
[2026-01-28 13:44:54] info: [ownership] Validated ownership: user 749dd3b7-5793-4777-b107-3c4538a56469 owns horse 146909
[2026-01-28 13:44:54] info: Trait interactions analyzed for horse 146909 by user 749dd3b7-5793-4777-b107-3c4538a56469
[2026-01-28 13:44:54] info: [GET] /api/horses/146909/trait-interactions - 200
[2026-01-28 13:44:54] info: [GET] /api/horses/146909/trait-matrix
[2026-01-28 13:44:54] warn: [MemoryMonitoring] Memory threshold exceeded: 1882MB
[2026-01-28 13:44:54] info: [auth:o1anze] Starting auth for GET /horses/146909/trait-matrix
[2026-01-28 13:44:54] info: [auth:o1anze] Token from cookie: false
[2026-01-28 13:44:54] info: [auth:o1anze] Token from header: true
[2026-01-28 13:44:54] info: [auth:o1anze] Authenticated user 749dd3b7-5793-4777-b107-3c4538a56469
[2026-01-28 13:44:54] info: [auth:wzg6x3] Starting auth for GET /horses/146909/trait-matrix
[2026-01-28 13:44:54] info: [auth:wzg6x3] Token from cookie: false
[2026-01-28 13:44:54] info: [auth:wzg6x3] Token from header: true
[2026-01-28 13:44:54] info: [auth:wzg6x3] Authenticated user 749dd3b7-5793-4777-b107-3c4538a56469
[2026-01-28 13:44:54] info: [ownership] Validated ownership: user 749dd3b7-5793-4777-b107-3c4538a56469 owns horse 146909
[2026-01-28 13:44:54] info: Trait interaction matrix generated for horse 146909 by user 749dd3b7-5793-4777-b107-3c4538a56469
[2026-01-28 13:44:54] info: [GET] /api/horses/146909/trait-matrix - 200
[2026-01-28 13:44:54] info: [GET] /api/horses/146909/trait-stability
[2026-01-28 13:44:54] warn: [MemoryMonitoring] Memory threshold exceeded: 1881MB
[2026-01-28 13:44:54] info: [auth:93hdla] Starting auth for GET /horses/146909/trait-stability
[2026-01-28 13:44:54] info: [auth:93hdla] Token from cookie: false
[2026-01-28 13:44:54] info: [auth:93hdla] Token from header: true
[2026-01-28 13:44:54] info: [auth:93hdla] Authenticated user 749dd3b7-5793-4777-b107-3c4538a56469
[2026-01-28 13:44:54] info: [auth:6pegod] Starting auth for GET /horses/146909/trait-stability
[2026-01-28 13:44:54] info: [auth:6pegod] Token from cookie: false
[2026-01-28 13:44:54] info: [auth:6pegod] Token from header: true
[2026-01-28 13:44:54] info: [auth:6pegod] Authenticated user 749dd3b7-5793-4777-b107-3c4538a56469
[2026-01-28 13:44:54] info: [ownership] Validated ownership: user 749dd3b7-5793-4777-b107-3c4538a56469 owns horse 146909
[2026-01-28 13:44:54] info: Trait stability analyzed for horse 146909 by user 749dd3b7-5793-4777-b107-3c4538a56469
[2026-01-28 13:44:54] info: [GET] /api/horses/146909/trait-stability - 200
[2026-01-28 13:44:54] info: [GET] /api/horses/146908/developmental-windows
[2026-01-28 13:44:54] warn: [MemoryMonitoring] Memory threshold exceeded: 1875MB
[2026-01-28 13:44:54] info: [auth:538b04] Starting auth for GET /horses/146908/developmental-windows
[2026-01-28 13:44:54] info: [auth:538b04] Token from cookie: false
[2026-01-28 13:44:54] info: [auth:538b04] Token from header: true
[2026-01-28 13:44:54] info: [auth:538b04] Authenticated user 749dd3b7-5793-4777-b107-3c4538a56469
[2026-01-28 13:44:54] info: [auth:l3f37] Starting auth for GET /horses/146908/developmental-windows
[2026-01-28 13:44:54] info: [auth:l3f37] Token from cookie: false
[2026-01-28 13:44:54] info: [auth:l3f37] Token from header: true
[2026-01-28 13:44:54] info: [auth:l3f37] Authenticated user 749dd3b7-5793-4777-b107-3c4538a56469
[2026-01-28 13:44:54] info: [ownership] Validated ownership: user 749dd3b7-5793-4777-b107-3c4538a56469 owns horse 146908
[2026-01-28 13:44:54] info: Developmental windows identified for horse 146908 by user 749dd3b7-5793-4777-b107-3c4538a56469
[2026-01-28 13:44:54] info: [GET] /api/horses/146908/developmental-windows - 200
[2026-01-28 13:44:54] info: [GET] /api/horses/146908/developmental-forecast?days=60
[2026-01-28 13:44:54] warn: [MemoryMonitoring] Memory threshold exceeded: 1885MB
[2026-01-28 13:44:54] info: [auth:quy3kd] Starting auth for GET /horses/146908/developmental-forecast
[2026-01-28 13:44:54] info: [auth:quy3kd] Token from cookie: false
[2026-01-28 13:44:54] info: [auth:quy3kd] Token from header: true
[2026-01-28 13:44:54] info: [auth:quy3kd] Authenticated user 749dd3b7-5793-4777-b107-3c4538a56469
[2026-01-28 13:44:54] info: [auth:2z0hgn] Starting auth for GET /horses/146908/developmental-forecast
[2026-01-28 13:44:54] info: [auth:2z0hgn] Token from cookie: false
[2026-01-28 13:44:54] info: [auth:2z0hgn] Token from header: true
[2026-01-28 13:44:54] info: [auth:2z0hgn] Authenticated user 749dd3b7-5793-4777-b107-3c4538a56469
[2026-01-28 13:44:54] info: [ownership] Validated ownership: user 749dd3b7-5793-4777-b107-3c4538a56469 owns horse 146908
[2026-01-28 13:44:54] info: Developmental forecast generated for horse 146908 (60 days) by user 749dd3b7-5793-4777-b107-3c4538a56469
[2026-01-28 13:44:54] info: [GET] /api/horses/146908/developmental-forecast?days=60 - 200
[2026-01-28 13:44:54] info: [GET] /api/horses/146908/critical-period-analysis
[2026-01-28 13:44:54] warn: [MemoryMonitoring] Memory threshold exceeded: 1882MB
[2026-01-28 13:44:54] info: [auth:kiwuin] Starting auth for GET /horses/146908/critical-period-analysis
[2026-01-28 13:44:54] info: [auth:kiwuin] Token from cookie: false
[2026-01-28 13:44:54] info: [auth:kiwuin] Token from header: true
[2026-01-28 13:44:54] info: [auth:kiwuin] Authenticated user 749dd3b7-5793-4777-b107-3c4538a56469
[2026-01-28 13:44:54] info: [auth:rrk6v] Starting auth for GET /horses/146908/critical-period-analysis
[2026-01-28 13:44:54] info: [auth:rrk6v] Token from cookie: false
[2026-01-28 13:44:54] info: [auth:rrk6v] Token from header: true
[2026-01-28 13:44:54] info: [auth:rrk6v] Authenticated user 749dd3b7-5793-4777-b107-3c4538a56469
[2026-01-28 13:44:54] info: [ownership] Validated ownership: user 749dd3b7-5793-4777-b107-3c4538a56469 owns horse 146908
[2026-01-28 13:44:54] info: Critical period analysis generated for horse 146908 by user 749dd3b7-5793-4777-b107-3c4538a56469
[2026-01-28 13:44:54] info: [GET] /api/horses/146908/critical-period-analysis - 200
[2026-01-28 13:44:54] info: [POST] /api/horses/146908/coordinate-development
[2026-01-28 13:44:54] warn: [MemoryMonitoring] Memory threshold exceeded: 1883MB
[2026-01-28 13:44:54] info: [auth:wrp3dm] Starting auth for POST /horses/146908/coordinate-development
[2026-01-28 13:44:54] info: [auth:wrp3dm] Token from cookie: false
[2026-01-28 13:44:54] info: [auth:wrp3dm] Token from header: true
[2026-01-28 13:44:54] info: [auth:wrp3dm] Authenticated user 749dd3b7-5793-4777-b107-3c4538a56469
[2026-01-28 13:44:54] info: [auth:x78hnj] Starting auth for POST /horses/146908/coordinate-development
[2026-01-28 13:44:54] info: [auth:x78hnj] Token from cookie: false
[2026-01-28 13:44:54] info: [auth:x78hnj] Token from header: true
[2026-01-28 13:44:54] info: [auth:x78hnj] Authenticated user 749dd3b7-5793-4777-b107-3c4538a56469
[2026-01-28 13:44:54] info: [ownership] Validated ownership: user 749dd3b7-5793-4777-b107-3c4538a56469 owns horse 146908
[2026-01-28 13:44:54] info: Development coordination generated for horse 146908 by user 749dd3b7-5793-4777-b107-3c4538a56469
[2026-01-28 13:44:54] info: [POST] /api/horses/146908/coordinate-development - 200
[2026-01-28 13:44:54] info: [POST] /api/horses/146908/evaluate-trait-opportunity
[2026-01-28 13:44:54] warn: [MemoryMonitoring] Memory threshold exceeded: 1879MB
[2026-01-28 13:44:54] info: [auth:llbgmr] Starting auth for POST /horses/146908/evaluate-trait-opportunity
[2026-01-28 13:44:54] info: [auth:llbgmr] Token from cookie: false
[2026-01-28 13:44:54] info: [auth:llbgmr] Token from header: true
[2026-01-28 13:44:54] info: [auth:llbgmr] Authenticated user 749dd3b7-5793-4777-b107-3c4538a56469
[2026-01-28 13:44:54] info: [auth:npo0hn] Starting auth for POST /horses/146908/evaluate-trait-opportunity
[2026-01-28 13:44:54] info: [auth:npo0hn] Token from cookie: false
[2026-01-28 13:44:54] info: [auth:npo0hn] Token from header: true
[2026-01-28 13:44:54] info: [auth:npo0hn] Authenticated user 749dd3b7-5793-4777-b107-3c4538a56469
[2026-01-28 13:44:54] info: [POST] /api/horses/146908/evaluate-trait-opportunity - 400
[2026-01-28 13:44:54] info: [GET] /api/horses/146908/developmental-forecast?days=-5
[2026-01-28 13:44:54] warn: [MemoryMonitoring] Memory threshold exceeded: 1885MB
[2026-01-28 13:44:54] info: [auth:0yimko] Starting auth for GET /horses/146908/developmental-forecast
[2026-01-28 13:44:54] info: [auth:0yimko] Token from cookie: false
[2026-01-28 13:44:54] info: [auth:0yimko] Token from header: true
[2026-01-28 13:44:54] info: [auth:0yimko] Authenticated user 749dd3b7-5793-4777-b107-3c4538a56469
[2026-01-28 13:44:54] info: [auth:v6bvx] Starting auth for GET /horses/146908/developmental-forecast
[2026-01-28 13:44:54] info: [auth:v6bvx] Token from cookie: false
[2026-01-28 13:44:54] info: [auth:v6bvx] Token from header: true
[2026-01-28 13:44:54] info: [auth:v6bvx] Authenticated user 749dd3b7-5793-4777-b107-3c4538a56469
[2026-01-28 13:44:54] info: [GET] /api/horses/146908/developmental-forecast?days=-5 - 400
[2026-01-28 13:44:54] info: [GET] /api/horses/99999/environmental-analysis
[2026-01-28 13:44:54] warn: [MemoryMonitoring] Memory threshold exceeded: 1877MB
[2026-01-28 13:44:54] info: [auth:cu72x6] Starting auth for GET /horses/99999/environmental-analysis
[2026-01-28 13:44:54] info: [auth:cu72x6] Token from cookie: false
[2026-01-28 13:44:54] info: [auth:cu72x6] Token from header: true
[2026-01-28 13:44:54] info: [auth:cu72x6] Authenticated user 749dd3b7-5793-4777-b107-3c4538a56469
[2026-01-28 13:44:54] info: [auth:2dj5db] Starting auth for GET /horses/99999/environmental-analysis
[2026-01-28 13:44:54] info: [auth:2dj5db] Token from cookie: false
[2026-01-28 13:44:54] info: [auth:2dj5db] Token from header: true
[2026-01-28 13:44:54] info: [auth:2dj5db] Authenticated user 749dd3b7-5793-4777-b107-3c4538a56469
[2026-01-28 13:44:54] warn: [ownership] horse 99999 not found or not owned by user 749dd3b7-5793-4777-b107-3c4538a56469
[2026-01-28 13:44:54] info: [GET] /api/horses/99999/environmental-analysis - 404
PASS tests/routes/advancedEpigeneticRoutes.test.mjs
  Advanced Epigenetic API Routes
    Environmental Trigger Endpoints
      √ GET /api/horses/:id/environmental-analysis should return environmental trigger analysis (196 ms)
      √ GET /api/horses/:id/environmental-forecast should return environmental forecast (49 ms)
      √ POST /api/horses/:id/evaluate-trait-opportunity should evaluate trait development opportunity (48 ms)
      √ should require authentication for environmental endpoints (23 ms)
      √ should validate horse ownership for environmental endpoints (59 ms)
    Trait Interaction Endpoints
      √ GET /api/horses/:id/trait-interactions should return trait interaction analysis (51 ms)
      √ GET /api/horses/:id/trait-matrix should return complete interaction matrix (47 ms)
      √ GET /api/horses/:id/trait-stability should return interaction stability analysis (44 ms)
    Developmental Window Endpoints
      √ GET /api/horses/:id/developmental-windows should return active and upcoming windows (51 ms)
      √ GET /api/horses/:id/developmental-forecast should return developmental forecast (45 ms)
      √ GET /api/horses/:id/critical-period-analysis should return critical period sensitivity (53 ms)
      √ POST /api/horses/:id/coordinate-development should coordinate multi-window development (48 ms)
    Input Validation
      √ should validate trait opportunity evaluation input (32 ms)
      √ should validate forecast days parameter (32 ms)
      √ should handle non-existent horse IDs (36 ms)

[2026-01-28 13:44:54] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:44:54] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:44:54] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:44:54] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:44:55] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:55] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:55] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:55] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:55] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:55] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:55] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:55] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:55] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:55] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:44:55] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 13:44:55] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:55] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:44:55] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:44:55] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:44:55] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:44:55] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:44:55] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 13:44:55] info: [GET] /api/grooms/enhanced/interactions/73467/146911
[2026-01-28 13:44:55] warn: [MemoryMonitoring] Memory threshold exceeded: 1936MB
[2026-01-28 13:44:55] info: [auth:m0ilwg] Starting auth for GET /grooms/enhanced/interactions/73467/146911
[2026-01-28 13:44:55] info: [auth:m0ilwg] Token from cookie: false
[2026-01-28 13:44:55] info: [auth:m0ilwg] Token from header: true
[2026-01-28 13:44:55] info: [auth:m0ilwg] Authenticated user bc9ffd99-9ffe-4908-850c-e92d8e759bd9
[2026-01-28 13:44:55] info: [auth:u5gvho] Starting auth for GET /interactions/73467/146911
[2026-01-28 13:44:55] info: [auth:u5gvho] Token from cookie: false
[2026-01-28 13:44:55] info: [auth:u5gvho] Token from header: true
[2026-01-28 13:44:55] info: [auth:u5gvho] Authenticated user bc9ffd99-9ffe-4908-850c-e92d8e759bd9
[2026-01-28 13:44:55] info: [ownership] Validated ownership: user bc9ffd99-9ffe-4908-850c-e92d8e759bd9 owns groom 73467
[2026-01-28 13:44:55] info: [ownership] Validated ownership: user bc9ffd99-9ffe-4908-850c-e92d8e759bd9 owns horse 146911
[2026-01-28 13:44:55] info: [enhancedGroomController] Getting enhanced interactions for groom 73467 and horse 146911
[2026-01-28 13:44:55] info: [GET] /api/grooms/enhanced/interactions/73467/146911 - 200
[2026-01-28 13:44:55] info: [GET] /api/grooms/enhanced/interactions/99999/146911
[2026-01-28 13:44:55] warn: [MemoryMonitoring] Memory threshold exceeded: 1942MB
[2026-01-28 13:44:55] info: [auth:yyacjk] Starting auth for GET /grooms/enhanced/interactions/99999/146911
[2026-01-28 13:44:55] info: [auth:yyacjk] Token from cookie: false
[2026-01-28 13:44:55] info: [auth:yyacjk] Token from header: true
[2026-01-28 13:44:55] info: [auth:yyacjk] Authenticated user bc9ffd99-9ffe-4908-850c-e92d8e759bd9
[2026-01-28 13:44:55] info: [auth:mufeac] Starting auth for GET /interactions/99999/146911
[2026-01-28 13:44:55] info: [auth:mufeac] Token from cookie: false
[2026-01-28 13:44:55] info: [auth:mufeac] Token from header: true
[2026-01-28 13:44:55] info: [auth:mufeac] Authenticated user bc9ffd99-9ffe-4908-850c-e92d8e759bd9
[2026-01-28 13:44:55] warn: [ownership] groom 99999 not found or not owned by user bc9ffd99-9ffe-4908-850c-e92d8e759bd9
[2026-01-28 13:44:55] info: [GET] /api/grooms/enhanced/interactions/99999/146911 - 404
[2026-01-28 13:44:55] info: [GET] /api/grooms/enhanced/interactions/73467/99999
[2026-01-28 13:44:55] warn: [MemoryMonitoring] Memory threshold exceeded: 1933MB
[2026-01-28 13:44:55] info: [auth:fyts0r] Starting auth for GET /grooms/enhanced/interactions/73467/99999
[2026-01-28 13:44:55] info: [auth:fyts0r] Token from cookie: false
[2026-01-28 13:44:55] info: [auth:fyts0r] Token from header: true
[2026-01-28 13:44:55] info: [auth:fyts0r] Authenticated user bc9ffd99-9ffe-4908-850c-e92d8e759bd9
[2026-01-28 13:44:55] info: [auth:1jarue] Starting auth for GET /interactions/73467/99999
[2026-01-28 13:44:55] info: [auth:1jarue] Token from cookie: false
[2026-01-28 13:44:55] info: [auth:1jarue] Token from header: true
[2026-01-28 13:44:55] info: [auth:1jarue] Authenticated user bc9ffd99-9ffe-4908-850c-e92d8e759bd9
[2026-01-28 13:44:55] info: [ownership] Validated ownership: user bc9ffd99-9ffe-4908-850c-e92d8e759bd9 owns groom 73467
[2026-01-28 13:44:55] warn: [ownership] horse 99999 not found or not owned by user bc9ffd99-9ffe-4908-850c-e92d8e759bd9
[2026-01-28 13:44:55] info: [GET] /api/grooms/enhanced/interactions/73467/99999 - 404
[2026-01-28 13:44:56] info: [POST] /api/grooms/enhanced/interact
[2026-01-28 13:44:56] warn: [MemoryMonitoring] Memory threshold exceeded: 1942MB
[2026-01-28 13:44:56] info: [auth:i6047f] Starting auth for POST /grooms/enhanced/interact
[2026-01-28 13:44:56] info: [auth:i6047f] Token from cookie: false
[2026-01-28 13:44:56] info: [auth:i6047f] Token from header: true
[2026-01-28 13:44:56] info: [auth:i6047f] Authenticated user bc9ffd99-9ffe-4908-850c-e92d8e759bd9
[2026-01-28 13:44:56] info: [auth:wruy5b] Starting auth for POST /interact
[2026-01-28 13:44:56] info: [auth:wruy5b] Token from cookie: false
[2026-01-28 13:44:56] info: [auth:wruy5b] Token from header: true
[2026-01-28 13:44:56] info: [auth:wruy5b] Authenticated user bc9ffd99-9ffe-4908-850c-e92d8e759bd9
[2026-01-28 13:44:56] info: [enhancedGroomController] Performing enhanced daily_care interaction
[2026-01-28 13:44:56] info: [ownership] Found owned groom 73467 for user bc9ffd99-9ffe-4908-850c-e92d8e759bd9
[2026-01-28 13:44:56] info: [enhancedGroomInteractions] Calculated effects: +7 bonding, -2 stress, quality: fair
[2026-01-28 13:44:56] info: [enhancedGroomController] Enhanced interaction completed: +7 bonding, -2 stress
[2026-01-28 13:44:56] info: [POST] /api/grooms/enhanced/interact - 201
[2026-01-28 13:44:56] info: [POST] /api/grooms/enhanced/interact
[2026-01-28 13:44:56] warn: [MemoryMonitoring] Memory threshold exceeded: 1942MB
[2026-01-28 13:44:56] info: [auth:c3gfbm] Starting auth for POST /grooms/enhanced/interact
[2026-01-28 13:44:56] info: [auth:c3gfbm] Token from cookie: false
[2026-01-28 13:44:56] info: [auth:c3gfbm] Token from header: true
[2026-01-28 13:44:56] info: [auth:c3gfbm] Authenticated user bc9ffd99-9ffe-4908-850c-e92d8e759bd9
[2026-01-28 13:44:56] info: [auth:fdnv5m] Starting auth for POST /interact
[2026-01-28 13:44:56] info: [auth:fdnv5m] Token from cookie: false
[2026-01-28 13:44:56] info: [auth:fdnv5m] Token from header: true
[2026-01-28 13:44:56] info: [auth:fdnv5m] Authenticated user bc9ffd99-9ffe-4908-850c-e92d8e759bd9
[2026-01-28 13:44:56] info: [enhancedGroomController] Performing enhanced enrichment interaction
[2026-01-28 13:44:56] info: [ownership] Found owned groom 73467 for user bc9ffd99-9ffe-4908-850c-e92d8e759bd9
[2026-01-28 13:44:56] info: [enhancedGroomInteractions] Calculated effects: +7 bonding, -6 stress, quality: good
[2026-01-28 13:44:56] info: [enhancedGroomController] Enhanced interaction completed: +7 bonding, -6 stress
[2026-01-28 13:44:56] info: [POST] /api/grooms/enhanced/interact - 201
[2026-01-28 13:44:56] info: [POST] /api/grooms/enhanced/interact
[2026-01-28 13:44:56] warn: [MemoryMonitoring] Memory threshold exceeded: 1941MB
[2026-01-28 13:44:56] info: [auth:doxsc] Starting auth for POST /grooms/enhanced/interact
[2026-01-28 13:44:56] info: [auth:doxsc] Token from cookie: false
[2026-01-28 13:44:56] info: [auth:doxsc] Token from header: true
[2026-01-28 13:44:56] info: [auth:doxsc] Authenticated user bc9ffd99-9ffe-4908-850c-e92d8e759bd9
[2026-01-28 13:44:56] info: [auth:yl92j8] Starting auth for POST /interact
[2026-01-28 13:44:56] info: [auth:yl92j8] Token from cookie: false
[2026-01-28 13:44:56] info: [auth:yl92j8] Token from header: true
[2026-01-28 13:44:56] info: [auth:yl92j8] Authenticated user bc9ffd99-9ffe-4908-850c-e92d8e759bd9
[2026-01-28 13:44:56] info: [enhancedGroomController] Performing enhanced bonding_time interaction
[2026-01-28 13:44:56] info: [ownership] Found owned groom 73467 for user bc9ffd99-9ffe-4908-850c-e92d8e759bd9
[2026-01-28 13:44:56] info: [enhancedGroomInteractions] Calculated effects: +9 bonding, -9 stress, quality: excellent
[2026-01-28 13:44:56] info: [enhancedGroomController] Enhanced interaction completed: +9 bonding, -9 stress
[2026-01-28 13:44:56] info: [POST] /api/grooms/enhanced/interact - 201
[2026-01-28 13:44:56] info: [POST] /api/grooms/enhanced/interact
[2026-01-28 13:44:56] warn: [MemoryMonitoring] Memory threshold exceeded: 1935MB
[2026-01-28 13:44:56] info: [auth:rh92vw] Starting auth for POST /grooms/enhanced/interact
[2026-01-28 13:44:56] info: [auth:rh92vw] Token from cookie: false
[2026-01-28 13:44:56] info: [auth:rh92vw] Token from header: true
[2026-01-28 13:44:56] info: [auth:rh92vw] Authenticated user bc9ffd99-9ffe-4908-850c-e92d8e759bd9
[2026-01-28 13:44:56] info: [auth:b6sei] Starting auth for POST /interact
[2026-01-28 13:44:56] info: [auth:b6sei] Token from cookie: false
[2026-01-28 13:44:56] info: [auth:b6sei] Token from header: true
[2026-01-28 13:44:56] info: [auth:b6sei] Authenticated user bc9ffd99-9ffe-4908-850c-e92d8e759bd9
[2026-01-28 13:44:56] info: [enhancedGroomController] Performing enhanced bonding_time interaction
[2026-01-28 13:44:56] info: [POST] /api/grooms/enhanced/interact - 400
[2026-01-28 13:44:56] info: [POST] /api/grooms/enhanced/interact
[2026-01-28 13:44:56] warn: [MemoryMonitoring] Memory threshold exceeded: 1944MB
[2026-01-28 13:44:56] info: [auth:wcqtrh] Starting auth for POST /grooms/enhanced/interact
[2026-01-28 13:44:56] info: [auth:wcqtrh] Token from cookie: false
[2026-01-28 13:44:56] info: [auth:wcqtrh] Token from header: true
[2026-01-28 13:44:56] info: [auth:wcqtrh] Authenticated user bc9ffd99-9ffe-4908-850c-e92d8e759bd9
[2026-01-28 13:44:56] info: [auth:y5oeb8] Starting auth for POST /interact
[2026-01-28 13:44:56] info: [auth:y5oeb8] Token from cookie: false
[2026-01-28 13:44:56] info: [auth:y5oeb8] Token from header: true
[2026-01-28 13:44:56] info: [auth:y5oeb8] Authenticated user bc9ffd99-9ffe-4908-850c-e92d8e759bd9
[2026-01-28 13:44:56] warn: [enhancedGroomRoutes] Validation errors: [{"type":"field","msg":"Invalid value","path":"interactionType","location":"body"},{"type":"field","msg":"Interaction type must be a non-empty string (max 50 characters)","path":"interactionType","location":"body"},{"type":"field","msg":"Invalid value","path":"variation","location":"body"},{"type":"field","msg":"Variation must be a non-empty string (max 100 characters)","path":"variation","location":"body"},{"type":"field","msg":"Duration must be between 5 and 180 minutes","path":"duration","location":"body"}]
[2026-01-28 13:44:56] info: [POST] /api/grooms/enhanced/interact - 400
[2026-01-28 13:44:56] info: [POST] /api/grooms/enhanced/interact
[2026-01-28 13:44:56] warn: [MemoryMonitoring] Memory threshold exceeded: 1936MB
[2026-01-28 13:44:56] info: [auth:mi60xi] Starting auth for POST /grooms/enhanced/interact
[2026-01-28 13:44:56] info: [auth:mi60xi] Token from cookie: false
[2026-01-28 13:44:56] info: [auth:mi60xi] Token from header: true
[2026-01-28 13:44:56] info: [auth:mi60xi] Authenticated user bc9ffd99-9ffe-4908-850c-e92d8e759bd9
[2026-01-28 13:44:56] info: [auth:m2l9yg] Starting auth for POST /interact
[2026-01-28 13:44:56] info: [auth:m2l9yg] Token from cookie: false
[2026-01-28 13:44:56] info: [auth:m2l9yg] Token from header: true
[2026-01-28 13:44:56] info: [auth:m2l9yg] Authenticated user bc9ffd99-9ffe-4908-850c-e92d8e759bd9
[2026-01-28 13:44:56] info: [enhancedGroomController] Performing enhanced invalid_type interaction
[2026-01-28 13:44:56] info: [POST] /api/grooms/enhanced/interact - 400
[2026-01-28 13:44:56] info: [POST] /api/grooms/enhanced/interact
[2026-01-28 13:44:56] warn: [MemoryMonitoring] Memory threshold exceeded: 1943MB
[2026-01-28 13:44:56] info: [auth:glbo5] Starting auth for POST /grooms/enhanced/interact
[2026-01-28 13:44:56] info: [auth:glbo5] Token from cookie: false
[2026-01-28 13:44:56] info: [auth:glbo5] Token from header: true
[2026-01-28 13:44:56] info: [auth:glbo5] Authenticated user bc9ffd99-9ffe-4908-850c-e92d8e759bd9
[2026-01-28 13:44:56] info: [auth:opacif] Starting auth for POST /interact
[2026-01-28 13:44:56] info: [auth:opacif] Token from cookie: false
[2026-01-28 13:44:56] info: [auth:opacif] Token from header: true
[2026-01-28 13:44:56] info: [auth:opacif] Authenticated user bc9ffd99-9ffe-4908-850c-e92d8e759bd9
[2026-01-28 13:44:56] warn: [enhancedGroomRoutes] Validation errors: [{"type":"field","value":200,"msg":"Duration must be between 5 and 180 minutes","path":"duration","location":"body"}]
[2026-01-28 13:44:56] info: [POST] /api/grooms/enhanced/interact - 400
[2026-01-28 13:44:56] info: [GET] /api/grooms/enhanced/relationship/73467/146911
[2026-01-28 13:44:56] warn: [MemoryMonitoring] Memory threshold exceeded: 1936MB
[2026-01-28 13:44:56] info: [auth:uyp7mj] Starting auth for GET /grooms/enhanced/relationship/73467/146911
[2026-01-28 13:44:56] info: [auth:uyp7mj] Token from cookie: false
[2026-01-28 13:44:56] info: [auth:uyp7mj] Token from header: true
[2026-01-28 13:44:56] info: [auth:uyp7mj] Authenticated user bc9ffd99-9ffe-4908-850c-e92d8e759bd9
[2026-01-28 13:44:56] info: [auth:ioird8p] Starting auth for GET /relationship/73467/146911
[2026-01-28 13:44:56] info: [auth:ioird8p] Token from cookie: false
[2026-01-28 13:44:56] info: [auth:ioird8p] Token from header: true
[2026-01-28 13:44:56] info: [auth:ioird8p] Authenticated user bc9ffd99-9ffe-4908-850c-e92d8e759bd9
[2026-01-28 13:44:56] info: [ownership] Validated ownership: user bc9ffd99-9ffe-4908-850c-e92d8e759bd9 owns groom 73467
[2026-01-28 13:44:56] info: [ownership] Validated ownership: user bc9ffd99-9ffe-4908-850c-e92d8e759bd9 owns horse 146911
[2026-01-28 13:44:56] info: [GET] /api/grooms/enhanced/relationship/73467/146911 - 200
[2026-01-28 13:44:56] info: [GET] /api/grooms/enhanced/interactions/types
[2026-01-28 13:44:56] warn: [MemoryMonitoring] Memory threshold exceeded: 1946MB
[2026-01-28 13:44:56] info: [auth:su8b6r] Starting auth for GET /grooms/enhanced/interactions/types
[2026-01-28 13:44:56] info: [auth:su8b6r] Token from cookie: false
[2026-01-28 13:44:56] info: [auth:su8b6r] Token from header: true
[2026-01-28 13:44:56] info: [auth:su8b6r] Authenticated user bc9ffd99-9ffe-4908-850c-e92d8e759bd9
[2026-01-28 13:44:56] info: [auth:t38mon] Starting auth for GET /interactions/types
[2026-01-28 13:44:56] info: [auth:t38mon] Token from cookie: false
[2026-01-28 13:44:56] info: [auth:t38mon] Token from header: true
[2026-01-28 13:44:56] info: [auth:t38mon] Authenticated user bc9ffd99-9ffe-4908-850c-e92d8e759bd9
[2026-01-28 13:44:56] info: [GET] /api/grooms/enhanced/interactions/types - 200
[2026-01-28 13:44:56] info: [GET] /api/grooms/enhanced/interactions/73467/146911
[2026-01-28 13:44:56] warn: [MemoryMonitoring] Memory threshold exceeded: 1941MB
[2026-01-28 13:44:56] info: [auth:38c1pe] Starting auth for GET /grooms/enhanced/interactions/73467/146911
[2026-01-28 13:44:56] info: [auth:38c1pe] Token from cookie: false
[2026-01-28 13:44:56] warn: [auth:38c1pe] Access token is required for GET /grooms/enhanced/interactions/73467/146911 from ::ffff:127.0.0.1
[2026-01-28 13:44:56] info: [GET] /api/grooms/enhanced/interactions/73467/146911 - 401
[2026-01-28 13:44:56] info: [GET] /api/grooms/enhanced/interact
[2026-01-28 13:44:56] warn: [MemoryMonitoring] Memory threshold exceeded: 1939MB
[2026-01-28 13:44:56] info: [auth:y2z4f] Starting auth for GET /grooms/enhanced/interact
[2026-01-28 13:44:56] info: [auth:y2z4f] Token from cookie: false
[2026-01-28 13:44:56] warn: [auth:y2z4f] Access token is required for GET /grooms/enhanced/interact from ::ffff:127.0.0.1
[2026-01-28 13:44:56] info: [GET] /api/grooms/enhanced/interact - 401
[2026-01-28 13:44:56] info: [GET] /api/grooms/enhanced/relationship/73467/146911
[2026-01-28 13:44:56] warn: [MemoryMonitoring] Memory threshold exceeded: 1939MB
[2026-01-28 13:44:56] info: [auth:jplwl] Starting auth for GET /grooms/enhanced/relationship/73467/146911
[2026-01-28 13:44:56] info: [auth:jplwl] Token from cookie: false
[2026-01-28 13:44:56] warn: [auth:jplwl] Access token is required for GET /grooms/enhanced/relationship/73467/146911 from ::ffff:127.0.0.1
[2026-01-28 13:44:56] info: [GET] /api/grooms/enhanced/relationship/73467/146911 - 401
[2026-01-28 13:44:56] info: [GET] /api/grooms/enhanced/interactions/types
[2026-01-28 13:44:56] warn: [MemoryMonitoring] Memory threshold exceeded: 1937MB
[2026-01-28 13:44:56] info: [auth:oapout] Starting auth for GET /grooms/enhanced/interactions/types
[2026-01-28 13:44:56] info: [auth:oapout] Token from cookie: false
[2026-01-28 13:44:56] warn: [auth:oapout] Access token is required for GET /grooms/enhanced/interactions/types from ::ffff:127.0.0.1
[2026-01-28 13:44:56] info: [GET] /api/grooms/enhanced/interactions/types - 401
[2026-01-28 13:44:56] info: [GET] /api/grooms/enhanced/interactions/73467/146911
[2026-01-28 13:44:56] warn: [MemoryMonitoring] Memory threshold exceeded: 1938MB
[2026-01-28 13:44:56] info: [auth:1oaexf] Starting auth for GET /grooms/enhanced/interactions/73467/146911
[2026-01-28 13:44:56] info: [auth:1oaexf] Token from cookie: false
[2026-01-28 13:44:56] info: [auth:1oaexf] Token from header: true
[2026-01-28 13:44:56] info: [auth:1oaexf] Authenticated user f6c16fb8-aa36-479e-8f0b-1563198d15da
[2026-01-28 13:44:56] info: [auth:mvdua] Starting auth for GET /interactions/73467/146911
[2026-01-28 13:44:56] info: [auth:mvdua] Token from cookie: false
[2026-01-28 13:44:56] info: [auth:mvdua] Token from header: true
[2026-01-28 13:44:56] info: [auth:mvdua] Authenticated user f6c16fb8-aa36-479e-8f0b-1563198d15da
[2026-01-28 13:44:56] warn: [ownership] groom 73467 not found or not owned by user f6c16fb8-aa36-479e-8f0b-1563198d15da
[2026-01-28 13:44:56] info: [GET] /api/grooms/enhanced/interactions/73467/146911 - 404
PASS tests/integration/enhancedGroomInteractions.test.mjs
  Enhanced Groom Interactions Integration Tests
    1. Get Available Enhanced Interactions
      √ should get available interactions for groom-horse pair (115 ms)
      √ should return 404 for non-existent groom (36 ms)
      √ should return 404 for non-existent horse (41 ms)
    2. Perform Enhanced Interactions
      √ should perform a basic enhanced interaction (66 ms)
      √ should perform enrichment interaction with higher effects (62 ms)
      √ should prevent multiple interactions per day (96 ms)
      √ should validate required fields (34 ms)
      √ should validate interaction type (37 ms)
      √ should validate duration bounds (34 ms)
    3. Relationship Details
      √ should get detailed relationship information (47 ms)
    4. Information Endpoints
      √ should get interaction types (40 ms)
    5. Authentication and Authorization
      √ should require authentication for all endpoints (88 ms)
      √ should prevent access to other users' grooms and horses (42 ms)

[2026-01-28 13:44:56] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:44:56] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:44:56] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:44:56] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:44:57] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:57] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:57] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:57] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:57] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:57] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:57] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:57] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:57] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:57] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:44:57] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 13:44:57] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:44:57] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:44:57] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:44:57] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:44:57] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:44:57] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:44:57] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 13:44:57] info: [POST] /api/personality-evolution/groom/73468/evolve
[2026-01-28 13:44:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1992MB
[2026-01-28 13:44:57] info: [auth:e3ziza] Starting auth for POST /personality-evolution/groom/73468/evolve
[2026-01-28 13:44:57] info: [auth:e3ziza] Token from cookie: false
[2026-01-28 13:44:57] info: [auth:e3ziza] Token from header: true
[2026-01-28 13:44:57] info: [auth:e3ziza] Authenticated user 92459e7a-bcad-4902-b336-b01aef6e5af0
[2026-01-28 13:44:57] info: [auth:4eciv] Starting auth for POST /groom/73468/evolve
[2026-01-28 13:44:57] info: [auth:4eciv] Token from cookie: false
[2026-01-28 13:44:57] info: [auth:4eciv] Token from header: true
[2026-01-28 13:44:57] info: [auth:4eciv] Authenticated user 92459e7a-bcad-4902-b336-b01aef6e5af0
[2026-01-28 13:44:57] info: [ownership] Validated ownership: user 92459e7a-bcad-4902-b336-b01aef6e5af0 owns groom 73468
[2026-01-28 13:44:57] info: [personalityEvolutionController.evolveGroomPersonalityController] Processing groom evolution for ID: 73468
[2026-01-28 13:44:57] info: [personalityEvolutionSystem.evolveGroomPersonality] Starting evolution analysis for groom 73468
[2026-01-28 13:44:57] info: [personalityEvolutionSystem.applyPersonalityEvolutionEffects] Applying effects for groom 73468
[2026-01-28 13:44:57] info: [POST] /api/personality-evolution/groom/73468/evolve - 200
[2026-01-28 13:44:57] info: [POST] /api/personality-evolution/groom/invalid/evolve
[2026-01-28 13:44:57] warn: [MemoryMonitoring] Memory threshold exceeded: 2000MB
[2026-01-28 13:44:57] info: [auth:xrq4ti] Starting auth for POST /personality-evolution/groom/invalid/evolve
[2026-01-28 13:44:57] info: [auth:xrq4ti] Token from cookie: false
[2026-01-28 13:44:57] info: [auth:xrq4ti] Token from header: true
[2026-01-28 13:44:57] info: [auth:xrq4ti] Authenticated user 92459e7a-bcad-4902-b336-b01aef6e5af0
[2026-01-28 13:44:57] info: [auth:p4290e] Starting auth for POST /groom/invalid/evolve
[2026-01-28 13:44:57] info: [auth:p4290e] Token from cookie: false
[2026-01-28 13:44:57] info: [auth:p4290e] Token from header: true
[2026-01-28 13:44:57] info: [auth:p4290e] Authenticated user 92459e7a-bcad-4902-b336-b01aef6e5af0
[2026-01-28 13:44:58] warn: [personalityEvolutionRoutes] Validation errors: [{"type":"field","value":"invalid","msg":"Groom ID must be a positive integer","path":"groomId","location":"params"}]
[2026-01-28 13:44:58] info: [POST] /api/personality-evolution/groom/invalid/evolve - 400
[2026-01-28 13:44:58] info: [POST] /api/personality-evolution/groom/73468/evolve
[2026-01-28 13:44:58] warn: [MemoryMonitoring] Memory threshold exceeded: 2004MB
[2026-01-28 13:44:58] info: [auth:tsj9gk] Starting auth for POST /personality-evolution/groom/73468/evolve
[2026-01-28 13:44:58] info: [auth:tsj9gk] Token from cookie: false
[2026-01-28 13:44:58] warn: [auth:tsj9gk] Access token is required for POST /personality-evolution/groom/73468/evolve from ::ffff:127.0.0.1
[2026-01-28 13:44:58] info: [POST] /api/personality-evolution/groom/73468/evolve - 401
[2026-01-28 13:44:58] info: [POST] /api/personality-evolution/horse/146914/evolve
[2026-01-28 13:44:58] warn: [MemoryMonitoring] Memory threshold exceeded: 2005MB
[2026-01-28 13:44:58] info: [auth:j335d5] Starting auth for POST /personality-evolution/horse/146914/evolve
[2026-01-28 13:44:58] info: [auth:j335d5] Token from cookie: false
[2026-01-28 13:44:58] info: [auth:j335d5] Token from header: true
[2026-01-28 13:44:58] info: [auth:j335d5] Authenticated user 92459e7a-bcad-4902-b336-b01aef6e5af0
[2026-01-28 13:44:58] info: [auth:wkwx5f] Starting auth for POST /horse/146914/evolve
[2026-01-28 13:44:58] info: [auth:wkwx5f] Token from cookie: false
[2026-01-28 13:44:58] info: [auth:wkwx5f] Token from header: true
[2026-01-28 13:44:58] info: [auth:wkwx5f] Authenticated user 92459e7a-bcad-4902-b336-b01aef6e5af0
[2026-01-28 13:44:58] info: [ownership] Validated ownership: user 92459e7a-bcad-4902-b336-b01aef6e5af0 owns horse 146914
[2026-01-28 13:44:58] info: [personalityEvolutionController.evolveHorseTemperamentController] Processing horse evolution for ID: 146914
[2026-01-28 13:44:58] info: [personalityEvolutionSystem.evolveHorseTemperament] Starting evolution analysis for horse 146914
[2026-01-28 13:44:58] info: [personalityEvolutionSystem.applyPersonalityEvolutionEffects] Applying effects for horse 146914
[2026-01-28 13:44:58] info: [POST] /api/personality-evolution/horse/146914/evolve - 200
[2026-01-28 13:44:58] info: [POST] /api/personality-evolution/horse/invalid/evolve
[2026-01-28 13:44:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1999MB
[2026-01-28 13:44:58] info: [auth:69zc5] Starting auth for POST /personality-evolution/horse/invalid/evolve
[2026-01-28 13:44:58] info: [auth:69zc5] Token from cookie: false
[2026-01-28 13:44:58] info: [auth:69zc5] Token from header: true
[2026-01-28 13:44:58] info: [auth:69zc5] Authenticated user 92459e7a-bcad-4902-b336-b01aef6e5af0
[2026-01-28 13:44:58] info: [auth:ab8vyq] Starting auth for POST /horse/invalid/evolve
[2026-01-28 13:44:58] info: [auth:ab8vyq] Token from cookie: false
[2026-01-28 13:44:58] info: [auth:ab8vyq] Token from header: true
[2026-01-28 13:44:58] info: [auth:ab8vyq] Authenticated user 92459e7a-bcad-4902-b336-b01aef6e5af0
[2026-01-28 13:44:58] warn: [personalityEvolutionRoutes] Validation errors: [{"type":"field","value":"invalid","msg":"Horse ID must be a positive integer","path":"horseId","location":"params"}]
[2026-01-28 13:44:58] info: [POST] /api/personality-evolution/horse/invalid/evolve - 400
[2026-01-28 13:44:58] info: [GET] /api/personality-evolution/groom/73468/triggers
[2026-01-28 13:44:58] warn: [MemoryMonitoring] Memory threshold exceeded: 2002MB
[2026-01-28 13:44:58] info: [auth:uhzzm] Starting auth for GET /personality-evolution/groom/73468/triggers
[2026-01-28 13:44:58] info: [auth:uhzzm] Token from cookie: false
[2026-01-28 13:44:58] info: [auth:uhzzm] Token from header: true
[2026-01-28 13:44:58] info: [auth:uhzzm] Authenticated user 92459e7a-bcad-4902-b336-b01aef6e5af0
[2026-01-28 13:44:58] info: [auth:nu7lwd] Starting auth for GET /groom/73468/triggers
[2026-01-28 13:44:58] info: [auth:nu7lwd] Token from cookie: false
[2026-01-28 13:44:58] info: [auth:nu7lwd] Token from header: true
[2026-01-28 13:44:58] info: [auth:nu7lwd] Authenticated user 92459e7a-bcad-4902-b336-b01aef6e5af0
[2026-01-28 13:44:58] info: [personalityEvolutionController.getEvolutionTriggersController] Analyzing triggers for groom ID: 73468
[2026-01-28 13:44:58] info: [ownership] Found owned groom 73468 for user 92459e7a-bcad-4902-b336-b01aef6e5af0
[2026-01-28 13:44:58] info: [personalityEvolutionSystem.calculatePersonalityEvolutionTriggers] Analyzing triggers for groom 73468
[2026-01-28 13:44:58] info: [GET] /api/personality-evolution/groom/73468/triggers - 200
[2026-01-28 13:44:58] info: [GET] /api/personality-evolution/horse/146914/triggers
[2026-01-28 13:44:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1994MB
[2026-01-28 13:44:58] info: [auth:jcwhb] Starting auth for GET /personality-evolution/horse/146914/triggers
[2026-01-28 13:44:58] info: [auth:jcwhb] Token from cookie: false
[2026-01-28 13:44:58] info: [auth:jcwhb] Token from header: true
[2026-01-28 13:44:58] info: [auth:jcwhb] Authenticated user 92459e7a-bcad-4902-b336-b01aef6e5af0
[2026-01-28 13:44:58] info: [auth:dw4e9g] Starting auth for GET /horse/146914/triggers
[2026-01-28 13:44:58] info: [auth:dw4e9g] Token from cookie: false
[2026-01-28 13:44:58] info: [auth:dw4e9g] Token from header: true
[2026-01-28 13:44:58] info: [auth:dw4e9g] Authenticated user 92459e7a-bcad-4902-b336-b01aef6e5af0
[2026-01-28 13:44:58] info: [personalityEvolutionController.getEvolutionTriggersController] Analyzing triggers for horse ID: 146914
[2026-01-28 13:44:58] info: [ownership] Found owned horse 146914 for user 92459e7a-bcad-4902-b336-b01aef6e5af0
[2026-01-28 13:44:58] info: [personalityEvolutionSystem.calculatePersonalityEvolutionTriggers] Analyzing triggers for horse 146914
[2026-01-28 13:44:58] info: [GET] /api/personality-evolution/horse/146914/triggers - 200
[2026-01-28 13:44:58] info: [GET] /api/personality-evolution/invalid/73468/triggers
[2026-01-28 13:44:58] warn: [MemoryMonitoring] Memory threshold exceeded: 2001MB
[2026-01-28 13:44:58] info: [auth:ttndo7] Starting auth for GET /personality-evolution/invalid/73468/triggers
[2026-01-28 13:44:58] info: [auth:ttndo7] Token from cookie: false
[2026-01-28 13:44:58] info: [auth:ttndo7] Token from header: true
[2026-01-28 13:44:58] info: [auth:ttndo7] Authenticated user 92459e7a-bcad-4902-b336-b01aef6e5af0
[2026-01-28 13:44:58] info: [auth:va6q51] Starting auth for GET /invalid/73468/triggers
[2026-01-28 13:44:58] info: [auth:va6q51] Token from cookie: false
[2026-01-28 13:44:58] info: [auth:va6q51] Token from header: true
[2026-01-28 13:44:58] info: [auth:va6q51] Authenticated user 92459e7a-bcad-4902-b336-b01aef6e5af0
[2026-01-28 13:44:58] warn: [personalityEvolutionRoutes] Validation errors: [{"type":"field","value":"invalid","msg":"Entity type must be either \"groom\" or \"horse\"","path":"entityType","location":"params"}]
[2026-01-28 13:44:58] info: [GET] /api/personality-evolution/invalid/73468/triggers - 400
[2026-01-28 13:44:58] info: [GET] /api/personality-evolution/groom/73468/stability
[2026-01-28 13:44:58] warn: [MemoryMonitoring] Memory threshold exceeded: 2005MB
[2026-01-28 13:44:58] info: [auth:s0hn77] Starting auth for GET /personality-evolution/groom/73468/stability
[2026-01-28 13:44:58] info: [auth:s0hn77] Token from cookie: false
[2026-01-28 13:44:58] info: [auth:s0hn77] Token from header: true
[2026-01-28 13:44:58] info: [auth:s0hn77] Authenticated user 92459e7a-bcad-4902-b336-b01aef6e5af0
[2026-01-28 13:44:58] info: [auth:bxsij9] Starting auth for GET /groom/73468/stability
[2026-01-28 13:44:58] info: [auth:bxsij9] Token from cookie: false
[2026-01-28 13:44:58] info: [auth:bxsij9] Token from header: true
[2026-01-28 13:44:58] info: [auth:bxsij9] Authenticated user 92459e7a-bcad-4902-b336-b01aef6e5af0
[2026-01-28 13:44:58] info: [personalityEvolutionController.getPersonalityStabilityController] Analyzing stability for groom ID: 73468
[2026-01-28 13:44:58] info: [ownership] Found owned groom 73468 for user 92459e7a-bcad-4902-b336-b01aef6e5af0
[2026-01-28 13:44:58] info: [personalityEvolutionSystem.analyzePersonalityStability] Analyzing stability for groom 73468
[2026-01-28 13:44:58] info: [GET] /api/personality-evolution/groom/73468/stability - 200
[2026-01-28 13:44:58] info: [GET] /api/personality-evolution/horse/146914/stability
[2026-01-28 13:44:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1996MB
[2026-01-28 13:44:58] info: [auth:n2x02] Starting auth for GET /personality-evolution/horse/146914/stability
[2026-01-28 13:44:58] info: [auth:n2x02] Token from cookie: false
[2026-01-28 13:44:58] info: [auth:n2x02] Token from header: true
[2026-01-28 13:44:58] info: [auth:n2x02] Authenticated user 92459e7a-bcad-4902-b336-b01aef6e5af0
[2026-01-28 13:44:58] info: [auth:5ysi6v] Starting auth for GET /horse/146914/stability
[2026-01-28 13:44:58] info: [auth:5ysi6v] Token from cookie: false
[2026-01-28 13:44:58] info: [auth:5ysi6v] Token from header: true
[2026-01-28 13:44:58] info: [auth:5ysi6v] Authenticated user 92459e7a-bcad-4902-b336-b01aef6e5af0
[2026-01-28 13:44:58] info: [personalityEvolutionController.getPersonalityStabilityController] Analyzing stability for horse ID: 146914
[2026-01-28 13:44:58] info: [ownership] Found owned horse 146914 for user 92459e7a-bcad-4902-b336-b01aef6e5af0
[2026-01-28 13:44:58] info: [personalityEvolutionSystem.analyzePersonalityStability] Analyzing stability for horse 146914
[2026-01-28 13:44:58] info: [GET] /api/personality-evolution/horse/146914/stability - 200
[2026-01-28 13:44:58] info: [GET] /api/personality-evolution/groom/73468/predict
[2026-01-28 13:44:58] warn: [MemoryMonitoring] Memory threshold exceeded: 2002MB
[2026-01-28 13:44:58] info: [auth:uokt3g] Starting auth for GET /personality-evolution/groom/73468/predict
[2026-01-28 13:44:58] info: [auth:uokt3g] Token from cookie: false
[2026-01-28 13:44:58] info: [auth:uokt3g] Token from header: true
[2026-01-28 13:44:58] info: [auth:uokt3g] Authenticated user 92459e7a-bcad-4902-b336-b01aef6e5af0
[2026-01-28 13:44:58] info: [auth:59p0j] Starting auth for GET /groom/73468/predict
[2026-01-28 13:44:58] info: [auth:59p0j] Token from cookie: false
[2026-01-28 13:44:58] info: [auth:59p0j] Token from header: true
[2026-01-28 13:44:58] info: [auth:59p0j] Authenticated user 92459e7a-bcad-4902-b336-b01aef6e5af0
[2026-01-28 13:44:58] info: [personalityEvolutionController.predictPersonalityEvolutionController] Predicting evolution for groom ID: 73468 over 30 days
[2026-01-28 13:44:58] info: [ownership] Found owned groom 73468 for user 92459e7a-bcad-4902-b336-b01aef6e5af0
[2026-01-28 13:44:58] info: [personalityEvolutionSystem.predictPersonalityEvolution] Predicting evolution for groom 73468 over 30 days
[2026-01-28 13:44:58] info: [GET] /api/personality-evolution/groom/73468/predict - 200
[2026-01-28 13:44:58] info: [GET] /api/personality-evolution/horse/146914/predict?timeframeDays=60
[2026-01-28 13:44:58] warn: [MemoryMonitoring] Memory threshold exceeded: 2007MB
[2026-01-28 13:44:58] info: [auth:ql9rih] Starting auth for GET /personality-evolution/horse/146914/predict
[2026-01-28 13:44:58] info: [auth:ql9rih] Token from cookie: false
[2026-01-28 13:44:58] info: [auth:ql9rih] Token from header: true
[2026-01-28 13:44:58] info: [auth:ql9rih] Authenticated user 92459e7a-bcad-4902-b336-b01aef6e5af0
[2026-01-28 13:44:58] info: [auth:kccp4] Starting auth for GET /horse/146914/predict
[2026-01-28 13:44:58] info: [auth:kccp4] Token from cookie: false
[2026-01-28 13:44:58] info: [auth:kccp4] Token from header: true
[2026-01-28 13:44:58] info: [auth:kccp4] Authenticated user 92459e7a-bcad-4902-b336-b01aef6e5af0
[2026-01-28 13:44:58] info: [personalityEvolutionController.predictPersonalityEvolutionController] Predicting evolution for horse ID: 146914 over 60 days
[2026-01-28 13:44:58] info: [ownership] Found owned horse 146914 for user 92459e7a-bcad-4902-b336-b01aef6e5af0
[2026-01-28 13:44:58] info: [personalityEvolutionSystem.predictPersonalityEvolution] Predicting evolution for horse 146914 over 60 days
[2026-01-28 13:44:58] info: [GET] /api/personality-evolution/horse/146914/predict?timeframeDays=60 - 200
[2026-01-28 13:44:58] info: [GET] /api/personality-evolution/groom/73468/predict?timeframeDays=500
[2026-01-28 13:44:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1997MB
[2026-01-28 13:44:58] info: [auth:jyksuj] Starting auth for GET /personality-evolution/groom/73468/predict
[2026-01-28 13:44:58] info: [auth:jyksuj] Token from cookie: false
[2026-01-28 13:44:58] info: [auth:jyksuj] Token from header: true
[2026-01-28 13:44:58] info: [auth:jyksuj] Authenticated user 92459e7a-bcad-4902-b336-b01aef6e5af0
[2026-01-28 13:44:58] info: [auth:8ioq4c] Starting auth for GET /groom/73468/predict
[2026-01-28 13:44:58] info: [auth:8ioq4c] Token from cookie: false
[2026-01-28 13:44:58] info: [auth:8ioq4c] Token from header: true
[2026-01-28 13:44:58] info: [auth:8ioq4c] Authenticated user 92459e7a-bcad-4902-b336-b01aef6e5af0
[2026-01-28 13:44:58] warn: [personalityEvolutionRoutes] Validation errors: [{"type":"field","value":"500","msg":"Timeframe must be between 1 and 365 days","path":"timeframeDays","location":"query"}]
[2026-01-28 13:44:58] info: [GET] /api/personality-evolution/groom/73468/predict?timeframeDays=500 - 400
[2026-01-28 13:44:58] info: [GET] /api/personality-evolution/groom/73468/history
[2026-01-28 13:44:58] warn: [MemoryMonitoring] Memory threshold exceeded: 2001MB
[2026-01-28 13:44:58] info: [auth:2p3fx] Starting auth for GET /personality-evolution/groom/73468/history
[2026-01-28 13:44:58] info: [auth:2p3fx] Token from cookie: false
[2026-01-28 13:44:58] info: [auth:2p3fx] Token from header: true
[2026-01-28 13:44:58] info: [auth:2p3fx] Authenticated user 92459e7a-bcad-4902-b336-b01aef6e5af0
[2026-01-28 13:44:58] info: [auth:jtqp3r] Starting auth for GET /groom/73468/history
[2026-01-28 13:44:58] info: [auth:jtqp3r] Token from cookie: false
[2026-01-28 13:44:58] info: [auth:jtqp3r] Token from header: true
[2026-01-28 13:44:58] info: [auth:jtqp3r] Authenticated user 92459e7a-bcad-4902-b336-b01aef6e5af0
[2026-01-28 13:44:58] info: [personalityEvolutionController.getPersonalityEvolutionHistoryController] Getting evolution history for groom ID: 73468
[2026-01-28 13:44:58] info: [ownership] Found owned groom 73468 for user 92459e7a-bcad-4902-b336-b01aef6e5af0
[2026-01-28 13:44:58] info: [personalityEvolutionSystem.getPersonalityEvolutionHistory] Getting history for groom 73468
[2026-01-28 13:44:58] info: [GET] /api/personality-evolution/groom/73468/history - 200
[2026-01-28 13:44:58] info: [POST] /api/personality-evolution/apply-effects
[2026-01-28 13:44:58] warn: [MemoryMonitoring] Memory threshold exceeded: 2008MB
[2026-01-28 13:44:58] info: [auth:xiexyn] Starting auth for POST /personality-evolution/apply-effects
[2026-01-28 13:44:58] info: [auth:xiexyn] Token from cookie: false
[2026-01-28 13:44:58] info: [auth:xiexyn] Token from header: true
[2026-01-28 13:44:58] info: [auth:xiexyn] Authenticated user 92459e7a-bcad-4902-b336-b01aef6e5af0
[2026-01-28 13:44:58] info: [auth:5b1de] Starting auth for POST /apply-effects
[2026-01-28 13:44:58] info: [auth:5b1de] Token from cookie: false
[2026-01-28 13:44:58] info: [auth:5b1de] Token from header: true
[2026-01-28 13:44:58] info: [auth:5b1de] Authenticated user 92459e7a-bcad-4902-b336-b01aef6e5af0
[2026-01-28 13:44:58] info: [personalityEvolutionController.applyPersonalityEvolutionEffectsController] Applying evolution effects for groom ID: 73468
[2026-01-28 13:44:58] info: [personalityEvolutionSystem.applyPersonalityEvolutionEffects] Applying effects for groom 73468
[2026-01-28 13:44:58] info: [POST] /api/personality-evolution/apply-effects - 200
[2026-01-28 13:44:58] info: [POST] /api/personality-evolution/apply-effects
[2026-01-28 13:44:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1998MB
[2026-01-28 13:44:58] info: [auth:chx3t] Starting auth for POST /personality-evolution/apply-effects
[2026-01-28 13:44:58] info: [auth:chx3t] Token from cookie: false
[2026-01-28 13:44:58] info: [auth:chx3t] Token from header: true
[2026-01-28 13:44:58] info: [auth:chx3t] Authenticated user 92459e7a-bcad-4902-b336-b01aef6e5af0
[2026-01-28 13:44:58] info: [auth:zmjca4] Starting auth for POST /apply-effects
[2026-01-28 13:44:58] info: [auth:zmjca4] Token from cookie: false
[2026-01-28 13:44:58] info: [auth:zmjca4] Token from header: true
[2026-01-28 13:44:58] info: [auth:zmjca4] Authenticated user 92459e7a-bcad-4902-b336-b01aef6e5af0
[2026-01-28 13:44:58] warn: [personalityEvolutionRoutes] Validation errors: [{"type":"field","msg":"Entity type must be either \"groom\" or \"horse\"","path":"entityType","location":"body"},{"type":"field","msg":"Invalid evolution type","path":"evolutionType","location":"body"}]
[2026-01-28 13:44:58] info: [POST] /api/personality-evolution/apply-effects - 400
[2026-01-28 13:44:58] info: [POST] /api/personality-evolution/batch-evolve
[2026-01-28 13:44:58] warn: [MemoryMonitoring] Memory threshold exceeded: 2003MB
[2026-01-28 13:44:58] info: [auth:x10qhf] Starting auth for POST /personality-evolution/batch-evolve
[2026-01-28 13:44:58] info: [auth:x10qhf] Token from cookie: false
[2026-01-28 13:44:58] info: [auth:x10qhf] Token from header: true
[2026-01-28 13:44:58] info: [auth:x10qhf] Authenticated user 92459e7a-bcad-4902-b336-b01aef6e5af0
[2026-01-28 13:44:58] info: [auth:ictqlq] Starting auth for POST /batch-evolve
[2026-01-28 13:44:58] info: [auth:ictqlq] Token from cookie: false
[2026-01-28 13:44:58] info: [auth:ictqlq] Token from header: true
[2026-01-28 13:44:58] info: [auth:ictqlq] Authenticated user 92459e7a-bcad-4902-b336-b01aef6e5af0
[2026-01-28 13:44:58] info: [personalityEvolutionController.batchEvolvePersonalitiesController] Processing batch evolution for 2 entities
[2026-01-28 13:44:58] info: [personalityEvolutionSystem.evolveGroomPersonality] Starting evolution analysis for groom 73468
[2026-01-28 13:44:58] info: [personalityEvolutionSystem.applyPersonalityEvolutionEffects] Applying effects for groom 73468
[2026-01-28 13:44:58] info: [personalityEvolutionSystem.evolveHorseTemperament] Starting evolution analysis for horse 146914
[2026-01-28 13:44:58] info: [personalityEvolutionSystem.applyPersonalityEvolutionEffects] Applying effects for horse 146914
[2026-01-28 13:44:58] info: [POST] /api/personality-evolution/batch-evolve - 200
[2026-01-28 13:44:58] info: [POST] /api/personality-evolution/batch-evolve
[2026-01-28 13:44:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1999MB
[2026-01-28 13:44:58] info: [auth:n9hduj] Starting auth for POST /personality-evolution/batch-evolve
[2026-01-28 13:44:58] info: [auth:n9hduj] Token from cookie: false
[2026-01-28 13:44:58] info: [auth:n9hduj] Token from header: true
[2026-01-28 13:44:58] info: [auth:n9hduj] Authenticated user 92459e7a-bcad-4902-b336-b01aef6e5af0
[2026-01-28 13:44:58] info: [auth:0xxn5] Starting auth for POST /batch-evolve
[2026-01-28 13:44:58] info: [auth:0xxn5] Token from cookie: false
[2026-01-28 13:44:58] info: [auth:0xxn5] Token from header: true
[2026-01-28 13:44:58] info: [auth:0xxn5] Authenticated user 92459e7a-bcad-4902-b336-b01aef6e5af0
[2026-01-28 13:44:58] warn: [personalityEvolutionRoutes] Validation errors: [{"type":"field","value":[],"msg":"Entities must be an array with 1-50 items","path":"entities","location":"body"}]
[2026-01-28 13:44:58] info: [POST] /api/personality-evolution/batch-evolve - 400
[2026-01-28 13:44:58] info: [GET] /api/personality-evolution/config
[2026-01-28 13:44:58] warn: [MemoryMonitoring] Memory threshold exceeded: 2003MB
[2026-01-28 13:44:58] info: [auth:armbe] Starting auth for GET /personality-evolution/config
[2026-01-28 13:44:58] info: [auth:armbe] Token from cookie: false
[2026-01-28 13:44:58] info: [auth:armbe] Token from header: true
[2026-01-28 13:44:58] info: [auth:armbe] Authenticated user 92459e7a-bcad-4902-b336-b01aef6e5af0
[2026-01-28 13:44:58] info: [auth:jx7s2j] Starting auth for GET /config
[2026-01-28 13:44:58] info: [auth:jx7s2j] Token from cookie: false
[2026-01-28 13:44:58] info: [auth:jx7s2j] Token from header: true
[2026-01-28 13:44:58] info: [auth:jx7s2j] Authenticated user 92459e7a-bcad-4902-b336-b01aef6e5af0
[2026-01-28 13:44:58] info: [GET] /api/personality-evolution/config - 200
PASS tests/controllers/personalityEvolutionController.test.mjs
  Personality Evolution Controller API
    POST /api/personality-evolution/groom/:groomId/evolve
      √ should evolve groom personality successfully (62 ms)
      √ should return 400 for invalid groom ID (36 ms)
      √ should return 401 without authentication (28 ms)
    POST /api/personality-evolution/horse/:horseId/evolve
      √ should evolve horse temperament successfully (46 ms)
      √ should return 400 for invalid horse ID (33 ms)
    GET /api/personality-evolution/:entityType/:entityId/triggers
      √ should get evolution triggers for groom (38 ms)
      √ should get evolution triggers for horse (41 ms)
      √ should return 400 for invalid entity type (34 ms)
    GET /api/personality-evolution/:entityType/:entityId/stability
      √ should analyze personality stability for groom (42 ms)
      √ should analyze personality stability for horse (41 ms)
    GET /api/personality-evolution/:entityType/:entityId/predict
      √ should predict personality evolution with default timeframe (40 ms)
      √ should predict personality evolution with custom timeframe (37 ms)
      √ should return 400 for invalid timeframe (35 ms)
    GET /api/personality-evolution/:entityType/:entityId/history
      √ should get personality evolution history (34 ms)
    POST /api/personality-evolution/apply-effects
      √ should apply personality evolution effects successfully (40 ms)
      √ should return 400 for missing required fields (33 ms)
    POST /api/personality-evolution/batch-evolve
      √ should process batch evolution successfully (49 ms)
      √ should return 400 for empty entities array (39 ms)
    GET /api/personality-evolution/config
      √ should get system configuration successfully (37 ms)

[2026-01-28 13:44:58] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:44:58] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:44:58] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:44:58] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:45:00] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:00] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:00] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:00] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:00] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:00] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:00] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:00] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:00] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:00] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:45:00] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 13:45:00] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:00] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:45:00] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:45:00] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:45:00] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:45:00] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:45:00] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 13:45:00] info: [GET] /api/grooms/73469/retirement/eligibility
[2026-01-28 13:45:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1856MB
[2026-01-28 13:45:00] info: [auth:mkbpan] Starting auth for GET /grooms/73469/retirement/eligibility
[2026-01-28 13:45:00] info: [auth:mkbpan] Token from cookie: false
[2026-01-28 13:45:00] info: [auth:mkbpan] Token from header: true
[2026-01-28 13:45:00] info: [auth:mkbpan] Authenticated user 63703fd0-a843-4187-8af3-029ab3aaf4e8
[2026-01-28 13:45:00] info: [ownership] Validated ownership: user 63703fd0-a843-4187-8af3-029ab3aaf4e8 owns groom 73469
[2026-01-28 13:45:00] info: [GET] /api/grooms/73469/retirement/eligibility - 200
[2026-01-28 13:45:00] info: [GET] /api/grooms/retirement/statistics
[2026-01-28 13:45:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1862MB
[2026-01-28 13:45:00] info: [auth:0qwgb] Starting auth for GET /grooms/retirement/statistics
[2026-01-28 13:45:00] info: [auth:0qwgb] Token from cookie: false
[2026-01-28 13:45:00] info: [auth:0qwgb] Token from header: true
[2026-01-28 13:45:00] info: [auth:0qwgb] Authenticated user 63703fd0-a843-4187-8af3-029ab3aaf4e8
[2026-01-28 13:45:00] info: [auth:zynwel] Starting auth for GET /retirement/statistics
[2026-01-28 13:45:00] info: [auth:zynwel] Token from cookie: false
[2026-01-28 13:45:00] info: [auth:zynwel] Token from header: true
[2026-01-28 13:45:00] info: [auth:zynwel] Authenticated user 63703fd0-a843-4187-8af3-029ab3aaf4e8
[2026-01-28 13:45:00] info: [GET] /api/grooms/retirement/statistics - 200
[2026-01-28 13:45:00] info: [GET] /api/grooms/retirement/approaching
[2026-01-28 13:45:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1858MB
[2026-01-28 13:45:00] info: [auth:bfck7i] Starting auth for GET /grooms/retirement/approaching
[2026-01-28 13:45:00] info: [auth:bfck7i] Token from cookie: false
[2026-01-28 13:45:00] info: [auth:bfck7i] Token from header: true
[2026-01-28 13:45:00] info: [auth:bfck7i] Authenticated user 63703fd0-a843-4187-8af3-029ab3aaf4e8
[2026-01-28 13:45:00] info: [auth:u6jdc] Starting auth for GET /retirement/approaching
[2026-01-28 13:45:00] info: [auth:u6jdc] Token from cookie: false
[2026-01-28 13:45:00] info: [auth:u6jdc] Token from header: true
[2026-01-28 13:45:00] info: [auth:u6jdc] Authenticated user 63703fd0-a843-4187-8af3-029ab3aaf4e8
[2026-01-28 13:45:00] info: [GET] /api/grooms/retirement/approaching - 200
[2026-01-28 13:45:00] info: [GET] /api/grooms/73476/legacy/eligibility
[2026-01-28 13:45:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1866MB
[2026-01-28 13:45:00] info: [auth:dhri5p] Starting auth for GET /grooms/73476/legacy/eligibility
[2026-01-28 13:45:00] info: [auth:dhri5p] Token from cookie: false
[2026-01-28 13:45:00] info: [auth:dhri5p] Token from header: true
[2026-01-28 13:45:00] info: [auth:dhri5p] Authenticated user 63703fd0-a843-4187-8af3-029ab3aaf4e8
[2026-01-28 13:45:00] info: [ownership] Validated ownership: user 63703fd0-a843-4187-8af3-029ab3aaf4e8 owns groom 73476
[2026-01-28 13:45:00] info: [GET] /api/grooms/73476/legacy/eligibility - 200
[2026-01-28 13:45:00] info: [GET] /api/grooms/legacy/history
[2026-01-28 13:45:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1856MB
[2026-01-28 13:45:00] info: [auth:rzyfgq] Starting auth for GET /grooms/legacy/history
[2026-01-28 13:45:00] info: [auth:rzyfgq] Token from cookie: false
[2026-01-28 13:45:00] info: [auth:rzyfgq] Token from header: true
[2026-01-28 13:45:00] info: [auth:rzyfgq] Authenticated user 63703fd0-a843-4187-8af3-029ab3aaf4e8
[2026-01-28 13:45:00] info: [auth:haje8c] Starting auth for GET /legacy/history
[2026-01-28 13:45:00] info: [auth:haje8c] Token from cookie: false
[2026-01-28 13:45:00] info: [auth:haje8c] Token from header: true
[2026-01-28 13:45:00] info: [auth:haje8c] Authenticated user 63703fd0-a843-4187-8af3-029ab3aaf4e8
[2026-01-28 13:45:00] info: [GET] /api/grooms/legacy/history - 200
[2026-01-28 13:45:00] info: [GET] /api/grooms/talents/definitions
[2026-01-28 13:45:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1864MB
[2026-01-28 13:45:00] info: [auth:djwrkk] Starting auth for GET /grooms/talents/definitions
[2026-01-28 13:45:00] info: [auth:djwrkk] Token from cookie: false
[2026-01-28 13:45:00] info: [auth:djwrkk] Token from header: true
[2026-01-28 13:45:00] info: [auth:djwrkk] Authenticated user 63703fd0-a843-4187-8af3-029ab3aaf4e8
[2026-01-28 13:45:00] info: [GET] /api/grooms/talents/definitions - 200
[2026-01-28 13:45:00] info: [GET] /api/grooms/73481/talents
[2026-01-28 13:45:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1868MB
[2026-01-28 13:45:00] info: [auth:mm1hu2] Starting auth for GET /grooms/73481/talents
[2026-01-28 13:45:00] info: [auth:mm1hu2] Token from cookie: false
[2026-01-28 13:45:00] info: [auth:mm1hu2] Token from header: true
[2026-01-28 13:45:00] info: [auth:mm1hu2] Authenticated user 63703fd0-a843-4187-8af3-029ab3aaf4e8
[2026-01-28 13:45:00] info: [ownership] Validated ownership: user 63703fd0-a843-4187-8af3-029ab3aaf4e8 owns groom 73481
[2026-01-28 13:45:00] info: [GET] /api/grooms/73481/talents - 200
[2026-01-28 13:45:00] info: [POST] /api/grooms/73483/talents/validate
[2026-01-28 13:45:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1858MB
[2026-01-28 13:45:00] info: [auth:drelt] Starting auth for POST /grooms/73483/talents/validate
[2026-01-28 13:45:00] info: [auth:drelt] Token from cookie: false
[2026-01-28 13:45:00] info: [auth:drelt] Token from header: true
[2026-01-28 13:45:00] info: [auth:drelt] Authenticated user 63703fd0-a843-4187-8af3-029ab3aaf4e8
[2026-01-28 13:45:00] info: [ownership] Validated ownership: user 63703fd0-a843-4187-8af3-029ab3aaf4e8 owns groom 73483
[2026-01-28 13:45:01] info: [POST] /api/grooms/73483/talents/validate - 200
[2026-01-28 13:45:01] info: [POST] /api/grooms/73485/talents/select
[2026-01-28 13:45:01] warn: [MemoryMonitoring] Memory threshold exceeded: 1864MB
[2026-01-28 13:45:01] info: [auth:n5nsww] Starting auth for POST /grooms/73485/talents/select
[2026-01-28 13:45:01] info: [auth:n5nsww] Token from cookie: false
[2026-01-28 13:45:01] info: [auth:n5nsww] Token from header: true
[2026-01-28 13:45:01] info: [auth:n5nsww] Authenticated user 63703fd0-a843-4187-8af3-029ab3aaf4e8
[2026-01-28 13:45:01] info: [ownership] Validated ownership: user 63703fd0-a843-4187-8af3-029ab3aaf4e8 owns groom 73485
[2026-01-28 13:45:01] info: Groom 73485 selected talent gentle_hands for tier1
[2026-01-28 13:45:01] info: [POST] /api/grooms/73485/talents/select - 200
[2026-01-28 13:45:01] info: [GET] /api/grooms/73487/retirement/eligibility
[2026-01-28 13:45:01] warn: [MemoryMonitoring] Memory threshold exceeded: 1867MB
[2026-01-28 13:45:01] info: [auth:3k2306] Starting auth for GET /grooms/73487/retirement/eligibility
[2026-01-28 13:45:01] info: [auth:3k2306] Token from cookie: false
[2026-01-28 13:45:01] warn: [auth:3k2306] Access token is required for GET /grooms/73487/retirement/eligibility from ::ffff:127.0.0.1
[2026-01-28 13:45:01] info: [GET] /api/grooms/73487/retirement/eligibility - 401
[2026-01-28 13:45:01] info: [GET] /api/grooms/retirement/statistics
[2026-01-28 13:45:01] warn: [MemoryMonitoring] Memory threshold exceeded: 1866MB
[2026-01-28 13:45:01] info: [auth:eth98k] Starting auth for GET /grooms/retirement/statistics
[2026-01-28 13:45:01] info: [auth:eth98k] Token from cookie: false
[2026-01-28 13:45:01] warn: [auth:eth98k] Access token is required for GET /grooms/retirement/statistics from ::ffff:127.0.0.1
[2026-01-28 13:45:01] info: [GET] /api/grooms/retirement/statistics - 401
[2026-01-28 13:45:01] info: [GET] /api/grooms/73487/talents
[2026-01-28 13:45:01] warn: [MemoryMonitoring] Memory threshold exceeded: 1865MB
[2026-01-28 13:45:01] info: [auth:wqj879] Starting auth for GET /grooms/73487/talents
[2026-01-28 13:45:01] info: [auth:wqj879] Token from cookie: false
[2026-01-28 13:45:01] warn: [auth:wqj879] Access token is required for GET /grooms/73487/talents from ::ffff:127.0.0.1
[2026-01-28 13:45:01] info: [GET] /api/grooms/73487/talents - 401
[2026-01-28 13:45:01] info: [GET] /api/grooms/talents/definitions
[2026-01-28 13:45:01] warn: [MemoryMonitoring] Memory threshold exceeded: 1866MB
[2026-01-28 13:45:01] info: [auth:1dpg0l] Starting auth for GET /grooms/talents/definitions
[2026-01-28 13:45:01] info: [auth:1dpg0l] Token from cookie: false
[2026-01-28 13:45:01] info: [auth:1dpg0l] Token from header: true
[2026-01-28 13:45:01] info: [auth:1dpg0l] Authenticated user 63703fd0-a843-4187-8af3-029ab3aaf4e8
[2026-01-28 13:45:01] info: [GET] /api/grooms/talents/definitions - 200
[2026-01-28 13:45:01] info: [GET] /api/grooms/invalid/retirement/eligibility
[2026-01-28 13:45:01] warn: [MemoryMonitoring] Memory threshold exceeded: 1869MB
[2026-01-28 13:45:01] info: [auth:p8017v] Starting auth for GET /grooms/invalid/retirement/eligibility
[2026-01-28 13:45:01] info: [auth:p8017v] Token from cookie: false
[2026-01-28 13:45:01] info: [auth:p8017v] Token from header: true
[2026-01-28 13:45:01] info: [auth:p8017v] Authenticated user 63703fd0-a843-4187-8af3-029ab3aaf4e8
[2026-01-28 13:45:01] warn: [groomRoutes] Validation errors: [{"type":"field","value":"invalid","msg":"Groom ID must be an integer","path":"id","location":"params"}]
[2026-01-28 13:45:01] info: [GET] /api/grooms/invalid/retirement/eligibility - 400
[2026-01-28 13:45:01] info: [POST] /api/grooms/73493/talents/select
[2026-01-28 13:45:01] warn: [MemoryMonitoring] Memory threshold exceeded: 1871MB
[2026-01-28 13:45:01] info: [auth:pr406] Starting auth for POST /grooms/73493/talents/select
[2026-01-28 13:45:01] info: [auth:pr406] Token from cookie: false
[2026-01-28 13:45:01] info: [auth:pr406] Token from header: true
[2026-01-28 13:45:01] info: [auth:pr406] Authenticated user 63703fd0-a843-4187-8af3-029ab3aaf4e8
[2026-01-28 13:45:01] warn: [groomRoutes] Validation errors: [{"type":"field","value":"invalid_tier","msg":"Invalid tier","path":"tier","location":"body"}]
[2026-01-28 13:45:01] info: [POST] /api/grooms/73493/talents/select - 400
PASS tests/routes/groomRetirementRoutes.test.mjs
  Groom Retirement Routes
    Retirement Endpoints
      √ GET /api/grooms/:id/retirement/eligibility should check eligibility (75 ms)
      √ GET /api/grooms/retirement/statistics should return user stats (117 ms)
      √ GET /api/grooms/retirement/approaching should return approaching retirement grooms (49 ms)
    Legacy Endpoints
      √ GET /api/grooms/:id/legacy/eligibility should check legacy eligibility (47 ms)
      √ GET /api/grooms/legacy/history should return legacy history (49 ms)
    Talent Endpoints
      √ GET /api/grooms/talents/definitions should return talent definitions (40 ms)
      √ GET /api/grooms/:id/talents should return groom talent selections (41 ms)
      √ POST /api/grooms/:id/talents/validate should validate talent selection (57 ms)
      √ POST /api/grooms/:id/talents/select should select talent (47 ms)
    Authentication
      √ should require authentication for protected endpoints (80 ms)
      √ should require authentication for talent definitions (41 ms)
    Validation
      √ should validate groom ID parameter (40 ms)
      √ should validate talent selection data (38 ms)

[2026-01-28 13:45:01] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:01] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:01] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:01] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:45:02] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:02] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:02] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:02] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:02] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:02] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:02] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:02] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:02] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:02] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:45:02] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 13:45:02] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:02] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:45:02] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:45:02] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:45:02] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:45:02] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:45:02] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 13:45:02] info: [groomPerformanceService] Updated metrics for groom 73495
[2026-01-28 13:45:02] info: [groomPerformanceService] Recorded performance for groom 73495: grooming
[2026-01-28 13:45:02] info: [groomPerformanceService] Updated metrics for groom 73495
[2026-01-28 13:45:02] info: [groomPerformanceService] Recorded performance for groom 73495: training
[2026-01-28 13:45:02] info: [groomPerformanceService] Updated metrics for groom 73495
[2026-01-28 13:45:02] info: [groomPerformanceService] Recorded performance for groom 73495: training
[2026-01-28 13:45:02] info: [groomPerformanceService] Updated metrics for groom 73495
[2026-01-28 13:45:02] info: [groomPerformanceService] Recorded performance for groom 73495: training
[2026-01-28 13:45:02] info: [POST] /api/groom-performance/record
[2026-01-28 13:45:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1926MB
[2026-01-28 13:45:02] info: [auth:s66byu] Starting auth for POST /groom-performance/record
[2026-01-28 13:45:02] info: [auth:s66byu] Token from cookie: false
[2026-01-28 13:45:02] info: [auth:s66byu] Token from header: true
[2026-01-28 13:45:02] info: [auth:s66byu] Authenticated user 9f528e97-0da5-48e1-9bcf-4d24e67d7860
[2026-01-28 13:45:02] info: [auth:6k4m8] Starting auth for POST /record
[2026-01-28 13:45:02] info: [auth:6k4m8] Token from cookie: false
[2026-01-28 13:45:02] info: [auth:6k4m8] Token from header: true
[2026-01-28 13:45:02] info: [auth:6k4m8] Authenticated user 9f528e97-0da5-48e1-9bcf-4d24e67d7860
[2026-01-28 13:45:02] info: [groomPerformanceController] Recording performance for groom 73495
[2026-01-28 13:45:02] info: [ownership] Found owned groom 73495 for user 9f528e97-0da5-48e1-9bcf-4d24e67d7860
[2026-01-28 13:45:02] info: [ownership] Found owned horse 146915 for user 9f528e97-0da5-48e1-9bcf-4d24e67d7860
[2026-01-28 13:45:02] info: [groomPerformanceService] Updated metrics for groom 73495
[2026-01-28 13:45:02] info: [groomPerformanceService] Recorded performance for groom 73495: enrichment
[2026-01-28 13:45:02] info: [POST] /api/groom-performance/record - 201
[2026-01-28 13:45:02] info: [GET] /api/groom-performance/groom/73495
[2026-01-28 13:45:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1923MB
[2026-01-28 13:45:02] info: [auth:q2cb2g] Starting auth for GET /groom-performance/groom/73495
[2026-01-28 13:45:02] info: [auth:q2cb2g] Token from cookie: false
[2026-01-28 13:45:02] info: [auth:q2cb2g] Token from header: true
[2026-01-28 13:45:02] info: [auth:q2cb2g] Authenticated user 9f528e97-0da5-48e1-9bcf-4d24e67d7860
[2026-01-28 13:45:02] info: [auth:0rih5] Starting auth for GET /groom/73495
[2026-01-28 13:45:02] info: [auth:0rih5] Token from cookie: false
[2026-01-28 13:45:02] info: [auth:0rih5] Token from header: true
[2026-01-28 13:45:02] info: [auth:0rih5] Authenticated user 9f528e97-0da5-48e1-9bcf-4d24e67d7860
[2026-01-28 13:45:02] info: [ownership] Validated ownership: user 9f528e97-0da5-48e1-9bcf-4d24e67d7860 owns groom 73495
[2026-01-28 13:45:02] info: [groomPerformanceController] Getting performance for groom 73495
[2026-01-28 13:45:02] info: [GET] /api/groom-performance/groom/73495 - 200
[2026-01-28 13:45:02] info: [GET] /api/groom-performance/top?limit=5
[2026-01-28 13:45:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1919MB
[2026-01-28 13:45:02] info: [auth:ak154j] Starting auth for GET /groom-performance/top
[2026-01-28 13:45:02] info: [auth:ak154j] Token from cookie: false
[2026-01-28 13:45:02] info: [auth:ak154j] Token from header: true
[2026-01-28 13:45:02] info: [auth:ak154j] Authenticated user 9f528e97-0da5-48e1-9bcf-4d24e67d7860
[2026-01-28 13:45:02] info: [auth:hu872k] Starting auth for GET /top
[2026-01-28 13:45:02] info: [auth:hu872k] Token from cookie: false
[2026-01-28 13:45:02] info: [auth:hu872k] Token from header: true
[2026-01-28 13:45:02] info: [auth:hu872k] Authenticated user 9f528e97-0da5-48e1-9bcf-4d24e67d7860
[2026-01-28 13:45:02] info: [groomPerformanceController] Getting top performers for user 9f528e97-0da5-48e1-9bcf-4d24e67d7860
[2026-01-28 13:45:02] info: [GET] /api/groom-performance/top?limit=5 - 200
[2026-01-28 13:45:02] info: [GET] /api/groom-performance/config
[2026-01-28 13:45:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1927MB
[2026-01-28 13:45:02] info: [auth:n4ci9g] Starting auth for GET /groom-performance/config
[2026-01-28 13:45:02] info: [auth:n4ci9g] Token from cookie: false
[2026-01-28 13:45:02] info: [auth:n4ci9g] Token from header: true
[2026-01-28 13:45:02] info: [auth:n4ci9g] Authenticated user 9f528e97-0da5-48e1-9bcf-4d24e67d7860
[2026-01-28 13:45:02] info: [auth:8ni70c] Starting auth for GET /config
[2026-01-28 13:45:02] info: [auth:8ni70c] Token from cookie: false
[2026-01-28 13:45:02] info: [auth:8ni70c] Token from header: true
[2026-01-28 13:45:02] info: [auth:8ni70c] Authenticated user 9f528e97-0da5-48e1-9bcf-4d24e67d7860
[2026-01-28 13:45:02] info: [groomPerformanceController] Getting performance config for user 9f528e97-0da5-48e1-9bcf-4d24e67d7860
[2026-01-28 13:45:02] info: [GET] /api/groom-performance/config - 200
[2026-01-28 13:45:02] info: [GET] /api/groom-performance/analytics/73495?days=30
[2026-01-28 13:45:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1921MB
[2026-01-28 13:45:02] info: [auth:fhtnc] Starting auth for GET /groom-performance/analytics/73495
[2026-01-28 13:45:02] info: [auth:fhtnc] Token from cookie: false
[2026-01-28 13:45:02] info: [auth:fhtnc] Token from header: true
[2026-01-28 13:45:02] info: [auth:fhtnc] Authenticated user 9f528e97-0da5-48e1-9bcf-4d24e67d7860
[2026-01-28 13:45:02] info: [auth:h5yzw] Starting auth for GET /analytics/73495
[2026-01-28 13:45:02] info: [auth:h5yzw] Token from cookie: false
[2026-01-28 13:45:02] info: [auth:h5yzw] Token from header: true
[2026-01-28 13:45:02] info: [auth:h5yzw] Authenticated user 9f528e97-0da5-48e1-9bcf-4d24e67d7860
[2026-01-28 13:45:02] info: [ownership] Validated ownership: user 9f528e97-0da5-48e1-9bcf-4d24e67d7860 owns groom 73495
[2026-01-28 13:45:02] info: [groomPerformanceController] Getting analytics for groom 73495, last 30 days
[2026-01-28 13:45:02] info: [GET] /api/groom-performance/analytics/73495?days=30 - 200
[2026-01-28 13:45:02] info: [GET] /api/groom-performance/groom/73496
[2026-01-28 13:45:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1918MB
[2026-01-28 13:45:02] info: [auth:epunm] Starting auth for GET /groom-performance/groom/73496
[2026-01-28 13:45:02] info: [auth:epunm] Token from cookie: false
[2026-01-28 13:45:02] info: [auth:epunm] Token from header: true
[2026-01-28 13:45:02] info: [auth:epunm] Authenticated user 9f528e97-0da5-48e1-9bcf-4d24e67d7860
[2026-01-28 13:45:02] info: [auth:44bs1m] Starting auth for GET /groom/73496
[2026-01-28 13:45:02] info: [auth:44bs1m] Token from cookie: false
[2026-01-28 13:45:02] info: [auth:44bs1m] Token from header: true
[2026-01-28 13:45:02] info: [auth:44bs1m] Authenticated user 9f528e97-0da5-48e1-9bcf-4d24e67d7860
[2026-01-28 13:45:02] warn: [ownership] groom 73496 not found or not owned by user 9f528e97-0da5-48e1-9bcf-4d24e67d7860
[2026-01-28 13:45:02] info: [GET] /api/groom-performance/groom/73496 - 404
[2026-01-28 13:45:02] info: [POST] /api/groom-performance/record
[2026-01-28 13:45:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1926MB
[2026-01-28 13:45:02] info: [auth:yndtyu] Starting auth for POST /groom-performance/record
[2026-01-28 13:45:02] info: [auth:yndtyu] Token from cookie: false
[2026-01-28 13:45:02] info: [auth:yndtyu] Token from header: true
[2026-01-28 13:45:02] info: [auth:yndtyu] Authenticated user 9f528e97-0da5-48e1-9bcf-4d24e67d7860
[2026-01-28 13:45:02] info: [auth:gjavtq] Starting auth for POST /record
[2026-01-28 13:45:02] info: [auth:gjavtq] Token from cookie: false
[2026-01-28 13:45:02] info: [auth:gjavtq] Token from header: true
[2026-01-28 13:45:02] info: [auth:gjavtq] Authenticated user 9f528e97-0da5-48e1-9bcf-4d24e67d7860
[2026-01-28 13:45:02] warn: [Validation] Input validation failed
[2026-01-28 13:45:02] info: [POST] /api/groom-performance/record - 400
[2026-01-28 13:45:02] info: [POST] /api/groom-performance/record
[2026-01-28 13:45:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1918MB
[2026-01-28 13:45:03] info: [auth:oex7ub] Starting auth for POST /groom-performance/record
[2026-01-28 13:45:03] info: [auth:oex7ub] Token from cookie: false
[2026-01-28 13:45:03] info: [auth:oex7ub] Token from header: true
[2026-01-28 13:45:03] info: [auth:oex7ub] Authenticated user 9f528e97-0da5-48e1-9bcf-4d24e67d7860
[2026-01-28 13:45:03] info: [auth:bl6otq] Starting auth for POST /record
[2026-01-28 13:45:03] info: [auth:bl6otq] Token from cookie: false
[2026-01-28 13:45:03] info: [auth:bl6otq] Token from header: true
[2026-01-28 13:45:03] info: [auth:bl6otq] Authenticated user 9f528e97-0da5-48e1-9bcf-4d24e67d7860
[2026-01-28 13:45:03] warn: [Validation] Input validation failed
[2026-01-28 13:45:03] info: [POST] /api/groom-performance/record - 400
[2026-01-28 13:45:03] info: [POST] /api/groom-performance/record
[2026-01-28 13:45:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1925MB
[2026-01-28 13:45:03] info: [auth:qiyas] Starting auth for POST /groom-performance/record
[2026-01-28 13:45:03] info: [auth:qiyas] Token from cookie: false
[2026-01-28 13:45:03] info: [auth:qiyas] Token from header: true
[2026-01-28 13:45:03] info: [auth:qiyas] Authenticated user 9f528e97-0da5-48e1-9bcf-4d24e67d7860
[2026-01-28 13:45:03] info: [auth:ixemyx] Starting auth for POST /record
[2026-01-28 13:45:03] info: [auth:ixemyx] Token from cookie: false
[2026-01-28 13:45:03] info: [auth:ixemyx] Token from header: true
[2026-01-28 13:45:03] info: [auth:ixemyx] Authenticated user 9f528e97-0da5-48e1-9bcf-4d24e67d7860
[2026-01-28 13:45:03] warn: [Validation] Input validation failed
[2026-01-28 13:45:03] info: [POST] /api/groom-performance/record - 400
[2026-01-28 13:45:03] info: [POST] /api/groom-performance/record
[2026-01-28 13:45:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1922MB
[2026-01-28 13:45:03] info: [auth:ig04be] Starting auth for POST /groom-performance/record
[2026-01-28 13:45:03] info: [auth:ig04be] Token from cookie: false
[2026-01-28 13:45:03] warn: [auth:ig04be] Access token is required for POST /groom-performance/record from ::ffff:127.0.0.1
[2026-01-28 13:45:03] info: [POST] /api/groom-performance/record - 401
[2026-01-28 13:45:03] info: [GET] /api/groom-performance/groom/73495
[2026-01-28 13:45:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1921MB
[2026-01-28 13:45:03] info: [auth:igcypj] Starting auth for GET /groom-performance/groom/73495
[2026-01-28 13:45:03] info: [auth:igcypj] Token from cookie: false
[2026-01-28 13:45:03] warn: [auth:igcypj] Access token is required for GET /groom-performance/groom/73495 from ::ffff:127.0.0.1
[2026-01-28 13:45:03] info: [GET] /api/groom-performance/groom/73495 - 401
[2026-01-28 13:45:03] info: [GET] /api/groom-performance/top
[2026-01-28 13:45:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1921MB
[2026-01-28 13:45:03] info: [auth:uifaz] Starting auth for GET /groom-performance/top
[2026-01-28 13:45:03] info: [auth:uifaz] Token from cookie: false
[2026-01-28 13:45:03] warn: [auth:uifaz] Access token is required for GET /groom-performance/top from ::ffff:127.0.0.1
[2026-01-28 13:45:03] info: [GET] /api/groom-performance/top - 401
[2026-01-28 13:45:03] info: [GET] /api/groom-performance/config
[2026-01-28 13:45:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1922MB
[2026-01-28 13:45:03] info: [auth:0xrr5u] Starting auth for GET /groom-performance/config
[2026-01-28 13:45:03] info: [auth:0xrr5u] Token from cookie: false
[2026-01-28 13:45:03] warn: [auth:0xrr5u] Access token is required for GET /groom-performance/config from ::ffff:127.0.0.1
[2026-01-28 13:45:03] info: [GET] /api/groom-performance/config - 401
[2026-01-28 13:45:03] info: [GET] /api/groom-performance/analytics/73495
[2026-01-28 13:45:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1922MB
[2026-01-28 13:45:03] info: [auth:6at7lt] Starting auth for GET /groom-performance/analytics/73495
[2026-01-28 13:45:03] info: [auth:6at7lt] Token from cookie: false
[2026-01-28 13:45:03] warn: [auth:6at7lt] Access token is required for GET /groom-performance/analytics/73495 from ::ffff:127.0.0.1
[2026-01-28 13:45:03] info: [GET] /api/groom-performance/analytics/73495 - 401
PASS tests/integration/groomPerformanceSystem.test.mjs
  Groom Performance System
    Performance Recording
      √ should record groom performance successfully (13 ms)
      √ should update groom metrics after recording performance (20 ms)
    API Endpoints
      √ should record performance via API (80 ms)
      √ should get groom performance summary (52 ms)
      √ should get top performing grooms (38 ms)
      √ should get performance configuration (43 ms)
      √ should get groom analytics (47 ms)
      √ should validate groom ownership (53 ms)
      √ should validate input parameters (107 ms)
    Service Functions
      √ should calculate performance summary correctly (7 ms)
      √ should get top performing grooms correctly (3 ms)
    Authentication
      √ should require authentication for POST /api/groom-performance/record (23 ms)
      √ should require authentication for GET /api/groom-performance/groom/:groomId (23 ms)
      √ should require authentication for GET /api/groom-performance/top (22 ms)
      √ should require authentication for GET /api/groom-performance/config (23 ms)
      √ should require authentication for GET /api/groom-performance/analytics/:groomId (22 ms)

[2026-01-28 13:45:03] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:03] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:03] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:03] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:45:04] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:04] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:04] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:04] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:04] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:04] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:04] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:04] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:04] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:04] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:45:04] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 13:45:04] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:04] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:45:04] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:45:04] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:45:04] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:45:04] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:45:04] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 13:45:04] info: [GET] /api/flags/health
[2026-01-28 13:45:04] warn: [MemoryMonitoring] Memory threshold exceeded: 1976MB
[2026-01-28 13:45:04] info: [auth:bulw0l] Starting auth for GET /flags/health
[2026-01-28 13:45:04] info: [auth:bulw0l] Token from cookie: false
[2026-01-28 13:45:04] info: [auth:bulw0l] Token from header: true
[2026-01-28 13:45:04] info: [auth:bulw0l] Authenticated user test-user-epigenetic-1769625904443
[2026-01-28 13:45:04] info: [GET] /api/flags/health - 200
[2026-01-28 13:45:04] info: [POST] /api/flags/evaluate
[2026-01-28 13:45:04] warn: [MemoryMonitoring] Memory threshold exceeded: 1982MB
[2026-01-28 13:45:04] info: [auth:w6djc] Starting auth for POST /flags/evaluate
[2026-01-28 13:45:04] info: [auth:w6djc] Token from cookie: false
[2026-01-28 13:45:04] warn: [auth:w6djc] Access token is required for POST /flags/evaluate from ::ffff:127.0.0.1
[2026-01-28 13:45:04] info: [POST] /api/flags/evaluate - 401
[2026-01-28 13:45:04] info: [GET] /api/flags/horses/123/flags
[2026-01-28 13:45:04] warn: [MemoryMonitoring] Memory threshold exceeded: 1982MB
[2026-01-28 13:45:04] info: [auth:71s8m] Starting auth for GET /flags/horses/123/flags
[2026-01-28 13:45:04] info: [auth:71s8m] Token from cookie: false
[2026-01-28 13:45:04] warn: [auth:71s8m] Access token is required for GET /flags/horses/123/flags from ::ffff:127.0.0.1
[2026-01-28 13:45:04] info: [GET] /api/flags/horses/123/flags - 401
[2026-01-28 13:45:04] info: [GET] /api/flags/definitions
[2026-01-28 13:45:04] warn: [MemoryMonitoring] Memory threshold exceeded: 1983MB
[2026-01-28 13:45:04] info: [auth:36j9a] Starting auth for GET /flags/definitions
[2026-01-28 13:45:04] info: [auth:36j9a] Token from cookie: false
[2026-01-28 13:45:04] warn: [auth:36j9a] Access token is required for GET /flags/definitions from ::ffff:127.0.0.1
[2026-01-28 13:45:04] info: [GET] /api/flags/definitions - 401
[2026-01-28 13:45:04] info: [POST] /api/flags/batch-evaluate
[2026-01-28 13:45:04] warn: [MemoryMonitoring] Memory threshold exceeded: 1983MB
[2026-01-28 13:45:04] info: [auth:ivnquw] Starting auth for POST /flags/batch-evaluate
[2026-01-28 13:45:04] info: [auth:ivnquw] Token from cookie: false
[2026-01-28 13:45:04] warn: [auth:ivnquw] Access token is required for POST /flags/batch-evaluate from ::ffff:127.0.0.1
[2026-01-28 13:45:04] info: [POST] /api/flags/batch-evaluate - 401
[2026-01-28 13:45:04] info: [GET] /api/flags/horses/123/care-patterns
[2026-01-28 13:45:04] warn: [MemoryMonitoring] Memory threshold exceeded: 1983MB
[2026-01-28 13:45:04] info: [auth:engay] Starting auth for GET /flags/horses/123/care-patterns
[2026-01-28 13:45:04] info: [auth:engay] Token from cookie: false
[2026-01-28 13:45:04] warn: [auth:engay] Access token is required for GET /flags/horses/123/care-patterns from ::ffff:127.0.0.1
[2026-01-28 13:45:04] info: [GET] /api/flags/horses/123/care-patterns - 401
[2026-01-28 13:45:04] info: [POST] /api/flags/evaluate
[2026-01-28 13:45:04] warn: [MemoryMonitoring] Memory threshold exceeded: 1983MB
[2026-01-28 13:45:04] info: [auth:v3kqfr] Starting auth for POST /flags/evaluate
[2026-01-28 13:45:04] info: [auth:v3kqfr] Token from cookie: false
[2026-01-28 13:45:04] warn: [auth:v3kqfr] Access token is required for POST /flags/evaluate from ::ffff:127.0.0.1
[2026-01-28 13:45:04] info: [POST] /api/flags/evaluate - 401
[2026-01-28 13:45:04] info: [GET] /api/flags/horses/123/flags
[2026-01-28 13:45:04] warn: [MemoryMonitoring] Memory threshold exceeded: 1982MB
[2026-01-28 13:45:04] info: [auth:3f2844] Starting auth for GET /flags/horses/123/flags
[2026-01-28 13:45:04] info: [auth:3f2844] Token from cookie: false
[2026-01-28 13:45:04] warn: [auth:3f2844] Access token is required for GET /flags/horses/123/flags from ::ffff:127.0.0.1
[2026-01-28 13:45:04] info: [GET] /api/flags/horses/123/flags - 401
[2026-01-28 13:45:04] info: [GET] /api/flags/definitions
[2026-01-28 13:45:04] warn: [MemoryMonitoring] Memory threshold exceeded: 1981MB
[2026-01-28 13:45:04] info: [auth:3adeyx] Starting auth for GET /flags/definitions
[2026-01-28 13:45:04] info: [auth:3adeyx] Token from cookie: false
[2026-01-28 13:45:04] warn: [auth:3adeyx] Access token is required for GET /flags/definitions from ::ffff:127.0.0.1
[2026-01-28 13:45:04] info: [GET] /api/flags/definitions - 401
[2026-01-28 13:45:04] info: [POST] /api/flags/batch-evaluate
[2026-01-28 13:45:04] warn: [MemoryMonitoring] Memory threshold exceeded: 1979MB
[2026-01-28 13:45:04] info: [auth:277hl] Starting auth for POST /flags/batch-evaluate
[2026-01-28 13:45:04] info: [auth:277hl] Token from cookie: false
[2026-01-28 13:45:04] warn: [auth:277hl] Access token is required for POST /flags/batch-evaluate from ::ffff:127.0.0.1
[2026-01-28 13:45:04] info: [POST] /api/flags/batch-evaluate - 401
[2026-01-28 13:45:04] info: [GET] /api/flags/horses/123/care-patterns
[2026-01-28 13:45:04] warn: [MemoryMonitoring] Memory threshold exceeded: 1979MB
[2026-01-28 13:45:04] info: [auth:bd96y8] Starting auth for GET /flags/horses/123/care-patterns
[2026-01-28 13:45:04] info: [auth:bd96y8] Token from cookie: false
[2026-01-28 13:45:04] warn: [auth:bd96y8] Access token is required for GET /flags/horses/123/care-patterns from ::ffff:127.0.0.1
[2026-01-28 13:45:04] info: [GET] /api/flags/horses/123/care-patterns - 401
[2026-01-28 13:45:04] info: [GET] /api/flags/health
[2026-01-28 13:45:04] warn: [MemoryMonitoring] Memory threshold exceeded: 1977MB
[2026-01-28 13:45:04] info: [auth:mn3u2] Starting auth for GET /flags/health
[2026-01-28 13:45:04] info: [auth:mn3u2] Token from cookie: false
[2026-01-28 13:45:04] warn: [auth:mn3u2] Access token is required for GET /flags/health from ::ffff:127.0.0.1
[2026-01-28 13:45:04] info: [GET] /api/flags/health - 401
[2026-01-28 13:45:04] info: [GET] /api/flags/health
[2026-01-28 13:45:04] warn: [MemoryMonitoring] Memory threshold exceeded: 1979MB
[2026-01-28 13:45:04] info: [auth:2sw8hf] Starting auth for GET /flags/health
[2026-01-28 13:45:04] info: [auth:2sw8hf] Token from cookie: false
[2026-01-28 13:45:04] info: [auth:2sw8hf] Token from header: true
[2026-01-28 13:45:04] info: [auth:2sw8hf] Authenticated user test-user-epigenetic-1769625904858
[2026-01-28 13:45:04] info: [GET] /api/flags/health - 200
[2026-01-28 13:45:04] info: [GET] /api/flags/health
[2026-01-28 13:45:04] warn: [MemoryMonitoring] Memory threshold exceeded: 1981MB
[2026-01-28 13:45:04] info: [auth:10b1qk] Starting auth for GET /flags/health
[2026-01-28 13:45:04] info: [auth:10b1qk] Token from cookie: false
[2026-01-28 13:45:04] info: [auth:10b1qk] Token from header: true
[2026-01-28 13:45:04] info: [auth:10b1qk] Authenticated user test-user-epigenetic-1769625904888
[2026-01-28 13:45:04] info: [GET] /api/flags/health - 200
PASS tests/integration/epigeneticFlagRoutes.test.mjs
  Epigenetic Flag Routes Integration Tests
    Health Check
      √ should return system health status (109 ms)
    Authentication Requirements
      √ should require authentication for flag evaluation (38 ms)
      √ should require authentication for horse flags (31 ms)
      √ should require authentication for flag definitions (32 ms)
      √ should require authentication for batch evaluation (31 ms)
      √ should require authentication for care patterns (27 ms)
    Route Structure
      √ should have all required endpoints mounted (146 ms)
    System Integration
      √ should have epigenetic flag routes mounted in main app (30 ms)
      √ should handle CORS and security headers (29 ms)

[2026-01-28 13:45:05] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:05] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:05] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:05] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:45:05] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:05] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:05] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:05] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:05] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:05] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:05] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:05] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:05] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:05] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:45:06] info: [TokenRotation] Created new token pair
[2026-01-28 13:45:06] info: [EmailVerification] Created verification token
[2026-01-28 13:45:06] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:45:06] info: [authController.register] Verification email sent
[2026-01-28 13:45:06] info: [TokenRotation] Created new token pair
[2026-01-28 13:45:06] info: [EmailVerification] Created verification token
[2026-01-28 13:45:06] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:45:06] info: [authController.register] Verification email sent
[2026-01-28 13:45:06] info: [TokenRotation] Created new token pair
[2026-01-28 13:45:06] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
PASS tests/auth-simple.test.mjs
  🔐 INTEGRATION: Authentication Controller Simple - Core Auth Workflow Testing
    √ should register a new user (407 ms)
    √ should login with valid credentials (615 ms)

[2026-01-28 13:45:06] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:06] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:06] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:06] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:45:07] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:07] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:07] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:07] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:07] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:07] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:07] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:07] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:07] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:07] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:45:07] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 13:45:07] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:07] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:45:07] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:45:07] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:45:07] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:45:07] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:45:07] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 13:45:08] info: [ultraRareTriggerEngine] Evaluating ultra-rare triggers for horse 146916
[2026-01-28 13:45:08] info: [ultraRareTriggerEngine] Ultra-rare trait triggered: Empathic Mirror for horse 146916
[2026-01-28 13:45:08] info: [ultraRareTriggerEngine] Evaluating exotic unlocks for horse 146916
[2026-01-28 13:45:08] error: [ultraRareTriggerEngine] Error evaluating Soulbonded conditions: Cannot read properties of undefined (reading 'map')
[2026-01-28 13:45:08] info: [groomRareTraitPerks] Assigning rare trait booster perks for groom 73497
[2026-01-28 13:45:08] info: [groomRareTraitPerks] Assigned perk: Phoenix Whisperer to groom 73497
[2026-01-28 13:45:08] info: [groomRareTraitPerks] Perk revealed: Phoenix Whisperer for groom 73497
[2026-01-28 13:45:08] info: [GET] /api/ultra-rare-traits/definitions
[2026-01-28 13:45:08] warn: [MemoryMonitoring] Memory threshold exceeded: 2070MB
[2026-01-28 13:45:08] info: [auth:alpfzh] Starting auth for GET /ultra-rare-traits/definitions
[2026-01-28 13:45:08] info: [auth:alpfzh] Token from cookie: false
[2026-01-28 13:45:08] info: [auth:alpfzh] Token from header: true
[2026-01-28 13:45:08] info: [auth:alpfzh] Authenticated user test-ultra-rare-user
[2026-01-28 13:45:08] info: [GET] /api/ultra-rare-traits/definitions - 200
[2026-01-28 13:45:08] info: [POST] /api/ultra-rare-traits/evaluate/146916
[2026-01-28 13:45:08] warn: [MemoryMonitoring] Memory threshold exceeded: 2074MB
[2026-01-28 13:45:08] info: [auth:m6gpdi] Starting auth for POST /ultra-rare-traits/evaluate/146916
[2026-01-28 13:45:08] info: [auth:m6gpdi] Token from cookie: false
[2026-01-28 13:45:08] info: [auth:m6gpdi] Token from header: true
[2026-01-28 13:45:08] info: [auth:m6gpdi] Authenticated user test-ultra-rare-user
[2026-01-28 13:45:08] info: [auth:hov49l] Starting auth for POST /evaluate/146916
[2026-01-28 13:45:08] info: [auth:hov49l] Token from cookie: false
[2026-01-28 13:45:08] info: [auth:hov49l] Token from header: true
[2026-01-28 13:45:08] info: [auth:hov49l] Authenticated user test-ultra-rare-user
[2026-01-28 13:45:08] info: [ownership] Validated ownership: user test-ultra-rare-user owns horse 146916
[2026-01-28 13:45:08] info: [ultraRareTriggerEngine] Evaluating ultra-rare triggers for horse 146916
[2026-01-28 13:45:08] info: [ultraRareTriggerEngine] Ultra-rare trait triggered: Empathic Mirror for horse 146916
[2026-01-28 13:45:08] info: [ultraRareTriggerEngine] Evaluating exotic unlocks for horse 146916
[2026-01-28 13:45:08] error: [ultraRareTriggerEngine] Error evaluating Soulbonded conditions: Cannot read properties of undefined (reading 'map')
[2026-01-28 13:45:08] info: [POST] /api/ultra-rare-traits/evaluate/146916 - 200
[2026-01-28 13:45:08] info: [GET] /api/ultra-rare-traits/horse/146916
[2026-01-28 13:45:08] warn: [MemoryMonitoring] Memory threshold exceeded: 2073MB
[2026-01-28 13:45:08] info: [auth:7t2tk] Starting auth for GET /ultra-rare-traits/horse/146916
[2026-01-28 13:45:08] info: [auth:7t2tk] Token from cookie: false
[2026-01-28 13:45:08] info: [auth:7t2tk] Token from header: true
[2026-01-28 13:45:08] info: [auth:7t2tk] Authenticated user test-ultra-rare-user
[2026-01-28 13:45:08] info: [auth:3z8wrl] Starting auth for GET /horse/146916
[2026-01-28 13:45:08] info: [auth:3z8wrl] Token from cookie: false
[2026-01-28 13:45:08] info: [auth:3z8wrl] Token from header: true
[2026-01-28 13:45:08] info: [auth:3z8wrl] Authenticated user test-ultra-rare-user
[2026-01-28 13:45:08] info: [ownership] Validated ownership: user test-ultra-rare-user owns horse 146916
[2026-01-28 13:45:08] info: [GET] /api/ultra-rare-traits/horse/146916 - 200
[2026-01-28 13:45:08] info: [POST] /api/ultra-rare-traits/groom/73497/assign-perks
[2026-01-28 13:45:08] warn: [MemoryMonitoring] Memory threshold exceeded: 2066MB
[2026-01-28 13:45:08] info: [auth:kon4h] Starting auth for POST /ultra-rare-traits/groom/73497/assign-perks
[2026-01-28 13:45:08] info: [auth:kon4h] Token from cookie: false
[2026-01-28 13:45:08] info: [auth:kon4h] Token from header: true
[2026-01-28 13:45:08] info: [auth:kon4h] Authenticated user test-ultra-rare-user
[2026-01-28 13:45:08] info: [auth:dwzzjw] Starting auth for POST /groom/73497/assign-perks
[2026-01-28 13:45:08] info: [auth:dwzzjw] Token from cookie: false
[2026-01-28 13:45:08] info: [auth:dwzzjw] Token from header: true
[2026-01-28 13:45:08] info: [auth:dwzzjw] Authenticated user test-ultra-rare-user
[2026-01-28 13:45:08] info: [ownership] Validated ownership: user test-ultra-rare-user owns groom 73497
[2026-01-28 13:45:08] info: [groomRareTraitPerks] Assigning rare trait booster perks for groom 73497
[2026-01-28 13:45:08] info: [POST] /api/ultra-rare-traits/groom/73497/assign-perks - 200
[2026-01-28 13:45:08] info: [GET] /api/ultra-rare-traits/horse/146916
[2026-01-28 13:45:08] warn: [MemoryMonitoring] Memory threshold exceeded: 2075MB
[2026-01-28 13:45:08] info: [auth:6c4n0h] Starting auth for GET /ultra-rare-traits/horse/146916
[2026-01-28 13:45:08] info: [auth:6c4n0h] Token from cookie: false
[2026-01-28 13:45:08] warn: [auth:6c4n0h] Access token is required for GET /ultra-rare-traits/horse/146916 from ::ffff:127.0.0.1
[2026-01-28 13:45:08] info: [GET] /api/ultra-rare-traits/horse/146916 - 401
[2026-01-28 13:45:08] info: [GET] /api/ultra-rare-traits/horse/146917
[2026-01-28 13:45:08] warn: [MemoryMonitoring] Memory threshold exceeded: 2074MB
[2026-01-28 13:45:08] info: [auth:3pr67q] Starting auth for GET /ultra-rare-traits/horse/146917
[2026-01-28 13:45:08] info: [auth:3pr67q] Token from cookie: false
[2026-01-28 13:45:08] info: [auth:3pr67q] Token from header: true
[2026-01-28 13:45:08] info: [auth:3pr67q] Authenticated user test-ultra-rare-user
[2026-01-28 13:45:08] info: [auth:xmnlj] Starting auth for GET /horse/146917
[2026-01-28 13:45:08] info: [auth:xmnlj] Token from cookie: false
[2026-01-28 13:45:08] info: [auth:xmnlj] Token from header: true
[2026-01-28 13:45:08] info: [auth:xmnlj] Authenticated user test-ultra-rare-user
[2026-01-28 13:45:08] warn: [ownership] horse 146917 not found or not owned by user test-ultra-rare-user
[2026-01-28 13:45:08] info: [GET] /api/ultra-rare-traits/horse/146917 - 404
PASS tests/ultraRareTraits.test.mjs
  Ultra-Rare & Exotic Traits System
    Trait Definitions System
      √ should retrieve all ultra-rare trait definitions (3 ms)
      √ should retrieve all exotic trait definitions (2 ms)
      √ should get specific trait definition by name (1 ms)
    Trigger Evaluation Engine
      √ should evaluate ultra-rare trait triggers with proper conditions (16 ms)
      √ should evaluate exotic trait unlocks with complex conditions (8 ms)
    Groom Perk System
      √ should assign rare trait booster perks to eligible grooms (9 ms)
      √ should apply rare trait booster effects to probability calculations (3 ms)
    Mechanical Effects Integration
      √ should apply ultra-rare stress effects correctly (1 ms)
      √ should apply ultra-rare competition effects correctly (2 ms)
      √ should check ultra-rare abilities correctly (1 ms)
    API Endpoints
      √ GET /api/ultra-rare-traits/definitions should return all trait definitions (48 ms)
      √ POST /api/ultra-rare-traits/evaluate/:horseId should evaluate traits for owned horse (72 ms)
      √ GET /api/ultra-rare-traits/horse/:horseId should return horse ultra-rare traits (45 ms)
      √ POST /api/ultra-rare-traits/groom/:groomId/assign-perks should assign perks to owned groom (44 ms)
      √ should reject unauthorized access to horse traits (25 ms)
      √ should reject access to non-owned horse (55 ms)

[2026-01-28 13:45:08] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:08] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:08] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:08] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:45:09] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:09] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:09] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:09] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:09] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:09] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:09] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:09] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:09] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:09] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:45:09] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 13:45:09] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:09] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:45:09] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:45:09] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:45:09] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:45:09] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:45:09] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 13:45:09] info: [GET] /api/user/test-user-uuid-123/progress
[2026-01-28 13:45:09] warn: [MemoryMonitoring] Memory threshold exceeded: 2122MB
[2026-01-28 13:45:09] info: [auth:uy9ff] Starting auth for GET /user/test-user-uuid-123/progress
[2026-01-28 13:45:09] info: [auth:uy9ff] Token from cookie: false
[2026-01-28 13:45:09] info: [auth:uy9ff] Token from header: true
[2026-01-28 13:45:09] info: [auth:uy9ff] Authenticated user test-user-uuid-123
[2026-01-28 13:45:09] warn: 404 - Route not found: GET /api/user/test-user-uuid-123/progress from ::ffff:127.0.0.1
[2026-01-28 13:45:09] info: [GET] /api/user/test-user-uuid-123/progress - 404
[2026-01-28 13:45:09] info: [GET] /api/user/test-user-uuid-123/activity
[2026-01-28 13:45:09] warn: [MemoryMonitoring] Memory threshold exceeded: 2125MB
[2026-01-28 13:45:09] info: [auth:lkhgto] Starting auth for GET /user/test-user-uuid-123/activity
[2026-01-28 13:45:09] info: [auth:lkhgto] Token from cookie: false
[2026-01-28 13:45:09] info: [auth:lkhgto] Token from header: true
[2026-01-28 13:45:09] info: [auth:lkhgto] Authenticated user test-user-uuid-123
[2026-01-28 13:45:09] warn: 404 - Route not found: GET /api/user/test-user-uuid-123/activity from ::ffff:127.0.0.1
[2026-01-28 13:45:09] info: [GET] /api/user/test-user-uuid-123/activity - 404
[2026-01-28 13:45:09] info: [GET] /api/user/dashboard/test-user-uuid-123
[2026-01-28 13:45:09] warn: [MemoryMonitoring] Memory threshold exceeded: 2126MB
[2026-01-28 13:45:09] info: [auth:911yxq] Starting auth for GET /user/dashboard/test-user-uuid-123
[2026-01-28 13:45:09] info: [auth:911yxq] Token from cookie: false
[2026-01-28 13:45:09] info: [auth:911yxq] Token from header: true
[2026-01-28 13:45:09] info: [auth:911yxq] Authenticated user test-user-uuid-123
[2026-01-28 13:45:09] warn: 404 - Route not found: GET /api/user/dashboard/test-user-uuid-123 from ::ffff:127.0.0.1
[2026-01-28 13:45:09] info: [GET] /api/user/dashboard/test-user-uuid-123 - 404
[2026-01-28 13:45:09] info: [GET] /api/user/test-user-uuid-123
[2026-01-28 13:45:09] warn: [MemoryMonitoring] Memory threshold exceeded: 2127MB
[2026-01-28 13:45:09] info: [auth:89tf7q] Starting auth for GET /user/test-user-uuid-123
[2026-01-28 13:45:09] info: [auth:89tf7q] Token from cookie: false
[2026-01-28 13:45:09] info: [auth:89tf7q] Token from header: true
[2026-01-28 13:45:09] info: [auth:89tf7q] Authenticated user test-user-uuid-123
[2026-01-28 13:45:09] warn: 404 - Route not found: GET /api/user/test-user-uuid-123 from ::ffff:127.0.0.1
[2026-01-28 13:45:09] info: [GET] /api/user/test-user-uuid-123 - 404
[2026-01-28 13:45:09] info: [PUT] /api/user/test-user-uuid-123
[2026-01-28 13:45:09] warn: [MemoryMonitoring] Memory threshold exceeded: 2129MB
[2026-01-28 13:45:09] info: [auth:7bze6c] Starting auth for PUT /user/test-user-uuid-123
[2026-01-28 13:45:09] info: [auth:7bze6c] Token from cookie: false
[2026-01-28 13:45:09] info: [auth:7bze6c] Token from header: true
[2026-01-28 13:45:09] info: [auth:7bze6c] Authenticated user test-user-uuid-123
[2026-01-28 13:45:09] info: [PUT] /api/user/test-user-uuid-123 - 403
[2026-01-28 13:45:09] info: [POST] /api/user/test-user-uuid-123/add-xp
[2026-01-28 13:45:09] warn: [MemoryMonitoring] Memory threshold exceeded: 2131MB
[2026-01-28 13:45:09] info: [auth:xhlafo] Starting auth for POST /user/test-user-uuid-123/add-xp
[2026-01-28 13:45:09] info: [auth:xhlafo] Token from cookie: false
[2026-01-28 13:45:09] info: [auth:xhlafo] Token from header: true
[2026-01-28 13:45:09] info: [auth:xhlafo] Authenticated user test-user-uuid-123
[2026-01-28 13:45:09] info: [POST] /api/user/test-user-uuid-123/add-xp - 403
[2026-01-28 13:45:09] info: [DELETE] /api/user/test-user-uuid-123
[2026-01-28 13:45:09] warn: [MemoryMonitoring] Memory threshold exceeded: 2132MB
[2026-01-28 13:45:09] info: [auth:m631zj] Starting auth for DELETE /user/test-user-uuid-123
[2026-01-28 13:45:09] info: [auth:m631zj] Token from cookie: false
[2026-01-28 13:45:09] info: [auth:m631zj] Token from header: true
[2026-01-28 13:45:09] info: [auth:m631zj] Authenticated user test-user-uuid-123
[2026-01-28 13:45:09] info: [DELETE] /api/user/test-user-uuid-123 - 403
[2026-01-28 13:45:09] info: [GET] /api/user/test-user-uuid-123/progress
[2026-01-28 13:45:09] warn: [MemoryMonitoring] Memory threshold exceeded: 2133MB
[2026-01-28 13:45:09] info: [auth:jgvso] Starting auth for GET /user/test-user-uuid-123/progress
[2026-01-28 13:45:09] info: [auth:jgvso] Token from cookie: false
[2026-01-28 13:45:10] info: [auth:jgvso] Token from header: true
[2026-01-28 13:45:10] info: [auth:jgvso] Authenticated user test-user-uuid-123
[2026-01-28 13:45:10] warn: 404 - Route not found: GET /api/user/test-user-uuid-123/progress from ::ffff:127.0.0.1
[2026-01-28 13:45:10] info: [GET] /api/user/test-user-uuid-123/progress - 404
[2026-01-28 13:45:10] info: [PUT] /api/user/test-user-uuid-123
[2026-01-28 13:45:10] warn: [MemoryMonitoring] Memory threshold exceeded: 2135MB
[2026-01-28 13:45:10] info: [auth:wcbme] Starting auth for PUT /user/test-user-uuid-123
[2026-01-28 13:45:10] info: [auth:wcbme] Token from cookie: false
[2026-01-28 13:45:10] info: [auth:wcbme] Token from header: true
[2026-01-28 13:45:10] info: [auth:wcbme] Authenticated user test-user-uuid-123
[2026-01-28 13:45:10] info: [PUT] /api/user/test-user-uuid-123 - 403
[2026-01-28 13:45:10] info: [GET] /api/user/other-user-uuid-456/progress
[2026-01-28 13:45:10] warn: [MemoryMonitoring] Memory threshold exceeded: 2124MB
[2026-01-28 13:45:10] info: [auth:9i4nm] Starting auth for GET /user/other-user-uuid-456/progress
[2026-01-28 13:45:10] info: [auth:9i4nm] Token from cookie: false
[2026-01-28 13:45:10] info: [auth:9i4nm] Token from header: true
[2026-01-28 13:45:10] info: [auth:9i4nm] Authenticated user test-user-uuid-123
[2026-01-28 13:45:10] warn: 404 - Route not found: GET /api/user/other-user-uuid-456/progress from ::ffff:127.0.0.1
[2026-01-28 13:45:10] info: [GET] /api/user/other-user-uuid-456/progress - 404
[2026-01-28 13:45:10] info: [GET] /api/user/test-user-uuid-123/progress
[2026-01-28 13:45:10] warn: [MemoryMonitoring] Memory threshold exceeded: 2125MB
[2026-01-28 13:45:10] info: [auth:xicibs] Starting auth for GET /user/test-user-uuid-123/progress
[2026-01-28 13:45:10] info: [auth:xicibs] Token from cookie: false
[2026-01-28 13:45:10] warn: [auth:xicibs] Access token is required for GET /user/test-user-uuid-123/progress from ::ffff:127.0.0.1
[2026-01-28 13:45:10] info: [GET] /api/user/test-user-uuid-123/progress - 401
[2026-01-28 13:45:10] info: [GET] /api/user/test-user-uuid-123/progress
[2026-01-28 13:45:10] warn: [MemoryMonitoring] Memory threshold exceeded: 2124MB
[2026-01-28 13:45:10] info: [auth:wwxp8] Starting auth for GET /user/test-user-uuid-123/progress
[2026-01-28 13:45:10] info: [auth:wwxp8] Token from cookie: false
[2026-01-28 13:45:10] info: [auth:wwxp8] Token from header: true
[2026-01-28 13:45:10] info: [auth:wwxp8] Authenticated user test-user-uuid-123
[2026-01-28 13:45:10] warn: 404 - Route not found: GET /api/user/test-user-uuid-123/progress from ::ffff:127.0.0.1
[2026-01-28 13:45:10] info: [GET] /api/user/test-user-uuid-123/progress - 404
[2026-01-28 13:45:10] info: [GET] /api/user/test-user-uuid-123/activity
[2026-01-28 13:45:10] warn: [MemoryMonitoring] Memory threshold exceeded: 2127MB
[2026-01-28 13:45:10] info: [auth:o5ioct] Starting auth for GET /user/test-user-uuid-123/activity
[2026-01-28 13:45:10] info: [auth:o5ioct] Token from cookie: false
[2026-01-28 13:45:10] info: [auth:o5ioct] Token from header: true
[2026-01-28 13:45:10] info: [auth:o5ioct] Authenticated user test-user-uuid-123
[2026-01-28 13:45:10] warn: 404 - Route not found: GET /api/user/test-user-uuid-123/activity from ::ffff:127.0.0.1
[2026-01-28 13:45:10] info: [GET] /api/user/test-user-uuid-123/activity - 404
[2026-01-28 13:45:10] info: [GET] /api/user/test-user-uuid-123/activity
[2026-01-28 13:45:10] warn: [MemoryMonitoring] Memory threshold exceeded: 2128MB
[2026-01-28 13:45:10] info: [auth:5kr64b] Starting auth for GET /user/test-user-uuid-123/activity
[2026-01-28 13:45:10] info: [auth:5kr64b] Token from cookie: false
[2026-01-28 13:45:10] info: [auth:5kr64b] Token from header: true
[2026-01-28 13:45:10] info: [auth:5kr64b] Authenticated user test-user-uuid-123
[2026-01-28 13:45:10] warn: 404 - Route not found: GET /api/user/test-user-uuid-123/activity from ::ffff:127.0.0.1
[2026-01-28 13:45:10] info: [GET] /api/user/test-user-uuid-123/activity - 404
PASS __tests__/integration/user-rate-limiting.test.mjs
  User Routes Rate Limiting Integration Tests
    Query Rate Limiting (GET endpoints)
      √ should apply queryRateLimiter to GET /api/user/:id/progress (48 ms)
      √ should apply queryRateLimiter to GET /api/user/:id/activity (28 ms)
      √ should apply queryRateLimiter to GET /api/user/dashboard/:userId (29 ms)
      √ should apply queryRateLimiter to GET /api/user/:id (29 ms)
    Mutation Rate Limiting (PUT/POST/DELETE endpoints)
      √ should apply mutationRateLimiter to PUT /api/user/:id (36 ms)
      √ should apply mutationRateLimiter to POST /api/user/:id/add-xp (27 ms)
      √ should apply mutationRateLimiter to DELETE /api/user/:id (27 ms)
    Rate Limit Enforcement
      √ should enforce different limits for query vs mutation operations (55 ms)
    Security Integration
      √ should enforce ownership validation before rate limiting (26 ms)
      √ should require authentication for all user endpoints (23 ms)
    Rate Limit Headers
      √ should include all standard rate limit headers (29 ms)
      √ should decrement remaining count with each request (52 ms)

[2026-01-28 13:45:10] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:10] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:10] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:10] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 210
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 5.7%, adjustment: 11.9
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 222 (base: 210, trait: +0, luck: 11.9)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 210
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 4.1%, adjustment: 8.5
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 219 (base: 210, trait: +0, luck: 8.5)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 210
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 6.3%, adjustment: 13.2
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 223 (base: 210, trait: +0, luck: 13.2)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 210
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -7.7
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 202 (base: 210, trait: +0, luck: -7.7)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 5.5
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 305 (base: 300, trait: +0, luck: 5.5)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 6.3%, adjustment: 18.9
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 319 (base: 300, trait: +0, luck: 18.9)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 2.7%, adjustment: 8.1
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 308 (base: 300, trait: +0, luck: 8.1)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.9%, adjustment: 11.7
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 312 (base: 300, trait: +0, luck: 11.7)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 4.9%, adjustment: 14.8
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 315 (base: 300, trait: +0, luck: 14.8)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -2.9%, adjustment: -8.6
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 291 (base: 300, trait: +0, luck: -8.6)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -6.4%, adjustment: -19.1
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 281 (base: 300, trait: +0, luck: -19.1)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 2.9%, adjustment: 8.6
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 309 (base: 300, trait: +0, luck: 8.6)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -2.9%, adjustment: -8.7
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 291 (base: 300, trait: +0, luck: -8.7)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.7%, adjustment: -5.0
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 295 (base: 300, trait: +0, luck: -5.0)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 4.0%, adjustment: 12.0
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 312 (base: 300, trait: +0, luck: 12.0)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 6.3%, adjustment: 18.8
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 319 (base: 300, trait: +0, luck: 18.8)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 4.6%, adjustment: 13.8
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 314 (base: 300, trait: +0, luck: 13.8)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.3%, adjustment: -4.0
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 296 (base: 300, trait: +0, luck: -4.0)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -7.8%, adjustment: -23.5
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 276 (base: 300, trait: +0, luck: -23.5)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.1%, adjustment: 3.3
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 303 (base: 300, trait: +0, luck: 3.3)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -10.8
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 289 (base: 300, trait: +0, luck: -10.8)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -4.6%, adjustment: -13.9
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 286 (base: 300, trait: +0, luck: -13.9)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.5%, adjustment: -4.5
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 295 (base: 300, trait: +0, luck: -4.5)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 7.9%, adjustment: 23.7
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 324 (base: 300, trait: +0, luck: 23.7)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 7.8%, adjustment: 23.4
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 323 (base: 300, trait: +0, luck: 23.4)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.7%, adjustment: -5.0
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 295 (base: 300, trait: +0, luck: -5.0)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -6.8%, adjustment: -20.3
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 280 (base: 300, trait: +0, luck: -20.3)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -7.1%, adjustment: -21.2
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 279 (base: 300, trait: +0, luck: -21.2)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 5.9%, adjustment: 17.7
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 318 (base: 300, trait: +0, luck: 17.7)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -5.5%, adjustment: -16.4
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 284 (base: 300, trait: +0, luck: -16.4)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -4.0%, adjustment: -11.9
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 288 (base: 300, trait: +0, luck: -11.9)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -9.0%, adjustment: -26.9
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 273 (base: 300, trait: +0, luck: -26.9)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -2.4%, adjustment: -7.2
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 293 (base: 300, trait: +0, luck: -7.2)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.7%, adjustment: 5.0
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 305 (base: 300, trait: +0, luck: 5.0)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 4.2%, adjustment: 12.7
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 313 (base: 300, trait: +0, luck: 12.7)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -4.6%, adjustment: -13.7
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 286 (base: 300, trait: +0, luck: -13.7)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 7.7%, adjustment: 23.1
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 323 (base: 300, trait: +0, luck: 23.1)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -5.6%, adjustment: -16.9
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 283 (base: 300, trait: +0, luck: -16.9)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -8.1%, adjustment: -24.2
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 276 (base: 300, trait: +0, luck: -24.2)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 7.4%, adjustment: 22.2
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 322 (base: 300, trait: +0, luck: 22.2)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -4.0%, adjustment: -12.1
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 288 (base: 300, trait: +0, luck: -12.1)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 4.1%, adjustment: 12.3
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 312 (base: 300, trait: +0, luck: 12.3)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.6%, adjustment: -4.7
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 295 (base: 300, trait: +0, luck: -4.7)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 5.9%, adjustment: 17.8
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 318 (base: 300, trait: +0, luck: 17.8)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.4%, adjustment: 10.3
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 310 (base: 300, trait: +0, luck: 10.3)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 8.7%, adjustment: 26.1
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 326 (base: 300, trait: +0, luck: 26.1)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -5.0%, adjustment: -15.1
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 285 (base: 300, trait: +0, luck: -15.1)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -6.5%, adjustment: -19.5
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 280 (base: 300, trait: +0, luck: -19.5)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 5.0%, adjustment: 15.0
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 315 (base: 300, trait: +0, luck: 15.0)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -7.3%, adjustment: -21.8
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 278 (base: 300, trait: +0, luck: -21.8)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 2.9%, adjustment: 8.6
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 309 (base: 300, trait: +0, luck: 8.6)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.5%, adjustment: 10.4
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 310 (base: 300, trait: +0, luck: 10.4)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -6.9%, adjustment: -20.6
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 279 (base: 300, trait: +0, luck: -20.6)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.9%, adjustment: 11.6
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 312 (base: 300, trait: +0, luck: 11.6)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 80
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 4.2%, adjustment: 3.4
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 83 (base: 80, trait: +0, luck: 3.4)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 2.0%, adjustment: 2.6
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 133 (base: 130, trait: +0, luck: 2.6)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -0.1%, adjustment: -0.2
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 130 (base: 130, trait: +0, luck: -0.2)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 2.4%, adjustment: 3.1
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 133 (base: 130, trait: +0, luck: 3.1)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -4.7%, adjustment: -6.2
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 124 (base: 130, trait: +0, luck: -6.2)
[2026-01-28 13:45:10] error: [calculateCompetitionScore] Error calculating score for horse undefined: Horse object is required
[2026-01-28 13:45:10] error: [calculateCompetitionScore] Error calculating score for horse undefined: Horse object is required
[2026-01-28 13:45:10] error: [calculateCompetitionScore] Error calculating score for horse undefined: Horse object is required
[2026-01-28 13:45:10] error: [calculateCompetitionScore] Error calculating score for horse Test Horse: Event type is required and must be a string
[2026-01-28 13:45:10] error: [calculateCompetitionScore] Error calculating score for horse Test Horse: Event type is required and must be a string
[2026-01-28 13:45:10] error: [calculateCompetitionScore] Error calculating score for horse Test Horse: Event type is required and must be a string
[2026-01-28 13:45:10] warn: [calculateCompetitionScore] Unknown event type: Unknown Event, using default calculation
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Unknown Event: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -8.6%, adjustment: -15.5
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 164 (base: 180, trait: +0, luck: -15.5)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -0.8%, adjustment: -1.5
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 179 (base: 180, trait: +0, luck: -1.5)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 13:45:10] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -9.0%, adjustment: -27.0
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 273 (base: 300, trait: +0, luck: -27.0)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 9.0%, adjustment: 27.0
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 327 (base: 300, trait: +0, luck: 27.0)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 13:45:11] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
PASS tests/competitionScore.test.mjs
  🏆 UNIT: Competition Score Calculation - Scoring Algorithm Validation
    calculateCompetitionScore
      √ should calculate correct base score for Racing discipline (11 ms)
      √ should calculate correct base score for Show Jumping discipline (3 ms)
      √ should calculate correct base score for Dressage discipline (3 ms)
      √ should calculate correct base score for Cross Country discipline (3 ms)
      √ should apply +5 trait bonus for matching discipline affinity (11 ms)
      √ should NOT apply trait bonus for non-matching discipline (3 ms)
      √ should apply ±9% random luck modifier (135 ms)
      √ should handle missing stats by defaulting to 0 (3 ms)
      √ should handle missing epigeneticModifiers gracefully (9 ms)
      √ should handle null epigeneticModifiers.positive gracefully (5 ms)
      √ should throw error for invalid horse input (8 ms)
      √ should throw error for invalid event type (3 ms)
      √ should handle unknown event types with default calculation (6 ms)
      √ should return rounded integer scores (3 ms)
    Trait Match Logic - 20 Competition Simulation Tests
      √ should demonstrate trait advantage in Show Jumping competitions (discipline_affinity_show_jumping) (123 ms)
      √ should demonstrate trait advantage in Racing competitions (discipline_affinity_racing) (126 ms)
      √ should demonstrate trait advantage in Dressage competitions (discipline_affinity_dressage) (129 ms)
      √ should demonstrate trait advantage in Cross Country competitions (discipline_affinity_cross_country) (122 ms)
      √ should show no advantage when trait does not match discipline (102 ms)
      √ should handle horse missing epigeneticModifiers without throwing error (166 ms)
    Deterministic Tests with Controlled Randomness
      √ should apply exact +5 bonus with controlled randomness (7 ms)
      √ should handle minimum luck modifier (0) (3 ms)
      √ should handle maximum luck modifier (1) (6 ms)
      √ should demonstrate consistent trait advantage with controlled randomness (61 ms)
      √ should verify trait bonus is applied correctly across all disciplines (26 ms)
      √ should verify no bonus when trait does not match discipline (6 ms)
    getDisciplineStatWeights
      √ should return correct weights for Racing (1 ms)
      √ should return correct weights for Show Jumping (1 ms)
      √ should return default weights for unknown discipline
    validateHorseForCompetition
      √ should return true for valid horse with required stats (1 ms)
      √ should return false for invalid horse input (1 ms)
      √ should return true if horse has at least one required stat
      √ should return false if horse has no valid stats

[2026-01-28 13:45:11] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:11] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:11] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:11] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:45:12] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:12] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:12] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:12] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:12] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:12] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:12] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:12] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:12] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:12] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:45:12] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 13:45:12] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:12] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:45:12] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:45:12] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:45:12] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:45:12] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:45:12] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 13:45:12] info: [GET] /api/admin/cron/status
[2026-01-28 13:45:12] warn: [MemoryMonitoring] Memory threshold exceeded: 2210MB
[2026-01-28 13:45:12] info: [auth:0puu1s] Starting auth for GET /cron/status
[2026-01-28 13:45:12] info: [auth:0puu1s] Token from cookie: false
[2026-01-28 13:45:12] info: [auth:0puu1s] Token from header: true
[2026-01-28 13:45:12] info: [auth:0puu1s] Authenticated user admin-user-uuid-456
[2026-01-28 13:45:12] info: [auth] Authorized user admin-user-uuid-456 with role 'admin' for GET /cron/status
[2026-01-28 13:45:12] info: [adminRoutes] GET /api/admin/cron/status
[2026-01-28 13:45:12] info: [GET] /api/admin/cron/status - 200
[2026-01-28 13:45:12] info: [POST] /api/admin/traits/evaluate
[2026-01-28 13:45:12] warn: [MemoryMonitoring] Memory threshold exceeded: 2217MB
[2026-01-28 13:45:12] info: [auth:u0ri8] Starting auth for POST /traits/evaluate
[2026-01-28 13:45:12] info: [auth:u0ri8] Token from cookie: false
[2026-01-28 13:45:12] info: [auth:u0ri8] Token from header: true
[2026-01-28 13:45:12] info: [auth:u0ri8] Authenticated user admin-user-uuid-456
[2026-01-28 13:45:12] info: [auth] Authorized user admin-user-uuid-456 with role 'admin' for POST /traits/evaluate
[2026-01-28 13:45:12] info: [adminRoutes] POST /api/admin/traits/evaluate - Manual trait evaluation triggered
[2026-01-28 13:45:12] info: [POST] /api/admin/traits/evaluate - 200
[2026-01-28 13:45:12] info: [GET] /api/admin/foals/development
[2026-01-28 13:45:12] warn: [MemoryMonitoring] Memory threshold exceeded: 2208MB
[2026-01-28 13:45:12] info: [auth:pcd9bs] Starting auth for GET /foals/development
[2026-01-28 13:45:12] info: [auth:pcd9bs] Token from cookie: false
[2026-01-28 13:45:12] info: [auth:pcd9bs] Token from header: true
[2026-01-28 13:45:12] info: [auth:pcd9bs] Authenticated user admin-user-uuid-456
[2026-01-28 13:45:12] info: [auth] Authorized user admin-user-uuid-456 with role 'admin' for GET /foals/development
[2026-01-28 13:45:12] info: [adminRoutes] GET /api/admin/foals/development
[2026-01-28 13:45:12] info: [GET] /api/admin/foals/development - 200
[2026-01-28 13:45:12] info: [GET] /api/admin/traits/definitions
[2026-01-28 13:45:12] warn: [MemoryMonitoring] Memory threshold exceeded: 2211MB
[2026-01-28 13:45:12] info: [auth:eajjbe] Starting auth for GET /traits/definitions
[2026-01-28 13:45:12] info: [auth:eajjbe] Token from cookie: false
[2026-01-28 13:45:12] info: [auth:eajjbe] Token from header: true
[2026-01-28 13:45:12] info: [auth:eajjbe] Authenticated user admin-user-uuid-456
[2026-01-28 13:45:12] info: [auth] Authorized user admin-user-uuid-456 with role 'admin' for GET /traits/definitions
[2026-01-28 13:45:12] info: [adminRoutes] GET /api/admin/traits/definitions
[2026-01-28 13:45:12] info: [GET] /api/admin/traits/definitions - 200
[2026-01-28 13:45:12] info: [POST] /api/admin/cron/start
[2026-01-28 13:45:12] warn: [MemoryMonitoring] Memory threshold exceeded: 2208MB
[2026-01-28 13:45:12] info: [auth:xego78] Starting auth for POST /cron/start
[2026-01-28 13:45:12] info: [auth:xego78] Token from cookie: false
[2026-01-28 13:45:12] info: [auth:xego78] Token from header: true
[2026-01-28 13:45:12] info: [auth:xego78] Authenticated user admin-user-uuid-456
[2026-01-28 13:45:12] info: [auth] Authorized user admin-user-uuid-456 with role 'admin' for POST /cron/start
[2026-01-28 13:45:12] info: [adminRoutes] POST /api/admin/cron/start
[2026-01-28 13:45:12] info: [POST] /api/admin/cron/start - 200
[2026-01-28 13:45:12] info: [POST] /api/admin/cron/stop
[2026-01-28 13:45:12] warn: [MemoryMonitoring] Memory threshold exceeded: 2212MB
[2026-01-28 13:45:12] info: [auth:seegk] Starting auth for POST /cron/stop
[2026-01-28 13:45:12] info: [auth:seegk] Token from cookie: false
[2026-01-28 13:45:12] info: [auth:seegk] Token from header: true
[2026-01-28 13:45:12] info: [auth:seegk] Authenticated user admin-user-uuid-456
[2026-01-28 13:45:12] info: [auth] Authorized user admin-user-uuid-456 with role 'admin' for POST /cron/stop
[2026-01-28 13:45:12] info: [adminRoutes] POST /api/admin/cron/stop
[2026-01-28 13:45:12] info: [POST] /api/admin/cron/stop - 200
PASS tests/cronJobsIntegration.test.mjs
  ⏰ INTEGRATION: Cron Jobs System - Automated Trait Evaluation & Admin API
    Daily Trait Evaluation
      √ should evaluate traits for foals with good bonding and low stress (3 ms)
      √ should evaluate traits for foals with poor bonding and high stress (1 ms)
      √ should not evaluate foals that have completed development (2 ms)
      √ should handle foals without development records (1 ms)
      √ should not reveal duplicate traits (7 ms)
      √ should handle multiple foals in single evaluation (1 ms)
    Admin API Endpoints
      √ should get cron job status (48 ms)
      √ should manually trigger trait evaluation (31 ms)
      √ should get foals in development (32 ms)
      √ should get trait definitions (41 ms)
      √ should start and stop cron job service (63 ms)
    Error Handling
      √ should handle database errors gracefully (1 ms)
      √ should handle missing epigeneticModifiers field (1 ms)

[2026-01-28 13:45:13] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:13] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:13] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:13] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:14] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:14] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:14] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:14] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:14] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:14] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:14] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:14] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:14] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:14] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:14] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:14] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:14] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:14] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:14] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:14] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:14] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:14] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:14] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:14] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:14] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:14] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:14] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:14] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:14] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:14] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:14] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:14] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:14] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:14] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:14] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:14] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:14] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:14] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:14] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:14] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:14] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:14] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:14] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:14] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:14] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:14] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:14] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:14] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:14] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:14] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:14] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:14] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:14] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:14] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:14] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:14] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:14] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:14] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:14] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:14] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:14] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:14] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:14] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:14] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:14] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:14] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:14] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:14] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:14] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:14] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:14] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:14] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:14] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:14] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:14] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:14] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:14] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:14] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:14] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:14] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:14] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:14] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:14] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:14] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:14] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:14] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:14] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:14] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:14] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:14] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:14] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:14] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:14] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:14] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:14] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:14] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:14] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:14] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:45:14] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
PASS tests/competition.test.mjs
  🏆 UNIT: Competition Trait Match Fairness - Statistical Validation
    √ should demonstrate trait match fairness for Show Jumping competition (174 ms)
    √ should demonstrate trait match fairness for Racing competition (157 ms)
    √ should demonstrate trait match fairness for Dressage competition (156 ms)
    √ should demonstrate trait match fairness for Cross Country competition (155 ms)
    √ should verify trait advantage is consistent across multiple test runs (282 ms)

[2026-01-28 13:45:14] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:14] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:14] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:14] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:45:14] info: [auth:kkoda6] Starting auth for GET /health
[2026-01-28 13:45:14] info: [auth:kkoda6] Token from cookie: false
[2026-01-28 13:45:14] info: [auth:kkoda6] Token from header: true
[2026-01-28 13:45:14] info: [auth:kkoda6] Authenticated user 9b709cdd-413a-4acd-a720-33263d474e31
[2026-01-28 13:45:14] info: [DocumentationRoutes] Getting documentation health status
[2026-01-28 13:45:14] info: [ApiDocService] OpenAPI specification validation passed
[2026-01-28 13:45:14] info: [auth:htamcw] Starting auth for GET /health
[2026-01-28 13:45:14] info: [auth:htamcw] Token from cookie: false
[2026-01-28 13:45:14] warn: [auth:htamcw] Access token is required for GET /health from ::ffff:127.0.0.1
[2026-01-28 13:45:14] info: [auth:eqvse9] Starting auth for GET /metrics
[2026-01-28 13:45:14] info: [auth:eqvse9] Token from cookie: false
[2026-01-28 13:45:14] info: [auth:eqvse9] Token from header: true
[2026-01-28 13:45:14] info: [auth:eqvse9] Authenticated user 9b709cdd-413a-4acd-a720-33263d474e31
[2026-01-28 13:45:14] info: [DocumentationRoutes] Getting documentation metrics
[2026-01-28 13:45:14] info: [auth:nqs8ju] Starting auth for GET /metrics
[2026-01-28 13:45:14] info: [auth:nqs8ju] Token from cookie: false
[2026-01-28 13:45:14] info: [auth:nqs8ju] Token from header: true
[2026-01-28 13:45:14] info: [auth:nqs8ju] Authenticated user 9b709cdd-413a-4acd-a720-33263d474e31
[2026-01-28 13:45:14] info: [DocumentationRoutes] Getting documentation metrics
[2026-01-28 13:45:14] info: [auth:0kt15m] Starting auth for GET /validation
[2026-01-28 13:45:14] info: [auth:0kt15m] Token from cookie: false
[2026-01-28 13:45:14] info: [auth:0kt15m] Token from header: true
[2026-01-28 13:45:14] info: [auth:0kt15m] Authenticated user 9b709cdd-413a-4acd-a720-33263d474e31
[2026-01-28 13:45:14] info: [DocumentationRoutes] Validating OpenAPI specification
[2026-01-28 13:45:14] info: [ApiDocService] OpenAPI specification validation passed
[2026-01-28 13:45:14] info: [auth:dsygqk] Starting auth for POST /generate
[2026-01-28 13:45:14] info: [auth:dsygqk] Token from cookie: false
[2026-01-28 13:45:14] info: [auth:dsygqk] Token from header: true
[2026-01-28 13:45:14] info: [auth:dsygqk] Authenticated user 9b709cdd-413a-4acd-a720-33263d474e31
[2026-01-28 13:45:14] info: [DocumentationRoutes] Generating API documentation
[2026-01-28 13:45:14] info: [ApiDocService] OpenAPI specification saved successfully
[2026-01-28 13:45:14] info: [ApiDocService] Documentation generated for 1 endpoints
[2026-01-28 13:45:14] info: [auth:4e03gm] Starting auth for POST /endpoints
[2026-01-28 13:45:14] info: [auth:4e03gm] Token from cookie: false
[2026-01-28 13:45:14] info: [auth:4e03gm] Token from header: true
[2026-01-28 13:45:14] info: [auth:4e03gm] Authenticated user 9b709cdd-413a-4acd-a720-33263d474e31
[2026-01-28 13:45:14] info: [DocumentationRoutes] Registering endpoint: POST /api/horses
[2026-01-28 13:45:14] info: [auth:6j05dv] Starting auth for POST /endpoints
[2026-01-28 13:45:14] info: [auth:6j05dv] Token from cookie: false
[2026-01-28 13:45:14] info: [auth:6j05dv] Token from header: true
[2026-01-28 13:45:14] info: [auth:6j05dv] Authenticated user 9b709cdd-413a-4acd-a720-33263d474e31
[2026-01-28 13:45:14] info: [auth:4w13t] Starting auth for POST /endpoints
[2026-01-28 13:45:14] info: [auth:4w13t] Token from cookie: false
[2026-01-28 13:45:14] info: [auth:4w13t] Token from header: true
[2026-01-28 13:45:14] info: [auth:4w13t] Authenticated user 9b709cdd-413a-4acd-a720-33263d474e31
[2026-01-28 13:45:14] info: [DocumentationRoutes] Registering endpoint: GET /api/test-get
[2026-01-28 13:45:14] info: [auth:4vkbdo] Starting auth for POST /endpoints
[2026-01-28 13:45:14] info: [auth:4vkbdo] Token from cookie: false
[2026-01-28 13:45:14] info: [auth:4vkbdo] Token from header: true
[2026-01-28 13:45:14] info: [auth:4vkbdo] Authenticated user 9b709cdd-413a-4acd-a720-33263d474e31
[2026-01-28 13:45:14] info: [DocumentationRoutes] Registering endpoint: POST /api/test-post
[2026-01-28 13:45:14] info: [auth:8urtca] Starting auth for POST /endpoints
[2026-01-28 13:45:14] info: [auth:8urtca] Token from cookie: false
[2026-01-28 13:45:14] info: [auth:8urtca] Token from header: true
[2026-01-28 13:45:14] info: [auth:8urtca] Authenticated user 9b709cdd-413a-4acd-a720-33263d474e31
[2026-01-28 13:45:14] info: [DocumentationRoutes] Registering endpoint: PUT /api/test-put
[2026-01-28 13:45:14] info: [auth:3felhp] Starting auth for POST /endpoints
[2026-01-28 13:45:14] info: [auth:3felhp] Token from cookie: false
[2026-01-28 13:45:14] info: [auth:3felhp] Token from header: true
[2026-01-28 13:45:14] info: [auth:3felhp] Authenticated user 9b709cdd-413a-4acd-a720-33263d474e31
[2026-01-28 13:45:14] info: [DocumentationRoutes] Registering endpoint: DELETE /api/test-delete
[2026-01-28 13:45:14] info: [auth:xd1h4n] Starting auth for POST /endpoints
[2026-01-28 13:45:14] info: [auth:xd1h4n] Token from cookie: false
[2026-01-28 13:45:14] info: [auth:xd1h4n] Token from header: true
[2026-01-28 13:45:14] info: [auth:xd1h4n] Authenticated user 9b709cdd-413a-4acd-a720-33263d474e31
[2026-01-28 13:45:14] info: [DocumentationRoutes] Registering endpoint: PATCH /api/test-patch
[2026-01-28 13:45:14] info: [auth:ewcddi] Starting auth for POST /schemas
[2026-01-28 13:45:14] info: [auth:ewcddi] Token from cookie: false
[2026-01-28 13:45:14] info: [auth:ewcddi] Token from header: true
[2026-01-28 13:45:14] info: [auth:ewcddi] Authenticated user 9b709cdd-413a-4acd-a720-33263d474e31
[2026-01-28 13:45:14] info: [DocumentationRoutes] Registering schema: Horse
[2026-01-28 13:45:14] info: [auth:au22f] Starting auth for POST /schemas
[2026-01-28 13:45:14] info: [auth:au22f] Token from cookie: false
[2026-01-28 13:45:15] info: [auth:au22f] Token from header: true
[2026-01-28 13:45:15] info: [auth:au22f] Authenticated user 9b709cdd-413a-4acd-a720-33263d474e31
[2026-01-28 13:45:15] info: [auth:a037zm] Starting auth for GET /coverage
[2026-01-28 13:45:15] info: [auth:a037zm] Token from cookie: false
[2026-01-28 13:45:15] info: [auth:a037zm] Token from header: true
[2026-01-28 13:45:15] info: [auth:a037zm] Authenticated user 9b709cdd-413a-4acd-a720-33263d474e31
[2026-01-28 13:45:15] info: [DocumentationRoutes] Getting documentation coverage analysis
[2026-01-28 13:45:15] info: [auth:nnjmpw] Starting auth for GET /analytics
[2026-01-28 13:45:15] info: [auth:nnjmpw] Token from cookie: false
[2026-01-28 13:45:15] info: [auth:nnjmpw] Token from header: true
[2026-01-28 13:45:15] info: [auth:nnjmpw] Authenticated user 9b709cdd-413a-4acd-a720-33263d474e31
[2026-01-28 13:45:15] info: [DocumentationRoutes] Getting documentation analytics for timeframe: 30d
[2026-01-28 13:45:15] info: [ApiDocService] OpenAPI specification validation passed
[2026-01-28 13:45:15] info: [auth:n0gao] Starting auth for GET /analytics
[2026-01-28 13:45:15] info: [auth:n0gao] Token from cookie: false
[2026-01-28 13:45:15] info: [auth:n0gao] Token from header: true
[2026-01-28 13:45:15] info: [auth:n0gao] Authenticated user 9b709cdd-413a-4acd-a720-33263d474e31
[2026-01-28 13:45:15] info: [DocumentationRoutes] Getting documentation analytics for timeframe: 1d
[2026-01-28 13:45:15] info: [ApiDocService] OpenAPI specification validation passed
[2026-01-28 13:45:15] info: [auth:80xsz] Starting auth for GET /analytics
[2026-01-28 13:45:15] info: [auth:80xsz] Token from cookie: false
[2026-01-28 13:45:15] info: [auth:80xsz] Token from header: true
[2026-01-28 13:45:15] info: [auth:80xsz] Authenticated user 9b709cdd-413a-4acd-a720-33263d474e31
[2026-01-28 13:45:15] info: [DocumentationRoutes] Getting documentation analytics for timeframe: 7d
[2026-01-28 13:45:15] info: [ApiDocService] OpenAPI specification validation passed
[2026-01-28 13:45:15] info: [auth:9fq57o] Starting auth for GET /analytics
[2026-01-28 13:45:15] info: [auth:9fq57o] Token from cookie: false
[2026-01-28 13:45:15] info: [auth:9fq57o] Token from header: true
[2026-01-28 13:45:15] info: [auth:9fq57o] Authenticated user 9b709cdd-413a-4acd-a720-33263d474e31
[2026-01-28 13:45:15] info: [DocumentationRoutes] Getting documentation analytics for timeframe: 30d
[2026-01-28 13:45:15] info: [ApiDocService] OpenAPI specification validation passed
[2026-01-28 13:45:15] info: [auth:k9g5ue] Starting auth for GET /analytics
[2026-01-28 13:45:15] info: [auth:k9g5ue] Token from cookie: false
[2026-01-28 13:45:15] info: [auth:k9g5ue] Token from header: true
[2026-01-28 13:45:15] info: [auth:k9g5ue] Authenticated user 9b709cdd-413a-4acd-a720-33263d474e31
[2026-01-28 13:45:15] info: [auth:7vmjzm] Starting auth for GET /health
[2026-01-28 13:45:15] info: [auth:7vmjzm] Token from cookie: false
[2026-01-28 13:45:15] info: [auth:7vmjzm] Token from header: true
[2026-01-28 13:45:15] warn: [auth:7vmjzm] Invalid or expired token for GET /health from ::ffff:127.0.0.1
[2026-01-28 13:45:15] info: [auth:qzr4c] Starting auth for GET /health
[2026-01-28 13:45:15] info: [auth:qzr4c] Token from cookie: false
[2026-01-28 13:45:15] warn: [auth:qzr4c] Access token is required for GET /health from ::ffff:127.0.0.1
[2026-01-28 13:45:15] info: [auth:650cz5] Starting auth for POST /endpoints
[2026-01-28 13:45:15] info: [auth:650cz5] Token from cookie: false
[2026-01-28 13:45:15] info: [auth:650cz5] Token from header: true
[2026-01-28 13:45:15] info: [auth:650cz5] Authenticated user 9b709cdd-413a-4acd-a720-33263d474e31
[2026-01-28 13:45:15] info: [DocumentationRoutes] Registering endpoint: GET /api/users
[2026-01-28 13:45:15] info: [auth:qnd7in] Starting auth for POST /endpoints
[2026-01-28 13:45:15] info: [auth:qnd7in] Token from cookie: false
[2026-01-28 13:45:15] info: [auth:qnd7in] Token from header: true
[2026-01-28 13:45:15] info: [auth:qnd7in] Authenticated user 9b709cdd-413a-4acd-a720-33263d474e31
[2026-01-28 13:45:15] info: [DocumentationRoutes] Registering endpoint: POST /api/users
[2026-01-28 13:45:15] info: [auth:wc447l] Starting auth for POST /endpoints
[2026-01-28 13:45:15] info: [auth:wc447l] Token from cookie: false
[2026-01-28 13:45:15] info: [auth:wc447l] Token from header: true
[2026-01-28 13:45:15] info: [auth:wc447l] Authenticated user 9b709cdd-413a-4acd-a720-33263d474e31
[2026-01-28 13:45:15] info: [DocumentationRoutes] Registering endpoint: GET /api/horses
[2026-01-28 13:45:15] info: [auth:6ldi7] Starting auth for GET /metrics
[2026-01-28 13:45:15] info: [auth:6ldi7] Token from cookie: false
[2026-01-28 13:45:15] info: [auth:6ldi7] Token from header: true
[2026-01-28 13:45:15] info: [auth:6ldi7] Authenticated user 9b709cdd-413a-4acd-a720-33263d474e31
[2026-01-28 13:45:15] info: [DocumentationRoutes] Getting documentation metrics
[2026-01-28 13:45:15] info: [auth:4qk74] Starting auth for POST /schemas
[2026-01-28 13:45:15] info: [auth:4qk74] Token from cookie: false
[2026-01-28 13:45:15] info: [auth:4qk74] Token from header: true
[2026-01-28 13:45:15] info: [auth:4qk74] Authenticated user 9b709cdd-413a-4acd-a720-33263d474e31
[2026-01-28 13:45:15] info: [DocumentationRoutes] Registering schema: User
[2026-01-28 13:45:15] info: [auth:qdjfg] Starting auth for POST /schemas
[2026-01-28 13:45:15] info: [auth:qdjfg] Token from cookie: false
[2026-01-28 13:45:15] info: [auth:qdjfg] Token from header: true
[2026-01-28 13:45:15] info: [auth:qdjfg] Authenticated user 9b709cdd-413a-4acd-a720-33263d474e31
[2026-01-28 13:45:15] info: [DocumentationRoutes] Registering schema: Horse
[2026-01-28 13:45:15] info: [auth:zddvew] Starting auth for POST /generate
[2026-01-28 13:45:15] info: [auth:zddvew] Token from cookie: false
[2026-01-28 13:45:15] info: [auth:zddvew] Token from header: true
[2026-01-28 13:45:15] info: [auth:zddvew] Authenticated user 9b709cdd-413a-4acd-a720-33263d474e31
[2026-01-28 13:45:15] info: [DocumentationRoutes] Generating API documentation
[2026-01-28 13:45:15] info: [ApiDocService] OpenAPI specification saved successfully
[2026-01-28 13:45:15] info: [ApiDocService] Documentation generated for 0 endpoints
PASS __tests__/routes/documentationRoutes.test.mjs
  Documentation Routes
    GET /api/docs/health
      √ retrieves documentation health successfully (43 ms)
      √ requires authentication (17 ms)
    GET /api/docs/metrics
      √ retrieves documentation metrics successfully (20 ms)
      √ provides meaningful analytics data (22 ms)
    GET /api/docs/validation
      √ validates OpenAPI specification successfully (24 ms)
    POST /api/docs/generate
      √ generates documentation successfully (37 ms)
    POST /api/docs/endpoints
      √ registers endpoint successfully (33 ms)
      √ validates endpoint data (17 ms)
      √ accepts valid HTTP methods (91 ms)
    POST /api/docs/schemas
      √ registers schema successfully (23 ms)
      √ validates schema data (17 ms)
    GET /api/docs/coverage
      √ retrieves coverage analysis successfully (30 ms)
    GET /api/docs/analytics
      √ retrieves analytics with default timeframe (26 ms)
      √ accepts different timeframe parameters (90 ms)
      √ validates timeframe parameter (17 ms)
    Error Handling
      √ handles invalid authentication tokens (18 ms)
      √ handles missing authorization header (15 ms)
    Integration with Documentation Service
      √ endpoints registration reflects in metrics (74 ms)
      √ schema registration reflects in generation (64 ms)

[2026-01-28 13:45:15] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:16] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:16] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:16] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:45:17] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:17] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:17] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:17] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:17] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:17] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:17] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:17] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:17] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:17] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:45:17] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 13:45:17] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:17] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:45:17] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:45:17] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:45:17] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:45:17] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:45:17] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 13:45:17] info: [GET] /api/horses
[2026-01-28 13:45:17] warn: [MemoryMonitoring] Memory threshold exceeded: 2052MB
[2026-01-28 13:45:17] info: [auth:iz6riu] Starting auth for GET /horses
[2026-01-28 13:45:17] info: [auth:iz6riu] Token from cookie: false
[2026-01-28 13:45:17] info: [auth:iz6riu] Token from header: true
[2026-01-28 13:45:17] info: [auth:iz6riu] Authenticated user test-user-uuid-123
[2026-01-28 13:45:17] info: [GET] /api/horses - 200
PASS __tests__/integration/horse-rate-limiting.test.mjs
  Horse routes rate limiting
    √ should apply query rate limiter to GET /api/horses (102 ms)

[2026-01-28 13:45:17] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:17] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:17] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:17] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:45:17] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:17] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:17] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:17] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:17] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:17] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:17] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:17] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:17] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:17] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:45:17] info: [RateLimit:test] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:17] info: [RateLimit:rl] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:17] info: [RateLimit:fallback] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:17] info: [RateLimit:circuit-log] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:17] info: [RateLimit:under-limit] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:18] info: [RateLimit:exceed-limit] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:18] info: [RateLimit:user-limit] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:18] info: [RateLimit:ip-limit] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:18] info: [RateLimit:bypass-test] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:18] info: [RateLimit:env-override] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:18] info: [RateLimit:error-handling] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:18] info: [RateLimit:custom-handler] Redis not connected - using in-memory rate limiting (per-process)
  console.error
    ValidationError: The hit count for ip:127.0.0.1 was incremented more than once for a single request. See https://express-rate-limit.github.io/ERR_ERL_DOUBLE_COUNT/ for more information.
        at Object.singleCount (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:214:13)
        at Object.wrappedValidations.<computed> [as singleCount] (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:370:22)
        at C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:715:26
        at C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:676:5 {
      code: 'ERR_ERL_DOUBLE_COUNT',
      help: 'https://express-rate-limit.github.io/ERR_ERL_DOUBLE_COUNT/'
    }

      at Object.wrappedValidations.<computed> [as singleCount] (node_modules/express-rate-limit/dist/index.mjs:378:21)
      at node_modules/express-rate-limit/dist/index.mjs:715:26
      at node_modules/express-rate-limit/dist/index.mjs:676:5

[2026-01-28 13:45:18] info: [RateLimit:retry-after] Redis not connected - using in-memory rate limiting (per-process)
  console.error
    ValidationError: The hit count for ip:127.0.0.1 was incremented more than once for a single request. See https://express-rate-limit.github.io/ERR_ERL_DOUBLE_COUNT/ for more information.
        at Object.singleCount (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:214:13)
        at Object.wrappedValidations.<computed> [as singleCount] (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:370:22)
        at C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:715:26
        at C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:676:5 {
      code: 'ERR_ERL_DOUBLE_COUNT',
      help: 'https://express-rate-limit.github.io/ERR_ERL_DOUBLE_COUNT/'
    }

      at Object.wrappedValidations.<computed> [as singleCount] (node_modules/express-rate-limit/dist/index.mjs:378:21)
      at node_modules/express-rate-limit/dist/index.mjs:715:26
      at node_modules/express-rate-limit/dist/index.mjs:676:5

[2026-01-28 13:45:18] info: [RateLimit:distributed] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:18] info: [RateLimit:multi-process] Redis not connected - using in-memory rate limiting (per-process)
PASS __tests__/integration/rate-limit-circuit-breaker.test.mjs
  Rate Limiting Circuit Breaker Integration Tests
    Rate Limiter Initialization
      √ should create rate limiter successfully (6 ms)
      √ should validate configuration parameters (3 ms)
      √ should use default configuration when not provided (3 ms)
    Circuit Breaker Fallback Behavior
      √ should fall back to in-memory rate limiting when circuit is open (61 ms)
      √ should log circuit open state when falling back (3 ms)
    Rate Limiting with Circuit Breaker
      √ should allow requests under the limit (181 ms)
      √ should configure rate limiter with blocking capability (3 ms)
      √ should use user ID for authenticated rate limiting (58 ms)
      √ should fall back to IP for unauthenticated requests (62 ms)
    Test Environment Bypasses
      √ should bypass rate limiting with test header (77 ms)
      √ should respect test environment overrides (2 ms)
    Health Status Monitoring
      √ should report rate limiting health status (2 ms)
      √ should include circuit breaker metrics when available (1 ms)
      √ should report degraded status when Redis unavailable (1 ms)
    Circuit State Detection
      √ should detect when Redis connection is available (1 ms)
      √ should return false when circuit breaker is open (1 ms)
    Error Handling and Recovery
      √ should handle Redis connection errors gracefully (2 ms)
      √ should recover when Redis becomes available (1 ms)
    Rate Limiter Custom Handler
      √ should return proper error response when limit exceeded (126 ms)
      √ should include retry-after information in response (124 ms)
    Distributed Rate Limiting
      √ should use Redis store for distributed rate limiting when available (5 ms)
      √ should synchronize rate limits across multiple processes (183 ms)

[2026-01-28 13:45:19] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:19] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:19] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:19] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:45:19] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:19] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:19] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:19] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:19] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:19] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:19] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:19] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:19] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:19] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:45:20] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 13:45:20] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:20] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:45:20] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:45:20] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:45:20] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:45:20] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 13:45:20] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 13:45:20] info: [POST] /api/horses/foals
[2026-01-28 13:45:20] warn: [MemoryMonitoring] Memory threshold exceeded: 2129MB
[2026-01-28 13:45:20] info: [auth:8xjrxc] Starting auth for POST /horses/foals
[2026-01-28 13:45:20] info: [auth:8xjrxc] Token from cookie: false
[2026-01-28 13:45:20] warn: [auth:8xjrxc] Access token is required for POST /horses/foals from ::ffff:127.0.0.1
[2026-01-28 13:45:20] info: [POST] /api/horses/foals - 401
PASS tests/foalCreationIntegration.test.mjs
  🐴 INTEGRATION: Foal Creation Integration - API Endpoint Validation
    √ should accept valid foal creation data structure (47 ms)

[2026-01-28 13:45:20] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:20] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:20] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:20] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:45:20] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:20] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:20] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:20] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:20] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:20] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:20] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:20] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:20] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:20] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:45:21] info: [TokenRotation] Created new token pair
[2026-01-28 13:45:21] info: [EmailVerification] Created verification token
[2026-01-28 13:45:21] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 13:45:21] info: [authController.register] Verification email sent
[2026-01-28 13:45:21] info: [auth:4h125f] Starting auth for GET /api/horses/trainable/5a96cd08-46bd-48bc-9eb4-e66557ebb129
[2026-01-28 13:45:21] info: [auth:4h125f] Token from cookie: false
[2026-01-28 13:45:21] info: [auth:4h125f] Token from header: true
[2026-01-28 13:45:21] info: [auth:4h125f] Authenticated user 5a96cd08-46bd-48bc-9eb4-e66557ebb129
[2026-01-28 13:45:21] info: [auth:7js3mu] Starting auth for GET /api/horses/trainable/5a96cd08-46bd-48bc-9eb4-e66557ebb129
[2026-01-28 13:45:21] info: [auth:7js3mu] Token from cookie: false
[2026-01-28 13:45:21] info: [auth:7js3mu] Token from header: true
[2026-01-28 13:45:21] info: [auth:7js3mu] Authenticated user 5a96cd08-46bd-48bc-9eb4-e66557ebb129
[2026-01-28 13:45:21] info: [auth:cjddtl] Starting auth for POST /api/training/train
[2026-01-28 13:45:21] info: [auth:cjddtl] Token from cookie: false
[2026-01-28 13:45:21] info: [auth:cjddtl] Token from header: true
[2026-01-28 13:45:21] info: [auth:cjddtl] Authenticated user 5a96cd08-46bd-48bc-9eb4-e66557ebb129
[2026-01-28 13:45:21] info: [auth:k3w96d] Starting auth for POST /api/training/train
[2026-01-28 13:45:21] info: [auth:k3w96d] Token from cookie: false
[2026-01-28 13:45:21] info: [auth:k3w96d] Token from header: true
[2026-01-28 13:45:21] info: [auth:k3w96d] Authenticated user 5a96cd08-46bd-48bc-9eb4-e66557ebb129
[2026-01-28 13:45:21] info: [auth:u3nvkp] Starting auth for GET /api/horses/trainable/5a96cd08-46bd-48bc-9eb4-e66557ebb129
[2026-01-28 13:45:21] info: [auth:u3nvkp] Token from cookie: false
[2026-01-28 13:45:21] warn: [auth:u3nvkp] Access token is required for GET /api/horses/trainable/5a96cd08-46bd-48bc-9eb4-e66557ebb129 from ::ffff:127.0.0.1
PASS tests/training-complete.test.mjs
  🏋️ INTEGRATION: Training System Complete - End-to-End Workflow
    Authentication and Setup
      √ should have created test user and horses (2 ms)
    Trainable Horses
      √ should get trainable horses for authenticated user (22 ms)
    Training Functionality
      √ should successfully train an adult horse (40 ms)
      √ should reject training for young horse (19 ms)
    Authentication Protection
      √ should reject unauthenticated requests (17 ms)

[2026-01-28 13:45:21] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:21] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:21] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:21] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:45:22] info: [auth:66907] Starting auth for GET /metrics
[2026-01-28 13:45:22] info: [auth:66907] Token from cookie: false
[2026-01-28 13:45:22] info: [auth:66907] Token from header: true
[2026-01-28 13:45:22] info: [auth:66907] Authenticated user b1229c94-166e-4486-acf6-1cb6aa69e9b0
[2026-01-28 13:45:22] info: [auth:fpp13e] Starting auth for GET /metrics
[2026-01-28 13:45:22] info: [auth:fpp13e] Token from cookie: false
[2026-01-28 13:45:22] info: [auth:fpp13e] Token from header: true
[2026-01-28 13:45:22] info: [auth:fpp13e] Authenticated user b1229c94-166e-4486-acf6-1cb6aa69e9b0
[2026-01-28 13:45:22] info: [auth:1jhhl] Starting auth for GET /metrics
[2026-01-28 13:45:22] info: [auth:1jhhl] Token from cookie: false
[2026-01-28 13:45:22] warn: [auth:1jhhl] Access token is required for GET /metrics from ::ffff:127.0.0.1
[2026-01-28 13:45:22] info: [auth:iy27ut] Starting auth for GET /performance
[2026-01-28 13:45:22] info: [auth:iy27ut] Token from cookie: false
[2026-01-28 13:45:22] info: [auth:iy27ut] Token from header: true
[2026-01-28 13:45:22] info: [auth:iy27ut] Authenticated user b1229c94-166e-4486-acf6-1cb6aa69e9b0
[2026-01-28 13:45:22] info: [auth:in4jj] Starting auth for GET /performance
[2026-01-28 13:45:22] info: [auth:in4jj] Token from cookie: false
[2026-01-28 13:45:22] info: [auth:in4jj] Token from header: true
[2026-01-28 13:45:22] info: [auth:in4jj] Authenticated user b1229c94-166e-4486-acf6-1cb6aa69e9b0
[2026-01-28 13:45:22] info: [ApiOptimization] Getting performance metrics for timeframe: 24h
[2026-01-28 13:45:22] info: [auth:hvy7bpj] Starting auth for GET /performance
[2026-01-28 13:45:22] info: [auth:hvy7bpj] Token from cookie: false
[2026-01-28 13:45:22] info: [auth:hvy7bpj] Token from header: true
[2026-01-28 13:45:22] info: [auth:hvy7bpj] Authenticated user b1229c94-166e-4486-acf6-1cb6aa69e9b0
[2026-01-28 13:45:22] info: [auth:l4yz2] Starting auth for GET /performance
[2026-01-28 13:45:22] info: [auth:l4yz2] Token from cookie: false
[2026-01-28 13:45:22] info: [auth:l4yz2] Token from header: true
[2026-01-28 13:45:22] info: [auth:l4yz2] Authenticated user b1229c94-166e-4486-acf6-1cb6aa69e9b0
[2026-01-28 13:45:22] info: [ApiOptimization] Getting performance metrics for timeframe: 1h
[2026-01-28 13:45:22] info: [auth:6og2gi] Starting auth for GET /performance
[2026-01-28 13:45:22] info: [auth:6og2gi] Token from cookie: false
[2026-01-28 13:45:22] info: [auth:6og2gi] Token from header: true
[2026-01-28 13:45:22] info: [auth:6og2gi] Authenticated user b1229c94-166e-4486-acf6-1cb6aa69e9b0
[2026-01-28 13:45:22] info: [auth:7tkhq] Starting auth for GET /performance
[2026-01-28 13:45:22] info: [auth:7tkhq] Token from cookie: false
[2026-01-28 13:45:22] info: [auth:7tkhq] Token from header: true
[2026-01-28 13:45:22] info: [auth:7tkhq] Authenticated user b1229c94-166e-4486-acf6-1cb6aa69e9b0
[2026-01-28 13:45:22] info: [ApiOptimization] Getting performance metrics for timeframe: 24h
[2026-01-28 13:45:22] info: [auth:tzqvs] Starting auth for GET /performance
[2026-01-28 13:45:22] info: [auth:tzqvs] Token from cookie: false
[2026-01-28 13:45:22] info: [auth:tzqvs] Token from header: true
[2026-01-28 13:45:22] info: [auth:tzqvs] Authenticated user b1229c94-166e-4486-acf6-1cb6aa69e9b0
[2026-01-28 13:45:22] info: [auth:v4ln3] Starting auth for GET /performance
[2026-01-28 13:45:22] info: [auth:v4ln3] Token from cookie: false
[2026-01-28 13:45:22] info: [auth:v4ln3] Token from header: true
[2026-01-28 13:45:22] info: [auth:v4ln3] Authenticated user b1229c94-166e-4486-acf6-1cb6aa69e9b0
[2026-01-28 13:45:22] info: [ApiOptimization] Getting performance metrics for timeframe: 7d
[2026-01-28 13:45:22] info: [auth:ylqomi] Starting auth for GET /performance
[2026-01-28 13:45:22] info: [auth:ylqomi] Token from cookie: false
[2026-01-28 13:45:22] info: [auth:ylqomi] Token from header: true
[2026-01-28 13:45:22] info: [auth:ylqomi] Authenticated user b1229c94-166e-4486-acf6-1cb6aa69e9b0
[2026-01-28 13:45:22] info: [auth:tnr6si] Starting auth for GET /performance
[2026-01-28 13:45:22] info: [auth:tnr6si] Token from cookie: false
[2026-01-28 13:45:22] info: [auth:tnr6si] Token from header: true
[2026-01-28 13:45:22] info: [auth:tnr6si] Authenticated user b1229c94-166e-4486-acf6-1cb6aa69e9b0
[2026-01-28 13:45:22] info: [ApiOptimization] Getting performance metrics for timeframe: 30d
[2026-01-28 13:45:22] info: [auth:ni53nd] Starting auth for GET /performance
[2026-01-28 13:45:22] info: [auth:ni53nd] Token from cookie: false
[2026-01-28 13:45:22] info: [auth:ni53nd] Token from header: true
[2026-01-28 13:45:22] info: [auth:ni53nd] Authenticated user b1229c94-166e-4486-acf6-1cb6aa69e9b0
[2026-01-28 13:45:22] info: [auth:z3cpao] Starting auth for GET /performance
[2026-01-28 13:45:22] info: [auth:z3cpao] Token from cookie: false
[2026-01-28 13:45:22] info: [auth:z3cpao] Token from header: true
[2026-01-28 13:45:22] info: [auth:z3cpao] Authenticated user b1229c94-166e-4486-acf6-1cb6aa69e9b0
[2026-01-28 13:45:22] info: [auth:zlb3n9] Starting auth for GET /compression-stats
[2026-01-28 13:45:22] info: [auth:zlb3n9] Token from cookie: false
[2026-01-28 13:45:22] info: [auth:zlb3n9] Token from header: true
[2026-01-28 13:45:22] info: [auth:zlb3n9] Authenticated user b1229c94-166e-4486-acf6-1cb6aa69e9b0
[2026-01-28 13:45:22] info: [auth:fre1sk] Starting auth for GET /compression-stats
[2026-01-28 13:45:22] info: [auth:fre1sk] Token from cookie: false
[2026-01-28 13:45:22] info: [auth:fre1sk] Token from header: true
[2026-01-28 13:45:22] info: [auth:fre1sk] Authenticated user b1229c94-166e-4486-acf6-1cb6aa69e9b0
[2026-01-28 13:45:22] info: [ApiOptimization] Getting compression statistics
[2026-01-28 13:45:22] info: [auth:6mzudf] Starting auth for GET /cache-analytics
[2026-01-28 13:45:22] info: [auth:6mzudf] Token from cookie: false
[2026-01-28 13:45:22] info: [auth:6mzudf] Token from header: true
[2026-01-28 13:45:22] info: [auth:6mzudf] Authenticated user b1229c94-166e-4486-acf6-1cb6aa69e9b0
[2026-01-28 13:45:22] info: [auth:6cozn] Starting auth for GET /cache-analytics
[2026-01-28 13:45:22] info: [auth:6cozn] Token from cookie: false
[2026-01-28 13:45:22] info: [auth:6cozn] Token from header: true
[2026-01-28 13:45:22] info: [auth:6cozn] Authenticated user b1229c94-166e-4486-acf6-1cb6aa69e9b0
[2026-01-28 13:45:22] info: [ApiOptimization] Getting cache analytics
[2026-01-28 13:45:22] info: [auth:fzz1gi] Starting auth for POST /test-compression
[2026-01-28 13:45:22] info: [auth:fzz1gi] Token from cookie: false
[2026-01-28 13:45:22] info: [auth:fzz1gi] Token from header: true
[2026-01-28 13:45:22] info: [auth:fzz1gi] Authenticated user b1229c94-166e-4486-acf6-1cb6aa69e9b0
[2026-01-28 13:45:22] info: [auth:tyy278] Starting auth for POST /test-compression
[2026-01-28 13:45:22] info: [auth:tyy278] Token from cookie: false
[2026-01-28 13:45:22] info: [auth:tyy278] Token from header: true
[2026-01-28 13:45:22] info: [auth:tyy278] Authenticated user b1229c94-166e-4486-acf6-1cb6aa69e9b0
[2026-01-28 13:45:22] info: [ApiOptimization] Testing compression with algorithm: gzip
[2026-01-28 13:45:22] info: [auth:pqt7d7] Starting auth for POST /test-compression
[2026-01-28 13:45:22] info: [auth:pqt7d7] Token from cookie: false
[2026-01-28 13:45:22] info: [auth:pqt7d7] Token from header: true
[2026-01-28 13:45:22] info: [auth:pqt7d7] Authenticated user b1229c94-166e-4486-acf6-1cb6aa69e9b0
[2026-01-28 13:45:22] info: [auth:htmb9] Starting auth for POST /test-compression
[2026-01-28 13:45:22] info: [auth:htmb9] Token from cookie: false
[2026-01-28 13:45:22] info: [auth:htmb9] Token from header: true
[2026-01-28 13:45:22] info: [auth:htmb9] Authenticated user b1229c94-166e-4486-acf6-1cb6aa69e9b0
[2026-01-28 13:45:22] info: [auth:ocappv] Starting auth for POST /test-compression
[2026-01-28 13:45:22] info: [auth:ocappv] Token from cookie: false
[2026-01-28 13:45:22] info: [auth:ocappv] Token from header: true
[2026-01-28 13:45:22] info: [auth:ocappv] Authenticated user b1229c94-166e-4486-acf6-1cb6aa69e9b0
[2026-01-28 13:45:22] info: [auth:zjocg] Starting auth for POST /test-compression
[2026-01-28 13:45:22] info: [auth:zjocg] Token from cookie: false
[2026-01-28 13:45:22] info: [auth:zjocg] Token from header: true
[2026-01-28 13:45:22] info: [auth:zjocg] Authenticated user b1229c94-166e-4486-acf6-1cb6aa69e9b0
[2026-01-28 13:45:22] info: [ApiOptimization] Testing compression with algorithm: gzip
[2026-01-28 13:45:22] info: [auth:hvomay] Starting auth for POST /test-compression
[2026-01-28 13:45:22] info: [auth:hvomay] Token from cookie: false
[2026-01-28 13:45:22] info: [auth:hvomay] Token from header: true
[2026-01-28 13:45:22] info: [auth:hvomay] Authenticated user b1229c94-166e-4486-acf6-1cb6aa69e9b0
[2026-01-28 13:45:22] info: [auth:tige] Starting auth for POST /test-compression
[2026-01-28 13:45:22] info: [auth:tige] Token from cookie: false
[2026-01-28 13:45:22] info: [auth:tige] Token from header: true
[2026-01-28 13:45:22] info: [auth:tige] Authenticated user b1229c94-166e-4486-acf6-1cb6aa69e9b0
[2026-01-28 13:45:22] info: [ApiOptimization] Testing compression with algorithm: brotli
[2026-01-28 13:45:22] info: [auth:4kl6h] Starting auth for POST /test-compression
[2026-01-28 13:45:22] info: [auth:4kl6h] Token from cookie: false
[2026-01-28 13:45:22] info: [auth:4kl6h] Token from header: true
[2026-01-28 13:45:22] info: [auth:4kl6h] Authenticated user b1229c94-166e-4486-acf6-1cb6aa69e9b0
[2026-01-28 13:45:22] info: [auth:xe8j1] Starting auth for POST /test-compression
[2026-01-28 13:45:22] info: [auth:xe8j1] Token from cookie: false
[2026-01-28 13:45:22] info: [auth:xe8j1] Token from header: true
[2026-01-28 13:45:22] info: [auth:xe8j1] Authenticated user b1229c94-166e-4486-acf6-1cb6aa69e9b0
[2026-01-28 13:45:22] info: [ApiOptimization] Testing compression with algorithm: deflate
[2026-01-28 13:45:22] info: [auth:f68ega] Starting auth for POST /test-pagination
[2026-01-28 13:45:22] info: [auth:f68ega] Token from cookie: false
[2026-01-28 13:45:22] info: [auth:f68ega] Token from header: true
[2026-01-28 13:45:22] info: [auth:f68ega] Authenticated user b1229c94-166e-4486-acf6-1cb6aa69e9b0
[2026-01-28 13:45:22] info: [auth:xgisri] Starting auth for POST /test-pagination
[2026-01-28 13:45:22] info: [auth:xgisri] Token from cookie: false
[2026-01-28 13:45:22] info: [auth:xgisri] Token from header: true
[2026-01-28 13:45:22] info: [auth:xgisri] Authenticated user b1229c94-166e-4486-acf6-1cb6aa69e9b0
[2026-01-28 13:45:22] info: [ApiOptimization] Testing offset pagination with 100 items
[2026-01-28 13:45:22] info: [auth:ral2g] Starting auth for POST /test-pagination
[2026-01-28 13:45:22] info: [auth:ral2g] Token from cookie: false
[2026-01-28 13:45:22] info: [auth:ral2g] Token from header: true
[2026-01-28 13:45:22] info: [auth:ral2g] Authenticated user b1229c94-166e-4486-acf6-1cb6aa69e9b0
[2026-01-28 13:45:22] info: [auth:95z06] Starting auth for POST /test-pagination
[2026-01-28 13:45:22] info: [auth:95z06] Token from cookie: false
[2026-01-28 13:45:22] info: [auth:95z06] Token from header: true
[2026-01-28 13:45:22] info: [auth:95z06] Authenticated user b1229c94-166e-4486-acf6-1cb6aa69e9b0
[2026-01-28 13:45:22] info: [ApiOptimization] Testing cursor pagination with 100 items
[2026-01-28 13:45:22] info: [auth:p8c0on] Starting auth for POST /test-pagination
[2026-01-28 13:45:22] info: [auth:p8c0on] Token from cookie: false
[2026-01-28 13:45:22] info: [auth:p8c0on] Token from header: true
[2026-01-28 13:45:22] info: [auth:p8c0on] Authenticated user b1229c94-166e-4486-acf6-1cb6aa69e9b0
[2026-01-28 13:45:22] info: [auth:skh7up] Starting auth for POST /test-pagination
[2026-01-28 13:45:22] info: [auth:skh7up] Token from cookie: false
[2026-01-28 13:45:22] info: [auth:skh7up] Token from header: true
[2026-01-28 13:45:22] info: [auth:skh7up] Authenticated user b1229c94-166e-4486-acf6-1cb6aa69e9b0
[2026-01-28 13:45:22] info: [auth:e27fwa] Starting auth for POST /test-pagination
[2026-01-28 13:45:22] info: [auth:e27fwa] Token from cookie: false
[2026-01-28 13:45:22] info: [auth:e27fwa] Token from header: true
[2026-01-28 13:45:22] info: [auth:e27fwa] Authenticated user b1229c94-166e-4486-acf6-1cb6aa69e9b0
[2026-01-28 13:45:22] info: [auth:uau66] Starting auth for POST /test-pagination
[2026-01-28 13:45:22] info: [auth:uau66] Token from cookie: false
[2026-01-28 13:45:22] info: [auth:uau66] Token from header: true
[2026-01-28 13:45:22] info: [auth:uau66] Authenticated user b1229c94-166e-4486-acf6-1cb6aa69e9b0
[2026-01-28 13:45:22] info: [auth:0jti99] Starting auth for POST /test-pagination
[2026-01-28 13:45:22] info: [auth:0jti99] Token from cookie: false
[2026-01-28 13:45:22] info: [auth:0jti99] Token from header: true
[2026-01-28 13:45:22] info: [auth:0jti99] Authenticated user b1229c94-166e-4486-acf6-1cb6aa69e9b0
[2026-01-28 13:45:22] info: [auth:e524cj] Starting auth for POST /test-pagination
[2026-01-28 13:45:22] info: [auth:e524cj] Token from cookie: false
[2026-01-28 13:45:22] info: [auth:e524cj] Token from header: true
[2026-01-28 13:45:22] info: [auth:e524cj] Authenticated user b1229c94-166e-4486-acf6-1cb6aa69e9b0
[2026-01-28 13:45:22] info: [auth:bckeo3] Starting auth for GET /recommendations
[2026-01-28 13:45:22] info: [auth:bckeo3] Token from cookie: false
[2026-01-28 13:45:22] info: [auth:bckeo3] Token from header: true
[2026-01-28 13:45:22] info: [auth:bckeo3] Authenticated user b1229c94-166e-4486-acf6-1cb6aa69e9b0
[2026-01-28 13:45:22] info: [auth:b177n] Starting auth for GET /recommendations
[2026-01-28 13:45:22] info: [auth:b177n] Token from cookie: false
[2026-01-28 13:45:22] info: [auth:b177n] Token from header: true
[2026-01-28 13:45:22] info: [auth:b177n] Authenticated user b1229c94-166e-4486-acf6-1cb6aa69e9b0
[2026-01-28 13:45:22] info: [ApiOptimization] Generating optimization recommendations
[2026-01-28 13:45:22] info: [auth:97rcle] Starting auth for GET /metrics
[2026-01-28 13:45:22] info: [auth:97rcle] Token from cookie: false
[2026-01-28 13:45:22] info: [auth:97rcle] Token from header: true
[2026-01-28 13:45:22] warn: [auth:97rcle] Invalid or expired token for GET /metrics from ::ffff:127.0.0.1
[2026-01-28 13:45:22] info: [auth:tqeq9e] Starting auth for GET /metrics
[2026-01-28 13:45:22] info: [auth:tqeq9e] Token from cookie: false
[2026-01-28 13:45:22] warn: [auth:tqeq9e] Access token is required for GET /metrics from ::ffff:127.0.0.1
[2026-01-28 13:45:22] info: [auth:xdd2eg] Starting auth for POST /test-compression
[2026-01-28 13:45:22] info: [auth:xdd2eg] Token from cookie: false
[2026-01-28 13:45:22] info: [auth:xdd2eg] Token from header: true
[2026-01-28 13:45:22] info: [auth:xdd2eg] Authenticated user b1229c94-166e-4486-acf6-1cb6aa69e9b0
[2026-01-28 13:45:22] info: [auth:clnwi] Starting auth for POST /test-compression
[2026-01-28 13:45:22] info: [auth:clnwi] Token from cookie: false
[2026-01-28 13:45:22] info: [auth:clnwi] Token from header: true
[2026-01-28 13:45:22] info: [auth:clnwi] Authenticated user b1229c94-166e-4486-acf6-1cb6aa69e9b0
[2026-01-28 13:45:22] info: [ApiOptimization] Testing compression with algorithm: gzip
[2026-01-28 13:45:22] info: [auth:b21lfo] Starting auth for POST /test-pagination
[2026-01-28 13:45:22] info: [auth:b21lfo] Token from cookie: false
[2026-01-28 13:45:22] info: [auth:b21lfo] Token from header: true
[2026-01-28 13:45:22] info: [auth:b21lfo] Authenticated user b1229c94-166e-4486-acf6-1cb6aa69e9b0
[2026-01-28 13:45:22] info: [auth:t92fc5] Starting auth for POST /test-pagination
[2026-01-28 13:45:22] info: [auth:t92fc5] Token from cookie: false
[2026-01-28 13:45:22] info: [auth:t92fc5] Token from header: true
[2026-01-28 13:45:22] info: [auth:t92fc5] Authenticated user b1229c94-166e-4486-acf6-1cb6aa69e9b0
[2026-01-28 13:45:22] info: [ApiOptimization] Testing offset pagination with 1000 items
PASS __tests__/routes/apiOptimizationRoutes.test.mjs
  API Optimization Routes
    GET /api/optimization/metrics
      √ retrieves optimization metrics successfully (43 ms)
      √ requires authentication (20 ms)
    GET /api/optimization/performance
      √ retrieves performance analytics with default timeframe (30 ms)
      √ accepts different timeframe parameters (104 ms)
      √ validates timeframe parameter (22 ms)
    GET /api/optimization/compression-stats
      √ retrieves compression statistics successfully (27 ms)
    GET /api/optimization/cache-analytics
      √ retrieves cache analytics successfully (28 ms)
    POST /api/optimization/test-compression
      √ tests compression on sample data successfully (37 ms)
      √ validates required data parameter (23 ms)
      √ accepts different compression algorithms (68 ms)
    POST /api/optimization/test-pagination
      √ tests offset pagination successfully (22 ms)
      √ tests cursor pagination successfully (24 ms)
      √ validates pagination parameters (66 ms)
    GET /api/optimization/recommendations
      √ generates optimization recommendations successfully (27 ms)
    Error Handling
      √ handles invalid authentication tokens (14 ms)
      √ handles missing authorization header (17 ms)
    Performance Validation
      √ compression test shows meaningful results (26 ms)
      √ pagination test shows performance metrics (23 ms)

[2026-01-28 13:45:22] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:22] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:22] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:22] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 7 horses
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateEffectivePopulationSize] Calculating for 7 horses
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.identifyGeneticFounders] Identifying founders in 7 horses
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 146943 and mare 146942
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 146954 and mare 146950
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.trackPopulationGeneticHealth] Tracking health for 7 horses
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 7 horses
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateEffectivePopulationSize] Calculating for 7 horses
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 146956 and mare 146957
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 146960 and mare 146957
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 146958 and mare 146959
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.identifyGeneticFounders] Identifying founders in 7 horses
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.analyzeGeneticTrends] Analyzing trends for 7 horses
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 3 horses
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 146963 and mare 146964
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 146965 and mare 146966
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 146968 and mare 146964
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.generateOptimalBreedingRecommendations] Generating recommendations for 7 horses
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 146974 and mare 146973
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 146974 and mare 146973
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 146974 and mare 146975
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 146974 and mare 146975
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 146974 and mare 146976
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 146974 and mare 146976
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 146974 and mare 146971
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 146974 and mare 146971
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 146972 and mare 146973
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 146972 and mare 146973
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 146972 and mare 146975
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 146972 and mare 146975
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 146972 and mare 146976
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 146972 and mare 146976
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 146972 and mare 146971
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 146972 and mare 146971
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 146970 and mare 146973
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 146970 and mare 146973
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 146970 and mare 146975
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 146970 and mare 146975
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 146970 and mare 146976
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 146970 and mare 146976
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 146970 and mare 146971
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 146970 and mare 146971
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 7 horses
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 146977 and mare 146978
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 146977 and mare 146978
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.trackGeneticDiversityOverTime] Tracking diversity for 7 horses
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 3 horses
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 7 horses
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.trackPopulationGeneticHealth] Tracking health for 7 horses
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 7 horses
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateEffectivePopulationSize] Calculating for 7 horses
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 146984 and mare 146986
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 146989 and mare 146986
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 146985 and mare 146987
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.identifyGeneticFounders] Identifying founders in 7 horses
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.generateGeneticDiversityReport] Generating report for 7 horses
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 7 horses
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.trackPopulationGeneticHealth] Tracking health for 7 horses
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 7 horses
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.analyzeGeneticTrends] Analyzing trends for 7 horses
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.generateOptimalBreedingRecommendations] Generating recommendations for 7 horses
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.trackGeneticDiversityOverTime] Tracking diversity for 7 horses
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateEffectivePopulationSize] Calculating for 7 horses
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 146992 and mare 146997
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 146992 and mare 146997
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 3 horses
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 146992 and mare 146991
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 146992 and mare 146991
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 146996 and mare 146991
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 146992 and mare 146994
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 146992 and mare 146994
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 146992 and mare 146995
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 146993 and mare 146994
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 146993 and mare 146994
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 146992 and mare 146995
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 3 horses
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.identifyGeneticFounders] Identifying founders in 7 horses
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 146996 and mare 146991
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 146992 and mare 146991
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 146992 and mare 146991
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 7 horses
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.trackPopulationGeneticHealth] Tracking health for 7 horses
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 7 horses
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 146993 and mare 146997
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateEffectivePopulationSize] Calculating for 7 horses
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 146993 and mare 146997
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 146992 and mare 146991
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 146993 and mare 146994
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 146996 and mare 146991
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 146993 and mare 146994
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 146993 and mare 146995
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 146993 and mare 146995
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 146993 and mare 146994
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.identifyGeneticFounders] Identifying founders in 7 horses
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 146993 and mare 146991
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 146993 and mare 146991
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 146996 and mare 146997
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 146996 and mare 146997
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 146996 and mare 146994
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 146996 and mare 146994
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 146996 and mare 146995
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 146996 and mare 146995
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 146996 and mare 146991
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 146996 and mare 146991
[2026-01-28 13:45:23] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 7 horses
PASS tests/unit/geneticDiversityTracking.test.mjs
  🧬 Genetic Diversity Tracking System
    🔬 Advanced Genetic Diversity Algorithms
      √ should calculate comprehensive genetic diversity metrics (173 ms)
      √ should calculate effective population size (48 ms)
      √ should identify genetic founders and their contributions (61 ms)
    🔍 Enhanced Inbreeding Analysis
      √ should calculate detailed inbreeding coefficients (34 ms)
      √ should detect inbreeding in population (46 ms)
    📊 Population Genetic Health Tracking
      √ should track population genetic health metrics (78 ms)
      √ should analyze genetic trends over time (71 ms)
    🎯 Optimal Breeding Recommendations
      √ should generate optimal breeding recommendations (161 ms)
      √ should assess breeding pair compatibility (33 ms)
    📈 Genetic Diversity Tracking Over Time
      √ should track genetic diversity changes over time (104 ms)
      √ should generate comprehensive genetic diversity report (222 ms)

[2026-01-28 13:45:24] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:24] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:24] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:24] info: [envValidator] Test environment validation complete. Success: true
PASS tests/unit/epigeneticFlagDefinitions.test.mjs
  Epigenetic Flag Definitions
    Constants
      √ should have correct flag types (3 ms)
      √ should have correct source categories
      √ should have correct max flags limit (1 ms)
      √ should have correct age range (1 ms)
    Flag Definitions Structure
      √ should have exactly 9 starter flags (1 ms)
      √ should have all required starter flags (2 ms)
      √ each flag should have required properties (14 ms)
      √ each flag should have valid influences structure (12 ms)
    Flag Type Distribution
      √ should have correct distribution of flag types (1 ms)
      √ should have correct distribution of source categories (1 ms)
    Helper Functions
      getAllFlagDefinitions
        √ should return all flag definitions (1 ms)
      getFlagDefinition
        √ should return correct flag definition for valid name (1 ms)
        √ should return correct flag definition for uppercase name (1 ms)
        √ should return null for invalid flag name
        √ should handle empty string (1 ms)
      getFlagsByType
        √ should return positive flags (1 ms)
        √ should return negative flags (1 ms)
        √ should return empty array for adaptive flags
        √ should return empty array for invalid type (1 ms)
      getFlagsBySourceCategory
        √ should return flags by bonding category (1 ms)
        √ should return flags by novelty category
        √ should return flags by environment category
        √ should return empty array for invalid category (4 ms)
    Specific Flag Validation
      √ BRAVE flag should have correct properties (1 ms)
      √ FEARFUL flag should have correct properties (1 ms)
      √ RESILIENT flag should have correct properties

[2026-01-28 13:45:24] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:24] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:24] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:24] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:45:24] warn: [Session] Session expired due to inactivity
[2026-01-28 13:45:24] warn: [Session] Session expired due to inactivity
[2026-01-28 13:45:24] error: [Session] Error tracking session activity: Database connection error
[2026-01-28 13:45:24] warn: [Session] Too many concurrent sessions
[2026-01-28 13:45:24] info: [Session] Removed oldest sessions to enforce limit
[2026-01-28 13:45:24] warn: [Session] Too many concurrent sessions
[2026-01-28 13:45:24] info: [Session] Removed oldest sessions to enforce limit
[2026-01-28 13:45:25] warn: [Session] Too many concurrent sessions
[2026-01-28 13:45:25] info: [Session] Removed oldest sessions to enforce limit
[2026-01-28 13:45:25] error: [Session] Error enforcing concurrent sessions: Database query failed
[2026-01-28 13:45:25] error: [Session] Error fetching active sessions: Database connection lost
[2026-01-28 13:45:25] info: [Session] Session revoked by user
[2026-01-28 13:45:25] error: [Session] Error revoking session: Database connection failed
PASS __tests__/middleware/sessionManagement.test.mjs
  Session Management Middleware
    trackSessionActivity()
      √ should skip tracking for unauthenticated requests (4 ms)
      √ should skip tracking when no user ID (2 ms)
      √ should skip tracking when no refresh token cookie (50 ms)
      Active session tracking
        √ should update lastActivityAt for valid session (14 ms)
        √ should allow session within timeout window (14 minutes) (14 ms)
        √ should expire session after 15 minutes of inactivity (12 ms)
        √ should clear cookies when session expires (10 ms)
        √ should use createdAt if lastActivityAt is null (9 ms)
        √ should handle database errors gracefully (6 ms)
        √ should catch and log Prisma errors during activity tracking (12 ms)
      Custom timeout configuration
        √ should respect custom SESSION_TIMEOUT_MS (8 ms)
    enforceConcurrentSessions()
      √ should skip enforcement for unauthenticated requests (2 ms)
      √ should allow user with 1 session (7 ms)
      √ should allow user with exactly MAX_CONCURRENT_SESSIONS (5) (10 ms)
      √ should delete oldest session when limit exceeded (6 sessions) (107 ms)
      √ should delete multiple oldest sessions when far over limit (10 sessions) (163 ms)
      √ should keep most recent sessions (139 ms)
      √ should handle database errors gracefully (3 ms)
      √ should catch and log Prisma errors during session enforcement (5 ms)
      Custom limit configuration
        √ should respect custom MAX_CONCURRENT_SESSIONS (83 ms)
    addSessionSecurityHeaders()
      √ should add cache control headers (1 ms)
      √ should add pragma header (2 ms)
      √ should add expires header (1 ms)
      √ should call next() to continue middleware chain (1 ms)
    getActiveSessions()
      √ should return 401 for unauthenticated requests (7 ms)
      √ should return empty array for user with no sessions (5 ms)
      √ should return all active sessions for user (8 ms)
      √ should NOT expose token values in response (5 ms)
      √ should handle database errors (3 ms)
    revokeSession()
      √ should return 401 for unauthenticated requests (2 ms)
      √ should return 400 when sessionId missing (3 ms)
      √ should successfully revoke own session (8 ms)
      √ should return 404 when session not found (9 ms)
      √ should NOT allow revoking another user's session (8 ms)
      √ should handle database errors (3 ms)

[2026-01-28 13:45:25] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:25] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:25] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:25] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:45:25] info: [cronJobService] Initializing cron jobs...
[2026-01-28 13:45:25] info: [cronJobService] All cron jobs initialized and started
[2026-01-28 13:45:25] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 13:45:25] info: [cronJobService] Stopped job: weeklySalaries
[2026-01-28 13:45:25] info: [cronJobService] Stopped job: tokenCleanup
[2026-01-28 13:45:25] info: [cronJobService] All cron jobs stopped
[2026-01-28 13:45:25] info: [cronJobService] Initializing cron jobs...
[2026-01-28 13:45:25] info: [cronJobService] All cron jobs initialized and started
[2026-01-28 13:45:25] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 13:45:25] info: [cronJobService] Stopped job: weeklySalaries
[2026-01-28 13:45:25] info: [cronJobService] Stopped job: tokenCleanup
[2026-01-28 13:45:25] info: [cronJobService] All cron jobs stopped
[2026-01-28 13:45:25] info: [cronJobService] Initializing cron jobs...
[2026-01-28 13:45:25] info: [cronJobService] All cron jobs initialized and started
[2026-01-28 13:45:25] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 13:45:25] info: [cronJobService] Stopped job: weeklySalaries
[2026-01-28 13:45:25] info: [cronJobService] Stopped job: tokenCleanup
[2026-01-28 13:45:25] info: [cronJobService] All cron jobs stopped
[2026-01-28 13:45:25] info: [cronJobService] Initializing cron jobs...
[2026-01-28 13:45:25] info: [cronJobService] All cron jobs initialized and started
[2026-01-28 13:45:25] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 13:45:25] info: [cronJobService] Stopped job: weeklySalaries
[2026-01-28 13:45:25] info: [cronJobService] Stopped job: tokenCleanup
[2026-01-28 13:45:25] info: [cronJobService] All cron jobs stopped
[2026-01-28 13:45:25] info: [cronJobService] Initializing cron jobs...
[2026-01-28 13:45:25] info: [cronJobService] All cron jobs initialized and started
[2026-01-28 13:45:25] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 13:45:25] info: [cronJobService] Stopped job: weeklySalaries
[2026-01-28 13:45:25] info: [cronJobService] Stopped job: tokenCleanup
[2026-01-28 13:45:25] info: [cronJobService] All cron jobs stopped
[2026-01-28 13:45:25] info: [cronJobService] Initializing cron jobs...
[2026-01-28 13:45:25] info: [cronJobService] All cron jobs initialized and started
[2026-01-28 13:45:25] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 13:45:25] info: [cronJobService] Stopped job: weeklySalaries
[2026-01-28 13:45:25] info: [cronJobService] Stopped job: tokenCleanup
[2026-01-28 13:45:25] info: [cronJobService] All cron jobs stopped
[2026-01-28 13:45:25] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 13:45:25] info: [cronJobService] All cron jobs stopped
[2026-01-28 13:45:25] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 13:45:25] info: [cronJobService] All cron jobs stopped
[2026-01-28 13:45:25] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 13:45:25] info: [cronJobService] All cron jobs stopped
[2026-01-28 13:45:25] info: [cronJobService] Initializing cron jobs...
[2026-01-28 13:45:25] info: [cronJobService] All cron jobs initialized and started
[2026-01-28 13:45:25] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 13:45:25] info: [cronJobService] Stopped job: weeklySalaries
[2026-01-28 13:45:25] info: [cronJobService] Stopped job: tokenCleanup
[2026-01-28 13:45:25] info: [cronJobService] All cron jobs stopped
[2026-01-28 13:45:25] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 13:45:25] info: [cronJobService] All cron jobs stopped
[2026-01-28 13:45:25] info: [cronJobService] Initializing cron jobs...
[2026-01-28 13:45:25] info: [cronJobService] All cron jobs initialized and started
[2026-01-28 13:45:25] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 13:45:25] info: [cronJobService] Stopped job: weeklySalaries
[2026-01-28 13:45:25] info: [cronJobService] Stopped job: tokenCleanup
[2026-01-28 13:45:25] info: [cronJobService] All cron jobs stopped
[2026-01-28 13:45:25] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 13:45:25] info: [cronJobService] All cron jobs stopped
[2026-01-28 13:45:25] info: [cronJobService] Initializing cron jobs...
[2026-01-28 13:45:25] info: [cronJobService] All cron jobs initialized and started
[2026-01-28 13:45:25] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 13:45:25] info: [cronJobService] Stopped job: weeklySalaries
[2026-01-28 13:45:25] info: [cronJobService] Stopped job: tokenCleanup
[2026-01-28 13:45:25] info: [cronJobService] All cron jobs stopped
[2026-01-28 13:45:25] info: [cronJobService] Manually triggering token cleanup...
[2026-01-28 13:45:25] info: [cronJobService] Starting expired token cleanup...
[2026-01-28 13:45:25] info: [TokenRotation] Token cleanup completed
[2026-01-28 13:45:25] info: [cronJobService] Token cleanup completed. Removed 1 expired/invalidated tokens
[2026-01-28 13:45:25] info: [cronJobService] Manual token cleanup completed: {"removed":1,"expired":1,"invalidated":0,"timestamp":"2026-01-28T18:45:25.802Z"}
[2026-01-28 13:45:25] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 13:45:25] info: [cronJobService] All cron jobs stopped
[2026-01-28 13:45:25] info: [cronJobService] Manually triggering token cleanup...
[2026-01-28 13:45:25] info: [cronJobService] Starting expired token cleanup...
[2026-01-28 13:45:25] info: [TokenRotation] Token cleanup completed
[2026-01-28 13:45:25] info: [cronJobService] Token cleanup completed. Removed 0 expired/invalidated tokens
[2026-01-28 13:45:25] info: [cronJobService] Manual token cleanup completed: {"removed":0,"expired":0,"invalidated":0,"timestamp":"2026-01-28T18:45:25.820Z"}
[2026-01-28 13:45:25] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 13:45:25] info: [cronJobService] All cron jobs stopped
[2026-01-28 13:45:25] info: [cronJobService] Manually triggering token cleanup...
[2026-01-28 13:45:25] info: [cronJobService] Starting expired token cleanup...
[2026-01-28 13:45:25] info: [TokenRotation] Token cleanup completed
[2026-01-28 13:45:25] info: [cronJobService] Token cleanup completed. Removed 5 expired/invalidated tokens
[2026-01-28 13:45:25] info: [cronJobService] Manual token cleanup completed: {"removed":5,"expired":5,"invalidated":0,"timestamp":"2026-01-28T18:45:25.841Z"}
[2026-01-28 13:45:25] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 13:45:25] info: [cronJobService] All cron jobs stopped
[2026-01-28 13:45:25] info: [cronJobService] Manually triggering token cleanup...
[2026-01-28 13:45:25] info: [cronJobService] Starting expired token cleanup...
[2026-01-28 13:45:25] info: [TokenRotation] Token cleanup completed
[2026-01-28 13:45:25] info: [cronJobService] Token cleanup completed. Removed 2 expired/invalidated tokens
[2026-01-28 13:45:25] info: [cronJobService] Manual token cleanup completed: {"removed":2,"expired":2,"invalidated":0,"timestamp":"2026-01-28T18:45:25.857Z"}
[2026-01-28 13:45:25] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 13:45:25] info: [cronJobService] All cron jobs stopped
[2026-01-28 13:45:25] info: [cronJobService] Manually triggering token cleanup...
[2026-01-28 13:45:25] info: [cronJobService] Starting expired token cleanup...
[2026-01-28 13:45:25] info: [TokenRotation] Token cleanup completed
[2026-01-28 13:45:25] info: [cronJobService] Token cleanup completed. Removed 3 expired/invalidated tokens
[2026-01-28 13:45:25] info: [cronJobService] Manual token cleanup completed: {"removed":3,"expired":3,"invalidated":0,"timestamp":"2026-01-28T18:45:25.873Z"}
[2026-01-28 13:45:25] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 13:45:25] info: [cronJobService] All cron jobs stopped
[2026-01-28 13:45:25] info: [cronJobService] Manually triggering token cleanup...
[2026-01-28 13:45:25] info: [cronJobService] Starting expired token cleanup...
[2026-01-28 13:45:25] info: [TokenRotation] Token cleanup completed
[2026-01-28 13:45:25] info: [cronJobService] Token cleanup completed. Removed 0 expired/invalidated tokens
[2026-01-28 13:45:25] info: [cronJobService] Manual token cleanup completed: {"removed":0,"expired":0,"invalidated":0,"timestamp":"2026-01-28T18:45:25.888Z"}
[2026-01-28 13:45:25] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 13:45:25] info: [cronJobService] All cron jobs stopped
[2026-01-28 13:45:25] info: [cronJobService] Manually triggering token cleanup...
[2026-01-28 13:45:25] info: [cronJobService] Starting expired token cleanup...
[2026-01-28 13:45:25] info: [TokenRotation] Token cleanup completed
[2026-01-28 13:45:25] info: [cronJobService] Token cleanup completed. Removed 0 expired/invalidated tokens
[2026-01-28 13:45:25] info: [cronJobService] Manual token cleanup completed: {"removed":0,"expired":0,"invalidated":0,"timestamp":"2026-01-28T18:45:25.899Z"}
[2026-01-28 13:45:25] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 13:45:25] info: [cronJobService] All cron jobs stopped
[2026-01-28 13:45:25] info: [cronJobService] Manually triggering token cleanup...
[2026-01-28 13:45:25] info: [cronJobService] Starting expired token cleanup...
[2026-01-28 13:45:25] info: [TokenRotation] Token cleanup completed
[2026-01-28 13:45:25] info: [cronJobService] Token cleanup completed. Removed 1 expired/invalidated tokens
[2026-01-28 13:45:25] info: [cronJobService] Manual token cleanup completed: {"removed":1,"expired":1,"invalidated":0,"timestamp":"2026-01-28T18:45:25.912Z"}
[2026-01-28 13:45:25] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 13:45:25] info: [cronJobService] All cron jobs stopped
[2026-01-28 13:45:25] info: [cronJobService] Manually triggering token cleanup...
[2026-01-28 13:45:25] info: [cronJobService] Starting expired token cleanup...
[2026-01-28 13:45:25] error: [TokenRotation] Error cleaning up tokens: Database connection failed
[2026-01-28 13:45:25] error: [cronJobService] Token cleanup error: Database connection failed
[2026-01-28 13:45:25] info: [cronJobService] Manual token cleanup completed: {"removed":0,"timestamp":"2026-01-28T18:45:25.924Z","error":"Database connection failed"}
[2026-01-28 13:45:25] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 13:45:25] info: [cronJobService] All cron jobs stopped
[2026-01-28 13:45:25] info: [cronJobService] Initializing cron jobs...
[2026-01-28 13:45:25] info: [cronJobService] All cron jobs initialized and started
[2026-01-28 13:45:25] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 13:45:25] info: [cronJobService] Stopped job: weeklySalaries
[2026-01-28 13:45:25] info: [cronJobService] Stopped job: tokenCleanup
[2026-01-28 13:45:25] info: [cronJobService] All cron jobs stopped
[2026-01-28 13:45:25] info: [cronJobService] Initializing cron jobs...
[2026-01-28 13:45:25] info: [cronJobService] All cron jobs initialized and started
[2026-01-28 13:45:25] info: [cronJobService] Starting expired token cleanup...
[2026-01-28 13:45:25] info: [TokenRotation] Token cleanup completed
[2026-01-28 13:45:25] info: [cronJobService] Token cleanup completed. Removed 1 expired/invalidated tokens
[2026-01-28 13:45:25] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 13:45:25] info: [cronJobService] Stopped job: weeklySalaries
[2026-01-28 13:45:25] info: [cronJobService] Stopped job: tokenCleanup
[2026-01-28 13:45:25] info: [cronJobService] All cron jobs stopped
[2026-01-28 13:45:25] info: [cronJobService] Manually triggering token cleanup...
[2026-01-28 13:45:25] info: [cronJobService] Starting expired token cleanup...
[2026-01-28 13:45:25] info: [TokenRotation] Token cleanup completed
[2026-01-28 13:45:25] info: [cronJobService] Token cleanup completed. Removed 0 expired/invalidated tokens
[2026-01-28 13:45:25] info: [cronJobService] Manual token cleanup completed: {"removed":0,"expired":0,"invalidated":0,"timestamp":"2026-01-28T18:45:25.958Z"}
[2026-01-28 13:45:25] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 13:45:25] info: [cronJobService] All cron jobs stopped
[2026-01-28 13:45:25] info: [cronJobService] Manually triggering token cleanup...
[2026-01-28 13:45:25] info: [cronJobService] Starting expired token cleanup...
[2026-01-28 13:45:25] info: [cronJobService] Manually triggering token cleanup...
[2026-01-28 13:45:25] info: [cronJobService] Starting expired token cleanup...
[2026-01-28 13:45:25] info: [TokenRotation] Token cleanup completed
[2026-01-28 13:45:25] info: [cronJobService] Token cleanup completed. Removed 10 expired/invalidated tokens
[2026-01-28 13:45:25] info: [cronJobService] Manual token cleanup completed: {"removed":10,"expired":10,"invalidated":0,"timestamp":"2026-01-28T18:45:25.983Z"}
[2026-01-28 13:45:26] info: [TokenRotation] Token cleanup completed
[2026-01-28 13:45:26] info: [cronJobService] Token cleanup completed. Removed 0 expired/invalidated tokens
[2026-01-28 13:45:26] info: [cronJobService] Manual token cleanup completed: {"removed":0,"expired":0,"invalidated":0,"timestamp":"2026-01-28T18:45:26.026Z"}
[2026-01-28 13:45:26] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 13:45:26] info: [cronJobService] All cron jobs stopped
[2026-01-28 13:45:26] info: [cronJobService] Manually triggering token cleanup...
[2026-01-28 13:45:26] info: [cronJobService] Starting expired token cleanup...
[2026-01-28 13:45:26] info: [TokenRotation] Token cleanup completed
[2026-01-28 13:45:26] info: [cronJobService] Token cleanup completed. Removed 1 expired/invalidated tokens
[2026-01-28 13:45:26] info: [cronJobService] Manual token cleanup completed: {"removed":1,"expired":1,"invalidated":0,"timestamp":"2026-01-28T18:45:26.041Z"}
[2026-01-28 13:45:26] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 13:45:26] info: [cronJobService] All cron jobs stopped
[2026-01-28 13:45:26] info: [cronJobService] Manually triggering token cleanup...
[2026-01-28 13:45:26] info: [cronJobService] Starting expired token cleanup...
[2026-01-28 13:45:26] info: [TokenRotation] Token cleanup completed
[2026-01-28 13:45:26] info: [cronJobService] Token cleanup completed. Removed 0 expired/invalidated tokens
[2026-01-28 13:45:26] info: [cronJobService] Manual token cleanup completed: {"removed":0,"expired":0,"invalidated":0,"timestamp":"2026-01-28T18:45:26.055Z"}
[2026-01-28 13:45:26] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 13:45:26] info: [cronJobService] All cron jobs stopped
[2026-01-28 13:45:26] info: [cronJobService] Manually triggering token cleanup...
[2026-01-28 13:45:26] info: [cronJobService] Starting expired token cleanup...
[2026-01-28 13:45:26] info: [TokenRotation] Token cleanup completed
[2026-01-28 13:45:26] info: [cronJobService] Token cleanup completed. Removed 100 expired/invalidated tokens
[2026-01-28 13:45:26] info: [cronJobService] Manual token cleanup completed: {"removed":100,"expired":100,"invalidated":0,"timestamp":"2026-01-28T18:45:26.260Z"}
[2026-01-28 13:45:26] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 13:45:26] info: [cronJobService] All cron jobs stopped
PASS __tests__/services/cronJobService.test.mjs
  Cron Job Service
    initializeCronJobs()
      √ should initialize weekly salary job (16 ms)
      √ should initialize token cleanup job (8 ms)
      √ should start all jobs after initialization (6 ms)
      √ should initialize exactly 2 cron jobs (11 ms)
      √ should use UTC timezone for all jobs (7 ms)
    stopCronJobs()
      √ should stop all running jobs (10 ms)
      √ should handle stopping when no jobs initialized (5 ms)
      √ should clear all job references (8 ms)
    getCronJobStatus()
      √ should return status for all initialized jobs (12 ms)
      √ should return empty status when no jobs initialized (4 ms)
      √ should include running and scheduled flags (6 ms)
    triggerTokenCleanup() - Manual Execution
      √ should remove expired tokens (67 ms)
      √ should NOT remove valid tokens (15 ms)
      √ should remove multiple expired tokens (19 ms)
      √ should remove expired tokens for all users (15 ms)
      √ should remove only expired tokens from mixed set (19 ms)
      √ should return timestamp of cleanup (13 ms)
      √ should handle cleanup when no expired tokens exist (10 ms)
      √ should handle tokens expiring at exact current time (13 ms)
      √ should include error message on failure (12 ms)
    Token Cleanup Scheduling
      √ should schedule daily cleanup at 3 AM UTC (10 ms)
      √ should execute token cleanup callback when triggered (14 ms)
    Edge Cases
      √ should handle tokens with null expiresAt (should not crash) (8 ms)
      √ should handle concurrent cleanup executions (70 ms)
      √ should handle very old expired tokens (13 ms)
      √ should handle tokens expiring in the future (14 ms)
    Performance
      √ should efficiently remove large number of expired tokens (205 ms)

[2026-01-28 13:45:26] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:26] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:26] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:26] info: [envValidator] Test environment validation complete. Success: true
PASS tests/applyEpigeneticTraitsAtBirth.test.mjs
  🧬 UNIT: Apply Epigenetic Traits At Birth - Breeding Condition Analysis
    Input Validation
      √ should throw error when mare is not provided (7 ms)
      √ should handle missing optional parameters (2 ms)
    Low Stress and Premium Feed Conditions
      √ should assign resilient trait with low stress and premium feed (2 ms)
      √ should assign peopleTrusting trait with low stress and premium feed (6 ms)
      √ should not assign positive traits with high stress (1 ms)
      √ should not assign positive traits with poor feed quality (1 ms)
    Inbreeding Detection and Negative Traits
      √ should assign fragile trait with high inbreeding (2 ms)
      √ should assign reactive trait with moderate inbreeding (1 ms)
      √ should assign low_immunity trait with inbreeding (1 ms)
      √ should not assign inbreeding traits without common ancestors (2 ms)
    Discipline Specialization
      √ should assign discipline affinity trait with 3+ ancestors in same discipline (1 ms)
      √ should assign legacy_talent trait with 4+ ancestors in same discipline (1 ms)
      √ should use disciplineScores when discipline field is not available (1 ms)
      √ should not assign discipline traits without sufficient specialization (1 ms)
    Additional Stress and Nutrition Effects
      √ should assign nervous trait with very high mare stress (1 ms)
      √ should assign low_immunity trait with poor nutrition (1 ms)
      √ should not duplicate traits (6 ms)
    Return Value Structure
      √ should return object with positive and negative arrays (2 ms)
      √ should handle empty lineage gracefully (1 ms)
      √ should handle null lineage gracefully (2 ms)

[2026-01-28 13:45:26] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:26] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:26] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:26] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:45:27] info: [UserDocService] Loaded 1 documentation files
[2026-01-28 13:45:27] info: [UserDocService] Built search index with 34 terms
[2026-01-28 13:45:27] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 13:45:27] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 13:45:27] info: [UserDocService] Built search index with 111 terms
[2026-01-28 13:45:27] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 13:45:27] info: [UserDocRoutes] Getting all documentation list
[2026-01-28 13:45:27] info: [UserDocRoutes] Getting all documentation list
[2026-01-28 13:45:27] info: [UserDocRoutes] Searching documentation for: "horse training"
[2026-01-28 13:45:27] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 13:45:27] info: [UserDocRoutes] Searching documentation for: "nonexistentterm12345"
[2026-01-28 13:45:27] info: [UserDocRoutes] Getting document: feature-guide
[2026-01-28 13:45:27] info: [UserDocRoutes] Getting document: strategy-guide
[2026-01-28 13:45:27] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 13:45:27] info: [UserDocRoutes] Getting documentation analytics
[2026-01-28 13:45:27] info: [UserDocRoutes] Getting table of contents
[2026-01-28 13:45:27] info: [UserDocRoutes] Getting document: feature-guide
[2026-01-28 13:45:27] info: [UserDocRoutes] Getting document: non-existent
[2026-01-28 13:45:27] warn: [UserDocService] Document not found: non-existent
[2026-01-28 13:45:27] info: [UserDocRoutes] Getting document: feature-guide
[2026-01-28 13:45:27] info: [UserDocRoutes] Getting document: feature-guide
[2026-01-28 13:45:27] info: [UserDocRoutes] Getting document: feature-guide
[2026-01-28 13:45:27] info: [UserDocRoutes] Getting document: feature-guide
[2026-01-28 13:45:27] info: [UserDocRoutes] Getting document: feature-guide
[2026-01-28 13:45:27] info: [UserDocRoutes] Getting sections for document: feature-guide
[2026-01-28 13:45:27] info: [UserDocRoutes] Getting sections for document: non-existent
[2026-01-28 13:45:27] warn: [UserDocService] Document not found: non-existent
[2026-01-28 13:45:27] info: [UserDocRoutes] Searching in document "feature-guide" for: "training"
[2026-01-28 13:45:27] info: [UserDocRoutes] Searching in document "feature-guide" for: "horse"
[2026-01-28 13:45:27] info: [UserDocRoutes] Searching in document "non-existent" for: "test"
[2026-01-28 13:45:27] warn: [UserDocService] Document not found: non-existent
[2026-01-28 13:45:27] info: [UserDocRoutes] Refreshing documentation cache
[2026-01-28 13:45:27] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 13:45:27] info: [UserDocService] Built search index with 111 terms
[2026-01-28 13:45:27] info: [UserDocService] Documentation refreshed successfully
[2026-01-28 13:45:27] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 13:45:27] info: [UserDocRoutes] Searching documentation for: "training"
[2026-01-28 13:45:27] info: [UserDocRoutes] Searching documentation for: "competition"
[2026-01-28 13:45:27] info: [UserDocRoutes] Getting documentation analytics
[2026-01-28 13:45:27] info: [UserDocRoutes] Getting document: feature-guide
[2026-01-28 13:45:27] info: [UserDocRoutes] Getting document: feature-guide
[2026-01-28 13:45:27] info: [UserDocRoutes] Getting document: strategy-guide
[2026-01-28 13:45:27] info: [UserDocRoutes] Getting documentation analytics
[2026-01-28 13:45:27] info: [UserDocRoutes] Getting document: feature-guide
[2026-01-28 13:45:27] info: [UserDocRoutes] Getting document: feature-guide
PASS __tests__/routes/userDocumentationRoutes.test.mjs
  User Documentation Routes
    GET /api/user-docs
      √ retrieves all documentation successfully (44 ms)
      √ includes table of contents in response (12 ms)
    GET /api/user-docs/search
      √ searches documentation successfully (20 ms)
      √ validates search query parameter (11 ms)
      √ respects search parameters (15 ms)
      √ handles empty search results (20 ms)
    GET /api/user-docs/analytics
      √ retrieves analytics successfully (68 ms)
    GET /api/user-docs/toc
      √ retrieves table of contents successfully (22 ms)
    GET /api/user-docs/:docName
      √ retrieves specific document successfully (18 ms)
      √ returns 404 for non-existent document (16 ms)
      √ serves markdown format correctly (12 ms)
      √ serves text format correctly (15 ms)
      √ tracks view analytics (37 ms)
    GET /api/user-docs/:docName/sections
      √ retrieves document sections successfully (12 ms)
      √ returns 404 for non-existent document sections (15 ms)
    GET /api/user-docs/:docName/search
      √ searches within specific document successfully (11 ms)
      √ validates search query for document search (9 ms)
      √ highlights search terms in document search (13 ms)
      √ returns 404 for document search on non-existent document (10 ms)
    POST /api/user-docs/refresh
      √ refreshes documentation cache successfully (19 ms)
    GET /api/user-docs/health
      √ returns system health status (10 ms)
    Error Handling
      √ handles invalid route gracefully (11 ms)
      √ handles malformed search parameters (13 ms)
    Integration with Documentation Service
      √ search analytics are tracked across API calls (41 ms)
      √ view analytics are tracked across API calls (45 ms)
      √ document content is consistent across different endpoints (25 ms)

[2026-01-28 13:45:27] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:27] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:27] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:27] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:45:28] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:28] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:28] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:28] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:28] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:28] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:28] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:28] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:28] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:28] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:45:28] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 13:45:28] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 13:45:28] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 13:45:28] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 13:45:28] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
PASS __tests__/integration/security/rate-limit-enforcement.test.mjs
  Rate Limit Enforcement Integration Tests
    √ should pass a dummy test with app (2 ms)

[2026-01-28 13:45:28] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:28] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:28] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:28] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:45:29] warn: [ResourceManagement] Slow request detected: GET /test-slow took 12ms
[2026-01-28 13:45:29] warn: [MemoryMonitoring] Memory threshold exceeded: 2328MB
[2026-01-28 13:45:29] warn: [MemoryMonitoring] Memory threshold exceeded: 2320MB
[2026-01-28 13:45:29] warn: [DatabaseMonitoring] High query count: 15 queries in 2ms for GET /test-many-queries
[2026-01-28 13:45:29] warn: [ResourceManagement] Request timeout: GET /test-timeout
[2026-01-28 13:45:29] warn: [MemoryMonitoring] Memory threshold exceeded: 2320MB
[2026-01-28 13:45:29] warn: [MemoryMonitoring] Memory threshold exceeded: 2326MB
[2026-01-28 13:45:29] warn: [ResourceManagement] Slow request detected: GET /test-thresholds took 6ms
[2026-01-28 13:45:29] warn: [ResourceManagement] High memory usage: GET /test-thresholds used 1MB
PASS __tests__/middleware/resourceManagement.test.mjs
  Resource Management Middleware
    Resource Management Middleware
      √ adds resource tracking helpers to request (35 ms)
      √ tracks and cleans up timers automatically (20 ms)
      √ adds performance headers to response (24 ms)
      √ handles request errors gracefully (119 ms)
      √ tracks memory usage per request (18 ms)
      √ warns about slow requests (24 ms)
    Memory Monitoring Middleware
      √ adds memory headers to response (15 ms)
      √ handles memory threshold checking (19 ms)
      √ triggers GC when enabled and threshold exceeded (4 ms)
    Database Connection Middleware
      √ tracks database queries (24 ms)
      √ warns about high query counts (19 ms)
      √ restores original methods after request (129 ms)
    Request Timeout Middleware
      √ handles normal requests without timeout (13 ms)
      √ times out slow requests (117 ms)
      √ tracks timeout timer as resource (12 ms)
      √ cleans up timeout timer on completion (10 ms)
    Middleware Integration
      √ multiple middleware work together correctly (15 ms)
      √ handles errors across middleware stack (13 ms)
    Configuration Options
      √ respects disabled tracking options (15 ms)
      √ uses custom thresholds correctly (16 ms)

[2026-01-28 13:45:29] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:29] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:29] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:29] info: [envValidator] Test environment validation complete. Success: true
PASS tests/integration/foalAuthRoutes.test.mjs
  Foal routes auth enforcement
    √ rejects unauthenticated access to foal development (24 ms)
    √ rejects unauthenticated access to foal enrichment (20 ms)
    √ rejects unauthenticated access to foal activity (17 ms)
    √ rejects unauthenticated access to advance-day (10 ms)
    √ rate limits foal activity endpoints (46 ms)
    √ rate limits foal enrichment endpoints (43 ms)
    √ rejects access to foal development when not owned (13 ms)

[2026-01-28 13:45:30] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:30] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:30] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:30] info: [envValidator] Test environment validation complete. Success: true
PASS tests/groomHiringWorkflow.test.mjs
  Groom Hiring Workflow Tests
    1. Required Field Validation
      √ should validate name is required (83 ms)
      √ should validate speciality is required (13 ms)
      √ should validate skill_level is required (10 ms)
      √ should validate personality is required (10 ms)
      √ should validate all required fields at once (10 ms)
    2. Field Value Validation
      √ should validate speciality against defined values (13 ms)
      √ should validate skill_level against defined values (9 ms)
      √ should validate personality against defined values (8 ms)
      √ should accept all valid speciality values (47 ms)
      √ should accept all valid skill_level values (35 ms)
      √ should accept all valid personality values (38 ms)
    3. Optional Field Handling
      √ should use default experience value when not provided (13 ms)
      √ should calculate session rate based on skill level when not provided (15 ms)
      √ should use provided session rate when specified (16 ms)
      √ should store bio when provided (14 ms)
      √ should store availability when provided (16 ms)
    4. User Account Hiring Limits
      √ should enforce maximum groom limit per user (89 ms)
      √ should validate user has sufficient funds for hiring (10 ms)
      √ should allow wealthy users to hire expensive grooms (24 ms)
    5. Error Handling & Edge Cases
      √ should handle empty strings for required fields (18 ms)
      √ should handle extremely long names (14 ms)
      √ should handle negative experience values (11 ms)
      √ should handle negative session rates (11 ms)
      √ should handle missing user ID (11 ms)
    6. System Integration
      √ should retrieve groom definitions with all required data (15 ms)

[2026-01-28 13:45:31] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:31] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:31] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:31] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:45:31] info: [facilityManagementService.getUserFacilities] Getting facilities for user 1fa8c340-c083-43fd-9dc6-2705bae169b2
[2026-01-28 13:45:31] info: [facilityManagementService.getUserFacilities] Getting facilities for user b3864f9b-7709-487d-b74d-31649922c7d0
[2026-01-28 13:45:31] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for advanced_training upgrade from 1 to 3
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for invalid_upgrade upgrade from 1 to 2
[2026-01-28 13:45:32] error: [facilityManagementService.calculateUpgradeCost] Error: Invalid upgrade type: invalid_upgrade
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for advanced_training upgrade from 5 to 3
[2026-01-28 13:45:32] error: [facilityManagementService.calculateUpgradeCost] Error: Target level must be higher than current level
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for medical_center upgrade from 1 to 2
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for medical_center upgrade from 2 to 3
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for medical_center upgrade from 3 to 4
[2026-01-28 13:45:32] info: [facilityManagementService.purchaseFacilityUpgrade] User 99496e3c-7bf8-47ed-8c8e-09d2332a45a4 purchasing automated_care upgrade to level 2
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for automated_care upgrade from 0 to 2
[2026-01-28 13:45:32] info: [facilityManagementService.purchaseFacilityUpgrade] User a8806d86-fc5d-4359-aba3-87aeaa6ad135 purchasing competition_hosting upgrade to level 3
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for competition_hosting upgrade from 0 to 3
[2026-01-28 13:45:32] info: [facilityManagementService.purchaseFacilityUpgrade] User 5a194ea9-f8de-40ad-a22b-fb1f6dd3a706 purchasing ventilation upgrade to level 2
[2026-01-28 13:45:32] info: [facilityManagementService.assessFacilityEffectiveness] Assessing facility 9826
[2026-01-28 13:45:32] info: [facilityManagementService.assessFacilityEffectiveness] Assessing facility 9828
[2026-01-28 13:45:32] info: [facilityManagementService.generateFacilityRecommendations] Generating recommendations for user 37cfde5e-5369-4623-b6d3-69755895c453
[2026-01-28 13:45:32] info: [facilityManagementService.getUserFacilities] Getting facilities for user 37cfde5e-5369-4623-b6d3-69755895c453
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for advanced_training upgrade from 1 to 2
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for recovery_center upgrade from 0 to 1
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for specialized_grounds upgrade from 0 to 1
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for automated_care upgrade from 0 to 1
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for medical_center upgrade from 0 to 1
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for feed_laboratory upgrade from 0 to 1
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for breeding_optimization upgrade from 0 to 1
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for genetic_analysis upgrade from 0 to 1
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for foal_development upgrade from 0 to 1
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for stable_management upgrade from 1 to 2
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for competition_hosting upgrade from 0 to 1
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for prestige_stable upgrade from 0 to 1
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for tack_workshop upgrade from 0 to 1
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for visitor_center upgrade from 0 to 1
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for advanced_training upgrade from 3 to 4
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for recovery_center upgrade from 0 to 1
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for specialized_grounds upgrade from 0 to 1
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for automated_care upgrade from 2 to 3
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for medical_center upgrade from 2 to 3
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for feed_laboratory upgrade from 0 to 1
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for breeding_optimization upgrade from 0 to 1
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for genetic_analysis upgrade from 0 to 1
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for foal_development upgrade from 0 to 1
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for stable_management upgrade from 3 to 4
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for competition_hosting upgrade from 1 to 2
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for prestige_stable upgrade from 0 to 1
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for tack_workshop upgrade from 0 to 1
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for visitor_center upgrade from 0 to 1
[2026-01-28 13:45:32] info: [facilityManagementService.generateFacilityRecommendations] Generating recommendations for user 5e72a01a-df00-4072-b7d2-a6454c0b4632
[2026-01-28 13:45:32] info: [facilityManagementService.getUserFacilities] Getting facilities for user 5e72a01a-df00-4072-b7d2-a6454c0b4632
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for advanced_training upgrade from 1 to 2
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for recovery_center upgrade from 0 to 1
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for specialized_grounds upgrade from 0 to 1
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for automated_care upgrade from 0 to 1
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for medical_center upgrade from 0 to 1
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for feed_laboratory upgrade from 0 to 1
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for breeding_optimization upgrade from 0 to 1
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for genetic_analysis upgrade from 0 to 1
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for foal_development upgrade from 0 to 1
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for stable_management upgrade from 1 to 2
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for competition_hosting upgrade from 0 to 1
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for prestige_stable upgrade from 0 to 1
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for tack_workshop upgrade from 0 to 1
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for visitor_center upgrade from 0 to 1
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for advanced_training upgrade from 3 to 4
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for recovery_center upgrade from 0 to 1
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for specialized_grounds upgrade from 0 to 1
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for automated_care upgrade from 2 to 3
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for medical_center upgrade from 2 to 3
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for feed_laboratory upgrade from 0 to 1
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for breeding_optimization upgrade from 0 to 1
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for genetic_analysis upgrade from 0 to 1
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for foal_development upgrade from 0 to 1
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for stable_management upgrade from 3 to 4
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for competition_hosting upgrade from 1 to 2
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for prestige_stable upgrade from 0 to 1
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for tack_workshop upgrade from 0 to 1
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for visitor_center upgrade from 0 to 1
[2026-01-28 13:45:32] info: [facilityManagementService.calculateMaintenanceCosts] Calculating maintenance for facility 9834
[2026-01-28 13:45:32] info: [facilityManagementService.purchaseFacilityUpgrade] User 5184c553-ee78-4aa6-9877-1a4fe8e40fbf purchasing stable_management upgrade to level 2
[2026-01-28 13:45:32] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for stable_management upgrade from 1 to 2
[2026-01-28 13:45:32] info: [facilityManagementService.getFacilityUpgradeHistory] Getting history for facility 9835
[2026-01-28 13:45:32] info: [facilityManagementService.calculateFacilityROI] Calculating ROI for facility 9838
[2026-01-28 13:45:32] info: [facilityManagementService.getFacilityUpgradeHistory] Getting history for facility 9838
[2026-01-28 13:45:32] info: [facilityManagementService.calculateFacilityROI] Calculating ROI for facility 9840
[2026-01-28 13:45:32] info: [facilityManagementService.getFacilityUpgradeHistory] Getting history for facility 9840
PASS tests/unit/facilityManagementSystem.test.mjs
  🏢 Facility Management System
    🏗️ Facility Types and Configuration
      √ should return available facility types with specifications (83 ms)
      √ should include different facility categories (14 ms)
    👤 User Facility Management
      √ should retrieve user facilities with current status (19 ms)
      √ should calculate environmental mitigation for facilities (15 ms)
    💰 Upgrade Cost Calculation
      √ should calculate upgrade costs accurately (15 ms)
      √ should handle invalid upgrade parameters (19 ms)
      √ should calculate progressive cost increases (16 ms)
    🛒 Facility Upgrade Purchase
      √ should successfully purchase valid upgrades (25 ms)
      √ should reject upgrades with insufficient funds (16 ms)
      √ should reject invalid facility ownership (21 ms)
    🌿 Environmental Mitigation
      √ should calculate environmental mitigation effects (10 ms)
      √ should provide better mitigation for higher-level facilities (9 ms)
    📊 Facility Effectiveness Assessment
      √ should assess facility effectiveness comprehensively (14 ms)
      √ should provide upgrade-specific effectiveness ratings (16 ms)
    💡 Facility Recommendations
      √ should generate actionable facility recommendations (48 ms)
      √ should prioritize recommendations based on cost-benefit analysis (39 ms)
    🔧 Maintenance and Operations
      √ should calculate maintenance costs accurately (14 ms)
      √ should track facility upgrade history (25 ms)
    📈 Return on Investment Analysis
      √ should calculate facility ROI accurately (15 ms)
      √ should provide benefit breakdown by category (18 ms)

[2026-01-28 13:45:32] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:32] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:32] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:32] info: [envValidator] Test environment validation complete. Success: true
PASS tests/foalTaskLogStreakData.test.mjs
  Foal Task Log and Streak Data
    Task Log JSON Storage
      √ should initialize with null task log (86 ms)
      √ should store task log as JSON object (24 ms)
      √ should handle empty task log object (22 ms)
      √ should update existing task counts (22 ms)
      √ should handle complex task log with all foal tasks (20 ms)
    Consecutive Days Foal Care Tracking
      √ should initialize with zero consecutive days (15 ms)
      √ should track consecutive days of care (19 ms)
      √ should handle streak increments (18 ms)
      √ should handle streak resets (16 ms)
      √ should support high streak counts (15 ms)
    Last Care Date Tracking
      √ should initialize with null last groomed date (15 ms)
      √ should store last care date timestamp (16 ms)
      √ should update last care date on subsequent care (19 ms)
      √ should handle current timestamp updates (18 ms)
    Combined Task Log and Streak Data
      √ should update all foal care fields together (22 ms)
      √ should simulate realistic foal development progression (19 ms)
      √ should handle streak reset with task log preservation (19 ms)
    Data Integrity and Edge Cases
      √ should handle null values gracefully (17 ms)
      √ should handle negative consecutive days (should not occur in practice) (14 ms)
      √ should handle very large task counts (17 ms)
      √ should preserve data types correctly (17 ms)

[2026-01-28 13:45:33] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:33] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:33] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:33] info: [envValidator] Test environment validation complete. Success: true
PASS tests/services/environmentalTriggerSystem.test.mjs
  Environmental Trigger System
    detectEnvironmentalTriggers
      √ should detect environmental triggers from interaction patterns (57 ms)
      √ should handle horses with no environmental exposure (3 ms)
      √ should detect multiple environmental trigger types (5 ms)
    calculateTriggerThresholds
      √ should calculate age-appropriate trigger thresholds (5 ms)
      √ should apply stress-based threshold modifications (4 ms)
    evaluateTraitExpressionProbability
      √ should calculate trait expression probability based on environmental exposure (9 ms)
      √ should handle trait expression for different trait types (15 ms)
    processSeasonalTriggers
      √ should process seasonal environmental triggers (3 ms)
      √ should handle different seasonal variations (5 ms)
    analyzeStressEnvironmentTriggers
      √ should analyze stress-based environmental triggers (7 ms)
    trackCumulativeExposure
      √ should track cumulative environmental exposure over time (7 ms)
    assessCriticalPeriodSensitivity
      √ should assess critical period environmental sensitivity (3 ms)
      √ should show reduced sensitivity for older horses (3 ms)
    generateEnvironmentalReport
      √ should generate comprehensive environmental analysis report (228 ms)

[2026-01-28 13:45:34] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:34] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:34] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:34] info: [envValidator] Test environment validation complete. Success: true
PASS tests/services/developmentalWindowSystem.test.mjs
  Developmental Window System
    identifyDevelopmentalWindows
      √ should identify active developmental windows for newborn foal (6 ms)
      √ should identify multiple active windows for appropriate ages (4 ms)
      √ should show closed windows for older foals (12 ms)
    calculateWindowSensitivity
      √ should calculate high sensitivity for critical periods (3 ms)
      √ should calculate reduced sensitivity outside critical periods (3 ms)
      √ should apply environmental modifiers correctly (4 ms)
    evaluateTraitDevelopmentOpportunity
      √ should evaluate trait development opportunities during active windows (6 ms)
      √ should show higher opportunities for window-aligned traits (7 ms)
      √ should provide appropriate recommendations (4 ms)
    trackDevelopmentalMilestones
      √ should track developmental milestones with interactions (12 ms)
      √ should show progression over time (4 ms)
    assessWindowClosure
      √ should assess window closure effects (5 ms)
      √ should show open status for active windows (2 ms)
      √ should identify compensatory mechanisms for closed windows (3 ms)
    coordinateMultiWindowDevelopment
      √ should coordinate development across multiple windows (3 ms)
      √ should identify window conflicts and resolutions (2 ms)
    analyzeCriticalPeriodSensitivity
      √ should analyze critical period sensitivity comprehensively (14 ms)
      √ should identify age-appropriate risk factors (10 ms)
    generateDevelopmentalForecast
      √ should generate comprehensive developmental forecast (4 ms)
      √ should project trait development accurately (4 ms)
      √ should provide actionable recommendations (3 ms)

[2026-01-28 13:45:35] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:35] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:35] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:35] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:45:35] info: Found 3 horses eligible for flag evaluation
[2026-01-28 13:45:35] info: Found 3 horses eligible for flag evaluation
[2026-01-28 13:45:35] info: Flag insecure triggered for horse Test Foal Week 1769625935447: Frequent groom changes with declining bond or neglect
[2026-01-28 13:45:35] info: Flag aloof triggered for horse Test Foal Week 1769625935447: Generic negative flag evaluation
[2026-01-28 13:45:35] info: Flag skittish triggered for horse Test Foal Week 1769625935447: Generic negative flag evaluation
[2026-01-28 13:45:35] info: Assigned 3 new flags to horse Test Foal Week 1769625935447: insecure, aloof, skittish
[2026-01-28 13:45:35] info: Starting weekly flag evaluation process
[2026-01-28 13:45:35] info: Found 3 horses eligible for flag evaluation
[2026-01-28 13:45:35] info: Flag aloof triggered for horse Test Horse 2yo 1769625935448: Generic negative flag evaluation
[2026-01-28 13:45:35] info: Flag skittish triggered for horse Test Horse 2yo 1769625935448: Generic negative flag evaluation
[2026-01-28 13:45:35] info: Assigned 2 new flags to horse Test Horse 2yo 1769625935448: aloof, skittish
[2026-01-28 13:45:35] info: Flag aloof triggered for horse Test Foal Month 1769625935448: Generic negative flag evaluation
[2026-01-28 13:45:35] info: Flag skittish triggered for horse Test Foal Month 1769625935448: Generic negative flag evaluation
[2026-01-28 13:45:35] info: Assigned 2 new flags to horse Test Foal Month 1769625935448: aloof, skittish
[2026-01-28 13:45:35] info: Weekly flag evaluation completed: 4 flags assigned to 3 horses
[2026-01-28 13:45:35] info: Starting weekly flag evaluation process
[2026-01-28 13:45:35] info: Found 3 horses eligible for flag evaluation
[2026-01-28 13:45:35] info: Weekly flag evaluation completed: 0 flags assigned to 3 horses
PASS tests/services/weeklyFlagEvaluationService.test.mjs
  Weekly Flag Evaluation Service
    getEligibleHorsesForFlagEvaluation
      √ should return only horses under 3 years old (10 ms)
      √ should include horses with existing flags (6 ms)
    processHorseForFlagEvaluation
      √ should evaluate horse for new flags based on care patterns (28 ms)
      √ should respect maximum 5 flags per horse limit (17 ms)
    evaluateWeeklyFlags
      √ should process all eligible horses and return summary (41 ms)
      √ should handle horses with no groom interactions gracefully (29 ms)

[2026-01-28 13:45:35] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:35] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:35] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:35] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:45:36] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:36] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:36] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:36] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:36] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:36] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:36] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:36] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:36] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:36] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 13:45:36] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 13:45:36] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 13:45:36] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 13:45:36] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 13:45:36] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 13:45:36] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 13:45:36] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 13:45:36] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 13:45:36] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 13:45:36] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 13:45:36] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 13:45:36] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 13:45:36] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 13:45:36] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 13:45:36] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 13:45:36] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 13:45:36] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 13:45:36] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 13:45:36] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 13:45:36] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 13:45:36] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 13:45:36] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 13:45:36] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 13:45:36] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 13:45:36] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 13:45:36] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 13:45:36] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 13:45:36] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 13:45:36] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 13:45:36] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 13:45:36] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 13:45:36] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 13:45:36] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 13:45:36] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 13:45:36] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 13:45:36] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 13:45:36] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 13:45:36] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 13:45:36] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 13:45:36] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 13:45:36] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 13:45:36] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 13:45:36] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 13:45:36] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 13:45:36] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 13:45:36] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 13:45:36] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 13:45:36] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
PASS __tests__/unit/auth-rate-limiter.test.mjs
  Authentication Rate Limiter (Unit)
    Rate Limiter Configuration
      √ should_create_rate_limiter_with_default_config (4 ms)
      √ should_create_rate_limiter_with_custom_config (2 ms)
      √ should_validate_configuration_parameters (3 ms)
    Request Tracking
      √ should_track_requests_by_ip_address (3 ms)
      √ should_allow_requests_within_limit (8 ms)
      √ should_block_requests_exceeding_limit (3 ms)
    Rate Limit Headers
      √ should_set_ratelimit_headers_on_every_request (3 ms)
      √ should_update_remaining_count_with_each_request (2 ms)
      √ should_calculate_accurate_reset_timestamp (3 ms)
    Time Window Reset
      √ should_reset_count_after_time_window (3 ms)
      √ should_maintain_separate_windows_for_different_ips (2 ms)
    Success Reset Mechanism
      √ should_reset_count_on_successful_authentication (3 ms)
      √ should_provide_method_to_reset_specific_ip (6 ms)
    Error Handling
      √ should_handle_missing_ip_address (2 ms)
      √ should_handle_concurrent_requests_atomically (2 ms)
      √ should_not_crash_on_invalid_configuration (3 ms)
    Memory Management
      √ should_clean_up_expired_entries (2 ms)
      √ should_have_configurable_cleanup_interval (3 ms)
      √ should_limit_maximum_storage_size (2 ms)
    Integration with Express
      √ should_work_as_express_middleware (3 ms)
      √ should_call_next_when_within_limit (6 ms)
      √ should_not_call_next_when_rate_limited (4 ms)
    Response Format
      √ should_send_consistent_429_response_format (2 ms)
      √ should_include_retry_after_in_seconds (3 ms)

[2026-01-28 13:45:36] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:36] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:36] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:36] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:45:36] info: Created legacy protégé Young Apprentice (ID: 73539) from mentor Retired Master Groom 1769625936804 (ID: 73538)
[2026-01-28 13:45:36] info: Inherited perk: Patience Mastery
[2026-01-28 13:45:36] error: Error generating legacy protégé for mentor 73541: Mentor groom 73541 is not eligible for legacy creation: insufficient_level
[2026-01-28 13:45:36] info: Created legacy protégé History Test Apprentice (ID: 73545) from mentor Retired Master Groom 1769625936891 (ID: 73544)
[2026-01-28 13:45:36] info: Inherited perk: Empathic Sync
PASS tests/services/groomLegacyService.test.mjs
  Groom Legacy Service
    Legacy Eligibility
      √ should identify eligible retired groom (81 ms)
      √ should reject non-retired groom (32 ms)
      √ should reject low-level retired groom (20 ms)
      √ should reject groom with existing legacy (28 ms)
    Protégé Generation
      √ should generate protégé with inherited perks (30 ms)
      √ should reject generation for ineligible mentor (26 ms)
    Legacy Perks
      √ should get available perks for personality type (19 ms)
      √ should handle unknown personality type (13 ms)
    Legacy History
      √ should track user legacy history (30 ms)

[2026-01-28 13:45:37] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:37] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:37] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:37] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:45:37] info: [advancedLineageAnalysisService.generateLineageTree] Generating tree for stallion 147033 and mare 147034, 3 generations
[2026-01-28 13:45:37] info: [advancedLineageAnalysisService.generateLineageTree] Generated tree with 2 horses across 1 generations
[2026-01-28 13:45:37] info: [advancedLineageAnalysisService.generateLineageTree] Generating tree for stallion 147036 and mare 147037, 2 generations
[2026-01-28 13:45:37] info: [advancedLineageAnalysisService.generateLineageTree] Generated tree with 3 horses across 2 generations
[2026-01-28 13:45:37] info: [advancedLineageAnalysisService.generateLineageTree] Generating tree for stallion 999 and mare 998, 3 generations
[2026-01-28 13:45:37] warn: [advancedLineageAnalysisService.generateLineageTree] Missing parent horses
[2026-01-28 13:45:37] info: [advancedLineageAnalysisService.calculateGeneticDiversityMetrics] Calculating diversity for 3 generations
[2026-01-28 13:45:37] info: [advancedLineageAnalysisService.calculateInbreedingCoefficient] Calculating for stallion 1 and mare 2
[2026-01-28 13:45:37] info: [advancedLineageAnalysisService.calculateInbreedingCoefficient] Found 0 common ancestors, coefficient: 0
[2026-01-28 13:45:37] info: [advancedLineageAnalysisService.analyzeLineagePerformance] Analyzing performance for 3 generations
[2026-01-28 13:45:37] info: [advancedLineageAnalysisService.analyzeLineagePerformance] Analyzing performance for 3 generations
[2026-01-28 13:45:37] info: [advancedLineageAnalysisService.createVisualizationData] Creating visualization for stallion 147038 and mare 147039
[2026-01-28 13:45:37] info: [advancedLineageAnalysisService.generateLineageTree] Generating tree for stallion 147038 and mare 147039, 3 generations
[2026-01-28 13:45:37] info: [advancedLineageAnalysisService.generateLineageTree] Generated tree with 2 horses across 1 generations
[2026-01-28 13:45:37] info: [advancedLineageAnalysisService.generateBreedingRecommendations] Generating recommendations for stallion 147040 and mare 147041
[2026-01-28 13:45:37] info: [advancedLineageAnalysisService.calculateGeneticDiversityMetrics] Calculating diversity for 1 generations
[2026-01-28 13:45:37] info: [advancedLineageAnalysisService.calculateInbreedingCoefficient] Calculating for stallion 147040 and mare 147041
[2026-01-28 13:45:37] info: [advancedLineageAnalysisService.calculateInbreedingCoefficient] Found 0 common ancestors, coefficient: 0
[2026-01-28 13:45:37] info: [advancedLineageAnalysisService.analyzeLineagePerformance] Analyzing performance for 1 generations
[2026-01-28 13:45:37] info: [advancedLineageAnalysisService.generateBreedingRecommendations] Generating recommendations for stallion 147042 and mare 147043
[2026-01-28 13:45:37] info: [advancedLineageAnalysisService.calculateGeneticDiversityMetrics] Calculating diversity for 1 generations
[2026-01-28 13:45:37] info: [advancedLineageAnalysisService.calculateInbreedingCoefficient] Calculating for stallion 147042 and mare 147043
[2026-01-28 13:45:37] info: [advancedLineageAnalysisService.calculateInbreedingCoefficient] Found 0 common ancestors, coefficient: 0
[2026-01-28 13:45:37] info: [advancedLineageAnalysisService.analyzeLineagePerformance] Analyzing performance for 1 generations
PASS tests/unit/advancedLineageAnalysis.test.mjs
  🌳 Advanced Lineage Analysis System
    🌲 Lineage Tree Generation
      √ should generate hierarchical tree structure from lineage data (90 ms)
      √ should include parent-child relationships in tree nodes (41 ms)
      √ should handle missing lineage data gracefully (9 ms)
    🧬 Genetic Diversity Metrics
      √ should calculate comprehensive genetic diversity metrics (3 ms)
      √ should identify genetic bottlenecks in lineage (1 ms)
      √ should calculate inbreeding coefficient accurately (7 ms)
    🏆 Performance Analysis
      √ should analyze performance trends across generations (4 ms)
      √ should identify top performing ancestors (2 ms)
    📊 Visualization Data Generation
      √ should create visualization-ready data structure (28 ms)
    🎯 Breeding Recommendations
      √ should generate comprehensive breeding recommendations (32 ms)
      √ should identify breeding risks and mitigation strategies (29 ms)

[2026-01-28 13:45:37] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:37] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:37] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:37] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.1%, adjustment: -4.1
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 126 (base: 130, trait: +0, luck: -4.1)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -7.8%, adjustment: -10.6
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 124 (base: 130, trait: +5, luck: -10.6)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 6.7%, adjustment: 8.8
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 139 (base: 130, trait: +0, luck: 8.8)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.9%, adjustment: -2.6
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 132 (base: 130, trait: +5, luck: -2.6)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.2%, adjustment: 4.1
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 134 (base: 130, trait: +0, luck: 4.1)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.3%, adjustment: 1.7
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 137 (base: 130, trait: +5, luck: 1.7)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.3%, adjustment: 4.3
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 134 (base: 130, trait: +0, luck: 4.3)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -8.5%, adjustment: -15.3
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 165 (base: 175, trait: +5, luck: -15.3)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 6.9%, adjustment: 12.1
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 187 (base: 175, trait: +0, luck: 12.1)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -7.4%, adjustment: -13.2
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 167 (base: 175, trait: +5, luck: -13.2)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -2.6%, adjustment: -4.5
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 171 (base: 175, trait: +0, luck: -4.5)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.4%, adjustment: -6.2
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 175, trait: +5, luck: -6.2)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -9.0%, adjustment: -15.7
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 159 (base: 175, trait: +0, luck: -15.7)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 165
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -7.0%, adjustment: -11.9
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 158 (base: 165, trait: +5, luck: -11.9)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 165
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 7.3%, adjustment: 12.1
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 165, trait: +0, luck: 12.1)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 165
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.0%, adjustment: 5.1
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 175 (base: 165, trait: +5, luck: 5.1)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 165
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.5%, adjustment: -2.4
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 163 (base: 165, trait: +0, luck: -2.4)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 160
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -4.6%, adjustment: -7.6
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 157 (base: 160, trait: +5, luck: -7.6)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 160
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 5.4%, adjustment: 8.7
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 169 (base: 160, trait: +0, luck: 8.7)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 160
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 7.9%, adjustment: 13.0
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 160, trait: +5, luck: 13.0)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 160
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -7.3%, adjustment: -11.7
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 148 (base: 160, trait: +0, luck: -11.7)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 2.2%, adjustment: 3.8
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 179 (base: 175, trait: +0, luck: 3.8)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 5.4%, adjustment: 9.4
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 184 (base: 175, trait: +0, luck: 9.4)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -5.1%, adjustment: -8.8
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 166 (base: 175, trait: +0, luck: -8.8)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 2.1%, adjustment: 3.6
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 179 (base: 175, trait: +0, luck: 3.6)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 8.9%, adjustment: 15.5
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 191 (base: 175, trait: +0, luck: 15.5)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -4.3%, adjustment: -7.5
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 167 (base: 175, trait: +0, luck: -7.5)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -2.8%, adjustment: -4.8
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 170 (base: 175, trait: +0, luck: -4.8)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 5.5%, adjustment: 9.7
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 175, trait: +0, luck: 9.7)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 6.4%, adjustment: 11.1
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 175, trait: +0, luck: 11.1)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 8.4%, adjustment: 14.7
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 190 (base: 175, trait: +0, luck: 14.7)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 2.4%, adjustment: 4.1
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 179 (base: 175, trait: +0, luck: 4.1)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 2.3%, adjustment: 4.0
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 179 (base: 175, trait: +0, luck: 4.0)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.4%, adjustment: 0.7
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 176 (base: 175, trait: +0, luck: 0.7)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 5.2%, adjustment: 9.2
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 184 (base: 175, trait: +0, luck: 9.2)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -7.7%, adjustment: -13.4
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 162 (base: 175, trait: +0, luck: -13.4)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -7.1%, adjustment: -12.4
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 163 (base: 175, trait: +0, luck: -12.4)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -2.5%, adjustment: -4.4
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 171 (base: 175, trait: +0, luck: -4.4)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 7.3%, adjustment: 12.8
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 175, trait: +0, luck: 12.8)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -0.3%, adjustment: -0.6
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 175, trait: +0, luck: -0.6)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -0.0%, adjustment: -0.0
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 175 (base: 175, trait: +0, luck: -0.0)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -0.8%, adjustment: -1.1
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 129 (base: 130, trait: +0, luck: -1.1)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 7.0%, adjustment: 9.1
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 139 (base: 130, trait: +0, luck: 9.1)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.2%, adjustment: -1.6
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 133 (base: 130, trait: +5, luck: -1.6)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 4.6%, adjustment: 6.2
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 141 (base: 130, trait: +5, luck: 6.2)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -7.2%, adjustment: -9.7
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 125 (base: 130, trait: +5, luck: -9.7)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.7%, adjustment: -2.3
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 133 (base: 130, trait: +5, luck: -2.3)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.2%, adjustment: 0.2
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 135 (base: 130, trait: +5, luck: 0.2)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 6.5%, adjustment: 8.7
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 144 (base: 130, trait: +5, luck: 8.7)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.0%, adjustment: -1.3
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 134 (base: 130, trait: +5, luck: -1.3)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.3%, adjustment: -4.4
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 131 (base: 130, trait: +5, luck: -4.4)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 2.2%, adjustment: 3.0
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 138 (base: 130, trait: +5, luck: 3.0)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.7%, adjustment: -5.0
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 130 (base: 130, trait: +5, luck: -5.0)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.6%, adjustment: 0.8
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 136 (base: 130, trait: +5, luck: 0.8)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -5.0%, adjustment: -6.5
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 123 (base: 130, trait: +0, luck: -6.5)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 4.6%, adjustment: 6.2
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 141 (base: 130, trait: +5, luck: 6.2)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -4.5%, adjustment: -5.8
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 124 (base: 130, trait: +0, luck: -5.8)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -8.4%, adjustment: -11.4
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 124 (base: 130, trait: +5, luck: -11.4)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -8.0%, adjustment: -10.4
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 120 (base: 130, trait: +0, luck: -10.4)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 4.9
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 140 (base: 130, trait: +5, luck: 4.9)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -2.8%, adjustment: -3.7
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 126 (base: 130, trait: +0, luck: -3.7)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.0%, adjustment: -1.4
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 134 (base: 130, trait: +5, luck: -1.4)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -7.8%, adjustment: -10.1
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 120 (base: 130, trait: +0, luck: -10.1)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -0.9%, adjustment: -1.3
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 134 (base: 130, trait: +5, luck: -1.3)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -6.3%, adjustment: -8.2
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 122 (base: 130, trait: +0, luck: -8.2)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.1%, adjustment: -1.5
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 133 (base: 130, trait: +5, luck: -1.5)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -6.7%, adjustment: -8.7
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 121 (base: 130, trait: +0, luck: -8.7)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.4%, adjustment: 1.8
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 137 (base: 130, trait: +5, luck: 1.8)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -7.6%, adjustment: -9.9
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 120 (base: 130, trait: +0, luck: -9.9)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.8%, adjustment: 5.1
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 140 (base: 130, trait: +5, luck: 5.1)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -0.9%, adjustment: -1.2
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 129 (base: 130, trait: +0, luck: -1.2)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.1%, adjustment: 0.1
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 135 (base: 130, trait: +5, luck: 0.1)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.5%, adjustment: 1.9
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 132 (base: 130, trait: +0, luck: 1.9)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.3%, adjustment: 1.7
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 137 (base: 130, trait: +5, luck: 1.7)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 2.1%, adjustment: 2.7
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 133 (base: 130, trait: +0, luck: 2.7)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 2.4%, adjustment: 3.2
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 138 (base: 130, trait: +5, luck: 3.2)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.1%, adjustment: 1.4
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 131 (base: 130, trait: +0, luck: 1.4)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -0.5%, adjustment: -0.6
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 134 (base: 130, trait: +5, luck: -0.6)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 5.9%, adjustment: 7.7
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 138 (base: 130, trait: +0, luck: 7.7)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -6.4%, adjustment: -8.6
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 126 (base: 130, trait: +5, luck: -8.6)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 2.7%, adjustment: 3.5
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 134 (base: 130, trait: +0, luck: 3.5)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -6.9%, adjustment: -9.3
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 126 (base: 130, trait: +5, luck: -9.3)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.2%, adjustment: 1.5
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 132 (base: 130, trait: +0, luck: 1.5)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 7.5%, adjustment: 10.1
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 145 (base: 130, trait: +5, luck: 10.1)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.3%, adjustment: 1.7
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 132 (base: 130, trait: +0, luck: 1.7)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.3%, adjustment: -4.5
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 131 (base: 130, trait: +5, luck: -4.5)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -8.2%, adjustment: -10.7
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 119 (base: 130, trait: +0, luck: -10.7)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.9%, adjustment: 2.6
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 138 (base: 130, trait: +5, luck: 2.6)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -2.0%, adjustment: -2.5
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 127 (base: 130, trait: +0, luck: -2.5)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 8.6%, adjustment: 11.7
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 147 (base: 130, trait: +5, luck: 11.7)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 2.5%, adjustment: 3.2
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 133 (base: 130, trait: +0, luck: 3.2)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -6.5%, adjustment: -8.8
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 126 (base: 130, trait: +5, luck: -8.8)
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -2.9%, adjustment: -3.7
[2026-01-28 13:45:37] info: [calculateCompetitionScore] Horse Test Horse: Final score: 126 (base: 130, trait: +0, luck: -3.7)
PASS tests/enhancedCompetitionIntegration.test.mjs
  🏆 INTEGRATION: Enhanced Competition Integration - Trait Scoring Validation
    Basic Integration Tests
      √ should successfully import and use calculateCompetitionScore function (5 ms)
      √ should apply trait bonuses correctly for each discipline (68 ms)
      √ should not apply trait bonus when trait does not match discipline (54 ms)
      √ should handle horses with missing epigeneticModifiers (6 ms)
      √ should provide consistent scoring results with variance (39 ms)
      √ should demonstrate that trait integration is working (125 ms)

[2026-01-28 13:45:38] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:38] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:38] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:38] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:45:38] warn: [ownership] Missing user for horse ownership check
[2026-01-28 13:45:38] warn: [ownership] Missing user for horse ownership check
[2026-01-28 13:45:38] warn: [ownership] Invalid horse ID: invalid
[2026-01-28 13:45:38] info: [ownership] Validated ownership: user user-123 owns horse 1
[2026-01-28 13:45:38] warn: [ownership] horse 1 not found or not owned by user user-123
[2026-01-28 13:45:38] info: [ownership] Validated ownership: user user-123 owns foal 1
[2026-01-28 13:45:38] info: [ownership] Validated ownership: user user-123 owns groom 1
[2026-01-28 13:45:38] info: [ownership] Validated ownership: user user-123 owns groom-assignment 1
[2026-01-28 13:45:38] info: [ownership] Validated ownership: user user-123 owns breeding 1
[2026-01-28 13:45:38] info: [ownership] Validated ownership: user user-123 owns competition-entry 1
[2026-01-28 13:45:38] info: [ownership] Validated ownership: user user-123 owns training-session 1
[2026-01-28 13:45:38] error: [ownership] Unexpected error: Database connection error
[2026-01-28 13:45:38] info: [ownership] Found owned horse 1 for user user-123
[2026-01-28 13:45:38] info: [ownership] Batch validation: user user-123 owns 2/2 horses
[2026-01-28 13:45:38] warn: [ownership] horse 1 not found or not owned by user user-123
[2026-01-28 13:45:38] info: [ownership] Validated ownership: user user-123 owns horse 1
[2026-01-28 13:45:38] info: [ownership] Validated ownership: user user-123 owns horse 1
PASS __tests__/middleware/ownership.test.mjs
  Ownership Middleware
    requireOwnership()
      Authentication validation
        √ should return 401 if user is not authenticated (13 ms)
        √ should return 401 if user.id is missing (4 ms)
      Resource ID validation
        √ should return 400 if resource ID is not a number (4 ms)
      Ownership validation - Horse
        √ should allow access to owned horse (3 ms)
        √ should return 404 if horse does not exist (3 ms)
      Ownership validation - Other resource types
        √ should validate foal ownership (7 ms)
        √ should validate groom ownership (3 ms)
        √ should validate groom-assignment ownership (3 ms)
        √ should validate breeding ownership (maps to horse) (3 ms)
        √ should validate competition-entry ownership (maps to competitionResult) (2 ms)
        √ should validate training-session ownership (maps to trainingLog) (3 ms)
      Error handling
        √ should handle database errors gracefully (4 ms)
    findOwnedResource()
      √ should return owned horse (5 ms)
    validateBatchOwnership()
      √ should return all owned horses (3 ms)
    Security tests
      √ should prevent ownership disclosure (CWE-639) (2 ms)
      √ should prevent TOCTOU vulnerabilities by using atomic single query (3 ms)
      √ should validate user ID from token, not from request params (2 ms)

[2026-01-28 13:45:38] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:38] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:38] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:38] info: [envValidator] Test environment validation complete. Success: true
PASS tests/horseAgingSystem.test.mjs
  Horse Aging System
    Age Calculation
      √ should calculate age correctly from dateOfBirth (64 ms)
      √ should handle leap years correctly (12 ms)
      √ should handle timezone differences (7 ms)
    Horse Age Updates
      √ should update horse age when birthday occurs (34 ms)
      √ should not update age when no birthday occurs (14 ms)
      √ should handle horses with incorrect stored age (18 ms)
    Milestone Detection
      √ should detect age 1 milestone and trigger trait evaluation (20 ms)
      √ should not trigger milestone for non-milestone ages (6 ms)
      √ should detect retirement milestone at age 21 (5 ms)
    Batch Processing
      √ should process multiple horses with birthdays (109 ms)
    Integration with Existing Systems
      √ should maintain compatibility with training age requirements (24 ms)
      √ should handle retirement at age 21 (13 ms)

[2026-01-28 13:45:39] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:39] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:39] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:39] info: [envValidator] Test environment validation complete. Success: true
PASS tests/foalTaskLogStorage.test.mjs
  Foal Task Log Storage
    Task Log JSON Storage
      √ should initialize with null task log (82 ms)
      √ should store task log as JSON object (20 ms)
      √ should handle empty task log object (17 ms)
      √ should update existing task counts (19 ms)
      √ should handle complex task log with all foal tasks (21 ms)
    Last Care Date Tracking
      √ should initialize with null last groomed date (14 ms)
      √ should store last care date timestamp (15 ms)
      √ should update last care date on subsequent care (17 ms)
      √ should handle current timestamp updates (16 ms)
    Combined Task Log and Care Date
      √ should update task log and last care date together (15 ms)
      √ should simulate realistic foal development progression (19 ms)
    Data Integrity and Edge Cases
      √ should handle null values gracefully (14 ms)
      √ should handle very large task counts (19 ms)
      √ should preserve data types correctly (15 ms)

[2026-01-28 13:45:39] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:39] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:39] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:39] info: [envValidator] Test environment validation complete. Success: true
PASS tests/unit/performanceAnalyticsService.test.mjs
  Performance Analytics Service
    Personal Performance Metrics
      √ should calculate overall win rate correctly (9 ms)
      √ should calculate win rate by discipline (5 ms)
      √ should track placement trends over time (5 ms)
      √ should calculate performance consistency score (4 ms)
    Historical Performance Tracking
      √ should provide complete competition history (4 ms)
      √ should track total earnings by discipline (6 ms)
      √ should track performance improvement over time (4 ms)
    Discipline Analysis
      √ should identify strongest disciplines (9 ms)
      √ should identify weakest disciplines (5 ms)
    Error Handling
      √ should handle non-existent horse gracefully (4 ms)
      √ should handle horse with no competition history (20 ms)

[2026-01-28 13:45:40] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:40] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:40] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:40] info: [envValidator] Test environment validation complete. Success: true
PASS tests/services/flagEffectIntegration.test.mjs
  Flag Effect Integration
    calculateFlagEffects
      √ should calculate cumulative effects for positive flags (3 ms)
      √ should calculate cumulative effects for negative flags (1 ms)
      √ should handle conflicting flags appropriately (1 ms)
      √ should return neutral effects for horses with no flags (1 ms)
    applyFlagEffectsToCompetition
      √ should apply positive flag effects to competition performance (7 ms)
      √ should apply negative flag effects to competition performance (1 ms)
      √ should handle discipline-specific flag effects (1 ms)
    applyFlagEffectsToTraining
      √ should apply flag effects to training effectiveness (1 ms)
      √ should reduce training effectiveness for negative flags (1 ms)
    applyFlagEffectsToBreeding
      √ should apply flag effects to breeding trait probabilities (1 ms)
      √ should handle breeding between horses with conflicting flags (2 ms)
    resolveFlagConflicts
      √ should identify and resolve flag conflicts (1 ms)
      √ should handle no conflicts gracefully

[2026-01-28 13:45:40] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:40] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:40] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:40] info: [envValidator] Test environment validation complete. Success: true
PASS seed/horseSeed.test.mjs
  Horse Seed Integration Tests
    checkHorseExists - Real Database Operations
      √ should return true if horse exists in database (34 ms)
      √ should return false if horse does not exist in database (3 ms)
      √ should handle database errors gracefully (2 ms)
    findOrCreateBreed - Real Database Operations
      √ should return existing breed if found in database (6 ms)
      √ should create new breed if not found in database (6 ms)
      √ should return null for undefined breed name (1 ms)
      √ should handle database errors gracefully (2 ms)
    ensureReferencedRecordsExist - Real Database Operations
      √ should create users and stables if they do not exist in database (17 ms)
      √ should update existing users and stables if they already exist (17 ms)
      √ should handle database constraints gracefully (7 ms)
    seedHorses - Real Database Operations
      √ should log a warning and return an empty array if no users are provided (6 ms)
      √ should create breeds and horses for the provided user in database (29 ms)
      √ should handle database constraints and validation errors gracefully (22 ms)
      √ should handle edge cases and maintain data integrity (25 ms)
    Complete Horse Seeding Integration Test
      √ should execute complete seeding workflow with real database operations (24 ms)
      √ should maintain database integrity throughout complete seeding process (28 ms)

[2026-01-28 13:45:41] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:41] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:41] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:41] info: [envValidator] Test environment validation complete. Success: true
PASS tests/foalTaskLogStreakIntegration.test.mjs
  Foal Task Log and Streak Data Integration
    Real-World Foal Development Scenarios
      √ should handle week 1 of foal care with enrichment tasks (98 ms)
      √ should handle streak break and recovery (21 ms)
      √ should achieve burnout immunity after 7 consecutive days (32 ms)
    Task Log and Trait Evaluation Integration
      √ should support trait point calculation from stored task log (17 ms)
      √ should track task progression over time (21 ms)
    Grace Period and Streak Maintenance
      √ should maintain streak within 2-day grace period (22 ms)
      √ should break streak beyond grace period (18 ms)
    Care Summary Statistics
      √ should provide comprehensive care statistics (14 ms)
    Data Persistence and Integrity
      √ should maintain data integrity across multiple updates (38 ms)

[2026-01-28 13:45:41] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:41] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:41] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:41] info: [envValidator] Test environment validation complete. Success: true
PASS tests/services/horseTemperamentAnalysis.test.mjs
  Horse Temperament Analysis
    analyzeHorseTemperament
      √ should analyze temperament for nervous horse with interaction history (21 ms)
      √ should analyze temperament for confident horse (8 ms)
      √ should analyze temperament for horse with no interaction history (5 ms)
    classifyTemperamentFromFlags
      √ should classify temperament from positive flags (2 ms)
      √ should classify temperament from negative flags (2 ms)
      √ should handle mixed flags appropriately (1 ms)
      √ should handle empty flags array (1 ms)
    analyzeBehavioralTrends
      √ should analyze behavioral trends over time (10 ms)
    identifyStressResponsePatterns
      √ should identify stress response patterns (6 ms)
    analyzeBondingPreferences
      √ should analyze bonding preferences (3 ms)
    detectTemperamentChanges
      √ should detect temperament changes over time (8 ms)

[2026-01-28 13:45:42] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:42] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:42] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:42] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 10
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 10 (streak: 10)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: coat_check, count: 3
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: presentationBoosted (total: 15)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: early_touch, count: 10
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 50 points for trait: calm (total: 50)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: sponge_bath, count: 4
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 20 points for trait: showCalm (total: 20)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 20 points for trait: presentationBoosted (total: 35)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: hoof_handling, count: 6
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 30 points for trait: showCalm (total: 50)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 12
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 60 points for trait: bonded (total: 60)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 60 points for trait: resilient (total: 60)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 8
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 40 points for trait: confident (total: 40)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: showground_exposure, count: 5
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 25 points for trait: crowdReady (total: 25)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 25 points for trait: confident (total: 65)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: presentationBoosted, base: 35, total: 45, chance: 45%
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: presentationBoosted (rolled: 30.00)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: calm, base: 50, total: 60, chance: 60%
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: calm (rolled: 30.00)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: showCalm, base: 50, total: 60, chance: 60%
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: showCalm (rolled: 30.00)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 60, total: 70, chance: 60%
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: bonded (rolled: 30.00)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 60, total: 70, chance: 60%
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: resilient (rolled: 30.00)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 65, total: 75, chance: 60%
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: confident (rolled: 30.00)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: crowdReady, base: 25, total: 35, chance: 35%
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: crowdReady (rolled: 30.00)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["presentationBoosted","calm","showCalm","bonded","resilient","confident","crowdReady"]
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 3
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 3)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: early_touch, count: 1
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 5 points for trait: calm (total: 5)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 2
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: bonded (total: 10)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: resilient (total: 10)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: calm, base: 5, total: 5, chance: 5%
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: calm (rolled: 7.00)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 10, total: 10, chance: 10%
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: bonded (rolled: 7.00)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 10, total: 10, chance: 10%
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: resilient (rolled: 7.00)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["bonded","resilient"]
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 8
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 10 (streak: 8)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 10
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 50 points for trait: confident (total: 50)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: showground_exposure, count: 6
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 30 points for trait: crowdReady (total: 30)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 30 points for trait: confident (total: 80)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 80, total: 90, chance: 60%
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: confident (rolled: 40.00)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: crowdReady, base: 30, total: 40, chance: 40%
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: crowdReady (rolled: 40.00)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["confident"]
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: early_touch, count: 4
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 20 points for trait: calm (total: 20)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 5
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 25 points for trait: bonded (total: 25)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 25 points for trait: resilient (total: 25)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 3
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: confident (total: 15)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: calm, base: 20, total: 20, chance: 20%
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: calm (rolled: 10.00)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 25, total: 25, chance: 25%
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: bonded (rolled: 10.00)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 25, total: 25, chance: 25%
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: resilient (rolled: 10.00)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 15, total: 15, chance: 15%
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: confident (rolled: 10.00)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["calm","bonded","resilient","confident"]
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: []
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: early_touch, count: 5
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 25 points for trait: calm (total: 25)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 6
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 30 points for trait: bonded (total: 30)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 30 points for trait: resilient (total: 30)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 4
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 20 points for trait: confident (total: 20)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: calm, base: 25, total: 25, chance: 25%
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: calm (rolled: 15.00)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 30, total: 30, chance: 30%
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: bonded (rolled: 15.00)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 30, total: 30, chance: 30%
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: resilient (rolled: 15.00)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 20, total: 20, chance: 20%
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: confident (rolled: 15.00)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["calm","bonded","resilient","confident"]
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: early_touch, count: 5
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 25 points for trait: calm (total: 25)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: hoof_handling, count: 2
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: showCalm (total: 10)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 8
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 40 points for trait: bonded (total: 40)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 40 points for trait: resilient (total: 40)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 6
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 30 points for trait: confident (total: 30)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: calm, base: 25, total: 25, chance: 25%
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: calm (rolled: 20.00)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: showCalm, base: 10, total: 10, chance: 10%
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: showCalm (rolled: 20.00)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 40, total: 40, chance: 40%
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: bonded (rolled: 20.00)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 40, total: 40, chance: 40%
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: resilient (rolled: 20.00)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 30, total: 30, chance: 30%
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: confident (rolled: 20.00)
[2026-01-28 13:45:42] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["calm","bonded","resilient","confident"]
PASS tests/traitMilestoneIntegration.test.mjs
  Trait Milestone Integration
    Age 1 Milestone Evaluation
      √ should evaluate traits from comprehensive foal development history (105 ms)
      √ should handle minimal development with no streak bonus (27 ms)
      √ should handle specialized development paths (23 ms)
      √ should integrate with real database persistence (27 ms)
      √ should handle edge case of no task history (18 ms)
    Milestone Timing and Business Rules
      √ should demonstrate age 1 milestone evaluation timing (25 ms)
      √ should support trait development progression tracking (42 ms)

[2026-01-28 13:45:43] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:43] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:43] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:43] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:45:43] info: Groom 73554 selected talent gentle_hands for tier1
[2026-01-28 13:45:43] info: Groom 73556 selected talent gentle_hands for tier1
[2026-01-28 13:45:43] info: Groom 73557 selected talent gentle_hands for tier1
[2026-01-28 13:45:43] info: Groom 73557 selected talent stress_whisperer for tier2
[2026-01-28 13:45:43] info: Groom 73557 selected talent master_bonding for tier3
[2026-01-28 13:45:43] error: Error selecting talent for groom 73558: Invalid talent selection: invalid_talent
[2026-01-28 13:45:43] error: Error selecting talent for groom 73560: Invalid talent selection: insufficient_level
[2026-01-28 13:45:43] info: Groom 73561 selected talent gentle_hands for tier1
[2026-01-28 13:45:43] info: Groom 73562 selected talent gentle_hands for tier1
[2026-01-28 13:45:43] info: Groom 73562 selected talent stress_whisperer for tier2
[2026-01-28 13:45:43] info: Groom 73564 selected talent gentle_hands for tier1
PASS tests/services/groomTalentService.test.mjs
  Groom Talent Service
    Talent Tree Definitions
      √ should return complete talent tree definitions (75 ms)
      √ should have consistent talent requirements (11 ms)
    Talent Selection Validation
      √ should validate valid talent selection (13 ms)
      √ should reject selection for insufficient level (22 ms)
      √ should reject invalid talent for personality (11 ms)
      √ should reject selection if tier already selected (15 ms)
      √ should require prerequisite tiers (9 ms)
    Talent Selection
      √ should successfully select tier 1 talent (13 ms)
      √ should successfully select multiple tiers in sequence (25 ms)
      √ should reject invalid talent selection (12 ms)
      √ should reject selection for insufficient level (14 ms)
    Talent Effects
      √ should apply talent effects to groom interactions (17 ms)
      √ should handle multiple talent effects (20 ms)
      √ should handle groom with no talent selections (10 ms)
    Talent Retrieval
      √ should get groom talent selections (12 ms)
      √ should return null for groom with no selections (9 ms)

[2026-01-28 13:45:43] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:43] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:43] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:43] info: [envValidator] Test environment validation complete. Success: true
PASS tests/horseAgingIntegration.test.mjs
  Horse Aging Integration
    Complete Aging Workflow
      √ should process foal birthday with trait milestone evaluation (100 ms)
      √ should handle multiple horses with different milestone scenarios (108 ms)
      √ should handle foal with minimal task history (24 ms)
      √ should handle foal with no task history (23 ms)
    Error Handling
      √ should handle database errors gracefully (16 ms)

[2026-01-28 13:45:44] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:44] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:44] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:44] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:45:44] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:44] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:44] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:44] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:44] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:44] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:44] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:44] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:44] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 13:45:44] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
PASS __tests__/unit/security/rate-limit-keys.test.mjs
  Rate Limit Key Generation Unit Tests
    IP-Based Key Generation
      √ should generate key based on IP address (3 ms)
      √ should handle IPv4 addresses (2 ms)
      √ should handle IPv6 addresses (1 ms)
      √ should handle localhost IPv4 (1 ms)
      √ should handle localhost IPv6 (1 ms)
      √ should handle IP from X-Forwarded-For header
      √ should handle IP from X-Real-IP header
    User-Based Key Generation
      √ should generate key based on user ID when authenticated (6 ms)
      √ should handle authenticated user with IP fallback (1 ms)
      √ should handle unauthenticated user (null) (1 ms)
      √ should handle unauthenticated user (undefined)
      √ should handle user with string ID
      √ should handle user with numeric ID (1 ms)
    Route-Based Key Generation
      √ should generate different keys for different routes (1 ms)
      √ should handle parameterized routes (1 ms)
      √ should handle query parameters (1 ms)
      √ should handle nested routes (1 ms)
      √ should handle trailing slashes (1 ms)
      √ should handle root path
    Combined Key Generation
      √ should generate unique keys for user+route combination
      √ should generate unique keys for IP+route combination (1 ms)
      √ should generate unique keys for user+IP+route combination (1 ms)
      √ should generate different keys for same user on different IPs (1 ms)
      √ should generate different keys for different users on same IP (2 ms)
    Key Consistency
      √ should generate consistent keys for same request parameters (1 ms)
      √ should generate consistent keys across requests (1 ms)
      √ should not be affected by request method (1 ms)
      √ should not be affected by request headers (except proxy headers) (1 ms)
      √ should not be affected by request body (1 ms)
    Key Security
      √ should not expose sensitive user information in key (1 ms)
      √ should handle SQL injection attempts in user ID (1 ms)
      √ should handle special characters in IP (5 ms)
      √ should handle null bytes in path (1 ms)
      √ should handle extremely long user IDs (1 ms)
      √ should handle extremely long IPs (IPv6) (1 ms)
    Key Storage Format
      √ should generate Redis-compatible keys (1 ms)
      √ should use colon as delimiter
      √ should handle paths with slashes in keys (1 ms)
    Edge Cases
      √ should handle missing IP address
      √ should handle missing path (1 ms)
      √ should handle empty string IP (1 ms)
      √ should handle empty string path (1 ms)
      √ should handle object as IP (edge case) (1 ms)
      √ should handle array as path (edge case) (1 ms)

[2026-01-28 13:45:44] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:44] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:44] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:44] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:45:44] info: [personalityEvolutionSystem.evolveGroomPersonality] Starting evolution analysis for groom 73566
[2026-01-28 13:45:44] info: [personalityEvolutionSystem.applyPersonalityEvolutionEffects] Applying effects for groom 73566
[2026-01-28 13:45:44] info: [personalityEvolutionSystem.evolveGroomPersonality] Starting evolution analysis for groom 73567
[2026-01-28 13:45:44] info: [personalityEvolutionSystem.calculatePersonalityEvolutionTriggers] Analyzing triggers for groom 73566
[2026-01-28 13:45:44] info: [personalityEvolutionSystem.evolveHorseTemperament] Starting evolution analysis for horse 147111
[2026-01-28 13:45:44] info: [personalityEvolutionSystem.applyPersonalityEvolutionEffects] Applying effects for horse 147111
[2026-01-28 13:45:45] info: [personalityEvolutionSystem.evolveHorseTemperament] Starting evolution analysis for horse 147112
[2026-01-28 13:45:45] info: [personalityEvolutionSystem.analyzePersonalityStability] Analyzing stability for horse 147111
[2026-01-28 13:45:45] info: [personalityEvolutionSystem.predictPersonalityEvolution] Predicting evolution for groom 73566 over 30 days
[2026-01-28 13:45:45] info: [personalityEvolutionSystem.getPersonalityEvolutionHistory] Getting history for groom 73566
[2026-01-28 13:45:45] info: [personalityEvolutionSystem.applyPersonalityEvolutionEffects] Applying effects for groom 73566
[2026-01-28 13:45:45] info: [personalityEvolutionSystem.analyzePersonalityStability] Analyzing stability for horse 147111
PASS tests/services/personalityEvolutionSystem.test.mjs
  Personality Evolution System
    Groom Personality Evolution
      √ should evolve groom personality based on interaction patterns (43 ms)
      √ should not evolve personality with insufficient interaction data (18 ms)
      √ should calculate personality evolution triggers accurately (5 ms)
    Horse Temperament Evolution
      √ should evolve horse temperament based on care history (33 ms)
      √ should maintain temperament stability with mixed care patterns (25 ms)
      √ should analyze personality stability accurately (4 ms)
    Personality Evolution Prediction
      √ should predict future personality evolution accurately (4 ms)
      √ should get personality evolution history (2 ms)
      √ should apply personality evolution effects correctly (7 ms)
    Cross-Species Personality Influence
      √ should detect personality convergence between groom and horse (42 ms)

[2026-01-28 13:45:45] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:45] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:45] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:45] info: [envValidator] Test environment validation complete. Success: true
PASS tests/services/traitInteractionMatrix.test.mjs
  Trait Interaction Matrix
    analyzeTraitInteractions
      √ should analyze trait interactions for synergistic traits (11 ms)
      √ should analyze trait interactions for conflicting traits (6 ms)
      √ should handle horses with minimal traits (6 ms)
    calculateTraitSynergies
      √ should calculate synergies for compatible traits (6 ms)
      √ should calculate amplification effects correctly (7 ms)
      √ should categorize synergies by type (8 ms)
    identifyTraitConflicts
      √ should identify conflicts between opposing traits (5 ms)
      √ should calculate suppression effects (6 ms)
      √ should handle horses with no conflicts (4 ms)
    evaluateTraitDominance
      √ should evaluate trait dominance hierarchy (5 ms)
      √ should identify primary and secondary traits correctly (4 ms)
    processComplexInteractions
      √ should process complex multi-trait interactions (8 ms)
      √ should identify emergent properties from trait combinations (4 ms)
      √ should calculate complexity scores appropriately (6 ms)
    assessInteractionStability
      √ should assess stability of trait interactions (5 ms)
      √ should identify volatility risks in conflicting traits (5 ms)
    modelTemporalInteractions
      √ should model trait interactions over time (5 ms)
      √ should project future interaction changes (8 ms)
    generateInteractionMatrix
      √ should generate comprehensive interaction matrix (9 ms)
      √ should create matrix visualization data (8 ms)

[2026-01-28 13:45:45] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:45] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:45] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:45] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Simulating breeding outcomes
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:45] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Simulating breeding outcomes
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Simulating breeding outcomes
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Simulating breeding outcomes
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating multi-generational predictions
[2026-01-28 13:45:46] info: Calculating multi-generational predictions
[2026-01-28 13:45:46] info: Calculating genetic diversity impact
[2026-01-28 13:45:46] info: Calculating genetic diversity impact
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
[2026-01-28 13:45:46] info: Calculating enhanced genetic probabilities
PASS tests/unit/enhancedGeneticProbabilityCalculator.test.mjs
  🧬 Enhanced Genetic Probability Calculator
    🎯 Enhanced Trait Inheritance Probability Calculator
      √ should calculate detailed trait inheritance probabilities (7 ms)
      √ should calculate stat inheritance probabilities (2 ms)
      √ should handle edge cases with minimal genetic data (8 ms)
    🤝 Genetic Compatibility Scoring System
      √ should calculate genetic compatibility score (3 ms)
      √ should identify trait conflicts (1 ms)
      √ should calculate stat compatibility (1 ms)
    🎲 Breeding Outcome Simulation
      √ should simulate multiple breeding outcomes (128 ms)
      √ should provide confidence intervals (62 ms)
      √ should handle deterministic simulation with seed (27 ms)
    🌳 Multi-Generational Prediction Engine
      √ should calculate multi-generational predictions (3 ms)
      √ should weight recent generations more heavily (2 ms)
    🌈 Genetic Diversity Impact Calculator
      √ should calculate genetic diversity impact (2 ms)
      √ should detect inbreeding risks (2 ms)
    ⚡ Trait Interaction Modeling
      √ should calculate trait interactions (2 ms)
      √ should identify athletic + intelligent synergy (1 ms)
    💡 Breeding Recommendation Engine
      √ should generate breeding recommendations (3 ms)
      √ should provide specific optimization suggestions (2 ms)
    🏆 Performance Prediction Algorithm
      √ should predict offspring performance (8 ms)
      √ should identify performance strengths and weaknesses (2 ms)

[2026-01-28 13:45:46] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:46] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:46] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:46] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:45:46] info: [UserDocService] Loaded 1 documentation files
[2026-01-28 13:45:46] info: [UserDocService] Built search index with 34 terms
[2026-01-28 13:45:46] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 13:45:46] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 13:45:46] info: [UserDocService] Built search index with 95 terms
[2026-01-28 13:45:46] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 13:45:46] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 13:45:46] info: [UserDocService] Built search index with 95 terms
[2026-01-28 13:45:46] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 13:45:46] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 13:45:46] info: [UserDocService] Built search index with 95 terms
[2026-01-28 13:45:46] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 13:45:46] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 13:45:46] info: [UserDocService] Built search index with 95 terms
[2026-01-28 13:45:46] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 13:45:46] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 13:45:46] info: [UserDocService] Built search index with 95 terms
[2026-01-28 13:45:46] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 13:45:46] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 13:45:46] info: [UserDocService] Built search index with 95 terms
[2026-01-28 13:45:46] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 13:45:46] warn: [UserDocService] Document not found: non-existent
[2026-01-28 13:45:46] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 13:45:46] info: [UserDocService] Built search index with 95 terms
[2026-01-28 13:45:46] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 13:45:46] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 13:45:46] info: [UserDocService] Built search index with 95 terms
[2026-01-28 13:45:46] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 13:45:46] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 13:45:46] info: [UserDocService] Built search index with 95 terms
[2026-01-28 13:45:46] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 13:45:46] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 13:45:46] info: [UserDocService] Built search index with 95 terms
[2026-01-28 13:45:46] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 13:45:46] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 13:45:46] info: [UserDocService] Built search index with 95 terms
[2026-01-28 13:45:46] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 13:45:46] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 13:45:46] info: [UserDocService] Built search index with 95 terms
[2026-01-28 13:45:46] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 13:45:46] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 13:45:46] info: [UserDocService] Built search index with 95 terms
[2026-01-28 13:45:46] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 13:45:46] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 13:45:46] info: [UserDocService] Built search index with 95 terms
[2026-01-28 13:45:46] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 13:45:46] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 13:45:46] info: [UserDocService] Built search index with 95 terms
[2026-01-28 13:45:46] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 13:45:46] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 13:45:46] info: [UserDocService] Built search index with 95 terms
[2026-01-28 13:45:46] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 13:45:46] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 13:45:46] info: [UserDocService] Built search index with 95 terms
[2026-01-28 13:45:46] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 13:45:46] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 13:45:46] info: [UserDocService] Built search index with 95 terms
[2026-01-28 13:45:46] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 13:45:46] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 13:45:46] info: [UserDocService] Built search index with 95 terms
[2026-01-28 13:45:46] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 13:45:46] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 13:45:46] info: [UserDocService] Built search index with 95 terms
[2026-01-28 13:45:46] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 13:45:46] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 13:45:46] info: [UserDocService] Built search index with 95 terms
[2026-01-28 13:45:46] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 13:45:46] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 13:45:46] info: [UserDocService] Built search index with 95 terms
[2026-01-28 13:45:46] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 13:45:46] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 13:45:46] info: [UserDocService] Built search index with 95 terms
[2026-01-28 13:45:46] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 13:45:46] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 13:45:46] info: [UserDocService] Built search index with 95 terms
[2026-01-28 13:45:46] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 13:45:46] info: [UserDocService] Loaded 5 documentation files
[2026-01-28 13:45:46] info: [UserDocService] Built search index with 95 terms
[2026-01-28 13:45:46] info: [UserDocService] Documentation refreshed successfully
[2026-01-28 13:45:46] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 13:45:46] info: [UserDocService] Built search index with 95 terms
[2026-01-28 13:45:46] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 13:45:46] warn: [UserDocService] Documentation directory not found
[2026-01-28 13:45:46] info: [UserDocService] Built search index with 0 terms
[2026-01-28 13:45:46] info: [UserDocService] Documentation refreshed successfully
[2026-01-28 13:45:46] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 13:45:46] info: [UserDocService] Built search index with 95 terms
[2026-01-28 13:45:46] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 13:45:46] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 13:45:46] info: [UserDocService] Built search index with 95 terms
[2026-01-28 13:45:46] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 13:45:46] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 13:45:46] info: [UserDocService] Built search index with 95 terms
[2026-01-28 13:45:46] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 13:45:46] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 13:45:46] info: [UserDocService] Built search index with 95 terms
[2026-01-28 13:45:46] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 13:45:46] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 13:45:46] info: [UserDocService] Built search index with 95 terms
[2026-01-28 13:45:46] info: [UserDocService] Documentation system initialized successfully
PASS __tests__/services/userDocumentation.test.mjs
  User Documentation Service
    Documentation Loading
      √ loads all documentation files correctly (16 ms)
      √ extracts document metadata correctly (13 ms)
      √ extracts sections correctly (8 ms)
      √ builds search index correctly (7 ms)
    Document Retrieval
      √ retrieves existing document correctly (7 ms)
      √ returns null for non-existent document (8 ms)
      √ tracks view analytics correctly (11 ms)
      √ gets all documents correctly (8 ms)
    Search Functionality
      √ searches documentation content successfully (8 ms)
      √ handles single word searches (8 ms)
      √ returns empty results for non-matching search (11 ms)
      √ tracks search analytics (8 ms)
      √ finds matching sections in search results (7 ms)
      √ respects search options (8 ms)
    Analytics and Reporting
      √ generates analytics correctly (8 ms)
      √ tracks popular documents correctly (11 ms)
      √ limits search query history (9 ms)
    Table of Contents
      √ generates table of contents correctly (8 ms)
      √ creates proper anchors for sections (7 ms)
    Content Parsing
      √ counts words correctly (10 ms)
      √ extracts searchable words correctly (7 ms)
      √ normalizes search queries correctly (7 ms)
      √ identifies stop words correctly (7 ms)
    System Management
      √ refreshes documentation successfully (15 ms)
      √ handles refresh errors gracefully (10 ms)
    Helper Functions
      √ getDocument helper function works (7 ms)
      √ searchDocumentation helper function works (9 ms)
      √ getAllDocuments helper function works (11 ms)
      √ getDocumentationAnalytics helper function works (8 ms)
      √ getTableOfContents helper function works (8 ms)

[2026-01-28 13:45:46] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:46] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:46] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:46] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:45:46] info: [ownership] Validated ownership: user user-1 owns horse 1
[2026-01-28 13:45:46] info: [ownership] Validated ownership: user user-1 owns groom 5
[2026-01-28 13:45:46] info: [ownership] Validated ownership: user user-1 owns horse 10
[2026-01-28 13:45:46] info: [ownership] Validated ownership: user user-1 owns horse 20
[2026-01-28 13:45:46] warn: [ownership] horse 1 not found or not owned by user user-1
[2026-01-28 13:45:46] warn: [ownership] groom 5 not found or not owned by user user-1
[2026-01-28 13:45:46] info: [ownership] Validated ownership: user user-1 owns training-session 1
[2026-01-28 13:45:46] info: [ownership] Validated ownership: user user-1 owns competition-entry 1
[2026-01-28 13:45:46] info: [ownership] Found owned horse 1 for user user-1
[2026-01-28 13:45:46] info: [ownership] Found owned groom 5 for user user-1
[2026-01-28 13:45:46] info: [ownership] Batch validation: user user-1 owns 2/2 horses
PASS __tests__/unit/security/ownership-checks.test.mjs
  Ownership Validation Unit Tests
    Owned Resource Scenarios
      √ should allow access to owned horse (4 ms)
      √ should allow access to owned groom (2 ms)
      √ should attach resource to request object and validatedResources (2 ms)
      √ should work with custom idParam (1 ms)
    Not Owned Resource Scenarios
      √ should return 404 for horse owned by different user (10 ms)
      √ should return 404 for groom owned by different user (4 ms)
    Resource Type Validation
      √ should handle training-session resource type (maps to trainingLog) (2 ms)
      √ should handle competition-entry resource type (maps to competitionResult) (2 ms)
    findOwnedResource Helper Function
      √ should find owned horse using userId (2 ms)
      √ should find owned groom using userId (2 ms)
    validateBatchOwnership Helper Function
      √ should validate ownership of multiple horses using userId (2 ms)

[2026-01-28 13:45:47] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:47] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:47] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:47] info: [envValidator] Test environment validation complete. Success: true
PASS tests/unit/trainingAnalyticsService.test.mjs
  Training Analytics Service
    Training Session Log
      √ should provide complete training session history (64 ms)
      √ should order training history by date (most recent first) (8 ms)
    Training Frequency Analysis
      √ should track training frequency and recent activity (11 ms)
      √ should calculate sessions per discipline correctly (8 ms)
    Discipline Training Balance
      √ should show training distribution across disciplines (8 ms)
      √ should calculate training percentages correctly (8 ms)
    Error Handling
      √ should handle non-existent horse gracefully (10 ms)
      √ should handle horse with no training history (21 ms)

[2026-01-28 13:45:47] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:47] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:47] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:47] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:45:47] info: [horseXpModel.addXpToHorse] Added 30 XP to horse XP Test Horse (ID: 147120). New XP: 30, Stat points gained: 0, Available: 0
[2026-01-28 13:45:47] info: [horseXpModel.addXpToHorse] Added 30 XP to horse XP Test Horse (ID: 147120). New XP: 30, Stat points gained: 0, Available: 0
[2026-01-28 13:45:47] info: [horseXpModel.addXpToHorse] Added 30 XP to horse XP Test Horse (ID: 147120). New XP: 60, Stat points gained: 0, Available: 0
[2026-01-28 13:45:47] info: [horseXpModel.addXpToHorse] Added 27 XP to horse XP Test Horse (ID: 147120). New XP: 87, Stat points gained: 0, Available: 0
[2026-01-28 13:45:47] info: [horseXpModel.addXpToHorse] Added 25 XP to horse XP Test Horse (ID: 147120). New XP: 112, Stat points gained: 1, Available: 1
[2026-01-28 13:45:47] info: [horseXpModel.addXpToHorse] Added 150 XP to horse XP Test Horse (ID: 147120). New XP: 150, Stat points gained: 1, Available: 1
[2026-01-28 13:45:47] info: [horseXpModel.addXpToHorse] Added 200 XP to horse XP Test Horse (ID: 147120). New XP: 200, Stat points gained: 2, Available: 2
[2026-01-28 13:45:48] info: [horseXpModel.allocateStatPoint] Allocated 1 stat point to speed for horse XP Test Horse (ID: 147120). New speed: 76, Remaining points: 1
[2026-01-28 13:45:48] info: [horseXpModel.addXpToHorse] Added 50 XP to horse XP Test Horse (ID: 147120). New XP: 50, Stat points gained: 0, Available: 0
[2026-01-28 13:45:48] info: [horseXpModel.addXpToHorse] Added 30 XP to horse XP Test Horse (ID: 147120). New XP: 80, Stat points gained: 0, Available: 0
[2026-01-28 13:45:48] info: [horseXpModel.addXpToHorse] Added 25 XP to horse XP Test Horse (ID: 147120). New XP: 105, Stat points gained: 1, Available: 1
[2026-01-28 13:45:48] info: [horseXpModel.getHorseXpHistory] Retrieved 3 XP events for horse 147120
[2026-01-28 13:45:48] info: [horseXpModel.addXpToHorse] Added 30 XP to horse XP Test Horse (ID: 147120). New XP: 30, Stat points gained: 0, Available: 0
[2026-01-28 13:45:48] info: [horseXpModel.addXpToHorse] Added 27 XP to horse XP Test Horse (ID: 147120). New XP: 57, Stat points gained: 0, Available: 0
[2026-01-28 13:45:48] info: [horseXpModel.addXpToHorse] Added 30 XP to horse XP Test Horse (ID: 147120). New XP: 87, Stat points gained: 0, Available: 0
[2026-01-28 13:45:48] info: [horseXpModel.addXpToHorse] Added 25 XP to horse XP Test Horse (ID: 147120). New XP: 112, Stat points gained: 1, Available: 1
[2026-01-28 13:45:48] info: [horseXpModel.allocateStatPoint] Allocated 1 stat point to speed for horse XP Test Horse (ID: 147120). New speed: 77, Remaining points: 0
[2026-01-28 13:45:48] info: [horseXpModel.getHorseXpHistory] Retrieved 4 XP events for horse 147120
PASS tests/horseXpIntegration.test.mjs
  🐎 INTEGRATION: Horse XP System - Core Functionality Integration
    Competition Integration
      √ should award horse XP when horse places in competition (34 ms)
      √ should award stat points when horse reaches 100 XP (37 ms)
    Horse XP Model Integration
      √ should get horse XP status directly from model (16 ms)
      √ should allocate stat points directly via model (20 ms)
      √ should get horse XP history directly from model (30 ms)
    Complete Workflow Integration
      √ should complete full horse XP workflow: competition → XP → stat allocation (41 ms)

[2026-01-28 13:45:48] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:48] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:48] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:48] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:45:48] warn: [HTTPS] Insecure HTTP request detected, redirecting to HTTPS
[2026-01-28 13:45:48] warn: [HTTPS] Insecure HTTP request detected, redirecting to HTTPS
[2026-01-28 13:45:48] warn: [API Key] Invalid or missing API key
[2026-01-28 13:45:48] warn: [API Key] Invalid or missing API key
[2026-01-28 13:45:48] warn: [API Key] Invalid or missing API key
[2026-01-28 13:45:48] warn: [API Key] API_KEY not configured - requests with no origin are allowed (INSECURE)
[2026-01-28 13:45:48] warn: [API Key] API_KEY not configured - requests with no origin are allowed (INSECURE)
[2026-01-28 13:45:48] warn: CORS blocked request from origin: https://evil.com
[2026-01-28 13:45:48] warn: [CORS] Request with no origin detected - API key validation required
[2026-01-28 13:45:48] warn: [CORS] Request with no origin detected - API key validation required
  console.error
    TypeError: Cannot read properties of undefined (reading 'get')
        at Object.trustProxy (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:140:21)
        at Object.wrappedValidations.<computed> [as trustProxy] (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:370:22)
        at Object.keyGenerator (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:642:20)
        at C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:696:32
        at C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:676:5
        at Object.<anonymous> (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\__tests__\middleware\security.test.mjs:447:7)

    [0m [90m 445 |[39m
     [90m 446 |[39m       [90m// First request should succeed[39m
    [31m[1m>[22m[39m[90m 447 |[39m       [36mawait[39m testLimiter(req[33m,[39m res[33m,[39m next)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 448 |[39m       expect(next)[33m.[39mtoHaveBeenCalled()[33m;[39m
     [90m 449 |[39m
     [90m 450 |[39m       [90m// Reset mocks[39m[0m

      at Object.wrappedValidations.<computed> [as trustProxy] (node_modules/express-rate-limit/dist/index.mjs:378:21)
      at Object.keyGenerator (node_modules/express-rate-limit/dist/index.mjs:642:20)
      at node_modules/express-rate-limit/dist/index.mjs:696:32
      at node_modules/express-rate-limit/dist/index.mjs:676:5
      at Object.<anonymous> (__tests__/middleware/security.test.mjs:447:7)

[2026-01-28 13:45:48] warn: Rate limit exceeded for IP: 192.168.1.100
PASS __tests__/middleware/security.test.mjs
  Security Middleware
    enforceHttps()
      Development environment
        √ should allow HTTP requests in development (6 ms)
      Production environment
        √ should allow HTTPS requests (req.secure) (2 ms)
        √ should allow HTTPS requests (x-forwarded-proto header) (2 ms)
        √ should allow HTTPS requests (x-forwarded-ssl header) (7 ms)
        √ should redirect HTTP to HTTPS with 301 status (5 ms)
        √ should preserve query parameters in redirect (3 ms)
    addSecurityHeaders()
      √ should add HSTS header in production (2 ms)
      √ should NOT add HSTS header in development (2 ms)
      √ should add X-Frame-Options header (1 ms)
      √ should add X-Content-Type-Options header (1 ms)
      √ should add X-XSS-Protection header (2 ms)
      √ should add Referrer-Policy header (2 ms)
      √ should add Permissions-Policy header (6 ms)
      √ should add all 6 security headers in production (2 ms)
    validateApiKey()
      Requests WITH origin header
        √ should skip API key validation for browser requests (2 ms)
        √ should skip validation even if X-API-Key is missing (1 ms)
      Requests WITHOUT origin header (mobile/API clients)
        √ should accept valid API key (2 ms)
        √ should reject missing API key (3 ms)
        √ should reject invalid API key (3 ms)
        √ should be case-sensitive for API key (3 ms)
      Missing API_KEY environment variable
        √ should allow requests without API key (backward compatibility) (7 ms)
        √ should log warning when API_KEY not configured (3 ms)
    CORS Configuration
      √ should have credentials enabled (4 ms)
      √ should allow standard HTTP methods (2 ms)
      √ should allow required headers (2 ms)
      corsOptions.origin()
        √ should allow localhost:3000 (2 ms)
        √ should allow localhost:3001 (2 ms)
        √ should allow 127.0.0.1:3000 (1 ms)
        √ should allow additional origins from environment (1 ms)
        √ should block unknown origins (2 ms)
        √ should allow requests with no origin (mobile apps) (2 ms)
        √ should allow requests with null origin (2 ms)
    createRateLimiter()
      √ should create a rate limiter with custom window and max (3 ms)
      √ should create rate limiter with default values (1 ms)
      √ should return rate limiter middleware (2 ms)
    Rate Limiter Instances
      √ should export apiLimiter (2 ms)
      √ should trigger rate limit handler when limit exceeded (10 ms)
    createSecurityMiddleware()
      √ should return an array of middleware functions (2 ms)
      √ should include all required middleware in correct order (5 ms)

[2026-01-28 13:45:48] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:48] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:48] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:48] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:45:48] info: [calculateCompetitionScore] Horse Competition Star: Base score for Racing: 165
[2026-01-28 13:45:48] info: [calculateCompetitionScore] Horse Competition Star: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:48] info: [calculateCompetitionScore] Horse Competition Star: Luck modifier: -6.8%, adjustment: -11.6
[2026-01-28 13:45:48] info: [calculateCompetitionScore] Horse Competition Star: Final score: 158 (base: 165, trait: +5, luck: -11.6)
[2026-01-28 13:45:48] info: [calculateCompetitionScore] Horse Competition Novice: Base score for Racing: 115
[2026-01-28 13:45:48] info: [calculateCompetitionScore] Horse Competition Novice: Luck modifier: -3.6%, adjustment: -4.1
[2026-01-28 13:45:48] info: [calculateCompetitionScore] Horse Competition Novice: Final score: 111 (base: 115, trait: +0, luck: -4.1)
[2026-01-28 13:45:48] info: [calculateCompetitionScore] Horse Competition Star: Base score for Racing: 165
[2026-01-28 13:45:48] info: [calculateCompetitionScore] Horse Competition Star: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:48] info: [calculateCompetitionScore] Horse Competition Star: Luck modifier: 6.7%, adjustment: 11.4
[2026-01-28 13:45:48] info: [calculateCompetitionScore] Horse Competition Star: Final score: 181 (base: 165, trait: +5, luck: 11.4)
[2026-01-28 13:45:48] info: [calculateCompetitionScore] Horse Competition Novice: Base score for Racing: 115
[2026-01-28 13:45:48] info: [calculateCompetitionScore] Horse Competition Novice: Luck modifier: 5.6%, adjustment: 6.5
[2026-01-28 13:45:48] info: [calculateCompetitionScore] Horse Competition Novice: Final score: 121 (base: 115, trait: +0, luck: 6.5)
[2026-01-28 13:45:49] info: [resultModel.saveResult] Successfully created new result for horse 147121 in show 8268 with score 85.5
[2026-01-28 13:45:49] info: [resultModel.saveResult] Successfully created new result for horse 147121 in show 8268 with score 90
[2026-01-28 13:45:49] info: [resultModel.saveResult] Successfully created new result for horse 147122 in show 8268 with score 85
[2026-01-28 13:45:49] info: [resultModel.getResultsByShow] Found 3 results for show 8268
[2026-01-28 13:45:49] info: [resultModel.saveResult] Successfully created new result for horse 147121 in show 8268 with score 88
[2026-01-28 13:45:49] info: [resultModel.getResultsByShow] Found 0 results for show 99999
[2026-01-28 13:45:49] info: [resultModel.saveResult] Successfully created new result for horse 147121 in show 8268 with score 92
[2026-01-28 13:45:49] info: [resultModel.saveResult] Successfully created new result for horse 147123 in show 8268 with score 84
[2026-01-28 13:45:49] info: [resultModel.saveResult] Successfully created new result for horse 147122 in show 8268 with score 88
PASS tests/competitionController-business-logic.test.mjs
  🏆 INTEGRATION: Competition Controller Business Logic - Real Competition Workflow
    Competition Scoring Business Logic
      √ CALCULATES realistic competition scores based on horse stats (8 ms)
      √ APPLIES trait bonuses correctly in competition scoring (12 ms)
    Competition Result Persistence
      √ PERSISTS competition results in database correctly (11 ms)
      √ RETRIEVES competition results by show correctly (19 ms)
      √ MAINTAINS database integrity with proper relationships (13 ms)
    Error Handling and Edge Cases
      √ HANDLES invalid result data gracefully (3 ms)
      √ HANDLES non-existent show ID gracefully (5 ms)
      √ MAINTAINS data consistency during concurrent operations (65 ms)

[2026-01-28 13:45:49] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:49] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:49] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:49] info: [envValidator] Test environment validation complete. Success: true
PASS tests/services/carePatternAnalyzerEnhanced.test.mjs
  Enhanced Care Pattern Analyzer
    calculateAdvancedConsistencyScore
      √ should calculate weighted consistency score with multiple factors (27 ms)
      √ should detect inconsistent care patterns (11 ms)
    detectCareQualityTrends
      √ should detect improving care quality trends (8 ms)
      √ should detect declining care quality trends (7 ms)
    analyzeGroomEffectiveness
      √ should analyze individual groom effectiveness (5 ms)
      √ should identify most and least effective grooms (3 ms)
    calculateCareRiskScore
      √ should calculate comprehensive care risk assessment (4 ms)
      √ should identify specific risk factors (3 ms)
    Enhanced Care Pattern Integration
      √ should integrate all enhanced features for comprehensive analysis (8 ms)

[2026-01-28 13:45:49] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:49] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:49] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:49] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:45:50] info: Flag brave triggered for horse Test Foal 6mo 1769625949991: Consistent care with good stress management and task diversity
[2026-01-28 13:45:50] info: Flag confident triggered for horse Test Foal 6mo 1769625949991: Strong bond growth with diverse, high-quality experiences
[2026-01-28 13:45:50] info: Flag resilient triggered for horse Test Foal 6mo 1769625949991: Generic positive flag evaluation
[2026-01-28 13:45:50] error: Error evaluating triggers for flag fearful: Cannot read properties of undefined (reading 'length')
[2026-01-28 13:45:50] error: Error evaluating triggers for flag insecure: Cannot read properties of undefined (reading 'neglectRatio')
PASS tests/services/flagAssignmentEngineEnhanced.test.mjs
  Enhanced Flag Assignment Engine
    evaluatePersonalityModifiedTriggers
      √ should apply calm groom personality modifiers correctly (9 ms)
      √ should apply energetic groom personality modifiers correctly (5 ms)
    calculateFlagAssignmentScore
      √ should calculate comprehensive flag assignment scores (7 ms)
      √ should apply age-based sensitivity modifiers (6 ms)
    analyzeTemporalPatterns
      √ should analyze temporal patterns in care quality (15 ms)
      √ should identify critical periods for flag assignment (3 ms)
    Advanced Flag Assignment Integration
      √ should integrate all enhancement features for comprehensive evaluation (54 ms)

[2026-01-28 13:45:50] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:50] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:50] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:50] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 4
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 20 points for trait: bonded (total: 20)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 20 points for trait: resilient (total: 20)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 2
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: confident (total: 10)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: early_touch, count: 3
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: calm (total: 15)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 20, total: 20, chance: 20%
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: bonded (rolled: 5.00)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 20, total: 20, chance: 20%
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: resilient (rolled: 5.00)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 10, total: 10, chance: 10%
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: confident (rolled: 5.00)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: calm, base: 15, total: 15, chance: 15%
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: calm (rolled: 5.00)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["bonded","resilient","confident","calm"]
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 7
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 10 (streak: 7)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 2
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: bonded (total: 10)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: resilient (total: 10)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 1
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 5 points for trait: confident (total: 5)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 10, total: 20, chance: 20%
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: bonded (rolled: 10.00)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 10, total: 20, chance: 20%
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: resilient (rolled: 10.00)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 5, total: 15, chance: 15%
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: confident (rolled: 10.00)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["bonded","resilient","confident"]
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 20
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 100 points for trait: bonded (total: 100)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 100 points for trait: resilient (total: 100)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 15
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 75 points for trait: confident (total: 75)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 100, total: 100, chance: 60%
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: bonded (rolled: 50.00)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 100, total: 100, chance: 60%
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: resilient (rolled: 50.00)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 75, total: 75, chance: 60%
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: confident (rolled: 50.00)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["bonded","resilient","confident"]
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 2
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: bonded (total: 10)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: resilient (total: 10)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 1
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 5 points for trait: confident (total: 5)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 10, total: 10, chance: 10%
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: bonded (rolled: 90.00)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 10, total: 10, chance: 10%
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: resilient (rolled: 90.00)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 5, total: 5, chance: 5%
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: confident (rolled: 90.00)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: []
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: []
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] No valid task log provided
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 3
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: bonded (total: 15)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: resilient (total: 15)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 15, total: 15, chance: 15%
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: bonded (rolled: 10.00)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 15, total: 15, chance: 15%
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: resilient (rolled: 10.00)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["bonded","resilient"]
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 2
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: confident (total: 10)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: showground_exposure, count: 1
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 5 points for trait: crowdReady (total: 5)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 5 points for trait: confident (total: 15)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 15, total: 15, chance: 15%
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: confident (rolled: 4.00)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: crowdReady, base: 5, total: 5, chance: 5%
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: crowdReady (rolled: 4.00)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["confident","crowdReady"]
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 5
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 25 points for trait: bonded (total: 25)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 25 points for trait: resilient (total: 25)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 3
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: confident (total: 15)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: early_touch, count: 2
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: calm (total: 10)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 25, total: 25, chance: 25%
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: bonded (rolled: 10.00)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 25, total: 25, chance: 25%
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: resilient (rolled: 10.00)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 15, total: 15, chance: 15%
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: confident (rolled: 10.00)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: calm, base: 10, total: 10, chance: 10%
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: calm (rolled: 10.00)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["bonded","resilient","confident"]
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 7
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 10 (streak: 7)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 8
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 40 points for trait: bonded (total: 40)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 40 points for trait: resilient (total: 40)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 5
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 25 points for trait: confident (total: 25)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: showground_exposure, count: 3
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: crowdReady (total: 15)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: confident (total: 40)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: early_touch, count: 6
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 30 points for trait: calm (total: 30)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: hoof_handling, count: 4
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 20 points for trait: showCalm (total: 20)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: sponge_bath, count: 2
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: showCalm (total: 30)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: presentationBoosted (total: 10)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 40, total: 50, chance: 50%
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: bonded (rolled: 30.00)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 40, total: 50, chance: 50%
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: resilient (rolled: 30.00)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 40, total: 50, chance: 50%
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: confident (rolled: 30.00)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: crowdReady, base: 15, total: 25, chance: 25%
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: crowdReady (rolled: 30.00)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: calm, base: 30, total: 40, chance: 40%
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: calm (rolled: 30.00)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: showCalm, base: 30, total: 40, chance: 40%
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: showCalm (rolled: 30.00)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: presentationBoosted, base: 10, total: 20, chance: 20%
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: presentationBoosted (rolled: 30.00)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["bonded","resilient","confident","calm","showCalm"]
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 3
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: confident (total: 15)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 15, total: 15, chance: 15%
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: confident (rolled: 10.00)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["confident"]
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: -5
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: -5)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 2
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: bonded (total: 10)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: resilient (total: 10)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 10, total: 10, chance: 10%
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: bonded (rolled: 5.00)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 10, total: 10, chance: 10%
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: resilient (rolled: 5.00)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["bonded","resilient"]
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 50
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 250 points for trait: bonded (total: 250)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 250 points for trait: resilient (total: 250)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 30
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 150 points for trait: confident (total: 150)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 250, total: 250, chance: 60%
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: bonded (rolled: 70.00)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 250, total: 250, chance: 60%
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: resilient (rolled: 70.00)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 150, total: 150, chance: 60%
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: confident (rolled: 70.00)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: []
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 3
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: bonded (total: 15)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: resilient (total: 15)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 2
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: confident (total: 10)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 15, total: 15, chance: 15%
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: bonded (rolled: 5.00)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 15, total: 15, chance: 15%
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: resilient (rolled: 5.00)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 10, total: 10, chance: 10%
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: confident (rolled: 5.00)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["bonded","resilient","confident"]
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 3
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: bonded (total: 15)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: resilient (total: 15)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 2
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: confident (total: 10)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 15, total: 15, chance: 15%
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: bonded (rolled: 12.00)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 15, total: 15, chance: 15%
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: resilient (rolled: 12.00)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 10, total: 10, chance: 10%
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: confident (rolled: 12.00)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["bonded","resilient"]
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 3
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: bonded (total: 15)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: resilient (total: 15)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 2
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: confident (total: 10)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 15, total: 15, chance: 15%
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: bonded (rolled: 20.00)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 15, total: 15, chance: 15%
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: resilient (rolled: 20.00)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 10, total: 10, chance: 10%
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: confident (rolled: 20.00)
[2026-01-28 13:45:50] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: []
PASS tests/traitMilestoneEvaluation.test.mjs
  Trait Milestone Evaluation
    evaluateEpigeneticTagsFromFoalTasks
      √ should evaluate traits from task log without streak bonus (23 ms)
      √ should apply streak bonus when consecutive days >= 7 (11 ms)
      √ should cap trait probability at 60% (15 ms)
      √ should not assign traits when random chance is too high (15 ms)
      √ should handle empty task log (3 ms)
      √ should handle null task log (2 ms)
      √ should handle tasks not in influence map (8 ms)
      √ should handle multiple tasks influencing same trait (13 ms)
      √ should return unique traits only (17 ms)
      √ should handle comprehensive foal development scenario (30 ms)
      √ should handle edge case with zero task counts (9 ms)
      √ should handle negative streak values (9 ms)
      √ should handle very high task counts with capping (14 ms)
      √ should demonstrate probability distribution (35 ms)

[2026-01-28 13:45:50] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:50] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:50] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:50] info: [envValidator] Test environment validation complete. Success: true
PASS tests/data-check.test.mjs
  🔍 INTEGRATION: Database Data Check - Live Data Validation & Debugging
    √ should check what users exist (51 ms)
    √ should check what players exist (using user table) (3 ms)
    √ should check what horses exist (7 ms)

[2026-01-28 13:45:51] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:51] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:51] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:51] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:45:51] warn: [Validation] Input validation failed
[2026-01-28 13:45:51] warn: [Validation] Input validation failed
[2026-01-28 13:45:51] warn: [Validation] Input validation failed
PASS __tests__/middleware/validationErrorHandler.test.mjs
  Validation Error Handler
    handleValidationErrors()
      √ should call next() when no validation errors (4 ms)
      √ should return 400 when validation errors exist (13 ms)
      √ should handle single validation error (3 ms)
      √ should handle nested field validation errors (3 ms)
    sanitizeRequestData() - XSS Prevention
      No validation errors
        √ should sanitize body data and remove extra fields (3 ms)
        √ should sanitize query parameters (2 ms)
        √ should sanitize route parameters (3 ms)
        √ should handle multiple request sources simultaneously (2 ms)
        √ should preserve validated data with special characters (6 ms)
        √ should handle empty validated data (2 ms)
        √ should handle optional fields (2 ms)
      With validation errors
        √ should NOT modify request data when validation failed (2 ms)
        √ should still call next() to allow handleValidationErrors to run (2 ms)
      XSS Attack Scenarios
        √ should prevent <script> injection (3 ms)
        √ should prevent event handler injection (1 ms)
        √ should prevent iframe injection (1 ms)
        √ should prevent SVG XSS (1 ms)
      Parameter Pollution Prevention (CWE-20)
        √ should prevent array parameter pollution (5 ms)
        √ should prevent object parameter pollution (2 ms)
        √ should prevent duplicate parameter names (2 ms)

[2026-01-28 13:45:51] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:51] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:51] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:51] info: [envValidator] Test environment validation complete. Success: true
PASS tests/services/groomPersonalityTraits.test.mjs
  Groom Personality Trait System
    getGroomPersonalityTraits
      √ should return detailed personality traits for calm groom (6 ms)
      √ should return detailed personality traits for energetic groom (4 ms)
      √ should return detailed personality traits for methodical groom (7 ms)
    calculatePersonalityModifiers
      √ should calculate modifiers for calm groom with nervous horse (5 ms)
      √ should calculate modifiers for energetic groom with confident horse (5 ms)
      √ should calculate modifiers for energetic groom with nervous horse (4 ms)
      √ should calculate modifiers for methodical groom with any horse (4 ms)
    analyzePersonalityCompatibility
      √ should analyze compatibility between groom and horse personalities (5 ms)
      √ should identify poor compatibility combinations (4 ms)
    updatePersonalityTraits
      √ should update personality traits based on interaction outcomes (14 ms)
    getPersonalityTraitDefinitions
      √ should return comprehensive trait definitions (2 ms)

[2026-01-28 13:45:52] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:52] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:52] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:52] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:45:52] warn: [CORS] Request with no origin detected - API key validation required
[2026-01-28 13:45:52] warn: CORS blocked request from origin: http://malicious-site.com
[2026-01-28 13:45:52] warn: Rate limit exceeded for IP: ::ffff:127.0.0.1
[2026-01-28 13:45:52] warn: [CORS] Request with no origin detected - API key validation required
[2026-01-28 13:45:52] warn: [API Key] API_KEY not configured - requests with no origin are allowed (INSECURE)
PASS tests/middleware/security.test.mjs
  Security Middleware
    CORS Configuration
      √ should allow requests from localhost:3000 (4 ms)
      √ should allow requests from localhost:3001 (1 ms)
      √ should allow requests with no origin (3 ms)
      √ should block requests from unauthorized origins (8 ms)
      √ should allow origins from environment variable (2 ms)
    Rate Limiter
      √ should create rate limiter with default values (2 ms)
      √ should create rate limiter with custom values (2 ms)
      √ should limit requests when threshold is exceeded (40 ms)
    Helmet Configuration
      √ should have proper CSP directives (2 ms)
      √ should have HSTS configuration (1 ms)
      √ should disable crossOriginEmbedderPolicy for API compatibility (1 ms)
    Security Middleware Factory
      √ should create security middleware array (3 ms)
      √ should apply security headers through helmet (21 ms)

[2026-01-28 13:45:52] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:52] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:52] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:52] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:45:52] info: [horseModel.hasTrait] Checking if horse invalid has trait 'trait'
[2026-01-28 13:45:52] error: [horseModel.hasTrait] Error checking trait: Invalid horse ID provided
[2026-01-28 13:45:52] info: [horseModel.hasTrait] Checking if horse -1 has trait 'trait'
[2026-01-28 13:45:52] error: [horseModel.hasTrait] Error checking trait: Invalid horse ID provided
[2026-01-28 13:45:52] info: [horseModel.hasTrait] Checking if horse 0 has trait 'trait'
[2026-01-28 13:45:52] error: [horseModel.hasTrait] Error checking trait: Invalid horse ID provided
[2026-01-28 13:45:52] info: [horseModel.hasTrait] Checking if horse null has trait 'trait'
[2026-01-28 13:45:52] error: [horseModel.hasTrait] Error checking trait: Invalid horse ID provided
[2026-01-28 13:45:52] info: [horseModel.hasTrait] Checking if horse 1 has trait ''
[2026-01-28 13:45:52] error: [horseModel.hasTrait] Error checking trait: Trait name must be a non-empty string
[2026-01-28 13:45:52] info: [horseModel.hasTrait] Checking if horse 1 has trait 'null'
[2026-01-28 13:45:52] error: [horseModel.hasTrait] Error checking trait: Trait name must be a non-empty string
[2026-01-28 13:45:52] info: [horseModel.hasTrait] Checking if horse 1 has trait 'undefined'
[2026-01-28 13:45:52] error: [horseModel.hasTrait] Error checking trait: Trait name must be a non-empty string
[2026-01-28 13:45:52] info: [horseModel.hasTrait] Checking if horse 1 has trait '123'
[2026-01-28 13:45:52] error: [horseModel.hasTrait] Error checking trait: Trait name must be a non-empty string
[2026-01-28 13:45:52] info: [horseModel.getPositiveTraitsArray] Getting positive traits for horse invalid
[2026-01-28 13:45:52] error: [horseModel.getPositiveTraitsArray] Error getting positive traits: Invalid horse ID provided
[2026-01-28 13:45:52] info: [horseModel.getPositiveTraitsArray] Getting positive traits for horse -1
[2026-01-28 13:45:52] error: [horseModel.getPositiveTraitsArray] Error getting positive traits: Invalid horse ID provided
[2026-01-28 13:45:52] info: [horseModel.getPositiveTraitsArray] Getting positive traits for horse 0
[2026-01-28 13:45:52] error: [horseModel.getPositiveTraitsArray] Error getting positive traits: Invalid horse ID provided
[2026-01-28 13:45:52] info: [horseModel.getNegativeTraitsArray] Getting negative traits for horse invalid
[2026-01-28 13:45:52] error: [horseModel.getNegativeTraitsArray] Error getting negative traits: Invalid horse ID provided
[2026-01-28 13:45:52] info: [horseModel.getNegativeTraitsArray] Getting negative traits for horse -1
[2026-01-28 13:45:52] error: [horseModel.getNegativeTraitsArray] Error getting negative traits: Invalid horse ID provided
[2026-01-28 13:45:52] info: [horseModel.getNegativeTraitsArray] Getting negative traits for horse 0
[2026-01-28 13:45:52] error: [horseModel.getNegativeTraitsArray] Error getting negative traits: Invalid horse ID provided
[2026-01-28 13:45:52] info: [horseModel.addTrait] Adding trait 'trait' to category 'positive' for horse invalid
[2026-01-28 13:45:52] error: [horseModel.addTrait] Error adding trait: Invalid horse ID provided
[2026-01-28 13:45:52] info: [horseModel.addTrait] Adding trait 'trait' to category 'positive' for horse -1
[2026-01-28 13:45:52] error: [horseModel.addTrait] Error adding trait: Invalid horse ID provided
[2026-01-28 13:45:52] info: [horseModel.addTrait] Adding trait 'trait' to category 'positive' for horse 0
[2026-01-28 13:45:52] error: [horseModel.addTrait] Error adding trait: Invalid horse ID provided
[2026-01-28 13:45:52] info: [horseModel.addTrait] Adding trait '' to category 'positive' for horse 1
[2026-01-28 13:45:52] error: [horseModel.addTrait] Error adding trait: Trait name must be a non-empty string
[2026-01-28 13:45:52] info: [horseModel.addTrait] Adding trait 'null' to category 'positive' for horse 1
[2026-01-28 13:45:52] error: [horseModel.addTrait] Error adding trait: Trait name must be a non-empty string
[2026-01-28 13:45:52] info: [horseModel.addTrait] Adding trait '123' to category 'positive' for horse 1
[2026-01-28 13:45:52] error: [horseModel.addTrait] Error adding trait: Trait name must be a non-empty string
[2026-01-28 13:45:52] info: [horseModel.addTrait] Adding trait 'trait' to category 'invalid' for horse 1
[2026-01-28 13:45:52] error: [horseModel.addTrait] Error adding trait: Invalid category 'invalid'. Must be one of: positive, negative
[2026-01-28 13:45:52] info: [horseModel.addTrait] Adding trait 'trait' to category 'hidden' for horse 1
[2026-01-28 13:45:52] error: [horseModel.addTrait] Error adding trait: Invalid category 'hidden'. Must be one of: positive, negative
[2026-01-28 13:45:52] info: [horseModel.addTrait] Adding trait 'trait' to category '' for horse 1
[2026-01-28 13:45:52] error: [horseModel.addTrait] Error adding trait: Invalid category ''. Must be one of: positive, negative
[2026-01-28 13:45:52] info: [horseModel.hasTrait] Checking if horse 999999 has trait 'trait'
[2026-01-28 13:45:52] error: [horseModel.hasTrait] Error checking trait: Horse with ID 999999 not found
[2026-01-28 13:45:52] info: [horseModel.getPositiveTraitsArray] Getting positive traits for horse 999999
[2026-01-28 13:45:52] error: [horseModel.getPositiveTraitsArray] Error getting positive traits: Horse with ID 999999 not found
[2026-01-28 13:45:52] info: [horseModel.getNegativeTraitsArray] Getting negative traits for horse 999999
[2026-01-28 13:45:52] error: [horseModel.getNegativeTraitsArray] Error getting negative traits: Horse with ID 999999 not found
[2026-01-28 13:45:52] info: [horseModel.hasTrait] Checking if horse 999999 has trait 'trait'
[2026-01-28 13:45:52] error: [horseModel.hasTrait] Error checking trait: Horse with ID 999999 not found
[2026-01-28 13:45:52] info: [horseModel.getPositiveTraitsArray] Getting positive traits for horse 999999
[2026-01-28 13:45:52] error: [horseModel.getPositiveTraitsArray] Error getting positive traits: Horse with ID 999999 not found
[2026-01-28 13:45:52] info: [horseModel.getNegativeTraitsArray] Getting negative traits for horse 999999
[2026-01-28 13:45:52] error: [horseModel.getNegativeTraitsArray] Error getting negative traits: Horse with ID 999999 not found
PASS tests/horseModelTask7.test.mjs
  🐴 UNIT: Horse Model Task 7 - Instance-Style Helper Methods Validation
    API Validation Tests (without database)
      √ should validate hasTrait function signature (2 ms)
      √ should validate getPositiveTraitsArray function signature (1 ms)
      √ should validate getNegativeTraitsArray function signature (1 ms)
      √ should validate addTrait function signature
      √ should validate createHorse still works with epigenetic_modifiers
    Input Validation Tests
      √ should reject invalid horse IDs in hasTrait (10 ms)
      √ should reject invalid trait names in hasTrait (11 ms)
      √ should reject invalid horse IDs in getPositiveTraitsArray (6 ms)
      √ should reject invalid horse IDs in getNegativeTraitsArray (5 ms)
      √ should reject invalid inputs in addTrait (16 ms)
    Function Behavior Tests
      √ should handle non-existent horse IDs gracefully (58 ms)
      √ should validate that functions return correct types (17 ms)
    Integration with Existing System
      √ should verify epigenetic_modifiers default structure is supported (2 ms)
      √ should verify trait categories are properly defined (1 ms)
    TASK 7 Requirements Verification
      √ should verify all requested helper methods exist
      √ should verify method signatures match requirements (1 ms)
      √ should verify epigenetic_modifiers field structure (1 ms)

[2026-01-28 13:45:52] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:52] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:52] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:52] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:45:52] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:45:52] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:45:52] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:45:52] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:45:52] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:45:52] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:45:52] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:45:52] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:45:52] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:45:52] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:45:52] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:45:52] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:45:52] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:45:52] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:45:52] info: [MemoryManager] Starting memory and resource monitoring
[2026-01-28 13:45:52] info: [MemoryManager] Stopping memory and resource monitoring
[2026-01-28 13:45:52] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:45:52] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:45:52] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:45:52] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:45:52] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:45:52] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:45:52] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:45:52] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:45:52] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:45:52] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:45:52] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:45:52] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:45:52] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:45:52] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:45:52] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:45:52] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:45:52] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:45:52] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:45:52] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:45:52] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:45:52] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:45:52] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:45:52] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:45:52] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:45:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:45:53] info: [MemoryManager] Resource cleanup completed: 1 resources cleaned
[2026-01-28 13:45:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:45:53] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:45:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:45:53] info: [MemoryManager] Resource cleanup completed: 2 resources cleaned
[2026-01-28 13:45:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:45:53] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:45:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:45:53] info: [MemoryManager] Resource cleanup completed: 3 resources cleaned
[2026-01-28 13:45:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:45:53] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:45:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:45:53] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:45:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:45:53] info: [MemoryManager] Resource cleanup completed: 1 resources cleaned
[2026-01-28 13:45:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:45:53] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:45:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:45:53] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:45:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:45:53] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:45:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:45:53] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:45:53] warn: [MemoryManager] Potential memory leak detected: 2MB per sample
[2026-01-28 13:45:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:45:53] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:45:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:45:53] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:45:53] warn: [MemoryManager] Memory threshold alert: 90MB used
[2026-01-28 13:45:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:45:53] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:45:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:45:53] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:45:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:45:53] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:45:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:45:53] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:45:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:45:53] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:45:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:45:53] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:45:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:45:53] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:45:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:45:53] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:45:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:45:53] info: [MemoryManager] Resource cleanup completed: 1 resources cleaned
[2026-01-28 13:45:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:45:53] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:45:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:45:53] info: [MemoryManager] Resource cleanup completed: 1 resources cleaned
[2026-01-28 13:45:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:45:53] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:45:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:45:53] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:45:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:45:53] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:45:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:45:53] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:45:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:45:53] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:45:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:45:53] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:45:53] info: [MemoryManager] Starting memory and resource monitoring
[2026-01-28 13:45:53] info: [MemoryManager] Stopping memory and resource monitoring
[2026-01-28 13:45:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:45:53] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:45:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:45:53] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:45:53] info: [MemoryManager] Starting memory and resource monitoring
[2026-01-28 13:45:53] info: [MemoryManager] Stopping memory and resource monitoring
[2026-01-28 13:45:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:45:53] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:45:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:45:53] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:45:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:45:53] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 13:45:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 13:45:53] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
(node:73184) MaxListenersExceededWarning: Possible EventEmitter memory leak detected. 11 exit listeners added to [process]. MaxListeners is 10. Use emitter.setMaxListeners() to increase limit
(node:73184) MaxListenersExceededWarning: Possible EventEmitter memory leak detected. 11 SIGTERM listeners added to [process]. MaxListeners is 10. Use emitter.setMaxListeners() to increase limit
(node:73184) MaxListenersExceededWarning: Possible EventEmitter memory leak detected. 11 SIGINT listeners added to [process]. MaxListeners is 10. Use emitter.setMaxListeners() to increase limit
(node:73184) MaxListenersExceededWarning: Possible EventEmitter memory leak detected. 11 uncaughtException listeners added to [process]. MaxListeners is 10. Use emitter.setMaxListeners() to increase limit
(node:73184) MaxListenersExceededWarning: Possible EventEmitter memory leak detected. 11 unhandledRejection listeners added to [process]. MaxListeners is 10. Use emitter.setMaxListeners() to increase limit
PASS __tests__/services/memoryResourceManagement.test.mjs
  Memory and Resource Management System
    Memory Manager Initialization
      √ creates memory manager with default options (9 ms)
      √ creates memory manager with custom options (15 ms)
      √ returns singleton instance (5 ms)
    Memory Monitoring
      √ starts and stops monitoring correctly (7 ms)
      √ collects memory metrics correctly (5 ms)
      √ stores memory metrics history (7 ms)
      √ limits memory metrics history to 1000 entries (14 ms)
    Resource Tracking
      √ tracks and untracks timers correctly (6 ms)
      √ tracks and untracks intervals correctly (5 ms)
      √ tracks event listeners correctly (11 ms)
      √ gets resource counts correctly (4 ms)
    Resource Cleanup
      √ cleans up all tracked resources (6 ms)
      √ handles cleanup errors gracefully (10 ms)
    Memory Leak Detection
      √ calculates memory trend correctly (4 ms)
      √ detects memory leaks with consistent growth (6 ms)
    Memory Threshold Monitoring
      √ triggers alert when memory threshold exceeded (5 ms)
      √ does not trigger alert when memory is below threshold (7 ms)
    Garbage Collection
      √ optimizes garbage collection when available (4 ms)
      √ handles GC unavailability gracefully (4 ms)
    Comprehensive Report Generation
      √ generates complete memory and resource report (5 ms)
    Helper Functions
      √ trackResource helper function works correctly (4 ms)
      √ untrackResource helper function works correctly (8 ms)
      √ getMemoryReport helper function works correctly (5 ms)
      √ initializeMemoryManagement starts monitoring (7 ms)
    Event Handling
      √ emits monitoring events correctly (8 ms)
      √ emits metrics collection events (5 ms)

[2026-01-28 13:45:53] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:53] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:53] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:53] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:45:53] info: [auth:35ovzj] Starting auth for GET /api/test
[2026-01-28 13:45:53] info: [auth:35ovzj] Token from cookie: true
[2026-01-28 13:45:53] info: [auth:35ovzj] Authenticated user 3425
[2026-01-28 13:45:53] info: [auth:hkhszk] Starting auth for GET /api/test
[2026-01-28 13:45:53] info: [auth:hkhszk] Token from cookie: false
[2026-01-28 13:45:53] info: [auth:hkhszk] Token from header: true
[2026-01-28 13:45:53] info: [auth:hkhszk] Authenticated user 5908
[2026-01-28 13:45:53] info: [auth:olmz6s] Starting auth for GET /api/test
[2026-01-28 13:45:53] info: [auth:olmz6s] Token from cookie: true
[2026-01-28 13:45:53] info: [auth:olmz6s] Authenticated user 1
[2026-01-28 13:45:53] info: [auth:z3or4r] Starting auth for GET /api/test
[2026-01-28 13:45:53] info: [auth:z3or4r] Token from cookie: true
[2026-01-28 13:45:53] info: [auth:z3or4r] Authenticated user 897
[2026-01-28 13:45:53] info: [auth:a48ax] Starting auth for GET /api/test
[2026-01-28 13:45:53] info: [auth:a48ax] Token from cookie: true
[2026-01-28 13:45:53] warn: [auth:a48ax] Token expired (precheck)
[2026-01-28 13:45:53] warn: [auth:a48ax] Token expired for GET /api/test from 127.0.0.1
[2026-01-28 13:45:53] info: [auth:gltie] Starting auth for GET /api/test
[2026-01-28 13:45:53] info: [auth:gltie] Token from cookie: true
[2026-01-28 13:45:53] warn: [auth:gltie] Session too old
[2026-01-28 13:45:53] warn: [auth:gltie] Session expired. Please login again. for GET /api/test from 127.0.0.1
[2026-01-28 13:45:53] info: [auth:rmqii8] Starting auth for GET /api/test
[2026-01-28 13:45:53] info: [auth:rmqii8] Token from cookie: true
[2026-01-28 13:45:53] info: [auth:rmqii8] Authenticated user 2805
[2026-01-28 13:45:53] info: [auth:6ncs1] Starting auth for GET /api/test
[2026-01-28 13:45:53] info: [auth:6ncs1] Token from cookie: true
[2026-01-28 13:45:53] warn: [auth:6ncs1] Session too old
[2026-01-28 13:45:53] warn: [auth:6ncs1] Session expired. Please login again. for GET /api/test from 127.0.0.1
[2026-01-28 13:45:53] info: [auth:c8rsxm] Starting auth for GET /api/test
[2026-01-28 13:45:53] info: [auth:c8rsxm] Token from cookie: true
[2026-01-28 13:45:53] warn: [auth:c8rsxm] Token decode failed: Unexpected token '�', "�{ږ'" is not valid JSON
[2026-01-28 13:45:53] warn: [auth:c8rsxm] Invalid or expired token for GET /api/test from 127.0.0.1
[2026-01-28 13:45:53] info: [auth:ye4a5] Starting auth for GET /api/test
[2026-01-28 13:45:53] info: [auth:ye4a5] Token from cookie: true
[2026-01-28 13:45:53] warn: [auth:ye4a5] Verify failed: invalid signature
[2026-01-28 13:45:53] warn: [auth:ye4a5] Invalid or expired token for GET /api/test from 127.0.0.1
[2026-01-28 13:45:53] info: [auth:5mm7hj] Starting auth for GET /api/test
[2026-01-28 13:45:53] info: [auth:5mm7hj] Token from cookie: true
[2026-01-28 13:45:53] warn: [auth:5mm7hj] Invalid or expired token for GET /api/test from 127.0.0.1
[2026-01-28 13:45:53] info: [auth:jw7gm] Starting auth for GET /api/test
[2026-01-28 13:45:53] info: [auth:jw7gm] Token from cookie: false
[2026-01-28 13:45:53] warn: [auth:jw7gm] Access token is required for GET /api/test from 127.0.0.1
[2026-01-28 13:45:53] info: [auth:5k68fn] Starting auth for GET /api/test
[2026-01-28 13:45:53] info: [auth:5k68fn] Token from cookie: false
[2026-01-28 13:45:53] warn: [auth:5k68fn] Access token is required for GET /api/test from 127.0.0.1
[2026-01-28 13:45:53] info: [auth:purd5o] Starting auth for GET /api/test
[2026-01-28 13:45:53] info: [auth:purd5o] Token from cookie: false
[2026-01-28 13:45:53] warn: [auth:purd5o] Access token is required for GET /api/test from 127.0.0.1
[2026-01-28 13:45:53] info: [auth:klgosc] Starting auth for GET /api/test
[2026-01-28 13:45:53] info: [auth:klgosc] Token from cookie: false
[2026-01-28 13:45:53] warn: [auth:klgosc] Access token is required for GET /api/test from 127.0.0.1
[2026-01-28 13:45:53] info: [auth:74wkfa] Starting auth for GET /api/test
[2026-01-28 13:45:53] info: [auth:74wkfa] Token from cookie: false
[2026-01-28 13:45:53] warn: [auth:74wkfa] Access token is required for GET /api/test from 127.0.0.1
[2026-01-28 13:45:53] info: [auth:0odlz2] Starting auth for GET /api/test
[2026-01-28 13:45:53] info: [auth:0odlz2] Token from cookie: false
[2026-01-28 13:45:53] warn: [auth:0odlz2] Access token is required for GET /api/test from 127.0.0.1
[2026-01-28 13:45:53] info: [auth:29jfw] Starting auth for GET /api/test
[2026-01-28 13:45:53] info: [auth:29jfw] Token from cookie: false
[2026-01-28 13:45:53] warn: [auth:29jfw] Access token is required for GET /api/test from 127.0.0.1
[2026-01-28 13:45:53] info: [auth:ylx5on] Starting auth for GET /api/test
[2026-01-28 13:45:53] info: [auth:ylx5on] Token from cookie: true
[2026-01-28 13:45:53] info: [auth:ylx5on] Authenticated user 12345
[2026-01-28 13:45:53] info: [auth:xfrkr4] Starting auth for GET /api/test
[2026-01-28 13:45:53] info: [auth:xfrkr4] Token from cookie: true
[2026-01-28 13:45:53] info: [auth:xfrkr4] Authenticated user 99999
[2026-01-28 13:45:53] info: [auth:fyutz4] Starting auth for GET /api/test
[2026-01-28 13:45:53] info: [auth:fyutz4] Token from cookie: true
[2026-01-28 13:45:53] info: [auth:fyutz4] Authenticated user 6195
[2026-01-28 13:45:53] info: [auth:324c5] Starting auth for GET /api/test
[2026-01-28 13:45:53] info: [auth:324c5] Token from cookie: true
[2026-01-28 13:45:53] info: [auth:324c5] Authenticated user 7632
[2026-01-28 13:45:53] info: [auth:ivgu8zi] Starting auth for GET /api/test
[2026-01-28 13:45:53] info: [auth:ivgu8zi] Token from cookie: true
[2026-01-28 13:45:53] warn: [auth:ivgu8zi] Invalid or expired token for GET /api/test from 127.0.0.1
[2026-01-28 13:45:53] info: [auth:ri5io] Starting auth for GET /api/test
[2026-01-28 13:45:53] info: [auth:ri5io] Token from cookie: true
[2026-01-28 13:45:53] info: [auth:ri5io] Authenticated user undefined
[2026-01-28 13:45:53] info: [auth:l4hx8] Starting auth for GET /api/test
[2026-01-28 13:45:53] info: [auth:l4hx8] Token from cookie: true
[2026-01-28 13:45:53] warn: [auth:l4hx8] Invalid or expired token for GET /api/test from 127.0.0.1
PASS __tests__/unit/security/token-validation.test.mjs
  Token Validation Unit Tests
    Valid Token Scenarios
      √ should authenticate with valid token in cookie (10 ms)
      √ should authenticate with valid token in Authorization header (6 ms)
      √ should prefer cookie token over Authorization header (11 ms)
      √ should accept token with additional custom payload (5 ms)
    Expired Token Scenarios
      √ should reject expired token (6 ms)
      √ should reject token older than 7 days (CWE-613) (5 ms)
      √ should accept token exactly 7 days old (5 ms)
      √ should reject token slightly over 7 days old (9 ms)
    Malformed Token Scenarios
      √ should reject malformed token (4 ms)
      √ should reject token with invalid signature (5 ms)
      √ should reject completely invalid token string (3 ms)
      √ should reject empty token string (3 ms)
      √ should reject null token (6 ms)
      √ should reject undefined token (4 ms)
    Missing Token Scenarios
      √ should return 401 when no token in cookie or header (3 ms)
      √ should return 401 when Authorization header has no Bearer token (3 ms)
      √ should return 401 when Authorization header has wrong scheme (4 ms)
      √ should return 401 when Authorization header has no space (4 ms)
    Token Payload Validation
      √ should extract userId from token payload (8 ms)
      √ should handle legacy id field mapping (5 ms)
      √ should include iat (issued at) timestamp in user object (5 ms)
      √ should include exp (expiration) timestamp in user object (5 ms)
    Security Edge Cases
      √ should reject token with modified payload (3 ms)
      √ should reject token without userId field (4 ms)
      √ should reject token signed with algorithm none (7 ms)

[2026-01-28 13:45:53] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:53] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:53] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:53] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-15T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-15T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-15T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-10-15T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-15T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-01T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-02T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-03T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-04T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-05T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-06T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-07T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-08T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-09T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-10T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-11T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-12T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-13T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-14T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-15T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-16T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-17T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-18T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-19T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-20T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-21T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-22T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-23T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-24T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-25T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-26T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-27T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-28T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-29T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-30T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-01T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-02T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-03T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-04T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-05T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-06T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-07T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-08T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-09T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-10T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-11T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-12T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-13T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-14T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-15T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-16T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-17T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-18T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-19T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-20T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-21T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-22T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-23T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-24T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-25T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-26T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-27T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-28T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-29T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-30T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-01T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-02T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-03T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-04T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-05T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-06T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-07T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-08T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-09T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-10T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-11T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-12T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-13T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-14T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-15T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-16T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-17T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-18T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-19T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-20T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-21T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-22T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-23T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-24T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-25T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-26T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-27T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-28T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-29T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-30T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-15T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-15T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-15T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-15T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-15T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-16T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-17T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-18T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-19T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-20T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-21T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-15T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-16T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-17T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-18T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-19T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-20T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-21T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-22T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-23T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-24T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-25T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-26T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-27T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-28T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-15T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-16T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-17T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-18T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-19T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-20T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-21T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-22T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-23T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-24T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-25T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-26T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-27T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-28T00:00:00.000Z
[2026-01-28 13:45:53] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-15T00:00:00.000Z
PASS tests/unit/environmentalFactorEngine.test.mjs
  🌤️ Environmental Factor Engine
    🌡️ Weather System
      √ should calculate current weather conditions (15 ms)
      √ should generate realistic weather patterns for different seasons (83 ms)
      √ should account for location factors in weather calculation (3 ms)
    🍂 Seasonal Cycles
      √ should calculate seasonal factors for horse development (4 ms)
      √ should provide seasonal transition effects (1 ms)
    ⚡ Environmental Triggers
      √ should calculate environmental triggers for trait expression (3 ms)
      √ should identify stress triggers based on weather conditions (1 ms)
      √ should account for horse traits in trigger calculation (1 ms)
    🎯 Environmental Impact Calculation
      √ should calculate environmental impact on horse development (6 ms)
      √ should provide different impacts for different environmental conditions (1 ms)
    🔮 Weather Forecasting
      √ should generate weather forecast for planning (10 ms)
      √ should provide seasonal forecast trends (30 ms)
    📊 Comfort Zone Analysis
      √ should calculate horse comfort zone based on traits and preferences (2 ms)
      √ should adjust comfort zone based on horse traits (1 ms)
    ⚠️ Environmental Stress Assessment
      √ should assess environmental stress levels (2 ms)
      √ should provide stress mitigation recommendations (1 ms)

[2026-01-28 13:45:54] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:54] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:54] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:54] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:45:54] info: [ApiDocService] OpenAPI specification saved successfully
[2026-01-28 13:45:54] error: [ApiDocService] Failed to load specification: OpenAPI specification file not found
[2026-01-28 13:45:54] info: [ApiDocService] OpenAPI specification saved successfully
[2026-01-28 13:45:54] info: [ApiDocService] Documentation generated for 2 endpoints
[2026-01-28 13:45:54] info: [ApiDocService] OpenAPI specification saved successfully
[2026-01-28 13:45:54] info: [ApiDocService] Documentation generated for 0 endpoints
[2026-01-28 13:45:54] info: [ApiDocService] OpenAPI specification saved successfully
[2026-01-28 13:45:54] info: [ApiDocService] Documentation generated for 1 endpoints
[2026-01-28 13:45:54] info: [ApiDocService] OpenAPI specification validation passed
[2026-01-28 13:45:54] warn: [ApiDocService] OpenAPI specification validation found 1 issues
[2026-01-28 13:45:54] warn: [ApiDocService] OpenAPI specification validation found 1 issues
[2026-01-28 13:45:54] warn: [ApiDocService] OpenAPI specification validation found 1 issues
[2026-01-28 13:45:54] info: [ApiDocService] OpenAPI specification saved successfully
[2026-01-28 13:45:54] info: [ApiDocService] Documentation generated for 2 endpoints
[2026-01-28 13:45:54] info: [ApiDocService] OpenAPI specification saved successfully
[2026-01-28 13:45:54] info: [ApiDocService] Documentation generated for 1 endpoints
[2026-01-28 13:45:54] info: [ApiDocService] OpenAPI specification validation passed
[2026-01-28 13:45:54] info: [ApiDocService] OpenAPI specification saved successfully
[2026-01-28 13:45:54] info: [ApiDocService] Documentation generated for 2 endpoints
[2026-01-28 13:45:54] warn: [ApiDocService] OpenAPI specification validation found 2 issues
[2026-01-28 13:45:54] info: [ApiDocService] OpenAPI specification validation passed
PASS __tests__/services/apiDocumentation.test.mjs
  API Documentation Service
    Specification Loading and Saving
      √ loads OpenAPI specification correctly (10 ms)
      √ saves OpenAPI specification correctly (6 ms)
      √ throws error when specification file not found (7 ms)
    Endpoint Registration
      √ registers endpoint correctly (3 ms)
      √ registers multiple endpoints correctly (2 ms)
      √ handles endpoint registration with minimal options (14 ms)
    Schema Registration
      √ registers schema correctly (1 ms)
      √ registers multiple schemas correctly (2 ms)
    Documentation Generation
      √ generates documentation with registered endpoints (7 ms)
      √ generates documentation with registered schemas (6 ms)
      √ adds generation metadata to specification (6 ms)
    Specification Validation
      √ validates correct specification (3 ms)
      √ detects missing responses (9 ms)
      √ detects missing summaries (4 ms)
      √ detects missing tags (4 ms)
    Metrics and Analytics
      √ calculates metrics correctly (7 ms)
      √ generates health report correctly (8 ms)
      √ provides recommendations based on metrics (8 ms)
    Example Generation
      √ generates string examples correctly (2 ms)
      √ generates email format examples (1 ms)
      √ generates UUID format examples (2 ms)
      √ generates object examples correctly (6 ms)
      √ generates array examples correctly (2 ms)
    Helper Functions
      √ registerEndpoint helper function works (2 ms)
      √ registerSchema helper function works (2 ms)
      √ getDocumentationMetrics helper function works (2 ms)
      √ getDocumentationHealth helper function works (4 ms)

[2026-01-28 13:45:55] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:55] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:55] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:55] info: [envValidator] Test environment validation complete. Success: true
PASS tests/schema-field-test.test.mjs
  Schema Field Test
    √ should create horse with consecutiveDaysFoalCare field (84 ms)

[2026-01-28 13:45:55] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:55] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:55] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:55] info: [envValidator] Test environment validation complete. Success: true
PASS tests/database.test.mjs
  🔌 INTEGRATION: Database Connection - Core Infrastructure Validation
    √ should connect to the database (48 ms)
    √ should be able to query the User table (4 ms)
    √ should be able to perform basic database operations (3 ms)
    √ should handle database errors gracefully (17 ms)

[2026-01-28 13:45:55] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:55] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:55] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:55] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:45:55] info: [cacheHelper] Cache statistics reset
[2026-01-28 13:45:55] info: [cacheHelper] Cache statistics reset
[2026-01-28 13:45:55] info: [cacheHelper] Cache statistics reset
[2026-01-28 13:45:55] info: [cacheHelper] Cache statistics reset
[2026-01-28 13:45:55] info: [cacheHelper] Cache statistics reset
[2026-01-28 13:45:55] info: [cacheHelper] Cache statistics reset
[2026-01-28 13:45:55] info: [cacheHelper] Cache statistics reset
[2026-01-28 13:45:55] info: [cacheHelper] Cache statistics reset
[2026-01-28 13:45:55] info: [cacheHelper] Cache statistics reset
[2026-01-28 13:45:55] info: [cacheHelper] Cache statistics reset
[2026-01-28 13:45:55] info: [cacheHelper] Cache statistics reset
[2026-01-28 13:45:55] info: [cacheHelper] Cache statistics reset
[2026-01-28 13:45:55] info: [cacheHelper] Cache statistics reset
[2026-01-28 13:45:55] info: [cacheHelper] Cache statistics reset
[2026-01-28 13:45:55] info: [cacheHelper] Cache statistics reset
[2026-01-28 13:45:55] info: [cacheHelper] Cache statistics reset
[2026-01-28 13:45:55] info: [cacheHelper] Cache statistics reset
[2026-01-28 13:45:55] info: [cacheHelper] Cache statistics reset
[2026-01-28 13:45:55] info: [cacheHelper] Cache statistics reset
[2026-01-28 13:45:55] info: [cacheHelper] Cache statistics reset
[2026-01-28 13:45:55] info: [cacheHelper] Cache statistics reset
[2026-01-28 13:45:56] info: [cacheHelper] Cache statistics reset
[2026-01-28 13:45:56] info: [cacheHelper] Cache statistics reset
PASS __tests__/integration/caching-circuit-breaker.test.mjs
  Caching Circuit Breaker Integration Tests
    Multi-Tier Caching (L1: In-Memory, L2: Redis)
      √ should use in-memory cache when Redis is unavailable (6 ms)
      √ should cache data in both tiers when Redis is available (3 ms)
      √ should handle TTL expiration in local cache (28 ms)
    Circuit Breaker Protection
      √ should include circuit breaker status in health statistics (4 ms)
      √ should not throw errors when circuit breaker is unavailable (7 ms)
      √ should track cache statistics correctly (3 ms)
    Graceful Degradation
      √ should fall back to query execution if cache fails (2 ms)
      √ should handle null and undefined query results (2 ms)
      √ should handle query function errors gracefully (5 ms)
    Cache Invalidation
      √ should invalidate specific cache keys (3 ms)
      √ should invalidate cache by pattern (2 ms)
      √ should handle invalidation when Redis is unavailable (2 ms)
    Cache Key Generation
      √ should generate standardized cache keys (2 ms)
      √ should sanitize cache key components (6 ms)
      √ should filter out null and undefined components (2 ms)
    Statistics and Monitoring
      √ should calculate hit rate correctly (3 ms)
      √ should track error counts (2 ms)
      √ should provide timestamp of last update (15 ms)
    Performance and Limits
      √ should handle multiple concurrent cache requests (3 ms)
      √ should handle large data objects (3 ms)

[2026-01-28 13:45:56] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:56] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:56] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:56] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:45:56] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:56] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:56] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:56] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:56] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:56] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:56] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:56] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:56] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:56] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:56] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:56] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:56] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:56] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:56] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:56] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:56] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:56] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:56] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:56] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:56] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:56] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:56] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:56] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:56] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:56] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:56] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:56] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:56] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:56] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:56] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:56] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:56] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:56] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:56] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:56] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:56] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:56] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:56] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:56] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:56] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:56] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:56] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:56] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:56] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:56] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:56] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:56] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:56] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:56] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:56] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:56] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:56] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:56] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:56] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:56] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:56] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:45:56] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:45:56] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:45:56] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
PASS tests/simulateCompetition.test.mjs
  🏇 UNIT: Competition Simulation System - Horse Performance & Ranking
    getStatScore
      √ should calculate correct weighted score for Racing discipline (2 ms)
      √ should calculate correct weighted score for Show Jumping discipline
      √ should handle missing stats by defaulting to 0 (1 ms)
      √ should throw error for invalid discipline (4 ms)
      √ should throw error for missing horse object (1 ms)
    getHealthModifier
      √ should return correct modifiers for all health ratings (2 ms)
      √ should return 0 for unknown health rating (7 ms)
    applyRiderModifiers
      √ should apply bonus correctly
      √ should apply penalty correctly
      √ should apply both bonus and penalty (1 ms)
      √ should handle default values (1 ms)
      √ should validate input ranges (1 ms)
    simulateCompetition
      √ should simulate competition with 5 horses and return correct rankings (3 ms)
      √ should calculate discipline affinity trait bonus correctly (58 ms)
      √ should handle horses with missing optional fields (1 ms)
      √ should handle empty horse array (2 ms)
      √ should validate inputs (1 ms)
      √ should handle calculation errors gracefully
      √ should verify complete scoring formula with random luck modifier (2 ms)
      √ should apply random luck modifier causing score variation (1 ms)

[2026-01-28 13:45:56] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:56] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:56] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:56] info: [envValidator] Test environment validation complete. Success: true
PASS __tests__/utils/cookieConfig.test.mjs
  Cookie Configuration Module
    Access Token Cookie Options
      √ should have correct security properties in development (7 ms)
      √ should have correct security properties in production (4 ms)
      √ should use custom domain when COOKIE_DOMAIN is set (5 ms)
      √ should have httpOnly true (XSS protection) (4 ms)
      √ should have sameSite strict (CSRF protection) (5 ms)
      √ should have maxAge matching access token expiry (15 minutes) (10 ms)
      √ should have path set to root (5 ms)
    Refresh Token Cookie Options
      √ should have correct security properties (4 ms)
      √ should have maxAge matching refresh token expiry (7 days) (4 ms)
      √ should have path scoped to refresh endpoint (least privilege) (3 ms)
    CSRF Token Cookie Options
      √ should have httpOnly false (client must read for X-CSRF-Token header) (4 ms)
      √ should have correct security properties (3 ms)
      √ should have maxAge matching access token (session-tied) (3 ms)
    Clear Cookie Options
      √ should match access token options (except maxAge) (4 ms)
      √ should match refresh token options (except maxAge) (4 ms)
      √ should have same path as original cookie (required for proper deletion) (4 ms)
      √ should have same domain as original cookie (required for proper deletion) (4 ms)
    Environment-Specific Behavior
      √ should have secure: false in development (4 ms)
      √ should have secure: false in test (5 ms)
      √ should have secure: true in production (9 ms)
    Cookie Configuration Summary
      √ should return configuration summary (6 ms)
      √ should show production environment correctly (4 ms)
      √ should show custom domain when set (4 ms)
      √ should show same-domain when COOKIE_DOMAIN not set (4 ms)
    Security Compliance
      √ should have all security flags enabled in production (5 ms)
      √ should prevent JavaScript access to auth tokens (XSS mitigation) (4 ms)
      √ should require HTTPS in production (MitM mitigation) (4 ms)
      √ should prevent cross-site requests (CSRF mitigation) (5 ms)
    Exports
      √ should export all required constants (4 ms)

[2026-01-28 13:45:56] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:56] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:56] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:56] info: [envValidator] Test environment validation complete. Success: true
PASS tests/simple-db.test.mjs
  Simple Database Test
    √ should connect to database (157 ms)
    √ should create a simple user (16 ms)

[2026-01-28 13:45:57] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:57] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:57] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:57] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:45:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare
[2026-01-28 13:45:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: 
[2026-01-28 13:45:57] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none
[2026-01-28 13:45:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare
[2026-01-28 13:45:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: 
[2026-01-28 13:45:57] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none
[2026-01-28 13:45:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare
[2026-01-28 13:45:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: 
[2026-01-28 13:45:57] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none
[2026-01-28 13:45:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare
[2026-01-28 13:45:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: 
[2026-01-28 13:45:57] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none
[2026-01-28 13:45:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare
[2026-01-28 13:45:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: 
[2026-01-28 13:45:57] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none
[2026-01-28 13:45:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare
[2026-01-28 13:45:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: 
[2026-01-28 13:45:57] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none
[2026-01-28 13:45:57] warn: [groomPersonalityEffects.calculatePersonalityEffects] Unknown personality: strict
[2026-01-28 13:45:57] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for strict: none
[2026-01-28 13:45:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare
[2026-01-28 13:45:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: 
[2026-01-28 13:45:57] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none
[2026-01-28 13:45:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare
[2026-01-28 13:45:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: 
[2026-01-28 13:45:57] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none
[2026-01-28 13:45:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare
[2026-01-28 13:45:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: 
[2026-01-28 13:45:57] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none
[2026-01-28 13:45:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare
[2026-01-28 13:45:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: 
[2026-01-28 13:45:57] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none
[2026-01-28 13:45:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare
[2026-01-28 13:45:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: 
[2026-01-28 13:45:57] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none
[2026-01-28 13:45:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task feeding
[2026-01-28 13:45:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: 
[2026-01-28 13:45:57] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none
[2026-01-28 13:45:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task grooming
[2026-01-28 13:45:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: 
[2026-01-28 13:45:57] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none
[2026-01-28 13:45:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare
[2026-01-28 13:45:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: 
[2026-01-28 13:45:57] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none
[2026-01-28 13:45:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare
[2026-01-28 13:45:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: 
[2026-01-28 13:45:57] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none
[2026-01-28 13:45:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare
[2026-01-28 13:45:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: 
[2026-01-28 13:45:57] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none
[2026-01-28 13:45:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare
[2026-01-28 13:45:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: 
[2026-01-28 13:45:57] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none
[2026-01-28 13:45:57] warn: [groomPersonalityEffects.calculatePersonalityEffects] Unknown personality: invalid_personality
[2026-01-28 13:45:57] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for invalid_personality: none
PASS tests/groomSystemLogic.test.mjs
  🧮 UNIT: Groom System Logic - Pure Business Logic Validation
    calculateGroomInteractionEffects
      √ should calculate basic interaction effects (7 ms)
      √ should apply foal care specialty bonuses correctly (6 ms)
      √ should apply skill level modifiers correctly (10 ms)
      √ should apply personality modifiers correctly (5 ms)
      √ should apply experience bonuses correctly (5 ms)
      √ should scale cost with duration and session rate (9 ms)
      √ should handle different interaction types (7 ms)
      √ should handle edge cases gracefully (9 ms)
    System Constants
      √ should have all required groom specialties (5 ms)
      √ should have all required skill levels (3 ms)
      √ should have all required personality traits (2 ms)
      √ should have valid default groom profiles (3 ms)
    Modifier Calculations
      √ should combine modifiers correctly (3 ms)
      √ should handle invalid modifiers gracefully (6 ms)

[2026-01-28 13:45:57] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:57] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:57] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:57] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:45:57] info: [FeatureFlag] All runtime overrides cleared
[2026-01-28 13:45:57] info: [FeatureFlag] All runtime overrides cleared
[2026-01-28 13:45:57] info: [FeatureFlag] All runtime overrides cleared
[2026-01-28 13:45:57] info: [FeatureFlag] All runtime overrides cleared
[2026-01-28 13:45:57] info: [FeatureFlag] All runtime overrides cleared
[2026-01-28 13:45:57] info: [FeatureFlag] All runtime overrides cleared
[2026-01-28 13:45:57] info: [FeatureFlag] All runtime overrides cleared
[2026-01-28 13:45:57] info: [FeatureFlag] All runtime overrides cleared
[2026-01-28 13:45:57] info: [FeatureFlag] All runtime overrides cleared
[2026-01-28 13:45:57] info: [FeatureFlag] All runtime overrides cleared
[2026-01-28 13:45:57] info: [FeatureFlag] All runtime overrides cleared
[2026-01-28 13:45:57] info: [FeatureFlag] All runtime overrides cleared
[2026-01-28 13:45:57] info: [FeatureFlag] All runtime overrides cleared
[2026-01-28 13:45:57] info: [FeatureFlag] All runtime overrides cleared
[2026-01-28 13:45:57] info: [FeatureFlag] All runtime overrides cleared
[2026-01-28 13:45:57] info: [FeatureFlag] All runtime overrides cleared
[2026-01-28 13:45:57] info: [FeatureFlag] All runtime overrides cleared
[2026-01-28 13:45:57] warn: [FeatureFlag] Flag overridden at runtime
[2026-01-28 13:45:57] info: [FeatureFlag] All runtime overrides cleared
[2026-01-28 13:45:57] warn: [FeatureFlag] Flag overridden at runtime
[2026-01-28 13:45:57] warn: [FeatureFlag] Flag overridden at runtime
[2026-01-28 13:45:57] info: [FeatureFlag] All runtime overrides cleared
[2026-01-28 13:45:57] info: [FeatureFlag] All runtime overrides cleared
PASS __tests__/unit/featureFlagService.test.mjs
  Feature Flag Service
    isFeatureEnabled
      √ should return false for undefined flags (5 ms)
      √ should return true for flags set to "true" in environment (77 ms)
      √ should return false for flags set to "false" in environment (3 ms)
      √ should handle case-insensitive boolean strings (2 ms)
      √ should use default value from FLAG_DEFINITIONS (2 ms)
      √ should respect environment override over defaults (2 ms)
    Percentage-based rollout
      √ should consistently hash same user to same bucket (2 ms)
      √ should return false when percentage is 0 (3 ms)
      √ should return true when percentage is 100 (9 ms)
    getFeatureVariant
      √ should return string value from environment (2 ms)
      √ should return default value for undefined flags (2 ms)
      √ should return default when value is not a string (2 ms)
    getAllFlags
      √ should return all defined flags (3 ms)
      √ should evaluate flags with provided context (3 ms)
    getEvaluationStats
      √ should track flag evaluations (2 ms)
      √ should calculate enabled rate correctly (2 ms)
    overrideFlag
      √ should allow runtime flag override (3 ms)
    clearOverrides
      √ should clear all runtime overrides (9 ms)
    Error Handling
      √ should return false on evaluation error (2 ms)

[2026-01-28 13:45:58] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:58] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:58] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:58] info: [envValidator] Test environment validation complete. Success: true
PASS tests/groomAgeRestrictions.test.mjs
  Groom Age Restrictions & Task Eligibility
    Configuration Values
      √ should allow grooms to work with foals from birth (2 ms)
      √ should define adult horse age threshold at 3 years (1 ms)
      √ should have foal enrichment tasks defined (1 ms)
      √ should have adult grooming tasks defined (1 ms)
    Foal Enrichment Task Eligibility (0-2 years)
      √ should allow newborn foal (0 days) to receive enrichment tasks (1 ms)
      √ should allow 1-week-old foal (7 days) to receive enrichment tasks (1 ms)
      √ should allow 1-year-old horse (365 days) to receive enrichment tasks (1 ms)
      √ should allow 2.9-year-old horse (1059 days) to receive enrichment tasks (1 ms)
    Adult Horse Grooming Task Eligibility (3+ years)
      √ should allow exactly 3-year-old horse (1095 days) to receive adult grooming tasks (1 ms)
      √ should allow 5-year-old horse (1825 days) to receive adult grooming tasks (1 ms)
      √ should allow senior horse (10+ years) to receive adult grooming tasks (1 ms)
    Task Type Validation
      √ should reject invalid task types for any age (1 ms)
      √ should provide list of eligible tasks when task is invalid (6 ms)
    Age Boundary Conditions
      √ should handle exactly 3 years (1095 days) as adult threshold (1 ms)
      √ should handle day before 3rd birthday (20 days) (1 ms)
    Edge Cases
      √ should handle negative age gracefully (2 ms)
      √ should handle very old horses (20+ years)

[2026-01-28 13:45:58] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:58] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:58] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:58] info: [envValidator] Test environment validation complete. Success: true
PASS tests/foalTaskLogManager.test.mjs
  Foal Task Log Manager
    Task Log Initialization and Manipulation
      √ should initialize empty task log (3 ms)
      √ should increment task count for new task (2 ms)
      √ should increment existing task count (1 ms)
      √ should increment by custom amount (1 ms)
      √ should handle null task log (1 ms)
      √ should get task count for existing task (1 ms)
      √ should return 0 for non-existent task (2 ms)
      √ should handle null task log in getTaskCount (1 ms)
    Task Log Statistics
      √ should calculate total task count (1 ms)
      √ should handle empty task log in total count (1 ms)
      √ should ignore non-numeric values in total count (1 ms)
      √ should get completed tasks list (2 ms)
      √ should handle empty task log in completed tasks (1 ms)
    Streak Calculation
      √ should handle null last care date (6 ms)
      √ should calculate same day care (1 ms)
      √ should calculate within grace period (2 ms)
      √ should detect broken streak beyond grace period (1 ms)
      √ should use custom grace period (1 ms)
    Burnout Immunity
      √ should grant immunity after 7 days (1 ms)
      √ should not grant immunity before 7 days (1 ms)
      √ should handle invalid input (1 ms)
      √ should use custom immunity threshold (1 ms)
    Care Data Updates
      √ should update foal care data with new task (2 ms)
      √ should continue streak within grace period (1 ms)
      √ should reset streak when broken (1 ms)
    Task Log Validation
      √ should validate correct task log (1 ms)
      √ should allow null task log (1 ms)
      √ should reject non-object task log (1 ms)
      √ should reject invalid task names (1 ms)
      √ should reject invalid counts (1 ms)
    Care Summary
      √ should generate comprehensive care summary (1 ms)
      √ should handle empty foal data (5 ms)
    Streak Reset
      √ should reset foal care streak (2 ms)
    Error Handling
      √ should handle errors in incrementTaskCount (4 ms)
      √ should handle errors in calculateStreakFromLastCareDate (2 ms)

[2026-01-28 13:45:58] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:58] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:58] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:58] info: [envValidator] Test environment validation complete. Success: true
PASS tests/dbConnection.test.mjs
  🔌 INTEGRATION: Database Connection - Alternative Prisma Client Path Testing
    √ should connect to the database and fetch users (51 ms)

[2026-01-28 13:45:59] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:59] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:59] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:59] info: [envValidator] Test environment validation complete. Success: true
PASS tests/utils/groomBondingSystem.comprehensive.test.mjs
  🤝 COMPREHENSIVE: Groom Bonding System & Task Eligibility
    Age-Based Task Eligibility
      √ should return enrichment tasks for newborn foals (0-2 years) (2 ms)
      √ should return appropriate tasks for young foals (1-2 years) (2 ms)
      √ should return grooming tasks for yearlings (1-2 years) (2 ms)
      √ should return general tasks for mature horses (3+ years) (10 ms)
      √ should handle age boundary conditions correctly (1 ms)
    Grooming Eligibility Validation
      √ should validate eligibility for young foal enrichment (2 ms)
      √ should validate eligibility for yearling grooming (1 ms)
      √ should validate eligibility for mature horse general care
      √ should reject inappropriate tasks for age groups (1 ms)
      √ should handle edge cases in age validation (1 ms)
    Bonding Effect Calculations
      √ should calculate bonding effects for grooming tasks (1 ms)
      √ should calculate bonding effects for non-grooming tasks (1 ms)
      √ should handle maximum bonding score scenarios (1 ms)
      √ should handle minimum bonding score scenarios (1 ms)
    Task Categorization
      √ should categorize enrichment tasks correctly
      √ should categorize grooming tasks correctly
      √ should categorize general care tasks correctly (1 ms)
      √ should handle unknown task types (1 ms)
    Age Group Descriptions
      √ should provide correct descriptions for different age groups (1 ms)
      √ should handle boundary ages consistently (5 ms)
    Input Validation and Error Handling
      √ should handle invalid age values gracefully (1 ms)
      √ should handle missing horse data gracefully
      √ should handle invalid bonding calculation data (1 ms)
      √ should handle null and undefined inputs (1 ms)
    System Integration Scenarios
      √ should provide consistent results across related functions (1 ms)
      √ should maintain logical progression through age groups (1 ms)

[2026-01-28 13:45:59] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:59] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:59] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:59] info: [envValidator] Test environment validation complete. Success: true
PASS tests/burnoutImmunityGracePeriod.test.mjs
  Burnout Immunity Grace Period
    Grace Period Mechanics
      √ should preserve streak within 2-day grace period (3 ms)
      √ should reset streak after grace period expires (1 ms)
      √ should increment streak when groomed today (2 ms)
      √ should handle exactly 2-day grace period boundary (1 ms)
      √ should reset at 3-day lapse (beyond grace period) (1 ms)
    Burnout Immunity Achievement
      √ should grant immunity at 7 consecutive days (1 ms)
      √ should maintain immunity above 7 days (1 ms)
      √ should show days remaining before immunity (6 ms)
      √ should handle edge case at 6 days (one day before immunity) (1 ms)
    Streak Tracking Integration
      √ should handle first-time grooming (1 ms)
      √ should increment streak for consecutive days (1 ms)
      √ should grant bonus eligibility at 7 consecutive days (1 ms)
      √ should preserve streak within grace period (1 ms)
      √ should reset streak beyond grace period (1 ms)
    Per-Horse Tracking
      √ should demonstrate independent streak tracking per horse (1 ms)
    Configuration Validation
      √ should use correct grace period configuration (1 ms)
      √ should have consistent grace periods across systems (1 ms)
    Edge Cases and Error Handling
      √ should handle zero consecutive days (1 ms)
      √ should handle negative consecutive days (1 ms)
      √ should handle very large streak numbers (1 ms)
      √ should handle zero days since last grooming
    Real-World Scenarios
      √ should handle weekend gap scenario (1 ms)
      √ should handle vacation scenario (1 ms)
      √ should handle immunity achievement and maintenance (1 ms)

[2026-01-28 13:45:59] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:45:59] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:45:59] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:45:59] info: [envValidator] Test environment validation complete. Success: true
PASS tests/traitCalculation.test.mjs
  🧬 UNIT: Epigenetic Traits Calculation System
    Edge Cases
      √ should handle extreme bonding values (3 ms)
      √ should handle extreme stress values
      √ should handle empty trait arrays (2 ms)
    Trait Combinations
      √ should handle complementary positive traits (1 ms)
      √ should handle opposing traits appropriately (1 ms)
    Environmental Influence
      √ should produce more positive traits in ideal conditions (1 ms)
      √ should test trait inheritance probability (8 ms)
    Rare Trait Generation
      √ should occasionally produce rare traits (2 ms)
    Input Validation
      √ should handle missing parameters gracefully (4 ms)
      √ should handle invalid parameter types (1 ms)
    Deterministic Behavior
      √ should produce consistent results with the same seed (1 ms)
      √ should produce different results with different seeds (1 ms)
    getTraitDefinition
      √ should return trait definition for valid traits (1 ms)
      √ should return null for invalid traits (1 ms)
      √ should return correct definition for rare traits (1 ms)
    getTraitsByType
      √ should return all traits when type is "all" (1 ms)
      √ should return only positive traits when type is "positive" (1 ms)
      √ should return only negative traits when type is "negative" (1 ms)
      √ should default to "all" when no type specified (1 ms)
    checkTraitConflict
      √ should detect conflicts between opposing traits (1 ms)
      √ should return false for non-conflicting traits (1 ms)
      √ should return false for unknown traits (5 ms)
      √ should handle self-comparison correctly (1 ms)
    Boundary Value Testing
      √ should handle bond score boundaries (0, 50, 100) (1 ms)
      √ should handle stress level boundaries (0, 50, 100) (1 ms)
      √ should reject out-of-bounds values (2 ms)

[2026-01-28 13:46:00] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:00] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:00] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:00] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:46:00] info: [traitCompetitionImpact] Horse 1: 2 traits applied, 11.4% modifier, 7.6 point adjustment
[2026-01-28 13:46:00] info: [simulateCompetition] Horse Base Horse: 2 traits applied, 11.4% modifier, 7.6 point adjustment
[2026-01-28 13:46:00] info: [traitCompetitionImpact] Horse 1: 2 traits applied, -10.4% modifier, -7.0 point adjustment
[2026-01-28 13:46:00] info: [simulateCompetition] Horse Base Horse: 2 traits applied, -10.4% modifier, -7.0 point adjustment
[2026-01-28 13:46:00] info: [traitCompetitionImpact] Horse 1: 3 traits applied, 3.1% modifier, 2.1 point adjustment
[2026-01-28 13:46:00] info: [simulateCompetition] Horse Base Horse: 3 traits applied, 3.1% modifier, 2.1 point adjustment
[2026-01-28 13:46:00] info: [traitCompetitionImpact] Horse 1: 2 traits applied, 11.4% modifier, 7.6 point adjustment
[2026-01-28 13:46:00] info: [simulateCompetition] Horse Bold Horse: 2 traits applied, 11.4% modifier, 7.6 point adjustment
[2026-01-28 13:46:00] info: [traitCompetitionImpact] Horse 2: 2 traits applied, -10.4% modifier, -7.0 point adjustment
[2026-01-28 13:46:00] info: [simulateCompetition] Horse Nervous Horse: 2 traits applied, -10.4% modifier, -7.0 point adjustment
[2026-01-28 13:46:00] info: [traitCompetitionImpact] Horse 1: 1 traits applied, 10.0% modifier, 6.7 point adjustment
[2026-01-28 13:46:00] info: [simulateCompetition] Horse Legendary Horse: 1 traits applied, 10.0% modifier, 6.7 point adjustment
[2026-01-28 13:46:00] info: [traitCompetitionImpact] Horse 2: 1 traits applied, 6.0% modifier, 4.0 point adjustment
[2026-01-28 13:46:00] info: [simulateCompetition] Horse Regular Horse: 1 traits applied, 6.0% modifier, 4.0 point adjustment
[2026-01-28 13:46:00] info: [traitCompetitionImpact] Horse 1: 2 traits applied, 10.4% modifier, 12.3 point adjustment
[2026-01-28 13:46:00] info: [simulateCompetition] Horse Favored Horse: 2 traits applied, 10.4% modifier, 12.3 point adjustment
[2026-01-28 13:46:00] info: [traitCompetitionImpact] Horse 2: 2 traits applied, -13.3% modifier, -15.6 point adjustment
[2026-01-28 13:46:00] info: [simulateCompetition] Horse Unfavored Horse: 2 traits applied, -13.3% modifier, -15.6 point adjustment
[2026-01-28 13:46:00] info: [traitCompetitionImpact] Horse 1: 2 traits applied, 10.5% modifier, 9.9 point adjustment
[2026-01-28 13:46:00] info: [simulateCompetition] Horse Favored Horse: 2 traits applied, 10.5% modifier, 9.9 point adjustment
[2026-01-28 13:46:00] info: [traitCompetitionImpact] Horse 2: 2 traits applied, -10.4% modifier, -9.9 point adjustment
[2026-01-28 13:46:00] info: [simulateCompetition] Horse Unfavored Horse: 2 traits applied, -10.4% modifier, -9.9 point adjustment
[2026-01-28 13:46:00] info: [traitCompetitionImpact] Horse 1: 2 traits applied, 9.5% modifier, 6.4 point adjustment
[2026-01-28 13:46:00] info: [simulateCompetition] Horse Favored Horse: 2 traits applied, 9.5% modifier, 6.4 point adjustment
[2026-01-28 13:46:00] info: [traitCompetitionImpact] Horse 2: 2 traits applied, -13.3% modifier, -8.9 point adjustment
[2026-01-28 13:46:00] info: [simulateCompetition] Horse Unfavored Horse: 2 traits applied, -13.3% modifier, -8.9 point adjustment
[2026-01-28 13:46:00] warn: [traitCompetitionImpact] Unknown trait: legendary_bloodline
[2026-01-28 13:46:00] info: [traitCompetitionImpact] Horse 1: 3 traits applied, 13.5% modifier, 9.0 point adjustment
[2026-01-28 13:46:00] info: [simulateCompetition] Horse Base Horse: 3 traits applied, 13.5% modifier, 9.0 point adjustment
[2026-01-28 13:46:00] info: [traitCompetitionImpact] Horse 1: 5 traits applied, 16.4% modifier, 11.0 point adjustment
[2026-01-28 13:46:00] info: [simulateCompetition] Horse Base Horse: 5 traits applied, 16.4% modifier, 11.0 point adjustment
[2026-01-28 13:46:00] info: [traitCompetitionImpact] Horse 2: 1 traits applied, 6.0% modifier, 4.0 point adjustment
[2026-01-28 13:46:00] info: [simulateCompetition] Horse Base Horse: 1 traits applied, 6.0% modifier, 4.0 point adjustment
[2026-01-28 13:46:00] warn: [traitCompetitionImpact] Unknown trait: unknown_trait
[2026-01-28 13:46:00] warn: [traitCompetitionImpact] Unknown trait: another_unknown
[2026-01-28 13:46:00] info: [traitCompetitionImpact] Horse 1: 1 traits applied, 6.0% modifier, 4.0 point adjustment
[2026-01-28 13:46:00] info: [simulateCompetition] Horse Base Horse: 1 traits applied, 6.0% modifier, 4.0 point adjustment
PASS tests/integration/competitionWithTraits.test.mjs
  Competition Simulation with Trait Impact
    Single Horse Competition
      √ should simulate competition without traits (6 ms)
      √ should apply positive trait bonuses (5 ms)
      √ should apply negative trait penalties (3 ms)
      √ should handle mixed traits correctly (2 ms)
    Multi-Horse Competition
      √ should rank horses correctly with trait differences (12 ms)
      √ should handle legendary traits appropriately (4 ms)
    Discipline-Specific Effects
      √ should apply correct trait effects for Dressage (5 ms)
      √ should apply correct trait effects for Racing (3 ms)
      √ should apply correct trait effects for Cross Country (4 ms)
    Balance and Fairness
      √ should not allow traits to completely dominate base stats (9 ms)
      √ should apply diminishing returns for trait stacking (4 ms)
    Error Handling
      √ should handle horses with malformed trait data (1 ms)
      √ should handle unknown traits gracefully (5 ms)

[2026-01-28 13:46:00] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:00] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:00] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:00] info: [envValidator] Test environment validation complete. Success: true
PASS tests/taskInfluenceConfig.test.mjs
  Task Influence Configuration
    Task Influence Map Structure
      √ should define influence map for all foal tasks (3 ms)
      √ should have entries for all enrichment tasks (3 ms)
      √ should have entries for all grooming tasks (2 ms)
      √ should have correct structure for each task entry (14 ms)
    Task Coverage Validation
      √ should cover all enrichment tasks (1 ms)
      √ should cover all grooming tasks (1 ms)
      √ should not have entries for non-foal tasks
    Trait Influence Validation
      √ should have logical trait mappings for enrichment tasks
      √ should have logical trait mappings for grooming tasks (1 ms)
      √ should have consistent daily values (1 ms)
      √ should have unique trait combinations per task (1 ms)
    Business Rule Validation
      √ should support trait point accumulation system (2 ms)
      √ should have reasonable trait distribution (5 ms)
      √ should support epigenetic development progression (1 ms)
    Integration Validation
      √ should integrate with foal task categories (1 ms)
      √ should provide complete task influence coverage
    Data Quality Validation
      √ should have meaningful trait names (3 ms)
      √ should maintain consistent naming conventions (2 ms)
    Utility Functions
      getTaskInfluence
        √ should return influence object for valid task (1 ms)
        √ should return null for invalid task (1 ms)
      getTraitsInfluencedByTask
        √ should return traits for valid task (1 ms)
        √ should return empty array for invalid task (1 ms)
        √ should return copy of traits array (1 ms)
      getDailyTraitValue
        √ should return daily value for valid task
        √ should return 0 for invalid task (1 ms)
      getTasksInfluencingTrait
        √ should return tasks that influence a specific trait (1 ms)
        √ should return empty array for non-existent trait (1 ms)
        √ should return all tasks for presentationBoosted trait
      getAllInfluencedTraits
        √ should return all unique traits (1 ms)
        √ should return sorted array (5 ms)
        √ should return unique traits only
      calculateTraitPoints
        √ should calculate trait points for single task (1 ms)
        √ should calculate trait points for multiple tasks (1 ms)
        √ should handle overlapping traits correctly (1 ms)
        √ should ignore invalid tasks
        √ should handle zero completions (1 ms)
      validateTaskInfluenceMap
        √ should validate correct structure (1 ms)

[2026-01-28 13:46:00] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:00] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:00] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:00] info: [envValidator] Test environment validation complete. Success: true
PASS tests/generateMockShows.test.mjs
  🎪 UNIT: Generate Mock Shows - Competition Data Generation Utilities
    generateMockShows
      √ should generate the correct number of shows (3 ms)
      √ should generate default 10 shows when no count provided (1 ms)
      √ should generate 0 shows when count is 0 (1 ms)
      √ should throw error for negative count (5 ms)
      √ should throw error for non-number count (1 ms)
      √ should generate shows with all required properties (3 ms)
      √ should generate unique sequential IDs (1 ms)
      √ should use only valid disciplines (2 ms)
      √ should generate realistic show names (8 ms)
      √ should respect level constraints (5 ms)
      √ should respect entry fee range (100-500) (3 ms)
      √ should respect prize range (500-2000) (6 ms)
      √ should generate run dates within ±30 days of today (2 ms)
      √ should generate variety in disciplines across multiple shows
      √ should generate variety in show names (1 ms)
    generateSingleMockShow
      √ should generate a single show with default properties (1 ms)
      √ should allow overriding specific properties (1 ms)
      √ should maintain constraints for non-overridden properties (1 ms)
    Integration with statMap
      √ should only use disciplines that exist in statMap (2 ms)
      √ should eventually use most available disciplines with enough shows (1 ms)

[2026-01-28 13:46:00] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:00] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:00] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:00] info: [envValidator] Test environment validation complete. Success: true
PASS tests/groomMarketplace.test.mjs
  🏪 Groom Marketplace System
    Random Groom Generation
      √ should generate a valid groom with all required properties (6 ms)
      √ should generate experience within skill level ranges (14 ms)
      √ should calculate session rates based on skill level and experience (2 ms)
      √ should generate unique marketplace IDs (11 ms)
      √ should generate meaningful bios that include name and specialty (1 ms)
    Marketplace Generation
      √ should generate marketplace with default size (3 ms)
      √ should generate marketplace with custom size
      √ should respect quality distribution over large sample (11 ms)
    Refresh Mechanics
      √ should need refresh when no last refresh provided (1 ms)
      √ should need refresh when enough time has passed (1 ms)
      √ should not need refresh when not enough time has passed
      √ should calculate correct refresh cost (1 ms)
    Configuration Validation
      √ should have valid marketplace configuration (2 ms)

[2026-01-28 13:46:01] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:01] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:01] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:01] info: [envValidator] Test environment validation complete. Success: true
PASS tests/foalEnrichment.test.mjs
  🐴 PURE ALGORITHMIC: Foal Enrichment Helper Functions
    calculateActivityOutcome
      √ should calculate activity outcome within specified ranges (8 ms)
      √ should classify outcome as excellent for high bonding and low stress (1 ms)
      √ should classify outcome as challenging for low bonding or high stress (1 ms)
      √ should classify outcome as success for moderate bonding and stress (1 ms)
    calculateBoundedScore
      √ should enforce minimum bound of 0 (1 ms)
      √ should enforce maximum bound of 100 (6 ms)
      √ should return correct values within bounds (1 ms)
      √ should handle edge cases at boundaries (1 ms)
    applyDefaultScores
      √ should use default values for null inputs (1 ms)
      √ should preserve non-null values (1 ms)
      √ should handle mixed null and non-null values (1 ms)
      √ should handle zero values correctly (not treat as null)

[2026-01-28 13:46:01] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:01] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:01] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:01] info: [envValidator] Test environment validation complete. Success: true
PASS tests/burnoutImmunityTraitIntegration.test.mjs
  Burnout Immunity & Trait Integration
    Complete Foal Development Workflow
      √ should demonstrate full workflow from consistent care to trait rewards (5 ms)
      √ should handle streak loss and recovery scenario (2 ms)
      √ should demonstrate per-horse independent tracking (2 ms)
    Grace Period Edge Cases
      √ should handle exactly 2-day grace period with trait evaluation (1 ms)
      √ should handle 3-day gap (beyond grace period) (2 ms)
    Trait Assignment with Streak Bonuses
      √ should demonstrate streak bonus impact on trait assignment (1 ms)
      √ should validate trait metadata for all assigned traits (9 ms)
    Real-World Player Scenarios
      √ should handle casual player with weekend-only care (1 ms)
      √ should handle dedicated player with consistent daily care (2 ms)

[2026-01-28 13:46:01] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:01] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:01] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:01] info: [envValidator] Test environment validation complete. Success: true
PASS tests/horseHistory.test.mjs
  📚 UNIT: Horse History Controller - Competition History Retrieval
    getHorseHistory
      √ should return horse competition history successfully (4 ms)
      √ should return empty array when horse has no competition history (1 ms)
      √ should handle invalid horse ID (non-numeric) (2 ms)
      √ should handle invalid horse ID (negative number) (1 ms)
      √ should handle invalid horse ID (zero) (1 ms)
      √ should handle database errors gracefully (1 ms)
      √ should properly parse stat gains JSON (1 ms)
      √ should handle malformed stat gains JSON gracefully (1 ms)
      √ should handle large horse ID numbers (6 ms)
      √ should maintain order from database query (newest first) (2 ms)

[2026-01-28 13:46:02] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:02] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:02] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:02] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:46:02] info: [CSRF] Token generated
[2026-01-28 13:46:02] info: [CSRF] Token generated
[2026-01-28 13:46:02] info: [CSRF] Token generated
[2026-01-28 13:46:02] info: [CSRF] Token generated
[2026-01-28 13:46:02] info: [CSRF] Token generated
[2026-01-28 13:46:02] info: [CSRF] Token generated
[2026-01-28 13:46:02] info: [CSRF] Token generated
[2026-01-28 13:46:02] info: [CSRF] Token generated
[2026-01-28 13:46:02] info: [CSRF] Token generated
[2026-01-28 13:46:02] info: [CSRF] Token generated
PASS __tests__/unit/security/csrf-validation.test.mjs
  CSRF Token Validation Unit Tests
    CSRF Token Generation
      √ should generate a CSRF token (5 ms)
      √ should store CSRF token in session (2 ms)
      √ should generate unique tokens for each request (2 ms)
      √ should generate token with sufficient length (2 ms)
      √ should generate token with cryptographically secure randomness (2 ms)
    CSRF Token Validation - Valid Scenarios
      √ should accept valid CSRF token in body (1 ms)
      √ should accept valid CSRF token in header (1 ms)
      √ should prefer body token over header token (1 ms)
      √ should skip CSRF for GET requests (7 ms)
      √ should skip CSRF for HEAD requests (1 ms)
      √ should skip CSRF for OPTIONS requests (1 ms)
    CSRF Token Validation - Invalid Scenarios
      √ should reject POST request without CSRF token (1 ms)
      √ should reject PUT request without CSRF token (1 ms)
      √ should reject DELETE request without CSRF token (1 ms)
      √ should reject PATCH request without CSRF token (1 ms)
      √ should reject mismatched CSRF token (1 ms)
      √ should reject empty CSRF token (1 ms)
      √ should reject null CSRF token (1 ms)
      √ should reject undefined CSRF token (1 ms)
      √ should reject when session has no CSRF token (1 ms)
      √ should reject when session is missing
    CSRF Token Security Edge Cases
      √ should reject token with extra whitespace
      √ should reject token with newline characters
      √ should reject token with special characters appended
      √ should be case-sensitive for token validation
      √ should reject partial token match (1 ms)
      √ should use timing-safe comparison for tokens (2 ms)
    CSRF Error Handling
      √ should return proper error response for CSRF failure (1 ms)
      √ should not leak session token in error message (1 ms)
      √ should not leak provided token in error message (1 ms)
    CSRF Token Rotation
      √ should allow token regeneration (3 ms)
      √ should invalidate old token after regeneration (8 ms)
    CSRF Double-Submit Cookie Pattern
      √ should validate CSRF token from cookie (1 ms)
    CSRF Integration with Different Content Types
      √ should validate CSRF for application/json (1 ms)
      √ should validate CSRF for application/x-www-form-urlencoded (1 ms)
      √ should validate CSRF for multipart/form-data (1 ms)

[2026-01-28 13:46:02] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:02] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:02] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:02] info: [envValidator] Test environment validation complete. Success: true
PASS tests/groomSystem.test.mjs
  👩‍🔧 UNIT: Groom System - Foal Care Assignment & Management
    assignGroomToFoal
      √ should assign groom to foal successfully (6 ms)
      √ should throw error when foal not found (3 ms)
      √ should throw error when groom not found (1 ms)
      √ should throw error when groom is not active (1 ms)
      √ should throw error when groom already assigned (1 ms)
      √ should deactivate existing primary assignments when assigning new primary (1 ms)
    ensureDefaultGroomAssignment
      √ should return existing assignment if one exists (1 ms)
      √ should create default assignment if none exists (1 ms)
    calculateGroomInteractionEffects
      √ should calculate bonding and stress effects correctly (4 ms)
      √ should apply specialty modifiers correctly (1 ms)
      √ should apply skill level modifiers correctly (1 ms)
      √ should apply experience bonus correctly (1 ms)
      √ should scale effects with duration (2 ms)
    System Constants
      √ should have all required groom specialties (8 ms)
      √ should have all required skill levels (4 ms)
      √ should have all required personality traits (2 ms)
    hasAlreadyCompletedFoalTaskToday
      √ should return false when foal has no daily task record (1 ms)
      √ should return false when foal has empty daily task record (1 ms)
      √ should return false when foal has no tasks for today (1 ms)
      √ should return false when foal has empty task array for today
      √ should return true when foal has completed enrichment task today
      √ should return true when foal has completed grooming task today
      √ should return true when foal has completed multiple tasks today (1 ms)
      √ should return false when foal has completed non-foal tasks today (1 ms)
      √ should return true when foal has mixed tasks including foal tasks today (1 ms)
      √ should test all enrichment tasks are detected (1 ms)
      √ should test all grooming tasks are detected (1 ms)
      √ should handle edge cases gracefully (1 ms)
    Error Handling
      √ should handle database errors gracefully (3 ms)
      √ should handle invalid groom data in calculations (5 ms)

[2026-01-28 13:46:02] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:02] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:02] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:02] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:46:02] warn: [traitEffects.getTraitEffects] No effects defined for trait: nonexistent_trait
[2026-01-28 13:46:02] warn: [traitEffects.getTraitEffects] Invalid trait name: null
[2026-01-28 13:46:02] warn: [traitEffects.getTraitEffects] Invalid trait name: undefined
[2026-01-28 13:46:02] warn: [traitEffects.getTraitEffects] Invalid trait name: 
[2026-01-28 13:46:02] warn: [traitEffects.getTraitEffects] Invalid trait name: 123
[2026-01-28 13:46:02] warn: [traitEffects.getTraitEffects] No effects defined for trait: nonexistent_trait
[2026-01-28 13:46:02] warn: [traitEffects.getCombinedTraitEffects] Invalid trait names array
[2026-01-28 13:46:02] warn: [traitEffects.getTraitEffects] No effects defined for trait: invalid_trait
PASS tests/traitEffects.test.mjs
  🎭 UNIT: Trait Effects System - Trait Impact Calculation & Combination
    getTraitEffects
      √ should return effects for valid trait (3 ms)
      √ should return null for invalid trait (2 ms)
      √ should return null for invalid input (11 ms)
    hasTraitEffect
      √ should return true for existing effect (1 ms)
      √ should return false for non-existing effect (1 ms)
    getCombinedTraitEffects
      √ should combine multiple trait effects correctly (1 ms)
      √ should handle numeric modifiers additively
      √ should handle boolean effects correctly (1 ms)
      √ should merge object effects correctly (1 ms)
      √ should handle empty array (1 ms)
      √ should handle invalid input (1 ms)
      √ should ignore invalid trait names (2 ms)
    Positive Traits
      √ resilient trait should have correct effects (1 ms)
      √ intelligent trait should have correct effects (1 ms)
      √ athletic trait should have correct effects (7 ms)
    Negative Traits
      √ nervous trait should have correct penalties (1 ms)
      √ lazy trait should have correct penalties
      √ burnout trait should have severe penalties
    Rare Traits
      √ legendary_bloodline trait should have powerful effects (1 ms)
    Discipline-Specific Modifiers
      √ should have appropriate discipline bonuses for positive traits (1 ms)
      √ should have appropriate discipline penalties for negative traits (1 ms)
    getAllTraitEffects
      √ should return complete trait effects mapping (1 ms)
      √ should include all expected trait categories (1 ms)

[2026-01-28 13:46:03] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:03] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:03] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:03] info: [envValidator] Test environment validation complete. Success: true
PASS tests/foalModel.test.mjs
  🍼 UNIT: Foal Model - Foal Development & Activity Management
    getFoalDevelopment
      √ should return foal development data for valid foal (4 ms)
      √ should throw error for horse that is not a foal (3 ms)
      √ should throw error for 2-year-old horse (boundary test) (1 ms)
      √ should accept 1-year-old horse (boundary test) (1 ms)
      √ should validate availableActivities are returned correctly (2 ms)
      √ should filter out completed activities from available activities (1 ms)
      √ should throw error for non-existent horse (1 ms)
      √ should throw error for invalid foal ID (3 ms)
      √ should create default development record for new foal (2 ms)
    completeActivity
      √ should complete an available activity successfully (9 ms)
      √ should update completedActivities correctly when completing activity (2 ms)
      √ should add to existing completed activities for the same day (1 ms)
      √ should enforce bonding level bounds (0-100) (1 ms)
      √ should enforce stress level bounds (0-100) (1 ms)
      √ should throw error for missing development record
      √ should throw error for invalid foal ID (1 ms)
      √ should throw error for missing activity type (1 ms)
      √ should throw error for unavailable activity (1 ms)
    advanceDay
      √ should advance foal to next day successfully (1 ms)
      √ should throw error for foal that has completed development (1 ms)
      √ should throw error for invalid foal ID (1 ms)
    completeEnrichmentActivity
      √ should complete enrichment activity successfully (2 ms)
      √ should validate day parameter (0-6) (1 ms)
      √ should validate activity is appropriate for the day (1 ms)
      √ should enforce bonding and stress bounds (0-100) (1 ms)
      √ should handle null bondScore and stressLevel with defaults (1 ms)
      √ should throw error for horse that is not a foal (1 ms)
    getAvailableActivities
      √ should return activities for day 0 (1 ms)
      √ should return different activities for different days (1 ms)
      √ should filter out completed activities (1 ms)
      √ should return empty array for invalid day (6 ms)
      √ should handle missing completedActivities gracefully (1 ms)

[2026-01-28 13:46:03] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:03] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:03] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:03] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:46:03] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 6 at age 365
[2026-01-28 13:46:03] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}
[2026-01-28 13:46:03] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits
[2026-01-28 13:46:03] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 7 at age 730
[2026-01-28 13:46:03] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}
[2026-01-28 13:46:03] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_2, applied 0 traits
[2026-01-28 13:46:03] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 8 at age 730
[2026-01-28 13:46:03] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}
[2026-01-28 13:46:03] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_2, applied 0 traits
[2026-01-28 13:46:03] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 9 at age 365
[2026-01-28 13:46:03] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}
[2026-01-28 13:46:03] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits
[2026-01-28 13:46:03] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 10 at age 730
[2026-01-28 13:46:03] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}
[2026-01-28 13:46:03] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_2, applied 0 traits
[2026-01-28 13:46:03] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 11 at age 1095
[2026-01-28 13:46:03] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}
[2026-01-28 13:46:03] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_3, applied 0 traits
[2026-01-28 13:46:03] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 12 at age 500
[2026-01-28 13:46:03] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}
[2026-01-28 13:46:03] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits
[2026-01-28 13:46:03] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 13 at age 365
[2026-01-28 13:46:03] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Milestone age_1 already evaluated, skipping
[2026-01-28 13:46:03] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 14 at age 730
[2026-01-28 13:46:03] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}
[2026-01-28 13:46:03] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_2, applied 0 traits
[2026-01-28 13:46:03] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 15 at age 365
[2026-01-28 13:46:03] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}
[2026-01-28 13:46:03] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits
[2026-01-28 13:46:03] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 16 at age 730
[2026-01-28 13:46:03] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}
[2026-01-28 13:46:03] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_2, applied 0 traits
[2026-01-28 13:46:03] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 17 at age 365
[2026-01-28 13:46:03] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}
[2026-01-28 13:46:03] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits
[2026-01-28 13:46:03] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 18 at age 1095
[2026-01-28 13:46:03] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}
[2026-01-28 13:46:03] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_3, applied 0 traits
[2026-01-28 13:46:03] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 19 at age 365
[2026-01-28 13:46:03] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}
[2026-01-28 13:46:03] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits
[2026-01-28 13:46:03] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 20 at age 730
[2026-01-28 13:46:03] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}
[2026-01-28 13:46:03] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_2, applied 0 traits
[2026-01-28 13:46:03] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 21 at age 1095
[2026-01-28 13:46:03] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}
[2026-01-28 13:46:03] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_3, applied 0 traits
[2026-01-28 13:46:03] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 22 at age 365
[2026-01-28 13:46:03] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}
[2026-01-28 13:46:03] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits
[2026-01-28 13:46:03] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 22 at age 365
[2026-01-28 13:46:03] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}
[2026-01-28 13:46:03] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits
[2026-01-28 13:46:03] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 22 at age 365
[2026-01-28 13:46:03] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}
[2026-01-28 13:46:03] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits
PASS tests/utils/milestoneTraitEvaluator.comprehensive.test.mjs
  🏇 COMPREHENSIVE: Milestone Trait Evaluator System
    Milestone Eligibility Validation
      √ should validate 1-year milestone eligibility (3 ms)
      √ should validate 2-year milestone eligibility (2 ms)
      √ should validate 3-year milestone eligibility (8 ms)
      √ should handle horses too young for milestones (1 ms)
      √ should handle horses too old for milestones
    Trait Milestone Evaluation
      √ should evaluate traits for 1-year milestone (4 ms)
      √ should evaluate traits for 2-year milestone (4 ms)
      √ should evaluate traits with moderate care history (5 ms)
    Task Log Processing and Trait Scoring
      √ should process extensive task history for trait evaluation (9 ms)
      √ should handle minimal task history (3 ms)
      √ should handle empty task history (3 ms)
    Milestone Age Validation and Edge Cases
      √ should handle non-milestone ages correctly (3 ms)
      √ should handle already evaluated milestones (2 ms)
      √ should handle horses with existing traits (3 ms)
    Error Handling and Edge Cases
      √ should handle missing task_log property (6 ms)
      √ should handle null task_log (3 ms)
      √ should handle invalid horse data gracefully (3 ms)
      √ should handle horses with malformed epigenetic modifiers (3 ms)
    Trait Application and Epigenetic Logic
      √ should apply traits appropriately for different milestone ages (12 ms)
      √ should maintain consistency in trait evaluation (8 ms)

[2026-01-28 13:46:03] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:03] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:03] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:03] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:46:03] info: [resultModel.saveResult] Successfully created new result for horse 1 in show 2 with score 85.5
[2026-01-28 13:46:03] info: [resultModel.saveResult] Successfully created new result for horse 3 in show 2 with score 65.2
[2026-01-28 13:46:03] info: [resultModel.saveResult] Successfully created new result for horse 1 in show 2 with score 85.5
[2026-01-28 13:46:03] error: [resultModel.saveResult] Database error: Error: Database connection failed
    at Object.<anonymous> (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\resultModel.test.mjs:361:61)
    at Promise.then.completed (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (<anonymous>)
    at callAsyncCircusFn (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:316:40)
    at _runTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-runner\build\runTest.js:444:34) {
  [stack]: [Getter/Setter],
  [message]: 'Database connection failed'
}
[2026-01-28 13:46:03] info: [resultModel.saveResult] Successfully updated placeholder result for horse 1 in show 2 with score 85.5
[2026-01-28 13:46:03] info: [resultModel.saveResult] Successfully created new result for horse 1 in show 2 with score 85.5
[2026-01-28 13:46:03] info: [resultModel.getResultsByHorse] Found 2 results for horse 1
[2026-01-28 13:46:03] info: [resultModel.getResultsByHorse] Found 0 results for horse 999
[2026-01-28 13:46:03] error: [resultModel.getResultsByHorse] Database error: Error: Database connection failed
    at Object.<anonymous> (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\resultModel.test.mjs:562:63)
    at Promise.then.completed (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (<anonymous>)
    at callAsyncCircusFn (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:316:40)
    at _runTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-runner\build\runTest.js:444:34) {
  [stack]: [Getter/Setter],
  [message]: 'Database connection failed'
}
[2026-01-28 13:46:03] info: [resultModel.getResultsByShow] Found 2 results for show 2
[2026-01-28 13:46:03] info: [resultModel.getResultsByShow] Found 0 results for show 999
[2026-01-28 13:46:03] error: [resultModel.getResultsByShow] Database error: Error: Database connection failed
    at Object.<anonymous> (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\resultModel.test.mjs:634:63)
    at Promise.then.completed (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (<anonymous>)
    at callAsyncCircusFn (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:316:40)
    at _runTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-runner\build\runTest.js:444:34) {
  [stack]: [Getter/Setter],
  [message]: 'Database connection failed'
}
[2026-01-28 13:46:03] info: [resultModel.getResultById] Successfully found result: 1
[2026-01-28 13:46:03] error: [resultModel.getResultById] Database error: Error: Database connection failed
    at Object.<anonymous> (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\resultModel.test.mjs:692:65)
    at Promise.then.completed (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (<anonymous>)
    at callAsyncCircusFn (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:316:40)
    at _runTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-runner\build\runTest.js:444:34) {
  [stack]: [Getter/Setter],
  [message]: 'Database connection failed'
}
[2026-01-28 13:46:03] info: [resultModel.saveResult] Successfully created new result for horse 1 in show 2 with score 85.5
[2026-01-28 13:46:03] info: [resultModel.getResultsByUser] Retrieved 1 results for user user123
[2026-01-28 13:46:03] info: [resultModel.getResultsByUser] Retrieved 0 results for user user123
[2026-01-28 13:46:03] info: [resultModel.getResultsByUser] Retrieved 0 results for user user123
[2026-01-28 13:46:03] error: [resultModel.getResultsByUser] Error getting results for user user123: Database error
[2026-01-28 13:46:03] info: [resultModel.getResultsByHorse] Found 0 results for horse 123
[2026-01-28 13:46:03] info: [resultModel.getResultsByShow] Found 0 results for show 456
PASS tests/resultModel.test.mjs
  🏆 UNIT: Result Model - Competition Result Management
    saveResult
      √ should save a competition result with all required fields (6 ms)
      √ should save a result without placement (null for non-top-3) (2 ms)
      √ should throw error if horseId is missing (5 ms)
      √ should throw error if showId is missing (2 ms)
      √ should throw error if score is missing (1 ms)
      √ should throw error if discipline is missing (1 ms)
      √ should throw error if runDate is missing (8 ms)
      √ should validate score is a number (1 ms)
      √ should validate horseId is a positive integer (2 ms)
      √ should validate showId is a positive integer (1 ms)
      √ should throw error if showName is missing (2 ms)
      √ should throw error if showName is not a string (1 ms)
      √ should handle prizeWon as string and convert to float (2 ms)
      √ should handle database errors gracefully (3 ms)
      √ should update existing placeholder result instead of creating new one (2 ms)
      √ should create new result when no placeholder exists (2 ms)
    getResultsByHorse
      √ should retrieve all results for a specific horse (3 ms)
      √ should return empty array if no results found for horse (2 ms)
      √ should validate horseId is a positive integer (2 ms)
      √ should handle database errors gracefully (9 ms)
    getResultsByShow
      √ should retrieve all results for a specific show (3 ms)
      √ should return empty array if no results found for show (2 ms)
      √ should validate showId is a positive integer (1 ms)
      √ should handle database errors gracefully (2 ms)
    getResultById
      √ should retrieve a specific result by ID (2 ms)
      √ should return null if result not found (1 ms)
      √ should validate resultId is a positive integer (2 ms)
      √ should handle database errors gracefully (2 ms)
    createResult
      √ should be an alias for saveResult and work identically (2 ms)
      √ should throw same validation errors as saveResult (1 ms)
    getResultsByUser
      √ should retrieve results for all user horses with default options (3 ms)
      √ should handle custom options (limit, offset, discipline) (2 ms)
      √ should cap limit at 100 and ensure non-negative offset (6 ms)
      √ should handle database errors gracefully (2 ms)
    parseInt conversion edge cases
      √ should handle string IDs in getResultsByHorse (2 ms)
      √ should handle string IDs in getResultsByShow (2 ms)
      √ should handle string IDs in getResultById (1 ms)

[2026-01-28 13:46:04] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:04] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:04] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:04] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:46:04] info: [groomRareTraitPerks] Perk revealed: Phoenix Whisperer for groom 1
[2026-01-28 13:46:04] info: [groomRareTraitPerks] Perk revealed: Phoenix Whisperer for groom 1
PASS tests/ultraRareTraitsCore.test.mjs
  Ultra-Rare & Exotic Traits Core Functionality
    Trait Definitions System
      √ should retrieve all ultra-rare trait definitions (2 ms)
      √ should retrieve all exotic trait definitions (1 ms)
      √ should get specific trait definition by name (1 ms)
      √ should have correct trait structure for all ultra-rare traits (5 ms)
      √ should have correct trait structure for all exotic traits (8 ms)
    Groom Perk System
      √ should apply rare trait booster effects to probability calculations (2 ms)
      √ should not apply bonuses when no conditions are met (2 ms)
    Mechanical Effects Integration
      √ should apply ultra-rare stress effects correctly (1 ms)
      √ should apply ultra-rare competition effects correctly (1 ms)
      √ should check ultra-rare abilities correctly (1 ms)
      √ should handle multiple ultra-rare traits correctly (1 ms)
      √ should handle stress immunity correctly (1 ms)
    Trait Conflicts and Stacking
      √ should define proper trait conflicts (1 ms)
      √ should define proper trait stacking

[2026-01-28 13:46:04] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:04] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:04] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:04] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:46:04] warn: [Validation] Input validation failed
PASS __tests__/unit/security/validation-error-handler.test.mjs
  validationErrorHandler
    √ passes through when no errors (2 ms)
    √ returns 400 on validation errors (11 ms)
    √ sanitizes request body by keeping only validated fields (1 ms)

[2026-01-28 13:46:04] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:04] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:04] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:04] info: [envValidator] Test environment validation complete. Success: true
PASS tests/atBirthTraits.test.mjs
  🧬 UNIT: At-Birth Traits System - Comprehensive Breeding Analysis Testing
    AT_BIRTH_TRAITS
      √ should have positive and negative trait categories (4 ms)
      √ should have valid trait definitions (7 ms)
    evaluateTraitConditions
      √ should correctly evaluate mare stress conditions (6 ms)
      √ should correctly evaluate feed quality conditions (2 ms)
      √ should correctly evaluate inbreeding conditions (1 ms)
      √ should correctly evaluate multiple conditions (1 ms)
    assessFeedQuality
      √ should return feed quality based on mare health status (2 ms)
      √ should return default quality for missing mare (1 ms)
      √ should adjust quality based on earnings (2 ms)
    getAncestors
      √ should return empty array for no generations (1 ms)
      √ should return empty array for empty horse IDs (1 ms)
      √ should get immediate parents (2 ms)
    detectInbreeding
      √ should detect no inbreeding when no common ancestors (1 ms)
      √ should detect inbreeding when common ancestors exist (1 ms)
    analyzeLineage
      √ should detect discipline specialization (1 ms)
      √ should handle no competition history (1 ms)
    applyEpigeneticTraitsAtBirth
      √ should apply positive traits for optimal breeding conditions (2 ms)
      √ should apply negative traits for poor breeding conditions (1 ms)
      √ should apply inbred trait when inbreeding detected (2 ms)
      √ should apply inbred trait with direct condition testing (1 ms)
      √ should apply specialized lineage trait when discipline specialization detected (6 ms)
      √ should handle missing mare gracefully (3 ms)
      √ should require both sire and dam IDs (3 ms)
      √ should use mare stress level from database when not provided (1 ms)
      √ should move traits to hidden when many traits are applied (2 ms)
      √ should handle errors in lineage analysis gracefully (1 ms)
    checkLineageForDisciplineAffinity
      √ should return affinity true when 3 or more ancestors share the same discipline (2 ms)
      √ should return affinity false when less than 3 ancestors share the same discipline (1 ms)
      √ should handle ancestors with competition history (1 ms)
      √ should handle ancestors with discipline scores (1 ms)
      √ should handle empty ancestors array (1 ms)
      √ should handle null ancestors (1 ms)
      √ should handle ancestors without discipline information (1 ms)
      √ should prioritize direct discipline field over other methods (1 ms)
      √ should handle mixed data sources correctly (1 ms)
    getMostCommonDisciplineFromHistory
      √ should return the most common discipline from competition history (1 ms)
      √ should return null for empty competition history (5 ms)
      √ should return null for null competition history (1 ms)
      √ should handle competitions without discipline field (1 ms)
    getHighestScoringDiscipline
      √ should return the discipline with the highest score (1 ms)
      √ should return null for empty discipline scores (1 ms)
      √ should return null for null discipline scores (1 ms)
      √ should handle non-numeric scores (1 ms)
      √ should handle all non-numeric scores (1 ms)

[2026-01-28 13:46:05] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:05] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:05] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:05] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:46:05] info: [CSRF] Token generated
[2026-01-28 13:46:05] error: [CSRF] Token generation failed: Token generation failed
[2026-01-28 13:46:05] info: [CSRF] Token generated
[2026-01-28 13:46:05] warn: [CSRF] Invalid token detected
[2026-01-28 13:46:05] warn: [CSRF] Invalid token detected
[2026-01-28 13:46:05] warn: [CSRF] Invalid token detected
[2026-01-28 13:46:05] warn: [CSRF] Invalid token detected
[2026-01-28 13:46:05] warn: [CSRF] Invalid token detected
[2026-01-28 13:46:05] warn: [CSRF] Invalid token detected
[2026-01-28 13:46:05] info: [CSRF] Token generated
[2026-01-28 13:46:05] info: [CSRF] Token generated
[2026-01-28 13:46:05] info: [CSRF] Token generated
PASS __tests__/middleware/csrf.test.mjs
  CSRF Protection Middleware
    getCsrfToken
      √ should generate and return CSRF token (5 ms)
      √ should handle token generation failure (5 ms)
      √ should generate token without user (unauthenticated) (2 ms)
    applyCsrfProtection
      √ should apply CSRF protection to POST requests (1 ms)
      √ should apply CSRF protection to PUT requests (1 ms)
      √ should apply CSRF protection to DELETE requests (1 ms)
      √ should apply CSRF protection to PATCH requests (1 ms)
      √ should skip CSRF protection for GET requests (1 ms)
      √ should skip CSRF protection for HEAD requests (1 ms)
      √ should skip CSRF protection for OPTIONS requests (6 ms)
    csrfErrorHandler
      √ should handle CSRF validation errors (EBADCSRFTOKEN) (2 ms)
      √ should pass non-CSRF errors to next handler (1 ms)
      √ should handle CSRF error without user context (2 ms)
      √ should include security logging context on CSRF error (2 ms)
    Security Scenarios
      √ should protect against missing CSRF token (2 ms)
      √ should protect against invalid CSRF token (2 ms)
      √ should provide user-friendly error message (2 ms)
    Integration with Cookie Configuration
      √ getCsrfToken should work without authentication (2 ms)
      √ should handle concurrent token generation (2 ms)
    HTTP Method Classification
      √ should NOT require CSRF token for GET requests
      √ should NOT require CSRF token for HEAD requests (1 ms)
      √ should NOT require CSRF token for OPTIONS requests (1 ms)
      √ should require CSRF token for POST requests (1 ms)
      √ should require CSRF token for PUT requests (5 ms)
      √ should require CSRF token for DELETE requests (1 ms)
      √ should require CSRF token for PATCH requests (1 ms)

[2026-01-28 13:46:05] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:05] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:05] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:05] info: [envValidator] Test environment validation complete. Success: true
PASS tests/lineageTraitCheck.test.mjs
  🧬 UNIT: Lineage Trait Check - Discipline Affinity Analysis
    checkLineageForDisciplineAffinity
      √ should return affinity true when 3 or more ancestors share the same discipline (2 ms)
      √ should return affinity false when less than 3 ancestors share the same discipline (1 ms)
      √ should handle empty ancestors array (8 ms)
      √ should handle null ancestors (1 ms)
      √ should handle ancestors without discipline information (1 ms)
      √ should handle exactly 3 ancestors with same discipline
      √ should handle more than 3 ancestors with same discipline
    getAncestorPreferredDiscipline
      √ should prioritize direct discipline field (1 ms)
      √ should use competition history when no direct discipline (1 ms)
      √ should use discipline scores when no competition history (1 ms)
      √ should use competitions field as alternative to competitionHistory
      √ should use specialty field as fallback
      √ should return null when no discipline information available (1 ms)
    checkLineageForDisciplineAffinityDetailed
      √ should provide detailed analysis with affinity (2 ms)
      √ should provide detailed analysis without affinity (1 ms)
      √ should handle empty ancestors array (1 ms)
    checkSpecificDisciplineAffinity
      √ should check for specific discipline affinity with default minimum (2 ms)
      √ should check for specific discipline affinity with custom minimum (5 ms)
      √ should return false when not enough ancestors match (1 ms)
      √ should handle empty ancestors or missing target discipline (1 ms)
    getMostCommonDisciplineFromHistory
      √ should return the most common discipline
      √ should handle empty or null history
      √ should handle competitions without discipline field (1 ms)
    getHighestScoringDiscipline
      √ should return the highest scoring discipline (1 ms)
      √ should handle empty or null scores (1 ms)
      √ should handle non-numeric scores (1 ms)
      √ should return null when all scores are non-numeric
    error handling
      √ should handle errors gracefully in main function
      √ should handle errors gracefully in detailed function (1 ms)
      √ should handle errors gracefully in specific discipline check (1 ms)
      √ should handle undefined ancestors gracefully (1 ms)
      √ should handle ancestors with circular references gracefully (1 ms)

[2026-01-28 13:46:05] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:05] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:05] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:05] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:46:05] warn: CORS blocked request from origin: http://evil.com
[2026-01-28 13:46:05] warn: [CORS] Request with no origin detected - API key validation required
  console.error
    TypeError: Cannot read properties of undefined (reading 'get')
        at Object.trustProxy (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:140:21)
        at Object.wrappedValidations.<computed> [as trustProxy] (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:370:22)
        at Object.keyGenerator (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:642:20)
        at C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:696:32
        at C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:676:5

      at Object.wrappedValidations.<computed> [as trustProxy] (node_modules/express-rate-limit/dist/index.mjs:378:21)
      at Object.keyGenerator (node_modules/express-rate-limit/dist/index.mjs:642:20)
      at node_modules/express-rate-limit/dist/index.mjs:696:32
      at node_modules/express-rate-limit/dist/index.mjs:676:5

[2026-01-28 13:46:05] warn: [API Key] API_KEY not configured - requests with no origin are allowed (INSECURE)
[2026-01-28 13:46:05] warn: [API Key] Invalid or missing API key
[2026-01-28 13:46:05] warn: [HTTPS] Insecure HTTP request detected, redirecting to HTTPS
PASS __tests__/unit/security/security-middleware.test.mjs
  security middleware
    corsOptions
      √ allows known origins and rejects unknown (5 ms)
      √ allows no-origin requests (legacy) and supports ALLOWED_ORIGINS env (2 ms)
    createRateLimiter
      √ returns an express-rate-limit instance (4 ms)
    validateApiKey
      √ skips when API_KEY not set (2 ms)
      √ rejects missing or invalid key when configured (10 ms)
      √ allows valid key (1 ms)
    enforceHttps
      √ bypasses in non-production (1 ms)
      √ redirects http in production (2 ms)
    addSecurityHeaders
      √ sets baseline headers (2 ms)
    createSecurityMiddleware
      √ returns middleware array including helmet, cors, and rate limiter (2 ms)

[2026-01-28 13:46:06] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:06] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:06] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:06] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:46:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse test-horse-milestone at age 365
[2026-01-28 13:46:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {"bonded":3,"patient":3,"aloof":-3}
[2026-01-28 13:46:06] info: [milestoneTraitEvaluator.applyTraitToHorse] Applied trait bonded (epigenetic: true)
[2026-01-28 13:46:06] info: [milestoneTraitEvaluator.applyTraitToHorse] Applied trait patient (epigenetic: true)
[2026-01-28 13:46:06] info: [milestoneTraitEvaluator.applyTraitToHorse] Applied trait resists_aloof (epigenetic: true)
[2026-01-28 13:46:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 3 traits
[2026-01-28 13:46:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse test-horse-milestone at age 730
[2026-01-28 13:46:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {"bonded":3,"patient":3,"aloof":-3}
[2026-01-28 13:46:06] info: [milestoneTraitEvaluator.applyTraitToHorse] Applied trait bonded (epigenetic: true)
[2026-01-28 13:46:06] info: [milestoneTraitEvaluator.applyTraitToHorse] Applied trait patient (epigenetic: true)
[2026-01-28 13:46:06] info: [milestoneTraitEvaluator.applyTraitToHorse] Applied trait resists_aloof (epigenetic: true)
[2026-01-28 13:46:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_2, applied 3 traits
[2026-01-28 13:46:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse test-horse-milestone at age 1095
[2026-01-28 13:46:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {"trusting":3,"brave":3,"nervous":-3}
[2026-01-28 13:46:06] info: [milestoneTraitEvaluator.applyTraitToHorse] Applied trait trusting (epigenetic: false)
[2026-01-28 13:46:06] info: [milestoneTraitEvaluator.applyTraitToHorse] Applied trait brave (epigenetic: false)
[2026-01-28 13:46:06] info: [milestoneTraitEvaluator.applyTraitToHorse] Applied trait resists_nervous (epigenetic: false)
[2026-01-28 13:46:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_3, applied 3 traits
[2026-01-28 13:46:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse test-horse-milestone at age 365
[2026-01-28 13:46:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {"bonded":3,"patient":2,"aloof":-3,"affectionate":1,"friendly":1,"playful":1,"independent":-1}
[2026-01-28 13:46:06] info: [milestoneTraitEvaluator.applyTraitToHorse] Applied trait bonded (epigenetic: true)
[2026-01-28 13:46:06] info: [milestoneTraitEvaluator.applyTraitToHorse] Applied trait resists_aloof (epigenetic: true)
[2026-01-28 13:46:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 2 traits
[2026-01-28 13:46:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse test-horse-milestone at age 365
[2026-01-28 13:46:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Milestone age_1 already evaluated, skipping
[2026-01-28 13:46:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse test-horse-milestone at age 200
[2026-01-28 13:46:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse test-horse-milestone at age 365
[2026-01-28 13:46:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}
[2026-01-28 13:46:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits
[2026-01-28 13:46:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse test-horse-milestone at age 365
[2026-01-28 13:46:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {"bonded":1,"patient":1,"aloof":-1}
[2026-01-28 13:46:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits
[2026-01-28 13:46:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse test-horse-milestone at age 365
[2026-01-28 13:46:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {"bonded":3,"patient":3,"aloof":-3}
[2026-01-28 13:46:06] info: [milestoneTraitEvaluator.applyTraitToHorse] Trait bonded already exists, skipping
[2026-01-28 13:46:06] info: [milestoneTraitEvaluator.applyTraitToHorse] Applied trait patient (epigenetic: true)
[2026-01-28 13:46:06] info: [milestoneTraitEvaluator.applyTraitToHorse] Applied trait resists_aloof (epigenetic: true)
[2026-01-28 13:46:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 2 traits
PASS tests/milestoneTraitEvaluator.test.mjs
  Milestone Trait Evaluator
    evaluateTraitMilestones
      √ should assign positive trait when encouraged 3+ times at age 1 (9 ms)
      √ should assign resistance trait when discouraged 3+ times at age 2 (12 ms)
      √ should not mark traits as epigenetic at age 3 (6 ms)
      √ should calculate net trait scores correctly with mixed influences (5 ms)
      √ should not evaluate if already completed for that milestone (2 ms)
      √ should not evaluate if not a milestone age (2 ms)
      √ should handle empty task log gracefully (8 ms)
      √ should handle task log with unknown tasks (3 ms)
      √ should prevent duplicate trait assignment (6 ms)
    calculateTraitScores
      √ should calculate correct scores for single task type (1 ms)
      √ should calculate net scores for mixed task types (1 ms)
      √ should handle empty task log (1 ms)
      √ should ignore unknown tasks (1 ms)
    checkMilestoneEligibility
      √ should return eligible for milestone age without completion (1 ms)
      √ should return not eligible if already evaluated (1 ms)
      √ should return not eligible for non-milestone age (1 ms)
    getMilestoneSummary
      √ should return correct summary for horse with completed milestones (1 ms)
      √ should return correct summary for horse with all milestones complete (1 ms)
    Configuration Validation
      √ should have correct milestone ages defined (1 ms)
      √ should have correct trait thresholds defined (5 ms)
      √ should have valid task trait influence map (5 ms)

[2026-01-28 13:46:06] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:06] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:06] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:06] info: [envValidator] Test environment validation complete. Success: true
PASS tests/epigeneticTraits.test.mjs
  🧬 UNIT: Epigenetic Traits System - Breeding & Environmental Trait Calculation
    Input Validation
      √ should throw error for missing required parameters (6 ms)
      √ should throw error for invalid trait arrays (1 ms)
      √ should throw error for invalid bond scores (1 ms)
      √ should throw error for out-of-range values
      √ should accept valid input without throwing (1 ms)
    Basic Trait Inheritance
      √ should inherit positive traits from both parents (2 ms)
      √ should have chance to inherit each parent trait (1 ms)
      √ should not inherit negative traits from positive parent traits (1 ms)
    Bonding Score Effects
      √ should increase positive trait probability with high bonding (2 ms)
      √ should reduce negative trait probability with high bonding (1 ms)
    Stress Level Effects
      √ should increase negative trait probability with high stress (2 ms)
      √ should reduce positive trait expression with high stress (3 ms)
    Hidden Trait Generation
      √ should generate hidden traits based on environmental factors (1 ms)
      √ should include rare traits in hidden category (1 ms)
    Complex Breeding Scenarios
      √ should handle mixed positive and negative parent traits
      √ should handle parents with no traits (1 ms)
      √ should handle optimal breeding conditions (1 ms)
      √ should handle poor breeding conditions (1 ms)
    Trait Consistency
      √ should not generate contradictory traits (10 ms)
      √ should maintain trait type consistency (1 ms)
    Deterministic Behavior
      √ should produce consistent results with same seed (1 ms)
      √ should produce different results without seed (1 ms)

[2026-01-28 13:46:06] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:06] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:06] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:06] info: [envValidator] Test environment validation complete. Success: true
PASS tests/taskTraitInfluence.integration.test.mjs
  Task-Trait Influence Integration
    System Integration Validation
      √ should have complete coverage of foal tasks (3 ms)
      √ should provide logical trait development progression (1 ms)
    Trait Point Accumulation Scenarios
      √ should calculate trait points for early foal development (0-1 years) (8 ms)
      √ should calculate trait points for middle development (1-2 years) (1 ms)
      √ should calculate trait points for advanced development (2-3 years) (1 ms)
    Real-World Development Scenarios
      √ should support comprehensive foal development progression (1 ms)
      √ should handle specialized development paths (1 ms)
    Trait Influence Analysis
      √ should identify tasks that develop specific traits (2 ms)
      √ should provide complete trait coverage (1 ms)
    Business Rule Validation
      √ should enforce consistent daily values across all tasks (1 ms)
      √ should support meaningful trait point accumulation (1 ms)
      √ should provide balanced trait development opportunities (1 ms)
    Development Stage Integration
      √ should align with foal development stages (1 ms)
      √ should support age-appropriate task progression (1 ms)

[2026-01-28 13:46:07] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:07] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:07] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:07] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:46:07] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task brushing
[2026-01-28 13:46:07] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: task_specialty, trait_match
[2026-01-28 13:46:07] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying playful personality effects for task grooming_game
[2026-01-28 13:46:07] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied playful effects: task_specialty, age_match
[2026-01-28 13:46:07] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying firm personality effects for task hand_walking
[2026-01-28 13:46:07] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied firm effects: task_specialty, trait_match
[2026-01-28 13:46:07] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying patient personality effects for task puddle_training
[2026-01-28 13:46:07] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied patient effects: task_specialty, category_match
[2026-01-28 13:46:07] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying high_energy personality effects for task obstacle_course
[2026-01-28 13:46:07] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied high_energy effects: task_specialty, extra_trait_points
[2026-01-28 13:46:07] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying aloof personality effects for task brushing
[2026-01-28 13:46:07] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied aloof effects: 
[2026-01-28 13:46:07] warn: [groomPersonalityEffects.calculatePersonalityEffects] Unknown personality: unknown_personality
[2026-01-28 13:46:07] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying patient personality effects for task puddle_training
[2026-01-28 13:46:07] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied patient effects: task_specialty, category_match
[2026-01-28 13:46:07] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task brushing
[2026-01-28 13:46:07] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: task_specialty
[2026-01-28 13:46:07] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying playful personality effects for task grooming_game
[2026-01-28 13:46:07] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied playful effects: task_specialty
[2026-01-28 13:46:07] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task brushing
[2026-01-28 13:46:07] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: task_specialty, trait_match
PASS tests/groomPersonalityEffects.test.mjs
  Groom Personality Effects System
    GROOM_PERSONALITY_EFFECTS Configuration
      √ should have all required personality types defined (14 ms)
      √ should have correct gentle personality configuration (2 ms)
      √ should have correct aloof personality penalty configuration (2 ms)
    calculatePersonalityEffects
      √ should apply gentle personality effects for nervous horse with brushing (3 ms)
      √ should apply playful personality effects for young horse (3 ms)
      √ should apply firm personality effects for stubborn horse (3 ms)
      √ should apply patient personality effects for enrichment tasks (8 ms)
      √ should apply high_energy personality effects with extra trait points (3 ms)
      √ should apply aloof personality penalties (3 ms)
      √ should handle unknown personality gracefully (1 ms)
      √ should not exceed maximum success rate of 0.99 (3 ms)
    getPersonalityEffectSummary
      √ should return correct summary for gentle personality with bonus task (1 ms)
      √ should return correct summary for personality without task bonus (1 ms)
      √ should handle unknown personality type (1 ms)
    getAllPersonalityTypes
      √ should return all personality types with correct structure (2 ms)
      √ should correctly identify penalty personalities (1 ms)
    Edge Cases and Error Handling
      √ should handle horse without traits (6 ms)
      √ should handle missing age information (3 ms)
      √ should handle empty base effects object (2 ms)

[2026-01-28 13:46:07] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:07] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:07] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:07] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:46:07] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:46:07] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:46:07] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:46:07] info: [simulateCompetition] Horse TraitHorse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 13:46:07] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 13:46:07] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:46:07] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 13:46:07] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:46:07] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:46:07] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 13:46:07] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 13:46:07] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:46:07] info: [simulateCompetition] Horse Cross CountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 13:46:07] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 13:46:07] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:46:07] info: [simulateCompetition] Horse EnduranceSpecialist: Discipline affinity bonus applied for discipline_affinity_endurance (+5 points)
[2026-01-28 13:46:07] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_endurance
[2026-01-28 13:46:07] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 13:46:07] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 13:46:07] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
PASS tests/task9IntegrationExample.test.mjs
  🏆 INTEGRATION: Task 9 Integration Example - Discipline Affinity Trait Bonus
    √ should apply +5 flat bonus for discipline_affinity_jump trait in Show Jumping (7 ms)
    √ should demonstrate the exact code pattern from TASK 9 specification (4 ms)
    √ should work with different discipline types and their corresponding traits (15 ms)
    √ should not apply bonus when trait does not match discipline (2 ms)

[2026-01-28 13:46:07] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:07] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:07] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:07] info: [envValidator] Test environment validation complete. Success: true
PASS tests/groomBondingSystem.test.mjs
  Groom Bonding & Burnout Prevention System
    Bond Score Mechanics
      √ should start horses with bond score of 0 (2 ms)
      √ should increase bond score by +2 for eligible grooming tasks (2 ms)
      √ should cap bond score at maximum of 100 (1 ms)
      √ should not increase bond score beyond 100 (1 ms)
    Eligible Grooming Tasks
      √ should recognize brushing as eligible task (1 ms)
      √ should recognize hand-walking as eligible task (1 ms)
      √ should recognize stall_care as eligible task (1 ms)
      √ should reject non-eligible tasks for bonding (1 ms)
    Age Restrictions
      √ should allow grooming for horses 3+ years old (1 ms)
      √ should reject adult grooming tasks for horses under 3 years old (8 ms)
      √ should allow enrichment tasks for horses under 3 years old (2 ms)
    Consecutive Day Tracking
      √ should increment consecutive days for daily grooming (1 ms)
      √ should reset consecutive days to 0 after 2+ day lapse
      √ should maintain consecutive days for 1-day lapse (1 ms)
    Burnout Immunity System
      √ should grant immunity after 7 consecutive days (1 ms)
      √ should maintain none status for less than 7 days (1 ms)
      √ should reset immunity status when consecutive days reset (1 ms)

[2026-01-28 13:46:08] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:08] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:08] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:08] info: [envValidator] Test environment validation complete. Success: true
PASS tests/foalTaskLoggingSystem.test.mjs
  Foal Task Logging & Streak Tracking System
    Task Category Configuration
      √ should have foal enrichment tasks defined (2 ms)
      √ should have foal grooming tasks defined (1 ms)
      √ should have general grooming tasks defined (1 ms)
      √ should have proper age thresholds configured (1 ms)
    Age-Based Task Eligibility
      √ should allow only enrichment tasks for 0-2 year olds (1 ms)
      √ should allow both enrichment and grooming tasks for 1-3 year olds (1 ms)
      √ should allow all task types for 3+ year olds (1 ms)
    Task Categorization
      √ should correctly categorize enrichment tasks (6 ms)
      √ should correctly categorize grooming tasks (1 ms)
      √ should return null for unknown tasks (1 ms)
    Task Logging System
      √ should initialize empty task log (1 ms)
      √ should increment existing task count (1 ms)
      √ should add new task to existing log (1 ms)
      √ should handle empty object task log (1 ms)
    Streak Tracking System
      √ should start new streak for first grooming (1 ms)
      √ should increment streak for consecutive days (1 ms)
      √ should maintain streak within grace period (1 ms)
      √ should reset streak after grace period expires (1 ms)
      √ should detect bonus eligibility at 7 consecutive days (1 ms)
    Task Mutual Exclusivity
      √ should allow first task of the day (1 ms)
      √ should prevent mixing enrichment and grooming tasks same day (1 ms)
      √ should allow same category tasks (if other rules permit) (1 ms)

[2026-01-28 13:46:08] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:08] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:08] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:08] info: [envValidator] Test environment validation complete. Success: true
PASS tests/traitEvaluation.test.mjs
  🔬 UNIT: Trait Evaluation System - Trait Revelation & Validation
    evaluateTraitRevelation
      √ should evaluate traits for a foal with good bonding and low stress (6 ms)
      √ should not reveal traits that do not meet age requirements (2 ms)
      √ should not reveal traits that do not meet bonding requirements (2 ms)
      √ should not reveal traits that do not meet stress requirements (1 ms)
      √ should not reveal duplicate traits (2 ms)
      √ should respect trait conflicts (1 ms)
      √ should handle foals with null bond_score and stress_level (9 ms)
      √ should use development age for young foals (1 ms)
      √ should not reveal traits when random chance is too high (1 ms)
    getTraitDefinition
      √ should return trait definition for valid trait key (1 ms)
      √ should return null for invalid trait key (1 ms)
      √ should find traits in all categories (1 ms)
    getAllTraitDefinitions
      √ should return all trait definitions (1 ms)
      √ should have consistent structure for all traits (14 ms)
    TRAIT_DEFINITIONS
      √ should have valid reveal conditions for all traits (6 ms)
    TRAIT_CONFLICTS
      √ should have symmetric conflicts (2 ms)
      √ should only reference valid traits (5 ms)
    Error Handling
      √ should handle errors gracefully (5 ms)
      √ should handle missing foal properties (1 ms)

[2026-01-28 13:46:08] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:08] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:08] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:08] info: [envValidator] Test environment validation complete. Success: true
PASS __tests__/unit/security/session-management.test.mjs
  sessionManagement middleware
    sessionTimeout
      √ allows when no session (3 ms)
      √ blocks expired session (2 ms)
      √ refreshes active session (1 ms)
    sessionConcurrencyLimit
      √ allows when no limit set (1 ms)
      √ blocks when concurrency exceeded (1 ms)
    sessionCleanup
      √ removes expired sessions and continues (1 ms)

[2026-01-28 13:46:08] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:08] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:08] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:08] info: [envValidator] Test environment validation complete. Success: true
PASS tests/utils/epigeneticTraits.comprehensive.test.mjs
  🧬 COMPREHENSIVE: Epigenetic Traits Calculation System
    Basic Trait Inheritance
      √ should calculate traits with optimal breeding conditions (4 ms)
      √ should handle high stress breeding conditions (1 ms)
      √ should produce consistent results with same seed (2 ms)
    Environmental Factor Processing
      √ should handle low bonding score scenarios (1 ms)
      √ should handle high bonding score scenarios (1 ms)
      √ should process moderate environmental conditions (1 ms)
    Trait Conflict Resolution
      √ should handle conflicting parent traits
      √ should handle similar parent traits (1 ms)
    Trait Visibility Determination
      √ should categorize traits by visibility correctly (1 ms)
    Input Validation and Error Handling
      √ should handle empty trait arrays (8 ms)
      √ should handle boundary values for bonding and stress (1 ms)
      √ should handle maximum values for bonding and stress (1 ms)
    Complex Breeding Scenarios
      √ should handle large trait sets from both parents (1 ms)
      √ should produce different results with different seeds (1 ms)
      √ should maintain trait consistency across multiple calculations (1 ms)
    Trait Array Properties
      √ should return sorted trait arrays
      √ should return unique traits in each category (1 ms)

[2026-01-28 13:46:09] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:09] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:09] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:09] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:46:09] info: [trainingModel.logTrainingSession] Logging training session for horse 5 in Show Jumping
[2026-01-28 13:46:09] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 1
[2026-01-28 13:46:09] error: [trainingModel.logTrainingSession] Database error: Horse ID is required
[2026-01-28 13:46:09] error: [trainingModel.logTrainingSession] Database error: Discipline is required
[2026-01-28 13:46:09] error: [trainingModel.logTrainingSession] Database error: Horse ID must be a positive integer
[2026-01-28 13:46:09] error: [trainingModel.logTrainingSession] Database error: Horse ID must be a positive integer
[2026-01-28 13:46:09] error: [trainingModel.logTrainingSession] Database error: Horse ID must be a positive integer
[2026-01-28 13:46:09] info: [trainingModel.logTrainingSession] Logging training session for horse 5 in Racing
[2026-01-28 13:46:09] error: [trainingModel.logTrainingSession] Database error: Database connection failed
[2026-01-28 13:46:09] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 5 in Show Jumping
[2026-01-28 13:46:09] info: [trainingModel.getLastTrainingDate] Last training date for horse 5 in Show Jumping: Wed Jan 15 2025 05:00:00 GMT-0500 (Eastern Standard Time)
[2026-01-28 13:46:09] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 5 in Racing
[2026-01-28 13:46:09] info: [trainingModel.getLastTrainingDate] No training records found for horse 5 in Racing
[2026-01-28 13:46:09] error: [trainingModel.getLastTrainingDate] Database error: Horse ID must be a positive integer
[2026-01-28 13:46:09] error: [trainingModel.getLastTrainingDate] Database error: Horse ID must be a positive integer
[2026-01-28 13:46:09] error: [trainingModel.getLastTrainingDate] Database error: Horse ID must be a positive integer
[2026-01-28 13:46:09] error: [trainingModel.getLastTrainingDate] Database error: Discipline is required
[2026-01-28 13:46:09] error: [trainingModel.getLastTrainingDate] Database error: Discipline is required
[2026-01-28 13:46:09] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 5 in Racing
[2026-01-28 13:46:09] error: [trainingModel.getLastTrainingDate] Database error: Database connection failed
[2025-01-15 05:00:00] info: [trainingModel.getHorseAge] Getting age for horse 10
[2025-01-15 05:00:00] info: [trainingModel.getHorseAge] Horse 10 is 5 years old
[2026-01-28 13:46:09] info: [trainingModel.getHorseAge] Getting age for horse 999
[2026-01-28 13:46:09] info: [trainingModel.getHorseAge] Horse 999 not found or missing dateOfBirth
[2026-01-28 13:46:09] error: [trainingModel.getHorseAge] Database error: Horse ID must be a positive integer
[2026-01-28 13:46:09] error: [trainingModel.getHorseAge] Database error: Horse ID must be a positive integer
[2026-01-28 13:46:09] error: [trainingModel.getHorseAge] Database error: Horse ID must be a positive integer
[2026-01-28 13:46:09] info: [trainingModel.getHorseAge] Getting age for horse 5
[2026-01-28 13:46:09] error: [trainingModel.getHorseAge] Database error: Database connection failed
[2026-01-28 13:46:09] info: [trainingModel.logTrainingSession] Logging training session for horse 5 in Racing
[2026-01-28 13:46:09] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 1
[2026-01-28 13:46:09] info: [trainingModel.logTrainingSession] Logging training session for horse 5 in Show Jumping
[2026-01-28 13:46:09] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 1
[2025-01-15 05:00:00] info: [trainingModel.getHorseAge] Getting age for horse 5
[2025-01-15 05:00:00] info: [trainingModel.getHorseAge] Horse 5 is 2 years old
PASS tests/trainingModel.test.mjs
  🏋️ UNIT: Training Model - Training Session Logging & Horse Data
    logTrainingSession
      √ should log a training session with all required fields (5 ms)
      √ should throw error if horseId is missing (5 ms)
      √ should throw error if discipline is missing (2 ms)
      √ should throw error if horseId is not a positive integer (3 ms)
      √ should handle database errors gracefully (11 ms)
    getLastTrainingDate
      √ should return the most recent training date for horse and discipline (3 ms)
      √ should return null if no training records found (3 ms)
      √ should throw error if horseId is not a positive integer (3 ms)
      √ should throw error if discipline is missing (3 ms)
      √ should handle database errors gracefully (3 ms)
    getHorseAge
      √ should return horse age from database (3 ms)
      √ should return null if horse not found (2 ms)
      √ should throw error if horseId is not a positive integer (8 ms)
      √ should handle database errors gracefully (2 ms)
    Integration scenarios
      √ should handle multiple training sessions for same horse different disciplines (4 ms)
      √ should validate horse age before allowing training (1 ms)

[2026-01-28 13:46:09] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:09] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:09] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:09] info: [envValidator] Test environment validation complete. Success: true
PASS tests/traitMetadataValidation.test.mjs
  Trait Metadata Validation
    Required Trait Structure
      √ should have complete metadata for confident (3 ms)
      √ should have complete metadata for resilient (1 ms)
      √ should have complete metadata for presentationBoosted (1 ms)
      √ should have complete metadata for bonded (1 ms)
      √ should have complete metadata for fearful (2 ms)
      √ should have complete metadata for easilyOverwhelmed (1 ms)
    Trait Categories
      √ should have epigenetic traits (1 ms)
      √ should have bond traits (1 ms)
      √ should have situational traits (1 ms)
      √ should categorize all traits correctly (1 ms)
    Trait Descriptions
      √ should have proper description format for confident trait (1 ms)
      √ should have proper description format for resilient trait
      √ should have proper description format for presentationBoosted trait (1 ms)
      √ should have proper description format for bonded trait (1 ms)
      √ should have proper description format for fearful trait (1 ms)
      √ should have proper description format for easilyOverwhelmed trait
      √ should have descriptions for all traits (4 ms)
    Trait Conflicts
      √ should have bidirectional conflicts (7 ms)
      √ should validate specific conflict relationships (1 ms)
      √ should not have self-conflicts (1 ms)
    Task Influence Map Integration
      √ should have all traits referenced in task influence map (1 ms)
      √ should validate specific task-trait mappings
      √ should have valid daily values for all tasks (3 ms)
    Trait Type Distribution
      √ should have balanced positive and negative traits (1 ms)
      √ should have appropriate rarity distribution
    Foal Development Integration
      √ should support foal milestone evaluation traits (1 ms)
      √ should support presentation and show traits (1 ms)
    Error Handling
      √ should handle invalid trait names gracefully (1 ms)
      √ should handle empty category queries (4 ms)

[2026-01-28 13:46:09] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:09] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:09] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:09] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:46:09] info: [traitCompetitionImpact] Horse 1: 2 traits applied, 8.5% modifier, 8.5 point adjustment
[2026-01-28 13:46:09] info: [traitCompetitionImpact] Horse 1: 2 traits applied, -10.4% modifier, -10.4 point adjustment
[2026-01-28 13:46:09] info: [traitCompetitionImpact] Horse 1: 3 traits applied, 4.5% modifier, 4.5 point adjustment
[2026-01-28 13:46:09] info: [traitCompetitionImpact] Horse 1: 1 traits applied, 6.0% modifier, 6.0 point adjustment
[2026-01-28 13:46:09] info: [traitCompetitionImpact] Horse 2: 5 traits applied, 16.4% modifier, 16.4 point adjustment
[2026-01-28 13:46:09] info: [traitCompetitionImpact] Horse 1: 1 traits applied, 10.0% modifier, 10.0 point adjustment
[2026-01-28 13:46:09] info: [traitCompetitionImpact] Horse 1: 1 traits applied, 6.0% modifier, 6.0 point adjustment
[2026-01-28 13:46:09] info: [traitCompetitionImpact] Horse 1: 1 traits applied, 5.0% modifier, 5.0 point adjustment
[2026-01-28 13:46:09] warn: [traitCompetitionImpact] Unknown trait: unknown_trait
[2026-01-28 13:46:09] info: [traitCompetitionImpact] Horse 1: 1 traits applied, 6.0% modifier, 6.0 point adjustment
[2026-01-28 13:46:09] info: [traitCompetitionImpact] Horse 1: 1 traits applied, 6.0% modifier, 6.0 point adjustment
[2026-01-28 13:46:09] info: [traitCompetitionImpact] Horse 1: 1 traits applied, 6.0% modifier, 6.0 point adjustment
[2026-01-28 13:46:09] info: [traitCompetitionImpact] Horse 1: 1 traits applied, 7.0% modifier, 7.0 point adjustment
[2026-01-28 13:46:09] info: [traitCompetitionImpact] Horse 1: 1 traits applied, -5.0% modifier, -5.0 point adjustment
[2026-01-28 13:46:09] info: [traitCompetitionImpact] Horse 1: 1 traits applied, -6.0% modifier, -6.0 point adjustment
[2026-01-28 13:46:09] warn: [traitCompetitionImpact] Unknown trait: legendary_bloodline
[2026-01-28 13:46:09] info: [traitCompetitionImpact] Horse 1: 6 traits applied, 19.6% modifier, 19.6 point adjustment
PASS tests/traitCompetitionImpact.test.mjs
  🏆 UNIT: Trait Competition Impact System - Scoring Modifier Calculations
    calculateTraitCompetitionImpact
      √ should handle horse with no traits (3 ms)
      √ should apply positive trait bonuses correctly (3 ms)
      √ should apply negative trait penalties correctly (9 ms)
      √ should apply mixed traits correctly (2 ms)
      √ should apply diminishing returns for multiple traits (3 ms)
      √ should handle legendary traits correctly (2 ms)
      √ should handle rare environmental traits (2 ms)
      √ should handle missing epigenetic_modifiers gracefully (1 ms)
      √ should handle unknown traits gracefully (2 ms)
    getTraitCompetitionEffect
      √ should return correct trait effect (6 ms)
      √ should return null for unknown trait
    hasSpecializedEffect
      √ should return true for specialized combinations
      √ should return false for non-specialized combinations (1 ms)
    getAllTraitCompetitionEffects
      √ should return all trait effects (2 ms)
    Discipline-Specific Effects
      √ Bold should excel at Show Jumping (2 ms)
      √ Intelligent should excel at Dressage (2 ms)
      √ Athletic should excel at Racing (1 ms)
      √ Nervous should struggle with Show Jumping (2 ms)
      √ Stubborn should struggle with Dressage (1 ms)
    Balance and Fairness
      √ should ensure trait effects are balanced (8 ms)
      √ should not allow trait stacking to become overpowered (2 ms)

[2026-01-28 13:46:10] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:10] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:10] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:10] info: [envValidator] Test environment validation complete. Success: true
PASS models/horseModel.test.mjs
  Horse Model At-Birth Traits Integration
    createHorse with at-birth traits
      √ should apply at-birth traits for newborn with parents (4 ms)
      √ should pass custom mare stress and feed quality (8 ms)
      √ should merge at-birth traits with existing traits (2 ms)
      √ should not apply at-birth traits for older horses (1 ms)
      √ should not apply at-birth traits for horses without parents (1 ms)
      √ should continue horse creation even if at-birth trait application fails (1 ms)
      √ should handle missing sire_id gracefully (1 ms)
      √ should handle missing dam_id gracefully (1 ms)
      √ should log breeding analysis information (2 ms)

[2026-01-28 13:46:10] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:10] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:10] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:10] info: [envValidator] Test environment validation complete. Success: true
PASS tests/horseXpSystem.test.mjs
  Horse XP System - Core Business Logic
    addXpToHorse
      √ should add XP to horse and calculate available stat points correctly (5 ms)
      √ should handle multiple stat points correctly (200+ XP) (1 ms)
      √ should preserve existing stat points when adding XP (2 ms)
      √ should handle validation errors properly (1 ms)
      √ should handle horse not found error (1 ms)
    allocateStatPoint
      √ should allocate stat point and decrease available points (1 ms)
      √ should reject allocation when no stat points available (10 ms)
      √ should validate stat names properly (1 ms)
      √ should handle all valid stat names (2 ms)
    getHorseXpHistory
      √ should retrieve horse XP events with proper filtering (1 ms)
  Horse XP System - Integration with Competition System
    Competition XP Awards
      √ should award horse XP based on competition performance (1 ms)

[2026-01-28 13:46:10] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:10] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:10] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:10] info: [envValidator] Test environment validation complete. Success: true
PASS tests/unit/flagEvaluationEngine.test.mjs
  Flag Evaluation Engine
    evaluateHorseFlags
      √ should evaluate and assign flags for eligible horse (5 ms)
      √ should reject horse outside age range (2 ms)
      √ should reject horse with maximum flags (1 ms)
      √ should not assign duplicate flags (1 ms)
      √ should respect flag limit during assignment (1 ms)
      √ should handle care analysis ineligibility (1 ms)
      √ should handle non-existent horse (3 ms)
      √ should handle database errors (3 ms)
    Flag Trigger Evaluation
      √ should trigger brave flag with correct conditions (1 ms)
      √ should trigger fearful flag with correct conditions (1 ms)
    batchEvaluateFlags
      √ should evaluate multiple horses (6 ms)
      √ should handle mixed success/failure in batch (1 ms)
    getEligibleHorses
      √ should return eligible horses within age range (1 ms)
      √ should handle database errors in getEligibleHorses (1 ms)

[2026-01-28 13:46:11] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:11] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:11] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:11] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:46:11] info: [cacheHelper] Cache statistics reset
[2026-01-28 13:46:11] info: [cacheHelper] Cache statistics reset
[2026-01-28 13:46:11] info: [cacheHelper] Cache statistics reset
[2026-01-28 13:46:11] info: [cacheHelper] Cache statistics reset
[2026-01-28 13:46:11] info: [cacheHelper] Cache statistics reset
[2026-01-28 13:46:11] info: [cacheHelper] Cache statistics reset
PASS __tests__/unit/cacheHelper.test.mjs
  Cache Helper
    generateCacheKey()
      √ should generate standardized keys (13 ms)
      √ should handle spaces and colons in components (2 ms)
    getCachedQuery() - In-Memory Fallback
      √ should execute and cache the query result (3 ms)
      √ should respect TTL (2 ms)
      √ should handle undefined/null results (3 ms)
    invalidateCache()
      √ should remove items from cache (1 ms)

[2026-01-28 13:46:11] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:11] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:11] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:11] info: [envValidator] Test environment validation complete. Success: true
PASS tests/applyEpigeneticTraitsAtBirthTask8.test.mjs
  🧬 UNIT: Apply Epigenetic Traits At Birth Task 8 - Deterministic Breeding Analysis
    Low-stress, premium-fed mare produces positive traits
      √ should produce hardy trait with low stress and premium feed (7 ms)
      √ should produce well_bred trait with optimal conditions and no inbreeding (2 ms)
      √ should produce premium_care trait with exceptional conditions (1 ms)
      √ should NOT produce positive traits with high stress (10 ms)
      √ should NOT produce positive traits with poor feed quality (2 ms)
    Inbreeding detection triggers negative traits
      √ should produce inbred trait when duplicate ancestors detected (2 ms)
      √ should NOT produce inbred trait without common ancestors (2 ms)
    Poor breeding conditions trigger negative traits
      √ should produce weak_constitution trait with high stress and poor feed (2 ms)
      √ should produce stressed_lineage trait with high mare stress (1 ms)
      √ should produce poor_nutrition trait with very poor feed quality (2 ms)
    Discipline specialization produces legacy traits
      √ should produce specialized_lineage trait with 3+ ancestors in same discipline (1 ms)
      √ should NOT produce specialized_lineage trait without sufficient specialization (1 ms)
      √ should handle no competition history gracefully (1 ms)
    Deterministic testing with Math.random mocking
      √ should consistently apply traits when random value is below threshold (7 ms)
      √ should consistently NOT apply traits when random value is above threshold (2 ms)
      √ should handle edge case random values at exact thresholds (1 ms)
    Error handling and edge cases
      √ should throw error when sireId is missing (4 ms)
      √ should throw error when damId is missing (2 ms)
      √ should throw error when mare is not found (1 ms)
      √ should handle database errors gracefully in lineage analysis (1 ms)

[2026-01-28 13:46:11] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:11] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:11] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:11] info: [envValidator] Test environment validation complete. Success: true
PASS __tests__/utils/validateEnvironment.test.mjs
  validateEnvironment()
    Required variables validation
      √ should pass with all required variables present (4 ms)
      √ should fail when DATABASE_URL is missing (3 ms)
      √ should fail when JWT_SECRET is missing (1 ms)
      √ should fail when NODE_ENV is missing (2 ms)
      √ should fail when PORT is missing (1 ms)
    Minimum length validation
      √ should fail when DATABASE_URL is too short (<20 chars) (2 ms)
      √ should fail when JWT_SECRET is too short (<32 chars) (1 ms)
      √ should pass when JWT_SECRET is exactly 32 characters (1 ms)
    Allowed values validation
      √ should pass when NODE_ENV is "development" (1 ms)
      √ should pass when NODE_ENV is "production" (6 ms)
      √ should pass when NODE_ENV is "test" (1 ms)
      √ should fail when NODE_ENV is invalid (1 ms)
    Type validation
      √ should pass when PORT is a valid number (1 ms)
      √ should fail when PORT is not a number (1 ms)
    JWT_SECRET strength validation
      √ should reject placeholder "your-super-secret" (1 ms)
      √ should reject placeholder "change-this" (1 ms)
      √ should reject placeholder "REPLACE_WITH" (1 ms)
      √ should reject placeholder "example" (1 ms)
      √ should warn when JWT_SECRET lacks character variety (line 72) (1 ms)
    DATABASE_URL format validation
      √ should pass with postgresql:// prefix (1 ms)
      √ should pass with postgres:// prefix
      √ should fail without postgresql prefix (1 ms)
      √ should reject weak password "password" (1 ms)
      √ should reject weak password "admin" (1 ms)
      √ should reject weak password "123456" (2 ms)
      √ should reject weak password "postgres" (1 ms)
    Production HTTPS warnings
      √ should warn about HTTP origins in production (2 ms)
      √ should NOT warn about HTTPS origins in production (5 ms)
      √ should warn about PORT 80 in production (2 ms)
      √ should NOT warn about PORT 443 in production (1 ms)
    Multiple errors
      √ should report all validation errors at once (1 ms)

[2026-01-28 13:46:12] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:12] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:12] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:12] info: [envValidator] Test environment validation complete. Success: true
PASS tests/applyEpigeneticTraitsAtBirthUnit.test.mjs
  🧬 UNIT: Apply Epigenetic Traits At Birth Unit - Pure Logic Validation
    Low-stress mare with premium feed → positive traits
      √ should assign resilient trait when mare has low stress and premium feed (4 ms)
      √ should assign peopleTrusting trait when mare has low stress and premium feed (2 ms)
      √ should assign both positive traits with optimal conditions (1 ms)
      √ should not assign positive traits when stress is too high (1 ms)
      √ should not assign positive traits when feed quality is too low (1 ms)
    Inbreeding (repeated ancestor IDs) → negative traits
      √ should assign fragile trait with high inbreeding (4+ repeated ancestors) (1 ms)
      √ should assign reactive trait with moderate inbreeding (3 repeated ancestors) (1 ms)
      √ should assign low_immunity trait with inbreeding (1 ms)
      √ should assign multiple negative traits with severe inbreeding (2 ms)
      √ should not assign inbreeding traits without repeated ancestor IDs (1 ms)
    3+ ancestors with same mostCompetedDiscipline → affinity + legacy_talent
      √ should assign discipline_affinity_racing with 3+ racing ancestors (1 ms)
      √ should assign legacy_talent with 4+ ancestors in same discipline (1 ms)
      √ should assign discipline_affinity_dressage with dressage specialization (1 ms)
      √ should not assign discipline traits without sufficient specialization (7 ms)
      √ should handle ancestors without mostCompetedDiscipline field (2 ms)
    Random behavior consistency
      √ should produce consistent results with mocked randomness (1 ms)
      √ should not assign traits when random values are above thresholds (1 ms)

[2026-01-28 13:46:12] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:12] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:12] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:12] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:46:12] info: [epigeneticFlagInfluence] Applied influences from 1 flags to trait weights
[2026-01-28 13:46:13] info: [epigeneticFlagInfluence] Applied influences from 1 flags to trait weights
[2026-01-28 13:46:13] info: [epigeneticFlagInfluence] Applied influences from 2 flags to trait weights
[2026-01-28 13:46:13] warn: [epigeneticFlagInfluence] Unknown flag: unknown_flag
[2026-01-28 13:46:13] info: [epigeneticFlagInfluence] Applied influences from 1 flags to trait weights
[2026-01-28 13:46:13] info: [epigeneticFlagInfluence] Applied influences from 1 flags to trait weights
[2026-01-28 13:46:13] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 1 flags
[2026-01-28 13:46:13] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 2 flags
[2026-01-28 13:46:13] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 2 flags
[2026-01-28 13:46:13] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 1 flags
[2026-01-28 13:46:13] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 1 flags
[2026-01-28 13:46:13] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 1 flags
[2026-01-28 13:46:13] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 1 flags
[2026-01-28 13:46:13] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 1 flags
[2026-01-28 13:46:13] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 1 flags
[2026-01-28 13:46:13] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 1 flags
[2026-01-28 13:46:13] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 1 flags
[2026-01-28 13:46:13] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 1 flags
[2026-01-28 13:46:13] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 2 flags
[2026-01-28 13:46:13] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 2 flags
[2026-01-28 13:46:13] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 4 flags
PASS tests/unit/epigeneticFlagInfluence.test.mjs
  Epigenetic Flag Influence System
    applyFlagInfluencesToTraitWeights
      √ should return unchanged weights for no flags (49 ms)
      √ should apply brave flag influences correctly (279 ms)
      √ should apply fearful flag influences correctly (3 ms)
      √ should stack multiple flag influences (2 ms)
      √ should handle unknown flags gracefully (3 ms)
      √ should clamp values to 0-1 range (2 ms)
    calculateBehaviorModifiers
      √ should return empty object for no flags (1 ms)
      √ should calculate modifiers for single flag (2 ms)
      √ should aggregate modifiers from multiple flags (2 ms)
      √ should stack same modifier types (2 ms)
    applyFlagInfluencesToCompetition
      √ should return unchanged score for no flags (1 ms)
      √ should apply competition bonus correctly (2 ms)
      √ should apply competition penalty correctly (2 ms)
      √ should apply stress modifiers correctly (2 ms)
      √ should not allow negative scores (7 ms)
    applyFlagInfluencesToTraining
      √ should return unchanged efficiency for no flags (1 ms)
      √ should apply training efficiency modifier (2 ms)
      √ should apply bonding modifiers to training (2 ms)
      √ should clamp efficiency to 0-1 range (1 ms)
    applyFlagInfluencesToBonding
      √ should return unchanged bonding for no flags (1 ms)
      √ should apply bonding rate modifier (1 ms)
      √ should apply bonding resistance penalty (2 ms)
    getFlagInfluenceSummary
      √ should return empty summary for no flags (1 ms)
      √ should generate complete summary for multiple flags (2 ms)
      √ should aggregate trait influences correctly (2 ms)
      √ should count flag types correctly (2 ms)

[2026-01-28 13:46:13] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:13] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:13] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:13] info: [envValidator] Test environment validation complete. Success: true
PASS __tests__/unit/dbPoolConfig.test.mjs
  dbPoolConfig
    √ applies explicit pool settings in production (3 ms)
    √ preserves existing query params (1 ms)
    √ applies defaults in production when pool settings are missing (1 ms)

[2026-01-28 13:46:13] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:13] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:13] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:13] info: [envValidator] Test environment validation complete. Success: true
PASS tests/disciplineAffinityBonusTask9.test.mjs
  🏆 UNIT: Discipline Affinity Trait Bonus - Competition Score Enhancement
    Discipline Affinity Trait Matching
      √ should apply +5 bonus for discipline_affinity_racing trait in Racing competition (13 ms)
      √ should apply +5 bonus for discipline_affinity_show_jumping trait in Show Jumping competition (2 ms)
      √ should apply +5 bonus for discipline_affinity_dressage trait in Dressage competition (1 ms)
      √ should apply +5 bonus for discipline_affinity_cross_country trait in Cross Country competition
    Discipline Affinity Trait Non-Matching
      √ should NOT apply bonus for discipline_affinity_racing trait in Dressage competition (1 ms)
      √ should NOT apply bonus for discipline_affinity_show_jumping trait in Racing competition (1 ms)
    Multiple Discipline Affinity Traits
      √ should only apply one +5 bonus even with multiple discipline affinity traits (1 ms)
    Discipline Name Conversion
      √ should correctly convert "Show Jumping" to "discipline_affinity_show_jumping"
      √ should correctly convert "Cross Country" to "discipline_affinity_cross_country" (1 ms)
    Integration with Existing Trait System
      √ should apply discipline affinity bonus in addition to existing trait effects (1 ms)
    Edge Cases and Error Handling
      √ should handle horses without epigeneticModifiers gracefully (1 ms)
      √ should handle horses with null epigeneticModifiers gracefully (1 ms)
      √ should handle horses with undefined positive traits gracefully (1 ms)

[2026-01-28 13:46:14] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:14] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:14] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:14] info: [envValidator] Test environment validation complete. Success: true
PASS tests/errors/AppError.test.mjs
  Error Classes
    AppError
      √ should create an AppError with default values (2 ms)
      √ should create an AppError with custom values (1 ms)
      √ should set status to "fail" for 4xx status codes (1 ms)
      √ should set status to "error" for 5xx status codes (1 ms)
      √ should capture stack trace (4 ms)
    ValidationError
      √ should create a ValidationError with default values (1 ms)
      √ should create a ValidationError with field and value
      √ should inherit from AppError (1 ms)
    DatabaseError
      √ should create a DatabaseError with default values (2 ms)
      √ should create a DatabaseError with original error (10 ms)
      √ should inherit from AppError (1 ms)
    NotFoundError
      √ should create a NotFoundError with default message (1 ms)
      √ should create a NotFoundError with custom resource (1 ms)
      √ should create a NotFoundError with resource and ID (1 ms)
      √ should inherit from AppError

[2026-01-28 13:46:14] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:14] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:14] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:14] info: [envValidator] Test environment validation complete. Success: true
PASS tests/horseModelTraitHelpers.test.mjs
  🐴 UNIT: Horse Model Trait Helpers - Utility Function Validation
    trait addition
      √ should add a trait to the correct category if not present (3 ms)
      √ should not add a duplicate trait (1 ms)
    trait removal
      √ should remove a trait from the correct category (1 ms)
      √ should handle removal of a non-existent trait gracefully (1 ms)
    getAllTraits utility
      √ should return a flattened array of all traits (1 ms)
      √ should handle empty trait categories (1 ms)

[2026-01-28 13:46:14] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:14] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:14] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:14] info: [envValidator] Test environment validation complete. Success: true
PASS tests/constants/schema.test.mjs
  🏇 UNIT: Schema Constants Validation
    Horse Sex Constants
      √ should have all required horse sex values (3 ms)
      √ should validate horse sex correctly (1 ms)
      √ should have consistent values array (1 ms)
    Horse Temperament Constants
      √ should have all required temperament values (1 ms)
      √ should validate temperament correctly (1 ms)
    Competition Disciplines
      √ should have all major disciplines (1 ms)
      √ should validate disciplines correctly (1 ms)
      √ should have comprehensive discipline list (1 ms)
    Groom Constants
      √ should have all groom specialties (8 ms)
      √ should validate groom specialties correctly (1 ms)
      √ should have all skill levels (1 ms)
      √ should validate skill levels correctly (1 ms)
    Age Validation
      √ should validate training age correctly (1 ms)
      √ should validate competition age correctly (1 ms)
      √ should validate breeding age correctly (1 ms)
    Score Validation
      √ should validate competition scores correctly (1 ms)
      √ should validate discipline scores correctly (1 ms)
    User Progression Calculations
      √ should calculate XP for levels correctly (1 ms)
      √ should calculate level from XP correctly (1 ms)
      √ should have consistent XP progression
    Horse Stats Validation
      √ should have all required horse stats defined (1 ms)
      √ should validate horse stats correctly (1 ms)
      √ should have consistent stat object and array values (1 ms)
    Constant Integrity
      √ should have no duplicate values in arrays (1 ms)
      √ should have consistent object and array values (1 ms)

[2026-01-28 13:46:15] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:15] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:15] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:15] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:46:15] error: Error Test error
[2026-01-28 13:46:15] error: Error Generic error
[2026-01-28 13:46:15] error: Error Unique constraint failed
[2026-01-28 13:46:15] error: Error Record not found
[2026-01-28 13:46:15] error: Error Test error
[2026-01-28 13:46:15] error: Error Test error
[2026-01-28 13:46:15] error: Error Test error
PASS tests/middleware/errorHandler.test.mjs
  Error Handler Middleware
    √ should handle AppError correctly (7 ms)
    √ should handle generic errors with 500 status (3 ms)
    √ should handle Prisma P2002 error (duplicate) (9 ms)
    √ should handle Prisma P2025 error (not found) (2 ms)
    √ should include stack trace in development mode (3 ms)
    √ should not include stack trace in production mode (2 ms)
    √ should handle errors without throwing (2 ms)

[2026-01-28 13:46:15] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:15] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:15] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:15] info: [envValidator] Test environment validation complete. Success: true
PASS tests/foalTaskExclusivity.integration.test.mjs
  Foal Task Exclusivity Integration
    Configuration Integration
      √ should have correct task categories defined (3 ms)
      √ should have no overlap between task categories
    Daily Exclusivity Enforcement
      √ should detect all enrichment tasks correctly (1 ms)
      √ should detect all grooming tasks correctly (1 ms)
      √ should enforce mutual exclusivity between categories (1 ms)
      √ should allow non-foal tasks without blocking (1 ms)
      √ should detect foal tasks mixed with general tasks
    Business Rule Validation
      √ should prevent double-counting with multiple foal tasks (9 ms)
      √ should work correctly across different days (1 ms)
      √ should handle real-world task progression scenario (1 ms)

[2026-01-28 13:46:15] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:15] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:15] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:15] info: [envValidator] Test environment validation complete. Success: true
PASS tests/groomConfig.test.mjs
  Groom Configuration
    Foal Task Categories
      Enrichment Tasks (0-2 years)
        √ should define correct enrichment tasks for early development (3 ms)
        √ should have exactly 7 enrichment tasks (1 ms)
        √ should contain only string values (2 ms)
        √ should not contain any grooming tasks (1 ms)
      Foal Grooming Tasks (1-3 years)
        √ should define correct grooming tasks for handling preparation (1 ms)
        √ should have exactly 5 grooming tasks
        √ should contain only string values (1 ms)
        √ should not contain any enrichment tasks (1 ms)
      Task Category Separation
        √ should have no overlap between enrichment and grooming tasks (1 ms)
        √ should have all tasks be unique within each category (1 ms)
    Configuration Constants
      √ should have correct age thresholds for task eligibility
      √ should have task category definitions (1 ms)
      √ should have bonding and streak configuration (1 ms)
    Age-Based Task Eligibility Logic
      √ should allow enrichment tasks for ages 0-2 (1 ms)
      √ should allow grooming tasks for ages 1-3 (7 ms)
      √ should allow general grooming tasks for ages 3+ (2 ms)
      √ should have overlap period for ages 1-3 (both enrichment and grooming) (1 ms)

[2026-01-28 13:46:16] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:16] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:16] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:16] info: [envValidator] Test environment validation complete. Success: true
PASS tests/groomInteractionLimits.test.mjs
  🐴 TDD: Groom Interaction Daily Limits - ALL Horses
    Adult Horse Daily Limits (FAILING TESTS - Current Implementation Bug)
      √ should FAIL: 1-year-old horse should be limited to once per day (11 ms)
      √ should FAIL: 2-year-old horse should be limited to once per day (1 ms)
    Foal Daily Limits (Should PASS with current implementation)
      √ should correctly limit 3-day-old foal to once per day (1 ms)
    Edge Cases
      √ should handle missing horse (2 ms)
      √ should allow interaction when no previous interactions today (1 ms)

[2026-01-28 13:46:16] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:16] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:16] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:16] info: [envValidator] Test environment validation complete. Success: true
PASS models/userModel.test.mjs
  👤 UNIT: User Model - Database Operations & Business Logic
    createUser
      √ should create a user successfully (4 ms)
      √ should throw error if username is missing (4 ms)
      √ should throw error if email is missing (1 ms)
      √ should throw error if password is missing (1 ms)
      √ should throw error on unique constraint violation for username (1 ms)
      √ should throw error on unique constraint violation for email (1 ms)
      √ should throw DatabaseError for other Prisma errors (1 ms)
    getUserById
      √ should return user if found (1 ms)
      √ should return null if user not found (1 ms)
      √ should throw DatabaseError if ID is not provided (1 ms)
    getUserByEmail
      √ should return user by email (case insensitive) (9 ms)
      √ should throw DatabaseError if email is not provided (2 ms)
    getUserWithHorses
      √ should return user with horses if found (1 ms)
      √ should throw DatabaseError if ID is not provided (1 ms)
    updateUser
      √ should update user successfully (1 ms)
      √ should throw DatabaseError if ID is not provided (1 ms)
      √ should handle Prisma update errors (user not found) (1 ms)
      √ should handle general update errors (1 ms)
    deleteUser
      √ should delete user successfully (1 ms)
      √ should throw DatabaseError if ID is not provided (1 ms)
      √ should handle Prisma delete errors (user not found) (1 ms)
    addXpToUser
      √ should add XP without leveling up (1 ms)
      √ should add XP and level up (1 ms)
      √ should return error for invalid XP amount (2 ms)
      √ should return error for invalid user ID (1 ms)
      √ should return error if user not found (1 ms)
    getUserProgress
      √ should return user progress (1 ms)
      √ should throw DatabaseError if ID is not provided (1 ms)
      √ should throw DatabaseError if user not found (1 ms)
    getUserStats
      √ should return user stats with horses (1 ms)
      √ should handle user with no horses (1 ms)
      √ should handle user with null horses array (1 ms)
      √ should return null for non-existent user (9 ms)
      √ should throw DatabaseError if ID is not provided (1 ms)

[2026-01-28 13:46:16] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:16] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:16] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:16] info: [envValidator] Test environment validation complete. Success: true
PASS tests/competitionController.test.mjs
  🏆 PURE ALGORITHMIC: Competition Controller Helper Functions
    detectTraitBonuses
      √ should detect discipline affinity trait bonuses correctly (3 ms)
      √ should return no bonus for horses without matching traits (1 ms)
      √ should handle horses with no epigenetic modifiers (1 ms)
      √ should handle discipline names with spaces correctly (9 ms)
      √ should be case insensitive for discipline matching (1 ms)

[2026-01-28 13:46:17] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:17] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:17] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:17] info: [envValidator] Test environment validation complete. Success: true
PASS tests/integration/groomRoutes.test.mjs
  Groom Routes Integration Tests
    √ should pass basic test (3 ms)
    √ should test groom system constants (1 ms)
    √ should validate interaction types (1 ms)
    √ should validate duration ranges (1 ms)
    √ should validate session rate ranges (1 ms)

[2026-01-28 13:46:17] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:17] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:17] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:17] info: [envValidator] Test environment validation complete. Success: true
PASS tests/horseConformation.test.mjs
  🐎 UNIT: Horse Conformation Scoring System
    Default Conformation Scores
      √ should create horse with default conformation scores of 20 (4 ms)
      √ should have all required conformation regions (3 ms)
    Conformation Score Validation
      √ should validate conformation scores are within 1-100 range (2 ms)
      √ should validate all conformation regions are present (2 ms)
    Conformation Score Updates
      √ should update individual conformation scores (2 ms)
      √ should handle bulk conformation updates (1 ms)
    Error Handling
      √ should reject invalid conformation scores (9 ms)
      √ should reject invalid conformation regions (1 ms)

[2026-01-28 13:46:17] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:17] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:17] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:17] info: [envValidator] Test environment validation complete. Success: true
PASS tests/integration/xpLogging.test.mjs
  📊 INTEGRATION: XP Logging Integration - Experience Point Workflow
    Training XP Logging
      √ should log XP event when training is successful (5 ms)
      √ should log XP event with trait-modified amount (2 ms)
      √ should continue training even if XP logging fails (2 ms)
      √ should not log XP event if training fails (2 ms)
    Competition XP Logging
      √ should log XP events for competition placements (1 ms)
      √ should log different XP amounts for different placements (1 ms)

[2026-01-28 13:46:17] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:17] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:17] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:17] info: [envValidator] Test environment validation complete. Success: true
PASS tests/trainingCooldown.test.mjs
  ⏰ UNIT: Training Cooldown System - Horse Training Restrictions
    canTrain
      √ should return true for horse with no cooldown (2 ms)
      √ should return true for horse with cooldown in the past (1 ms)
      √ should return false for horse with cooldown in the future (1 ms)
      √ should throw error for null horse (4 ms)
      √ should throw error for undefined horse (1 ms)
    getCooldownTimeRemaining
      √ should return null for horse with no cooldown (1 ms)
      √ should return null for horse with cooldown in the past (1 ms)
      √ should return positive milliseconds for horse with cooldown in the future (1 ms)
      √ should return approximately correct time remaining (1 ms)
      √ should throw error for null horse (9 ms)
      √ should throw error for undefined horse (1 ms)
    setCooldown
      √ should set cooldown 7 days in the future (1 ms)
      √ should return updated horse with relations (1 ms)
      √ should throw error for non-existent horse ID (1 ms)
      √ should throw error for null horse ID (1 ms)
      √ should throw error for undefined horse ID (1 ms)
      √ should throw error for invalid horse ID (string) (1 ms)
      √ should throw error for invalid horse ID (negative) (2 ms)
      √ should throw error for invalid horse ID (zero) (1 ms)
      √ should handle string horse ID that can be parsed to integer (1 ms)
    formatCooldown
      √ should return "Ready to train" for null input (1 ms)
      √ should return "Ready to train" for zero milliseconds (1 ms)
      √ should return "Ready to train" for negative milliseconds (1 ms)
      √ should format minutes correctly (1 ms)
      √ should format hours and minutes correctly (1 ms)
      √ should format days and hours correctly (1 ms)
      √ should format exactly 7 days correctly (1 ms)
    Integration Tests
      √ should complete full training cooldown workflow (2 ms)
      √ should work with horse retrieved from database (8 ms)

[2026-01-28 13:46:18] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:18] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:18] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:18] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:46:18] info: [bondingModifiers] Bonding change for horse 1: 32 -> 50 (56.3% trait modifier)
[2026-01-28 13:46:18] info: [bondingModifiers] Bonding change for horse 1: 1.5 -> 0.8 (-46.7% trait modifier)
[2026-01-28 13:46:18] info: [bondingModifiers] Bonding change for horse 1: 6 -> 7.5 (25.0% trait modifier)
[2026-01-28 13:46:18] info: [temperamentDrift] Temperament drift suppressed by traits for horse 1
[2026-01-28 13:46:18] info: [temperamentDrift] Temperament drift suppressed by traits for horse 1
[2026-01-28 13:46:18] warn: [traitEffects.getTraitEffects] No effects defined for trait: unknown_trait
[2026-01-28 13:46:18] warn: [traitEffects.getTraitEffects] No effects defined for trait: another_unknown
[2026-01-28 13:46:18] info: [bondingModifiers] Bonding change for horse 1: 17 -> 17 (0.0% trait modifier)
[2026-01-28 13:46:18] info: [bondingModifiers] Bonding change for horse 1: 1.5 -> 1.5 (0.0% trait modifier)
[2026-01-28 13:46:18] error: [bondingModifiers] Error calculating bonding change: Unknown activity type: invalid_activity
PASS tests/traitIntegration.test.mjs
  🎮 UNIT: Trait Integration System - Gameplay Effect Application
    Bonding Modifiers
      √ should apply trait bonuses to grooming bonding (6 ms)
      √ should apply trait penalties to bonding for antisocial horses (11 ms)
      √ should calculate competition bonding with placement modifiers (2 ms)
    Temperament Drift Suppression
      √ should suppress temperament drift for resilient horses (2 ms)
      √ should allow temperament drift for horses without suppressing traits (1 ms)
      √ should suppress drift completely for calm horses (2 ms)
    Trait Effects Combination
      √ should combine multiple positive trait effects correctly (1 ms)
      √ should combine positive and negative trait effects (1 ms)
      √ should handle empty trait arrays (1 ms)
      √ should handle unknown traits gracefully (3 ms)
    Competition Stress Response
      √ should calculate stress impact during competition (2 ms)
      √ should apply stress resistance from traits (1 ms)
    Integration Error Handling
      √ should handle missing trait data gracefully (9 ms)
      √ should handle malformed trait data (2 ms)
      √ should handle invalid activity types gracefully (3 ms)

[2026-01-28 13:46:18] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:18] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:18] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:18] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:46:18] info: [competitionRewards.calculateStatGains] 1st place winner gained +1 speed (10% chance)
[2026-01-28 13:46:18] info: [competitionRewards.calculateStatGains] 2nd place winner gained +1 balance (5% chance)
[2026-01-28 13:46:18] info: [competitionRewards.calculateStatGains] 3rd place winner gained +1 precision (3% chance)
[2026-01-28 13:46:18] info: [competitionRewards.calculateStatGains] 1st place winner gained +1 speed (10% chance)
[2026-01-28 13:46:18] info: [competitionRewards.calculateStatGains] 1st place winner gained +1 stamina (10% chance)
[2026-01-28 13:46:18] info: [competitionRewards.calculateStatGains] 1st place winner gained +1 focus (10% chance)
PASS tests/competitionRewards.test.mjs
  🏆 UNIT: Competition Rewards System - Prize & Stat Gain Calculations
    calculatePrizeDistribution
      √ should calculate correct prize distribution for 1000 prize pool (2 ms)
      √ should handle odd prize amounts with rounding (1 ms)
      √ should handle small prize amounts (1 ms)
      √ should handle zero prize pool (1 ms)
    getRelevantStats
      √ should return correct stats for Racing discipline (1 ms)
      √ should return correct stats for Show Jumping discipline (1 ms)
      √ should return correct stats for Dressage discipline
      √ should return default stats for unknown discipline (1 ms)
      √ should handle all supported disciplines (3 ms)
    calculateStatGains
      √ should grant stat gain for 1st place with 10% chance (lucky roll) (3 ms)
      √ should not grant stat gain for 1st place with unlucky roll (1 ms)
      √ should grant stat gain for 2nd place with 5% chance (lucky roll) (7 ms)
      √ should grant stat gain for 3rd place with 3% chance (lucky roll) (1 ms)
      √ should not grant stat gain for non-podium placement
      √ should not grant stat gain for invalid placement
      √ should select random stat from relevant discipline stats (4 ms)
    calculateEntryFees
      √ should calculate total entry fees correctly (1 ms)
      √ should handle zero entry fee
      √ should handle zero entries
      √ should handle large numbers (1 ms)
    hasValidRider
      √ should return true for horse with valid rider object (1 ms)
      √ should return false for horse with null rider
      √ should return false for horse with undefined rider
      √ should return false for horse with non-object rider (1 ms)
      √ should return true for horse with empty object rider

[2026-01-28 13:46:18] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:18] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:18] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:18] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:46:18] error: ❌ Environment validation failed:
[2026-01-28 13:46:18] error:   - Missing required environment variable: DATABASE_URL
[2026-01-28 13:46:18] error:   - Missing required environment variable: JWT_SECRET
[2026-01-28 13:46:18] error:   - NODE_ENV must be one of: development, production, test (current: invalid)
[2026-01-28 13:46:18] error:   - PORT must be a number (current: abc)
[2026-01-28 13:46:18] error: 
Please fix the above errors in your .env file and restart.
[2026-01-28 13:46:18] info: ✅ Environment validation passed
[2026-01-28 13:46:18] warn: [validateEnvironment] SECURITY WARNING: ALLOWED_ORIGINS contains HTTP URLs in production
[2026-01-28 13:46:18] warn:   HTTP origins detected: http://example.com
[2026-01-28 13:46:18] warn:   These should be HTTPS in production to prevent man-in-the-middle attacks
[2026-01-28 13:46:18] warn: [validateEnvironment] SECURITY WARNING: PORT is set to 80 (HTTP) in production
[2026-01-28 13:46:18] warn:   Consider using HTTPS (443) or a reverse proxy with HTTPS termination
[2026-01-28 13:46:18] error: ❌ Environment validation failed:
[2026-01-28 13:46:18] error:   - JWT_SECRET must be at least 32 characters (current: 17)
[2026-01-28 13:46:18] error:   - JWT_SECRET appears to be a placeholder value. Please generate a real secret.
[2026-01-28 13:46:18] error:   - DATABASE_URL contains a weak password. Please use a strong password.
[2026-01-28 13:46:18] error: 
Please fix the above errors in your .env file and restart.
[2026-01-28 13:46:18] info: ✅ Environment validation passed
[2026-01-28 13:46:18] info: ✅ Environment validation passed
PASS __tests__/unit/security/validate-environment.test.mjs
  validateEnvironment
    √ throws when required envs are missing or invalid (10 ms)
    √ warns about weak JWT secrets and HTTP origins in production (17 ms)
    √ passes for valid configuration (2 ms)

[2026-01-28 13:46:19] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:19] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:19] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:19] info: [envValidator] Test environment validation complete. Success: true
PASS tests/training-fixed.test.mjs
  Training Fixed Tests
    √ should be a placeholder test (2 ms)

[2026-01-28 13:46:19] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:19] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:19] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:19] info: [envValidator] Test environment validation complete. Success: true
PASS tests/isHorseEligible.test.mjs
  🏆 UNIT: Horse Eligibility - Competition Entry Validation
    Input Validation
      √ should throw error for null horse (6 ms)
      √ should throw error for undefined horse (1 ms)
      √ should throw error for null show (1 ms)
      √ should throw error for undefined show (1 ms)
      √ should throw error for non-array previousEntries (1 ms)
      √ should throw error for null previousEntries (1 ms)
    Age Requirements (3-20 inclusive)
      √ should return false for horse younger than 3 (1 ms)
      √ should return false for horse age 1 (1 ms)
      √ should return true for horse exactly age 3 (1 ms)
      √ should return true for horse exactly age 20 (1 ms)
      √ should return false for horse older than 20 (9 ms)
      √ should return false for horse age 25 (1 ms)
      √ should return false for horse with non-numeric age
      √ should return false for horse with null age (1 ms)
      √ should return false for horse with undefined age
    Level Requirements
      √ should return false for horse level below show minimum
      √ should return true for horse level exactly at show minimum (1 ms)
      √ should return true for horse level exactly at show maximum
      √ should return false for horse level above show maximum
      √ should return true for horse level within show range (1 ms)
      √ should return false for horse with non-numeric level
      √ should return false for horse with null level (1 ms)
      √ should return false for horse with undefined level (1 ms)
      √ should handle show with no levelMin specified
      √ should handle show with no levelMax specified (1 ms)
      √ should handle show with neither levelMin nor levelMax specified (1 ms)
    Previous Entries Check
      √ should return false if horse has already entered this show
      √ should return true if horse has not entered this show
      √ should return true with empty previousEntries array
      √ should return true when previousEntries is not provided (default empty array) (1 ms)
      √ should handle numeric show IDs in previousEntries
      √ should handle mixed type show IDs in previousEntries (1 ms)
    Discipline Independence
      √ should allow horse to enter Dressage regardless of trait (1 ms)
      √ should allow horse to enter Jumping regardless of trait (1 ms)
      √ should allow horse to enter Racing regardless of trait (1 ms)
      √ should allow horse to enter any discipline regardless of health status
    Valid Entry Cases
      √ should return true for completely valid entry (1 ms)
      √ should return true for minimum age and level requirements (1 ms)
      √ should return true for maximum age and level requirements
    Edge Cases
      √ should handle show with zero as levelMin (1 ms)
      √ should handle negative horse level (6 ms)
      √ should handle very large previousEntries array (1 ms)
      √ should handle show ID that is an empty string (1 ms)

[2026-01-28 13:46:19] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:19] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:19] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:19] info: [envValidator] Test environment validation complete. Success: true
PASS tests/unit/carePatternAnalysis.test.mjs
  Care Pattern Analysis
    analyzeCarePatterns
      √ should analyze patterns for eligible horse (5 ms)
      √ should reject horse too old for evaluation (9 ms)
      √ should throw error for non-existent horse (2 ms)
      √ should analyze consistent care patterns (1 ms)
      √ should analyze novelty exposure patterns (1 ms)
      √ should analyze stress management patterns (2 ms)
      √ should analyze bonding patterns (1 ms)
      √ should analyze neglect patterns (1 ms)
      √ should analyze environmental factors (2 ms)
    Edge Cases
      √ should handle horse with no interactions (1 ms)
      √ should handle database errors gracefully (2 ms)
      √ should handle invalid evaluation date

[2026-01-28 13:46:20] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:20] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:20] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:20] info: [envValidator] Test environment validation complete. Success: true
PASS tests/traitDiscovery.test.mjs
  🔍 UNIT: Trait Discovery System - Environmental Trait Detection
    √ should pass basic test (2 ms)
    √ should handle trait discovery logic (1 ms)
    √ should handle enrichment activity counting
    √ should validate trait rarity levels (1 ms)
    √ should validate trait types (1 ms)

[2026-01-28 13:46:20] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:20] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:20] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:20] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 13:46:20] warn: [cacheHelper] Clear all cache skipped (Redis unavailable)
[2026-01-28 13:46:20] warn: [cacheHelper] Clear all cache skipped (Redis unavailable)
[2026-01-28 13:46:20] warn: [cacheHelper] Clear all cache skipped (Redis unavailable)
[2026-01-28 13:46:20] warn: [cacheHelper] Clear all cache skipped (Redis unavailable)
[2026-01-28 13:46:20] warn: [cacheHelper] Clear all cache skipped (Redis unavailable)
[2026-01-28 13:46:20] warn: [cacheHelper] Clear all cache skipped (Redis unavailable)
[2026-01-28 13:46:20] warn: [cacheHelper] Clear all cache skipped (Redis unavailable)
[2026-01-28 13:46:20] warn: [cacheHelper] Clear all cache skipped (Redis unavailable)
[2026-01-28 13:46:20] warn: [cacheHelper] Clear all cache skipped (Redis unavailable)
PASS tests/horseXpController.test.mjs
  Horse XP Controller - API Endpoints
    getHorseXpStatus
      √ should return horse XP status for authorized user (14 ms)
      √ should reject unauthorized access to other users horses (2 ms)
      √ should handle horse not found (3 ms)
    allocateStatPoint
      √ should allocate stat point successfully (2 ms)
      √ should validate stat name (2 ms)
      √ should require stat name in request body (2 ms)
    getHorseXpHistory
      √ should return horse XP history with pagination (3 ms)
    awardXpToHorse
      √ should award XP to horse (system/admin use) (2 ms)
      √ should validate XP amount (7 ms)

[2026-01-28 13:46:20] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:20] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:20] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:20] info: [envValidator] Test environment validation complete. Success: true
PASS __tests__/unit/clusterManager.test.mjs
  clusterManager
    √ disables clustering by default in test env (2 ms)
    √ enables clustering when explicitly enabled (1 ms)
    √ uses WEB_CONCURRENCY when set (1 ms)
    √ defaults to CPU count when WEB_CONCURRENCY is not set (2 ms)
    √ clamps invalid worker counts to 1 (1 ms)

[2026-01-28 13:46:21] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:21] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:21] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:21] info: [envValidator] Test environment validation complete. Success: true
PASS tests/enhancedCompetitionLogic.test.mjs
  🏆 UNIT: Enhanced Competition Logic - Complete Competition System Validation
    📊 Horse Level Calculation
      √ should calculate horse level correctly for Racing discipline (2 ms)
      √ should handle high-level horses correctly (1 ms)
    🎂 Age Requirements
      √ should accept horses aged 3-21 (in days) (1 ms)
      √ should reject horses under 3 or over 21 (in days) (1 ms)
    🧬 Trait Requirements
      √ should require Gaited trait for Gaited competitions (2 ms)
      √ should not require special traits for most disciplines (1 ms)
    📈 Stat Gain System
      √ should award stat gains for 1st place (10% chance) (2 ms)
      √ should not award stat gains when random chance fails (1 ms)
      √ should not award stat gains for 4th place or lower (1 ms)
    🏆 Prize Distribution
      √ should not award prizes to 4th place (1 ms)
    🎯 Discipline Configuration
      √ should have all 24 disciplines (1 ms)
      √ should have correct stats for each discipline (2 ms)
      √ should have Gaited trait requirement for Gaited discipline (1 ms)
    🔧 Error Handling
      √ should handle missing horse data gracefully (1 ms)
      √ should handle invalid discipline gracefully (1 ms)

[2026-01-28 13:46:21] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:21] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:21] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:21] info: [envValidator] Test environment validation complete. Success: true
PASS tests/horseModelAtBirth.test.mjs
  🐴 UNIT: Horse Model At-Birth Traits - Creation Integration Testing
    createHorse with at-birth traits
      √ should apply at-birth traits for newborn with parents (5 ms)
      √ should pass custom mare stress and feed quality (1 ms)
      √ should merge at-birth traits with existing traits (2 ms)
      √ should not apply at-birth traits for older horses (1 ms)
      √ should not apply at-birth traits for horses without parents (8 ms)
      √ should continue horse creation even if at-birth trait application fails (1 ms)
      √ should handle missing sireId gracefully (1 ms)
      √ should handle missing damId gracefully (1 ms)
      √ should log breeding analysis information (2 ms)

[2026-01-28 13:46:21] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:21] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:21] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:21] info: [envValidator] Test environment validation complete. Success: true
PASS tests/horseModel.test.mjs
  🐎 UNIT: Horse Model - Discipline Score Management
    updateDisciplineScore
      √ should update discipline score for existing horse (5 ms)
      √ should add to existing discipline score (1 ms)
      √ should handle multiple disciplines independently (2 ms)
      √ should throw error for invalid horse ID (6 ms)
      √ should throw error for non-existent horse (2 ms)
      √ should throw error for invalid discipline (2 ms)
      √ should throw error for invalid points (1 ms)
    getDisciplineScores
      √ should return empty object for horse with no scores (1 ms)
      √ should return discipline scores for horse with scores (10 ms)
      √ should throw error for invalid horse ID (2 ms)
      √ should throw error for non-existent horse (2 ms)

[2026-01-28 13:46:22] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:22] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:22] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:22] info: [envValidator] Test environment validation complete. Success: true
PASS tests/integration/user.test.mjs
  User Integration Tests - Mocked Database
    User Retrieval from Seeded Data
      √ should retrieve the seeded user by ID (3 ms)
      √ should retrieve the seeded user by email (2 ms)
      √ should return null for non-existent user (1 ms)
    User with Horses Relationship
      √ should retrieve user with their 2 horses (2 ms)
      √ should include breed information for horses (2 ms)
    JSON Settings Field
      √ should confirm JSON settings field exists and includes darkMode = true (1 ms)
    Database Constraints
      √ should confirm unique email constraint (1 ms)

[2026-01-28 13:46:22] info: [envValidator] Validating test environment configuration...
[2026-01-28 13:46:22] info: [envValidator] ✅ All 5 required environment variables are present
[2026-01-28 13:46:22] info: [envValidator] ℹ️  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 13:46:22] info: [envValidator] Test environment validation complete. Success: true
PASS tests/xpLogModel.test.mjs
  📊 UNIT: XP Log Model - Experience Point Event Tracking
    logXpEvent
      √ should log XP event successfully (4 ms)
      √ should validate required parameters (4 ms)
      √ should handle database errors (1 ms)
      √ should handle negative XP amounts (1 ms)
    getUserXpEvents
      √ should retrieve XP events for a user (1 ms)
      √ should handle date filters (1 ms)
    getUserXpSummary
      √ should calculate XP summary correctly (1 ms)
      √ should handle empty results (9 ms)
      √ should handle date filters in summary (1 ms)
    getRecentXpEvents
      √ should retrieve recent XP events across all users (1 ms)
      √ should use default options (1 ms)

Summary of all failing tests
FAIL __tests__/integration/security/owasp-comprehensive.test.mjs (8.605 s)
  ● �� OWASP Top 10 - Comprehensive Security Tests › ��️ A06:2021 - Security Misconfiguration › Default Credentials Prevention › should reject common default passwords

    expect(received).toContain(expected) // indexOf

    Expected substring: "password"
    Received string:    "Username can only contain letters, numbers, and underscores"

    [0m [90m  97 |[39m
     [90m  98 |[39m           expect(response[33m.[39mstatus)[33m.[39mtoBe([35m400[39m)[33m;[39m
    [31m[1m>[22m[39m[90m  99 |[39m           expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoContain([32m'password'[39m)[33m;[39m
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 100 |[39m         }
     [90m 101 |[39m       })[33m;[39m
     [90m 102 |[39m[0m

      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:99:41)

  ● �� OWASP Top 10 - Comprehensive Security Tests › ��️ A06:2021 - Security Misconfiguration › HTTP Security Headers › should not expose server version information

    expect(received).not.toContain(expected) // indexOf

    Matcher error: received value must not be null nor undefined

    Received has value: undefined

    [0m [90m 140 |[39m         [90m// Should not expose server software version[39m
     [90m 141 |[39m         expect(response[33m.[39mheaders[[32m'x-powered-by'[39m])[33m.[39mtoBeUndefined()[33m;[39m
    [31m[1m>[22m[39m[90m 142 |[39m         expect(response[33m.[39mheaders[[32m'server'[39m])[33m.[39mnot[33m.[39mtoContain([32m'Express'[39m)[33m;[39m
     [90m     |[39m                                                [31m[1m^[22m[39m
     [90m 143 |[39m         expect(response[33m.[39mheaders[[32m'server'[39m])[33m.[39mnot[33m.[39mtoContain([32m'Node'[39m)[33m;[39m
     [90m 144 |[39m       })[33m;[39m
     [90m 145 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:142:48)

  ● �� OWASP Top 10 - Comprehensive Security Tests › ��️ A06:2021 - Security Misconfiguration › CORS Configuration › should enforce CORS policies

    expect(received).toBeLessThan(expected)

    Expected: < 500
    Received:   500

    [0m [90m 179 |[39m         [90m// CORS should be configured to restrict origins[39m
     [90m 180 |[39m         [90m// (specific test depends on CORS configuration)[39m
    [31m[1m>[22m[39m[90m 181 |[39m         expect(response[33m.[39mstatus)[33m.[39mtoBeLessThan([35m500[39m)[33m;[39m
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 182 |[39m       })[33m;[39m
     [90m 183 |[39m     })[33m;[39m
     [90m 184 |[39m[0m

      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:181:33)

  ● �� OWASP Top 10 - Comprehensive Security Tests › ��️ A06:2021 - Security Misconfiguration › Rate Limiting Configuration › should have rate limiting enabled

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 199 |[39m         [36mconst[39m rateLimited [33m=[39m responses[33m.[39msome(r [33m=>[39m r[33m.[39mstatus [33m===[39m [35m429[39m)[33m;[39m
     [90m 200 |[39m
    [31m[1m>[22m[39m[90m 201 |[39m         expect(rateLimited)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 202 |[39m       })[33m;[39m
     [90m 203 |[39m     })[33m;[39m
     [90m 204 |[39m   })[33m;[39m[0m

      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:201:29)

  ● �� OWASP Top 10 - Comprehensive Security Tests › �� A08:2021 - Software and Data Integrity Failures › Dependency Integrity › should validate critical dependencies are up-to-date

    expect(received).toBeDefined()

    Received: undefined

    [0m [90m 217 |[39m         [90m// Critical security packages should be present[39m
     [90m 218 |[39m         expect(packageJson[33m.[39mdependencies[33m.[39mhelmet)[33m.[39mtoBeDefined()[33m;[39m
    [31m[1m>[22m[39m[90m 219 |[39m         expect(packageJson[33m.[39mdependencies[33m.[39mbcrypt)[33m.[39mtoBeDefined()[33m;[39m
     [90m     |[39m                                                 [31m[1m^[22m[39m
     [90m 220 |[39m         expect(packageJson[33m.[39mdependencies[33m.[39mjsonwebtoken)[33m.[39mtoBeDefined()[33m;[39m
     [90m 221 |[39m       })[33m;[39m
     [90m 222 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:219:49)

  ● �� OWASP Top 10 - Comprehensive Security Tests › �� A09:2021 - Security Logging and Monitoring Failures › Sensitive Operation Logging › should log ownership violations

    expect(received).toBe(expected) // Object.is equality

    Expected: 403
    Received: 404

    [0m [90m 377 |[39m           [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 378 |[39m
    [31m[1m>[22m[39m[90m 379 |[39m         expect(response[33m.[39mstatus)[33m.[39mtoBe([35m403[39m)[33m;[39m
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 380 |[39m         [90m// Ownership violation should be logged[39m
     [90m 381 |[39m
     [90m 382 |[39m         [90m// Cleanup[39m[0m

      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:379:33)

  ● �� OWASP Top 10 - Comprehensive Security Tests › �� A09:2021 - Security Logging and Monitoring Failures › Sensitive Operation Logging › should log rate limit violations

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 400 |[39m         [36mconst[39m rateLimited [33m=[39m responses[33m.[39msome(r [33m=>[39m r[33m.[39mstatus [33m===[39m [35m429[39m)[33m;[39m
     [90m 401 |[39m
    [31m[1m>[22m[39m[90m 402 |[39m         expect(rateLimited)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 403 |[39m         [90m// Rate limit violation should be logged[39m
     [90m 404 |[39m       })[33m;[39m
     [90m 405 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:402:29)

FAIL tests/integration/userRoutes.test.mjs
  ● �� INTEGRATION: User Routes - HTTP API Endpoints › GET /api/users/:id/progress › should return user progress successfully

    expect(received).toMatchObject(expected)

    - Expected  - 5
    + Received  + 0

    @@ -1,14 +1,9 @@
      Object {
        "level": Any<Number>,
        "progressPercentage": Any<Number>,
        "totalEarnings": Any<Number>,
    -   "user": Object {
    -     "connect": Object {
    -       "id": "a638c7aa-cca1-4436-bb3d-863e3011ffc9",
    -     },
    -   },
        "username": "userroutes_1769625701925",
        "xp": Any<Number>,
        "xpForCurrentLevel": Any<Number>,
        "xpForNextLevel": Any<Number>,
        "xpToNextLevel": Any<Number>,

    [0m [90m 91 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 92 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoBe([32m'User progress retrieved successfully'[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 93 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoMatchObject({
     [90m    |[39m                                  [31m[1m^[22m[39m
     [90m 94 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m
     [90m 95 |[39m         username[33m:[39m testUser[33m.[39musername[33m,[39m
     [90m 96 |[39m         level[33m:[39m expect[33m.[39many([33mNumber[39m)[33m,[39m[0m

      at Object.<anonymous> (tests/integration/userRoutes.test.mjs:93:34)

FAIL tests/integration/groomAssignmentSystem.test.mjs
  ● Enhanced Groom Assignment System Integration Tests › 1. Assignment Creation › should create a new groom assignment

    expect(received).toBe(expected) // Object.is equality

    Expected: 201
    Received: 400

    [0m [90m 116 |[39m         [33m.[39msend(assignmentData)[33m;[39m
     [90m 117 |[39m
    [31m[1m>[22m[39m[90m 118 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m201[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 119 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 120 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoHaveProperty([32m'assignment'[39m)[33m;[39m
     [90m 121 |[39m[0m

      at Object.<anonymous> (tests/integration/groomAssignmentSystem.test.mjs:118:31)

  ● Enhanced Groom Assignment System Integration Tests › 1. Assignment Creation › should create multiple assignments for different horses

    expect(received).toBe(expected) // Object.is equality

    Expected: 201
    Received: 400

    [0m [90m 142 |[39m         [33m.[39msend(assignmentData)[33m;[39m
     [90m 143 |[39m
    [31m[1m>[22m[39m[90m 144 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m201[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 145 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 146 |[39m     })[33m;[39m
     [90m 147 |[39m[0m

      at Object.<anonymous> (tests/integration/groomAssignmentSystem.test.mjs:144:31)

  ● Enhanced Groom Assignment System Integration Tests › 1. Assignment Creation › should prevent duplicate assignments

    expect(received).toContain(expected) // indexOf

    Expected substring: "already assigned"
    Received string:    "You do not own this horse"

    [0m [90m 161 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m400[39m)[33m;[39m
     [90m 162 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 163 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoContain([32m'already assigned'[39m)[33m;[39m
     [90m     |[39m                                     [31m[1m^[22m[39m
     [90m 164 |[39m     })[33m;[39m
     [90m 165 |[39m
     [90m 166 |[39m     it([32m'should validate required fields'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.<anonymous> (tests/integration/groomAssignmentSystem.test.mjs:163:37)

  ● Enhanced Groom Assignment System Integration Tests › 2. Assignment Retrieval › should get all assignments for user

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

    [0m [90m 240 |[39m       [36mconst[39m { assignments[33m,[39m statistics } [33m=[39m response[33m.[39mbody[33m.[39mdata[33m;[39m
     [90m 241 |[39m       expect([33mArray[39m[33m.[39misArray(assignments))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 242 |[39m       expect(assignments[33m.[39mlength)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 243 |[39m       expect(statistics[33m.[39mactiveAssignments)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m 244 |[39m     })[33m;[39m
     [90m 245 |[39m[0m

      at Object.<anonymous> (tests/integration/groomAssignmentSystem.test.mjs:242:34)

  ● Enhanced Groom Assignment System Integration Tests › 2. Assignment Retrieval › should get assignment dashboard

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

    [0m [90m 273 |[39m
     [90m 274 |[39m       [36mconst[39m { summary[33m,[39m salaryCosts } [33m=[39m response[33m.[39mbody[33m.[39mdata[33m;[39m
    [31m[1m>[22m[39m[90m 275 |[39m       expect(summary[33m.[39mtotalActiveAssignments)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m     |[39m                                              [31m[1m^[22m[39m
     [90m 276 |[39m       expect(salaryCosts[33m.[39mtotalWeeklyCost)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m 277 |[39m     })[33m;[39m
     [90m 278 |[39m   })[33m;[39m[0m

      at Object.<anonymous> (tests/integration/groomAssignmentSystem.test.mjs:275:46)

  ● Enhanced Groom Assignment System Integration Tests › 3. Assignment Limits › should enforce assignment limits

    expect(received).toContain(expected) // indexOf

    Expected substring: "maximum assignments"
    Received string:    "You do not own this horse"

    [0m [90m 332 |[39m           } [36melse[39m {
     [90m 333 |[39m             failedAssignments[33m++[39m[33m;[39m
    [31m[1m>[22m[39m[90m 334 |[39m             expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoContain([32m'maximum assignments'[39m)[33m;[39m
     [90m     |[39m                                           [31m[1m^[22m[39m
     [90m 335 |[39m           }
     [90m 336 |[39m         }
     [90m 337 |[39m[0m

      at Object.<anonymous> (tests/integration/groomAssignmentSystem.test.mjs:334:43)

  ● Enhanced Groom Assignment System Integration Tests › 4. Salary Calculations › should calculate weekly salary costs

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

    [0m [90m 362 |[39m
     [90m 363 |[39m       [36mconst[39m { totalWeeklyCost[33m,[39m groomCosts } [33m=[39m response[33m.[39mbody[33m.[39mdata[33m;[39m
    [31m[1m>[22m[39m[90m 364 |[39m       expect(totalWeeklyCost)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 365 |[39m       expect([33mArray[39m[33m.[39misArray(groomCosts))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 366 |[39m       expect(groomCosts[33m.[39mlength)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m 367 |[39m[0m

      at Object.<anonymous> (tests/integration/groomAssignmentSystem.test.mjs:364:31)

  ● Enhanced Groom Assignment System Integration Tests › 6. Assignment Removal › should remove an assignment

    expect(received).toBeDefined()

    Received: undefined

    [0m [90m 411 |[39m
     [90m 412 |[39m       [36mconst[39m assignment [33m=[39m assignmentsResponse[33m.[39mbody[33m.[39mdata[33m.[39massignments[33m.[39mfind(a [33m=>[39m a[33m.[39misActive)[33m;[39m
    [31m[1m>[22m[39m[90m 413 |[39m       expect(assignment)[33m.[39mtoBeDefined()[33m;[39m
     [90m     |[39m                          [31m[1m^[22m[39m
     [90m 414 |[39m
     [90m 415 |[39m       [90m// Remove the assignment[39m
     [90m 416 |[39m       [36mconst[39m response [33m=[39m [36mawait[39m request(app)[0m

      at Object.<anonymous> (tests/integration/groomAssignmentSystem.test.mjs:413:26)

FAIL tests/routes/enhancedReportingRoutes.test.mjs
  ● Enhanced Reporting API Routes › Multi-Horse Analysis Endpoints › POST /api/horses/compare-epigenetics should compare multiple horses

    expected 200 "OK", got 403 "Forbidden"

    [0m [90m 257 |[39m           horseIds[33m:[39m [testHorses[[35m0[39m][33m.[39mid[33m,[39m testHorses[[35m1[39m][33m.[39mid[33m,[39m testHorses[[35m2[39m][33m.[39mid][33m,[39m
     [90m 258 |[39m         })
    [31m[1m>[22m[39m[90m 259 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 260 |[39m
     [90m 261 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 262 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoBeDefined()[33m;[39m[0m

      at Object.<anonymous> (tests/routes/enhancedReportingRoutes.test.mjs:259:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ● Enhanced Reporting API Routes › Multi-Horse Analysis Endpoints › GET /api/horses/trait-trends should return trait development trends

    expected 200 "OK", got 400 "Bad Request"

    [0m [90m 274 |[39m         [33m.[39mquery({ user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m timeframe[33m:[39m [35m30[39m })
     [90m 275 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)
    [31m[1m>[22m[39m[90m 276 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 277 |[39m
     [90m 278 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 279 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoBeDefined()[33m;[39m[0m

      at Object.<anonymous> (tests/routes/enhancedReportingRoutes.test.mjs:276:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

FAIL tests/integration/userProgressAPI.integration.test.mjs
  ● �� INTEGRATION: User Progress API - Complete Progress Tracking › �� STEP 1: User Setup & Initial Progress State › should return correct initial progress data via API

    expect(received).toEqual(expected) // deep equality

    - Expected  - 5
    + Received  + 1

    @@ -1,14 +1,10 @@
      Object {
        "level": 1,
        "progressPercentage": 0,
        "totalEarnings": 1000,
    -   "user": Object {
    -     "connect": Object {
    -       "id": "383f9ffe-4704-459f-b903-5a9eff788504",
    -     },
    -   },
    +   "userId": "383f9ffe-4704-459f-b903-5a9eff788504",
        "username": "progresstest",
        "xp": 0,
        "xpForCurrentLevel": 0,
        "xpForNextLevel": 200,
        "xpToNextLevel": 200,

    [0m [90m 156 |[39m
     [90m 157 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 158 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoEqual({
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 159 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m
     [90m 160 |[39m         username[33m:[39m testUser[33m.[39musername[33m,[39m
     [90m 161 |[39m         level[33m:[39m [35m1[39m[33m,[39m[0m

      at Object.<anonymous> (tests/integration/userProgressAPI.integration.test.mjs:158:34)

  ● �� INTEGRATION: User Progress API - Complete Progress Tracking › �� STEP 2: Horse Creation for Training Integration › should create training-eligible horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Progress Test Horse",
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "383f9ffe-4704-459f-b903-5a9eff788504"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        age: 7,
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [
            "athletic",
            "focused"
          ],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 188 |[39m       [36mconst[39m calculatedAge [33m=[39m currentDate[33m.[39mgetFullYear() [33m-[39m birthDate[33m.[39mgetFullYear()[33m;[39m
     [90m 189 |[39m
    [31m[1m>[22m[39m[90m 190 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 191 |[39m         data[33m:[39m {
     [90m 192 |[39m           name[33m:[39m [32m'Progress Test Horse'[39m[33m,[39m
     [90m 193 |[39m           breedId[33m:[39m breed[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/userProgressAPI.integration.test.mjs:190:19)

  ● �� INTEGRATION: User Progress API - Complete Progress Tracking › ��️ STEP 3: XP Gain Through Training & Progress Updates › should gain XP from training and update progress correctly

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 218 |[39m       [36mconst[39m trainingResponse [33m=[39m [36mawait[39m trainingRequest()
     [90m 219 |[39m         [33m.[39msend({
    [31m[1m>[22m[39m[90m 220 |[39m           horseId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 221 |[39m           discipline[33m:[39m [32m'Racing'[39m[33m,[39m
     [90m 222 |[39m         })
     [90m 223 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/integration/userProgressAPI.integration.test.mjs:220:30)

  ● �� INTEGRATION: User Progress API - Complete Progress Tracking › ��️ STEP 3: XP Gain Through Training & Progress Updates › should handle multiple training sessions and XP accumulation

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 251 |[39m         [90m// Update previous training log to be in the past[39m
     [90m 252 |[39m         [36mconst[39m lastLog [33m=[39m [36mawait[39m prisma[33m.[39mtrainingLog[33m.[39mfindFirst({
    [31m[1m>[22m[39m[90m 253 |[39m           where[33m:[39m { horseId[33m:[39m testHorse[33m.[39mid }[33m,[39m
     [90m     |[39m                                       [31m[1m^[22m[39m
     [90m 254 |[39m           orderBy[33m:[39m { trainedAt[33m:[39m [32m'desc'[39m }[33m,[39m
     [90m 255 |[39m         })[33m;[39m
     [90m 256 |[39m[0m

      at Object.<anonymous> (tests/integration/userProgressAPI.integration.test.mjs:253:39)

  ● �� INTEGRATION: User Progress API - Complete Progress Tracking › �� STEP 4: Level-Up Detection & Multi-Level Progression › should level up when reaching XP threshold

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 298 |[39m       [90m// STEP 2: One more training to trigger level-up (195 + 5 = 200 XP)[39m
     [90m 299 |[39m       [36mconst[39m lastLog [33m=[39m [36mawait[39m prisma[33m.[39mtrainingLog[33m.[39mfindFirst({
    [31m[1m>[22m[39m[90m 300 |[39m         where[33m:[39m { horseId[33m:[39m testHorse[33m.[39mid }[33m,[39m
     [90m     |[39m                                     [31m[1m^[22m[39m
     [90m 301 |[39m         orderBy[33m:[39m { trainedAt[33m:[39m [32m'desc'[39m }[33m,[39m
     [90m 302 |[39m       })[33m;[39m
     [90m 303 |[39m[0m

      at Object.<anonymous> (tests/integration/userProgressAPI.integration.test.mjs:300:37)

  ● �� INTEGRATION: User Progress API - Complete Progress Tracking › �� STEP 4: Level-Up Detection & Multi-Level Progression › should handle multiple level gains in single XP award

    expect(received).toEqual(expected) // deep equality

    - Expected  - 5
    + Received  + 1

    @@ -1,14 +1,10 @@
      Object {
        "level": 3,
        "progressPercentage": 50,
        "totalEarnings": 1000,
    -   "user": Object {
    -     "connect": Object {
    -       "id": "383f9ffe-4704-459f-b903-5a9eff788504",
    -     },
    -   },
    +   "userId": "383f9ffe-4704-459f-b903-5a9eff788504",
        "username": "progresstest",
        "xp": 350,
        "xpForCurrentLevel": 300,
        "xpForNextLevel": 400,
        "xpToNextLevel": 50,

    [0m [90m 360 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m 361 |[39m
    [31m[1m>[22m[39m[90m 362 |[39m       expect(progressResponse[33m.[39mbody[33m.[39mdata)[33m.[39mtoEqual({
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 363 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m
     [90m 364 |[39m         username[33m:[39m testUser[33m.[39musername[33m,[39m
     [90m 365 |[39m         level[33m:[39m [35m3[39m[33m,[39m[0m

      at Object.<anonymous> (tests/integration/userProgressAPI.integration.test.mjs:362:42)

  ● �� INTEGRATION: User Progress API - Complete Progress Tracking › �� STEP 5: Dashboard Data Integration › should return comprehensive dashboard data with progress integration

    expect(received).toEqual(expected) // deep equality

    - Expected  - 1
    + Received  + 1

    @@ -2,11 +2,11 @@
        "activity": Object {
          "lastShowPlaced": "never",
          "lastTrained": Any<String>,
        },
        "horses": Object {
    -     "total": 1,
    +     "total": 0,
          "trainable": Any<Number>,
        },
        "shows": Object {
          "nextShowRuns": Any<Array>,
          "upcomingEntries": 0,

    [0m [90m 382 |[39m
     [90m 383 |[39m       expect(dashboardResponse[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 384 |[39m       expect(dashboardResponse[33m.[39mbody[33m.[39mdata)[33m.[39mtoEqual({
     [90m     |[39m                                           [31m[1m^[22m[39m
     [90m 385 |[39m         user[33m:[39m {
     [90m 386 |[39m           id[33m:[39m testUser[33m.[39mid[33m,[39m
     [90m 387 |[39m           username[33m:[39m testUser[33m.[39musername[33m,[39m[0m

      at Object.<anonymous> (tests/integration/userProgressAPI.integration.test.mjs:384:43)

  ● �� INTEGRATION: User Progress API - Complete Progress Tracking › �� STEP 7: End-to-End Progress Validation › should validate all business rules were enforced throughout progression

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 472 |[39m       [90m// STEP 1: Verify training cooldown was respected[39m
     [90m 473 |[39m       [36mconst[39m trainingLogs [33m=[39m [36mawait[39m prisma[33m.[39mtrainingLog[33m.[39mfindMany({
    [31m[1m>[22m[39m[90m 474 |[39m         where[33m:[39m { horseId[33m:[39m testHorse[33m.[39mid }[33m,[39m
     [90m     |[39m                                     [31m[1m^[22m[39m
     [90m 475 |[39m         orderBy[33m:[39m { trainedAt[33m:[39m [32m'asc'[39m }[33m,[39m
     [90m 476 |[39m       })[33m;[39m
     [90m 477 |[39m[0m

      at Object.<anonymous> (tests/integration/userProgressAPI.integration.test.mjs:474:37)

FAIL tests/integration/competitionWorkflow.integration.test.mjs
  ● �� INTEGRATION: Complete Competition Workflow › �� STEP 1: User & Horse Setup › should create user and prepare competition-ready horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Competition Integration Champion",
        age: 35,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "5cf63094-4f46-4b20-9b9f-00f554864f36"
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2019-01-01T00:00:00.000Z"),
        healthStatus: "Excellent",
        disciplineScores: {
          Racing: 75,
          Dressage: 68,
          Show Jumping: 82,
          Cross Country: 70
        },
        epigeneticModifiers: {
          positive: [
            "fast",
            "athletic",
            "focused",
            "brave",
            "resilient",
            "peopleTrusting"
          ],
          negative: [],
          hidden: [
            "champion_heart"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 122 |[39m
     [90m 123 |[39m       [90m// Create competition-ready horse[39m
    [31m[1m>[22m[39m[90m 124 |[39m       competitionHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                          [31m[1m^[22m[39m
     [90m 125 |[39m         data[33m:[39m {
     [90m 126 |[39m           name[33m:[39m [32m'Competition Integration Champion'[39m[33m,[39m
     [90m 127 |[39m           age[33m:[39m [35m35[39m[33m,[39m [90m// 5 years = 35 days (mature and experienced)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/competitionWorkflow.integration.test.mjs:124:26)

  ● �� INTEGRATION: Complete Competition Workflow › �� STEP 3: Competition Entry & Validation › should validate horse meets competition requirements using API

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 182 |[39m       [90m// Test the eligibility API endpoint[39m
     [90m 183 |[39m       [36mconst[39m response [33m=[39m [36mawait[39m request(app)
    [31m[1m>[22m[39m[90m 184 |[39m         [33m.[39m[36mget[39m([32m`/api/competition/eligibility/${competitionHorse.id}/${testShow.discipline}`[39m)
     [90m     |[39m                                                               [31m[1m^[22m[39m
     [90m 185 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)
     [90m 186 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m 187 |[39m[0m

      at Object.<anonymous> (tests/integration/competitionWorkflow.integration.test.mjs:184:63)

  ● �� INTEGRATION: Complete Competition Workflow › �� STEP 3: Competition Entry & Validation › should successfully enter horse in competition using API endpoint

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 221 |[39m         [33m.[39m[36mset[39m([32m'x-test-skip-csrf'[39m[33m,[39m [32m'true'[39m)
     [90m 222 |[39m         [33m.[39msend({
    [31m[1m>[22m[39m[90m 223 |[39m           horseId[33m:[39m competitionHorse[33m.[39mid[33m,[39m
     [90m     |[39m                                     [31m[1m^[22m[39m
     [90m 224 |[39m           showId[33m:[39m testShow[33m.[39mid[33m,[39m
     [90m 225 |[39m         })
     [90m 226 |[39m         [33m.[39mexpect([35m201[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/integration/competitionWorkflow.integration.test.mjs:223:37)

  ● �� INTEGRATION: Complete Competition Workflow › �� STEP 4: Competition Execution & Scoring › should execute competition and calculate results

    TypeError: Cannot read properties of undefined (reading 'disciplineScores')

    [0m [90m 258 |[39m       [90m// Calculate competition score (real algorithm, mocked randomness)[39m
     [90m 259 |[39m       [36mconst[39m competitionScore [33m=[39m calculateCompetitionScore(
    [31m[1m>[22m[39m[90m 260 |[39m         horse[33m.[39mdisciplineScores[show[33m.[39mdiscipline][33m,[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 261 |[39m         horse[33m.[39mepigeneticModifiers[33m,[39m
     [90m 262 |[39m         horse[33m.[39mage[33m,[39m
     [90m 263 |[39m         show[33m.[39mdiscipline[33m,[39m[0m

      at Object.<anonymous> (tests/integration/competitionWorkflow.integration.test.mjs:260:15)

  ● �� INTEGRATION: Complete Competition Workflow › �� STEP 5: Prize Distribution & XP Awards › should award prize money and XP for competition performance

    TypeError: Cannot read properties of undefined (reading 'prizeWon')

    [0m [90m 302 |[39m
     [90m 303 |[39m       [90m// Award prize money[39m
    [31m[1m>[22m[39m[90m 304 |[39m       [36mconst[39m prizeAmount [33m=[39m [33mNumber[39m(competitionResult[33m.[39mprizeWon)[33m;[39m
     [90m     |[39m                                                    [31m[1m^[22m[39m
     [90m 305 |[39m       [36mconst[39m updatedUser [33m=[39m [36mawait[39m prisma[33m.[39muser[33m.[39mupdate({
     [90m 306 |[39m         where[33m:[39m { id[33m:[39m testUser[33m.[39mid }[33m,[39m
     [90m 307 |[39m         data[33m:[39m {[0m

      at Object.<anonymous> (tests/integration/competitionWorkflow.integration.test.mjs:304:52)

  ● �� INTEGRATION: Complete Competition Workflow › �� STEP 6: Leaderboard & Rankings › should track historical performance

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 369 |[39m       [90m// Get horse competition history[39m
     [90m 370 |[39m       [36mconst[39m competitionHistory [33m=[39m [36mawait[39m prisma[33m.[39mcompetitionResult[33m.[39mfindMany({
    [31m[1m>[22m[39m[90m 371 |[39m         where[33m:[39m { horseId[33m:[39m competitionHorse[33m.[39mid }[33m,[39m
     [90m     |[39m                                            [31m[1m^[22m[39m
     [90m 372 |[39m         include[33m:[39m {
     [90m 373 |[39m           show[33m:[39m [36mtrue[39m[33m,[39m
     [90m 374 |[39m         }[33m,[39m[0m

      at Object.<anonymous> (tests/integration/competitionWorkflow.integration.test.mjs:371:44)

  ● �� INTEGRATION: Complete Competition Workflow › �� STEP 7: Performance Impact on Horse Value › should increase horse value based on competition success

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 393 |[39m       [90m// Competition success should affect horse's perceived value[39m
     [90m 394 |[39m       [36mconst[39m horseWithResults [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mfindUnique({
    [31m[1m>[22m[39m[90m 395 |[39m         where[33m:[39m { id[33m:[39m competitionHorse[33m.[39mid }[33m,[39m
     [90m     |[39m                                       [31m[1m^[22m[39m
     [90m 396 |[39m         include[33m:[39m {
     [90m 397 |[39m           competitionResults[33m:[39m [36mtrue[39m[33m,[39m
     [90m 398 |[39m         }[33m,[39m[0m

      at Object.<anonymous> (tests/integration/competitionWorkflow.integration.test.mjs:395:39)

  ● �� INTEGRATION: Complete Competition Workflow › �� STEP 8: Multi-Discipline Competition Readiness › should validate horse can compete in multiple disciplines

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 419 |[39m     it([32m'should validate horse can compete in multiple disciplines'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 420 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mfindUnique({
    [31m[1m>[22m[39m[90m 421 |[39m         where[33m:[39m { id[33m:[39m competitionHorse[33m.[39mid }[33m,[39m
     [90m     |[39m                                       [31m[1m^[22m[39m
     [90m 422 |[39m       })[33m;[39m
     [90m 423 |[39m
     [90m 424 |[39m       [90m// Check all disciplines where horse meets minimum requirements[39m[0m

      at Object.<anonymous> (tests/integration/competitionWorkflow.integration.test.mjs:421:39)

  ● �� INTEGRATION: Complete Competition Workflow › �� STEP 9: End-to-End Competition Workflow Validation › should validate complete competition workflow integrity

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

    [0m [90m 461 |[39m
     [90m 462 |[39m       [90m// User progression[39m
    [31m[1m>[22m[39m[90m 463 |[39m       expect(finalUser[33m.[39mxp)[33m.[39mtoBeGreaterThan(initialXp)[33m;[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 464 |[39m       expect(finalUser[33m.[39mmoney)[33m.[39mtoBeGreaterThan(initialMoney [33m-[39m testShow[33m.[39mentryFee)[33m;[39m
     [90m 465 |[39m
     [90m 466 |[39m       [90m// Horse competition record[39m[0m

      at Object.<anonymous> (tests/integration/competitionWorkflow.integration.test.mjs:463:28)

  ● �� INTEGRATION: Complete Competition Workflow › �� STEP 9: End-to-End Competition Workflow Validation › should validate all business rules enforced throughout competition

    TypeError: Cannot read properties of undefined (reading 'age')

    [0m [90m 483 |[39m     it([32m'should validate all business rules enforced throughout competition'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 484 |[39m       [90m// Entry requirements enforced[39m
    [31m[1m>[22m[39m[90m 485 |[39m       expect(competitionHorse[33m.[39mage)[33m.[39mtoBeGreaterThanOrEqual(testShow[33m.[39mrequirements[33m.[39mminAge)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 486 |[39m       expect(competitionHorse[33m.[39mdisciplineScores[testShow[33m.[39mdiscipline])[33m.[39mtoBeGreaterThanOrEqual(
     [90m 487 |[39m         testShow[33m.[39mrequirements[33m.[39mminDisciplineScore[33m,[39m
     [90m 488 |[39m       )[33m;[39m[0m

      at Object.<anonymous> (tests/integration/competitionWorkflow.integration.test.mjs:485:31)

FAIL tests/controllers/dynamicCompatibilityController.test.mjs
  ● Dynamic Compatibility Controller API › POST /api/compatibility/recommendations › should recommend optimal grooms for specific horse and context

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

    [0m [90m 327 |[39m         [33m.[39msend(requestBody)[33m;[39m
     [90m 328 |[39m
    [31m[1m>[22m[39m[90m 329 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 330 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 331 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoBeDefined()[33m;[39m
     [90m 332 |[39m       expect([33mArray[39m[33m.[39misArray(response[33m.[39mbody[33m.[39mdata[33m.[39mrankedGrooms))[33m.[39mtoBe([36mtrue[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/controllers/dynamicCompatibilityController.test.mjs:329:31)

FAIL tests/integration/horseBreedingWorkflow.integration.test.mjs
  ● �� INTEGRATION: Complete Horse Breeding Workflow › �� STEP 2: Horse Creation (Breeding Stock) › should create mare with quality traits

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Integration Test Mare",
        age: 5,
        breedId: 26468,
        ~~~~~~~
        sex: "Mare",
        healthStatus: "Excellent",
        user: {
          connect: {
            id: "98405677-dcac-476f-b09b-e13de814eda5"
          }
        },
        dateOfBirth: new Date("2021-01-28T18:41:54.722Z"),
        disciplineScores: {
          Racing: 85,
          Dressage: 78
        },
        epigeneticModifiers: {
          positive: [
            "fast",
            "intelligent",
            "calm",
            "resilient"
          ],
          negative: [],
          hidden: [
            "strong_heart"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 155 |[39m
     [90m 156 |[39m       [90m// Create mare with proper schema fields (matching working tests)[39m
    [31m[1m>[22m[39m[90m 157 |[39m       mare [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m              [31m[1m^[22m[39m
     [90m 158 |[39m         data[33m:[39m {
     [90m 159 |[39m           name[33m:[39m [32m'Integration Test Mare'[39m[33m,[39m
     [90m 160 |[39m           age[33m:[39m [35m5[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/horseBreedingWorkflow.integration.test.mjs:157:14)

  ● �� INTEGRATION: Complete Horse Breeding Workflow › �� STEP 2: Horse Creation (Breeding Stock) › should create stallion with complementary traits

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Integration Test Stallion",
        age: 6,
        breedId: 26468,
        ~~~~~~~
        sex: "Stallion",
        healthStatus: "Excellent",
        user: {
          connect: {
            id: "98405677-dcac-476f-b09b-e13de814eda5"
          }
        },
        dateOfBirth: new Date("2020-01-28T18:41:54.731Z"),
        disciplineScores: {
          Racing: 90,
          Show Jumping: 82
        },
        epigeneticModifiers: {
          positive: [
            "powerful",
            "brave",
            "athletic",
            "peopleTrusting"
          ],
          negative: [],
          hidden: [
            "endurance"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 191 |[39m
     [90m 192 |[39m       [90m// Create stallion with proper schema fields (matching working tests)[39m
    [31m[1m>[22m[39m[90m 193 |[39m       stallion [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 194 |[39m         data[33m:[39m {
     [90m 195 |[39m           name[33m:[39m [32m'Integration Test Stallion'[39m[33m,[39m
     [90m 196 |[39m           age[33m:[39m [35m6[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/horseBreedingWorkflow.integration.test.mjs:193:18)

  ● �� INTEGRATION: Complete Horse Breeding Workflow › �� STEP 3: Breeding Process & Foal Birth › should create foal with inherited and epigenetic traits

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 231 |[39m           breedId[33m:[39m breed[33m.[39mid[33m,[39m
     [90m 232 |[39m           sex[33m:[39m [32m'Colt'[39m[33m,[39m
    [31m[1m>[22m[39m[90m 233 |[39m           sireId[33m:[39m stallion[33m.[39mid[33m,[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 234 |[39m           damId[33m:[39m mare[33m.[39mid[33m,[39m
     [90m 235 |[39m           healthStatus[33m:[39m [32m'Excellent'[39m[33m,[39m
     [90m 236 |[39m           user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at Object.<anonymous> (tests/integration/horseBreedingWorkflow.integration.test.mjs:233:28)

  ● �� INTEGRATION: Complete Horse Breeding Workflow › �� STEP 4: Groom Assignment & Care › should assign specialized foal care groom to newborn

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 282 |[39m
     [90m 283 |[39m       [90m// Ensure foal has a groom assignment[39m
    [31m[1m>[22m[39m[90m 284 |[39m       [36mconst[39m assignmentResult [33m=[39m [36mawait[39m ensureDefaultGroomAssignment(foal[33m.[39mid[33m,[39m testUser[33m.[39mid)[33m;[39m
     [90m     |[39m                                                                        [31m[1m^[22m[39m
     [90m 285 |[39m
     [90m 286 |[39m       expect(assignmentResult[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 287 |[39m       expect(assignmentResult[33m.[39massignment [33m||[39m assignmentResult[33m.[39mnewAssignment)[33m.[39mtoBeDefined()[33m;[39m[0m

      at Object.<anonymous> (tests/integration/horseBreedingWorkflow.integration.test.mjs:284:72)

  ● �� INTEGRATION: Complete Horse Breeding Workflow › �� STEP 4: Groom Assignment & Care › should record groom interaction with foal

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 304 |[39m
     [90m 305 |[39m       [36mconst[39m interactionData [33m=[39m {
    [31m[1m>[22m[39m[90m 306 |[39m         foalId[33m:[39m foal[33m.[39mid[33m,[39m
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 307 |[39m         groomId[33m:[39m assignedGroom[33m.[39mid[33m,[39m
     [90m 308 |[39m         interactionType[33m:[39m [32m'daily_care'[39m[33m,[39m
     [90m 309 |[39m         duration[33m:[39m [35m60[39m[33m,[39m [90m// 1 hour[39m[0m

      at Object.<anonymous> (tests/integration/horseBreedingWorkflow.integration.test.mjs:306:22)

  ● �� INTEGRATION: Complete Horse Breeding Workflow › �� STEP 5: Foal Development Tracking › should track foal development progress

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 341 |[39m       [36mconst[39m { getFoalDevelopment } [33m=[39m [36mawait[39m [36mimport[39m([32m'../../models/foalModel.js'[39m)[33m;[39m
     [90m 342 |[39m
    [31m[1m>[22m[39m[90m 343 |[39m       [36mconst[39m developmentData [33m=[39m [36mawait[39m getFoalDevelopment(foal[33m.[39mid)[33m;[39m
     [90m     |[39m                                                             [31m[1m^[22m[39m
     [90m 344 |[39m
     [90m 345 |[39m       expect(developmentData)[33m.[39mtoBeDefined()[33m;[39m
     [90m 346 |[39m       expect(developmentData[33m.[39mfoal[33m.[39mid)[33m.[39mtoBe(foal[33m.[39mid)[33m;[39m[0m

      at Object.<anonymous> (tests/integration/horseBreedingWorkflow.integration.test.mjs:343:61)

  ● �� INTEGRATION: Complete Horse Breeding Workflow › �� STEP 6: End-to-End Workflow Validation › should validate complete breeding workflow integrity

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 361 |[39m       [90m// VERIFY: Complete family tree exists[39m
     [90m 362 |[39m       [36mconst[39m foalWithFamily [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mfindUnique({
    [31m[1m>[22m[39m[90m 363 |[39m         where[33m:[39m { id[33m:[39m foal[33m.[39mid }[33m,[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 364 |[39m         include[33m:[39m {
     [90m 365 |[39m           sire[33m:[39m [36mtrue[39m[33m,[39m
     [90m 366 |[39m           dam[33m:[39m [36mtrue[39m[33m,[39m[0m

      at Object.<anonymous> (tests/integration/horseBreedingWorkflow.integration.test.mjs:363:27)

  ● �� INTEGRATION: Complete Horse Breeding Workflow › �� STEP 6: End-to-End Workflow Validation › should validate business rules are enforced throughout workflow

    TypeError: Cannot read properties of undefined (reading 'age')

    [0m [90m 395 |[39m     it([32m'should validate business rules are enforced throughout workflow'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 396 |[39m       [90m// Age validation[39m
    [31m[1m>[22m[39m[90m 397 |[39m       expect(foal[33m.[39mage)[33m.[39mtoBe([35m0[39m)[33m;[39m [90m// Newborn[39m
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 398 |[39m       expect(mare[33m.[39mage)[33m.[39mtoBeGreaterThanOrEqual([35m3[39m)[33m;[39m [90m// Breeding age[39m
     [90m 399 |[39m       expect(stallion[33m.[39mage)[33m.[39mtoBeGreaterThanOrEqual([35m3[39m)[33m;[39m [90m// Breeding age[39m
     [90m 400 |[39m[0m

      at Object.<anonymous> (tests/integration/horseBreedingWorkflow.integration.test.mjs:397:19)

FAIL tests/integration/epigeneticTraitSystem.test.mjs
  ● Epigenetic Trait System Integration Tests › API Endpoints › GET /api/epigenetic-traits/definitions should return flag and personality definitions

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    → 110 await prisma.groomAssignment.create({
            data: {
              foalId: 146640,
              groomId: 73264,
              user: {
              ~~~~
                connect: {
                  id: "c7bb7042-52f6-4f68-a6a7-3d8467b73359"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ● Epigenetic Trait System Integration Tests › API Endpoints › POST /api/epigenetic-traits/evaluate-milestone/:horseId should evaluate enhanced milestone

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    → 110 await prisma.groomAssignment.create({
            data: {
              foalId: 146640,
              groomId: 73264,
              user: {
              ~~~~
                connect: {
                  id: "c7bb7042-52f6-4f68-a6a7-3d8467b73359"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ● Epigenetic Trait System Integration Tests › API Endpoints › POST /api/epigenetic-traits/log-trait should log trait assignment

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    → 110 await prisma.groomAssignment.create({
            data: {
              foalId: 146640,
              groomId: 73264,
              user: {
              ~~~~
                connect: {
                  id: "c7bb7042-52f6-4f68-a6a7-3d8467b73359"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ● Epigenetic Trait System Integration Tests › API Endpoints › GET /api/epigenetic-traits/history/:horseId should return trait history

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    → 110 await prisma.groomAssignment.create({
            data: {
              foalId: 146640,
              groomId: 73264,
              user: {
              ~~~~
                connect: {
                  id: "c7bb7042-52f6-4f68-a6a7-3d8467b73359"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ● Epigenetic Trait System Integration Tests › API Endpoints › GET /api/epigenetic-traits/summary/:horseId should return development summary

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    → 110 await prisma.groomAssignment.create({
            data: {
              foalId: 146640,
              groomId: 73264,
              user: {
              ~~~~
                connect: {
                  id: "c7bb7042-52f6-4f68-a6a7-3d8467b73359"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ● Epigenetic Trait System Integration Tests › API Endpoints › GET /api/epigenetic-traits/breeding-insights/:horseId should return breeding insights

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    → 110 await prisma.groomAssignment.create({
            data: {
              foalId: 146640,
              groomId: 73264,
              user: {
              ~~~~
                connect: {
                  id: "c7bb7042-52f6-4f68-a6a7-3d8467b73359"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ● Epigenetic Trait System Integration Tests › API Endpoints › Should handle authentication errors properly

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    → 110 await prisma.groomAssignment.create({
            data: {
              foalId: 146640,
              groomId: 73264,
              user: {
              ~~~~
                connect: {
                  id: "c7bb7042-52f6-4f68-a6a7-3d8467b73359"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ● Epigenetic Trait System Integration Tests › API Endpoints › Should handle horse ownership validation

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    → 110 await prisma.groomAssignment.create({
            data: {
              foalId: 146640,
              groomId: 73264,
              user: {
              ~~~~
                connect: {
                  id: "c7bb7042-52f6-4f68-a6a7-3d8467b73359"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ● Epigenetic Trait System Integration Tests › API Endpoints › Should validate input parameters properly

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    → 110 await prisma.groomAssignment.create({
            data: {
              foalId: 146640,
              groomId: 73264,
              user: {
              ~~~~
                connect: {
                  id: "c7bb7042-52f6-4f68-a6a7-3d8467b73359"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ● Epigenetic Trait System Integration Tests › Epigenetic Flag System › Should apply epigenetic flags based on care patterns

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    → 110 await prisma.groomAssignment.create({
            data: {
              foalId: 146640,
              groomId: 73264,
              user: {
              ~~~~
                connect: {
                  id: "c7bb7042-52f6-4f68-a6a7-3d8467b73359"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ● Epigenetic Trait System Integration Tests › Enhanced Milestone Evaluation › Should factor in groom personality bonuses

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    → 110 await prisma.groomAssignment.create({
            data: {
              foalId: 146640,
              groomId: 73264,
              user: {
              ~~~~
                connect: {
                  id: "c7bb7042-52f6-4f68-a6a7-3d8467b73359"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

FAIL tests/integration/dashboardRoutes.test.mjs
  ● �� INTEGRATION: Dashboard API - Real Database Integration › GET /api/user/dashboard/:userId › should return complete dashboard data successfully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestDashboard Horse 1",
        age: 5,
        sex: "Mare",
        breedId: 31430,
        ~~~~~~~
        user: {
          connect: {
            id: "61554af4-d04e-43f6-8960-4b98b1df4c11"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Good",
        totalEarnings: 1500,
        disciplineScores: {
          Dressage: 15
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m  98 |[39m
     [90m  99 |[39m     [90m// Create test horses with real data[39m
    [31m[1m>[22m[39m[90m 100 |[39m     testHorses [33m=[39m [36mawait[39m [33mPromise[39m[33m.[39mall([
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 101 |[39m       prisma[33m.[39mhorse[33m.[39mcreate({
     [90m 102 |[39m         data[33m:[39m {
     [90m 103 |[39m           name[33m:[39m [32m'TestDashboard Horse 1'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
          at async Promise.all (index 0)
      at Object.<anonymous> (tests/integration/dashboardRoutes.test.mjs:100:18)

  ● �� INTEGRATION: Dashboard API - Real Database Integration › GET /api/user/dashboard/:userId › should return 400 for invalid user ID format

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestDashboard Horse 1",
        age: 5,
        sex: "Mare",
        breedId: 31431,
        ~~~~~~~
        user: {
          connect: {
            id: "cd6af976-8caa-4665-a76a-113057bb93a8"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Good",
        totalEarnings: 1500,
        disciplineScores: {
          Dressage: 15
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m  98 |[39m
     [90m  99 |[39m     [90m// Create test horses with real data[39m
    [31m[1m>[22m[39m[90m 100 |[39m     testHorses [33m=[39m [36mawait[39m [33mPromise[39m[33m.[39mall([
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 101 |[39m       prisma[33m.[39mhorse[33m.[39mcreate({
     [90m 102 |[39m         data[33m:[39m {
     [90m 103 |[39m           name[33m:[39m [32m'TestDashboard Horse 1'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
          at async Promise.all (index 0)
      at Object.<anonymous> (tests/integration/dashboardRoutes.test.mjs:100:18)

  ● �� INTEGRATION: Dashboard API - Real Database Integration › GET /api/user/dashboard/:userId › should return 401 for missing authentication

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestDashboard Horse 1",
        age: 5,
        sex: "Mare",
        breedId: 31432,
        ~~~~~~~
        user: {
          connect: {
            id: "94f3942b-690b-436c-a1cc-a2b3da63d3f2"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Good",
        totalEarnings: 1500,
        disciplineScores: {
          Dressage: 15
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m  98 |[39m
     [90m  99 |[39m     [90m// Create test horses with real data[39m
    [31m[1m>[22m[39m[90m 100 |[39m     testHorses [33m=[39m [36mawait[39m [33mPromise[39m[33m.[39mall([
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 101 |[39m       prisma[33m.[39mhorse[33m.[39mcreate({
     [90m 102 |[39m         data[33m:[39m {
     [90m 103 |[39m           name[33m:[39m [32m'TestDashboard Horse 1'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
          at async Promise.all (index 0)
      at Object.<anonymous> (tests/integration/dashboardRoutes.test.mjs:100:18)

  ● �� INTEGRATION: Dashboard API - Real Database Integration › GET /api/user/dashboard/:userId › should return validation error for invalid user ID format

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestDashboard Horse 1",
        age: 5,
        sex: "Mare",
        breedId: 31433,
        ~~~~~~~
        user: {
          connect: {
            id: "552f7209-3437-40e5-98c8-1b7c09361b8a"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Good",
        totalEarnings: 1500,
        disciplineScores: {
          Dressage: 15
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m  98 |[39m
     [90m  99 |[39m     [90m// Create test horses with real data[39m
    [31m[1m>[22m[39m[90m 100 |[39m     testHorses [33m=[39m [36mawait[39m [33mPromise[39m[33m.[39mall([
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 101 |[39m       prisma[33m.[39mhorse[33m.[39mcreate({
     [90m 102 |[39m         data[33m:[39m {
     [90m 103 |[39m           name[33m:[39m [32m'TestDashboard Horse 1'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
          at async Promise.all (index 0)
      at Object.<anonymous> (tests/integration/dashboardRoutes.test.mjs:100:18)

  ● �� INTEGRATION: Dashboard API - Real Database Integration › GET /api/user/dashboard/:userId › should handle user with no horses gracefully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestDashboard Horse 1",
        age: 5,
        sex: "Mare",
        breedId: 31434,
        ~~~~~~~
        user: {
          connect: {
            id: "43454e71-ace3-4dc5-9ce5-d387c449225f"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Good",
        totalEarnings: 1500,
        disciplineScores: {
          Dressage: 15
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m  98 |[39m
     [90m  99 |[39m     [90m// Create test horses with real data[39m
    [31m[1m>[22m[39m[90m 100 |[39m     testHorses [33m=[39m [36mawait[39m [33mPromise[39m[33m.[39mall([
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 101 |[39m       prisma[33m.[39mhorse[33m.[39mcreate({
     [90m 102 |[39m         data[33m:[39m {
     [90m 103 |[39m           name[33m:[39m [32m'TestDashboard Horse 1'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
          at async Promise.all (index 0)
      at Object.<anonymous> (tests/integration/dashboardRoutes.test.mjs:100:18)

  ● �� INTEGRATION: Dashboard API - Real Database Integration › GET /api/user/dashboard/:userId › should handle user with horses but no activity gracefully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestDashboard Horse 1",
        age: 5,
        sex: "Mare",
        breedId: 31435,
        ~~~~~~~
        user: {
          connect: {
            id: "30e917c4-4ab8-4c12-96c9-5a6325c7e8e8"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Good",
        totalEarnings: 1500,
        disciplineScores: {
          Dressage: 15
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m  98 |[39m
     [90m  99 |[39m     [90m// Create test horses with real data[39m
    [31m[1m>[22m[39m[90m 100 |[39m     testHorses [33m=[39m [36mawait[39m [33mPromise[39m[33m.[39mall([
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 101 |[39m       prisma[33m.[39mhorse[33m.[39mcreate({
     [90m 102 |[39m         data[33m:[39m {
     [90m 103 |[39m           name[33m:[39m [32m'TestDashboard Horse 1'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
          at async Promise.all (index 0)
      at Object.<anonymous> (tests/integration/dashboardRoutes.test.mjs:100:18)

FAIL tests/groomBondingIntegration.test.mjs
  ● Groom Bonding System Integration › New Grooming Tasks for Horses 3+ Years Old › should successfully process brushing interaction

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 146642,
        groomId: 73266,
        isActive: true,
        user: {
        ~~~~
          connect: {
            id: "user-bonding-1769625718780_haeuk"
          }
        },
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 132 |[39m
     [90m 133 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 134 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 135 |[39m       data[33m:[39m {
     [90m 136 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 137 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBondingIntegration.test.mjs:134:22)

  ● Groom Bonding System Integration › New Grooming Tasks for Horses 3+ Years Old › should successfully process hand-walking interaction

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 146643,
        groomId: 73267,
        isActive: true,
        user: {
        ~~~~
          connect: {
            id: "user-bonding-1769625718873_6al68"
          }
        },
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 132 |[39m
     [90m 133 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 134 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 135 |[39m       data[33m:[39m {
     [90m 136 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 137 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBondingIntegration.test.mjs:134:22)

  ● Groom Bonding System Integration › New Grooming Tasks for Horses 3+ Years Old › should successfully process stall_care interaction

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 146644,
        groomId: 73268,
        isActive: true,
        user: {
        ~~~~
          connect: {
            id: "user-bonding-1769625718897_ult0u"
          }
        },
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 132 |[39m
     [90m 133 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 134 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 135 |[39m       data[33m:[39m {
     [90m 136 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 137 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBondingIntegration.test.mjs:134:22)

  ● Groom Bonding System Integration › Age Restrictions › should reject new grooming tasks for horses under 3 years old

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 146645,
        groomId: 73269,
        isActive: true,
        user: {
        ~~~~
          connect: {
            id: "user-bonding-1769625718916_5luvm"
          }
        },
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 132 |[39m
     [90m 133 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 134 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 135 |[39m       data[33m:[39m {
     [90m 136 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 137 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBondingIntegration.test.mjs:134:22)

  ● Groom Bonding System Integration › Bond Score Updates › should update horse bond score after grooming

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 146646,
        groomId: 73270,
        isActive: true,
        user: {
        ~~~~
          connect: {
            id: "user-bonding-1769625718933_f62x5"
          }
        },
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 132 |[39m
     [90m 133 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 134 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 135 |[39m       data[33m:[39m {
     [90m 136 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 137 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBondingIntegration.test.mjs:134:22)

  ● Groom Bonding System Integration › Bond Score Updates › should grant burnout immunity after 7 consecutive days

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 146647,
        groomId: 73271,
        isActive: true,
        user: {
        ~~~~
          connect: {
            id: "user-bonding-1769625718953_1lfme"
          }
        },
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 132 |[39m
     [90m 133 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 134 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 135 |[39m       data[33m:[39m {
     [90m 136 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 137 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBondingIntegration.test.mjs:134:22)

  ● Groom Bonding System Integration › Daily Interaction Limits › should enforce one grooming session per horse per day

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 146648,
        groomId: 73272,
        isActive: true,
        user: {
        ~~~~
          connect: {
            id: "user-bonding-1769625718972_9nk79"
          }
        },
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 132 |[39m
     [90m 133 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 134 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 135 |[39m       data[33m:[39m {
     [90m 136 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 137 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBondingIntegration.test.mjs:134:22)

FAIL tests/integration/trainingProgression.integration.test.mjs
  ● ��️ INTEGRATION: Complete Training Progression Workflow › �� STEP 2: Horse Creation & Age Validation › should create young horse (under training age)

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Training Integration Young Horse",
        age: 2,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "aaecf0e2-4aeb-43da-b6e7-66c9068a56ba"
          }
        },
        sex: "Colt",
        dateOfBirth: new Date("2024-01-28T18:42:00.593Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [
            "energetic",
            "curious"
          ],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 129 |[39m       twoYearsAgo[33m.[39msetFullYear(twoYearsAgo[33m.[39mgetFullYear() [33m-[39m [35m2[39m)[33m;[39m
     [90m 130 |[39m
    [31m[1m>[22m[39m[90m 131 |[39m       youngHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                    [31m[1m^[22m[39m
     [90m 132 |[39m         data[33m:[39m {
     [90m 133 |[39m           name[33m:[39m [32m'Training Integration Young Horse'[39m[33m,[39m
     [90m 134 |[39m           age[33m:[39m [35m2[39m[33m,[39m [90m// Too young for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/trainingProgression.integration.test.mjs:131:20)

  ● ��️ INTEGRATION: Complete Training Progression Workflow › �� STEP 2: Horse Creation & Age Validation › should create mature horse (training eligible)

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Training Integration Mature Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "aaecf0e2-4aeb-43da-b6e7-66c9068a56ba"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:00.602Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [
            "athletic",
            "focused",
            "brave",
            "resilient"
          ],
          negative: [],
          hidden: [
            "strong_heart"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 159 |[39m       fourYearsAgo[33m.[39msetFullYear(fourYearsAgo[33m.[39mgetFullYear() [33m-[39m [35m4[39m)[33m;[39m
     [90m 160 |[39m
    [31m[1m>[22m[39m[90m 161 |[39m       matureHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                     [31m[1m^[22m[39m
     [90m 162 |[39m         data[33m:[39m {
     [90m 163 |[39m           name[33m:[39m [32m'Training Integration Mature Horse'[39m[33m,[39m
     [90m 164 |[39m           age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/trainingProgression.integration.test.mjs:161:21)

  ● ��️ INTEGRATION: Complete Training Progression Workflow › �� STEP 3: Age Restriction Enforcement › should block training for young horse (under 3 years)

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 190 |[39m         [33m.[39m[36mset[39m([32m'x-test-skip-csrf'[39m[33m,[39m [32m'true'[39m)
     [90m 191 |[39m         [33m.[39msend({
    [31m[1m>[22m[39m[90m 192 |[39m           horseId[33m:[39m youngHorse[33m.[39mid[33m,[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 193 |[39m           discipline[33m:[39m [32m'Racing'[39m[33m,[39m
     [90m 194 |[39m         })
     [90m 195 |[39m         [33m.[39mexpect([35m400[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/integration/trainingProgression.integration.test.mjs:192:31)

  ● ��️ INTEGRATION: Complete Training Progression Workflow › ��️ STEP 4: First Training Session › should successfully train mature horse for first time

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 225 |[39m         [33m.[39m[36mset[39m([32m'x-test-skip-csrf'[39m[33m,[39m [32m'true'[39m)
     [90m 226 |[39m         [33m.[39msend({
    [31m[1m>[22m[39m[90m 227 |[39m           horseId[33m:[39m matureHorse[33m.[39mid[33m,[39m
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 228 |[39m           discipline[33m:[39m [32m'Racing'[39m[33m,[39m
     [90m 229 |[39m         })
     [90m 230 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/integration/trainingProgression.integration.test.mjs:227:32)

  ● ��️ INTEGRATION: Complete Training Progression Workflow › ⏰ STEP 5: Training Cooldown Management › should enforce 7-day cooldown period

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 273 |[39m         [33m.[39m[36mset[39m([32m'x-test-skip-csrf'[39m[33m,[39m [32m'true'[39m)
     [90m 274 |[39m         [33m.[39msend({
    [31m[1m>[22m[39m[90m 275 |[39m           horseId[33m:[39m matureHorse[33m.[39mid[33m,[39m
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 276 |[39m           discipline[33m:[39m [32m'Dressage'[39m[33m,[39m [90m// Different discipline, but still in cooldown[39m
     [90m 277 |[39m         })
     [90m 278 |[39m         [33m.[39mexpect([35m400[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/integration/trainingProgression.integration.test.mjs:275:32)

  ● ��️ INTEGRATION: Complete Training Progression Workflow › ⏰ STEP 5: Training Cooldown Management › should allow training after cooldown expires (using test data manipulation)

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 303 |[39m       [90m// STEP 1: Get the existing training log from the first training session[39m
     [90m 304 |[39m       [36mconst[39m existingTrainingLog [33m=[39m [36mawait[39m prisma[33m.[39mtrainingLog[33m.[39mfindFirst({
    [31m[1m>[22m[39m[90m 305 |[39m         where[33m:[39m { horseId[33m:[39m matureHorse[33m.[39mid }[33m,[39m
     [90m     |[39m                                       [31m[1m^[22m[39m
     [90m 306 |[39m         orderBy[33m:[39m { trainedAt[33m:[39m [32m'desc'[39m }[33m,[39m
     [90m 307 |[39m       })[33m;[39m
     [90m 308 |[39m[0m

      at Object.<anonymous> (tests/integration/trainingProgression.integration.test.mjs:305:39)

  ● ��️ INTEGRATION: Complete Training Progression Workflow › �� STEP 6: User Progression Tracking › should track user XP and level progression from training

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

    [0m [90m 379 |[39m
     [90m 380 |[39m       [90m// VERIFY: User has gained significant XP from multiple training sessions[39m
    [31m[1m>[22m[39m[90m 381 |[39m       expect(finalUser[33m.[39mxp)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 382 |[39m
     [90m 383 |[39m       [90m// VERIFY: Multiple XP events logged[39m
     [90m 384 |[39m       [36mconst[39m allXpEvents [33m=[39m [36mawait[39m prisma[33m.[39mxpEvent[33m.[39mfindMany({[0m

      at Object.<anonymous> (tests/integration/trainingProgression.integration.test.mjs:381:28)

  ● ��️ INTEGRATION: Complete Training Progression Workflow › �� STEP 7: Competition Readiness Validation › should validate horse is ready for competition

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 400 |[39m     it([32m'should validate horse is ready for competition'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 401 |[39m       [36mconst[39m competitionReadyHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mfindUnique({
    [31m[1m>[22m[39m[90m 402 |[39m         where[33m:[39m { id[33m:[39m matureHorse[33m.[39mid }[33m,[39m
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 403 |[39m         include[33m:[39m {
     [90m 404 |[39m           trainingLogs[33m:[39m [36mtrue[39m[33m,[39m
     [90m 405 |[39m         }[33m,[39m[0m

      at Object.<anonymous> (tests/integration/trainingProgression.integration.test.mjs:402:34)

  ● ��️ INTEGRATION: Complete Training Progression Workflow › �� STEP 8: End-to-End Workflow Validation › should validate complete training progression integrity

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 429 |[39m       [90m// VERIFY: Complete training progression from young to competition-ready[39m
     [90m 430 |[39m       [36mconst[39m youngHorseCheck [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mfindUnique({
    [31m[1m>[22m[39m[90m 431 |[39m         where[33m:[39m { id[33m:[39m youngHorse[33m.[39mid }[33m,[39m
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 432 |[39m         include[33m:[39m { trainingLogs[33m:[39m [36mtrue[39m }[33m,[39m
     [90m 433 |[39m       })[33m;[39m
     [90m 434 |[39m[0m

      at Object.<anonymous> (tests/integration/trainingProgression.integration.test.mjs:431:33)

  ● ��️ INTEGRATION: Complete Training Progression Workflow › �� STEP 8: End-to-End Workflow Validation › should validate all business rules were enforced throughout progression

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 459 |[39m       [90m// Age restrictions enforced[39m
     [90m 460 |[39m       [36mconst[39m youngHorseTrainingLogs [33m=[39m [36mawait[39m prisma[33m.[39mtrainingLog[33m.[39mfindMany({
    [31m[1m>[22m[39m[90m 461 |[39m         where[33m:[39m { horseId[33m:[39m youngHorse[33m.[39mid }[33m,[39m
     [90m     |[39m                                      [31m[1m^[22m[39m
     [90m 462 |[39m       })[33m;[39m
     [90m 463 |[39m       expect(youngHorseTrainingLogs)[33m.[39mtoHaveLength([35m0[39m)[33m;[39m
     [90m 464 |[39m[0m

      at Object.<anonymous> (tests/integration/trainingProgression.integration.test.mjs:461:38)

FAIL tests/foalEnrichmentIntegration.test.mjs
  ● �� INTEGRATION: Foal Enrichment API Integration - Complete API Workflow Validation › POST /api/foals/:foalId/enrichment › should complete enrichment activity successfully

    expected 200 "OK", got 401 "Unauthorized"

    [0m [90m 172 |[39m           activity[33m:[39m [32m'Trailer Exposure'[39m[33m,[39m
     [90m 173 |[39m         })
    [31m[1m>[22m[39m[90m 174 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 175 |[39m
     [90m 176 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 177 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoContain([32m'Trailer Exposure'[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/foalEnrichmentIntegration.test.mjs:174:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ● �� INTEGRATION: Foal Enrichment API Integration - Complete API Workflow Validation › POST /api/foals/:foalId/enrichment › should update horse bond_score and stress_level in database

    expected 200 "OK", got 401 "Unauthorized"

    [0m [90m 234 |[39m           activity[33m:[39m [32m'Halter Introduction'[39m[33m,[39m
     [90m 235 |[39m         })
    [31m[1m>[22m[39m[90m 236 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 237 |[39m
     [90m 238 |[39m       [90m// Verify horse was updated in database[39m
     [90m 239 |[39m       expect(mockPrisma[33m.[39mhorse[33m.[39mupdate)[33m.[39mtoHaveBeenCalledWith({[0m

      at Object.<anonymous> (tests/foalEnrichmentIntegration.test.mjs:236:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ● �� INTEGRATION: Foal Enrichment API Integration - Complete API Workflow Validation › POST /api/foals/:foalId/enrichment › should validate request parameters

    expected 400 "Bad Request", got 401 "Unauthorized"

    [0m [90m 259 |[39m           activity[33m:[39m [32m'Trailer Exposure'[39m[33m,[39m
     [90m 260 |[39m         })
    [31m[1m>[22m[39m[90m 261 |[39m         [33m.[39mexpect([35m400[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 262 |[39m
     [90m 263 |[39m       [90m// Missing activity[39m
     [90m 264 |[39m       [36mawait[39m request(app)[0m

      at Object.<anonymous> (tests/foalEnrichmentIntegration.test.mjs:261:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ● �� INTEGRATION: Foal Enrichment API Integration - Complete API Workflow Validation › POST /api/foals/:foalId/enrichment › should return 404 for non-existent foal

    expected 404 "Not Found", got 401 "Unauthorized"

    [0m [90m 314 |[39m           activity[33m:[39m [32m'Trailer Exposure'[39m[33m,[39m
     [90m 315 |[39m         })
    [31m[1m>[22m[39m[90m 316 |[39m         [33m.[39mexpect([35m404[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 317 |[39m
     [90m 318 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m 319 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoContain([32m'not found'[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/foalEnrichmentIntegration.test.mjs:316:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ● �� INTEGRATION: Foal Enrichment API Integration - Complete API Workflow Validation › POST /api/foals/:foalId/enrichment › should return 400 for inappropriate activity for day

    expected 400 "Bad Request", got 401 "Unauthorized"

    [0m [90m 329 |[39m           activity[33m:[39m [32m'Trailer Exposure'[39m[33m,[39m [90m// This is a day 3 activity[39m
     [90m 330 |[39m         })
    [31m[1m>[22m[39m[90m 331 |[39m         [33m.[39mexpect([35m400[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 332 |[39m
     [90m 333 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m 334 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoContain([32m'not appropriate for day 0'[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/foalEnrichmentIntegration.test.mjs:331:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ● �� INTEGRATION: Foal Enrichment API Integration - Complete API Workflow Validation › POST /api/foals/:foalId/enrichment › should accept different activity name formats

    expected 200 "OK", got 401 "Unauthorized"

    [0m [90m 345 |[39m           activity[33m:[39m [32m'leading_practice'[39m[33m,[39m
     [90m 346 |[39m         })
    [31m[1m>[22m[39m[90m 347 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 348 |[39m
     [90m 349 |[39m       [90m// Test exact name[39m
     [90m 350 |[39m       [36mawait[39m request(app)[0m

      at Object.<anonymous> (tests/foalEnrichmentIntegration.test.mjs:347:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ● �� INTEGRATION: Foal Enrichment API Integration - Complete API Workflow Validation › POST /api/foals/:foalId/enrichment › should handle all day 3 activities

    expected 200 "OK", got 401 "Unauthorized"

    [0m [90m 382 |[39m             activity[33m,[39m
     [90m 383 |[39m           })
    [31m[1m>[22m[39m[90m 384 |[39m           [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m            [31m[1m^[22m[39m
     [90m 385 |[39m
     [90m 386 |[39m         expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 387 |[39m         expect(response[33m.[39mbody[33m.[39mdata[33m.[39mactivity[33m.[39mname)[33m.[39mtoBe(activity)[33m;[39m[0m

      at Object.<anonymous> (tests/foalEnrichmentIntegration.test.mjs:384:12)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ● �� INTEGRATION: Foal Enrichment API Integration - Complete API Workflow Validation › POST /api/foals/:foalId/enrichment › should create training history records for each activity

    expected 200 "OK", got 401 "Unauthorized"

    [0m [90m 414 |[39m           activity[33m:[39m [32m'Feeding Assistance'[39m[33m,[39m
     [90m 415 |[39m         })
    [31m[1m>[22m[39m[90m 416 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 417 |[39m
     [90m 418 |[39m       [90m// Verify training record was created[39m
     [90m 419 |[39m       expect(mockPrisma[33m.[39mfoalTrainingHistory[33m.[39mcreate)[33m.[39mtoHaveBeenCalledWith({[0m

      at Object.<anonymous> (tests/foalEnrichmentIntegration.test.mjs:416:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ● �� INTEGRATION: Foal Enrichment API Integration - Complete API Workflow Validation › POST /api/foals/:foalId/enrichment › should handle edge cases with bond and stress levels

    expected 200 "OK", got 401 "Unauthorized"

    [0m [90m 461 |[39m           activity[33m:[39m [32m'Trailer Exposure'[39m[33m,[39m
     [90m 462 |[39m         })
    [31m[1m>[22m[39m[90m 463 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 464 |[39m
     [90m 465 |[39m       [90m// Values should be capped at bounds[39m
     [90m 466 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mupdatedLevels[33m.[39mbondScore)[33m.[39mtoBeLessThanOrEqual([35m100[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/foalEnrichmentIntegration.test.mjs:463:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

FAIL tests/groomPersonalityTraitBonus.test.mjs
  ● Groom Personality Trait Bonus System - REAL SYSTEM TESTS › Personality Compatibility Matrix › should correctly identify compatible personality-temperament pairs

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625723459",
        user: {
          connect: {
            id: "31120b09-542b-4ef8-9b8e-710fea73485e"
          }
        },
        dateOfBirth: new Date("2026-01-28T18:42:03.459Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31436,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ● Groom Personality Trait Bonus System - REAL SYSTEM TESTS › Personality Compatibility Matrix › should correctly identify incompatible personality-temperament pairs

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625723482",
        user: {
          connect: {
            id: "026e67af-c5f3-468d-b6a5-86dcc4755c7f"
          }
        },
        dateOfBirth: new Date("2026-01-28T18:42:03.482Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31437,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ● Groom Personality Trait Bonus System - REAL SYSTEM TESTS › Personality Compatibility Matrix › should handle regular matches without high bond

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625723494",
        user: {
          connect: {
            id: "f9720238-b3c1-4472-bb76-9ffba80b0d76"
          }
        },
        dateOfBirth: new Date("2026-01-28T18:42:03.494Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31438,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ● Groom Personality Trait Bonus System - REAL SYSTEM TESTS › Personality Modifier Engine › should apply personality effects to milestone evaluation

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625723504",
        user: {
          connect: {
            id: "ec321170-eeaa-4755-b76f-ba3ed574bae2"
          }
        },
        dateOfBirth: new Date("2026-01-28T18:42:03.504Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31439,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ● Groom Personality Trait Bonus System - REAL SYSTEM TESTS › Personality Modifier Engine › should handle missing personality or temperament gracefully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625723514",
        user: {
          connect: {
            id: "45be5bf5-b141-4872-b599-2fd72805b02f"
          }
        },
        dateOfBirth: new Date("2026-01-28T18:42:03.514Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31440,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ● Groom Personality Trait Bonus System - REAL SYSTEM TESTS › Enhanced Milestone Evaluation Integration › should integrate personality effects into milestone evaluation

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625723523",
        user: {
          connect: {
            id: "fa1c3439-e974-4482-adc8-54213352545b"
          }
        },
        dateOfBirth: new Date("2026-01-28T18:42:03.523Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31441,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ● Groom Personality Trait Bonus System - REAL SYSTEM TESTS › Enhanced Milestone Evaluation Integration › should handle milestone evaluation without groom assignment

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625723532",
        user: {
          connect: {
            id: "20ce3cca-776b-4d10-91f0-c1c9a0f3cc10"
          }
        },
        dateOfBirth: new Date("2026-01-28T18:42:03.532Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31442,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ● Groom Personality Trait Bonus System - REAL SYSTEM TESTS › Compatible Grooms Utility › should return all compatible grooms for a temperament

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625723541",
        user: {
          connect: {
            id: "71cd7e3f-e462-4ee9-b14d-15e2fcb7b518"
          }
        },
        dateOfBirth: new Date("2026-01-28T18:42:03.541Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31443,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ● Groom Personality Trait Bonus System - REAL SYSTEM TESTS › Compatible Grooms Utility › should return empty array for unknown temperament

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625723550",
        user: {
          connect: {
            id: "f22f19d7-b68d-4f88-b687-fdb55d8e1c41"
          }
        },
        dateOfBirth: new Date("2026-01-28T18:42:03.550Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31444,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ● Groom Personality Trait Bonus System - REAL SYSTEM TESTS › API Endpoints - REAL HTTP TESTS › GET /api/grooms/:id/profile › should return groom profile with personality information

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625723562",
        user: {
          connect: {
            id: "1c48eaee-9c64-43de-969d-47e8d929850c"
          }
        },
        dateOfBirth: new Date("2026-01-28T18:42:03.562Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31445,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ● Groom Personality Trait Bonus System - REAL SYSTEM TESTS › API Endpoints - REAL HTTP TESTS › GET /api/grooms/:id/profile › should return 404 for non-existent groom

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625723571",
        user: {
          connect: {
            id: "967a0f20-36c4-4a7c-8b5d-f620452314a7"
          }
        },
        dateOfBirth: new Date("2026-01-28T18:42:03.571Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31446,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ● Groom Personality Trait Bonus System - REAL SYSTEM TESTS › API Endpoints - REAL HTTP TESTS › GET /api/grooms/:id/profile › should return 400 for invalid groom ID

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625723579",
        user: {
          connect: {
            id: "794ce6c5-d1db-4b70-87cb-827156d57099"
          }
        },
        dateOfBirth: new Date("2026-01-28T18:42:03.579Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31447,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ● Groom Personality Trait Bonus System - REAL SYSTEM TESTS › API Endpoints - REAL HTTP TESTS › GET /api/horses/:id/personality-impact › should return personality compatibility for horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625723588",
        user: {
          connect: {
            id: "0687c7c6-6ca4-4327-a8c6-e144e1356a7a"
          }
        },
        dateOfBirth: new Date("2026-01-28T18:42:03.588Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31448,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ● Groom Personality Trait Bonus System - REAL SYSTEM TESTS › API Endpoints - REAL HTTP TESTS › GET /api/horses/:id/personality-impact › should return 404 for non-existent horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625723596",
        user: {
          connect: {
            id: "9c76e3f0-0603-4b69-9046-699ac3f9404a"
          }
        },
        dateOfBirth: new Date("2026-01-28T18:42:03.596Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31449,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ● Groom Personality Trait Bonus System - REAL SYSTEM TESTS › API Endpoints - REAL HTTP TESTS › GET /api/horses/:id/personality-impact › should return 400 for horse without temperament

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625723605",
        user: {
          connect: {
            id: "dce407fa-c856-46c1-9403-ef828d66c495"
          }
        },
        dateOfBirth: new Date("2026-01-28T18:42:03.605Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31450,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ● Groom Personality Trait Bonus System - REAL SYSTEM TESTS › API Endpoints - REAL HTTP TESTS › POST /api/milestones/evaluate-milestone (with personality impact) › should evaluate milestone with personality effects

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625723613",
        user: {
          connect: {
            id: "7a7feee8-85e0-46b1-a57b-09901078fd43"
          }
        },
        dateOfBirth: new Date("2026-01-28T18:42:03.613Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31451,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

FAIL tests/legacyScoreTraitIntegration.test.mjs
  ● Legacy Score Trait Integration System › Trait Score Calculation › should calculate trait score based on count, diversity, and rarity

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625724840",
        sex: "stallion",
        dateOfBirth: new Date("2022-01-29T18:42:04.840Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "cecf240f-d923-4d25-b8d7-fe38b311f324"
          }
        },
        breedId: 31452,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
        speed: 75,
        stamina: 80,
        agility: 70,
        balance: 85,
        precision: 90,
        intelligence: 88,
        boldness: 65,
        flexibility: 72,
        obedience: 95,
        focus: 82,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 67 |[39m
     [90m 68 |[39m     [90m// Create test horse (4 years old to test legacy score calculation)[39m
    [31m[1m>[22m[39m[90m 69 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 70 |[39m       data[33m:[39m {
     [90m 71 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 72 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/legacyScoreTraitIntegration.test.mjs:69:17)

  ● Legacy Score Trait Integration System › Trait Score Calculation › should apply negative trait penalties

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625724873",
        sex: "stallion",
        dateOfBirth: new Date("2022-01-29T18:42:04.873Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "9b4e3d94-f579-4c03-900e-f73b3fb16908"
          }
        },
        breedId: 31453,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
        speed: 75,
        stamina: 80,
        agility: 70,
        balance: 85,
        precision: 90,
        intelligence: 88,
        boldness: 65,
        flexibility: 72,
        obedience: 95,
        focus: 82,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 67 |[39m
     [90m 68 |[39m     [90m// Create test horse (4 years old to test legacy score calculation)[39m
    [31m[1m>[22m[39m[90m 69 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 70 |[39m       data[33m:[39m {
     [90m 71 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 72 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/legacyScoreTraitIntegration.test.mjs:69:17)

  ● Legacy Score Trait Integration System › Trait Score Calculation › should only count traits gained before age 4

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625724887",
        sex: "stallion",
        dateOfBirth: new Date("2022-01-29T18:42:04.887Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "b1156305-29f3-4b45-9159-7445dc4842ef"
          }
        },
        breedId: 31454,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
        speed: 75,
        stamina: 80,
        agility: 70,
        balance: 85,
        precision: 90,
        intelligence: 88,
        boldness: 65,
        flexibility: 72,
        obedience: 95,
        focus: 82,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 67 |[39m
     [90m 68 |[39m     [90m// Create test horse (4 years old to test legacy score calculation)[39m
    [31m[1m>[22m[39m[90m 69 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 70 |[39m       data[33m:[39m {
     [90m 71 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 72 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/legacyScoreTraitIntegration.test.mjs:69:17)

  ● Legacy Score Trait Integration System › Trait Score Calculation › should calculate groom care consistency from milestone logs

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625724901",
        sex: "stallion",
        dateOfBirth: new Date("2022-01-29T18:42:04.901Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "54539f25-70e0-4155-92db-d96aa666bec2"
          }
        },
        breedId: 31455,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
        speed: 75,
        stamina: 80,
        agility: 70,
        balance: 85,
        precision: 90,
        intelligence: 88,
        boldness: 65,
        flexibility: 72,
        obedience: 95,
        focus: 82,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 67 |[39m
     [90m 68 |[39m     [90m// Create test horse (4 years old to test legacy score calculation)[39m
    [31m[1m>[22m[39m[90m 69 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 70 |[39m       data[33m:[39m {
     [90m 71 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 72 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/legacyScoreTraitIntegration.test.mjs:69:17)

  ● Legacy Score Trait Integration System › Legacy Score Integration › should integrate trait score into overall legacy score

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625724915",
        sex: "stallion",
        dateOfBirth: new Date("2022-01-29T18:42:04.915Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "5807c28a-7ce6-45bb-882a-46d53f3f47e8"
          }
        },
        breedId: 31456,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
        speed: 75,
        stamina: 80,
        agility: 70,
        balance: 85,
        precision: 90,
        intelligence: 88,
        boldness: 65,
        flexibility: 72,
        obedience: 95,
        focus: 82,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 67 |[39m
     [90m 68 |[39m     [90m// Create test horse (4 years old to test legacy score calculation)[39m
    [31m[1m>[22m[39m[90m 69 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 70 |[39m       data[33m:[39m {
     [90m 71 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 72 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/legacyScoreTraitIntegration.test.mjs:69:17)

  ● Legacy Score Trait Integration System › Legacy Score Integration › should calculate legacy score without traits

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625724931",
        sex: "stallion",
        dateOfBirth: new Date("2022-01-29T18:42:04.931Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "d6d475f8-8106-4a1e-963e-7a595aaa2e1e"
          }
        },
        breedId: 31457,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
        speed: 75,
        stamina: 80,
        agility: 70,
        balance: 85,
        precision: 90,
        intelligence: 88,
        boldness: 65,
        flexibility: 72,
        obedience: 95,
        focus: 82,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 67 |[39m
     [90m 68 |[39m     [90m// Create test horse (4 years old to test legacy score calculation)[39m
    [31m[1m>[22m[39m[90m 69 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 70 |[39m       data[33m:[39m {
     [90m 71 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 72 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/legacyScoreTraitIntegration.test.mjs:69:17)

  ● Legacy Score Trait Integration System › API Endpoints › should get horse legacy score via API

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625724946",
        sex: "stallion",
        dateOfBirth: new Date("2022-01-29T18:42:04.946Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "97c191db-2a81-4528-900f-844e1d687a2a"
          }
        },
        breedId: 31458,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
        speed: 75,
        stamina: 80,
        agility: 70,
        balance: 85,
        precision: 90,
        intelligence: 88,
        boldness: 65,
        flexibility: 72,
        obedience: 95,
        focus: 82,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 67 |[39m
     [90m 68 |[39m     [90m// Create test horse (4 years old to test legacy score calculation)[39m
    [31m[1m>[22m[39m[90m 69 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 70 |[39m       data[33m:[39m {
     [90m 71 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 72 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/legacyScoreTraitIntegration.test.mjs:69:17)

  ● Legacy Score Trait Integration System › API Endpoints › should require authentication for legacy score endpoint

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625724957",
        sex: "stallion",
        dateOfBirth: new Date("2022-01-29T18:42:04.957Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "633924f0-b2d5-439e-b1f7-dbd23473a57d"
          }
        },
        breedId: 31459,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
        speed: 75,
        stamina: 80,
        agility: 70,
        balance: 85,
        precision: 90,
        intelligence: 88,
        boldness: 65,
        flexibility: 72,
        obedience: 95,
        focus: 82,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 67 |[39m
     [90m 68 |[39m     [90m// Create test horse (4 years old to test legacy score calculation)[39m
    [31m[1m>[22m[39m[90m 69 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 70 |[39m       data[33m:[39m {
     [90m 71 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 72 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/legacyScoreTraitIntegration.test.mjs:69:17)

  ● Legacy Score Trait Integration System › API Endpoints › should return 404 for non-existent horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625724969",
        sex: "stallion",
        dateOfBirth: new Date("2022-01-29T18:42:04.969Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "c548752c-ede4-4854-8e60-e49bb757558d"
          }
        },
        breedId: 31460,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
        speed: 75,
        stamina: 80,
        agility: 70,
        balance: 85,
        precision: 90,
        intelligence: 88,
        boldness: 65,
        flexibility: 72,
        obedience: 95,
        focus: 82,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 67 |[39m
     [90m 68 |[39m     [90m// Create test horse (4 years old to test legacy score calculation)[39m
    [31m[1m>[22m[39m[90m 69 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 70 |[39m       data[33m:[39m {
     [90m 71 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 72 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/legacyScoreTraitIntegration.test.mjs:69:17)

FAIL tests/foalTaskLoggingIntegration.test.mjs
  ● Foal Task Logging Integration › Task Log JSON Updates › should initialize task log with first enrichment task

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 146649,
        groomId: 73282,
        user: {
        ~~~~
          connect: {
            id: "test-user-task-logging-1"
          }
        },
        isActive: true,
        priority: 1,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 150 |[39m
     [90m 151 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 152 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 153 |[39m       data[33m:[39m {
     [90m 154 |[39m         foalId[33m:[39m testFoal[33m.[39mid[33m,[39m
     [90m 155 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/foalTaskLoggingIntegration.test.mjs:152:22)

  ● Foal Task Logging Integration › Task Log JSON Updates › should increment existing task count in task log

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 146650,
        groomId: 73283,
        user: {
        ~~~~
          connect: {
            id: "test-user-task-logging-2"
          }
        },
        isActive: true,
        priority: 1,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 150 |[39m
     [90m 151 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 152 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 153 |[39m       data[33m:[39m {
     [90m 154 |[39m         foalId[33m:[39m testFoal[33m.[39mid[33m,[39m
     [90m 155 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/foalTaskLoggingIntegration.test.mjs:152:22)

  ● Foal Task Logging Integration › Task Log JSON Updates › should add new task to existing task log

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 146651,
        groomId: 73284,
        user: {
        ~~~~
          connect: {
            id: "test-user-task-logging-3"
          }
        },
        isActive: true,
        priority: 1,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 150 |[39m
     [90m 151 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 152 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 153 |[39m       data[33m:[39m {
     [90m 154 |[39m         foalId[33m:[39m testFoal[33m.[39mid[33m,[39m
     [90m 155 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/foalTaskLoggingIntegration.test.mjs:152:22)

  ● Foal Task Logging Integration › Task Log JSON Updates › should handle multiple task types across different foals

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 146652,
        groomId: 73285,
        user: {
        ~~~~
          connect: {
            id: "test-user-task-logging-4"
          }
        },
        isActive: true,
        priority: 1,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 150 |[39m
     [90m 151 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 152 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 153 |[39m       data[33m:[39m {
     [90m 154 |[39m         foalId[33m:[39m testFoal[33m.[39mid[33m,[39m
     [90m 155 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/foalTaskLoggingIntegration.test.mjs:152:22)

  ● Foal Task Logging Integration › Streak Tracking Integration › should update lastGroomed timestamp on each interaction

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 146653,
        groomId: 73286,
        user: {
        ~~~~
          connect: {
            id: "test-user-task-logging-5"
          }
        },
        isActive: true,
        priority: 1,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 150 |[39m
     [90m 151 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 152 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 153 |[39m       data[33m:[39m {
     [90m 154 |[39m         foalId[33m:[39m testFoal[33m.[39mid[33m,[39m
     [90m 155 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/foalTaskLoggingIntegration.test.mjs:152:22)

  ● Foal Task Logging Integration › Streak Tracking Integration › should enforce daily interaction limits correctly

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 146654,
        groomId: 73287,
        user: {
        ~~~~
          connect: {
            id: "test-user-task-logging-6"
          }
        },
        isActive: true,
        priority: 1,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 150 |[39m
     [90m 151 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 152 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 153 |[39m       data[33m:[39m {
     [90m 154 |[39m         foalId[33m:[39m testFoal[33m.[39mid[33m,[39m
     [90m 155 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/foalTaskLoggingIntegration.test.mjs:152:22)

  ● Foal Task Logging Integration › Age-Based Task Eligibility Enforcement › should reject enrichment tasks for horses too old

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 146655,
        groomId: 73288,
        user: {
        ~~~~
          connect: {
            id: "test-user-task-logging-7"
          }
        },
        isActive: true,
        priority: 1,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 150 |[39m
     [90m 151 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 152 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 153 |[39m       data[33m:[39m {
     [90m 154 |[39m         foalId[33m:[39m testFoal[33m.[39mid[33m,[39m
     [90m 155 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/foalTaskLoggingIntegration.test.mjs:152:22)

  ● Foal Task Logging Integration › Age-Based Task Eligibility Enforcement › should reject grooming tasks for horses too young

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 146656,
        groomId: 73289,
        user: {
        ~~~~
          connect: {
            id: "test-user-task-logging-8"
          }
        },
        isActive: true,
        priority: 1,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 150 |[39m
     [90m 151 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 152 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 153 |[39m       data[33m:[39m {
     [90m 154 |[39m         foalId[33m:[39m testFoal[33m.[39mid[33m,[39m
     [90m 155 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/foalTaskLoggingIntegration.test.mjs:152:22)

FAIL tests/integration/groomSalarySystem.test.mjs
  ● Groom Salary System › Salary Calculation › should calculate correct weekly salary for expert groom with specialty

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73290,
        foalId: 146657,
        user: {
        ~~~~
          connect: {
            id: "354f4955-62f8-4a44-b5ff-94491c3ec4d1"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ● Groom Salary System › Salary Calculation › should calculate correct salary for novice groom

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73291,
        foalId: 146658,
        user: {
        ~~~~
          connect: {
            id: "55b5d9d6-68b7-41d4-98de-939a0b7ff0e1"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ● Groom Salary System › Salary Calculation › should calculate user total salary cost

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73292,
        foalId: 146659,
        user: {
        ~~~~
          connect: {
            id: "13f97bf9-b150-4cb8-abe6-b6b1f7fd0987"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ● Groom Salary System › API Endpoints › should get user salary cost

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73293,
        foalId: 146660,
        user: {
        ~~~~
          connect: {
            id: "66676a1c-e280-4e14-bca5-13245572418b"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ● Groom Salary System › API Endpoints › should get salary summary

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73294,
        foalId: 146661,
        user: {
        ~~~~
          connect: {
            id: "83c80d8c-1ee5-49e1-89b8-37be783b3972"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ● Groom Salary System › API Endpoints › should get groom salary

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73295,
        foalId: 146662,
        user: {
        ~~~~
          connect: {
            id: "7f255b4b-9c19-40b1-a6b8-6ecca22daa06"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ● Groom Salary System › API Endpoints › should get salary payment history

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73296,
        foalId: 146663,
        user: {
        ~~~~
          connect: {
            id: "201cbbcd-bfdc-413a-9302-dc76ec7e49be"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ● Groom Salary System › API Endpoints › should get cron job status

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73297,
        foalId: 146664,
        user: {
        ~~~~
          connect: {
            id: "cc5f9688-4dbc-40bc-827f-ec30411cffc2"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ● Groom Salary System › API Endpoints › should validate groom ownership

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73298,
        foalId: 146665,
        user: {
        ~~~~
          connect: {
            id: "157ef307-56ff-4ce6-b322-e2cadd52454e"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ● Groom Salary System › Salary Processing › should process weekly salaries successfully

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73299,
        foalId: 146666,
        user: {
        ~~~~
          connect: {
            id: "aeee2474-3411-4410-8204-418cc99371d0"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ● Groom Salary System › Salary Processing › should handle insufficient funds

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73300,
        foalId: 146667,
        user: {
        ~~~~
          connect: {
            id: "dfdefa47-f475-4a26-ae0b-aebfecfcbffe"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ● Groom Salary System › Salary Processing › should trigger salary processing via API

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73301,
        foalId: 146668,
        user: {
        ~~~~
          connect: {
            id: "c2fcad64-1ae0-44a3-9267-6d170c4206f1"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ● Groom Salary System › Authentication › should require authentication for GET /api/groom-salaries/cost

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73302,
        foalId: 146669,
        user: {
        ~~~~
          connect: {
            id: "b8ceb017-04ca-464c-95fc-f84d00059f8b"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ● Groom Salary System › Authentication › should require authentication for GET /api/groom-salaries/summary

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73303,
        foalId: 146670,
        user: {
        ~~~~
          connect: {
            id: "d7fa2e12-40da-48ca-b959-28575e52c2c7"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ● Groom Salary System › Authentication › should require authentication for GET /api/groom-salaries/history

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73304,
        foalId: 146671,
        user: {
        ~~~~
          connect: {
            id: "5f5d3624-91ea-4378-b43d-5928aee6c645"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ● Groom Salary System › Authentication › should require authentication for GET /api/groom-salaries/groom/:groomId/salary

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73305,
        foalId: 146672,
        user: {
        ~~~~
          connect: {
            id: "be4b07e4-b50c-453b-941d-dcbb8cd12840"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ● Groom Salary System › Authentication › should require authentication for GET /api/groom-salaries/status

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73306,
        foalId: 146673,
        user: {
        ~~~~
          connect: {
            id: "89bd1d28-0cfc-4ba4-9ff2-d7e247db8a63"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ● Groom Salary System › Authentication › should require authentication for POST /api/groom-salaries/process

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73307,
        foalId: 146674,
        user: {
        ~~~~
          connect: {
            id: "493b848f-b692-40b6-976f-0a4142fe8917"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

FAIL tests/integration/traitRoutes.test.mjs
  ● Trait Routes Integration Tests › POST /api/traits/discover/:horseId › should trigger trait discovery successfully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769625729587",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T18:42:09.587Z"),
        breedId: 31461,
        ~~~~~~~
        user: {
          connect: {
            id: "cd87b7c9-dd6e-4f21-bb77-003b687dc3a4"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ● Trait Routes Integration Tests › POST /api/traits/discover/:horseId › should return validation error for invalid horse ID

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769625729587",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T18:42:09.587Z"),
        breedId: 31461,
        ~~~~~~~
        user: {
          connect: {
            id: "cd87b7c9-dd6e-4f21-bb77-003b687dc3a4"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ● Trait Routes Integration Tests › POST /api/traits/discover/:horseId › should return 404 for non-existent horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769625729587",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T18:42:09.587Z"),
        breedId: 31461,
        ~~~~~~~
        user: {
          connect: {
            id: "cd87b7c9-dd6e-4f21-bb77-003b687dc3a4"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ● Trait Routes Integration Tests › POST /api/traits/discover/:horseId › should handle optional parameters correctly

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769625729587",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T18:42:09.587Z"),
        breedId: 31461,
        ~~~~~~~
        user: {
          connect: {
            id: "cd87b7c9-dd6e-4f21-bb77-003b687dc3a4"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ● Trait Routes Integration Tests › GET /api/traits/horse/:horseId › should get horse traits successfully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769625729587",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T18:42:09.587Z"),
        breedId: 31461,
        ~~~~~~~
        user: {
          connect: {
            id: "cd87b7c9-dd6e-4f21-bb77-003b687dc3a4"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ● Trait Routes Integration Tests › GET /api/traits/horse/:horseId › should return validation error for invalid horse ID

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769625729587",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T18:42:09.587Z"),
        breedId: 31461,
        ~~~~~~~
        user: {
          connect: {
            id: "cd87b7c9-dd6e-4f21-bb77-003b687dc3a4"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ● Trait Routes Integration Tests › GET /api/traits/horse/:horseId › should return 404 for non-existent horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769625729587",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T18:42:09.587Z"),
        breedId: 31461,
        ~~~~~~~
        user: {
          connect: {
            id: "cd87b7c9-dd6e-4f21-bb77-003b687dc3a4"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ● Trait Routes Integration Tests › GET /api/traits/definitions › should get all trait definitions

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769625729587",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T18:42:09.587Z"),
        breedId: 31461,
        ~~~~~~~
        user: {
          connect: {
            id: "cd87b7c9-dd6e-4f21-bb77-003b687dc3a4"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ● Trait Routes Integration Tests › GET /api/traits/definitions › should filter traits by type

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769625729587",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T18:42:09.587Z"),
        breedId: 31461,
        ~~~~~~~
        user: {
          connect: {
            id: "cd87b7c9-dd6e-4f21-bb77-003b687dc3a4"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ● Trait Routes Integration Tests › GET /api/traits/definitions › should return validation error for invalid type

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769625729587",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T18:42:09.587Z"),
        breedId: 31461,
        ~~~~~~~
        user: {
          connect: {
            id: "cd87b7c9-dd6e-4f21-bb77-003b687dc3a4"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ● Trait Routes Integration Tests › GET /api/traits/discovery-status/:horseId › should get discovery status successfully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769625729587",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T18:42:09.587Z"),
        breedId: 31461,
        ~~~~~~~
        user: {
          connect: {
            id: "cd87b7c9-dd6e-4f21-bb77-003b687dc3a4"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ● Trait Routes Integration Tests › GET /api/traits/discovery-status/:horseId › should return validation error for invalid horse ID

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769625729587",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T18:42:09.587Z"),
        breedId: 31461,
        ~~~~~~~
        user: {
          connect: {
            id: "cd87b7c9-dd6e-4f21-bb77-003b687dc3a4"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ● Trait Routes Integration Tests › GET /api/traits/discovery-status/:horseId › should return 404 for non-existent horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769625729587",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T18:42:09.587Z"),
        breedId: 31461,
        ~~~~~~~
        user: {
          connect: {
            id: "cd87b7c9-dd6e-4f21-bb77-003b687dc3a4"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ● Trait Routes Integration Tests › POST /api/traits/batch-discover › should process batch discovery successfully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769625729587",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T18:42:09.587Z"),
        breedId: 31461,
        ~~~~~~~
        user: {
          connect: {
            id: "cd87b7c9-dd6e-4f21-bb77-003b687dc3a4"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ● Trait Routes Integration Tests › POST /api/traits/batch-discover › should return validation error for empty horse IDs array

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769625729587",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T18:42:09.587Z"),
        breedId: 31461,
        ~~~~~~~
        user: {
          connect: {
            id: "cd87b7c9-dd6e-4f21-bb77-003b687dc3a4"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ● Trait Routes Integration Tests › POST /api/traits/batch-discover › should return validation error for too many horse IDs

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769625729587",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T18:42:09.587Z"),
        breedId: 31461,
        ~~~~~~~
        user: {
          connect: {
            id: "cd87b7c9-dd6e-4f21-bb77-003b687dc3a4"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ● Trait Routes Integration Tests › POST /api/traits/batch-discover › should return validation error for invalid horse IDs

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769625729587",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T18:42:09.587Z"),
        breedId: 31461,
        ~~~~~~~
        user: {
          connect: {
            id: "cd87b7c9-dd6e-4f21-bb77-003b687dc3a4"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ● Trait Routes Integration Tests › POST /api/traits/batch-discover › should handle mix of valid and invalid horse IDs

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769625729587",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T18:42:09.587Z"),
        breedId: 31461,
        ~~~~~~~
        user: {
          connect: {
            id: "cd87b7c9-dd6e-4f21-bb77-003b687dc3a4"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

FAIL tests/integration/groomHandlerSystem.test.mjs
  ● Groom Handler System Integration Tests › 1. Handler Assignment › should get the assigned handler for a horse

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73308,
        foalId: 146675,
        user: {
        ~~~~
          connect: {
            id: "b221db0c-2e37-4597-8de7-991492570af3"
          }
        },
        priority: 1,
        isActive: true,
        notes: "Test assignment for handler system",
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 58 |[39m
     [90m 59 |[39m     [90m// Create test assignment[39m
    [31m[1m>[22m[39m[90m 60 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 61 |[39m       data[33m:[39m {
     [90m 62 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 63 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomHandlerSystem.test.mjs:60:5)

  ● Groom Handler System Integration Tests › 1. Handler Assignment › should return no handler for a horse without assignment

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73308,
        foalId: 146675,
        user: {
        ~~~~
          connect: {
            id: "b221db0c-2e37-4597-8de7-991492570af3"
          }
        },
        priority: 1,
        isActive: true,
        notes: "Test assignment for handler system",
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 58 |[39m
     [90m 59 |[39m     [90m// Create test assignment[39m
    [31m[1m>[22m[39m[90m 60 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 61 |[39m       data[33m:[39m {
     [90m 62 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 63 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomHandlerSystem.test.mjs:60:5)

  ● Groom Handler System Integration Tests › 1. Handler Assignment › should validate horse ownership

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73308,
        foalId: 146675,
        user: {
        ~~~~
          connect: {
            id: "b221db0c-2e37-4597-8de7-991492570af3"
          }
        },
        priority: 1,
        isActive: true,
        notes: "Test assignment for handler system",
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 58 |[39m
     [90m 59 |[39m     [90m// Create test assignment[39m
    [31m[1m>[22m[39m[90m 60 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 61 |[39m       data[33m:[39m {
     [90m 62 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 63 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomHandlerSystem.test.mjs:60:5)

  ● Groom Handler System Integration Tests › 2. Handler Eligibility › should check handler eligibility for a conformation class

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73308,
        foalId: 146675,
        user: {
        ~~~~
          connect: {
            id: "b221db0c-2e37-4597-8de7-991492570af3"
          }
        },
        priority: 1,
        isActive: true,
        notes: "Test assignment for handler system",
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 58 |[39m
     [90m 59 |[39m     [90m// Create test assignment[39m
    [31m[1m>[22m[39m[90m 60 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 61 |[39m       data[33m:[39m {
     [90m 62 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 63 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomHandlerSystem.test.mjs:60:5)

  ● Groom Handler System Integration Tests › 2. Handler Eligibility › should validate conformation class

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73308,
        foalId: 146675,
        user: {
        ~~~~
          connect: {
            id: "b221db0c-2e37-4597-8de7-991492570af3"
          }
        },
        priority: 1,
        isActive: true,
        notes: "Test assignment for handler system",
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 58 |[39m
     [90m 59 |[39m     [90m// Create test assignment[39m
    [31m[1m>[22m[39m[90m 60 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 61 |[39m       data[33m:[39m {
     [90m 62 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 63 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomHandlerSystem.test.mjs:60:5)

  ● Groom Handler System Integration Tests › 3. Handler Configuration › should get handler configuration

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73308,
        foalId: 146675,
        user: {
        ~~~~
          connect: {
            id: "b221db0c-2e37-4597-8de7-991492570af3"
          }
        },
        priority: 1,
        isActive: true,
        notes: "Test assignment for handler system",
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 58 |[39m
     [90m 59 |[39m     [90m// Create test assignment[39m
    [31m[1m>[22m[39m[90m 60 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 61 |[39m       data[33m:[39m {
     [90m 62 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 63 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomHandlerSystem.test.mjs:60:5)

  ● Groom Handler System Integration Tests › 4. Handler Recommendations › should get handler recommendations for a horse

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73308,
        foalId: 146675,
        user: {
        ~~~~
          connect: {
            id: "b221db0c-2e37-4597-8de7-991492570af3"
          }
        },
        priority: 1,
        isActive: true,
        notes: "Test assignment for handler system",
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 58 |[39m
     [90m 59 |[39m     [90m// Create test assignment[39m
    [31m[1m>[22m[39m[90m 60 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 61 |[39m       data[33m:[39m {
     [90m 62 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 63 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomHandlerSystem.test.mjs:60:5)

  ● Groom Handler System Integration Tests › 5. Authentication and Authorization › should require authentication for all endpoints

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73308,
        foalId: 146675,
        user: {
        ~~~~
          connect: {
            id: "b221db0c-2e37-4597-8de7-991492570af3"
          }
        },
        priority: 1,
        isActive: true,
        notes: "Test assignment for handler system",
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 58 |[39m
     [90m 59 |[39m     [90m// Create test assignment[39m
    [31m[1m>[22m[39m[90m 60 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 61 |[39m       data[33m:[39m {
     [90m 62 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 63 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomHandlerSystem.test.mjs:60:5)

FAIL tests/training.test.mjs
  ● ��️ INTEGRATION: Training System - Complete Business Logic Validation › BUSINESS RULE: Age Requirements (3+ years old) › BLOCKS training for horses under 3 years old

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "21c19110-5e4d-4a94-b939-1d1ddec04323"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:12.258Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 136 |[39m
     [90m 137 |[39m     [90m// Create test horses with User relationships[39m
    [31m[1m>[22m[39m[90m 138 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 139 |[39m       data[33m:[39m {
     [90m 140 |[39m         name[33m:[39m [32m'Test Adult Horse'[39m[33m,[39m
     [90m 141 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/training.test.mjs:138:18)

  ● ��️ INTEGRATION: Training System - Complete Business Logic Validation › BUSINESS RULE: Age Requirements (3+ years old) › ALLOWS training for horses 3+ years old

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "21c19110-5e4d-4a94-b939-1d1ddec04323"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:12.258Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 136 |[39m
     [90m 137 |[39m     [90m// Create test horses with User relationships[39m
    [31m[1m>[22m[39m[90m 138 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 139 |[39m       data[33m:[39m {
     [90m 140 |[39m         name[33m:[39m [32m'Test Adult Horse'[39m[33m,[39m
     [90m 141 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/training.test.mjs:138:18)

  ● ��️ INTEGRATION: Training System - Complete Business Logic Validation › BUSINESS RULE: Discipline Score Progression (+5 base) › INCREASES discipline scores by +5 for first-time training

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "21c19110-5e4d-4a94-b939-1d1ddec04323"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:12.258Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 136 |[39m
     [90m 137 |[39m     [90m// Create test horses with User relationships[39m
    [31m[1m>[22m[39m[90m 138 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 139 |[39m       data[33m:[39m {
     [90m 140 |[39m         name[33m:[39m [32m'Test Adult Horse'[39m[33m,[39m
     [90m 141 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/training.test.mjs:138:18)

  ● ��️ INTEGRATION: Training System - Complete Business Logic Validation › BUSINESS RULE: Discipline Score Progression (+5 base) › ACCUMULATES discipline scores across multiple training sessions (different horses)

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "21c19110-5e4d-4a94-b939-1d1ddec04323"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:12.258Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 136 |[39m
     [90m 137 |[39m     [90m// Create test horses with User relationships[39m
    [31m[1m>[22m[39m[90m 138 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 139 |[39m       data[33m:[39m {
     [90m 140 |[39m         name[33m:[39m [32m'Test Adult Horse'[39m[33m,[39m
     [90m 141 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/training.test.mjs:138:18)

  ● ��️ INTEGRATION: Training System - Complete Business Logic Validation › BUSINESS RULE: Global Cooldown (One Discipline Per Week) › BLOCKS training when horse has trained ANY discipline within 7 days

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "21c19110-5e4d-4a94-b939-1d1ddec04323"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:12.258Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 136 |[39m
     [90m 137 |[39m     [90m// Create test horses with User relationships[39m
    [31m[1m>[22m[39m[90m 138 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 139 |[39m       data[33m:[39m {
     [90m 140 |[39m         name[33m:[39m [32m'Test Adult Horse'[39m[33m,[39m
     [90m 141 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/training.test.mjs:138:18)

  ● ��️ INTEGRATION: Training System - Complete Business Logic Validation › BUSINESS RULE: Global Cooldown (One Discipline Per Week) › ALLOWS training after 7-day cooldown expires

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "21c19110-5e4d-4a94-b939-1d1ddec04323"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:12.258Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 136 |[39m
     [90m 137 |[39m     [90m// Create test horses with User relationships[39m
    [31m[1m>[22m[39m[90m 138 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 139 |[39m       data[33m:[39m {
     [90m 140 |[39m         name[33m:[39m [32m'Test Adult Horse'[39m[33m,[39m
     [90m 141 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/training.test.mjs:138:18)

  ● ��️ INTEGRATION: Training System - Complete Business Logic Validation › BUSINESS RULE: XP Award for Training › AWARDS XP to horse owner (Player) when training succeeds

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "21c19110-5e4d-4a94-b939-1d1ddec04323"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:12.258Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 136 |[39m
     [90m 137 |[39m     [90m// Create test horses with User relationships[39m
    [31m[1m>[22m[39m[90m 138 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 139 |[39m       data[33m:[39m {
     [90m 140 |[39m         name[33m:[39m [32m'Test Adult Horse'[39m[33m,[39m
     [90m 141 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/training.test.mjs:138:18)

  ● ��️ INTEGRATION: Training System - Complete Business Logic Validation › BUSINESS RULE: Training Log Creation › CREATES training log entry for successful training

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "21c19110-5e4d-4a94-b939-1d1ddec04323"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:12.258Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 136 |[39m
     [90m 137 |[39m     [90m// Create test horses with User relationships[39m
    [31m[1m>[22m[39m[90m 138 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 139 |[39m       data[33m:[39m {
     [90m 140 |[39m         name[33m:[39m [32m'Test Adult Horse'[39m[33m,[39m
     [90m 141 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/training.test.mjs:138:18)

  ● ��️ INTEGRATION: Training System - Complete Business Logic Validation › BUSINESS RULE: Error Handling and Data Integrity › MAINTAINS database integrity when training non-existent horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "21c19110-5e4d-4a94-b939-1d1ddec04323"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:12.258Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 136 |[39m
     [90m 137 |[39m     [90m// Create test horses with User relationships[39m
    [31m[1m>[22m[39m[90m 138 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 139 |[39m       data[33m:[39m {
     [90m 140 |[39m         name[33m:[39m [32m'Test Adult Horse'[39m[33m,[39m
     [90m 141 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/training.test.mjs:138:18)

  ● ��️ INTEGRATION: Training System - Complete Business Logic Validation › BUSINESS RULE: Error Handling and Data Integrity › VALIDATES input parameters and rejects invalid requests

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "21c19110-5e4d-4a94-b939-1d1ddec04323"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:12.258Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 136 |[39m
     [90m 137 |[39m     [90m// Create test horses with User relationships[39m
    [31m[1m>[22m[39m[90m 138 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 139 |[39m       data[33m:[39m {
     [90m 140 |[39m         name[33m:[39m [32m'Test Adult Horse'[39m[33m,[39m
     [90m 141 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/training.test.mjs:138:18)

  ● ��️ INTEGRATION: Training System - Complete Business Logic Validation › BUSINESS RULE: Next Training Date Calculation › PROVIDES accurate next training date (7 days from training)

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "21c19110-5e4d-4a94-b939-1d1ddec04323"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:12.258Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 136 |[39m
     [90m 137 |[39m     [90m// Create test horses with User relationships[39m
    [31m[1m>[22m[39m[90m 138 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 139 |[39m       data[33m:[39m {
     [90m 140 |[39m         name[33m:[39m [32m'Test Adult Horse'[39m[33m,[39m
     [90m 141 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/training.test.mjs:138:18)

FAIL tests/traitTimeline.test.mjs
  ● Trait Timeline System › Trait Timeline Data Aggregation › should aggregate trait timeline with milestone and groom data

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625733697",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T18:42:13.697Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "2bb58bac-b8ea-46ad-9c4c-57cbac32d6a6"
          }
        },
        breedId: 31462,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ● Trait Timeline System › Trait Timeline Data Aggregation › should include detailed trait context and groom involvement

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625733735",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T18:42:13.735Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "210e7ff4-ff35-4615-8df5-39bb2f704d26"
          }
        },
        breedId: 31463,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ● Trait Timeline System › Trait Timeline Data Aggregation › should filter traits by age cutoff (before age 4)

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625733749",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T18:42:13.749Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "48b0729b-162b-414c-9252-c583935248c7"
          }
        },
        breedId: 31464,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ● Trait Timeline System › Trait Timeline Data Aggregation › should categorize traits by type and rarity

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625733762",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T18:42:13.762Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "4c997b20-a62b-4181-9251-7524d65f1198"
          }
        },
        breedId: 31465,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ● Trait Timeline System › Trait Timeline Data Aggregation › should handle horses with no trait history

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625733775",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T18:42:13.775Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "190100bc-060a-460b-af9d-ca1038deedc6"
          }
        },
        breedId: 31466,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ● Trait Timeline System › Timeline Formatting and Organization › should organize events by age ranges

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625733791",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T18:42:13.791Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "6a62f200-f13d-4d54-a1a4-2cc7014fc38a"
          }
        },
        breedId: 31467,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ● Trait Timeline System › Timeline Formatting and Organization › should include bond and stress trend analysis

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625733806",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T18:42:13.806Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "8f243663-2583-4179-b9aa-24bd99a04979"
          }
        },
        breedId: 31468,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ● Trait Timeline System › API Endpoints › should get trait timeline card via API

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625733822",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T18:42:13.822Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "dd87c0f5-833d-4cff-86bf-f58879346fa3"
          }
        },
        breedId: 31469,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ● Trait Timeline System › API Endpoints › should require authentication for trait card endpoint

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625733834",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T18:42:13.834Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "de52b50d-fd2a-433f-b654-2fbb4cae211d"
          }
        },
        breedId: 31470,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ● Trait Timeline System › API Endpoints › should return 404 for non-existent horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625733848",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T18:42:13.848Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "976c1c6e-582d-4327-b5ca-9e0133203704"
          }
        },
        breedId: 31471,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ● Trait Timeline System › API Endpoints › should handle horses with empty trait timeline

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625733860",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T18:42:13.860Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "d9b7606b-e9b0-4a1b-a8db-05fd9de0b44e"
          }
        },
        breedId: 31472,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

FAIL tests/integration/horseOverview.test.mjs
  ● �� INTEGRATION: Horse Overview API - Real Database Integration › GET /api/horses/:id/overview › should return complete horse overview data successfully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse Nova",
        age: 5,
        sex: "Mare",
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "4e0a4334-7d3c-40a4-8cd4-e680eccdffb4"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Excellent",
        disciplineScores: {
          Dressage: 25,
          Show Jumping: 10
        },
        totalEarnings: 2200,
        tack: {
          saddleBonus: 5,
          bridleBonus: 3
        },
        rider: {
          name: "Jenna Black",
          bonusPercent: 0.08,
          penaltyPercent: 0
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 90 |[39m
     [90m 91 |[39m     [90m// Create test horse with real data[39m
    [31m[1m>[22m[39m[90m 92 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 93 |[39m       data[33m:[39m {
     [90m 94 |[39m         name[33m:[39m [32m'TestHorse Nova'[39m[33m,[39m
     [90m 95 |[39m         age[33m:[39m [35m5[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/horseOverview.test.mjs:92:17)

  ● �� INTEGRATION: Horse Overview API - Real Database Integration › GET /api/horses/:id/overview › should return 404 for non-existent horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse Nova",
        age: 5,
        sex: "Mare",
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "d963280b-1bdc-41f5-bf8b-2c552944c7ae"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Excellent",
        disciplineScores: {
          Dressage: 25,
          Show Jumping: 10
        },
        totalEarnings: 2200,
        tack: {
          saddleBonus: 5,
          bridleBonus: 3
        },
        rider: {
          name: "Jenna Black",
          bonusPercent: 0.08,
          penaltyPercent: 0
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 90 |[39m
     [90m 91 |[39m     [90m// Create test horse with real data[39m
    [31m[1m>[22m[39m[90m 92 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 93 |[39m       data[33m:[39m {
     [90m 94 |[39m         name[33m:[39m [32m'TestHorse Nova'[39m[33m,[39m
     [90m 95 |[39m         age[33m:[39m [35m5[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/horseOverview.test.mjs:92:17)

  ● �� INTEGRATION: Horse Overview API - Real Database Integration › GET /api/horses/:id/overview › should return validation error for invalid horse ID

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse Nova",
        age: 5,
        sex: "Mare",
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "7aa54db3-f823-4677-b509-ed8efdade063"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Excellent",
        disciplineScores: {
          Dressage: 25,
          Show Jumping: 10
        },
        totalEarnings: 2200,
        tack: {
          saddleBonus: 5,
          bridleBonus: 3
        },
        rider: {
          name: "Jenna Black",
          bonusPercent: 0.08,
          penaltyPercent: 0
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 90 |[39m
     [90m 91 |[39m     [90m// Create test horse with real data[39m
    [31m[1m>[22m[39m[90m 92 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 93 |[39m       data[33m:[39m {
     [90m 94 |[39m         name[33m:[39m [32m'TestHorse Nova'[39m[33m,[39m
     [90m 95 |[39m         age[33m:[39m [35m5[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/horseOverview.test.mjs:92:17)

  ● �� INTEGRATION: Horse Overview API - Real Database Integration › GET /api/horses/:id/overview › should handle horse with no training history gracefully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse Nova",
        age: 5,
        sex: "Mare",
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "2d2823f1-6c61-4dc7-94f3-757e4c5eab64"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Excellent",
        disciplineScores: {
          Dressage: 25,
          Show Jumping: 10
        },
        totalEarnings: 2200,
        tack: {
          saddleBonus: 5,
          bridleBonus: 3
        },
        rider: {
          name: "Jenna Black",
          bonusPercent: 0.08,
          penaltyPercent: 0
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 90 |[39m
     [90m 91 |[39m     [90m// Create test horse with real data[39m
    [31m[1m>[22m[39m[90m 92 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 93 |[39m       data[33m:[39m {
     [90m 94 |[39m         name[33m:[39m [32m'TestHorse Nova'[39m[33m,[39m
     [90m 95 |[39m         age[33m:[39m [35m5[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/horseOverview.test.mjs:92:17)

  ● �� INTEGRATION: Horse Overview API - Real Database Integration › GET /api/horses/:id/overview › should calculate next training date correctly when horse has recent training

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse Nova",
        age: 5,
        sex: "Mare",
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "36107a95-a90b-41d6-b803-f9bf1ce3b92f"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Excellent",
        disciplineScores: {
          Dressage: 25,
          Show Jumping: 10
        },
        totalEarnings: 2200,
        tack: {
          saddleBonus: 5,
          bridleBonus: 3
        },
        rider: {
          name: "Jenna Black",
          bonusPercent: 0.08,
          penaltyPercent: 0
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 90 |[39m
     [90m 91 |[39m     [90m// Create test horse with real data[39m
    [31m[1m>[22m[39m[90m 92 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 93 |[39m       data[33m:[39m {
     [90m 94 |[39m         name[33m:[39m [32m'TestHorse Nova'[39m[33m,[39m
     [90m 95 |[39m         age[33m:[39m [35m5[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/horseOverview.test.mjs:92:17)

  ● �� INTEGRATION: Horse Overview API - Real Database Integration › GET /api/horses/:id/overview › should handle missing optional fields gracefully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse Nova",
        age: 5,
        sex: "Mare",
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "f1fad6ae-5972-4c44-99b6-b22c57dd4428"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Excellent",
        disciplineScores: {
          Dressage: 25,
          Show Jumping: 10
        },
        totalEarnings: 2200,
        tack: {
          saddleBonus: 5,
          bridleBonus: 3
        },
        rider: {
          name: "Jenna Black",
          bonusPercent: 0.08,
          penaltyPercent: 0
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 90 |[39m
     [90m 91 |[39m     [90m// Create test horse with real data[39m
    [31m[1m>[22m[39m[90m 92 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 93 |[39m       data[33m:[39m {
     [90m 94 |[39m         name[33m:[39m [32m'TestHorse Nova'[39m[33m,[39m
     [90m 95 |[39m         age[33m:[39m [35m5[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/horseOverview.test.mjs:92:17)

FAIL tests/groomBonusTraits.test.mjs
  ● Groom Bonus Traits System › Groom Bonus Trait Management › should assign bonus traits to a groom

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625736566",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T18:42:16.566Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "ecda0732-4b4f-490b-8df7-4dc959b8a279"
          }
        },
        breedId: 31473,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

  ● Groom Bonus Traits System › Groom Bonus Trait Management › should validate bonus trait constraints

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625736598",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T18:42:16.598Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "c2dbb2d8-7a30-4dc6-92f1-589be7f3ca96"
          }
        },
        breedId: 31474,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

  ● Groom Bonus Traits System › Groom Bonus Trait Management › should get groom bonus traits

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625736612",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T18:42:16.612Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "c5bcc35a-6ec8-4d4f-b7c8-8d6a4894bc0b"
          }
        },
        breedId: 31475,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

  ● Groom Bonus Traits System › Trait Assignment Logic Integration › should apply bonus probability when conditions are met

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625736627",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T18:42:16.627Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "dc07bfa2-338e-45d6-8d10-2cdd0434ab4e"
          }
        },
        breedId: 31476,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

  ● Groom Bonus Traits System › Trait Assignment Logic Integration › should not apply bonus when bond is too low

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625736641",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T18:42:16.641Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "18a8cb08-c4ba-406c-b3b6-ef9bf31ec058"
          }
        },
        breedId: 31477,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

  ● Groom Bonus Traits System › Trait Assignment Logic Integration › should not apply bonus when coverage is insufficient

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625736659",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T18:42:16.659Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "1edc1567-fe64-4888-aab9-a45991d07693"
          }
        },
        breedId: 31478,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

  ● Groom Bonus Traits System › API Endpoints › should get groom bonus traits via API

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625736675",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T18:42:16.675Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "757019ca-89f7-4b9b-8af4-85fd8736a25c"
          }
        },
        breedId: 31479,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

  ● Groom Bonus Traits System › API Endpoints › should update groom bonus traits via API

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625736687",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T18:42:16.687Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "50781ec7-9e1d-45ee-be5f-3aaf79ade0ec"
          }
        },
        breedId: 31480,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

  ● Groom Bonus Traits System › API Endpoints › should reject invalid bonus trait updates

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625736697",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T18:42:16.697Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "cbb71d95-f84d-4d7e-9ed1-ced684b8f55f"
          }
        },
        breedId: 31481,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

  ● Groom Bonus Traits System › API Endpoints › should require authentication for bonus trait endpoints

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769625736709",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T18:42:16.709Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "ad7dbe8a-5a16-4c4b-8436-f02676e98aa3"
          }
        },
        breedId: 31482,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

FAIL tests/breedingPrediction.test.mjs
  ● Breeding Prediction System › Inheritance Probability Logic › should calculate trait inheritance probabilities from parent history

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestStallion_1769625737966",
        sex: "stallion",
        dateOfBirth: new Date("2021-01-29T18:42:17.966Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "a27fd71a-c210-401d-803e-bf66d5555dfc"
          }
        },
        breedId: 31483,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [
            "sensitive",
            "noble"
          ],
          negative: [],
          hidden: [
            "quick_learner"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 70 |[39m
     [90m 71 |[39m     [90m// Create test stallion (5 years old)[39m
    [31m[1m>[22m[39m[90m 72 |[39m     testStallion [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 73 |[39m       data[33m:[39m {
     [90m 74 |[39m         name[33m:[39m [32m`TestStallion_${Date.now()}`[39m[33m,[39m
     [90m 75 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/breedingPrediction.test.mjs:72:20)

  ● Breeding Prediction System › Inheritance Probability Logic › should calculate flag inheritance scores

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestStallion_1769625737999",
        sex: "stallion",
        dateOfBirth: new Date("2021-01-29T18:42:17.999Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "c2f3c47c-4d24-43f2-9c66-4dbdcf2e35e9"
          }
        },
        breedId: 31484,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [
            "sensitive",
            "noble"
          ],
          negative: [],
          hidden: [
            "quick_learner"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 70 |[39m
     [90m 71 |[39m     [90m// Create test stallion (5 years old)[39m
    [31m[1m>[22m[39m[90m 72 |[39m     testStallion [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 73 |[39m       data[33m:[39m {
     [90m 74 |[39m         name[33m:[39m [32m`TestStallion_${Date.now()}`[39m[33m,[39m
     [90m 75 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/breedingPrediction.test.mjs:72:20)

  ● Breeding Prediction System › Inheritance Probability Logic › should handle horses with no trait history

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestStallion_1769625738013",
        sex: "stallion",
        dateOfBirth: new Date("2021-01-29T18:42:18.013Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "743810a7-f9f6-4782-b328-2f61c1c889ff"
          }
        },
        breedId: 31485,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [
            "sensitive",
            "noble"
          ],
          negative: [],
          hidden: [
            "quick_learner"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 70 |[39m
     [90m 71 |[39m     [90m// Create test stallion (5 years old)[39m
    [31m[1m>[22m[39m[90m 72 |[39m     testStallion [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 73 |[39m       data[33m:[39m {
     [90m 74 |[39m         name[33m:[39m [32m`TestStallion_${Date.now()}`[39m[33m,[39m
     [90m 75 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/breedingPrediction.test.mjs:72:20)

  ● Breeding Prediction System › Inheritance Probability Logic › should calculate temperament influence modifiers

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestStallion_1769625738029",
        sex: "stallion",
        dateOfBirth: new Date("2021-01-29T18:42:18.029Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "8135a1d2-eafb-4d50-8c0e-b47e37d73789"
          }
        },
        breedId: 31486,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [
            "sensitive",
            "noble"
          ],
          negative: [],
          hidden: [
            "quick_learner"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 70 |[39m
     [90m 71 |[39m     [90m// Create test stallion (5 years old)[39m
    [31m[1m>[22m[39m[90m 72 |[39m     testStallion [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 73 |[39m       data[33m:[39m {
     [90m 74 |[39m         name[33m:[39m [32m`TestStallion_${Date.now()}`[39m[33m,[39m
     [90m 75 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/breedingPrediction.test.mjs:72:20)

  ● Breeding Prediction System › Child Prediction Algorithms › should predict trait categories with probability ranges

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestStallion_1769625738043",
        sex: "stallion",
        dateOfBirth: new Date("2021-01-29T18:42:18.043Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "a476fca8-c4d4-4155-8397-dbc4d9c8b47b"
          }
        },
        breedId: 31487,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [
            "sensitive",
            "noble"
          ],
          negative: [],
          hidden: [
            "quick_learner"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 70 |[39m
     [90m 71 |[39m     [90m// Create test stallion (5 years old)[39m
    [31m[1m>[22m[39m[90m 72 |[39m     testStallion [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 73 |[39m       data[33m:[39m {
     [90m 74 |[39m         name[33m:[39m [32m`TestStallion_${Date.now()}`[39m[33m,[39m
     [90m 75 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/breedingPrediction.test.mjs:72:20)

  ● Breeding Prediction System › Child Prediction Algorithms › should handle epigenetic flag inheritance with stacking limits

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestStallion_1769625738057",
        sex: "stallion",
        dateOfBirth: new Date("2021-01-29T18:42:18.057Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "285874fc-4f56-42e7-8dc9-5ae3f05034e1"
          }
        },
        breedId: 31488,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [
            "sensitive",
            "noble"
          ],
          negative: [],
          hidden: [
            "quick_learner"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 70 |[39m
     [90m 71 |[39m     [90m// Create test stallion (5 years old)[39m
    [31m[1m>[22m[39m[90m 72 |[39m     testStallion [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 73 |[39m       data[33m:[39m {
     [90m 74 |[39m         name[33m:[39m [32m`TestStallion_${Date.now()}`[39m[33m,[39m
     [90m 75 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/breedingPrediction.test.mjs:72:20)

  ● Breeding Prediction System › API Extension › should extend breeding-data endpoint with prediction data

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestStallion_1769625738075",
        sex: "stallion",
        dateOfBirth: new Date("2021-01-29T18:42:18.075Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "4bbe73dc-feed-411c-9c8b-f3de49825acd"
          }
        },
        breedId: 31489,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [
            "sensitive",
            "noble"
          ],
          negative: [],
          hidden: [
            "quick_learner"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 70 |[39m
     [90m 71 |[39m     [90m// Create test stallion (5 years old)[39m
    [31m[1m>[22m[39m[90m 72 |[39m     testStallion [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 73 |[39m       data[33m:[39m {
     [90m 74 |[39m         name[33m:[39m [32m`TestStallion_${Date.now()}`[39m[33m,[39m
     [90m 75 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/breedingPrediction.test.mjs:72:20)

  ● Breeding Prediction System › API Extension › should require authentication for breeding-data endpoint

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestStallion_1769625738087",
        sex: "stallion",
        dateOfBirth: new Date("2021-01-29T18:42:18.087Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "1126fd4c-d2e4-4269-8c8f-4dfc7feda88c"
          }
        },
        breedId: 31490,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [
            "sensitive",
            "noble"
          ],
          negative: [],
          hidden: [
            "quick_learner"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 70 |[39m
     [90m 71 |[39m     [90m// Create test stallion (5 years old)[39m
    [31m[1m>[22m[39m[90m 72 |[39m     testStallion [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 73 |[39m       data[33m:[39m {
     [90m 74 |[39m         name[33m:[39m [32m`TestStallion_${Date.now()}`[39m[33m,[39m
     [90m 75 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/breedingPrediction.test.mjs:72:20)

  ● Breeding Prediction System › API Extension › should handle horses with minimal breeding data

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestStallion_1769625738099",
        sex: "stallion",
        dateOfBirth: new Date("2021-01-29T18:42:18.099Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "9d4da667-9c6a-4832-8163-7ec5ee7d80eb"
          }
        },
        breedId: 31491,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [
            "sensitive",
            "noble"
          ],
          negative: [],
          hidden: [
            "quick_learner"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 70 |[39m
     [90m 71 |[39m     [90m// Create test stallion (5 years old)[39m
    [31m[1m>[22m[39m[90m 72 |[39m     testStallion [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 73 |[39m       data[33m:[39m {
     [90m 74 |[39m         name[33m:[39m [32m`TestStallion_${Date.now()}`[39m[33m,[39m
     [90m 75 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/breedingPrediction.test.mjs:72:20)

FAIL tests/integration/horseRoutes.test.mjs
  ● Horse Routes Integration Tests › GET /api/horses/trainable/:userId › should return trainable horses for valid user ID

    expect(received).toBeGreaterThanOrEqual(expected)

    Matcher error: received value must be a number or bigint

    Received has value: null

    [0m [90m 122 |[39m         expect(horse)[33m.[39mtoHaveProperty([32m'trainableDisciplines'[39m)[33m;[39m
     [90m 123 |[39m         expect([33mArray[39m[33m.[39misArray(horse[33m.[39mtrainableDisciplines))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 124 |[39m         expect(horse[33m.[39mage)[33m.[39mtoBeGreaterThanOrEqual([35m3[39m)[33m;[39m [90m// Only horses 3+ should be returned[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 125 |[39m       })[33m;[39m
     [90m 126 |[39m     })[33m;[39m
     [90m 127 |[39m[0m

      at tests/integration/horseRoutes.test.mjs:124:27
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (tests/integration/horseRoutes.test.mjs:118:26)

FAIL tests/integration/leaderboardRoutes.test.mjs
  ● �� INTEGRATION: Leaderboard API - Real Database Integration › GET /api/leaderboards/recent-winners › should return recent competition winners

    expect(received).toHaveLength(expected)

    Expected length: 3
    Received length: 4
    Received array:  [{"competition": {"discipline": "Racing"}, "horse": {"name": "Cross System Test Horse"}, "id": 12329, "owner": "Unknown Owner", "runDate": {}, "show": "Cross System Test Show 1769624398121"}, {"competition": {"discipline": "Dressage"}, "horse": {"name": "TestLeaderboard Champion"}, "id": 12385, "owner": "Top Player1", "runDate": {}, "show": "Grand Prix Classic 1769625741211"}, {"competition": {"discipline": "Show Jumping"}, "horse": {"name": "TestLeaderboard Silver Star"}, "id": 12386, "owner": "Top Player2", "runDate": {}, "show": "Regional Championship 1769625741211"}, {"competition": {"discipline": "Cross Country"}, "horse": {"name": "TestLeaderboard Gold Rush"}, "id": 12387, "owner": "Top Player3", "runDate": {}, "show": "Evening Classic 1769625741211"}]

    [0m [90m 400 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 401 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoBe([32m'Recent winners retrieved successfully'[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 402 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mwinners)[33m.[39mtoHaveLength([35m3[39m)[33m;[39m
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 403 |[39m
     [90m 404 |[39m       [90m// Verify proper sorting by date (most recent first)[39m
     [90m 405 |[39m       [36mconst[39m { winners } [33m=[39m response[33m.[39mbody[33m.[39mdata[33m;[39m[0m

      at Object.<anonymous> (tests/integration/leaderboardRoutes.test.mjs:402:42)

FAIL tests/services/groomRetirementService.test.mjs
  ● Groom Retirement Service › Retirement Processing › should remove active assignments on retirement

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73350,
        foalId: 146694,
        user: {
        ~~~~
          connect: {
            id: "f9fff968-ba67-480f-8757-9820c6aa1eb5"
          }
        },
        priority: 1,
        notes: "Test assignment",
        isActive: true,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 257 |[39m     test([32m'should remove active assignments on retirement'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 258 |[39m       [90m// Create an active assignment[39m
    [31m[1m>[22m[39m[90m 259 |[39m       [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 260 |[39m         data[33m:[39m {
     [90m 261 |[39m           groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 262 |[39m           foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/services/groomRetirementService.test.mjs:259:7)

FAIL tests/integration/groomWorkflowIntegration.test.mjs
  ● Groom Workflow Integration Tests › 1. Complete Groom Hiring Workflow › should hire groom with proper skill calculations and validation

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: ObjectContaining {"data": ObjectContaining {"experience": 8, "name": "Sarah Johnson", "personality": "gentle", "sessionRate": Any<Object>, "skillLevel": "expert", "speciality": "foal_care", "user": {"connect": {"id": "user-groom-int-1769625742771_pa55f"}}}, "message": "Successfully hired Sarah Johnson", "success": true}
    Received: {"data": {"availability": {}, "bio": "Experienced foal care specialist", "bonusTraitMap": {}, "careerWeeks": 0, "createdAt": 2026-01-28T18:42:22.852Z, "experience": 8, "groomPersonality": "balanced", "hiredDate": 2026-01-28T18:42:22.852Z, "hiringCost": 750, "id": 73373, "imageUrl": null, "isActive": true, "level": 1, "name": "Sarah Johnson", "personality": "gentle", "rareTraitPerks": {}, "remainingFunds": 4250, "retired": false, "retirementReason": null, "retirementTimestamp": null, "sessionRate": "25", "skillLevel": "expert", "speciality": "foal_care", "updatedAt": 2026-01-28T18:42:22.852Z, "userId": "user-groom-int-1769625742771_pa55f"}, "message": "Successfully hired Sarah Johnson", "success": true}

    Number of calls: 1

    [0m [90m 242 |[39m
     [90m 243 |[39m       expect(res[33m.[39mstatus)[33m.[39mtoHaveBeenCalledWith([35m201[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 244 |[39m       expect(res[33m.[39mjson)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                        [31m[1m^[22m[39m
     [90m 245 |[39m         expect[33m.[39mobjectContaining({
     [90m 246 |[39m           success[33m:[39m [36mtrue[39m[33m,[39m
     [90m 247 |[39m           message[33m:[39m [32m'Successfully hired Sarah Johnson'[39m[33m,[39m[0m

      at Object.<anonymous> (tests/integration/groomWorkflowIntegration.test.mjs:244:24)

FAIL tests/groomProgression.test.mjs
  ● Groom Progression System › XP and Leveling System › Should award XP for milestone completion

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    → 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T18:42:23.843Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31507,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ● Groom Progression System › XP and Leveling System › Should award XP for trait shaping

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    → 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T18:42:23.878Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31508,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ● Groom Progression System › XP and Leveling System › Should award XP for show wins

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    → 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T18:42:23.910Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31509,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ● Groom Progression System › XP and Leveling System › Should level up when reaching XP threshold

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    → 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T18:42:23.934Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31510,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ● Groom Progression System › XP and Leveling System › Should calculate correct level from experience

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    → 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T18:42:23.957Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31511,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ● Groom Progression System › XP and Leveling System › Should cap level at 10

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    → 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T18:42:23.987Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31512,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ● Groom Progression System › Groom-Horse Synergy System › Should create synergy record for new groom-horse pair

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    → 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T18:42:24.008Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31513,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ● Groom Progression System › Groom-Horse Synergy System › Should award correct synergy for different actions

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    → 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T18:42:24.037Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31514,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ● Groom Progression System › Groom-Horse Synergy System › Should penalize synergy for reassignment

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    → 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T18:42:24.059Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31515,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ● Groom Progression System › Groom-Horse Synergy System › Should track sessions together

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    → 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T18:42:24.080Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31516,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ● Groom Progression System › Assignment History Logging › Should log assignment start

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    → 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T18:42:24.103Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31517,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ● Groom Progression System › Assignment History Logging › Should log assignment completion with performance data

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    → 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T18:42:24.122Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31518,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ● Groom Progression System › Enhanced Groom Profile API › Should return comprehensive groom profile

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    → 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T18:42:24.141Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31519,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ● Groom Progression System › Enhanced Groom Profile API › Should include synergy effects in profile

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    → 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T18:42:24.163Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31520,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

FAIL __tests__/performance/apiResponseOptimization.test.mjs
  ● API Response Optimization System › Pagination Service › creates offset-based pagination correctly

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "730aa356-7f1e-43f3-a73a-fab050ab5098",
        ~~~~~~
        breed: {
          connect: {
            id: 31521
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T18:42:24.602Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ● API Response Optimization System › Pagination Service › creates cursor-based pagination correctly

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "730aa356-7f1e-43f3-a73a-fab050ab5098",
        ~~~~~~
        breed: {
          connect: {
            id: 31521
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T18:42:24.602Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ● API Response Optimization System › Pagination Service › generates optimized Prisma query for cursor pagination

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "730aa356-7f1e-43f3-a73a-fab050ab5098",
        ~~~~~~
        breed: {
          connect: {
            id: 31521
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T18:42:24.602Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ● API Response Optimization System › Serialization Service › optimizes response data correctly

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "730aa356-7f1e-43f3-a73a-fab050ab5098",
        ~~~~~~
        breed: {
          connect: {
            id: 31521
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T18:42:24.602Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ● API Response Optimization System › Serialization Service › selects specific fields correctly

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "730aa356-7f1e-43f3-a73a-fab050ab5098",
        ~~~~~~
        breed: {
          connect: {
            id: 31521
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T18:42:24.602Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ● API Response Optimization System › Serialization Service › excludes specific fields correctly

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "730aa356-7f1e-43f3-a73a-fab050ab5098",
        ~~~~~~
        breed: {
          connect: {
            id: 31521
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T18:42:24.602Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ● API Response Optimization System › Serialization Service › handles nested field selection

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "730aa356-7f1e-43f3-a73a-fab050ab5098",
        ~~~~~~
        breed: {
          connect: {
            id: 31521
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T18:42:24.602Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ● API Response Optimization System › Response Cache Service › generates consistent ETags for same data

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "730aa356-7f1e-43f3-a73a-fab050ab5098",
        ~~~~~~
        breed: {
          connect: {
            id: 31521
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T18:42:24.602Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ● API Response Optimization System › Response Cache Service › generates different ETags for different data

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "730aa356-7f1e-43f3-a73a-fab050ab5098",
        ~~~~~~
        breed: {
          connect: {
            id: 31521
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T18:42:24.602Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ● API Response Optimization System › Response Cache Service › determines cacheable requests correctly

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "730aa356-7f1e-43f3-a73a-fab050ab5098",
        ~~~~~~
        breed: {
          connect: {
            id: 31521
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T18:42:24.602Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ● API Response Optimization System › Lazy Loading Service › creates lazy loading configuration

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "730aa356-7f1e-43f3-a73a-fab050ab5098",
        ~~~~~~
        breed: {
          connect: {
            id: 31521
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T18:42:24.602Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ● API Response Optimization System › Lazy Loading Service › loads related data on demand

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "730aa356-7f1e-43f3-a73a-fab050ab5098",
        ~~~~~~
        breed: {
          connect: {
            id: 31521
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T18:42:24.602Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ● API Response Optimization System › Middleware Integration › handles pagination middleware correctly

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "730aa356-7f1e-43f3-a73a-fab050ab5098",
        ~~~~~~
        breed: {
          connect: {
            id: 31521
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T18:42:24.602Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ● API Response Optimization System › Middleware Integration › handles field selection via query parameters

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "730aa356-7f1e-43f3-a73a-fab050ab5098",
        ~~~~~~
        breed: {
          connect: {
            id: 31521
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T18:42:24.602Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ● API Response Optimization System › Middleware Integration › adds performance headers to responses

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "730aa356-7f1e-43f3-a73a-fab050ab5098",
        ~~~~~~
        breed: {
          connect: {
            id: 31521
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T18:42:24.602Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ● API Response Optimization System › Middleware Integration › handles large response optimization

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "730aa356-7f1e-43f3-a73a-fab050ab5098",
        ~~~~~~
        breed: {
          connect: {
            id: 31521
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T18:42:24.602Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ● API Response Optimization System › Middleware Integration › supports debug mode with optimization info

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "730aa356-7f1e-43f3-a73a-fab050ab5098",
        ~~~~~~
        breed: {
          connect: {
            id: 31521
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T18:42:24.602Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ● API Response Optimization System › Performance Metrics › tracks performance metrics correctly

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "730aa356-7f1e-43f3-a73a-fab050ab5098",
        ~~~~~~
        breed: {
          connect: {
            id: 31521
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T18:42:24.602Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ● API Response Optimization System › ETag and Caching › generates and validates ETags correctly

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "730aa356-7f1e-43f3-a73a-fab050ab5098",
        ~~~~~~
        breed: {
          connect: {
            id: 31521
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T18:42:24.602Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ● API Response Optimization System › Response Size Monitoring › monitors and warns about large responses

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "730aa356-7f1e-43f3-a73a-fab050ab5098",
        ~~~~~~
        breed: {
          connect: {
            id: 31521
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T18:42:24.602Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ● API Response Optimization System › Response Size Monitoring › handles response size limits

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "730aa356-7f1e-43f3-a73a-fab050ab5098",
        ~~~~~~
        breed: {
          connect: {
            id: 31521
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T18:42:24.602Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

FAIL tests/services/dynamicCompatibilityScoring.test.mjs
  ● Dynamic Compatibility Scoring › getOptimalGroomRecommendations › should recommend optimal grooms for specific horse and context

    Unknown personality type: balanced

    [0m [90m 195 |[39m     [36mconst[39m personalityDef [33m=[39m [33mPERSONALITY_TRAIT_DEFINITIONS[39m[groom[33m.[39mgroomPersonality][33m;[39m
     [90m 196 |[39m     [36mif[39m ([33m![39mpersonalityDef) {
    [31m[1m>[22m[39m[90m 197 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Unknown personality type: ${groom.groomPersonality}`[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 198 |[39m     }
     [90m 199 |[39m
     [90m 200 |[39m     [90m// Calculate experience level and trait strength[39m[0m

      at getGroomPersonalityTraits (services/groomPersonalityTraits.mjs:197:13)
      at calculatePersonalityModifiers (services/groomPersonalityTraits.mjs:236:25)
      at calculateDynamicCompatibility (services/dynamicCompatibilityScoring.mjs:31:27)
      at services/dynamicCompatibilityScoring.mjs:337:31
          at async Promise.all (index 0)
      at getOptimalGroomRecommendations (services/dynamicCompatibilityScoring.mjs:335:34)
      at Object.<anonymous> (tests/services/dynamicCompatibilityScoring.test.mjs:378:31)

  ● Dynamic Compatibility Scoring › getOptimalGroomRecommendations › should provide alternative recommendations

    Unknown personality type: balanced

    [0m [90m 195 |[39m     [36mconst[39m personalityDef [33m=[39m [33mPERSONALITY_TRAIT_DEFINITIONS[39m[groom[33m.[39mgroomPersonality][33m;[39m
     [90m 196 |[39m     [36mif[39m ([33m![39mpersonalityDef) {
    [31m[1m>[22m[39m[90m 197 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Unknown personality type: ${groom.groomPersonality}`[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 198 |[39m     }
     [90m 199 |[39m
     [90m 200 |[39m     [90m// Calculate experience level and trait strength[39m[0m

      at getGroomPersonalityTraits (services/groomPersonalityTraits.mjs:197:13)
      at calculatePersonalityModifiers (services/groomPersonalityTraits.mjs:236:25)
      at calculateDynamicCompatibility (services/dynamicCompatibilityScoring.mjs:31:27)
      at services/dynamicCompatibilityScoring.mjs:337:31
          at async Promise.all (index 0)
      at getOptimalGroomRecommendations (services/dynamicCompatibilityScoring.mjs:335:34)
      at Object.<anonymous> (tests/services/dynamicCompatibilityScoring.test.mjs:405:31)

FAIL tests/unit/breedingAnalyticsService.test.mjs
  ● Breeding Analytics Service › Lineage Tracking › should track breeding pair lineage

    PrismaClientValidationError: 
    Invalid `prisma.horse.count()` invocation:

    {
      select: {
        _count: {
          select: {
            _all: true
          }
        }
      },
      where: {
        user: {
          connect: {
          ~~~~~~~
            id: "bde5625c-4468-4580-9462-a600c46ea9cb"
          },
    ?     is?: UserWhereInput | Null,
    ?     isNot?: UserWhereInput | Null
        },
        sireId: 146733,
        damId: 146734
      }
    }

    Unknown argument `connect`. Available options are marked with ?.

    [0m [90m 165 |[39m     }
     [90m 166 |[39m
    [31m[1m>[22m[39m[90m 167 |[39m     [36mconst[39m foalCount [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcount({
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 168 |[39m       where[33m:[39m { user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m sireId[33m:[39m testStallion[33m.[39mid[33m,[39m damId[33m:[39m testMare[33m.[39mid }[33m,[39m
     [90m 169 |[39m     })[33m;[39m
     [90m 170 |[39m     [36mif[39m (foalCount [33m<[39m [35m5[39m) {[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at ensureBreedingData (tests/unit/breedingAnalyticsService.test.mjs:167:23)
      at Object.<anonymous> (tests/unit/breedingAnalyticsService.test.mjs:180:5)

  ● Breeding Analytics Service › Lineage Tracking › should identify parent-offspring relationships

    PrismaClientValidationError: 
    Invalid `prisma.horse.count()` invocation:

    {
      select: {
        _count: {
          select: {
            _all: true
          }
        }
      },
      where: {
        user: {
          connect: {
          ~~~~~~~
            id: "bde5625c-4468-4580-9462-a600c46ea9cb"
          },
    ?     is?: UserWhereInput | Null,
    ?     isNot?: UserWhereInput | Null
        },
        sireId: 146733,
        damId: 146734
      }
    }

    Unknown argument `connect`. Available options are marked with ?.

    [0m [90m 165 |[39m     }
     [90m 166 |[39m
    [31m[1m>[22m[39m[90m 167 |[39m     [36mconst[39m foalCount [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcount({
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 168 |[39m       where[33m:[39m { user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m sireId[33m:[39m testStallion[33m.[39mid[33m,[39m damId[33m:[39m testMare[33m.[39mid }[33m,[39m
     [90m 169 |[39m     })[33m;[39m
     [90m 170 |[39m     [36mif[39m (foalCount [33m<[39m [35m5[39m) {[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at ensureBreedingData (tests/unit/breedingAnalyticsService.test.mjs:167:23)
      at Object.<anonymous> (tests/unit/breedingAnalyticsService.test.mjs:180:5)

  ● Breeding Analytics Service › Trait Inheritance Analysis › should analyze trait inheritance patterns

    PrismaClientValidationError: 
    Invalid `prisma.horse.count()` invocation:

    {
      select: {
        _count: {
          select: {
            _all: true
          }
        }
      },
      where: {
        user: {
          connect: {
          ~~~~~~~
            id: "bde5625c-4468-4580-9462-a600c46ea9cb"
          },
    ?     is?: UserWhereInput | Null,
    ?     isNot?: UserWhereInput | Null
        },
        sireId: 146733,
        damId: 146734
      }
    }

    Unknown argument `connect`. Available options are marked with ?.

    [0m [90m 165 |[39m     }
     [90m 166 |[39m
    [31m[1m>[22m[39m[90m 167 |[39m     [36mconst[39m foalCount [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcount({
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 168 |[39m       where[33m:[39m { user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m sireId[33m:[39m testStallion[33m.[39mid[33m,[39m damId[33m:[39m testMare[33m.[39mid }[33m,[39m
     [90m 169 |[39m     })[33m;[39m
     [90m 170 |[39m     [36mif[39m (foalCount [33m<[39m [35m5[39m) {[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at ensureBreedingData (tests/unit/breedingAnalyticsService.test.mjs:167:23)
      at Object.<anonymous> (tests/unit/breedingAnalyticsService.test.mjs:180:5)

  ● Breeding Analytics Service › Trait Inheritance Analysis › should calculate trait inheritance rates

    PrismaClientValidationError: 
    Invalid `prisma.horse.count()` invocation:

    {
      select: {
        _count: {
          select: {
            _all: true
          }
        }
      },
      where: {
        user: {
          connect: {
          ~~~~~~~
            id: "bde5625c-4468-4580-9462-a600c46ea9cb"
          },
    ?     is?: UserWhereInput | Null,
    ?     isNot?: UserWhereInput | Null
        },
        sireId: 146733,
        damId: 146734
      }
    }

    Unknown argument `connect`. Available options are marked with ?.

    [0m [90m 165 |[39m     }
     [90m 166 |[39m
    [31m[1m>[22m[39m[90m 167 |[39m     [36mconst[39m foalCount [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcount({
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 168 |[39m       where[33m:[39m { user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m sireId[33m:[39m testStallion[33m.[39mid[33m,[39m damId[33m:[39m testMare[33m.[39mid }[33m,[39m
     [90m 169 |[39m     })[33m;[39m
     [90m 170 |[39m     [36mif[39m (foalCount [33m<[39m [35m5[39m) {[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at ensureBreedingData (tests/unit/breedingAnalyticsService.test.mjs:167:23)
      at Object.<anonymous> (tests/unit/breedingAnalyticsService.test.mjs:180:5)

  ● Breeding Analytics Service › Breeding Success Metrics › should calculate breeding success rates

    PrismaClientValidationError: 
    Invalid `prisma.horse.count()` invocation:

    {
      select: {
        _count: {
          select: {
            _all: true
          }
        }
      },
      where: {
        user: {
          connect: {
          ~~~~~~~
            id: "bde5625c-4468-4580-9462-a600c46ea9cb"
          },
    ?     is?: UserWhereInput | Null,
    ?     isNot?: UserWhereInput | Null
        },
        sireId: 146733,
        damId: 146734
      }
    }

    Unknown argument `connect`. Available options are marked with ?.

    [0m [90m 165 |[39m     }
     [90m 166 |[39m
    [31m[1m>[22m[39m[90m 167 |[39m     [36mconst[39m foalCount [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcount({
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 168 |[39m       where[33m:[39m { user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m sireId[33m:[39m testStallion[33m.[39mid[33m,[39m damId[33m:[39m testMare[33m.[39mid }[33m,[39m
     [90m 169 |[39m     })[33m;[39m
     [90m 170 |[39m     [36mif[39m (foalCount [33m<[39m [35m5[39m) {[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at ensureBreedingData (tests/unit/breedingAnalyticsService.test.mjs:167:23)
      at Object.<anonymous> (tests/unit/breedingAnalyticsService.test.mjs:180:5)

  ● Breeding Analytics Service › Breeding Success Metrics › should track foal development outcomes

    PrismaClientValidationError: 
    Invalid `prisma.horse.count()` invocation:

    {
      select: {
        _count: {
          select: {
            _all: true
          }
        }
      },
      where: {
        user: {
          connect: {
          ~~~~~~~
            id: "bde5625c-4468-4580-9462-a600c46ea9cb"
          },
    ?     is?: UserWhereInput | Null,
    ?     isNot?: UserWhereInput | Null
        },
        sireId: 146733,
        damId: 146734
      }
    }

    Unknown argument `connect`. Available options are marked with ?.

    [0m [90m 165 |[39m     }
     [90m 166 |[39m
    [31m[1m>[22m[39m[90m 167 |[39m     [36mconst[39m foalCount [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcount({
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 168 |[39m       where[33m:[39m { user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m sireId[33m:[39m testStallion[33m.[39mid[33m,[39m damId[33m:[39m testMare[33m.[39mid }[33m,[39m
     [90m 169 |[39m     })[33m;[39m
     [90m 170 |[39m     [36mif[39m (foalCount [33m<[39m [35m5[39m) {[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at ensureBreedingData (tests/unit/breedingAnalyticsService.test.mjs:167:23)
      at Object.<anonymous> (tests/unit/breedingAnalyticsService.test.mjs:180:5)

  ● Breeding Analytics Service › Statistical Analysis › should calculate average offspring stats

    PrismaClientValidationError: 
    Invalid `prisma.horse.count()` invocation:

    {
      select: {
        _count: {
          select: {
            _all: true
          }
        }
      },
      where: {
        user: {
          connect: {
          ~~~~~~~
            id: "bde5625c-4468-4580-9462-a600c46ea9cb"
          },
    ?     is?: UserWhereInput | Null,
    ?     isNot?: UserWhereInput | Null
        },
        sireId: 146733,
        damId: 146734
      }
    }

    Unknown argument `connect`. Available options are marked with ?.

    [0m [90m 165 |[39m     }
     [90m 166 |[39m
    [31m[1m>[22m[39m[90m 167 |[39m     [36mconst[39m foalCount [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcount({
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 168 |[39m       where[33m:[39m { user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m sireId[33m:[39m testStallion[33m.[39mid[33m,[39m damId[33m:[39m testMare[33m.[39mid }[33m,[39m
     [90m 169 |[39m     })[33m;[39m
     [90m 170 |[39m     [36mif[39m (foalCount [33m<[39m [35m5[39m) {[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at ensureBreedingData (tests/unit/breedingAnalyticsService.test.mjs:167:23)
      at Object.<anonymous> (tests/unit/breedingAnalyticsService.test.mjs:180:5)

  ● Breeding Analytics Service › Statistical Analysis › should compare offspring to parent averages

    PrismaClientValidationError: 
    Invalid `prisma.horse.count()` invocation:

    {
      select: {
        _count: {
          select: {
            _all: true
          }
        }
      },
      where: {
        user: {
          connect: {
          ~~~~~~~
            id: "bde5625c-4468-4580-9462-a600c46ea9cb"
          },
    ?     is?: UserWhereInput | Null,
    ?     isNot?: UserWhereInput | Null
        },
        sireId: 146733,
        damId: 146734
      }
    }

    Unknown argument `connect`. Available options are marked with ?.

    [0m [90m 165 |[39m     }
     [90m 166 |[39m
    [31m[1m>[22m[39m[90m 167 |[39m     [36mconst[39m foalCount [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcount({
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 168 |[39m       where[33m:[39m { user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m sireId[33m:[39m testStallion[33m.[39mid[33m,[39m damId[33m:[39m testMare[33m.[39mid }[33m,[39m
     [90m 169 |[39m     })[33m;[39m
     [90m 170 |[39m     [36mif[39m (foalCount [33m<[39m [35m5[39m) {[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at ensureBreedingData (tests/unit/breedingAnalyticsService.test.mjs:167:23)
      at Object.<anonymous> (tests/unit/breedingAnalyticsService.test.mjs:180:5)

  ● Breeding Analytics Service › Error Handling › should handle user with no breeding data

    PrismaClientValidationError: 
    Invalid `prisma.horse.count()` invocation:

    {
      select: {
        _count: {
          select: {
            _all: true
          }
        }
      },
      where: {
        user: {
          connect: {
          ~~~~~~~
            id: "bde5625c-4468-4580-9462-a600c46ea9cb"
          },
    ?     is?: UserWhereInput | Null,
    ?     isNot?: UserWhereInput | Null
        },
        sireId: 146733,
        damId: 146734
      }
    }

    Unknown argument `connect`. Available options are marked with ?.

    [0m [90m 165 |[39m     }
     [90m 166 |[39m
    [31m[1m>[22m[39m[90m 167 |[39m     [36mconst[39m foalCount [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcount({
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 168 |[39m       where[33m:[39m { user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m sireId[33m:[39m testStallion[33m.[39mid[33m,[39m damId[33m:[39m testMare[33m.[39mid }[33m,[39m
     [90m 169 |[39m     })[33m;[39m
     [90m 170 |[39m     [36mif[39m (foalCount [33m<[39m [35m5[39m) {[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at ensureBreedingData (tests/unit/breedingAnalyticsService.test.mjs:167:23)
      at Object.<anonymous> (tests/unit/breedingAnalyticsService.test.mjs:180:5)

  ● Breeding Analytics Service › Error Handling › should handle non-existent user gracefully

    PrismaClientValidationError: 
    Invalid `prisma.horse.count()` invocation:

    {
      select: {
        _count: {
          select: {
            _all: true
          }
        }
      },
      where: {
        user: {
          connect: {
          ~~~~~~~
            id: "bde5625c-4468-4580-9462-a600c46ea9cb"
          },
    ?     is?: UserWhereInput | Null,
    ?     isNot?: UserWhereInput | Null
        },
        sireId: 146733,
        damId: 146734
      }
    }

    Unknown argument `connect`. Available options are marked with ?.

    [0m [90m 165 |[39m     }
     [90m 166 |[39m
    [31m[1m>[22m[39m[90m 167 |[39m     [36mconst[39m foalCount [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcount({
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 168 |[39m       where[33m:[39m { user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m sireId[33m:[39m testStallion[33m.[39mid[33m,[39m damId[33m:[39m testMare[33m.[39mid }[33m,[39m
     [90m 169 |[39m     })[33m;[39m
     [90m 170 |[39m     [36mif[39m (foalCount [33m<[39m [35m5[39m) {[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at ensureBreedingData (tests/unit/breedingAnalyticsService.test.mjs:167:23)
      at Object.<anonymous> (tests/unit/breedingAnalyticsService.test.mjs:180:5)

FAIL tests/schema-validation.test.mjs
  ● Schema Validation › should create groom assignment

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 146742,
        groomId: 73401,
        user: {
        ~~~~
          connect: {
            id: "schema-test-user-1769625746922-xu66vjsvu"
          }
        },
        priority: 1,
        notes: "Test assignment",
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isActive?: Boolean,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 180 |[39m     })[33m;[39m
     [90m 181 |[39m
    [31m[1m>[22m[39m[90m 182 |[39m     [36mconst[39m assignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                        [31m[1m^[22m[39m
     [90m 183 |[39m       data[33m:[39m {
     [90m 184 |[39m         foalId[33m:[39m horse[33m.[39mid[33m,[39m
     [90m 185 |[39m         groomId[33m:[39m groom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/schema-validation.test.mjs:182:24)

FAIL tests/trainingController-business-logic.test.mjs
  ● ��️ INTEGRATION: Training Controller Business Logic - Complete Training Workflow › BUSINESS RULE: canTrain() Function Validation › RETURNS eligible true for horse that meets all requirements

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Controller Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "f1110248-08c1-4bf3-9775-67ff6e38b8ae"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:27.264Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 162 |[39m
     [90m 163 |[39m     [90m// Create test horses[39m
    [31m[1m>[22m[39m[90m 164 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 165 |[39m       data[33m:[39m {
     [90m 166 |[39m         name[33m:[39m [32m'Controller Adult Horse'[39m[33m,[39m
     [90m 167 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/trainingController-business-logic.test.mjs:164:18)

  ● ��️ INTEGRATION: Training Controller Business Logic - Complete Training Workflow › BUSINESS RULE: canTrain() Function Validation › RETURNS eligible false for horse under 3 years old

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Controller Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "f1110248-08c1-4bf3-9775-67ff6e38b8ae"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:27.264Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 162 |[39m
     [90m 163 |[39m     [90m// Create test horses[39m
    [31m[1m>[22m[39m[90m 164 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 165 |[39m       data[33m:[39m {
     [90m 166 |[39m         name[33m:[39m [32m'Controller Adult Horse'[39m[33m,[39m
     [90m 167 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/trainingController-business-logic.test.mjs:164:18)

  ● ��️ INTEGRATION: Training Controller Business Logic - Complete Training Workflow › BUSINESS RULE: canTrain() Function Validation › RETURNS eligible false for horse with recent training (global cooldown)

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Controller Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "f1110248-08c1-4bf3-9775-67ff6e38b8ae"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:27.264Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 162 |[39m
     [90m 163 |[39m     [90m// Create test horses[39m
    [31m[1m>[22m[39m[90m 164 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 165 |[39m       data[33m:[39m {
     [90m 166 |[39m         name[33m:[39m [32m'Controller Adult Horse'[39m[33m,[39m
     [90m 167 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/trainingController-business-logic.test.mjs:164:18)

  ● ��️ INTEGRATION: Training Controller Business Logic - Complete Training Workflow › BUSINESS RULE: canTrain() Function Validation › RETURNS eligible false for non-existent horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Controller Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "f1110248-08c1-4bf3-9775-67ff6e38b8ae"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:27.264Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 162 |[39m
     [90m 163 |[39m     [90m// Create test horses[39m
    [31m[1m>[22m[39m[90m 164 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 165 |[39m       data[33m:[39m {
     [90m 166 |[39m         name[33m:[39m [32m'Controller Adult Horse'[39m[33m,[39m
     [90m 167 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/trainingController-business-logic.test.mjs:164:18)

  ● ��️ INTEGRATION: Training Controller Business Logic - Complete Training Workflow › BUSINESS RULE: canTrain() Function Validation › THROWS error for invalid input parameters

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Controller Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "f1110248-08c1-4bf3-9775-67ff6e38b8ae"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:27.264Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 162 |[39m
     [90m 163 |[39m     [90m// Create test horses[39m
    [31m[1m>[22m[39m[90m 164 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 165 |[39m       data[33m:[39m {
     [90m 166 |[39m         name[33m:[39m [32m'Controller Adult Horse'[39m[33m,[39m
     [90m 167 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/trainingController-business-logic.test.mjs:164:18)

  ● ��️ INTEGRATION: Training Controller Business Logic - Complete Training Workflow › BUSINESS RULE: trainHorse() Function Complete Workflow › EXECUTES successful training workflow for eligible horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Controller Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "f1110248-08c1-4bf3-9775-67ff6e38b8ae"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:27.264Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 162 |[39m
     [90m 163 |[39m     [90m// Create test horses[39m
    [31m[1m>[22m[39m[90m 164 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 165 |[39m       data[33m:[39m {
     [90m 166 |[39m         name[33m:[39m [32m'Controller Adult Horse'[39m[33m,[39m
     [90m 167 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/trainingController-business-logic.test.mjs:164:18)

  ● ��️ INTEGRATION: Training Controller Business Logic - Complete Training Workflow › BUSINESS RULE: trainHorse() Function Complete Workflow › RETURNS error for ineligible horse (age restriction)

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Controller Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "f1110248-08c1-4bf3-9775-67ff6e38b8ae"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:27.264Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 162 |[39m
     [90m 163 |[39m     [90m// Create test horses[39m
    [31m[1m>[22m[39m[90m 164 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 165 |[39m       data[33m:[39m {
     [90m 166 |[39m         name[33m:[39m [32m'Controller Adult Horse'[39m[33m,[39m
     [90m 167 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/trainingController-business-logic.test.mjs:164:18)

  ● ��️ INTEGRATION: Training Controller Business Logic - Complete Training Workflow › BUSINESS RULE: trainHorse() Function Complete Workflow › RETURNS error for horse in cooldown

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Controller Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "f1110248-08c1-4bf3-9775-67ff6e38b8ae"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:27.264Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 162 |[39m
     [90m 163 |[39m     [90m// Create test horses[39m
    [31m[1m>[22m[39m[90m 164 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 165 |[39m       data[33m:[39m {
     [90m 166 |[39m         name[33m:[39m [32m'Controller Adult Horse'[39m[33m,[39m
     [90m 167 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/trainingController-business-logic.test.mjs:164:18)

  ● ��️ INTEGRATION: Training Controller Business Logic - Complete Training Workflow › BUSINESS RULE: trainHorse() Function Complete Workflow › RETURNS error for non-existent horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Controller Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "f1110248-08c1-4bf3-9775-67ff6e38b8ae"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:27.264Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 162 |[39m
     [90m 163 |[39m     [90m// Create test horses[39m
    [31m[1m>[22m[39m[90m 164 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 165 |[39m       data[33m:[39m {
     [90m 166 |[39m         name[33m:[39m [32m'Controller Adult Horse'[39m[33m,[39m
     [90m 167 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/trainingController-business-logic.test.mjs:164:18)

  ● ��️ INTEGRATION: Training Controller Business Logic - Complete Training Workflow › BUSINESS RULE: trainHorse() Function Complete Workflow › THROWS error for invalid discipline

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Controller Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "f1110248-08c1-4bf3-9775-67ff6e38b8ae"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:27.264Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 162 |[39m
     [90m 163 |[39m     [90m// Create test horses[39m
    [31m[1m>[22m[39m[90m 164 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 165 |[39m       data[33m:[39m {
     [90m 166 |[39m         name[33m:[39m [32m'Controller Adult Horse'[39m[33m,[39m
     [90m 167 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/trainingController-business-logic.test.mjs:164:18)

  ● ��️ INTEGRATION: Training Controller Business Logic - Complete Training Workflow › BUSINESS RULE: getTrainingStatus() Function Validation › RETURNS accurate status for horse with no training history

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Controller Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "f1110248-08c1-4bf3-9775-67ff6e38b8ae"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:27.264Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 162 |[39m
     [90m 163 |[39m     [90m// Create test horses[39m
    [31m[1m>[22m[39m[90m 164 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 165 |[39m       data[33m:[39m {
     [90m 166 |[39m         name[33m:[39m [32m'Controller Adult Horse'[39m[33m,[39m
     [90m 167 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/trainingController-business-logic.test.mjs:164:18)

  ● ��️ INTEGRATION: Training Controller Business Logic - Complete Training Workflow › BUSINESS RULE: getTrainingStatus() Function Validation › RETURNS accurate status for horse with training history

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Controller Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "f1110248-08c1-4bf3-9775-67ff6e38b8ae"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:27.264Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 162 |[39m
     [90m 163 |[39m     [90m// Create test horses[39m
    [31m[1m>[22m[39m[90m 164 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 165 |[39m       data[33m:[39m {
     [90m 166 |[39m         name[33m:[39m [32m'Controller Adult Horse'[39m[33m,[39m
     [90m 167 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/trainingController-business-logic.test.mjs:164:18)

  ● ��️ INTEGRATION: Training Controller Business Logic - Complete Training Workflow › BUSINESS RULE: getTrainingStatus() Function Validation › RETURNS error status for non-existent horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Controller Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "f1110248-08c1-4bf3-9775-67ff6e38b8ae"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:27.264Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 162 |[39m
     [90m 163 |[39m     [90m// Create test horses[39m
    [31m[1m>[22m[39m[90m 164 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 165 |[39m       data[33m:[39m {
     [90m 166 |[39m         name[33m:[39m [32m'Controller Adult Horse'[39m[33m,[39m
     [90m 167 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/trainingController-business-logic.test.mjs:164:18)

  ● ��️ INTEGRATION: Training Controller Business Logic - Complete Training Workflow › BUSINESS RULE: getTrainableHorses() Function Validation › RETURNS empty array for user with no horses

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Controller Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "f1110248-08c1-4bf3-9775-67ff6e38b8ae"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:27.264Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 162 |[39m
     [90m 163 |[39m     [90m// Create test horses[39m
    [31m[1m>[22m[39m[90m 164 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 165 |[39m       data[33m:[39m {
     [90m 166 |[39m         name[33m:[39m [32m'Controller Adult Horse'[39m[33m,[39m
     [90m 167 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/trainingController-business-logic.test.mjs:164:18)

  ● ��️ INTEGRATION: Training Controller Business Logic - Complete Training Workflow › BUSINESS RULE: getTrainableHorses() Function Validation › RETURNS array of trainable horses for user

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Controller Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "f1110248-08c1-4bf3-9775-67ff6e38b8ae"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:27.264Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 162 |[39m
     [90m 163 |[39m     [90m// Create test horses[39m
    [31m[1m>[22m[39m[90m 164 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 165 |[39m       data[33m:[39m {
     [90m 166 |[39m         name[33m:[39m [32m'Controller Adult Horse'[39m[33m,[39m
     [90m 167 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/trainingController-business-logic.test.mjs:164:18)

  ● ��️ INTEGRATION: Training Controller Business Logic - Complete Training Workflow › BUSINESS RULE: getTrainableHorses() Function Validation › RETURNS empty array after training (horse in cooldown)

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Controller Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "f1110248-08c1-4bf3-9775-67ff6e38b8ae"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:27.264Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 162 |[39m
     [90m 163 |[39m     [90m// Create test horses[39m
    [31m[1m>[22m[39m[90m 164 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 165 |[39m       data[33m:[39m {
     [90m 166 |[39m         name[33m:[39m [32m'Controller Adult Horse'[39m[33m,[39m
     [90m 167 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/trainingController-business-logic.test.mjs:164:18)

  ● ��️ INTEGRATION: Training Controller Business Logic - Complete Training Workflow › API INTEGRATION: trainRouteHandler() Function Validation › PROCESSES valid training request and RETURNS success response

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Controller Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "f1110248-08c1-4bf3-9775-67ff6e38b8ae"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:27.264Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 162 |[39m
     [90m 163 |[39m     [90m// Create test horses[39m
    [31m[1m>[22m[39m[90m 164 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 165 |[39m       data[33m:[39m {
     [90m 166 |[39m         name[33m:[39m [32m'Controller Adult Horse'[39m[33m,[39m
     [90m 167 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/trainingController-business-logic.test.mjs:164:18)

  ● ��️ INTEGRATION: Training Controller Business Logic - Complete Training Workflow › API INTEGRATION: trainRouteHandler() Function Validation › RETURNS error response for ineligible horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Controller Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "f1110248-08c1-4bf3-9775-67ff6e38b8ae"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:27.264Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 162 |[39m
     [90m 163 |[39m     [90m// Create test horses[39m
    [31m[1m>[22m[39m[90m 164 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 165 |[39m       data[33m:[39m {
     [90m 166 |[39m         name[33m:[39m [32m'Controller Adult Horse'[39m[33m,[39m
     [90m 167 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/trainingController-business-logic.test.mjs:164:18)

  ● ��️ INTEGRATION: Training Controller Business Logic - Complete Training Workflow › API INTEGRATION: trainRouteHandler() Function Validation › RETURNS error response for horse in cooldown

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Controller Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "f1110248-08c1-4bf3-9775-67ff6e38b8ae"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:27.264Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 162 |[39m
     [90m 163 |[39m     [90m// Create test horses[39m
    [31m[1m>[22m[39m[90m 164 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 165 |[39m       data[33m:[39m {
     [90m 166 |[39m         name[33m:[39m [32m'Controller Adult Horse'[39m[33m,[39m
     [90m 167 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/trainingController-business-logic.test.mjs:164:18)

  ● ��️ INTEGRATION: Training Controller Business Logic - Complete Training Workflow › API INTEGRATION: trainRouteHandler() Function Validation › RETURNS error response for non-existent horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Controller Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "f1110248-08c1-4bf3-9775-67ff6e38b8ae"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:27.264Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 162 |[39m
     [90m 163 |[39m     [90m// Create test horses[39m
    [31m[1m>[22m[39m[90m 164 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 165 |[39m       data[33m:[39m {
     [90m 166 |[39m         name[33m:[39m [32m'Controller Adult Horse'[39m[33m,[39m
     [90m 167 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/trainingController-business-logic.test.mjs:164:18)

  ● ��️ INTEGRATION: Training Controller Business Logic - Complete Training Workflow › API INTEGRATION: trainRouteHandler() Function Validation › RETURNS error response for invalid discipline

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Controller Adult Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "f1110248-08c1-4bf3-9775-67ff6e38b8ae"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T18:42:27.264Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 162 |[39m
     [90m 163 |[39m     [90m// Create test horses[39m
    [31m[1m>[22m[39m[90m 164 |[39m     adultHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 165 |[39m       data[33m:[39m {
     [90m 166 |[39m         name[33m:[39m [32m'Controller Adult Horse'[39m[33m,[39m
     [90m 167 |[39m         age[33m:[39m [35m4[39m[33m,[39m [90m// Eligible for training[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/trainingController-business-logic.test.mjs:164:18)


Test Suites: 34 failed, 1 skipped, 186 passed, 220 of 221 total
Tests:       285 failed, 30 skipped, 3225 passed, 3540 total
Snapshots:   0 total
Time:        293.897 s
Ran all test suites.
🧹 Running global teardown...
[Teardown] Disconnecting Prisma instances...
[Teardown] ✅ Prisma instances disconnected
✅ Global teardown completed successfully

Jest has detected the following 4 open handles potentially keeping Jest from exiting:

  ●  TCPSERVERWRAP

    [0m [90m 44 |[39m   [36mlet[39m testHorse[33m;[39m
     [90m 45 |[39m   [36mconst[39m trainingRequest [33m=[39m () [33m=>[39m request(app)
    [31m[1m>[22m[39m[90m 46 |[39m     [33m.[39mpost([32m'/api/training/train'[39m)
     [90m    |[39m      [31m[1m^[22m[39m
     [90m 47 |[39m     [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)
     [90m 48 |[39m     [33m.[39m[36mset[39m([32m'x-test-skip-csrf'[39m[33m,[39m [32m'true'[39m)[33m;[39m
     [90m 49 |[39m[0m

      at Test.serverAddress (node_modules/supertest/lib/test.js:63:35)
      at new Test (node_modules/supertest/lib/test.js:49:14)
      at Object.obj.<computed> [as post] (node_modules/supertest/index.js:39:18)
      at trainingRequest (tests/integration/userProgressAPI.integration.test.mjs:46:6)
      at Object.<anonymous> (tests/integration/userProgressAPI.integration.test.mjs:218:38)


  ●  TCPSERVERWRAP

    [0m [90m 217 |[39m       [90m// Test the new competition entry API endpoint[39m
     [90m 218 |[39m       [36mconst[39m response [33m=[39m [36mawait[39m request(app)
    [31m[1m>[22m[39m[90m 219 |[39m         [33m.[39mpost([32m'/api/competition/enter'[39m)
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 220 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)
     [90m 221 |[39m         [33m.[39m[36mset[39m([32m'x-test-skip-csrf'[39m[33m,[39m [32m'true'[39m)
     [90m 222 |[39m         [33m.[39msend({[0m

      at Test.serverAddress (node_modules/supertest/lib/test.js:63:35)
      at new Test (node_modules/supertest/lib/test.js:49:14)
      at Object.obj.<computed> [as post] (node_modules/supertest/index.js:39:18)
      at Object.<anonymous> (tests/integration/competitionWorkflow.integration.test.mjs:219:10)


  ●  TCPSERVERWRAP

    [0m [90m 186 |[39m     it([32m'should block training for young horse (under 3 years)'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 187 |[39m       [36mconst[39m response [33m=[39m [36mawait[39m request(app)
    [31m[1m>[22m[39m[90m 188 |[39m         [33m.[39mpost([32m'/api/training/train'[39m)
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 189 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)
     [90m 190 |[39m         [33m.[39m[36mset[39m([32m'x-test-skip-csrf'[39m[33m,[39m [32m'true'[39m)
     [90m 191 |[39m         [33m.[39msend({[0m

      at Test.serverAddress (node_modules/supertest/lib/test.js:63:35)
      at new Test (node_modules/supertest/lib/test.js:49:14)
      at Object.obj.<computed> [as post] (node_modules/supertest/index.js:39:18)
      at Object.<anonymous> (tests/integration/trainingProgression.integration.test.mjs:188:10)


  ●  TCPSERVERWRAP

    [0m [90m 269 |[39m       [90m// Attempt to train same horse immediately (should fail)[39m
     [90m 270 |[39m       [36mconst[39m response [33m=[39m [36mawait[39m request(app)
    [31m[1m>[22m[39m[90m 271 |[39m         [33m.[39mpost([32m'/api/training/train'[39m)
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 272 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)
     [90m 273 |[39m         [33m.[39m[36mset[39m([32m'x-test-skip-csrf'[39m[33m,[39m [32m'true'[39m)
     [90m 274 |[39m         [33m.[39msend({[0m

      at Test.serverAddress (node_modules/supertest/lib/test.js:63:35)
      at new Test (node_modules/supertest/lib/test.js:49:14)
      at Object.obj.<computed> [as post] (node_modules/supertest/index.js:39:18)
      at Object.<anonymous> (tests/integration/trainingProgression.integration.test.mjs:271:10)

