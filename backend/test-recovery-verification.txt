
> equoria-backend@1.0.0 test
> node --experimental-vm-modules node_modules/jest/bin/jest.js

(node:52116) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
FAIL __tests__/integration/rate-limiting.test.mjs (33.8 s)
  ‚óè Console

    console.log
      [2025-11-21 17:49:07] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:07] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:07] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:49:26] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:26] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:26] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:26] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:26] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:26] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:26] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:26] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:27] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:27] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:27] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:27] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:27] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:27] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:27] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:27] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:27] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:27] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:27] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:27] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:27] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:27] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:27] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:27] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:27] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:27] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:27] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:27] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:27] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:27] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:27] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:27] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:27] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:27] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:27] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:27] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:27] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:27] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:27] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:28] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:28] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:28] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:28] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:28] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:28] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:28] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:28] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:28] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:28] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:28] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:28] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:28] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:28] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:28] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:28] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:28] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:28] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:28] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:28] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:28] warn: [Rate Limit] IP ::ffff:127.0.0.1 exceeded auth rate limit

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:28] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:28] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:28] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:28] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:28] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:28] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:28] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:28] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:28] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:28] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:28] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:28] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:28] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:28] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:28] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:28] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:28] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:29] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:29] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:29] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:29] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:29] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:29] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:29] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:29] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:29] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:29] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:29] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:29] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:29] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:29] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:29] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:29] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:29] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:29] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:29] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:29] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:29] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:29] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:29] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:29] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:29] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:29] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:29] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:29] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:29] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:29] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:29] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:29] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:29] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:29] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:29] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:29] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:29] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:29] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:30] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:30] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:30] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:30] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:30] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:30] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:30] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:30] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:30] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:30] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:30] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:30] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:30] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:30] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:30] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:30] warn: [Rate Limit] IP ::ffff:127.0.0.1 exceeded auth rate limit

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:30] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:30] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:30] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:30] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:30] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:30] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:30] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:30] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:30] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:30] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:30] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:30] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:30] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:30] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:30] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:30] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:30] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:30] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:30] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:30] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:30] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:30] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:30] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:30] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:30] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:30] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:30] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:30] warn: [Rate Limit] IP 192.168.1.1 exceeded auth rate limit

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:30] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:31] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:31] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:31] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:31] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:31] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:31] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:31] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:31] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:31] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: reg_0_1763765371142@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=c3d821f90d053a47d2b078b3dd842a867cdbed9b6e509133e0500e2d25e429e2

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:49:31] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:31] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:31] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:31] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:31] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:31] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: reg_1_1763765371583@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=4bc921e6fedeb34351c91856dfcbd3b2584fde5d68eace87de8646e6ff648ce3

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:49:31] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:31] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:31] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:32] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:32] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:32] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: reg_2_1763765371969@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=9f8dfc79dc5c3eb3d960861c051d8517a2307241b6ebde49aa547c628a3513d7

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:49:32] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:32] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:32] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:32] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:32] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:32] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: reg_3_1763765372365@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=f60d31dece04b563767eec01d9efc9547f4cced9821a24b6dfaae8dfc9b3c79c

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:49:32] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:32] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:32] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:33] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:33] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:33] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: reg_4_1763765372754@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=775a1e67473989cf3f2b72eb2fc1c88eadd5089d2aaec6ab1c5c45b77ef07b3a

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:49:33] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:33] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:33] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:33] warn: [Rate Limit] IP ::ffff:127.0.0.1 exceeded auth rate limit

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:33] info: [POST] /api/auth/register - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:33] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:33] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:33] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:33] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: test_1763765373163@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=7e1a4a0bfc8e6dd473c418f76604279e7665d037079213eec1efdc81ca7ac985

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:49:33] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:33] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:33] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:33] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:33] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:33] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:33] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:33] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:33] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:33] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:33] warn: [TokenRotation] Token reuse detected

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:33] warn: [TokenRotation] Token family invalidated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:33] warn: [TokenRotation] Token reuse detected during rotation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:33] warn: [authController.refreshToken] Token family invalidated due to reuse detection

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:33] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:33] error: [POST] /api/auth/refresh-token - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:33] error: Error Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:33] info: [POST] /api/auth/refresh-token - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:33] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:33] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:33] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:33] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:33] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:33] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:34] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:34] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:34] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:34] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:34] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:34] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:34] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:34] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:34] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:34] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:34] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:34] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:34] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:34] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:34] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:34] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:34] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:34] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:34] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:34] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:34] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:34] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:34] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:34] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:34] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:34] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:34] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:34] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:34] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:34] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:34] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:34] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:34] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:34] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:34] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:34] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:34] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:34] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:34] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:34] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:34] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:34] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:34] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:34] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:34] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:34] warn: [Rate Limit] IP ::ffff:127.0.0.1 exceeded auth rate limit

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:34] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:36] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:37] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:37] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:37] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:37] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:37] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:37] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:37] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:37] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:37] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:37] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:37] warn: [Rate Limit] IP ::ffff:127.0.0.1 exceeded auth rate limit

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:37] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:37] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:37] warn: [Rate Limit] IP ::ffff:127.0.0.1 exceeded auth rate limit

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:37] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:37] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:37] warn: [Rate Limit] IP ::ffff:127.0.0.1 exceeded auth rate limit

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:37] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:37] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:37] warn: [Rate Limit] IP ::ffff:127.0.0.1 exceeded auth rate limit

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:37] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:37] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:37] warn: [Rate Limit] IP ::ffff:127.0.0.1 exceeded auth rate limit

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:37] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:37] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:37] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:37] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:37] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:37] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:37] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:37] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:37] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:37] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:37] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:37] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:37] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:37] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:37] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:37] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:37] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:37] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:37] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:37] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:37] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:37] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:37] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:37] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:37] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:37] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:37] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:37] warn: [Validation] Input validation failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:37] info: [POST] /api/auth/login - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:37] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:37] warn: [Validation] Input validation failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:37] info: [POST] /api/auth/login - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:37] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:37] warn: [Validation] Input validation failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:37] info: [POST] /api/auth/login - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:37] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:37] warn: [Validation] Input validation failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:37] info: [POST] /api/auth/login - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:38] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:38] warn: [Validation] Input validation failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:38] info: [POST] /api/auth/login - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:38] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:38] warn: [Rate Limit] IP ::ffff:127.0.0.1 exceeded auth rate limit

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:38] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:38] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:38] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:38] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:38] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:38] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:38] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:38] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:38] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:38] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:38] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:38] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:38] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:38] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:38] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:38] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:38] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:38] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:38] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:38] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:38] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:38] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:38] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:38] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:38] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:38] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:38] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:38] warn: [Rate Limit] IP ::ffff:127.0.0.1 exceeded auth rate limit

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:38] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

  ‚óè Rate Limiting System ‚Ä∫ Token Refresh Rate Limiting ‚Ä∫ should_rate_limit_token_refresh_attempts

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

    [0m [90m 267 |[39m           [33m.[39m[36mset[39m([32m'Cookie'[39m[33m,[39m [refreshToken])[33m;[39m
     [90m 268 |[39m
    [31m[1m>[22m[39m[90m 269 |[39m         expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 270 |[39m       }
     [90m 271 |[39m
     [90m 272 |[39m       [90m// 6th attempt should be rate limited[39m[0m

      at Object.<anonymous> (__tests__/integration/rate-limiting.test.mjs:269:33)

FAIL __tests__/integration/email-verification.test.mjs (7.898 s)
  ‚óè Console

    console.log
      [2025-11-21 17:49:38] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:38] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:39] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:49:39] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:39] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:39] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:39] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:39] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:39] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:39] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:39] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:39] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:40] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:40] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:40] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: newuser_1763765379841@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=824d4c832a6024c0a1bf82a7581ea97102f3cb3e720112ca3c028c497641f381

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:49:40] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:40] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:40] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:40] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:40] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:40] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: newuser2_1763765380359@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=818cdcad2a3a365b8a9b4e617d8684f5031d749da9b9564de828c91644ef18ca

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:49:40] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:40] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:40] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:41] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:41] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:41] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: devuser_1763765380839@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=927fb8f74f1d0b8eb11c2bd61f88c9e48bc1e591acd1577612707cc5b4d1f1ee

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:49:41] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:41] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:41] info: [GET] /api/auth/verify-email?token=56697ccc34687b95a4126451077205245abfad4e8d39503c385d78d32603df33

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:41] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:41] info: [EmailService] Welcome email (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:41] info: [GET] /api/auth/verify-email?token=56697ccc34687b95a4126451077205245abfad4e8d39503c385d78d32603df33 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:41] info: [GET] /api/auth/verify-email?token=6dbf56fc4d6014408035d53275e31c76df24999f7ba4f7bb2306a385b34e37f1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:41] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:41] info: [EmailService] Welcome email (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:41] info: [GET] /api/auth/verify-email?token=6dbf56fc4d6014408035d53275e31c76df24999f7ba4f7bb2306a385b34e37f1 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:41] info: [GET] /api/auth/verify-email?token=e1fcb9958e009dbee1e78c28d7bd09e42b3fe18090e27c20442e89296b244da9

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:41] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:41] info: [EmailService] Welcome email (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:41] info: [GET] /api/auth/verify-email?token=e1fcb9958e009dbee1e78c28d7bd09e42b3fe18090e27c20442e89296b244da9 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:41] info: [GET] /api/auth/verify-email

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:41] error: [authController.verifyEmail] Error verifying email: Verification token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:41] error: [GET] /api/auth/verify-email - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:41] error: Error Verification token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:41] info: [GET] /api/auth/verify-email - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:41] info: [GET] /api/auth/verify-email?token=invalid_token_here

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:41] error: [authController.verifyEmail] Error verifying email: Invalid or expired verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:41] error: [GET] /api/auth/verify-email?token=invalid_token_here - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:41] error: Error Invalid or expired verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:41] info: [GET] /api/auth/verify-email?token=invalid_token_here - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:42] info: [GET] /api/auth/verify-email?token=460e3a771a5af7171c52d729949e00d8e6e4c4178d90cddc1a1dfaf29a77d53b

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:42] error: [authController.verifyEmail] Error verifying email: Verification token has expired

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:42] error: [GET] /api/auth/verify-email?token=460e3a771a5af7171c52d729949e00d8e6e4c4178d90cddc1a1dfaf29a77d53b - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:42] error: Error Verification token has expired

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:42] info: [GET] /api/auth/verify-email?token=460e3a771a5af7171c52d729949e00d8e6e4c4178d90cddc1a1dfaf29a77d53b - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:42] info: [GET] /api/auth/verify-email?token=01d929d40c781c7ce20b056491b21baa62ba0d447c15b1c3f2a2e92595bf9ac1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:42] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:42] info: [EmailService] Welcome email (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:42] info: [GET] /api/auth/verify-email?token=01d929d40c781c7ce20b056491b21baa62ba0d447c15b1c3f2a2e92595bf9ac1 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:42] info: [GET] /api/auth/verify-email?token=01d929d40c781c7ce20b056491b21baa62ba0d447c15b1c3f2a2e92595bf9ac1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:42] error: [EmailVerification] Error verifying email token: Verification token has already been used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:42] error: [authController.verifyEmail] Error verifying email: Verification token has already been used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:42] error: [GET] /api/auth/verify-email?token=01d929d40c781c7ce20b056491b21baa62ba0d447c15b1c3f2a2e92595bf9ac1 - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:42] error: Error Verification token has already been used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:42] info: [GET] /api/auth/verify-email?token=01d929d40c781c7ce20b056491b21baa62ba0d447c15b1c3f2a2e92595bf9ac1 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:42] info: [GET] /api/auth/verify-email?token=9ab580e08dad16efe6b16c87061cb8ac8477793db83787143b8be3766cad6e52

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:42] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:42] info: [EmailService] Welcome email (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:42] info: [GET] /api/auth/verify-email?token=9ab580e08dad16efe6b16c87061cb8ac8477793db83787143b8be3766cad6e52 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:42] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:42] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:42] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:42] info: [POST] /api/auth/resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:42] info: [auth] Authenticated user 07cc44f7-b8e0-4080-8ef4-9d0905c9b122 for POST /resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:42] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:42] info: [EmailVerification] Resent verification email

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:42] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: emailint_1763765382383@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=59a3d960f8e2d713b134c2298082d30eecd1577b7930ab1e8b9bb937cd38cf2c

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:49:42] info: [POST] /api/auth/resend-verification - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:42] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:42] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:42] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:42] info: [POST] /api/auth/resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:42] warn: [auth] Missing token for POST /resend-verification from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:42] info: [POST] /api/auth/resend-verification - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:42] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:43] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:43] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:43] info: [POST] /api/auth/resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:43] info: [auth] Authenticated user c7da70ba-f4ba-48e0-bc8a-2587dcdc4eaa for POST /resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:43] error: [EmailVerification] Error resending verification email: Email is already verified

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:43] error: [authController.resendVerification] Error resending verification: Email is already verified

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:43] error: [POST] /api/auth/resend-verification - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:43] error: Error Email is already verified

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:43] info: [POST] /api/auth/resend-verification - 500

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:43] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:43] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:43] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:43] info: [POST] /api/auth/resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:43] info: [auth] Authenticated user f3c391c0-a7a2-4beb-9a84-ed0adf71458b for POST /resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:43] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:43] info: [EmailVerification] Resent verification email

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:43] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: emailint_1763765383098@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=780add183678e0c0575f886e30c65444fc60d2290c1409784839e6ba85fe3970

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:49:43] info: [POST] /api/auth/resend-verification - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:43] info: [POST] /api/auth/resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:43] info: [auth] Authenticated user f3c391c0-a7a2-4beb-9a84-ed0adf71458b for POST /resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:43] error: [EmailVerification] Error creating verification token: Please wait 300 seconds before requesting another verification email

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:43] error: [EmailVerification] Error resending verification email: Please wait 300 seconds before requesting another verification email

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:43] error: [authController.resendVerification] Error resending verification: Please wait 300 seconds before requesting another verification email

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:43] error: [POST] /api/auth/resend-verification - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:43] error: Error Please wait 300 seconds before requesting another verification email

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:43] info: [POST] /api/auth/resend-verification - 500

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:43] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:43] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:43] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:43] info: [POST] /api/auth/resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:43] info: [auth] Authenticated user d6878947-1113-4239-bff8-372617332562 for POST /resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:43] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:43] info: [EmailVerification] Resent verification email

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:43] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: emailint_1763765383375@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=efbc48d1bdfb439a772226811756a0768862c3ebc919b95d407a42ceaed3b93e

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:49:43] info: [POST] /api/auth/resend-verification - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:43] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:43] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:43] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:43] info: [GET] /api/auth/verification-status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:43] info: [auth] Authenticated user 999a8365-9028-4f84-8a75-931200d65ff3 for GET /verification-status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:43] info: [EmailVerification] Verification status check

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:43] info: [GET] /api/auth/verification-status - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:43] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:44] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:44] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:44] info: [GET] /api/auth/verification-status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:44] info: [auth] Authenticated user 8c3f017a-e1be-453a-97b6-c86188a1c960 for GET /verification-status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:44] info: [EmailVerification] Verification status check

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:44] info: [GET] /api/auth/verification-status - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:44] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:44] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:44] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:44] info: [GET] /api/auth/verification-status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:44] warn: [auth] Missing token for GET /verification-status from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:44] info: [GET] /api/auth/verification-status - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:44] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:44] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:44] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:44] info: [GET] /api/auth/verification-status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:44] info: [auth] Authenticated user cbd837a9-0685-4e05-b3e6-5af2c431de86 for GET /verification-status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:44] info: [EmailVerification] Verification status check

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:44] info: [GET] /api/auth/verification-status - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:44] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:44] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:44] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:44] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: workflow_1763765384594@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=72706182431dd8afe02163e408ac42eeeecf31b45a534d8abff2ca0a6b7844d0

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:49:44] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:44] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:44] info: [GET] /api/auth/verify-email?token=72706182431dd8afe02163e408ac42eeeecf31b45a534d8abff2ca0a6b7844d0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:44] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:44] info: [EmailService] Welcome email (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:44] info: [GET] /api/auth/verify-email?token=72706182431dd8afe02163e408ac42eeeecf31b45a534d8abff2ca0a6b7844d0 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:45] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:45] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:45] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:45] info: [GET] /api/auth/verification-status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:45] info: [auth] Authenticated user 5f82642e-8556-4a37-b8ec-357b28331fa7 for GET /verification-status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:45] info: [EmailVerification] Verification status check

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:45] info: [GET] /api/auth/verification-status - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:45] info: [POST] /api/auth/resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:45] info: [auth] Authenticated user 5f82642e-8556-4a37-b8ec-357b28331fa7 for POST /resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:45] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:45] info: [EmailVerification] Resent verification email

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:45] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: emailint_1763765385008@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=e62bdb30c170c00d57ae49a970093865cd45b400030198c5f2c6117e60f561c1

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:49:45] info: [POST] /api/auth/resend-verification - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:45] info: [GET] /api/auth/verify-email?token=e62bdb30c170c00d57ae49a970093865cd45b400030198c5f2c6117e60f561c1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:45] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:45] info: [EmailService] Welcome email (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:45] info: [GET] /api/auth/verify-email?token=e62bdb30c170c00d57ae49a970093865cd45b400030198c5f2c6117e60f561c1 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:45] info: [GET] /api/auth/verification-status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:45] info: [auth] Authenticated user 5f82642e-8556-4a37-b8ec-357b28331fa7 for GET /verification-status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:45] info: [EmailVerification] Verification status check

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:45] info: [GET] /api/auth/verification-status - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:45] info: [GET] /api/auth/verify-email?token=89b39d5c3324dfa1fe19cbf41c089b2b4aed53e9cc6b4906cbff21e7245363ea

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:45] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:45] info: [EmailService] Welcome email (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:45] info: [GET] /api/auth/verify-email?token=89b39d5c3324dfa1fe19cbf41c089b2b4aed53e9cc6b4906cbff21e7245363ea - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:45] info: [GET] /api/auth/verify-email?token=89b39d5c3324dfa1fe19cbf41c089b2b4aed53e9cc6b4906cbff21e7245363ea

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:45] error: [EmailVerification] Error verifying email token: Verification token has already been used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:45] error: [authController.verifyEmail] Error verifying email: Verification token has already been used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:45] error: [GET] /api/auth/verify-email?token=89b39d5c3324dfa1fe19cbf41c089b2b4aed53e9cc6b4906cbff21e7245363ea - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:45] error: Error Verification token has already been used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:45] info: [GET] /api/auth/verify-email?token=89b39d5c3324dfa1fe19cbf41c089b2b4aed53e9cc6b4906cbff21e7245363ea - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:45] info: [GET] /api/auth/verify-email?token=74de93fbc8cb52f6156331147fc287437cb2b13fe90bc01a8793ad0d87995c1d

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:45] info: [GET] /api/auth/verify-email?token=74de93fbc8cb52f6156331147fc287437cb2b13fe90bc01a8793ad0d87995c1d

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:45] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:45] info: [EmailService] Welcome email (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:45] info: [GET] /api/auth/verify-email?token=74de93fbc8cb52f6156331147fc287437cb2b13fe90bc01a8793ad0d87995c1d - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:45] error: [EmailVerification] Error verifying email token: Verification token has already been used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:45] error: [authController.verifyEmail] Error verifying email: Verification token has already been used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:45] error: [GET] /api/auth/verify-email?token=74de93fbc8cb52f6156331147fc287437cb2b13fe90bc01a8793ad0d87995c1d - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:45] error: Error Verification token has already been used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:45] info: [GET] /api/auth/verify-email?token=74de93fbc8cb52f6156331147fc287437cb2b13fe90bc01a8793ad0d87995c1d - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:45] info: [GET] /api/auth/verify-email?token=definitely_invalid_token_123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:45] error: [authController.verifyEmail] Error verifying email: Invalid or expired verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:45] error: [GET] /api/auth/verify-email?token=definitely_invalid_token_123 - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:45] error: Error Invalid or expired verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:45] info: [GET] /api/auth/verify-email?token=definitely_invalid_token_123 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:46] info: [GET] /api/auth/verify-email?token=

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:46] error: [authController.verifyEmail] Error verifying email: Verification token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:46] error: [GET] /api/auth/verify-email?token= - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:46] error: Error Verification token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:46] info: [GET] /api/auth/verify-email?token= - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:46] info: [GET] /api/auth/verify-email?token=

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:46] error: [authController.verifyEmail] Error verifying email: Verification token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:46] error: [GET] /api/auth/verify-email?token= - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:46] error: Error Verification token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:46] info: [GET] /api/auth/verify-email?token= - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:46] info: [GET] /api/auth/verify-email?token=aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:46] error: [authController.verifyEmail] Error verifying email: Invalid or expired verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:46] error: [GET] /api/auth/verify-email?token=aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:46] error: Error Invalid or expired verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:46] info: [GET] /api/auth/verify-email?token=aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:46] info: [GET] /api/auth/verify-email?token=%3Cscript%3Ealert(%22xss%22)%3C/script%3E

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:46] error: [authController.verifyEmail] Error verifying email: Invalid or expired verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:46] error: [GET] /api/auth/verify-email?token=%3Cscript%3Ealert(%22xss%22)%3C/script%3E - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:46] error: Error Invalid or expired verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:46] info: [GET] /api/auth/verify-email?token=%3Cscript%3Ealert(%22xss%22)%3C/script%3E - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:46] info: [GET] /api/auth/verify-email?token=%27;%20DROP%20TABLE%20users;%20--

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:46] error: [authController.verifyEmail] Error verifying email: Invalid or expired verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:46] error: [GET] /api/auth/verify-email?token=%27;%20DROP%20TABLE%20users;%20-- - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:46] error: Error Invalid or expired verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:46] info: [GET] /api/auth/verify-email?token=%27;%20DROP%20TABLE%20users;%20-- - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:46] info: [GET] /api/auth/verify-email?token=

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:46] error: [authController.verifyEmail] Error verifying email: Verification token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:46] error: [GET] /api/auth/verify-email?token= - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:46] error: Error Verification token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:46] info: [GET] /api/auth/verify-email?token= - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:46] info: [GET] /api/auth/verify-email?token=

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:46] error: [authController.verifyEmail] Error verifying email: Verification token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:46] error: [GET] /api/auth/verify-email?token= - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:46] error: Error Verification token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:46] info: [GET] /api/auth/verify-email?token= - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

  ‚óè Email Verification System - Integration Tests ‚Ä∫ GET /api/auth/verify-email ‚Ä∫ should_reject_missing_token

    expect(received).toContain(expected) // indexOf

    Matcher error: received value must not be null nor undefined

    Received has value: undefined

    [0m [90m 189 |[39m
     [90m 190 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m400[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 191 |[39m       expect(response[33m.[39mbody[33m.[39merror)[33m.[39mtoContain([32m'Verification token is required'[39m)[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 192 |[39m     })[33m;[39m
     [90m 193 |[39m
     [90m 194 |[39m     it([32m'should_reject_invalid_token'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.<anonymous> (__tests__/integration/email-verification.test.mjs:191:35)

  ‚óè Email Verification System - Integration Tests ‚Ä∫ GET /api/auth/verify-email ‚Ä∫ should_reject_invalid_token

    expect(received).toBeDefined()

    Received: undefined

    [0m [90m 198 |[39m
     [90m 199 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m400[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 200 |[39m       expect(response[33m.[39mbody[33m.[39merror)[33m.[39mtoBeDefined()[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 201 |[39m     })[33m;[39m
     [90m 202 |[39m
     [90m 203 |[39m     it([32m'should_reject_expired_token'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.<anonymous> (__tests__/integration/email-verification.test.mjs:200:35)

  ‚óè Email Verification System - Integration Tests ‚Ä∫ GET /api/auth/verify-email ‚Ä∫ should_reject_expired_token

    expect(received).toContain(expected) // indexOf

    Matcher error: received value must not be null nor undefined

    Received has value: undefined

    [0m [90m 214 |[39m
     [90m 215 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m400[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 216 |[39m       expect(response[33m.[39mbody[33m.[39merror)[33m.[39mtoContain([32m'expired'[39m)[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 217 |[39m     })[33m;[39m
     [90m 218 |[39m
     [90m 219 |[39m     it([32m'should_reject_already_used_token'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.<anonymous> (__tests__/integration/email-verification.test.mjs:216:35)

  ‚óè Email Verification System - Integration Tests ‚Ä∫ GET /api/auth/verify-email ‚Ä∫ should_reject_already_used_token

    expect(received).toContain(expected) // indexOf

    Matcher error: received value must not be null nor undefined

    Received has value: undefined

    [0m [90m 234 |[39m
     [90m 235 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m400[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 236 |[39m       expect(response[33m.[39mbody[33m.[39merror)[33m.[39mtoContain([32m'already been used'[39m)[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 237 |[39m     })[33m;[39m
     [90m 238 |[39m
     [90m 239 |[39m     it([32m'should_be_publicly_accessible_without_authentication'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.<anonymous> (__tests__/integration/email-verification.test.mjs:236:35)

  ‚óè Email Verification System - Integration Tests ‚Ä∫ POST /api/auth/resend-verification ‚Ä∫ should_reject_if_email_already_verified

    expect(received).toContain(expected) // indexOf

    Matcher error: received value must not be null nor undefined

    Received has value: undefined

    [0m [90m 307 |[39m
     [90m 308 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m500[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 309 |[39m       expect(response[33m.[39mbody[33m.[39merror)[33m.[39mtoContain([32m'already verified'[39m)[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 310 |[39m     })[33m;[39m
     [90m 311 |[39m
     [90m 312 |[39m     it([32m'should_enforce_rate_limiting'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.<anonymous> (__tests__/integration/email-verification.test.mjs:309:35)

  ‚óè Email Verification System - Integration Tests ‚Ä∫ POST /api/auth/resend-verification ‚Ä∫ should_enforce_rate_limiting

    expect(received).toContain(expected) // indexOf

    Matcher error: received value must not be null nor undefined

    Received has value: undefined

    [0m [90m 322 |[39m
     [90m 323 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m500[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 324 |[39m       expect(response[33m.[39mbody[33m.[39merror)[33m.[39mtoContain([32m'wait'[39m)[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 325 |[39m     })[33m;[39m
     [90m 326 |[39m
     [90m 327 |[39m     it([32m'should_cleanup_expired_tokens'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.<anonymous> (__tests__/integration/email-verification.test.mjs:324:35)

  ‚óè Email Verification System - Integration Tests ‚Ä∫ Complete Email Verification Workflow ‚Ä∫ should_prevent_multiple_verification_attempts

    expect(received).toContain(expected) // indexOf

    Matcher error: received value must not be null nor undefined

    Received has value: undefined

    [0m [90m 519 |[39m       )[33m;[39m
     [90m 520 |[39m       expect(response2[33m.[39mstatus)[33m.[39mtoBe([35m400[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 521 |[39m       expect(response2[33m.[39mbody[33m.[39merror)[33m.[39mtoContain([32m'already been used'[39m)[33m;[39m
     [90m     |[39m                                    [31m[1m^[22m[39m
     [90m 522 |[39m
     [90m 523 |[39m       [90m// Third verification attempt[39m
     [90m 524 |[39m       [36mconst[39m response3 [33m=[39m [36mawait[39m request(app)[33m.[39m[36mget[39m([0m

      at Object.<anonymous> (__tests__/integration/email-verification.test.mjs:521:36)

  ‚óè Email Verification System - Integration Tests ‚Ä∫ Security and Edge Cases ‚Ä∫ should_sanitize_error_messages_to_prevent_enumeration

    expect(received).not.toContain(expected) // indexOf

    Matcher error: received value must not be null nor undefined

    Received has value: undefined

    [0m [90m 562 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m400[39m)[33m;[39m
     [90m 563 |[39m       [90m// Should not reveal whether user exists or not[39m
    [31m[1m>[22m[39m[90m 564 |[39m       expect(response[33m.[39mbody[33m.[39merror)[33m.[39mnot[33m.[39mtoContain([32m'user'[39m)[33m;[39m
     [90m     |[39m                                       [31m[1m^[22m[39m
     [90m 565 |[39m       expect(response[33m.[39mbody[33m.[39merror)[33m.[39mnot[33m.[39mtoContain([32m'email'[39m)[33m;[39m
     [90m 566 |[39m     })[33m;[39m
     [90m 567 |[39m[0m

      at Object.<anonymous> (__tests__/integration/email-verification.test.mjs:564:39)

PASS __tests__/services/cronJobService.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:49:47] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Stopped job: weeklySalaries

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Stopped job: tokenCleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Stopped job: weeklySalaries

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Stopped job: tokenCleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Stopped job: weeklySalaries

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Stopped job: tokenCleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Stopped job: weeklySalaries

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Stopped job: tokenCleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Stopped job: weeklySalaries

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Stopped job: tokenCleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Stopped job: weeklySalaries

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Stopped job: tokenCleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Stopped job: weeklySalaries

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Stopped job: tokenCleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Stopped job: weeklySalaries

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Stopped job: tokenCleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Stopped job: weeklySalaries

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Stopped job: tokenCleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Manually triggering token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Starting expired token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Token cleanup completed. Removed 1 expired tokens

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Manual token cleanup completed: {"removed":1,"timestamp":"2025-11-21T22:49:47.529Z"}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Manually triggering token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Starting expired token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Token cleanup completed. Removed 0 expired tokens

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Manual token cleanup completed: {"removed":0,"timestamp":"2025-11-21T22:49:47.554Z"}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Manually triggering token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Starting expired token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Token cleanup completed. Removed 5 expired tokens

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Manual token cleanup completed: {"removed":5,"timestamp":"2025-11-21T22:49:47.587Z"}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Manually triggering token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Starting expired token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Token cleanup completed. Removed 2 expired tokens

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Manual token cleanup completed: {"removed":2,"timestamp":"2025-11-21T22:49:47.610Z"}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Manually triggering token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Starting expired token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Token cleanup completed. Removed 3 expired tokens

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Manual token cleanup completed: {"removed":3,"timestamp":"2025-11-21T22:49:47.639Z"}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Manually triggering token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Starting expired token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Token cleanup completed. Removed 0 expired tokens

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Manual token cleanup completed: {"removed":0,"timestamp":"2025-11-21T22:49:47.660Z"}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Manually triggering token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Starting expired token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Token cleanup completed. Removed 0 expired tokens

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Manual token cleanup completed: {"removed":0,"timestamp":"2025-11-21T22:49:47.693Z"}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Manually triggering token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Starting expired token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Token cleanup completed. Removed 1 expired tokens

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Manual token cleanup completed: {"removed":1,"timestamp":"2025-11-21T22:49:47.728Z"}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Manually triggering token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Starting expired token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] error: [cronJobService] Error in token cleanup: Database connection failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Manual token cleanup completed: {"removed":0,"timestamp":"2025-11-21T22:49:47.749Z","error":"Database connection failed"}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Stopped job: weeklySalaries

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Stopped job: tokenCleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Starting expired token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Token cleanup completed. Removed 1 expired tokens

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Stopped job: weeklySalaries

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Stopped job: tokenCleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Manually triggering token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Starting expired token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Token cleanup completed. Removed 0 expired tokens

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Manual token cleanup completed: {"removed":0,"timestamp":"2025-11-21T22:49:47.799Z"}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Manually triggering token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Starting expired token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Manually triggering token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Starting expired token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Token cleanup completed. Removed 10 expired tokens

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Manual token cleanup completed: {"removed":10,"timestamp":"2025-11-21T22:49:47.830Z"}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Token cleanup completed. Removed 0 expired tokens

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Manual token cleanup completed: {"removed":0,"timestamp":"2025-11-21T22:49:47.832Z"}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Manually triggering token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Starting expired token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Token cleanup completed. Removed 1 expired tokens

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Manual token cleanup completed: {"removed":1,"timestamp":"2025-11-21T22:49:47.855Z"}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Manually triggering token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Starting expired token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Token cleanup completed. Removed 0 expired tokens

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Manual token cleanup completed: {"removed":0,"timestamp":"2025-11-21T22:49:47.872Z"}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:47] info: [cronJobService] Manually triggering token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:48] info: [cronJobService] Starting expired token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:48] info: [cronJobService] Token cleanup completed. Removed 100 expired tokens

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:48] info: [cronJobService] Manual token cleanup completed: {"removed":100,"timestamp":"2025-11-21T22:49:48.001Z"}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:48] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:48] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

FAIL __tests__/integration/token-rotation.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:49:48] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:48] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:48] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:49:49] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:49] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:49] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:49] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:49] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:49] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:49] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:49] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:49] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:49] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:49] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:49] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:49] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:49] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:49] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:49] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:49] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:49] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:49] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:49] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:49] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:49] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:49] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:49] warn: [TokenRotation] Token reuse detected

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:49] warn: [TokenRotation] Token family invalidated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:49] warn: [TokenRotation] Token reuse detected during rotation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:49] warn: [authController.refreshToken] Token family invalidated due to reuse detection

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:49] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:49] error: [POST] /api/auth/refresh-token - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:49] error: Error Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:49] info: [POST] /api/auth/refresh-token - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:49] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:49] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:49] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:50] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:50] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:50] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:50] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:50] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:50] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:50] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:50] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:50] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:50] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:50] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:50] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:50] warn: [TokenRotation] Token reuse detected

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:50] warn: [TokenRotation] Token family invalidated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:50] warn: [TokenRotation] Token reuse detected during rotation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:50] warn: [authController.refreshToken] Token family invalidated due to reuse detection

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:50] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:50] error: [POST] /api/auth/refresh-token - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:50] error: Error Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:50] info: [POST] /api/auth/refresh-token - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:50] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:50] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:50] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:50] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:50] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:50] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:50] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:50] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:50] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:50] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:50] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:50] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:50] warn: [TokenRotation] Token reuse detected

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:50] warn: [TokenRotation] Token family invalidated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:50] warn: [TokenRotation] Token reuse detected during rotation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:50] warn: [authController.refreshToken] Token family invalidated due to reuse detection

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:50] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:50] error: [POST] /api/auth/refresh-token - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:50] error: Error Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:50] info: [POST] /api/auth/refresh-token - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:50] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:50] warn: [authController.refreshToken] Token rotation failed:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:50] error: [authController.refreshToken] Error refreshing token: Invalid refresh token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:50] error: [POST] /api/auth/refresh-token - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:50] error: Error Invalid refresh token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:50] info: [POST] /api/auth/refresh-token - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:50] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:50] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:50] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:50] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:50] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:50] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:50] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:50] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:50] warn: [TokenRotation] Token reuse detected

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:50] warn: [TokenRotation] Token family invalidated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:50] warn: [TokenRotation] Token reuse detected during rotation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:50] warn: [authController.refreshToken] Token family invalidated due to reuse detection

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:50] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:50] error: [POST] /api/auth/refresh-token - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:50] error: Error Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:50] info: [POST] /api/auth/refresh-token - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:50] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:51] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:51] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:51] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:51] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:51] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:51] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:51] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:51] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:51] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:51] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:51] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:51] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:51] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:51] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:51] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:51] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:51] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:51] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:51] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:51] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:51] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:51] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:51] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:51] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:51] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:51] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:51] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:51] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:51] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:51] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:51] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:51] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:51] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:51] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:51] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:51] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:51] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:51] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:51] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:51] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:51] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:51] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:51] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:51] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:51] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:51] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:51] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:51] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:52] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:52] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:52] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:52] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:52] warn: [TokenRotation] Token reuse detected

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:52] warn: [TokenRotation] Token family invalidated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:52] warn: [TokenRotation] Token reuse detected during rotation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:52] warn: [authController.refreshToken] Token family invalidated due to reuse detection

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:52] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:52] error: [POST] /api/auth/refresh-token - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:52] error: Error Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:52] info: [POST] /api/auth/refresh-token - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:52] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:52] warn: [authController.refreshToken] Token rotation failed:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:52] error: [authController.refreshToken] Error refreshing token: Invalid refresh token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:52] error: [POST] /api/auth/refresh-token - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:52] error: Error Invalid refresh token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:52] info: [POST] /api/auth/refresh-token - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:52] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:52] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:52] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:52] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:52] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:52] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:52] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:52] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:52] warn: [TokenRotation] Token reuse detected

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:52] warn: [TokenRotation] Token family invalidated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:52] warn: [TokenRotation] Token reuse detected during rotation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:52] warn: [authController.refreshToken] Token family invalidated due to reuse detection

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:52] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:52] error: [POST] /api/auth/refresh-token - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:52] error: Error Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:52] info: [POST] /api/auth/refresh-token - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:52] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:52] warn: [authController.refreshToken] Token rotation failed:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:52] error: [authController.refreshToken] Error refreshing token: Invalid refresh token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:52] error: [POST] /api/auth/refresh-token - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:52] error: Error Invalid refresh token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:52] info: [POST] /api/auth/refresh-token - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:52] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:52] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:52] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:52] info: [POST] /api/auth/logout

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:52] warn: [auth] Missing token for POST /logout from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:52] info: [POST] /api/auth/logout - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:52] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:52] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:52] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:52] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:52] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:52] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:52] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:52] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:52] warn: [TokenRotation] Token reuse detected

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:52] warn: [TokenRotation] Token family invalidated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:52] warn: [TokenRotation] Token reuse detected during rotation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:52] warn: [authController.refreshToken] Token family invalidated due to reuse detection

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:52] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:52] error: [POST] /api/auth/refresh-token - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:52] error: Error Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:52] info: [POST] /api/auth/refresh-token - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:52] info: [POST] /api/auth/cleanup-tokens

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:52] warn: 404 - Route not found: POST /api/auth/cleanup-tokens from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:52] info: [POST] /api/auth/cleanup-tokens - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:53] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:53] warn: [TokenRotation] Token reuse detected during rotation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:53] warn: [authController.refreshToken] Token family invalidated due to reuse detection

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:53] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:53] error: [POST] /api/auth/refresh-token - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:53] error: Error Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:53] info: [POST] /api/auth/refresh-token - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:53] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:53] error: [authController.refreshToken] Error refreshing token: Refresh token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:53] error: [POST] /api/auth/refresh-token - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:53] error: Error Refresh token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:53] info: [POST] /api/auth/refresh-token - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

  ‚óè Token Rotation and Reuse Detection System ‚Ä∫ Basic Token Rotation ‚Ä∫ should_invalidate_old_refresh_token_after_rotation

    expect(received).toContain(expected) // indexOf

    Expected substring: "Invalid refresh token"
    Received string:    "Token reuse detected - please login again"

    [0m [90m 140 |[39m
     [90m 141 |[39m       expect(replayResponse[33m.[39mstatus)[33m.[39mtoBe([35m401[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 142 |[39m       expect(replayResponse[33m.[39mbody[33m.[39mmessage)[33m.[39mtoContain([32m'Invalid refresh token'[39m)[33m;[39m
     [90m     |[39m                                           [31m[1m^[22m[39m
     [90m 143 |[39m     })[33m;[39m
     [90m 144 |[39m
     [90m 145 |[39m     it([32m'should_track_token_families_in_database'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.<anonymous> (__tests__/integration/token-rotation.test.mjs:142:43)

  ‚óè Token Rotation and Reuse Detection System ‚Ä∫ Concurrent Token Usage ‚Ä∫ should_handle_concurrent_refresh_requests_gracefully

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 5
    Received array:  [[Object], [Object], [Object], [Object], [Object]]

    [0m [90m 352 |[39m       [36mconst[39m failureResponses [33m=[39m responses[33m.[39mfilter(r [33m=>[39m r[33m.[39mstatus [33m===[39m [35m401[39m)[33m;[39m
     [90m 353 |[39m
    [31m[1m>[22m[39m[90m 354 |[39m       expect(successResponses)[33m.[39mtoHaveLength([35m1[39m)[33m;[39m
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 355 |[39m       expect(failureResponses)[33m.[39mtoHaveLength([35m4[39m)[33m;[39m
     [90m 356 |[39m
     [90m 357 |[39m       [90m// All failures should indicate token was already used[39m[0m

      at Object.<anonymous> (__tests__/integration/token-rotation.test.mjs:354:32)

  ‚óè Token Rotation and Reuse Detection System ‚Ä∫ Concurrent Token Usage ‚Ä∫ should_prevent_race_conditions_in_token_rotation

    expect(received).toBe(expected) // Object.is equality

    Expected: 1
    Received: 3

    [0m [90m 389 |[39m       [90m// Verify only one succeeded[39m
     [90m 390 |[39m       [36mconst[39m successCount [33m=[39m statuses[33m.[39mfilter(s [33m=>[39m s [33m===[39m [35m200[39m)[33m.[39mlength[33m;[39m
    [31m[1m>[22m[39m[90m 391 |[39m       expect(successCount)[33m.[39mtoBe([35m1[39m)[33m;[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 392 |[39m     })[33m;[39m
     [90m 393 |[39m   })[33m;[39m
     [90m 394 |[39m[0m

      at Object.<anonymous> (__tests__/integration/token-rotation.test.mjs:391:28)

  ‚óè Token Rotation and Reuse Detection System ‚Ä∫ Token Expiration and Cleanup ‚Ä∫ should_reject_expired_refresh_tokens

    expect(received).toContain(expected) // indexOf

    Expected substring: "expired"
    Received string:    "Invalid refresh token"

    [0m [90m 504 |[39m
     [90m 505 |[39m       expect(expiredResponse[33m.[39mstatus)[33m.[39mtoBe([35m401[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 506 |[39m       expect(expiredResponse[33m.[39mbody[33m.[39mmessage)[33m.[39mtoContain([32m'expired'[39m)[33m;[39m
     [90m     |[39m                                            [31m[1m^[22m[39m
     [90m 507 |[39m     })[33m;[39m
     [90m 508 |[39m
     [90m 509 |[39m     it([32m'should_clean_up_invalidated_token_families'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.<anonymous> (__tests__/integration/token-rotation.test.mjs:506:44)

  ‚óè Token Rotation and Reuse Detection System ‚Ä∫ Token Expiration and Cleanup ‚Ä∫ should_clean_up_invalidated_token_families

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 404

    [0m [90m 550 |[39m         [33m.[39msend({ olderThanDays[33m:[39m [35m0[39m })[33m;[39m [90m// Clean immediately for test[39m
     [90m 551 |[39m
    [31m[1m>[22m[39m[90m 552 |[39m       expect(cleanupResponse[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                                      [31m[1m^[22m[39m
     [90m 553 |[39m
     [90m 554 |[39m       [90m// Verify invalidated tokens are removed[39m
     [90m 555 |[39m       [36mconst[39m remainingTokens [33m=[39m [36mawait[39m prisma[33m.[39mrefreshToken[33m.[39mfindMany({[0m

      at Object.<anonymous> (__tests__/integration/token-rotation.test.mjs:552:38)

  ‚óè Token Rotation and Reuse Detection System ‚Ä∫ Database Constraints and Security ‚Ä∫ should_enforce_unique_constraints_on_token_families

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"createdAt": 2025-11-21T22:49:53.025Z, "expiresAt": 2025-11-22T22:49:53.021Z, "familyId": "test-family-1763765393021", "id": 12834, "isActive": true, "isInvalidated": false, "lastActivityAt": null, "token": "test-token-2", "updatedAt": 2025-11-21T22:49:53.025Z, "userId": "d9146309-0647-4d9d-ad76-a7c53a10b16e"}

    [0m [90m 583 |[39m
     [90m 584 |[39m       [90m// Second token with same family should fail if constraint exists[39m
    [31m[1m>[22m[39m[90m 585 |[39m       [36mawait[39m expect(
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 586 |[39m         prisma[33m.[39mrefreshToken[33m.[39mcreate({
     [90m 587 |[39m           data[33m:[39m { [33m...[39mtokenData[33m,[39m token[33m:[39m [32m'test-token-2'[39m }
     [90m 588 |[39m         })[0m

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.<anonymous> (__tests__/integration/token-rotation.test.mjs:585:13)

  ‚óè Token Rotation and Reuse Detection System ‚Ä∫ Database Constraints and Security ‚Ä∫ should_validate_token_structure_and_signatures

    expect(received).toBe(expected) // Object.is equality

    Expected: 401
    Received: 400

    [0m [90m 605 |[39m           [33m.[39m[36mset[39m([32m'Cookie'[39m[33m,[39m [32m`refreshToken=${token}`[39m)[33m;[39m
     [90m 606 |[39m
    [31m[1m>[22m[39m[90m 607 |[39m         expect(response[33m.[39mstatus)[33m.[39mtoBe([35m401[39m)[33m;[39m
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 608 |[39m       }
     [90m 609 |[39m     })[33m;[39m
     [90m 610 |[39m   })[33m;[39m[0m

      at Object.<anonymous> (__tests__/integration/token-rotation.test.mjs:607:33)

PASS tests/groomProgression.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:49:53] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:53] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:53] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.log
      [2025-11-21 17:49:53] info: [groomProgressionService.awardGroomXP] Awarding 20 XP to groom 4477 for milestone_completion

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:53] info: [groomProgressionService.awardGroomXP] Groom 4477 gained 20 XP: 0 ‚Üí 20 (Level 1 ‚Üí 1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:53] info: [groomProgressionService.awardGroomXP] Awarding 10 XP to groom 4478 for trait_shaped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.awardGroomXP] Groom 4478 gained 10 XP: 0 ‚Üí 10 (Level 1 ‚Üí 1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.awardGroomXP] Awarding 15 XP to groom 4479 for show_win

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.awardGroomXP] Groom 4479 gained 15 XP: 0 ‚Üí 15 (Level 1 ‚Üí 1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.awardGroomXP] Awarding 100 XP to groom 4480 for milestone_completion

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.awardGroomXP] Groom 4480 gained 100 XP: 0 ‚Üí 100 (Level 1 ‚Üí 2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.awardGroomXP] Awarding 10000 XP to groom 4482 for milestone_completion

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.awardGroomXP] Groom 4482 gained 10000 XP: 0 ‚Üí 10000 (Level 1 ‚Üí 10)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 4483 and horse 10808: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 1 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 4484 and horse 10809: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 1 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 4484 and horse 10809: trait_shaped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 3 (+2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 4484 and horse 10809: rare_trait_influenced

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 6 (+3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 4485 and horse 10810: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 1 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 4485 and horse 10810: reassigned_early

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 0 (-5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 4486 and horse 10811: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 1 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 4486 and horse 10811: trait_shaped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 3 (+2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.logGroomAssignment] Logging assignment assigned for groom 4487 and horse 10812

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.logGroomAssignment] Logging assignment assigned for groom 4488 and horse 10813

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.logGroomAssignment] Logging assignment unassigned for groom 4488 and horse 10813

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.awardGroomXP] Awarding 150 XP to groom 4489 for milestone_completion

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.awardGroomXP] Groom 4489 gained 150 XP: 0 ‚Üí 150 (Level 1 ‚Üí 2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 4489 and horse 10814: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 1 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.logGroomAssignment] Logging assignment assigned for groom 4489 and horse 10814

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.getGroomProfile] Getting profile for groom 4489

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 4490 and horse 10815: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 1 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 4490 and horse 10815: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 2 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 4490 and horse 10815: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 3 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 4490 and horse 10815: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 4 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 4490 and horse 10815: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 5 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 4490 and horse 10815: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 6 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 4490 and horse 10815: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 7 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 4490 and horse 10815: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 8 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 4490 and horse 10815: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 9 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 4490 and horse 10815: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 10 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 4490 and horse 10815: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 11 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 4490 and horse 10815: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 12 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 4490 and horse 10815: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 13 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 4490 and horse 10815: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 14 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 4490 and horse 10815: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 15 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 4490 and horse 10815: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 16 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 4490 and horse 10815: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 17 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 4490 and horse 10815: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 18 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 4490 and horse 10815: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 19 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 4490 and horse 10815: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 20 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 4490 and horse 10815: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 21 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 4490 and horse 10815: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 22 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 4490 and horse 10815: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 23 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 4490 and horse 10815: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 24 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 4490 and horse 10815: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 25 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [groomProgressionService.getGroomProfile] Getting profile for groom 4490

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

FAIL __tests__/integration/auth-cookies.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:49:54] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:54] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:49:55] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:55] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:55] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:55] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:55] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:55] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:55] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:55] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:55] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:55] error: [authController.register] Error registering user: User with this email or username already exists

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:55] error: [POST] /api/auth/register - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:55] error: Error User with this email or username already exists

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:55] info: [POST] /api/auth/register - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:55] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:56] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:56] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:56] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: cookietest2@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=61c70e2d9e1d45a1efbc6b2f1b578193e94f4673d9da30d01f4abdf3bd308349

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:49:56] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:56] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:56] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:56] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:56] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:56] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:56] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:56] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:56] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:56] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:56] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:56] info: [GET] /api/auth/profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:56] info: [auth] Authenticated user 59a850e9-6f34-4310-b933-26a89ff1528c for GET /profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:56] info: [GET] /api/auth/profile - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:56] info: [GET] /api/auth/profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:56] warn: [auth] Missing token for GET /profile from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:56] info: [GET] /api/auth/profile - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:56] info: [GET] /api/auth/profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:56] warn: [auth] Invalid token for GET /profile from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:56] info: [GET] /api/auth/profile - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:56] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:56] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:56] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:56] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:56] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:56] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:56] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:56] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:56] error: [authController.refreshToken] Error refreshing token: Refresh token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:56] error: [POST] /api/auth/refresh-token - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:56] error: Error Refresh token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:49:56] info: [POST] /api/auth/refresh-token - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:56] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:57] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:57] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:57] info: [POST] /api/auth/logout

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:57] info: [auth] Authenticated user 59a850e9-6f34-4310-b933-26a89ff1528c for POST /logout

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:57] info: [POST] /api/auth/logout - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:57] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:57] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:57] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:57] info: [POST] /api/auth/logout

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:57] info: [auth] Authenticated user 59a850e9-6f34-4310-b933-26a89ff1528c for POST /logout

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:57] info: [POST] /api/auth/logout - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:57] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:57] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:57] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:57] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: xss-test@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=a587f85de7adaf7fee8b12ac3bfab38824c99c3e2cee630907c0f67d9bc442a3

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:49:57] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:57] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:57] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:57] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:57] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:57] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:58] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:58] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:58] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:58] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:58] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:58] info: [GET] /api/auth/profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:58] info: [auth] Authenticated user 27847a0f-d6d0-4094-a051-9961d7b13bbe for GET /profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:58] info: [GET] /api/auth/profile - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

  ‚óè Authentication with HttpOnly Cookies ‚Ä∫ POST /api/auth/register - Cookie Setting ‚Ä∫ should set httpOnly cookies on successful registration

    expected 201 "Created", got 400 "Bad Request"

    [0m [90m 71 |[39m         [33m.[39mpost([32m'/api/auth/register'[39m)
     [90m 72 |[39m         [33m.[39msend(testUserData)
    [31m[1m>[22m[39m[90m 73 |[39m         [33m.[39mexpect([35m201[39m)[33m;[39m
     [90m    |[39m          [31m[1m^[22m[39m
     [90m 74 |[39m
     [90m 75 |[39m       [90m// Verify response structure[39m
     [90m 76 |[39m       expect(response[33m.[39mbody[33m.[39mstatus)[33m.[39mtoBe([32m'success'[39m)[33m;[39m[0m

      at Object.<anonymous> (__tests__/integration/auth-cookies.test.mjs:73:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

PASS tests/foalTaskLogStorage.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:49:58] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:58] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:58] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

FAIL tests/integration/userProgressAPI.integration.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:49:59] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:59] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:59] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:49:59] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:59] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:59] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:59] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:59] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:49:59] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:00] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:00] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:00] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:00] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:00] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:00] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: progress-test@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=9657da3d53b904abfa27620cf248c843294a4eacdd2d652c308b4e78e0a3ebce

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:50:00] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:00] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:00] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:00] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:00] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:00] info: [GET] /api/users/0577f578-a945-4baa-9503-4ef60b33d560/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:00] warn: [auth] Invalid token for GET /0577f578-a945-4baa-9503-4ef60b33d560/progress from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:00] info: [GET] /api/users/0577f578-a945-4baa-9503-4ef60b33d560/progress - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:00] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainRouteHandler] Training request for horse 10830 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainHorse] Attempting to train horse 10830 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.canTrain] Checking training eligibility for horse 10830 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.getHorseAge] Getting age for horse 10830

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.getHorseAge] Horse 10830 is 6 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10830 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.getAnyRecentTraining] No training records found for horse 10830

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.canTrain] Horse 10830 is eligible to train in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 10830)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainHorse] Horse 10830 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.logTrainingSession] Logging training session for horse 10830 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 791

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.incrementDisciplineScore] Incrementing Racing score for horse 10830 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.updateDisciplineScore] Updating Racing score for horse 10830 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.updateDisciplineScore] Successfully updated Racing score for horse 10830: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.incrementDisciplineScore] Successfully incremented Racing score for horse 10830

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [xpLogModel.logXpEvent] Logging XP event: User 0577f578-a945-4baa-9503-4ef60b33d560, Amount: 5, Reason: Trained horse Progress Test Horse in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 574, User 0577f578-a945-4baa-9503-4ef60b33d560, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainHorse] Awarded 5 XP to user 0577f578-a945-4baa-9503-4ef60b33d560 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainHorse] Successfully trained horse 10830 in Racing (Log ID: 791, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [GET] /api/users/0577f578-a945-4baa-9503-4ef60b33d560/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] warn: [auth] Invalid token for GET /0577f578-a945-4baa-9503-4ef60b33d560/progress from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [GET] /api/users/0577f578-a945-4baa-9503-4ef60b33d560/progress - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainRouteHandler] Training request for horse 10830 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainHorse] Attempting to train horse 10830 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.canTrain] Checking training eligibility for horse 10830 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.getHorseAge] Getting age for horse 10830

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.getHorseAge] Horse 10830 is 6 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10830 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 10830: Thu Nov 13 2025 17:50:01 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.canTrain] Horse 10830 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 10830)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainHorse] Horse 10830 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.logTrainingSession] Logging training session for horse 10830 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 792

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.incrementDisciplineScore] Incrementing Dressage score for horse 10830 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.updateDisciplineScore] Updating Dressage score for horse 10830 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.updateDisciplineScore] Successfully updated Dressage score for horse 10830: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.incrementDisciplineScore] Successfully incremented Dressage score for horse 10830

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [xpLogModel.logXpEvent] Logging XP event: User 0577f578-a945-4baa-9503-4ef60b33d560, Amount: 5, Reason: Trained horse Progress Test Horse in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 575, User 0577f578-a945-4baa-9503-4ef60b33d560, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainHorse] Awarded 5 XP to user 0577f578-a945-4baa-9503-4ef60b33d560 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainHorse] Successfully trained horse 10830 in Dressage (Log ID: 792, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainRouteHandler] Training request for horse 10830 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainHorse] Attempting to train horse 10830 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.canTrain] Checking training eligibility for horse 10830 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.getHorseAge] Getting age for horse 10830

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.getHorseAge] Horse 10830 is 6 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10830 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 10830: Thu Nov 13 2025 17:50:01 GMT-0500 (Eastern Standard Time) (discipline: Dressage)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.canTrain] Horse 10830 is eligible to train in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 10830)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainHorse] Horse 10830 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.logTrainingSession] Logging training session for horse 10830 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 793

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.incrementDisciplineScore] Incrementing Show Jumping score for horse 10830 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.updateDisciplineScore] Updating Show Jumping score for horse 10830 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.updateDisciplineScore] Successfully updated Show Jumping score for horse 10830: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.incrementDisciplineScore] Successfully incremented Show Jumping score for horse 10830

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [xpLogModel.logXpEvent] Logging XP event: User 0577f578-a945-4baa-9503-4ef60b33d560, Amount: 5, Reason: Trained horse Progress Test Horse in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 576, User 0577f578-a945-4baa-9503-4ef60b33d560, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainHorse] Awarded 5 XP to user 0577f578-a945-4baa-9503-4ef60b33d560 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainHorse] Successfully trained horse 10830 in Show Jumping (Log ID: 793, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainRouteHandler] Training request for horse 10830 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainHorse] Attempting to train horse 10830 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.canTrain] Checking training eligibility for horse 10830 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.getHorseAge] Getting age for horse 10830

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.getHorseAge] Horse 10830 is 6 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10830 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 10830: Thu Nov 13 2025 17:50:01 GMT-0500 (Eastern Standard Time) (discipline: Show Jumping)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.canTrain] Horse 10830 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 10830)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainHorse] Horse 10830 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.logTrainingSession] Logging training session for horse 10830 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 794

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.incrementDisciplineScore] Incrementing Dressage score for horse 10830 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.updateDisciplineScore] Updating Dressage score for horse 10830 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.updateDisciplineScore] Successfully updated Dressage score for horse 10830: 5 -> 10

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.incrementDisciplineScore] Successfully incremented Dressage score for horse 10830

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [xpLogModel.logXpEvent] Logging XP event: User 0577f578-a945-4baa-9503-4ef60b33d560, Amount: 5, Reason: Trained horse Progress Test Horse in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 577, User 0577f578-a945-4baa-9503-4ef60b33d560, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainHorse] Awarded 5 XP to user 0577f578-a945-4baa-9503-4ef60b33d560 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainHorse] Successfully trained horse 10830 in Dressage (Log ID: 794, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainRouteHandler] Training request for horse 10830 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainHorse] Attempting to train horse 10830 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.canTrain] Checking training eligibility for horse 10830 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.getHorseAge] Getting age for horse 10830

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.getHorseAge] Horse 10830 is 6 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10830 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 10830: Thu Nov 13 2025 17:50:01 GMT-0500 (Eastern Standard Time) (discipline: Dressage)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.canTrain] Horse 10830 is eligible to train in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 10830)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainHorse] Horse 10830 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.logTrainingSession] Logging training session for horse 10830 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 795

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.updateHorseStat] Updating precision by 2 for horse 10830

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.updateHorseStat] Updated precision for horse 10830: 0 -> 2 (+2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainHorse] Stat gain: precision +2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.incrementDisciplineScore] Incrementing Show Jumping score for horse 10830 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.updateDisciplineScore] Updating Show Jumping score for horse 10830 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.updateDisciplineScore] Successfully updated Show Jumping score for horse 10830: 5 -> 10

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.incrementDisciplineScore] Successfully incremented Show Jumping score for horse 10830

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [xpLogModel.logXpEvent] Logging XP event: User 0577f578-a945-4baa-9503-4ef60b33d560, Amount: 5, Reason: Trained horse Progress Test Horse in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 578, User 0577f578-a945-4baa-9503-4ef60b33d560, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainHorse] Awarded 5 XP to user 0577f578-a945-4baa-9503-4ef60b33d560 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainHorse] Successfully trained horse 10830 in Show Jumping (Log ID: 795, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainRouteHandler] Training request for horse 10830 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainHorse] Attempting to train horse 10830 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.canTrain] Checking training eligibility for horse 10830 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.getHorseAge] Getting age for horse 10830

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.getHorseAge] Horse 10830 is 6 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10830 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 10830: Thu Nov 13 2025 17:50:01 GMT-0500 (Eastern Standard Time) (discipline: Show Jumping)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.canTrain] Horse 10830 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 10830)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainHorse] Horse 10830 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.logTrainingSession] Logging training session for horse 10830 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 796

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.incrementDisciplineScore] Incrementing Dressage score for horse 10830 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.updateDisciplineScore] Updating Dressage score for horse 10830 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.updateDisciplineScore] Successfully updated Dressage score for horse 10830: 10 -> 15

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.incrementDisciplineScore] Successfully incremented Dressage score for horse 10830

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [xpLogModel.logXpEvent] Logging XP event: User 0577f578-a945-4baa-9503-4ef60b33d560, Amount: 5, Reason: Trained horse Progress Test Horse in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 579, User 0577f578-a945-4baa-9503-4ef60b33d560, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainHorse] Awarded 5 XP to user 0577f578-a945-4baa-9503-4ef60b33d560 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainHorse] Successfully trained horse 10830 in Dressage (Log ID: 796, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainRouteHandler] Training request for horse 10830 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainHorse] Attempting to train horse 10830 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.canTrain] Checking training eligibility for horse 10830 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.getHorseAge] Getting age for horse 10830

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.getHorseAge] Horse 10830 is 6 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10830 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 10830: Thu Nov 13 2025 17:50:01 GMT-0500 (Eastern Standard Time) (discipline: Dressage)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.canTrain] Horse 10830 is eligible to train in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 10830)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainHorse] Horse 10830 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.logTrainingSession] Logging training session for horse 10830 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 797

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.updateHorseStat] Updating intelligence by 3 for horse 10830

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.updateHorseStat] Updated intelligence for horse 10830: 0 -> 3 (+3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainHorse] Stat gain: intelligence +3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.incrementDisciplineScore] Incrementing Show Jumping score for horse 10830 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.updateDisciplineScore] Updating Show Jumping score for horse 10830 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.updateDisciplineScore] Successfully updated Show Jumping score for horse 10830: 10 -> 15

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.incrementDisciplineScore] Successfully incremented Show Jumping score for horse 10830

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [xpLogModel.logXpEvent] Logging XP event: User 0577f578-a945-4baa-9503-4ef60b33d560, Amount: 5, Reason: Trained horse Progress Test Horse in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 580, User 0577f578-a945-4baa-9503-4ef60b33d560, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainHorse] Awarded 5 XP to user 0577f578-a945-4baa-9503-4ef60b33d560 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainHorse] Successfully trained horse 10830 in Show Jumping (Log ID: 797, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainRouteHandler] Training request for horse 10830 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainHorse] Attempting to train horse 10830 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.canTrain] Checking training eligibility for horse 10830 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.getHorseAge] Getting age for horse 10830

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.getHorseAge] Horse 10830 is 6 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10830 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 10830: Thu Nov 13 2025 17:50:01 GMT-0500 (Eastern Standard Time) (discipline: Show Jumping)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.canTrain] Horse 10830 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 10830)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainHorse] Horse 10830 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.logTrainingSession] Logging training session for horse 10830 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 798

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.incrementDisciplineScore] Incrementing Dressage score for horse 10830 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.updateDisciplineScore] Updating Dressage score for horse 10830 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.updateDisciplineScore] Successfully updated Dressage score for horse 10830: 15 -> 20

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.incrementDisciplineScore] Successfully incremented Dressage score for horse 10830

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [xpLogModel.logXpEvent] Logging XP event: User 0577f578-a945-4baa-9503-4ef60b33d560, Amount: 5, Reason: Trained horse Progress Test Horse in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 581, User 0577f578-a945-4baa-9503-4ef60b33d560, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainHorse] Awarded 5 XP to user 0577f578-a945-4baa-9503-4ef60b33d560 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainHorse] Successfully trained horse 10830 in Dressage (Log ID: 798, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainRouteHandler] Training request for horse 10830 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainHorse] Attempting to train horse 10830 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.canTrain] Checking training eligibility for horse 10830 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.getHorseAge] Getting age for horse 10830

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.getHorseAge] Horse 10830 is 6 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10830 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 10830: Thu Nov 13 2025 17:50:01 GMT-0500 (Eastern Standard Time) (discipline: Dressage)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.canTrain] Horse 10830 is eligible to train in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 10830)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainHorse] Horse 10830 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.logTrainingSession] Logging training session for horse 10830 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 799

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.incrementDisciplineScore] Incrementing Show Jumping score for horse 10830 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.updateDisciplineScore] Updating Show Jumping score for horse 10830 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.updateDisciplineScore] Successfully updated Show Jumping score for horse 10830: 15 -> 20

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.incrementDisciplineScore] Successfully incremented Show Jumping score for horse 10830

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [xpLogModel.logXpEvent] Logging XP event: User 0577f578-a945-4baa-9503-4ef60b33d560, Amount: 5, Reason: Trained horse Progress Test Horse in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 582, User 0577f578-a945-4baa-9503-4ef60b33d560, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainHorse] Awarded 5 XP to user 0577f578-a945-4baa-9503-4ef60b33d560 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainHorse] Successfully trained horse 10830 in Show Jumping (Log ID: 799, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainRouteHandler] Training request for horse 10830 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainHorse] Attempting to train horse 10830 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.canTrain] Checking training eligibility for horse 10830 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.getHorseAge] Getting age for horse 10830

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.getHorseAge] Horse 10830 is 6 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10830 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 10830: Thu Nov 13 2025 17:50:01 GMT-0500 (Eastern Standard Time) (discipline: Show Jumping)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.canTrain] Horse 10830 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 10830)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainHorse] Horse 10830 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.logTrainingSession] Logging training session for horse 10830 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 800

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.incrementDisciplineScore] Incrementing Dressage score for horse 10830 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.updateDisciplineScore] Updating Dressage score for horse 10830 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.updateDisciplineScore] Successfully updated Dressage score for horse 10830: 20 -> 25

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.incrementDisciplineScore] Successfully incremented Dressage score for horse 10830

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [xpLogModel.logXpEvent] Logging XP event: User 0577f578-a945-4baa-9503-4ef60b33d560, Amount: 5, Reason: Trained horse Progress Test Horse in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 583, User 0577f578-a945-4baa-9503-4ef60b33d560, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainHorse] Awarded 5 XP to user 0577f578-a945-4baa-9503-4ef60b33d560 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainHorse] Successfully trained horse 10830 in Dressage (Log ID: 800, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainRouteHandler] Training request for horse 10830 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainHorse] Attempting to train horse 10830 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.canTrain] Checking training eligibility for horse 10830 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.getHorseAge] Getting age for horse 10830

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.getHorseAge] Horse 10830 is 6 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10830 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 10830: Thu Nov 13 2025 17:50:01 GMT-0500 (Eastern Standard Time) (discipline: Dressage)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.canTrain] Horse 10830 is eligible to train in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 10830)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainHorse] Horse 10830 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.logTrainingSession] Logging training session for horse 10830 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 801

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.updateHorseStat] Updating agility by 2 for horse 10830

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.updateHorseStat] Updated agility for horse 10830: 0 -> 2 (+2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainHorse] Stat gain: agility +2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.incrementDisciplineScore] Incrementing Show Jumping score for horse 10830 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.updateDisciplineScore] Updating Show Jumping score for horse 10830 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.updateDisciplineScore] Successfully updated Show Jumping score for horse 10830: 20 -> 25

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [horseModel.incrementDisciplineScore] Successfully incremented Show Jumping score for horse 10830

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [xpLogModel.logXpEvent] Logging XP event: User 0577f578-a945-4baa-9503-4ef60b33d560, Amount: 5, Reason: Trained horse Progress Test Horse in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 584, User 0577f578-a945-4baa-9503-4ef60b33d560, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainHorse] Awarded 5 XP to user 0577f578-a945-4baa-9503-4ef60b33d560 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainHorse] Successfully trained horse 10830 in Show Jumping (Log ID: 801, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [GET] /api/users/0577f578-a945-4baa-9503-4ef60b33d560/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] warn: [auth] Invalid token for GET /0577f578-a945-4baa-9503-4ef60b33d560/progress from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [GET] /api/users/0577f578-a945-4baa-9503-4ef60b33d560/progress - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainRouteHandler] Training request for horse 10830 in Cross Country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.trainHorse] Attempting to train horse 10830 in Cross Country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingController.canTrain] Checking training eligibility for horse 10830 in Cross Country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:01] info: [trainingModel.getHorseAge] Getting age for horse 10830

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:02] info: [trainingModel.getHorseAge] Horse 10830 is 6 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:02] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10830 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:02] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 10830: Thu Nov 13 2025 17:50:01 GMT-0500 (Eastern Standard Time) (discipline: Show Jumping)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:02] info: [trainingController.canTrain] Horse 10830 is eligible to train in Cross Country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:02] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 10830)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:02] info: [trainingController.trainHorse] Horse 10830 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:02] info: [trainingModel.logTrainingSession] Logging training session for horse 10830 in Cross Country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:02] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 802

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:02] info: [horseModel.incrementDisciplineScore] Incrementing Cross Country score for horse 10830 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:02] info: [horseModel.updateDisciplineScore] Updating Cross Country score for horse 10830 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:02] info: [horseModel.updateDisciplineScore] Successfully updated Cross Country score for horse 10830: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:02] info: [horseModel.incrementDisciplineScore] Successfully incremented Cross Country score for horse 10830

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:02] info: [xpLogModel.logXpEvent] Logging XP event: User 0577f578-a945-4baa-9503-4ef60b33d560, Amount: 5, Reason: Trained horse Progress Test Horse in Cross Country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:02] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 585, User 0577f578-a945-4baa-9503-4ef60b33d560, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:02] info: [trainingController.trainHorse] Awarded 5 XP to user 0577f578-a945-4baa-9503-4ef60b33d560 for training - LEVEL UP to undefined!

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:02] info: [trainingController.trainHorse] Successfully trained horse 10830 in Cross Country (Log ID: 802, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:02] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:02] info: [GET] /api/users/0577f578-a945-4baa-9503-4ef60b33d560/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:02] warn: [auth] Invalid token for GET /0577f578-a945-4baa-9503-4ef60b33d560/progress from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:02] info: [GET] /api/users/0577f578-a945-4baa-9503-4ef60b33d560/progress - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:02] info: [GET] /api/users/0577f578-a945-4baa-9503-4ef60b33d560/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:02] warn: [auth] Invalid token for GET /0577f578-a945-4baa-9503-4ef60b33d560/progress from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:02] info: [GET] /api/users/0577f578-a945-4baa-9503-4ef60b33d560/progress - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:02] info: [GET] /api/users/dashboard/0577f578-a945-4baa-9503-4ef60b33d560

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:02] warn: [auth] Invalid token for GET /dashboard/0577f578-a945-4baa-9503-4ef60b33d560 from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:02] info: [GET] /api/users/dashboard/0577f578-a945-4baa-9503-4ef60b33d560 - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:02] info: [GET] /api/users/999999/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:02] warn: [auth] Invalid token for GET /999999/progress from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:02] info: [GET] /api/users/999999/progress - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:02] info: [GET] /api/users/invalid/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:02] warn: [auth] Invalid token for GET /invalid/progress from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:02] info: [GET] /api/users/invalid/progress - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:02] info: [GET] /api/users/0577f578-a945-4baa-9503-4ef60b33d560/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:02] warn: [auth] Missing token for GET /0577f578-a945-4baa-9503-4ef60b33d560/progress from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:02] info: [GET] /api/users/0577f578-a945-4baa-9503-4ef60b33d560/progress - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:02] info: [GET] /api/users/0577f578-a945-4baa-9503-4ef60b33d560/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:02] warn: [auth] Invalid token for GET /0577f578-a945-4baa-9503-4ef60b33d560/progress from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:02] info: [GET] /api/users/0577f578-a945-4baa-9503-4ef60b33d560/progress - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

  ‚óè üéØ INTEGRATION: User Progress API - Complete Progress Tracking ‚Ä∫ üîê STEP 1: User Setup & Initial Progress State ‚Ä∫ should return correct initial progress data via API

    expected 200 "OK", got 401 "Unauthorized"

    [0m [90m 151 |[39m         [33m.[39m[36mget[39m([32m`/api/users/${testUser.id}/progress`[39m)
     [90m 152 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)
    [31m[1m>[22m[39m[90m 153 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 154 |[39m
     [90m 155 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 156 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoEqual({[0m

      at Object.<anonymous> (tests/integration/userProgressAPI.integration.test.mjs:153:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè üéØ INTEGRATION: User Progress API - Complete Progress Tracking ‚Ä∫ üèãÔ∏è STEP 3: XP Gain Through Training & Progress Updates ‚Ä∫ should gain XP from training and update progress correctly

    expected 200 "OK", got 401 "Unauthorized"

    [0m [90m 229 |[39m         [33m.[39m[36mget[39m([32m`/api/users/${testUser.id}/progress`[39m)
     [90m 230 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)
    [31m[1m>[22m[39m[90m 231 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 232 |[39m
     [90m 233 |[39m       expect(progressResponse[33m.[39mbody[33m.[39mdata)[33m.[39mtoEqual({
     [90m 234 |[39m         userId[33m:[39m testUser[33m.[39mid[33m,[39m[0m

      at Object.<anonymous> (tests/integration/userProgressAPI.integration.test.mjs:231:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè üéØ INTEGRATION: User Progress API - Complete Progress Tracking ‚Ä∫ üèãÔ∏è STEP 3: XP Gain Through Training & Progress Updates ‚Ä∫ should handle multiple training sessions and XP accumulation

    expected 200 "OK", got 401 "Unauthorized"

    [0m [90m 280 |[39m         [33m.[39m[36mget[39m([32m`/api/users/${testUser.id}/progress`[39m)
     [90m 281 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)
    [31m[1m>[22m[39m[90m 282 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 283 |[39m
     [90m 284 |[39m       expect(progressResponse[33m.[39mbody[33m.[39mdata[33m.[39mlevel)[33m.[39mtoBe([35m1[39m)[33m;[39m
     [90m 285 |[39m       expect(progressResponse[33m.[39mbody[33m.[39mdata[33m.[39mxp)[33m.[39mtoBe([35m55[39m)[33m;[39m [90m// 5 + (10 * 5) = 55[39m[0m

      at Object.<anonymous> (tests/integration/userProgressAPI.integration.test.mjs:282:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè üéØ INTEGRATION: User Progress API - Complete Progress Tracking ‚Ä∫ üéØ STEP 4: Level-Up Detection & Multi-Level Progression ‚Ä∫ should level up when reaching XP threshold

    expected 200 "OK", got 401 "Unauthorized"

    [0m [90m 328 |[39m         [33m.[39m[36mget[39m([32m`/api/users/${testUser.id}/progress`[39m)
     [90m 329 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)
    [31m[1m>[22m[39m[90m 330 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 331 |[39m
     [90m 332 |[39m       expect(progressResponse[33m.[39mbody[33m.[39mdata)[33m.[39mtoEqual({
     [90m 333 |[39m         userId[33m:[39m testUser[33m.[39mid[33m,[39m[0m

      at Object.<anonymous> (tests/integration/userProgressAPI.integration.test.mjs:330:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè üéØ INTEGRATION: User Progress API - Complete Progress Tracking ‚Ä∫ üéØ STEP 4: Level-Up Detection & Multi-Level Progression ‚Ä∫ should handle multiple level gains in single XP award

    expected 200 "OK", got 401 "Unauthorized"

    [0m [90m 358 |[39m         [33m.[39m[36mget[39m([32m`/api/users/${testUser.id}/progress`[39m)
     [90m 359 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)
    [31m[1m>[22m[39m[90m 360 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 361 |[39m
     [90m 362 |[39m       expect(progressResponse[33m.[39mbody[33m.[39mdata)[33m.[39mtoEqual({
     [90m 363 |[39m         userId[33m:[39m testUser[33m.[39mid[33m,[39m[0m

      at Object.<anonymous> (tests/integration/userProgressAPI.integration.test.mjs:360:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè üéØ INTEGRATION: User Progress API - Complete Progress Tracking ‚Ä∫ üìä STEP 5: Dashboard Data Integration ‚Ä∫ should return comprehensive dashboard data with progress integration

    expected 200 "OK", got 401 "Unauthorized"

    [0m [90m 379 |[39m         [33m.[39m[36mget[39m([32m`/api/users/dashboard/${testUser.id}`[39m)
     [90m 380 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)
    [31m[1m>[22m[39m[90m 381 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 382 |[39m
     [90m 383 |[39m       expect(dashboardResponse[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 384 |[39m       expect(dashboardResponse[33m.[39mbody[33m.[39mdata)[33m.[39mtoEqual({[0m

      at Object.<anonymous> (tests/integration/userProgressAPI.integration.test.mjs:381:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè üéØ INTEGRATION: User Progress API - Complete Progress Tracking ‚Ä∫ üîç STEP 6: API Consistency & Edge Cases ‚Ä∫ should handle invalid user ID gracefully

    expected 400 "Bad Request", got 401 "Unauthorized"

    [0m [90m 411 |[39m         [33m.[39m[36mget[39m([32m'/api/users/999999/progress'[39m)
     [90m 412 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)
    [31m[1m>[22m[39m[90m 413 |[39m         [33m.[39mexpect([35m400[39m)[33m;[39m [90m// UUID validation fails before user lookup[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 414 |[39m
     [90m 415 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m 416 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoContain([32m'Validation failed'[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/integration/userProgressAPI.integration.test.mjs:413:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè üéØ INTEGRATION: User Progress API - Complete Progress Tracking ‚Ä∫ üîç STEP 6: API Consistency & Edge Cases ‚Ä∫ should validate user ID format

    expected 400 "Bad Request", got 401 "Unauthorized"

    [0m [90m 421 |[39m         [33m.[39m[36mget[39m([32m'/api/users/invalid/progress'[39m)
     [90m 422 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)
    [31m[1m>[22m[39m[90m 423 |[39m         [33m.[39mexpect([35m400[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 424 |[39m
     [90m 425 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m 426 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoContain([32m'Validation failed'[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/integration/userProgressAPI.integration.test.mjs:423:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè üéØ INTEGRATION: User Progress API - Complete Progress Tracking ‚Ä∫ üéä STEP 7: End-to-End Progress Validation ‚Ä∫ should validate complete progress tracking integrity

    expected 200 "OK", got 401 "Unauthorized"

    [0m [90m 453 |[39m         [33m.[39m[36mget[39m([32m`/api/users/${testUser.id}/progress`[39m)
     [90m 454 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)
    [31m[1m>[22m[39m[90m 455 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 456 |[39m
     [90m 457 |[39m       [36mconst[39m progressData [33m=[39m progressResponse[33m.[39mbody[33m.[39mdata[33m;[39m
     [90m 458 |[39m[0m

      at Object.<anonymous> (tests/integration/userProgressAPI.integration.test.mjs:455:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

FAIL __tests__/unit/token-rotation.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:50:02] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:02] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:02] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:50:03] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:03] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:03] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:03] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:03] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:04] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:04] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:04] warn: [TokenRotation] Token reuse detected

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:04] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:04] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:04] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:04] warn: [TokenRotation] Token reuse detected

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:04] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:04] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:04] warn: [TokenRotation] Token reuse detected during rotation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:04] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:04] warn: [TokenRotation] Token reuse detected

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:04] warn: [TokenRotation] Token family invalidated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:04] warn: [TokenRotation] Token reuse detected during rotation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:05] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:05] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.allSettled (index 0)

    console.log
      [2025-11-21 17:50:05] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.allSettled (index 1)

    console.log
      [2025-11-21 17:50:05] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.allSettled (index 2)

    console.log
      [2025-11-21 17:50:05] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:05] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:05] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:05] warn: [TokenRotation] Token family invalidated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:05] warn: [TokenRotation] Token family invalidated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:05] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:05] warn: [TokenRotation] Token family invalidated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:05] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:05] info: [TokenRotation] Token cleanup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:05] info: [TokenRotation] Token cleanup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:05] info: [TokenRotation] Token cleanup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:05] error: [TokenRotation] Error creating token pair: Database connection failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

  ‚óè Token Rotation Service - Unit Tests ‚Ä∫ rotateRefreshToken() ‚Ä∫ should_handle_concurrent_rotation_attempts

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 3
    Received array:  [{"status": "fulfilled", "value": {"error": null, "familyInvalidated": false, "newTokenPair": {"accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiIwNDI2YTBjMy1hYjExLTRmNzgtYjJjNC0yY2E2MjVjYjk1MzciLCJ0eXBlIjoiYWNjZXNzIiwianRpIjoiYWNjZXNzLTE3NjM3NjU0MDUwMjEtNTc2OTk4MTU5MDk3NzAwLTQ2ZjE2ODdjZDdlNWVlZDFlM2VjYjhiZGUwNjI4N2YwIiwiaWF0IjoxNzYzNzY1NDA1LCJleHAiOjE3NjM3NjYzMDV9.P3Dmwi-uSK977i_tS444fDNAAt6u2H5-RlUtSmmxCkM", "familyId": "mi9gdsg7_a5d90705b04312382d92fee627a19728", "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiIwNDI2YTBjMy1hYjExLTRmNzgtYjJjNC0yY2E2MjVjYjk1MzciLCJ0eXBlIjoicmVmcmVzaCIsImZhbWlseUlkIjoibWk5Z2RzZzdfYTVkOTA3MDViMDQzMTIzODJkOTJmZWU2MjdhMTk3MjgiLCJqdGkiOiJyZWZyZXNoLTE3NjM3NjU0MDUwMjEtNTc2OTk4MTU5MDk3NzAwLTQ2ZjE2ODdjZDdlNWVlZDFlM2VjYjhiZGUwNjI4N2YwIiwiaWF0IjoxNzYzNzY1NDA1LCJleHAiOjE3NjQzNzAyMDV9.ljCfu2KNQtAm4FTbQxBWSrogrosiBko8GrKesNJ24PM"}, "success": true}}, {"status": "fulfilled", "value": {"error": null, "familyInvalidated": false, "newTokenPair": {"accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiIwNDI2YTBjMy1hYjExLTRmNzgtYjJjNC0yY2E2MjVjYjk1MzciLCJ0eXBlIjoiYWNjZXNzIiwianRpIjoiYWNjZXNzLTE3NjM3NjU0MDUwMjktNTc2OTk4MTY3NTE0MTAwLWE0Njg0YjEyMDhjZDA5YjQxZjZjZDdjM2E5MTBiZmVjIiwiaWF0IjoxNzYzNzY1NDA1LCJleHAiOjE3NjM3NjYzMDV9.lmSVEij6boDb9-wppmRAPzjhmm0tsADFea2wSt_tkcs", "familyId": "mi9gdsg7_a5d90705b04312382d92fee627a19728", "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiIwNDI2YTBjMy1hYjExLTRmNzgtYjJjNC0yY2E2MjVjYjk1MzciLCJ0eXBlIjoicmVmcmVzaCIsImZhbWlseUlkIjoibWk5Z2RzZzdfYTVkOTA3MDViMDQzMTIzODJkOTJmZWU2MjdhMTk3MjgiLCJqdGkiOiJyZWZyZXNoLTE3NjM3NjU0MDUwMjktNTc2OTk4MTY3NTE0MTAwLWE0Njg0YjEyMDhjZDA5YjQxZjZjZDdjM2E5MTBiZmVjIiwiaWF0IjoxNzYzNzY1NDA1LCJleHAiOjE3NjQzNzAyMDV9.Fe1NrytIOQz6L3Do1wI5MbB6OzuYkxEix-7l9FS-WIM"}, "success": true}}, {"status": "fulfilled", "value": {"error": null, "familyInvalidated": false, "newTokenPair": {"accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiIwNDI2YTBjMy1hYjExLTRmNzgtYjJjNC0yY2E2MjVjYjk1MzciLCJ0eXBlIjoiYWNjZXNzIiwianRpIjoiYWNjZXNzLTE3NjM3NjU0MDUwNDAtNTc2OTk4MTc4MDk4NzAwLTFmZTFhYmNiMjA1MTkwNmZjNDMzY2IwMTIwNzQzMGExIiwiaWF0IjoxNzYzNzY1NDA1LCJleHAiOjE3NjM3NjYzMDV9.fI972ssLyCec7lKsyFiur_2vS--7XTvoAgmA6ERsZ4A", "familyId": "mi9gdsg7_a5d90705b04312382d92fee627a19728", "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiIwNDI2YTBjMy1hYjExLTRmNzgtYjJjNC0yY2E2MjVjYjk1MzciLCJ0eXBlIjoicmVmcmVzaCIsImZhbWlseUlkIjoibWk5Z2RzZzdfYTVkOTA3MDViMDQzMTIzODJkOTJmZWU2MjdhMTk3MjgiLCJqdGkiOiJyZWZyZXNoLTE3NjM3NjU0MDUwNDAtNTc2OTk4MTc4MDk4NzAwLTFmZTFhYmNiMjA1MTkwNmZjNDMzY2IwMTIwNzQzMGExIiwiaWF0IjoxNzYzNzY1NDA1LCJleHAiOjE3NjQzNzAyMDV9.uJ3Ejl1AmLacPx-swF5xX_K_sDSSNUOfIH-xSXXUKbM"}, "success": true}}]

    [0m [90m 345 |[39m
     [90m 346 |[39m       [90m// Only one should succeed[39m
    [31m[1m>[22m[39m[90m 347 |[39m       expect(successfulResults)[33m.[39mtoHaveLength([35m1[39m)[33m;[39m
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 348 |[39m     })[33m;[39m
     [90m 349 |[39m   })[33m;[39m
     [90m 350 |[39m[0m

      at Object.<anonymous> (__tests__/unit/token-rotation.test.mjs:347:33)

  ‚óè Token Rotation Service - Unit Tests ‚Ä∫ invalidateTokenFamily() ‚Ä∫ should_log_invalidation_for_security_audit

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "Token family invalidated", ObjectContaining {"familyId": "mi9gdsqh_fc4f03517774ebbc561d5494a90a842d", "reason": Any<String>, "userId": "41a2f4f8-a69c-44e8-8afc-b6d1e3d5dc98"}

    Number of calls: 0

    [0m [90m 390 |[39m       [36mawait[39m invalidateTokenFamily(familyId)[33m;[39m
     [90m 391 |[39m
    [31m[1m>[22m[39m[90m 392 |[39m       expect(mockLogger)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                          [31m[1m^[22m[39m
     [90m 393 |[39m         expect[33m.[39mstringContaining([32m'Token family invalidated'[39m)[33m,[39m
     [90m 394 |[39m         expect[33m.[39mobjectContaining({
     [90m 395 |[39m           familyId[33m:[39m familyId[33m,[39m[0m

      at Object.<anonymous> (__tests__/unit/token-rotation.test.mjs:392:26)

PASS tests/integration/horseOverview.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:50:06] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:06] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:06] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:50:06] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:06] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:06] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:06] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:06] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:06] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:06] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:06] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:07] info: [GET] /api/horses/10831/overview

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:07] info: [horseController.getHorseOverview] Getting overview for horse 10831

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:07] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10831 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:07] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 10831: Fri Nov 14 2025 17:50:07 GMT-0500 (Eastern Standard Time) (discipline: Dressage)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:07] info: [horseController.getHorseOverview] Successfully retrieved overview for horse TestHorse Nova (ID: 10831)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:07] info: [GET] /api/horses/10831/overview - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:07] info: [GET] /api/horses/99999/overview

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:07] info: [horseController.getHorseOverview] Getting overview for horse 99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:07] warn: [horseController.getHorseOverview] Horse 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:07] info: [GET] /api/horses/99999/overview - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:07] info: [GET] /api/horses/invalid/overview

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:07] info: [GET] /api/horses/invalid/overview - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:07] info: [GET] /api/horses/10834/overview

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:07] info: [horseController.getHorseOverview] Getting overview for horse 10834

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:07] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10834 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:07] info: [trainingModel.getAnyRecentTraining] No training records found for horse 10834

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:07] info: [horseController.getHorseOverview] Successfully retrieved overview for horse TestHorse Nova (ID: 10834)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:07] info: [GET] /api/horses/10834/overview - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:07] info: [GET] /api/horses/10835/overview

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:07] info: [horseController.getHorseOverview] Getting overview for horse 10835

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:07] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10835 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:07] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 10835: Tue Nov 18 2025 17:50:07 GMT-0500 (Eastern Standard Time) (discipline: Dressage)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:07] info: [horseController.getHorseOverview] Successfully retrieved overview for horse TestHorse Nova (ID: 10835)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:07] info: [GET] /api/horses/10835/overview - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:07] info: [GET] /api/horses/10837/overview

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:07] info: [horseController.getHorseOverview] Getting overview for horse 10837

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:07] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10837 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:07] info: [trainingModel.getAnyRecentTraining] No training records found for horse 10837

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:07] info: [horseController.getHorseOverview] Successfully retrieved overview for horse TestHorse Minimal (ID: 10837)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:07] info: [GET] /api/horses/10837/overview - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/foalTaskLoggingIntegration.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:50:07] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:07] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:07] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:50:08] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:08] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:08] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:08] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:08] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:08] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:08] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:08] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:08] info: [POST] /api/grooms/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:08] info: [groomController.recordInteraction] Recording trust_building interaction for foal 10838

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:08] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying patient personality effects for task trust_building

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:08] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied patient effects: category_match

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:08] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for patient: category_match

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:08] info: [groomController.recordInteraction] Interaction recorded: 5 bonding, -2 stress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:08] info: [groomController.recordInteraction] Personality effects applied (patient): category_match - Reduces burnout risk and failure chance on enrichment tasks

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:08] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 4491 for interaction_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:08] info: [groomProgressionService.awardGroomXP] Groom 4491 gained 2 XP: 3 ‚Üí 5 (Level 1 ‚Üí 1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:08] info: [groomController.recordInteraction] Awarded 2 XP to groom 4491 for interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:08] info: [POST] /api/grooms/interact - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:08] info: [POST] /api/grooms/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:08] info: [groomController.recordInteraction] Recording trust_building interaction for foal 10839

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:08] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying patient personality effects for task trust_building

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:08] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied patient effects: category_match

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:08] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for patient: category_match

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:08] info: [groomController.recordInteraction] Interaction recorded: 10 bonding, -1 stress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:08] info: [groomController.recordInteraction] Personality effects applied (patient): category_match - Reduces burnout risk and failure chance on enrichment tasks

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:08] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 4492 for interaction_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:08] info: [groomProgressionService.awardGroomXP] Groom 4492 gained 2 XP: 3 ‚Üí 5 (Level 1 ‚Üí 1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:08] info: [groomController.recordInteraction] Awarded 2 XP to groom 4492 for interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:08] info: [POST] /api/grooms/interact - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:08] info: [POST] /api/grooms/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:08] info: [groomController.recordInteraction] Recording hoof_handling interaction for foal 10840

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:08] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying patient personality effects for task hoof_handling

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:08] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied patient effects: task_specialty

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:08] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for patient: task_specialty

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:08] info: [groomController.recordInteraction] Interaction recorded: 1 bonding, 1 stress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:08] info: [groomController.recordInteraction] Personality effects applied (patient): task_specialty - Reduces burnout risk and failure chance on enrichment tasks

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:08] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 4493 for interaction_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:08] info: [groomProgressionService.awardGroomXP] Groom 4493 gained 2 XP: 3 ‚Üí 5 (Level 1 ‚Üí 1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:08] info: [groomController.recordInteraction] Awarded 2 XP to groom 4493 for interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:08] info: [POST] /api/grooms/interact - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:08] info: [POST] /api/grooms/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:08] info: [groomController.recordInteraction] Recording trust_building interaction for foal 10842

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:08] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying patient personality effects for task trust_building

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:08] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied patient effects: category_match

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:08] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for patient: category_match

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:08] info: [groomController.recordInteraction] Interaction recorded: 7 bonding, -1 stress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:08] info: [groomController.recordInteraction] Personality effects applied (patient): category_match - Reduces burnout risk and failure chance on enrichment tasks

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:08] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 4494 for interaction_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:08] info: [groomProgressionService.awardGroomXP] Groom 4494 gained 2 XP: 3 ‚Üí 5 (Level 1 ‚Üí 1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:08] info: [groomController.recordInteraction] Awarded 2 XP to groom 4494 for interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:08] info: [POST] /api/grooms/interact - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:08] info: [POST] /api/grooms/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:08] info: [groomController.recordInteraction] Recording desensitization interaction for foal 10843

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying patient personality effects for task desensitization

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied patient effects: category_match

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for patient: category_match

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [groomController.recordInteraction] Interaction recorded: 7 bonding, -1 stress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [groomController.recordInteraction] Personality effects applied (patient): category_match - Reduces burnout risk and failure chance on enrichment tasks

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 4494 for interaction_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [groomProgressionService.awardGroomXP] Groom 4494 gained 2 XP: 5 ‚Üí 7 (Level 1 ‚Üí 1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [groomController.recordInteraction] Awarded 2 XP to groom 4494 for interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [POST] /api/grooms/interact - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [POST] /api/grooms/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [groomController.recordInteraction] Recording hoof_handling interaction for foal 10844

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying patient personality effects for task hoof_handling

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied patient effects: task_specialty

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for patient: task_specialty

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [groomController.recordInteraction] Interaction recorded: 5 bonding, -1 stress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [groomController.recordInteraction] Personality effects applied (patient): task_specialty - Reduces burnout risk and failure chance on enrichment tasks

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 4494 for interaction_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [groomProgressionService.awardGroomXP] Groom 4494 gained 2 XP: 7 ‚Üí 9 (Level 1 ‚Üí 1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [groomController.recordInteraction] Awarded 2 XP to groom 4494 for interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [POST] /api/grooms/interact - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [POST] /api/grooms/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [groomController.recordInteraction] Recording early_touch interaction for foal 10845

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying patient personality effects for task early_touch

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied patient effects:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for patient: none

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [groomController.recordInteraction] Interaction recorded: 8 bonding, -2 stress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 4494 for interaction_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [groomProgressionService.awardGroomXP] Groom 4494 gained 2 XP: 9 ‚Üí 11 (Level 1 ‚Üí 1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [groomController.recordInteraction] Awarded 2 XP to groom 4494 for interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [POST] /api/grooms/interact - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [POST] /api/grooms/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [groomController.recordInteraction] Recording trust_building interaction for foal 10846

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying patient personality effects for task trust_building

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied patient effects: category_match

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for patient: category_match

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [groomController.recordInteraction] Interaction recorded: 7 bonding, -1 stress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [groomController.recordInteraction] Personality effects applied (patient): category_match - Reduces burnout risk and failure chance on enrichment tasks

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 4495 for interaction_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [groomProgressionService.awardGroomXP] Groom 4495 gained 2 XP: 3 ‚Üí 5 (Level 1 ‚Üí 1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [groomController.recordInteraction] Awarded 2 XP to groom 4495 for interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [POST] /api/grooms/interact - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [POST] /api/grooms/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [groomController.recordInteraction] Recording trust_building interaction for foal 10847

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying patient personality effects for task trust_building

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied patient effects: category_match

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for patient: category_match

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [groomController.recordInteraction] Interaction recorded: 7 bonding, -2 stress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [groomController.recordInteraction] Personality effects applied (patient): category_match - Reduces burnout risk and failure chance on enrichment tasks

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 4496 for interaction_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [groomProgressionService.awardGroomXP] Groom 4496 gained 2 XP: 3 ‚Üí 5 (Level 1 ‚Üí 1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [groomController.recordInteraction] Awarded 2 XP to groom 4496 for interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [POST] /api/grooms/interact - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [POST] /api/grooms/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [groomController.recordInteraction] Recording desensitization interaction for foal 10847

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [POST] /api/grooms/interact - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [POST] /api/grooms/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [groomController.recordInteraction] Recording early_touch interaction for foal 10848

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying patient personality effects for task early_touch

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied patient effects:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for patient: none

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [groomController.recordInteraction] Interaction recorded: 4 bonding, -2 stress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 4497 for interaction_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [groomProgressionService.awardGroomXP] Groom 4497 gained 2 XP: 3 ‚Üí 5 (Level 1 ‚Üí 1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [groomController.recordInteraction] Awarded 2 XP to groom 4497 for interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [POST] /api/grooms/interact - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [POST] /api/grooms/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [groomController.recordInteraction] Recording hoof_handling interaction for foal 10849

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [POST] /api/grooms/interact - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/groomBondingIntegration.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:50:09] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:09] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:50:10] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:10] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:10] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:10] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:10] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:10] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:10] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:10] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:10] info: [POST] /api/grooms/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:10] info: [groomController.recordInteraction] Recording brushing interaction for foal 10850

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:10] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task brushing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:10] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: task_specialty

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:10] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: task_specialty

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:10] info: [groomController.recordInteraction] Interaction recorded: 6 bonding, -1 stress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:10] info: [groomController.recordInteraction] Personality effects applied (gentle): task_specialty - 10% increased success rate on nervous or timid horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:10] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 4499 for interaction_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:10] info: [groomProgressionService.awardGroomXP] Groom 4499 gained 2 XP: 5 ‚Üí 7 (Level 1 ‚Üí 1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:10] info: [groomController.recordInteraction] Awarded 2 XP to groom 4499 for interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:10] info: [POST] /api/grooms/interact - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [POST] /api/grooms/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [groomController.recordInteraction] Recording hand-walking interaction for foal 10851

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task hand-walking

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [groomController.recordInteraction] Interaction recorded: 10 bonding, -4 stress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 4500 for interaction_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [groomProgressionService.awardGroomXP] Groom 4500 gained 2 XP: 5 ‚Üí 7 (Level 1 ‚Üí 1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [groomController.recordInteraction] Awarded 2 XP to groom 4500 for interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [POST] /api/grooms/interact - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [POST] /api/grooms/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [groomController.recordInteraction] Recording stall_care interaction for foal 10852

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task stall_care

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: task_specialty

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: task_specialty

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [groomController.recordInteraction] Interaction recorded: 4 bonding, -1 stress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [groomController.recordInteraction] Personality effects applied (gentle): task_specialty - 10% increased success rate on nervous or timid horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 4501 for interaction_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [groomProgressionService.awardGroomXP] Groom 4501 gained 2 XP: 5 ‚Üí 7 (Level 1 ‚Üí 1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [groomController.recordInteraction] Awarded 2 XP to groom 4501 for interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [POST] /api/grooms/interact - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [POST] /api/grooms/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [groomController.recordInteraction] Recording brushing interaction for foal 10854

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [POST] /api/grooms/interact - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [POST] /api/grooms/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [groomController.recordInteraction] Recording brushing interaction for foal 10855

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task brushing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: task_specialty

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: task_specialty

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [groomController.recordInteraction] Interaction recorded: 4 bonding, -1 stress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [groomController.recordInteraction] Personality effects applied (gentle): task_specialty - 10% increased success rate on nervous or timid horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 4503 for interaction_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [groomProgressionService.awardGroomXP] Groom 4503 gained 2 XP: 5 ‚Üí 7 (Level 1 ‚Üí 1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [groomController.recordInteraction] Awarded 2 XP to groom 4503 for interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [POST] /api/grooms/interact - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [POST] /api/grooms/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [groomController.recordInteraction] Recording brushing interaction for foal 10856

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task brushing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: task_specialty

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: task_specialty

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [groomController.recordInteraction] Interaction recorded: 4 bonding, -4 stress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [groomController.recordInteraction] Personality effects applied (gentle): task_specialty - 10% increased success rate on nervous or timid horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 4504 for interaction_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [groomProgressionService.awardGroomXP] Groom 4504 gained 2 XP: 5 ‚Üí 7 (Level 1 ‚Üí 1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [groomController.recordInteraction] Awarded 2 XP to groom 4504 for interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [POST] /api/grooms/interact - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [POST] /api/grooms/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [groomController.recordInteraction] Recording brushing interaction for foal 10857

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task brushing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: task_specialty

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: task_specialty

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [groomController.recordInteraction] Interaction recorded: 7 bonding, -4 stress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [groomController.recordInteraction] Personality effects applied (gentle): task_specialty - 10% increased success rate on nervous or timid horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 4505 for interaction_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [groomProgressionService.awardGroomXP] Groom 4505 gained 2 XP: 5 ‚Üí 7 (Level 1 ‚Üí 1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [groomController.recordInteraction] Awarded 2 XP to groom 4505 for interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [POST] /api/grooms/interact - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [POST] /api/grooms/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [groomController.recordInteraction] Recording hand-walking interaction for foal 10857

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [POST] /api/grooms/interact - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/training-updated.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:50:11] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:11] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:50:12] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:12] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:12] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:12] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:12] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:12] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:12] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:12] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:12] info: [GET] /api/horses/trainable/00000000-0000-0000-0000-000000000001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.getTrainableHorses] Getting trainable horses for user 00000000-0000-0000-0000-000000000001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:12] warn: [trainingController.getTrainableHorses] User 00000000-0000-0000-0000-000000000001 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:12] info: [GET] /api/horses/trainable/00000000-0000-0000-0000-000000000001 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:12] info: [GET] /api/horses/trainable/00000000-0000-0000-0000-000000000001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.getTrainableHorses] Getting trainable horses for user 00000000-0000-0000-0000-000000000001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:12] warn: [trainingController.getTrainableHorses] User 00000000-0000-0000-0000-000000000001 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:12] info: [GET] /api/horses/trainable/00000000-0000-0000-0000-000000000001 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:12] info: [GET] /api/horses/trainable/00000000-0000-0000-0000-000000000001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.getTrainableHorses] Getting trainable horses for user 00000000-0000-0000-0000-000000000001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:12] warn: [trainingController.getTrainableHorses] User 00000000-0000-0000-0000-000000000001 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:12] info: [GET] /api/horses/trainable/00000000-0000-0000-0000-000000000001 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:12] info: [GET] /api/training/status/1/Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:12] info: [trainingRoutes.getStatus] Getting training status for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.getTrainingStatus] Getting training status for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:12] warn: [trainingController.canTrain] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getLastTrainingDate] No training records found for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 1 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getAnyRecentTraining] No training records found for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.getTrainingStatus] Training status retrieved for horse 1: eligible=false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:12] info: [GET] /api/training/status/1/Racing - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:12] info: [GET] /api/training/status/1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:12] info: [trainingRoutes.getStatusAll] Getting all training statuses for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.getTrainingStatus] Getting training status for horse 1 in Western Pleasure

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Western Pleasure

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.getTrainingStatus] Getting training status for horse 1 in Reining

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Reining

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.getTrainingStatus] Getting training status for horse 1 in Cutting

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Cutting

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.getTrainingStatus] Getting training status for horse 1 in Barrel Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Barrel Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.getTrainingStatus] Getting training status for horse 1 in Roping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Roping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.getTrainingStatus] Getting training status for horse 1 in Team Penning

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Team Penning

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.getTrainingStatus] Getting training status for horse 1 in Rodeo

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Rodeo

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.getTrainingStatus] Getting training status for horse 1 in Hunter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Hunter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.getTrainingStatus] Getting training status for horse 1 in Saddleseat

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Saddleseat

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.getTrainingStatus] Getting training status for horse 1 in Endurance

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Endurance

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.getTrainingStatus] Getting training status for horse 1 in Eventing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Eventing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.getTrainingStatus] Getting training status for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.getTrainingStatus] Getting training status for horse 1 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.getTrainingStatus] Getting training status for horse 1 in Vaulting

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Vaulting

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.getTrainingStatus] Getting training status for horse 1 in Polo

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Polo

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.getTrainingStatus] Getting training status for horse 1 in Cross Country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Cross Country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.getTrainingStatus] Getting training status for horse 1 in Combined Driving

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Combined Driving

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.getTrainingStatus] Getting training status for horse 1 in Fine Harness

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Fine Harness

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.getTrainingStatus] Getting training status for horse 1 in Gaited

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Gaited

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.getTrainingStatus] Getting training status for horse 1 in Gymkhana

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Gymkhana

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.getTrainingStatus] Getting training status for horse 1 in Steeplechase

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Steeplechase

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.getTrainingStatus] Getting training status for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.getTrainingStatus] Getting training status for horse 1 in Harness Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Harness Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 2)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 4)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 5)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 6)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 7)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 8)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 9)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 10)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 11)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 12)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 13)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 14)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 15)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 16)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 17)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 18)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 19)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 20)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 21)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 22)

    console.log
      [2025-11-21 17:50:12] warn: [trainingController.canTrain] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      [2025-11-21 17:50:12] warn: [trainingController.canTrain] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      [2025-11-21 17:50:12] warn: [trainingController.canTrain] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 2)

    console.log
      [2025-11-21 17:50:12] warn: [trainingController.canTrain] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-11-21 17:50:12] warn: [trainingController.canTrain] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 4)

    console.log
      [2025-11-21 17:50:12] warn: [trainingController.canTrain] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 5)

    console.log
      [2025-11-21 17:50:12] warn: [trainingController.canTrain] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 6)

    console.log
      [2025-11-21 17:50:12] warn: [trainingController.canTrain] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 7)

    console.log
      [2025-11-21 17:50:12] warn: [trainingController.canTrain] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 8)

    console.log
      [2025-11-21 17:50:12] warn: [trainingController.canTrain] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 9)

    console.log
      [2025-11-21 17:50:12] warn: [trainingController.canTrain] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 10)

    console.log
      [2025-11-21 17:50:12] warn: [trainingController.canTrain] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 11)

    console.log
      [2025-11-21 17:50:12] warn: [trainingController.canTrain] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 12)

    console.log
      [2025-11-21 17:50:12] warn: [trainingController.canTrain] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 13)

    console.log
      [2025-11-21 17:50:12] warn: [trainingController.canTrain] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 14)

    console.log
      [2025-11-21 17:50:12] warn: [trainingController.canTrain] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 15)

    console.log
      [2025-11-21 17:50:12] warn: [trainingController.canTrain] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 16)

    console.log
      [2025-11-21 17:50:12] warn: [trainingController.canTrain] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 17)

    console.log
      [2025-11-21 17:50:12] warn: [trainingController.canTrain] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 18)

    console.log
      [2025-11-21 17:50:12] warn: [trainingController.canTrain] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 19)

    console.log
      [2025-11-21 17:50:12] warn: [trainingController.canTrain] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 20)

    console.log
      [2025-11-21 17:50:12] warn: [trainingController.canTrain] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 21)

    console.log
      [2025-11-21 17:50:12] warn: [trainingController.canTrain] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 22)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 2)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 4)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 5)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 6)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 7)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 8)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 9)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 10)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 11)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 12)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 13)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 14)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 15)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 16)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 17)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 18)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 19)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 20)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 21)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 22)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 2)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 4)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 5)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 6)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 7)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 8)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 9)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 10)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 11)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 12)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 13)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 14)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 15)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 16)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 17)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 18)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 19)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 20)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 21)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 22)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 1 in Western Pleasure

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 1 in Reining

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 1 in Cutting

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 2)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 1 in Barrel Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 1 in Roping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 4)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 1 in Team Penning

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 5)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 1 in Rodeo

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 6)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 1 in Hunter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 7)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 1 in Saddleseat

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 8)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 1 in Endurance

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 9)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 1 in Eventing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 10)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 11)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 1 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 12)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 1 in Vaulting

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 13)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 1 in Polo

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 14)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 1 in Cross Country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 15)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 1 in Combined Driving

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 16)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 1 in Fine Harness

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 17)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 1 in Gaited

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 18)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 1 in Gymkhana

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 19)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 1 in Steeplechase

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 20)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 21)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 1 in Harness Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 22)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getLastTrainingDate] No training records found for horse 1 in Western Pleasure

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 1 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getLastTrainingDate] No training records found for horse 1 in Reining

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 1 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getLastTrainingDate] No training records found for horse 1 in Cutting

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 2)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 1 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 2)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getLastTrainingDate] No training records found for horse 1 in Barrel Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 1 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getLastTrainingDate] No training records found for horse 1 in Roping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 4)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 1 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 4)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getLastTrainingDate] No training records found for horse 1 in Team Penning

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 5)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 1 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 5)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getLastTrainingDate] No training records found for horse 1 in Rodeo

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 6)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 1 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 6)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getLastTrainingDate] No training records found for horse 1 in Hunter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 7)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 1 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 7)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getLastTrainingDate] No training records found for horse 1 in Saddleseat

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 8)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 1 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 8)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getLastTrainingDate] No training records found for horse 1 in Endurance

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 9)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 1 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 9)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getLastTrainingDate] No training records found for horse 1 in Eventing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 10)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 1 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 10)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getLastTrainingDate] No training records found for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 11)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 1 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 11)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getLastTrainingDate] No training records found for horse 1 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 12)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 1 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 12)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getLastTrainingDate] No training records found for horse 1 in Vaulting

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 13)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 1 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 13)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getLastTrainingDate] No training records found for horse 1 in Polo

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 14)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 1 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 14)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getLastTrainingDate] No training records found for horse 1 in Cross Country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 15)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 1 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 15)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getLastTrainingDate] No training records found for horse 1 in Combined Driving

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 16)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 1 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 16)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getLastTrainingDate] No training records found for horse 1 in Fine Harness

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 17)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 1 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 17)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getLastTrainingDate] No training records found for horse 1 in Gaited

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 18)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 1 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 18)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getLastTrainingDate] No training records found for horse 1 in Gymkhana

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 19)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 1 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 19)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getLastTrainingDate] No training records found for horse 1 in Steeplechase

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 20)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 1 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 20)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getLastTrainingDate] No training records found for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 21)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 1 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 21)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getLastTrainingDate] No training records found for horse 1 in Harness Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 22)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 1 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 22)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getAnyRecentTraining] No training records found for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.getTrainingStatus] Training status retrieved for horse 1: eligible=false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getAnyRecentTraining] No training records found for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.getTrainingStatus] Training status retrieved for horse 1: eligible=false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getAnyRecentTraining] No training records found for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 2)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.getTrainingStatus] Training status retrieved for horse 1: eligible=false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 2)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getAnyRecentTraining] No training records found for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.getTrainingStatus] Training status retrieved for horse 1: eligible=false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getAnyRecentTraining] No training records found for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 4)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.getTrainingStatus] Training status retrieved for horse 1: eligible=false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 4)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getAnyRecentTraining] No training records found for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 5)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.getTrainingStatus] Training status retrieved for horse 1: eligible=false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 5)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getAnyRecentTraining] No training records found for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 6)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.getTrainingStatus] Training status retrieved for horse 1: eligible=false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 6)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getAnyRecentTraining] No training records found for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 7)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.getTrainingStatus] Training status retrieved for horse 1: eligible=false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 7)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getAnyRecentTraining] No training records found for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 8)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.getTrainingStatus] Training status retrieved for horse 1: eligible=false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 8)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getAnyRecentTraining] No training records found for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 9)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.getTrainingStatus] Training status retrieved for horse 1: eligible=false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 9)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getAnyRecentTraining] No training records found for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 10)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.getTrainingStatus] Training status retrieved for horse 1: eligible=false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 10)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getAnyRecentTraining] No training records found for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 11)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.getTrainingStatus] Training status retrieved for horse 1: eligible=false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 11)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getAnyRecentTraining] No training records found for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 12)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.getTrainingStatus] Training status retrieved for horse 1: eligible=false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 12)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getAnyRecentTraining] No training records found for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 13)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.getTrainingStatus] Training status retrieved for horse 1: eligible=false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 13)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getAnyRecentTraining] No training records found for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 14)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.getTrainingStatus] Training status retrieved for horse 1: eligible=false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 14)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getAnyRecentTraining] No training records found for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 15)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.getTrainingStatus] Training status retrieved for horse 1: eligible=false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 15)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getAnyRecentTraining] No training records found for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 16)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.getTrainingStatus] Training status retrieved for horse 1: eligible=false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 16)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getAnyRecentTraining] No training records found for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 17)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.getTrainingStatus] Training status retrieved for horse 1: eligible=false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 17)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getAnyRecentTraining] No training records found for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 18)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.getTrainingStatus] Training status retrieved for horse 1: eligible=false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 18)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getAnyRecentTraining] No training records found for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 19)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.getTrainingStatus] Training status retrieved for horse 1: eligible=false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 19)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getAnyRecentTraining] No training records found for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 20)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.getTrainingStatus] Training status retrieved for horse 1: eligible=false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 20)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getAnyRecentTraining] No training records found for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 21)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.getTrainingStatus] Training status retrieved for horse 1: eligible=false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 21)

    console.log
      [2025-11-21 17:50:12] info: [trainingModel.getAnyRecentTraining] No training records found for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 22)

    console.log
      [2025-11-21 17:50:12] info: [trainingController.getTrainingStatus] Training status retrieved for horse 1: eligible=false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 22)

    console.log
      [2025-11-21 17:50:13] info: [GET] /api/training/status/1 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:13] info: [GET] /api/horses/trainable/00000000-0000-0000-0000-000000000001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:13] info: [trainingController.getTrainableHorses] Getting trainable horses for user 00000000-0000-0000-0000-000000000001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:13] warn: [trainingController.getTrainableHorses] User 00000000-0000-0000-0000-000000000001 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:13] info: [GET] /api/horses/trainable/00000000-0000-0000-0000-000000000001 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:13] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:13] info: [trainingController.trainRouteHandler] Training request for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:13] info: [trainingController.trainHorse] Attempting to train horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:13] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:13] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:13] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:13] warn: [trainingController.canTrain] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:13] warn: [trainingController.trainHorse] Training rejected: Horse not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:13] info: [POST] /api/training/train - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:13] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:13] info: [trainingController.trainRouteHandler] Training request for horse 99999 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:13] info: [trainingController.trainHorse] Attempting to train horse 99999 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:13] info: [trainingController.canTrain] Checking training eligibility for horse 99999 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:13] info: [trainingModel.getHorseAge] Getting age for horse 99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:13] info: [trainingModel.getHorseAge] Horse 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:13] warn: [trainingController.canTrain] Horse 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:13] warn: [trainingController.trainHorse] Training rejected: Horse not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:13] info: [POST] /api/training/train - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:13] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:13] info: [trainingController.trainRouteHandler] Training request for horse 1 in InvalidDiscipline

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:13] info: [trainingController.trainHorse] Attempting to train horse 1 in InvalidDiscipline

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:13] info: [trainingController.canTrain] Checking training eligibility for horse 1 in InvalidDiscipline

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:13] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:13] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:13] warn: [trainingController.canTrain] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:13] warn: [trainingController.trainHorse] Training rejected: Horse not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:13] info: [POST] /api/training/train - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/groomBonusTraits.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:50:13] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:13] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:13] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:50:14] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:14] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:14] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:14] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:14] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:14] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:14] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:14] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:14] info: [groomBonusTraitService.assignBonusTraits] Assigning bonus traits to groom 4506

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:14] info: [groomBonusTraitService.assignBonusTraits] Successfully assigned bonus traits to groom 4506

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:14] info: [groomBonusTraitService.assignBonusTraits] Assigning bonus traits to groom 4507

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:14] error: [groomBonusTraitService.assignBonusTraits] Error assigning bonus traits to groom 4507: Bonus trait constraints violated: Maximum 3 bonus traits allowed, got 4, Bonus for trait 'trait1' must be between 0 and 0.3 (30%)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:50:14] info: [groomBonusTraitService.getBonusTraits] Getting bonus traits for groom 4508

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:14] info: [groomBonusTraitService.getBonusTraits] Retrieved bonus traits for groom 4508

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:14] info: [traitAssignmentLogic.calculateTraitProbabilityWithBonus] Calculating probability for trait 'sensitive' on horse 10861

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:14] info: [groomBonusTraitService.getBonusTraits] Getting bonus traits for groom 4509

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:14] info: [groomBonusTraitService.getBonusTraits] Retrieved bonus traits for groom 4509

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:14] info: [groomBonusTraitService.checkBonusEligibility] Checking bonus eligibility for horse 10861 and groom 4509

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:14] info: [groomBonusTraitService.checkBonusEligibility] Eligibility check complete for horse 10861 and groom 4509: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:14] info: [traitAssignmentLogic.calculateTraitProbabilityWithBonus] Applied 20% bonus to trait 'sensitive' for horse 10861

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:14] info: [traitAssignmentLogic.calculateTraitProbabilityWithBonus] Calculating probability for trait 'sensitive' on horse 10862

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:14] info: [groomBonusTraitService.getBonusTraits] Getting bonus traits for groom 4510

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:14] info: [groomBonusTraitService.getBonusTraits] Retrieved bonus traits for groom 4510

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:14] info: [groomBonusTraitService.checkBonusEligibility] Checking bonus eligibility for horse 10862 and groom 4510

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:14] info: [groomBonusTraitService.checkBonusEligibility] Eligibility check complete for horse 10862 and groom 4510: false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:14] info: [traitAssignmentLogic.calculateTraitProbabilityWithBonus] Groom 4510 not eligible for bonus: Bond score too low

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:14] info: [traitAssignmentLogic.calculateTraitProbabilityWithBonus] Calculating probability for trait 'sensitive' on horse 10863

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:14] info: [groomBonusTraitService.getBonusTraits] Getting bonus traits for groom 4511

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:14] info: [groomBonusTraitService.getBonusTraits] Retrieved bonus traits for groom 4511

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:14] info: [groomBonusTraitService.checkBonusEligibility] Checking bonus eligibility for horse 10863 and groom 4511

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:14] info: [groomBonusTraitService.checkBonusEligibility] Eligibility check complete for horse 10863 and groom 4511: false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:14] info: [traitAssignmentLogic.calculateTraitProbabilityWithBonus] Groom 4511 not eligible for bonus: Insufficient assignment coverage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:14] info: [GET] /api/grooms/4512/bonus-traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:14] info: [auth] Authenticated user 552f67c6-7751-4726-af30-d57e841c030a for GET /4512/bonus-traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:14] info: [groomController.getGroomBonusTraits] Getting bonus traits for groom 4512

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:14] info: [groomBonusTraitService.getBonusTraits] Getting bonus traits for groom 4512

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:14] info: [groomBonusTraitService.getBonusTraits] Retrieved bonus traits for groom 4512

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:14] info: [GET] /api/grooms/4512/bonus-traits - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:14] info: [PUT] /api/grooms/4513/bonus-traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:14] info: [auth] Authenticated user 971a52ae-d7fa-4ab0-a8a6-1b062749d01f for PUT /4513/bonus-traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:14] info: [groomController.updateGroomBonusTraits] Updating bonus traits for groom 4513

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:14] info: [groomBonusTraitService.assignBonusTraits] Assigning bonus traits to groom 4513

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:14] info: [groomBonusTraitService.assignBonusTraits] Successfully assigned bonus traits to groom 4513

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:14] info: [PUT] /api/grooms/4513/bonus-traits - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:14] info: [PUT] /api/grooms/4514/bonus-traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:14] info: [auth] Authenticated user 135a105d-9b88-4864-864b-72e5f1d0a51b for PUT /4514/bonus-traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:14] info: [groomController.updateGroomBonusTraits] Updating bonus traits for groom 4514

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:14] info: [groomBonusTraitService.assignBonusTraits] Assigning bonus traits to groom 4514

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:14] error: [groomBonusTraitService.assignBonusTraits] Error assigning bonus traits to groom 4514: Bonus trait constraints violated: Bonus for trait 'trait1' must be between 0 and 0.3 (30%)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:50:14] error: [groomController.updateGroomBonusTraits] Error: Bonus trait constraints violated: Bonus for trait 'trait1' must be between 0 and 0.3 (30%)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:50:14] info: [PUT] /api/grooms/4514/bonus-traits - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:14] info: [GET] /api/grooms/4515/bonus-traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:14] warn: [auth] Missing token for GET /4515/bonus-traits from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:14] info: [GET] /api/grooms/4515/bonus-traits - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/integration/dashboardRoutes.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:50:15] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:15] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:15] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:50:15] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:15] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:15] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:15] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:15] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:15] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:15] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:15] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:15] info: [GET] /api/users/dashboard/f7e67238-f4d9-444c-bf6a-d0b881d77a0f

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:15] info: [auth] Authenticated user f7e67238-f4d9-444c-bf6a-d0b881d77a0f for GET /dashboard/f7e67238-f4d9-444c-bf6a-d0b881d77a0f

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:15] info: [trainingController.getTrainableHorses] Getting trainable horses for user f7e67238-f4d9-444c-bf6a-d0b881d77a0f

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:15] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10868 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:15] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 10868: Fri Nov 21 2025 15:50:15 GMT-0500 (Eastern Standard Time) (discipline: Dressage)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:15] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10869 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:15] info: [trainingModel.getAnyRecentTraining] No training records found for horse 10869

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:15] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10870 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:15] info: [trainingModel.getAnyRecentTraining] No training records found for horse 10870

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:15] info: [trainingController.getTrainableHorses] Found 2 trainable horses for user f7e67238-f4d9-444c-bf6a-d0b881d77a0f

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:15] info: [userController.getDashboardData] Successfully retrieved dashboard data for user testdashboarduser (3 horses, 2 trainable)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:15] info: [GET] /api/users/dashboard/f7e67238-f4d9-444c-bf6a-d0b881d77a0f - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:15] info: [GET] /api/users/dashboard/nonexistent-user

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:15] info: [auth] Authenticated user 7ee49e51-bb0e-48dd-aae8-c6ae08e52a64 for GET /dashboard/nonexistent-user

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:15] warn: [userRoutes] Validation errors for /dashboard/:userId: [{"type":"field","value":"nonexistent-user","msg":"User ID must be a valid UUID","path":"userId","location":"params"}]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:15] info: [GET] /api/users/dashboard/nonexistent-user - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:15] info: [GET] /api/users/dashboard/9862c066-3f26-4130-91b0-8fd8a4cdf88e

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:15] warn: [auth] Missing token for GET /dashboard/9862c066-3f26-4130-91b0-8fd8a4cdf88e from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:15] info: [GET] /api/users/dashboard/9862c066-3f26-4130-91b0-8fd8a4cdf88e - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:16] info: [GET] /api/users/dashboard/xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:16] info: [auth] Authenticated user ee715eea-9168-4d18-8c7c-9fa5c819cdf8 for GET /dashboard/xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:16] warn: [userRoutes] Validation errors for /dashboard/:userId: [{"type":"field","value":"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx","msg":"User ID must be a valid UUID","path":"userId","location":"params"}]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:16] info: [GET] /api/users/dashboard/xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:16] info: [GET] /api/users/dashboard/c788558c-bb5e-44ef-8e48-026f7ce3c292

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:16] info: [auth] Authenticated user c788558c-bb5e-44ef-8e48-026f7ce3c292 for GET /dashboard/c788558c-bb5e-44ef-8e48-026f7ce3c292

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:16] info: [trainingController.getTrainableHorses] Getting trainable horses for user c788558c-bb5e-44ef-8e48-026f7ce3c292

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:16] info: [trainingController.getTrainableHorses] User c788558c-bb5e-44ef-8e48-026f7ce3c292 has no horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:16] info: [userController.getDashboardData] Successfully retrieved dashboard data for user emptydashboarduser (0 horses, 0 trainable)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:16] info: [GET] /api/users/dashboard/c788558c-bb5e-44ef-8e48-026f7ce3c292 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:16] info: [GET] /api/users/dashboard/90d510be-7652-4eb7-a943-b33d6ac2dc54

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:16] info: [auth] Authenticated user 90d510be-7652-4eb7-a943-b33d6ac2dc54 for GET /dashboard/90d510be-7652-4eb7-a943-b33d6ac2dc54

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:16] info: [trainingController.getTrainableHorses] Getting trainable horses for user 90d510be-7652-4eb7-a943-b33d6ac2dc54

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:16] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10886 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:16] info: [trainingModel.getAnyRecentTraining] No training records found for horse 10886

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:16] info: [trainingController.getTrainableHorses] Found 1 trainable horses for user 90d510be-7652-4eb7-a943-b33d6ac2dc54

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:16] info: [userController.getDashboardData] Successfully retrieved dashboard data for user inactivedashboarduser (1 horses, 1 trainable)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:16] info: [GET] /api/users/dashboard/90d510be-7652-4eb7-a943-b33d6ac2dc54 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/traitMilestoneIntegration.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:50:16] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:16] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:16] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

FAIL tests/auth-working.test.mjs (5.054 s)
  ‚óè Console

    console.log
      [2025-11-21 17:50:17] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:17] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:17] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:50:17] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:18] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:18] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: authtest-register@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=11cf37aff2e43b678df2e0549d929f879315b0abe15f9eac96ac0f5853004f2d

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:50:18] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:18] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:18] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:18] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: authtest-duplicate@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=4a9fccb4995ca8170578410f466c500bde5dff572aeda17774bcccf7f3d2d2af

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:50:18] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:18] error: [authController.register] Error registering user: User with this email or username already exists

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:50:18] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:18] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:18] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: authtest-login@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=4b5d3b255b1db0a129f76738afc2f80c7b0e03c9a8d110ea587aebc029db1793

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:50:18] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:19] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:19] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:19] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:19] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: authtest-login@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=faf4f35b75407725e19045e5790eeb37b3164532a46c8f45227415f6f25fae3f

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:50:19] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:19] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:50:20] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:20] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:20] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: authtest-token@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=6f8f4e9f6dcbe4fbc159ba22bd0e0fa450e7d85c7c53e49efd009c9783a0278b

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:50:20] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:20] error: [authController.refreshToken] Error refreshing token: Cannot read properties of undefined (reading 'refreshToken')

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:50:20] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:20] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:20] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: authtest-token@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=6f93662eabe4816deacd215f1db5dac413c98d54ca399150dffbb5bb4a7232d7

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:50:20] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:20] error: [authController.refreshToken] Error refreshing token: Cannot read properties of undefined (reading 'refreshToken')

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:50:21] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:21] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:21] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: authtest-protected@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=0b7dde911341fcfdff8a40eb66981ea4c743e99106102a71266cf2639e93008b

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:50:21] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:21] warn: [auth] Invalid token for GET /api/auth/me from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:21] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:21] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:21] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: authtest-protected@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=4c67439678c198e6904545f69d751a2b91da751ab453464425ccee12ee94241e

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:50:21] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:21] warn: [auth] Missing token for GET /api/auth/me from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:21] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:21] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:21] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: authtest-protected@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=8ce8bc95955b29fda1d2e92a2e99b144e16059d768e55617bbea8aa6722810ee

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:50:21] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:21] warn: [auth] Invalid token for POST /api/auth/logout from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

  ‚óè üîê INTEGRATION: Authentication System - Complete Auth Workflow Validation ‚Ä∫ User Registration ‚Ä∫ should register a new user successfully

    expect(received).toBe(expected) // Object.is equality

    Expected: "User registered successfully"
    Received: "User registered successfully. Please check your email to verify your account."

    [0m [90m 134 |[39m
     [90m 135 |[39m       expect(response[33m.[39mbody[33m.[39mstatus)[33m.[39mtoBe([32m'success'[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 136 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoBe([32m'User registered successfully'[39m)[33m;[39m
     [90m     |[39m                                     [31m[1m^[22m[39m
     [90m 137 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39muser[33m.[39memail)[33m.[39mtoBe(userData[33m.[39memail)[33m;[39m
     [90m 138 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39muser[33m.[39musername)[33m.[39mtoBe(userData[33m.[39musername)[33m;[39m
     [90m 139 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39muser[33m.[39mfirstName)[33m.[39mtoBe(userData[33m.[39mfirstName)[33m;[39m[0m

      at Object.<anonymous> (tests/auth-working.test.mjs:136:37)

  ‚óè üîê INTEGRATION: Authentication System - Complete Auth Workflow Validation ‚Ä∫ User Login ‚Ä∫ should login successfully with valid credentials

    expect(received).toBeDefined()

    Received: undefined

    [0m [90m 190 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoBe([32m'Login successful'[39m)[33m;[39m
     [90m 191 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39muser[33m.[39memail)[33m.[39mtoBe(loginData[33m.[39memail)[33m;[39m
    [31m[1m>[22m[39m[90m 192 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mtoken)[33m.[39mtoBeDefined()[33m;[39m
     [90m     |[39m                                        [31m[1m^[22m[39m
     [90m 193 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mrefreshToken)[33m.[39mtoBeDefined()[33m;[39m
     [90m 194 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39muser[33m.[39mpassword)[33m.[39mtoBeUndefined()[33m;[39m
     [90m 195 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (tests/auth-working.test.mjs:192:40)

  ‚óè üîê INTEGRATION: Authentication System - Complete Auth Workflow Validation ‚Ä∫ User Login ‚Ä∫ should reject login with invalid credentials

    expect(received).toBe(expected) // Object.is equality

    Expected: "Invalid email or password"
    Received: "Invalid credentials"

    [0m [90m 204 |[39m
     [90m 205 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 206 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoBe([32m'Invalid email or password'[39m)[33m;[39m
     [90m     |[39m                                     [31m[1m^[22m[39m
     [90m 207 |[39m     })[33m;[39m
     [90m 208 |[39m   })[33m;[39m
     [90m 209 |[39m[0m

      at Object.<anonymous> (tests/auth-working.test.mjs:206:37)

  ‚óè üîê INTEGRATION: Authentication System - Complete Auth Workflow Validation ‚Ä∫ Token Management ‚Ä∫ should refresh token successfully

    expected 200 "OK", got 500 "Internal Server Error"

    [0m [90m 237 |[39m         [33m.[39mpost([32m'/api/auth/refresh'[39m)
     [90m 238 |[39m         [33m.[39msend({ refreshToken[33m:[39m refreshTokenValue }) [90m// Use the locally scoped variable[39m
    [31m[1m>[22m[39m[90m 239 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 240 |[39m
     [90m 241 |[39m       expect(response[33m.[39mbody[33m.[39mstatus)[33m.[39mtoBe([32m'success'[39m)[33m;[39m
     [90m 242 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoBe([32m'Token refreshed successfully'[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/auth-working.test.mjs:239:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè üîê INTEGRATION: Authentication System - Complete Auth Workflow Validation ‚Ä∫ Token Management ‚Ä∫ should reject invalid refresh token

    expected 401 "Unauthorized", got 500 "Internal Server Error"

    [0m [90m 246 |[39m
     [90m 247 |[39m     it([32m'should reject invalid refresh token'[39m[33m,[39m [36masync[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 248 |[39m       [36mconst[39m response [33m=[39m [36mawait[39m request(app)[33m.[39mpost([32m'/api/auth/refresh'[39m)[33m.[39msend({ refreshToken[33m:[39m [32m'invalid-token'[39m })[33m.[39mexpect([35m401[39m)[33m;[39m
     [90m     |[39m                                                                                                             [31m[1m^[22m[39m
     [90m 249 |[39m
     [90m 250 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m 251 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoBe([32m'Invalid or expired refresh token'[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/auth-working.test.mjs:248:109)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè üîê INTEGRATION: Authentication System - Complete Auth Workflow Validation ‚Ä∫ Protected Routes ‚Ä∫ should get user profile with valid token

    expected 200 "OK", got 401 "Unauthorized"

    [0m [90m 285 |[39m         [33m.[39m[36mget[39m([32m'/api/auth/me'[39m)
     [90m 286 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authTokenValue}`[39m) [90m// Use renamed variable[39m
    [31m[1m>[22m[39m[90m 287 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 288 |[39m
     [90m 289 |[39m       expect(response[33m.[39mbody[33m.[39mstatus)[33m.[39mtoBe([32m'success'[39m)[33m;[39m
     [90m 290 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39muser[33m.[39memail)[33m.[39mtoBe(testUserValue[33m.[39memail)[33m;[39m [90m// Use renamed variable[39m[0m

      at Object.<anonymous> (tests/auth-working.test.mjs:287:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè üîê INTEGRATION: Authentication System - Complete Auth Workflow Validation ‚Ä∫ Protected Routes ‚Ä∫ should logout successfully

    expected 200 "OK", got 401 "Unauthorized"

    [0m [90m 307 |[39m         [33m.[39mpost([32m'/api/auth/logout'[39m)
     [90m 308 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authTokenValue}`[39m) [90m// Use renamed variable[39m
    [31m[1m>[22m[39m[90m 309 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 310 |[39m
     [90m 311 |[39m       expect(response[33m.[39mbody[33m.[39mstatus)[33m.[39mtoBe([32m'success'[39m)[33m;[39m
     [90m 312 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoBe([32m'Logout successful'[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/auth-working.test.mjs:309:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

PASS tests/legacyScoreTraitIntegration.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:50:22] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:22] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:22] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:50:22] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:22] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:22] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:22] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:22] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:22] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:22] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:22] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:22] info: [legacyScoreTraitCalculator.calculateTraitScore] Calculating trait score for horse 10894

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:22] info: [legacyScoreTraitCalculator.calculateTraitScore] Calculated trait score 14/30 for horse 10894

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:23] info: [legacyScoreTraitCalculator.calculateTraitScore] Calculating trait score for horse 10895

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:23] info: [legacyScoreTraitCalculator.calculateTraitScore] Calculated trait score 5/30 for horse 10895

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:23] info: [legacyScoreTraitCalculator.calculateTraitScore] Calculating trait score for horse 10896

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:23] info: [legacyScoreTraitCalculator.calculateTraitScore] Calculated trait score 10/30 for horse 10896

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:23] info: [legacyScoreTraitCalculator.calculateTraitScore] Calculating trait score for horse 10897

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:23] info: [legacyScoreTraitCalculator.calculateTraitScore] Calculated trait score 5/30 for horse 10897

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:23] info: [legacyScoreCalculator.calculateLegacyScore] Calculating legacy score for horse 10898

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:23] info: [legacyScoreTraitCalculator.calculateTraitScore] Calculating trait score for horse 10898

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:23] info: [legacyScoreTraitCalculator.calculateTraitScore] Calculated trait score 5/30 for horse 10898

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:23] info: [legacyScoreCalculator.calculateLegacyScore] Calculated legacy score 29/100 (F) for horse 10898

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:23] info: [legacyScoreCalculator.calculateLegacyScore] Calculating legacy score for horse 10899

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:23] info: [legacyScoreTraitCalculator.calculateTraitScore] Calculating trait score for horse 10899

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:23] info: [legacyScoreTraitCalculator.calculateTraitScore] Calculated trait score 0/30 for horse 10899

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:23] info: [legacyScoreCalculator.calculateLegacyScore] Calculated legacy score 24/100 (F) for horse 10899

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:23] info: [GET] /api/horses/10900/legacy-score

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:23] warn: [MemoryMonitoring] Memory threshold exceeded: 515MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:23] info: [auth] Authenticated user 8b2ebf3e-e6e1-4131-af70-9a704dcaf759 for GET /10900/legacy-score

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:23] info: [legacyScoreCalculator.calculateLegacyScore] Calculating legacy score for horse 10900

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:23] info: [legacyScoreTraitCalculator.calculateTraitScore] Calculating trait score for horse 10900

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:23] info: [legacyScoreTraitCalculator.calculateTraitScore] Calculated trait score 5/30 for horse 10900

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:23] info: [legacyScoreCalculator.calculateLegacyScore] Calculated legacy score 29/100 (F) for horse 10900

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:23] info: [GET] /api/horses/10900/legacy-score - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:23] info: [GET] /api/horses/10901/legacy-score

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:23] warn: [MemoryMonitoring] Memory threshold exceeded: 523MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:23] warn: [auth] Missing token for GET /10901/legacy-score from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:23] info: [GET] /api/horses/10901/legacy-score - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:23] info: [GET] /api/horses/99999/legacy-score

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:23] warn: [MemoryMonitoring] Memory threshold exceeded: 524MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:23] info: [auth] Authenticated user 40c2b901-a899-4ac2-add1-53ce9ba9dbcb for GET /99999/legacy-score

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:23] info: [legacyScoreCalculator.calculateLegacyScore] Calculating legacy score for horse 99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:23] error: [legacyScoreCalculator.calculateLegacyScore] Error calculating legacy score for horse 99999: Horse with ID 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:50:23] info: [GET] /api/horses/99999/legacy-score - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/routes/groomRetirementRoutes.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:50:23] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:23] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:23] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:50:24] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:24] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:24] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:24] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:24] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:24] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:24] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:24] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:24] info: [GET] /api/grooms/4525/retirement/eligibility

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:24] warn: [MemoryMonitoring] Memory threshold exceeded: 555MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:24] info: [auth] Authenticated user fab79621-1a50-44ee-8356-859fc8b90884 for GET /4525/retirement/eligibility

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:24] info: [GET] /api/grooms/4525/retirement/eligibility - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:24] info: [GET] /api/grooms/retirement/statistics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:24] info: [auth] Authenticated user fab79621-1a50-44ee-8356-859fc8b90884 for GET /retirement/statistics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:24] info: [GET] /api/grooms/retirement/statistics - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:24] info: [GET] /api/grooms/retirement/approaching

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:24] info: [auth] Authenticated user fab79621-1a50-44ee-8356-859fc8b90884 for GET /retirement/approaching

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:24] info: [GET] /api/grooms/retirement/approaching - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:24] info: [GET] /api/grooms/4532/legacy/eligibility

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:24] info: [auth] Authenticated user fab79621-1a50-44ee-8356-859fc8b90884 for GET /4532/legacy/eligibility

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:24] info: [GET] /api/grooms/4532/legacy/eligibility - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:24] info: [GET] /api/grooms/legacy/history

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:24] info: [auth] Authenticated user fab79621-1a50-44ee-8356-859fc8b90884 for GET /legacy/history

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:24] info: [GET] /api/grooms/legacy/history - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:24] info: [GET] /api/grooms/talents/definitions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:24] info: [GET] /api/grooms/talents/definitions - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:24] info: [GET] /api/grooms/4537/talents

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:24] info: [auth] Authenticated user fab79621-1a50-44ee-8356-859fc8b90884 for GET /4537/talents

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:24] info: [GET] /api/grooms/4537/talents - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:24] info: [POST] /api/grooms/4539/talents/validate

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:24] info: [auth] Authenticated user fab79621-1a50-44ee-8356-859fc8b90884 for POST /4539/talents/validate

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:24] info: [POST] /api/grooms/4539/talents/validate - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:24] info: [POST] /api/grooms/4541/talents/select

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:24] info: [auth] Authenticated user fab79621-1a50-44ee-8356-859fc8b90884 for POST /4541/talents/select

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:24] info: Groom 4541 selected talent gentle_hands for tier1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:24] info: [POST] /api/grooms/4541/talents/select - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:24] info: [GET] /api/grooms/4543/retirement/eligibility

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:24] warn: [auth] Missing token for GET /4543/retirement/eligibility from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:24] info: [GET] /api/grooms/4543/retirement/eligibility - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:24] info: [GET] /api/grooms/retirement/statistics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:24] warn: [auth] Missing token for GET /retirement/statistics from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:24] info: [GET] /api/grooms/retirement/statistics - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:24] info: [GET] /api/grooms/4543/talents

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:24] warn: [auth] Missing token for GET /4543/talents from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:24] info: [GET] /api/grooms/4543/talents - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:24] info: [GET] /api/grooms/talents/definitions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:24] info: [GET] /api/grooms/talents/definitions - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:25] info: [GET] /api/grooms/invalid/retirement/eligibility

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:25] info: [auth] Authenticated user fab79621-1a50-44ee-8356-859fc8b90884 for GET /invalid/retirement/eligibility

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:25] warn: [groomRoutes] Validation errors: [{"type":"field","value":"invalid","msg":"Groom ID must be an integer","path":"id","location":"params"}]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:25] info: [GET] /api/grooms/invalid/retirement/eligibility - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:25] info: [POST] /api/grooms/4549/talents/select

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:25] info: [auth] Authenticated user fab79621-1a50-44ee-8356-859fc8b90884 for POST /4549/talents/select

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:25] warn: [groomRoutes] Validation errors: [{"type":"field","value":"invalid_tier","msg":"Invalid tier","path":"tier","location":"body"}]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:25] info: [POST] /api/grooms/4549/talents/select - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

FAIL tests/integration/horseBreedingWorkflow.integration.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:50:25] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:25] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:25] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:50:26] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:26] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:26] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:26] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:26] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:26] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:26] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:26] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:26] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:26] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:26] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:26] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: integration-test@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=e09cb5ddf31b6e05f50b37ec599d1f2084fc93c695883aa3b98a18eb9d2294f4

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:50:26] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:26] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

  ‚óè üêé INTEGRATION: Complete Horse Breeding Workflow ‚Ä∫ üîê STEP 1: User Registration & Authentication ‚Ä∫ should register user and obtain authentication token

    expect(received).toBeDefined()

    Received: undefined

    [0m [90m  98 |[39m       expect(response[33m.[39mbody[33m.[39mstatus)[33m.[39mtoBe([32m'success'[39m)[33m;[39m
     [90m  99 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39muser[33m.[39memail)[33m.[39mtoBe(userData[33m.[39memail)[33m;[39m
    [31m[1m>[22m[39m[90m 100 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mtoken)[33m.[39mtoBeDefined()[33m;[39m
     [90m     |[39m                                        [31m[1m^[22m[39m
     [90m 101 |[39m
     [90m 102 |[39m       [90m// Store for subsequent tests[39m
     [90m 103 |[39m       testUser [33m=[39m response[33m.[39mbody[33m.[39mdata[33m.[39muser[33m;[39m[0m

      at Object.<anonymous> (tests/integration/horseBreedingWorkflow.integration.test.mjs:100:40)

  ‚óè üêé INTEGRATION: Complete Horse Breeding Workflow ‚Ä∫ üê¥ STEP 2: Horse Creation (Breeding Stock) ‚Ä∫ should create mare with quality traits

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 134 |[39m           sex[33m:[39m [32m'Mare'[39m[33m,[39m
     [90m 135 |[39m           healthStatus[33m:[39m [32m'Excellent'[39m[33m,[39m
    [31m[1m>[22m[39m[90m 136 |[39m           ownerId[33m:[39m testUser[33m.[39mid[33m,[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 137 |[39m           userId[33m:[39m testUser[33m.[39mid[33m,[39m
     [90m 138 |[39m           dateOfBirth[33m:[39m [36mnew[39m [33mDate[39m([32m'2019-01-01'[39m)[33m,[39m
     [90m 139 |[39m           disciplineScores[33m:[39m {[0m

      at Object.<anonymous> (tests/integration/horseBreedingWorkflow.integration.test.mjs:136:29)

  ‚óè üêé INTEGRATION: Complete Horse Breeding Workflow ‚Ä∫ üê¥ STEP 2: Horse Creation (Breeding Stock) ‚Ä∫ should create stallion with complementary traits

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 166 |[39m           sex[33m:[39m [32m'Stallion'[39m[33m,[39m
     [90m 167 |[39m           healthStatus[33m:[39m [32m'Excellent'[39m[33m,[39m
    [31m[1m>[22m[39m[90m 168 |[39m           ownerId[33m:[39m testUser[33m.[39mid[33m,[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 169 |[39m           userId[33m:[39m testUser[33m.[39mid[33m,[39m
     [90m 170 |[39m           dateOfBirth[33m:[39m [36mnew[39m [33mDate[39m([32m'2018-01-01'[39m)[33m,[39m
     [90m 171 |[39m           disciplineScores[33m:[39m {[0m

      at Object.<anonymous> (tests/integration/horseBreedingWorkflow.integration.test.mjs:168:29)

  ‚óè üêé INTEGRATION: Complete Horse Breeding Workflow ‚Ä∫ ü§± STEP 3: Breeding Process & Foal Birth ‚Ä∫ should create foal with inherited and epigenetic traits

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 199 |[39m           breedId[33m:[39m breed[33m.[39mid[33m,[39m
     [90m 200 |[39m           sex[33m:[39m [32m'Colt'[39m[33m,[39m
    [31m[1m>[22m[39m[90m 201 |[39m           sireId[33m:[39m stallion[33m.[39mid[33m,[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 202 |[39m           damId[33m:[39m mare[33m.[39mid[33m,[39m
     [90m 203 |[39m           healthStatus[33m:[39m [32m'Excellent'[39m[33m,[39m
     [90m 204 |[39m           ownerId[33m:[39m testUser[33m.[39mid[33m,[39m[0m

      at Object.<anonymous> (tests/integration/horseBreedingWorkflow.integration.test.mjs:201:28)

  ‚óè üêé INTEGRATION: Complete Horse Breeding Workflow ‚Ä∫ üë• STEP 4: Groom Assignment & Care ‚Ä∫ should assign specialized foal care groom to newborn

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 250 |[39m
     [90m 251 |[39m       [90m// Ensure foal has a groom assignment[39m
    [31m[1m>[22m[39m[90m 252 |[39m       [36mconst[39m assignmentResult [33m=[39m [36mawait[39m ensureDefaultGroomAssignment(foal[33m.[39mid[33m,[39m testUser[33m.[39mid)[33m;[39m
     [90m     |[39m                                                                        [31m[1m^[22m[39m
     [90m 253 |[39m
     [90m 254 |[39m       expect(assignmentResult[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 255 |[39m       expect(assignmentResult[33m.[39massignment [33m||[39m assignmentResult[33m.[39mnewAssignment)[33m.[39mtoBeDefined()[33m;[39m[0m

      at Object.<anonymous> (tests/integration/horseBreedingWorkflow.integration.test.mjs:252:72)

  ‚óè üêé INTEGRATION: Complete Horse Breeding Workflow ‚Ä∫ üë• STEP 4: Groom Assignment & Care ‚Ä∫ should record groom interaction with foal

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 272 |[39m
     [90m 273 |[39m       [36mconst[39m interactionData [33m=[39m {
    [31m[1m>[22m[39m[90m 274 |[39m         foalId[33m:[39m foal[33m.[39mid[33m,[39m
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 275 |[39m         groomId[33m:[39m assignedGroom[33m.[39mid[33m,[39m
     [90m 276 |[39m         interactionType[33m:[39m [32m'daily_care'[39m[33m,[39m
     [90m 277 |[39m         duration[33m:[39m [35m60[39m[33m,[39m [90m// 1 hour[39m[0m

      at Object.<anonymous> (tests/integration/horseBreedingWorkflow.integration.test.mjs:274:22)

  ‚óè üêé INTEGRATION: Complete Horse Breeding Workflow ‚Ä∫ üìà STEP 5: Foal Development Tracking ‚Ä∫ should track foal development progress

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 309 |[39m       [36mconst[39m { getFoalDevelopment } [33m=[39m [36mawait[39m [36mimport[39m([32m'../../models/foalModel.js'[39m)[33m;[39m
     [90m 310 |[39m
    [31m[1m>[22m[39m[90m 311 |[39m       [36mconst[39m developmentData [33m=[39m [36mawait[39m getFoalDevelopment(foal[33m.[39mid)[33m;[39m
     [90m     |[39m                                                             [31m[1m^[22m[39m
     [90m 312 |[39m
     [90m 313 |[39m       expect(developmentData)[33m.[39mtoBeDefined()[33m;[39m
     [90m 314 |[39m       expect(developmentData[33m.[39mfoal[33m.[39mid)[33m.[39mtoBe(foal[33m.[39mid)[33m;[39m[0m

      at Object.<anonymous> (tests/integration/horseBreedingWorkflow.integration.test.mjs:311:61)

  ‚óè üêé INTEGRATION: Complete Horse Breeding Workflow ‚Ä∫ üéØ STEP 6: End-to-End Workflow Validation ‚Ä∫ should validate complete breeding workflow integrity

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 329 |[39m       [90m// VERIFY: Complete family tree exists[39m
     [90m 330 |[39m       [36mconst[39m foalWithFamily [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mfindUnique({
    [31m[1m>[22m[39m[90m 331 |[39m         where[33m:[39m { id[33m:[39m foal[33m.[39mid }[33m,[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 332 |[39m         include[33m:[39m {
     [90m 333 |[39m           sire[33m:[39m [36mtrue[39m[33m,[39m
     [90m 334 |[39m           dam[33m:[39m [36mtrue[39m[33m,[39m[0m

      at Object.<anonymous> (tests/integration/horseBreedingWorkflow.integration.test.mjs:331:27)

  ‚óè üêé INTEGRATION: Complete Horse Breeding Workflow ‚Ä∫ üéØ STEP 6: End-to-End Workflow Validation ‚Ä∫ should validate business rules are enforced throughout workflow

    TypeError: Cannot read properties of undefined (reading 'age')

    [0m [90m 364 |[39m     it([32m'should validate business rules are enforced throughout workflow'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 365 |[39m       [90m// Age validation[39m
    [31m[1m>[22m[39m[90m 366 |[39m       expect(foal[33m.[39mage)[33m.[39mtoBe([35m0[39m)[33m;[39m [90m// Newborn[39m
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 367 |[39m       expect(mare[33m.[39mage)[33m.[39mtoBeGreaterThanOrEqual([35m3[39m)[33m;[39m [90m// Breeding age[39m
     [90m 368 |[39m       expect(stallion[33m.[39mage)[33m.[39mtoBeGreaterThanOrEqual([35m3[39m)[33m;[39m [90m// Breeding age[39m
     [90m 369 |[39m[0m

      at Object.<anonymous> (tests/integration/horseBreedingWorkflow.integration.test.mjs:366:19)

FAIL tests/integration/competitionWorkflow.integration.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:50:26] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:26] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:26] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:50:27] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:27] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:27] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:27] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:27] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:27] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:27] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:27] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:27] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:27] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:27] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:27] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: competition-integration@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=4cf58d799b5f88f93dd8c6dac350a693fa515b692d689cfe99e1311c5eb517a1

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:50:27] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:27] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:27] info: [GET] /api/competition/eligibility/10903/Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:27] warn: [auth] Invalid token for GET /eligibility/10903/Racing from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:27] info: [GET] /api/competition/eligibility/10903/Racing - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:27] info: [POST] /api/competition/enter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:27] warn: [auth] Invalid token for POST /enter from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:27] info: [POST] /api/competition/enter - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:27] info: [GET] /api/leaderboards/competition?metric=wins&limit=10

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:27] warn: [auth] Invalid token for GET /competition from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:27] info: [GET] /api/leaderboards/competition?metric=wins&limit=10 - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

  ‚óè üèÜ INTEGRATION: Complete Competition Workflow ‚Ä∫ üìù STEP 3: Competition Entry & Validation ‚Ä∫ should validate horse meets competition requirements using API

    expected 200 "OK", got 401 "Unauthorized"

    [0m [90m 179 |[39m         [33m.[39m[36mget[39m([32m`/api/competition/eligibility/${competitionHorse.id}/${testShow.discipline}`[39m)
     [90m 180 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)
    [31m[1m>[22m[39m[90m 181 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 182 |[39m
     [90m 183 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 184 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mhorseId)[33m.[39mtoBe(competitionHorse[33m.[39mid)[33m;[39m[0m

      at Object.<anonymous> (tests/integration/competitionWorkflow.integration.test.mjs:181:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè üèÜ INTEGRATION: Complete Competition Workflow ‚Ä∫ üìù STEP 3: Competition Entry & Validation ‚Ä∫ should successfully enter horse in competition using API endpoint

    expected 201 "Created", got 401 "Unauthorized"

    [0m [90m 218 |[39m           showId[33m:[39m testShow[33m.[39mid[33m,[39m
     [90m 219 |[39m         })
    [31m[1m>[22m[39m[90m 220 |[39m         [33m.[39mexpect([35m201[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 221 |[39m
     [90m 222 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 223 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoBe([32m'Horse successfully entered in competition'[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/integration/competitionWorkflow.integration.test.mjs:220:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè üèÜ INTEGRATION: Complete Competition Workflow ‚Ä∫ üèÅ STEP 4: Competition Execution & Scoring ‚Ä∫ should execute competition and calculate results

    expect(received).toBeTruthy()

    Received: null

    [0m [90m 270 |[39m       })[33m;[39m
     [90m 271 |[39m
    [31m[1m>[22m[39m[90m 272 |[39m       expect(existingResult)[33m.[39mtoBeTruthy()[33m;[39m [90m// Should exist from entry step[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 273 |[39m
     [90m 274 |[39m       [90m// Update with actual competition results[39m
     [90m 275 |[39m       competitionResult [33m=[39m [36mawait[39m prisma[33m.[39mcompetitionResult[33m.[39mupdate({[0m

      at Object.<anonymous> (tests/integration/competitionWorkflow.integration.test.mjs:272:30)

  ‚óè üèÜ INTEGRATION: Complete Competition Workflow ‚Ä∫ üí∞ STEP 5: Prize Distribution & XP Awards ‚Ä∫ should award prize money and XP for competition performance

    TypeError: Cannot read properties of undefined (reading 'prizeWon')

    [0m [90m 296 |[39m
     [90m 297 |[39m       [90m// Award prize money[39m
    [31m[1m>[22m[39m[90m 298 |[39m       [36mconst[39m prizeAmount [33m=[39m [33mNumber[39m(competitionResult[33m.[39mprizeWon)[33m;[39m
     [90m     |[39m                                                    [31m[1m^[22m[39m
     [90m 299 |[39m       [36mconst[39m updatedUser [33m=[39m [36mawait[39m prisma[33m.[39muser[33m.[39mupdate({
     [90m 300 |[39m         where[33m:[39m { id[33m:[39m testUser[33m.[39mid }[33m,[39m
     [90m 301 |[39m         data[33m:[39m {[0m

      at Object.<anonymous> (tests/integration/competitionWorkflow.integration.test.mjs:298:52)

  ‚óè üèÜ INTEGRATION: Complete Competition Workflow ‚Ä∫ üìä STEP 6: Leaderboard & Rankings ‚Ä∫ should update leaderboards with competition results using API

    expected 200 "OK", got 401 "Unauthorized"

    [0m [90m 350 |[39m         [33m.[39m[36mget[39m([32m'/api/leaderboards/competition?metric=wins&limit=10'[39m)
     [90m 351 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)
    [31m[1m>[22m[39m[90m 352 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 353 |[39m
     [90m 354 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 355 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mleaderboard)[33m.[39mtoBeInstanceOf([33mArray[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/integration/competitionWorkflow.integration.test.mjs:352:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè üèÜ INTEGRATION: Complete Competition Workflow ‚Ä∫ üìä STEP 6: Leaderboard & Rankings ‚Ä∫ should track historical performance

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 0
    Received array:  []

    [0m [90m 370 |[39m       })[33m;[39m
     [90m 371 |[39m
    [31m[1m>[22m[39m[90m 372 |[39m       expect(competitionHistory)[33m.[39mtoHaveLength([35m1[39m)[33m;[39m
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 373 |[39m       expect(competitionHistory[[35m0[39m][33m.[39mshow[33m.[39mname)[33m.[39mtoBe(testShow[33m.[39mname)[33m;[39m
     [90m 374 |[39m       expect([33mNumber[39m(competitionHistory[[35m0[39m][33m.[39mscore))[33m.[39mtoBe([33mNumber[39m(competitionResult[33m.[39mscore))[33m;[39m
     [90m 375 |[39m[0m

      at Object.<anonymous> (tests/integration/competitionWorkflow.integration.test.mjs:372:34)

  ‚óè üèÜ INTEGRATION: Complete Competition Workflow ‚Ä∫ üéØ STEP 7: Performance Impact on Horse Value ‚Ä∫ should increase horse value based on competition success

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 0
    Received array:  []

    [0m [90m 393 |[39m       })[33m;[39m
     [90m 394 |[39m
    [31m[1m>[22m[39m[90m 395 |[39m       expect(horseWithResults[33m.[39mcompetitionResults)[33m.[39mtoHaveLength([35m1[39m)[33m;[39m
     [90m     |[39m                                                   [31m[1m^[22m[39m
     [90m 396 |[39m
     [90m 397 |[39m       [90m// Calculate estimated value based on performance[39m
     [90m 398 |[39m       [36mconst[39m baseValue [33m=[39m [35m10000[39m[33m;[39m [90m// Base horse value[39m[0m

      at Object.<anonymous> (tests/integration/competitionWorkflow.integration.test.mjs:395:51)

  ‚óè üèÜ INTEGRATION: Complete Competition Workflow ‚Ä∫ üéä STEP 9: End-to-End Competition Workflow Validation ‚Ä∫ should validate complete competition workflow integrity

    expect(received).toBeGreaterThan(expected)

    Expected: > 100
    Received:   0

    [0m [90m 455 |[39m
     [90m 456 |[39m       [90m// User progression[39m
    [31m[1m>[22m[39m[90m 457 |[39m       expect(finalUser[33m.[39mxp)[33m.[39mtoBeGreaterThan([35m100[39m)[33m;[39m [90m// Started with 100, gained more[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 458 |[39m       expect(finalUser[33m.[39mmoney)[33m.[39mtoBeGreaterThan([35m15000[39m [33m-[39m testShow[33m.[39mentryFee)[33m;[39m [90m// Prize money added[39m
     [90m 459 |[39m
     [90m 460 |[39m       [90m// Horse competition record[39m[0m

      at Object.<anonymous> (tests/integration/competitionWorkflow.integration.test.mjs:457:28)

  ‚óè üèÜ INTEGRATION: Complete Competition Workflow ‚Ä∫ üéä STEP 9: End-to-End Competition Workflow Validation ‚Ä∫ should validate all business rules enforced throughout competition

    TypeError: Cannot read properties of undefined (reading 'prizeWon')

    [0m [90m 484 |[39m       [90m// Financial transactions accurate[39m
     [90m 485 |[39m       [36mconst[39m user [33m=[39m [36mawait[39m prisma[33m.[39muser[33m.[39mfindUnique({ where[33m:[39m { id[33m:[39m testUser[33m.[39mid } })[33m;[39m
    [31m[1m>[22m[39m[90m 486 |[39m       [36mconst[39m expectedMoney [33m=[39m [35m15000[39m [33m-[39m testShow[33m.[39mentryFee [33m+[39m [33mNumber[39m(competitionResult[33m.[39mprizeWon)[33m;[39m
     [90m     |[39m                                                                                  [31m[1m^[22m[39m
     [90m 487 |[39m       expect(user[33m.[39mmoney)[33m.[39mtoBe(expectedMoney)[33m;[39m
     [90m 488 |[39m
     [90m 489 |[39m       [90m// Competition results realistic[39m[0m

      at Object.<anonymous> (tests/integration/competitionWorkflow.integration.test.mjs:486:82)

FAIL tests/integration/auth-system-integration.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:50:28] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:28] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:28] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:50:29] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:29] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:29] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: authintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=0bedb727e0cdf7ba87b3e310672e10996632a6fdc24ddca2705d43c226ffcd5d

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:50:29] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:29] warn: [auth] Invalid token for GET /api/users/profile from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:29] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:29] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:29] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: authintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=cfb909341df9fea55a226e379b4c93f9c876a73a5512aea5a3ac4586451a39ef

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:50:29] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:29] warn: [auth] Missing token for GET /api/users/profile from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:29] warn: [auth] Missing token for GET /api/horses from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:29] warn: [auth] Missing token for GET /api/competition/my-entries from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:29] warn: [auth] Missing token for GET /api/training/status from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:29] warn: [auth] Missing token for GET /api/grooms/my-grooms from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:29] warn: [auth] Missing token for GET /api/traits/my-discoveries from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:29] warn: [auth] Missing token for GET /api/dashboard/overview from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:29] warn: [auth] Missing token for GET /api/health/protected from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:30] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:30] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:30] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: authintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=f0f1677f08482dbf0baca26d61d5abc9db66a8cec06ae59ddab68bd9450adc56

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:50:30] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:30] warn: [auth] Invalid token for GET /api/users/profile from ::ffff:127.0.0.1: invalid token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:30] warn: [auth] Invalid token for GET /api/horses from ::ffff:127.0.0.1: invalid token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:30] warn: [auth] Invalid token for GET /api/competition/my-entries from ::ffff:127.0.0.1: invalid token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:30] warn: [auth] Invalid token for GET /api/training/status from ::ffff:127.0.0.1: invalid token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:30] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:30] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:30] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: authintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=544dd35de70ccd20f880a20e321585465e3adb465be019b648a65bcfd9d0826e

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:50:30] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:31] warn: [Validation] Input validation failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:31] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:31] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:31] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: authintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=839d1859edf5eabace0ade5bb8bad7f1656d876c28fdc73037b879c3271dc09b

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:50:31] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:31] warn: [auth] Missing token for GET /api/users/profile from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:31] warn: [auth] Missing token for GET /api/horses from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:31] warn: [auth] Missing token for GET /api/competition/my-entries from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:32] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:32] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:32] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: authintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=fd360b3d54ab802f7ce4f6eb9aa8194cc93a64c7fa931d981dc41a237e1719fe

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:50:32] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:32] warn: [auth] Missing token for GET /api/users/profile from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:32] warn: [auth] Missing token for GET /api/users/profile from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:32] warn: [auth] Missing token for GET /api/users/profile from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:32] warn: [auth] Invalid token for GET /api/users/profile from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

  ‚óè üîê Authentication System Integration Tests ‚Ä∫ üåê Cross-System Authentication Validation ‚Ä∫ should authenticate successfully across all protected endpoints

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

    [0m [90m 174 |[39m           [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 175 |[39m
    [31m[1m>[22m[39m[90m 176 |[39m         expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 177 |[39m         expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 178 |[39m         expect(response[33m.[39mbody[33m.[39mdata[33m.[39muserId)[33m.[39mtoBe(testUser[33m.[39mid)[33m;[39m
     [90m 179 |[39m         expect(response[33m.[39mbody[33m.[39mdata[33m.[39msystem)[33m.[39mtoBeDefined()[33m;[39m[0m

      at Object.<anonymous> (tests/integration/auth-system-integration.test.mjs:176:33)

  ‚óè üîê Authentication System Integration Tests ‚Ä∫ üîÑ Token Refresh Integration ‚Ä∫ should refresh token and maintain access across systems

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 400

    [0m [90m 233 |[39m         [33m.[39msend({ refreshToken[33m:[39m refreshTokenValue })[33m;[39m
     [90m 234 |[39m
    [31m[1m>[22m[39m[90m 235 |[39m       expect(refreshResponse[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                                      [31m[1m^[22m[39m
     [90m 236 |[39m       expect(refreshResponse[33m.[39mbody[33m.[39mstatus)[33m.[39mtoBe([32m'success'[39m)[33m;[39m
     [90m 237 |[39m
     [90m 238 |[39m       [36mconst[39m newToken [33m=[39m refreshResponse[33m.[39mbody[33m.[39mdata[33m.[39mtoken[33m;[39m[0m

      at Object.<anonymous> (tests/integration/auth-system-integration.test.mjs:235:38)

PASS tests/integration/groomSalarySystem.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:50:32] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:32] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:32] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:50:33] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] info: [GET] /api/groom-salaries/cost

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] warn: [MemoryMonitoring] Memory threshold exceeded: 521MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] info: [auth] Authenticated user f20fdd9e-9700-4dfc-a4e1-0fec638f0607 for GET /cost

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] info: [groomSalaryController] Getting salary cost for user f20fdd9e-9700-4dfc-a4e1-0fec638f0607

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] info: [GET] /api/groom-salaries/cost - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] info: [GET] /api/groom-salaries/summary

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] warn: [MemoryMonitoring] Memory threshold exceeded: 524MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] info: [auth] Authenticated user f20fdd9e-9700-4dfc-a4e1-0fec638f0607 for GET /summary

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] info: [groomSalaryController] Getting salary summary for user f20fdd9e-9700-4dfc-a4e1-0fec638f0607

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] info: [GET] /api/groom-salaries/summary - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] info: [GET] /api/groom-salaries/groom/4551/salary

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] warn: [MemoryMonitoring] Memory threshold exceeded: 525MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] info: [auth] Authenticated user f20fdd9e-9700-4dfc-a4e1-0fec638f0607 for GET /groom/4551/salary

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] info: [groomSalaryController] Getting salary for groom 4551

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] info: [GET] /api/groom-salaries/groom/4551/salary - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] info: [GET] /api/groom-salaries/history

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] warn: [MemoryMonitoring] Memory threshold exceeded: 523MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] info: [auth] Authenticated user f20fdd9e-9700-4dfc-a4e1-0fec638f0607 for GET /history

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] info: [groomSalaryController] Getting salary history for user f20fdd9e-9700-4dfc-a4e1-0fec638f0607, limit: 50

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] info: [GET] /api/groom-salaries/history - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] info: [GET] /api/groom-salaries/status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] warn: [MemoryMonitoring] Memory threshold exceeded: 521MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] info: [auth] Authenticated user f20fdd9e-9700-4dfc-a4e1-0fec638f0607 for GET /status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] info: [groomSalaryController] Getting cron job status for user f20fdd9e-9700-4dfc-a4e1-0fec638f0607

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] info: [GET] /api/groom-salaries/status - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] info: [GET] /api/groom-salaries/groom/4552/salary

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] warn: [MemoryMonitoring] Memory threshold exceeded: 523MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] info: [auth] Authenticated user f20fdd9e-9700-4dfc-a4e1-0fec638f0607 for GET /groom/4552/salary

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] info: [groomSalaryController] Getting salary for groom 4552

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] info: [GET] /api/groom-salaries/groom/4552/salary - 403

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] info: [groomSalaryService] Starting weekly salary processing...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] info: [groomSalaryService] Paid $115 salary to groom Salary Test Groom for user salaryTestUser

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] info: [groomSalaryService] Processed $115 in salaries for user salaryTestUser

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] info: [groomSalaryService] Weekly salary processing complete. Processed: 1, Successful: 1, Failed: 0, Total: $115

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] info: [groomSalaryService] Starting weekly salary processing...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] warn: [groomSalaryService] Started grace period for user salaryTestUser - insufficient funds for groom salaries

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] info: [groomSalaryService] Weekly salary processing complete. Processed: 1, Successful: 0, Failed: 1, Total: $0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] info: [POST] /api/groom-salaries/process

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] warn: [MemoryMonitoring] Memory threshold exceeded: 518MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] info: [auth] Authenticated user f20fdd9e-9700-4dfc-a4e1-0fec638f0607 for POST /process

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] info: [groomSalaryController] Manual salary processing triggered by user f20fdd9e-9700-4dfc-a4e1-0fec638f0607

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] info: [cronJobService] Manually triggering salary processing...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] info: [groomSalaryService] Starting weekly salary processing...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] info: [groomSalaryService] Paid $115 salary to groom Salary Test Groom for user salaryTestUser

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] info: [groomSalaryService] Processed $115 in salaries for user salaryTestUser

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] info: [groomSalaryService] Weekly salary processing complete. Processed: 1, Successful: 1, Failed: 0, Total: $115

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] info: [cronJobService] Manual salary processing completed: {"processed":1,"successful":1,"failed":0,"terminated":0,"totalAmount":115,"errors":[]}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] info: [POST] /api/groom-salaries/process - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] info: [GET] /api/groom-salaries/cost

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] warn: [MemoryMonitoring] Memory threshold exceeded: 524MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] warn: [auth] Missing token for GET /cost from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] info: [GET] /api/groom-salaries/cost - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] info: [GET] /api/groom-salaries/summary

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] warn: [MemoryMonitoring] Memory threshold exceeded: 523MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] warn: [auth] Missing token for GET /summary from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] info: [GET] /api/groom-salaries/summary - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] info: [GET] /api/groom-salaries/history

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] warn: [MemoryMonitoring] Memory threshold exceeded: 522MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] warn: [auth] Missing token for GET /history from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] info: [GET] /api/groom-salaries/history - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] info: [GET] /api/groom-salaries/groom/4551/salary

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] warn: [MemoryMonitoring] Memory threshold exceeded: 521MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] warn: [auth] Missing token for GET /groom/4551/salary from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] info: [GET] /api/groom-salaries/groom/4551/salary - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] info: [GET] /api/groom-salaries/status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] warn: [MemoryMonitoring] Memory threshold exceeded: 520MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] warn: [auth] Missing token for GET /status from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] info: [GET] /api/groom-salaries/status - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] info: [POST] /api/groom-salaries/process

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] warn: [MemoryMonitoring] Memory threshold exceeded: 520MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] warn: [auth] Missing token for POST /process from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:33] info: [POST] /api/groom-salaries/process - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS __tests__/performance/apiResponseOptimization.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:50:34] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:34] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:34] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:50:34] error: [ResponseOptimization] Response size exceeds limit: 12715 bytes for GET /test/oversized

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

PASS tests/database.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:50:34] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:34] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:34] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

PASS tests/ultraRareTraits.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:50:35] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:35] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:35] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:50:35] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:35] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:35] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:35] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:35] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:35] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:35] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:35] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:35] info: [ultraRareTriggerEngine] Evaluating ultra-rare triggers for horse 10930

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:35] info: [ultraRareTriggerEngine] Ultra-rare trait triggered: Empathic Mirror for horse 10930

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:35] info: [ultraRareTriggerEngine] Evaluating exotic unlocks for horse 10930

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:35] error: [ultraRareTriggerEngine] Error evaluating Soulbonded conditions: Cannot read properties of undefined (reading 'map')

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:50:35] info: [groomRareTraitPerks] Assigning rare trait booster perks for groom 4553

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:35] info: [groomRareTraitPerks] Assigned perk: Phoenix Whisperer to groom 4553

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:35] info: [groomRareTraitPerks] Perk revealed: Phoenix Whisperer for groom 4553

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:35] info: [GET] /api/ultra-rare-traits/definitions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:35] warn: [MemoryMonitoring] Memory threshold exceeded: 582MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:35] info: [GET] /api/ultra-rare-traits/definitions - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:36] info: [POST] /api/ultra-rare-traits/evaluate/10930

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:36] warn: [MemoryMonitoring] Memory threshold exceeded: 583MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:36] info: [auth] Authenticated user test-ultra-rare-user for POST /evaluate/10930

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:36] info: [ultraRareTriggerEngine] Evaluating ultra-rare triggers for horse 10930

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:36] info: [ultraRareTriggerEngine] Ultra-rare trait triggered: Empathic Mirror for horse 10930

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:36] info: [ultraRareTriggerEngine] Evaluating exotic unlocks for horse 10930

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:36] error: [ultraRareTriggerEngine] Error evaluating Soulbonded conditions: Cannot read properties of undefined (reading 'map')

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:50:36] info: [POST] /api/ultra-rare-traits/evaluate/10930 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:36] info: [GET] /api/ultra-rare-traits/horse/10930

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:36] warn: [MemoryMonitoring] Memory threshold exceeded: 577MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:36] info: [auth] Authenticated user test-ultra-rare-user for GET /horse/10930

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:36] info: [GET] /api/ultra-rare-traits/horse/10930 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:36] info: [POST] /api/ultra-rare-traits/groom/4553/assign-perks

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:36] warn: [MemoryMonitoring] Memory threshold exceeded: 578MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:36] info: [auth] Authenticated user test-ultra-rare-user for POST /groom/4553/assign-perks

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:36] info: [groomRareTraitPerks] Assigning rare trait booster perks for groom 4553

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:36] info: [POST] /api/ultra-rare-traits/groom/4553/assign-perks - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:36] info: [GET] /api/ultra-rare-traits/horse/10930

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:36] warn: [MemoryMonitoring] Memory threshold exceeded: 578MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:36] warn: [auth] Missing token for GET /horse/10930 from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:36] info: [GET] /api/ultra-rare-traits/horse/10930 - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:36] info: [GET] /api/ultra-rare-traits/horse/10931

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:36] warn: [MemoryMonitoring] Memory threshold exceeded: 579MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:36] info: [auth] Authenticated user test-ultra-rare-user for GET /horse/10931

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:36] info: [GET] /api/ultra-rare-traits/horse/10931 - 403

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/controllers/dynamicCompatibilityController.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:50:36] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:36] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:36] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:50:37] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] info: [POST] /api/compatibility/calculate

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] warn: [MemoryMonitoring] Memory threshold exceeded: 615MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] info: [auth] Authenticated user test-user-uuid-123 for POST /calculate

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] info: [dynamicCompatibilityController.calculateCompatibility] Calculating compatibility for groom 4554 and horse 10932

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] info: [dynamicCompatibilityController.calculateCompatibility] Compatibility calculated: 1.381 (highly_recommended)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] info: [POST] /api/compatibility/calculate - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] info: [POST] /api/compatibility/calculate

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] warn: [MemoryMonitoring] Memory threshold exceeded: 620MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] info: [auth] Authenticated user test-user-uuid-123 for POST /calculate

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] info: [dynamicCompatibilityController.calculateCompatibility] Calculating compatibility for groom 4555 and horse 10932

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] info: [dynamicCompatibilityController.calculateCompatibility] Compatibility calculated: 0.340 (not_recommended)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] info: [POST] /api/compatibility/calculate - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] info: [POST] /api/compatibility/calculate

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] warn: [MemoryMonitoring] Memory threshold exceeded: 621MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] info: [auth] Authenticated user test-user-uuid-123 for POST /calculate

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] warn: [Validation] Input validation failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] info: [POST] /api/compatibility/calculate - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] info: [POST] /api/compatibility/calculate

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] warn: [MemoryMonitoring] Memory threshold exceeded: 619MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] warn: [auth] Missing token for POST /calculate from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] info: [POST] /api/compatibility/calculate - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] info: [GET] /api/compatibility/factors/4554/10932

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] warn: [MemoryMonitoring] Memory threshold exceeded: 618MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] info: [auth] Authenticated user test-user-uuid-123 for GET /factors/4554/10932

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] info: [dynamicCompatibilityController.getCompatibilityFactors] Analyzing factors for groom 4554 and horse 10932

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] info: [dynamicCompatibilityController.getCompatibilityFactors] Factors analyzed: excellent compatibility

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] info: [GET] /api/compatibility/factors/4554/10932 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] info: [GET] /api/compatibility/factors/invalid/10932

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] warn: [MemoryMonitoring] Memory threshold exceeded: 621MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] info: [auth] Authenticated user test-user-uuid-123 for GET /factors/invalid/10932

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] warn: [Validation] Input validation failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] info: [GET] /api/compatibility/factors/invalid/10932 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] info: [POST] /api/compatibility/predict

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] warn: [MemoryMonitoring] Memory threshold exceeded: 619MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] info: [auth] Authenticated user test-user-uuid-123 for POST /predict

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] info: [dynamicCompatibilityController.predictOutcome] Predicting outcome for groom 4554 and horse 10932

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] info: [dynamicCompatibilityController.predictOutcome] Outcome predicted: excellent quality, 0.95 success probability

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] info: [POST] /api/compatibility/predict - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] info: [POST] /api/compatibility/predict

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] warn: [MemoryMonitoring] Memory threshold exceeded: 622MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] info: [auth] Authenticated user test-user-uuid-123 for POST /predict

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] info: [dynamicCompatibilityController.predictOutcome] Predicting outcome for groom 4555 and horse 10932

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] info: [dynamicCompatibilityController.predictOutcome] Outcome predicted: fair quality, 0.52 success probability

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] info: [POST] /api/compatibility/predict - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] info: [POST] /api/compatibility/recommendations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] warn: [MemoryMonitoring] Memory threshold exceeded: 624MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] info: [auth] Authenticated user test-user-uuid-123 for POST /recommendations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] info: [dynamicCompatibilityController.getRecommendations] Getting recommendations for horse 10932

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] info: [dynamicCompatibilityController.getRecommendations] Found 3 groom recommendations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] info: [POST] /api/compatibility/recommendations - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] info: [GET] /api/compatibility/trends/4554/10932

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] warn: [MemoryMonitoring] Memory threshold exceeded: 615MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] info: [auth] Authenticated user test-user-uuid-123 for GET /trends/4554/10932

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] info: [dynamicCompatibilityController.getCompatibilityTrends] Analyzing trends for groom 4554 and horse 10932

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] info: [dynamicCompatibilityController.getCompatibilityTrends] Trends analyzed: insufficient_data trend with 0 data points

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] info: [GET] /api/compatibility/trends/4554/10932 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] info: [GET] /api/compatibility/config

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] warn: [MemoryMonitoring] Memory threshold exceeded: 615MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] info: [auth] Authenticated user test-user-uuid-123 for GET /config

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] info: [dynamicCompatibilityController.getCompatibilityConfig] Getting compatibility system configuration

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:37] info: [GET] /api/compatibility/config - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/integration/competitionAPIEndpoints.integration.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:50:38] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:38] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:38] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:50:38] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:38] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:38] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:38] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:38] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:38] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:38] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:38] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:38] info: [GET] /api/competition/disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:38] warn: [MemoryMonitoring] Memory threshold exceeded: 655MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:38] info: [GET] /api/competition/disciplines - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:38] info: [GET] /api/competition/eligibility/10935/Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:38] warn: [MemoryMonitoring] Memory threshold exceeded: 655MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:38] info: [auth] Authenticated user cba78f5e-764a-4390-a907-57333251c7a8 for GET /eligibility/10935/Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:38] info: [competitionRoutes.GET /eligibility] Checking eligibility for horse 10935 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:38] info: [horseModel.getHorseById] Successfully found horse: API Test Horse (ID: 10935)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:38] info: [competitionRoutes.GET /eligibility] Horse 10935 eligibility checked for Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:38] info: [GET] /api/competition/eligibility/10935/Racing - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:38] info: [GET] /api/competition/eligibility/10935/Gaited

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:38] warn: [MemoryMonitoring] Memory threshold exceeded: 658MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:38] info: [auth] Authenticated user cba78f5e-764a-4390-a907-57333251c7a8 for GET /eligibility/10935/Gaited

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:38] info: [competitionRoutes.GET /eligibility] Checking eligibility for horse 10935 in Gaited

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:38] info: [horseModel.getHorseById] Successfully found horse: API Test Horse (ID: 10935)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:38] info: [competitionRoutes.GET /eligibility] Horse 10935 eligibility checked for Gaited

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:38] info: [GET] /api/competition/eligibility/10935/Gaited - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:38] info: [GET] /api/competition/eligibility/10935/InvalidDiscipline

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:38] warn: [MemoryMonitoring] Memory threshold exceeded: 658MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:38] info: [auth] Authenticated user cba78f5e-764a-4390-a907-57333251c7a8 for GET /eligibility/10935/InvalidDiscipline

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:38] info: [competitionRoutes.GET /eligibility] Checking eligibility for horse 10935 in InvalidDiscipline

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:38] info: [horseModel.getHorseById] Successfully found horse: API Test Horse (ID: 10935)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:38] info: [GET] /api/competition/eligibility/10935/InvalidDiscipline - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:38] info: [GET] /api/competition/eligibility/10935/Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:38] warn: [MemoryMonitoring] Memory threshold exceeded: 657MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:38] warn: [auth] Missing token for GET /eligibility/10935/Racing from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:38] info: [GET] /api/competition/eligibility/10935/Racing - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] info: [GET] /api/competition/eligibility/10936/Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] warn: [MemoryMonitoring] Memory threshold exceeded: 657MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] info: [auth] Authenticated user cba78f5e-764a-4390-a907-57333251c7a8 for GET /eligibility/10936/Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] info: [competitionRoutes.GET /eligibility] Checking eligibility for horse 10936 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] info: [horseModel.getHorseById] Successfully found horse: Other Horse (ID: 10936)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] info: [GET] /api/competition/eligibility/10936/Racing - 403

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] info: [POST] /api/competition/enter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] warn: [MemoryMonitoring] Memory threshold exceeded: 659MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] info: [auth] Authenticated user cba78f5e-764a-4390-a907-57333251c7a8 for POST /enter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] info: [competitionRoutes.POST /enter] User cba78f5e-764a-4390-a907-57333251c7a8 entering horse 10935 in show 527

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] info: [horseModel.getHorseById] Successfully found horse: API Test Horse (ID: 10935)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] info: [competitionRoutes.POST /enter] Successfully entered horse 10935 in show 527

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] info: [POST] /api/competition/enter - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] info: [POST] /api/competition/enter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] warn: [MemoryMonitoring] Memory threshold exceeded: 661MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] info: [auth] Authenticated user cba78f5e-764a-4390-a907-57333251c7a8 for POST /enter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] info: [competitionRoutes.POST /enter] User cba78f5e-764a-4390-a907-57333251c7a8 entering horse 10935 in show 527

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] info: [horseModel.getHorseById] Successfully found horse: API Test Horse (ID: 10935)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] info: [POST] /api/competition/enter - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] info: [POST] /api/competition/enter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] warn: [MemoryMonitoring] Memory threshold exceeded: 662MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] info: [auth] Authenticated user cba78f5e-764a-4390-a907-57333251c7a8 for POST /enter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] warn: [competitionRoutes.POST /enter] Validation errors: [{"type":"field","value":"invalid","msg":"Horse ID must be a positive integer","path":"horseId","location":"body"}]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] info: [POST] /api/competition/enter - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] info: [POST] /api/competition/enter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] warn: [MemoryMonitoring] Memory threshold exceeded: 660MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] warn: [auth] Missing token for POST /enter from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] info: [POST] /api/competition/enter - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] info: [POST] /api/competition/execute

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] warn: [MemoryMonitoring] Memory threshold exceeded: 659MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] info: [auth] Authenticated user cba78f5e-764a-4390-a907-57333251c7a8 for POST /execute

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] info: [competitionRoutes.POST /execute] User cba78f5e-764a-4390-a907-57333251c7a8 executing competition for show 527

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] info: [competitionRoutes.POST /execute] Executing competition with 1 entries

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] info: [enhancedCompetitionSimulation] Executing competition: API Test Racing Show_1763765438819_81642_52116 (Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] info: [calculateCompetitionScore] Horse API Test Horse: Base score for Racing: 205

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:39] info: [calculateCompetitionScore] Horse API Test Horse: Luck modifier: 3.6%, adjustment: 7.4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:39] info: [calculateCompetitionScore] Horse API Test Horse: Final score: 212 (base: 205, trait: +0, luck: 7.4)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:39] info: [enhancedCompetitionSimulation] Horse API Test Horse (ID: 10935) scored 212 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:50:39] info: [resultModel.saveResult] Successfully updated placeholder result for horse 10935 in show 527 with score 212

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] info: [horseXpModel.addXpToHorse] Added 30 XP to horse API Test Horse (ID: 10935). New XP: 30, Stat points gained: 0, Available: 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] info: [enhancedCompetitionSimulation] Awarded 30 Horse XP to API Test Horse for 1st place

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] info: [enhancedCompetitionSimulation] Competition completed. 1 entries processed.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] info: [competitionRoutes.POST /execute] Competition executed successfully for show 527

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] info: [POST] /api/competition/execute - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] info: [POST] /api/competition/execute

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] warn: [MemoryMonitoring] Memory threshold exceeded: 657MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] info: [auth] Authenticated user 571f77c5-2533-44fc-a249-373c8dfe4292 for POST /execute

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] info: [competitionRoutes.POST /execute] User 571f77c5-2533-44fc-a249-373c8dfe4292 executing competition for show 527

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] info: [POST] /api/competition/execute - 403

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] info: [POST] /api/competition/execute

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] warn: [MemoryMonitoring] Memory threshold exceeded: 656MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] info: [auth] Authenticated user cba78f5e-764a-4390-a907-57333251c7a8 for POST /execute

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] info: [competitionRoutes.POST /execute] User cba78f5e-764a-4390-a907-57333251c7a8 executing competition for show 99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] info: [POST] /api/competition/execute - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] info: [GET] /api/leaderboards/competition?metric=wins&limit=10

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] warn: [MemoryMonitoring] Memory threshold exceeded: 656MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] info: [auth] Authenticated user cba78f5e-764a-4390-a907-57333251c7a8 for GET /competition

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] info: [leaderboardRoutes.GET /competition] Getting competition leaderboard: discipline=undefined, period=all, metric=wins

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] info: [leaderboardRoutes.GET /competition] Retrieved 0 leaderboard entries

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] info: [GET] /api/leaderboards/competition?metric=wins&limit=10 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] info: [GET] /api/leaderboards/competition?metric=earnings&discipline=Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] warn: [MemoryMonitoring] Memory threshold exceeded: 656MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] info: [auth] Authenticated user cba78f5e-764a-4390-a907-57333251c7a8 for GET /competition

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] info: [leaderboardRoutes.GET /competition] Getting competition leaderboard: discipline=Racing, period=all, metric=earnings

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] info: [leaderboardRoutes.GET /competition] Retrieved 1 leaderboard entries

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] info: [GET] /api/leaderboards/competition?metric=earnings&discipline=Racing - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] info: [GET] /api/leaderboards/competition?metric=invalid

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] warn: [MemoryMonitoring] Memory threshold exceeded: 656MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] info: [auth] Authenticated user cba78f5e-764a-4390-a907-57333251c7a8 for GET /competition

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] warn: [leaderboardRoutes.GET /competition] Validation errors: [{"type":"field","value":"invalid","msg":"Metric must be one of: wins, earnings, placements, average_placement","path":"metric","location":"query"}]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] info: [GET] /api/leaderboards/competition?metric=invalid - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] info: [GET] /api/leaderboards/competition

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] warn: [MemoryMonitoring] Memory threshold exceeded: 656MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] warn: [auth] Missing token for GET /competition from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] info: [GET] /api/leaderboards/competition - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/integration/groomMarketplaceAPI.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:50:39] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:39] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:50:40] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:40] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:40] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:40] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:40] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:40] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:40] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:40] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:40] info: [GET] /api/groom-marketplace

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:40] warn: [MemoryMonitoring] Memory threshold exceeded: 695MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:40] warn: [auth] Missing token for GET / from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:40] info: [GET] /api/groom-marketplace - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:40] info: [POST] /api/groom-marketplace/refresh

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:40] warn: [MemoryMonitoring] Memory threshold exceeded: 695MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:40] warn: [auth] Missing token for POST /refresh from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:40] info: [POST] /api/groom-marketplace/refresh - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:40] info: [POST] /api/groom-marketplace/hire

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:40] warn: [MemoryMonitoring] Memory threshold exceeded: 694MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:40] warn: [auth] Missing token for POST /hire from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:40] info: [POST] /api/groom-marketplace/hire - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:40] info: [GET] /api/groom-marketplace/stats

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:40] warn: [MemoryMonitoring] Memory threshold exceeded: 692MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:40] warn: [auth] Missing token for GET /stats from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:40] info: [GET] /api/groom-marketplace/stats - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:40] info: [GET] /api/groom-marketplace

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:40] warn: [MemoryMonitoring] Memory threshold exceeded: 692MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:40] info: [auth] Authenticated user 5a5efd0a-f82c-410d-bedd-b13a20c40baa for GET /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:40] info: [groomMarketplace] Getting marketplace for user 5a5efd0a-f82c-410d-bedd-b13a20c40baa

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:40] info: [groomMarketplace] Generated new marketplace for user 5a5efd0a-f82c-410d-bedd-b13a20c40baa with 12 grooms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:40] info: [GET] /api/groom-marketplace - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:40] info: [GET] /api/groom-marketplace

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:40] warn: [MemoryMonitoring] Memory threshold exceeded: 700MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:40] info: [auth] Authenticated user 5a5efd0a-f82c-410d-bedd-b13a20c40baa for GET /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:40] info: [groomMarketplace] Getting marketplace for user 5a5efd0a-f82c-410d-bedd-b13a20c40baa

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:40] info: [GET] /api/groom-marketplace - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:40] info: [GET] /api/groom-marketplace

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:40] warn: [MemoryMonitoring] Memory threshold exceeded: 701MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:40] info: [auth] Authenticated user 5a5efd0a-f82c-410d-bedd-b13a20c40baa for GET /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:40] info: [groomMarketplace] Getting marketplace for user 5a5efd0a-f82c-410d-bedd-b13a20c40baa

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:40] info: [GET] /api/groom-marketplace - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:40] info: [GET] /api/groom-marketplace

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:40] warn: [MemoryMonitoring] Memory threshold exceeded: 703MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:40] info: [auth] Authenticated user 5a5efd0a-f82c-410d-bedd-b13a20c40baa for GET /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:40] info: [groomMarketplace] Getting marketplace for user 5a5efd0a-f82c-410d-bedd-b13a20c40baa

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:40] info: [GET] /api/groom-marketplace - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [POST] /api/groom-marketplace/refresh

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] warn: [MemoryMonitoring] Memory threshold exceeded: 694MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [auth] Authenticated user 5a5efd0a-f82c-410d-bedd-b13a20c40baa for POST /refresh

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [groomMarketplace] Refreshing marketplace for user 5a5efd0a-f82c-410d-bedd-b13a20c40baa, force: false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [groomMarketplace] Refreshed marketplace for user 5a5efd0a-f82c-410d-bedd-b13a20c40baa with 12 new grooms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [POST] /api/groom-marketplace/refresh - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [POST] /api/groom-marketplace/refresh

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] warn: [MemoryMonitoring] Memory threshold exceeded: 704MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [auth] Authenticated user 5a5efd0a-f82c-410d-bedd-b13a20c40baa for POST /refresh

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [groomMarketplace] Refreshing marketplace for user 5a5efd0a-f82c-410d-bedd-b13a20c40baa, force: false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [POST] /api/groom-marketplace/refresh - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [POST] /api/groom-marketplace/refresh

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] warn: [MemoryMonitoring] Memory threshold exceeded: 706MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [auth] Authenticated user 5a5efd0a-f82c-410d-bedd-b13a20c40baa for POST /refresh

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [groomMarketplace] Refreshing marketplace for user 5a5efd0a-f82c-410d-bedd-b13a20c40baa, force: false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [POST] /api/groom-marketplace/refresh - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [GET] /api/groom-marketplace

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] warn: [MemoryMonitoring] Memory threshold exceeded: 695MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [auth] Authenticated user 5a5efd0a-f82c-410d-bedd-b13a20c40baa for GET /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [groomMarketplace] Getting marketplace for user 5a5efd0a-f82c-410d-bedd-b13a20c40baa

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [GET] /api/groom-marketplace - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [POST] /api/groom-marketplace/refresh

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] warn: [MemoryMonitoring] Memory threshold exceeded: 697MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [auth] Authenticated user 5a5efd0a-f82c-410d-bedd-b13a20c40baa for POST /refresh

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [groomMarketplace] Refreshing marketplace for user 5a5efd0a-f82c-410d-bedd-b13a20c40baa, force: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [groomMarketplace] Charged user 5a5efd0a-f82c-410d-bedd-b13a20c40baa $100 for premium refresh

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [groomMarketplace] Refreshed marketplace for user 5a5efd0a-f82c-410d-bedd-b13a20c40baa with 12 new grooms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [POST] /api/groom-marketplace/refresh - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [GET] /api/groom-marketplace

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] warn: [MemoryMonitoring] Memory threshold exceeded: 701MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [auth] Authenticated user 5a5efd0a-f82c-410d-bedd-b13a20c40baa for GET /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [groomMarketplace] Getting marketplace for user 5a5efd0a-f82c-410d-bedd-b13a20c40baa

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [GET] /api/groom-marketplace - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [POST] /api/groom-marketplace/hire

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] warn: [MemoryMonitoring] Memory threshold exceeded: 702MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [auth] Authenticated user 5a5efd0a-f82c-410d-bedd-b13a20c40baa for POST /hire

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [groomMarketplace] User 5a5efd0a-f82c-410d-bedd-b13a20c40baa attempting to hire groom mkt_4234d906-6256-49f2-9df6-a129e8eda5b2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [groomMarketplace] User 5a5efd0a-f82c-410d-bedd-b13a20c40baa hired groom 4557 for $336

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [POST] /api/groom-marketplace/hire - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [GET] /api/groom-marketplace

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] warn: [MemoryMonitoring] Memory threshold exceeded: 703MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [auth] Authenticated user 5a5efd0a-f82c-410d-bedd-b13a20c40baa for GET /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [groomMarketplace] Getting marketplace for user 5a5efd0a-f82c-410d-bedd-b13a20c40baa

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [GET] /api/groom-marketplace - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [GET] /api/groom-marketplace

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] warn: [MemoryMonitoring] Memory threshold exceeded: 705MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [auth] Authenticated user 5a5efd0a-f82c-410d-bedd-b13a20c40baa for GET /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [groomMarketplace] Getting marketplace for user 5a5efd0a-f82c-410d-bedd-b13a20c40baa

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [GET] /api/groom-marketplace - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [POST] /api/groom-marketplace/hire

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] warn: [MemoryMonitoring] Memory threshold exceeded: 706MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [auth] Authenticated user 5a5efd0a-f82c-410d-bedd-b13a20c40baa for POST /hire

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [groomMarketplace] User 5a5efd0a-f82c-410d-bedd-b13a20c40baa attempting to hire groom mkt_8807b645-795b-4fa0-90ec-a1742b2b6e23

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [groomMarketplace] User 5a5efd0a-f82c-410d-bedd-b13a20c40baa hired groom 4558 for $210

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [POST] /api/groom-marketplace/hire - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [GET] /api/groom-marketplace

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] warn: [MemoryMonitoring] Memory threshold exceeded: 706MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [auth] Authenticated user 5a5efd0a-f82c-410d-bedd-b13a20c40baa for GET /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [groomMarketplace] Getting marketplace for user 5a5efd0a-f82c-410d-bedd-b13a20c40baa

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [GET] /api/groom-marketplace - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [GET] /api/groom-marketplace

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] warn: [MemoryMonitoring] Memory threshold exceeded: 707MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [auth] Authenticated user 5a5efd0a-f82c-410d-bedd-b13a20c40baa for GET /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [groomMarketplace] Getting marketplace for user 5a5efd0a-f82c-410d-bedd-b13a20c40baa

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [GET] /api/groom-marketplace - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [GET] /api/groom-marketplace

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] warn: [MemoryMonitoring] Memory threshold exceeded: 709MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [auth] Authenticated user 59b3f80d-918f-418b-a5ef-e244101497df for GET /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [groomMarketplace] Getting marketplace for user 59b3f80d-918f-418b-a5ef-e244101497df

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [groomMarketplace] Generated new marketplace for user 59b3f80d-918f-418b-a5ef-e244101497df with 12 grooms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [GET] /api/groom-marketplace - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [POST] /api/groom-marketplace/hire

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] warn: [MemoryMonitoring] Memory threshold exceeded: 699MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [auth] Authenticated user 59b3f80d-918f-418b-a5ef-e244101497df for POST /hire

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [groomMarketplace] User 59b3f80d-918f-418b-a5ef-e244101497df attempting to hire groom mkt_81330b44-91fb-48c5-8c91-774dc3299a14

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [POST] /api/groom-marketplace/hire - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [GET] /api/groom-marketplace

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] warn: [MemoryMonitoring] Memory threshold exceeded: 700MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [auth] Authenticated user 5a5efd0a-f82c-410d-bedd-b13a20c40baa for GET /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [groomMarketplace] Getting marketplace for user 5a5efd0a-f82c-410d-bedd-b13a20c40baa

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [GET] /api/groom-marketplace - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [POST] /api/groom-marketplace/hire

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] warn: [MemoryMonitoring] Memory threshold exceeded: 703MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [auth] Authenticated user 5a5efd0a-f82c-410d-bedd-b13a20c40baa for POST /hire

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [groomMarketplace] User 5a5efd0a-f82c-410d-bedd-b13a20c40baa attempting to hire groom non-existent-id

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [POST] /api/groom-marketplace/hire - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [GET] /api/groom-marketplace

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] warn: [MemoryMonitoring] Memory threshold exceeded: 705MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [auth] Authenticated user 5a5efd0a-f82c-410d-bedd-b13a20c40baa for GET /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [groomMarketplace] Getting marketplace for user 5a5efd0a-f82c-410d-bedd-b13a20c40baa

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [groomMarketplace] Generated new marketplace for user 5a5efd0a-f82c-410d-bedd-b13a20c40baa with 12 grooms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [GET] /api/groom-marketplace - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [POST] /api/groom-marketplace/hire

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] warn: [MemoryMonitoring] Memory threshold exceeded: 709MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [auth] Authenticated user 5a5efd0a-f82c-410d-bedd-b13a20c40baa for POST /hire

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [POST] /api/groom-marketplace/hire - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [GET] /api/groom-marketplace

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] warn: [MemoryMonitoring] Memory threshold exceeded: 708MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [auth] Authenticated user 5a5efd0a-f82c-410d-bedd-b13a20c40baa for GET /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [groomMarketplace] Getting marketplace for user 5a5efd0a-f82c-410d-bedd-b13a20c40baa

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [GET] /api/groom-marketplace - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [GET] /api/groom-marketplace/stats

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] warn: [MemoryMonitoring] Memory threshold exceeded: 709MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [auth] Authenticated user 5a5efd0a-f82c-410d-bedd-b13a20c40baa for GET /stats

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [GET] /api/groom-marketplace/stats - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [GET] /api/groom-marketplace/stats

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] warn: [MemoryMonitoring] Memory threshold exceeded: 709MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [auth] Authenticated user e18fb3ae-4db6-4089-aab5-9b235bda9bae for GET /stats

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [groomMarketplace.getStats] Returning empty stats: {"totalGrooms":0,"lastRefresh":"never","refreshCount":0,"qualityDistribution":{},"specialtyDistribution":{}}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:41] info: [GET] /api/groom-marketplace/stats - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/integration/groomHandlerSystem.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:50:42] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:42] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:42] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:50:42] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:42] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:42] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:42] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:42] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:42] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:42] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:42] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:42] info: [GET] /api/groom-handlers/horse/10937

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:42] warn: [MemoryMonitoring] Memory threshold exceeded: 741MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:42] info: [auth] Authenticated user 2b541bf8-8232-4e8e-b57f-bb1d2b4a4c08 for GET /horse/10937

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:42] info: [groomHandlerController] Getting handler for horse 10937

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:42] info: [GET] /api/groom-handlers/horse/10937 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:42] info: [GET] /api/groom-handlers/horse/10938

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:42] warn: [MemoryMonitoring] Memory threshold exceeded: 744MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:42] info: [auth] Authenticated user 2b541bf8-8232-4e8e-b57f-bb1d2b4a4c08 for GET /horse/10938

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:42] info: [groomHandlerController] Getting handler for horse 10938

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:42] info: [GET] /api/groom-handlers/horse/10938 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:42] info: [GET] /api/groom-handlers/horse/10939

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:42] warn: [MemoryMonitoring] Memory threshold exceeded: 744MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:42] info: [auth] Authenticated user 2b541bf8-8232-4e8e-b57f-bb1d2b4a4c08 for GET /horse/10939

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:42] info: [groomHandlerController] Getting handler for horse 10939

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:42] info: [GET] /api/groom-handlers/horse/10939 - 403

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:42] info: [GET] /api/groom-handlers/eligibility/10937/Mares

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:42] warn: [MemoryMonitoring] Memory threshold exceeded: 743MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:42] info: [auth] Authenticated user 2b541bf8-8232-4e8e-b57f-bb1d2b4a4c08 for GET /eligibility/10937/Mares

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:42] info: [groomHandlerController] Checking handler eligibility for horse 10937 in conformation class Mares

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:42] info: [groomHandlerService] Conformation show detected: Mares

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:42] info: [GET] /api/groom-handlers/eligibility/10937/Mares - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:42] info: [GET] /api/groom-handlers/eligibility/10937/InvalidClass

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:42] warn: [MemoryMonitoring] Memory threshold exceeded: 743MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:42] info: [auth] Authenticated user 2b541bf8-8232-4e8e-b57f-bb1d2b4a4c08 for GET /eligibility/10937/InvalidClass

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:42] info: [groomHandlerController] Checking handler eligibility for horse 10937 in conformation class InvalidClass

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:42] info: [GET] /api/groom-handlers/eligibility/10937/InvalidClass - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:42] info: [GET] /api/groom-handlers/config

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:42] warn: [MemoryMonitoring] Memory threshold exceeded: 742MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:42] info: [auth] Authenticated user 2b541bf8-8232-4e8e-b57f-bb1d2b4a4c08 for GET /config

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:42] info: [groomHandlerController] Getting handler configuration

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:42] info: [GET] /api/groom-handlers/config - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:42] info: [GET] /api/groom-handlers/recommendations/10937?className=Mares

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:43] warn: [MemoryMonitoring] Memory threshold exceeded: 744MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:43] info: [auth] Authenticated user 2b541bf8-8232-4e8e-b57f-bb1d2b4a4c08 for GET /recommendations/10937

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:43] info: [groomHandlerController] Getting handler recommendations for horse 10937

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:43] info: [groomHandlerService] Conformation show detected: Mares

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:43] info: [groomHandlerService] Conformation show detected: Mares

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:43] info: [groomHandlerService] Conformation show detected: Mares

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:43] info: [GET] /api/groom-handlers/recommendations/10937?className=Mares - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:43] info: [GET] /api/groom-handlers/horse/10937

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:43] warn: [MemoryMonitoring] Memory threshold exceeded: 734MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:43] warn: [auth] Missing token for GET /horse/10937 from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:43] info: [GET] /api/groom-handlers/horse/10937 - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:43] info: [GET] /api/groom-handlers/eligibility/10937/Mares

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:43] warn: [MemoryMonitoring] Memory threshold exceeded: 735MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:43] warn: [auth] Missing token for GET /eligibility/10937/Mares from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:43] info: [GET] /api/groom-handlers/eligibility/10937/Mares - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:43] info: [GET] /api/groom-handlers/config

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:43] warn: [MemoryMonitoring] Memory threshold exceeded: 735MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:43] warn: [auth] Missing token for GET /config from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:43] info: [GET] /api/groom-handlers/config - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:43] info: [GET] /api/groom-handlers/recommendations/10937

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:43] warn: [MemoryMonitoring] Memory threshold exceeded: 735MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:43] warn: [auth] Missing token for GET /recommendations/10937 from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:43] info: [GET] /api/groom-handlers/recommendations/10937 - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

FAIL tests/training-complete.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:50:43] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:43] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:43] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:50:44] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:44] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:44] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: training-test@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=47af7bd2dada8633c79de7fae1242a37521acd2a3e58dec4db11a3af206b8690

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:50:44] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Created test user 7df01623-6059-4bef-a27c-42adc6d7306f with 3 horses

      at Object.<anonymous> (tests/training-complete.test.mjs:220:13)

    console.log
      [2025-11-21 17:50:44] warn: [auth] Invalid token for GET /api/horses/trainable/7df01623-6059-4bef-a27c-42adc6d7306f from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:44] warn: [auth] Invalid token for GET /api/horses/trainable/7df01623-6059-4bef-a27c-42adc6d7306f from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:44] warn: [auth] Invalid token for POST /api/training/train from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:44] warn: [auth] Missing token for GET /api/horses/trainable/7df01623-6059-4bef-a27c-42adc6d7306f from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

  ‚óè üèãÔ∏è INTEGRATION: Training System Complete - End-to-End Workflow ‚Ä∫ Authentication and Setup ‚Ä∫ should have created test user and horses

    expect(received).toBeDefined()

    Received: undefined

    [0m [90m 246 |[39m       expect(testUser)[33m.[39mtoBeDefined()[33m;[39m
     [90m 247 |[39m       expect(testUser[33m.[39mid)[33m.[39mtoBeDefined()[33m;[39m
    [31m[1m>[22m[39m[90m 248 |[39m       expect(authToken)[33m.[39mtoBeDefined()[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 249 |[39m       expect(testHorses)[33m.[39mtoHaveLength([35m3[39m)[33m;[39m
     [90m 250 |[39m     })[33m;[39m
     [90m 251 |[39m   })[33m;[39m[0m

      at Object.<anonymous> (tests/training-complete.test.mjs:248:25)

  ‚óè üèãÔ∏è INTEGRATION: Training System Complete - End-to-End Workflow ‚Ä∫ Trainable Horses ‚Ä∫ should get trainable horses for authenticated user

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

    [0m [90m 257 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 258 |[39m
    [31m[1m>[22m[39m[90m 259 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 260 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 261 |[39m       expect([33mArray[39m[33m.[39misArray(response[33m.[39mbody[33m.[39mdata))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 262 |[39m[0m

      at Object.<anonymous> (tests/training-complete.test.mjs:259:31)

  ‚óè üèãÔ∏è INTEGRATION: Training System Complete - End-to-End Workflow ‚Ä∫ Training Functionality ‚Ä∫ should successfully train an adult horse

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

    [0m [90m 281 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 282 |[39m
    [31m[1m>[22m[39m[90m 283 |[39m       expect(trainableResponse[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                                        [31m[1m^[22m[39m
     [90m 284 |[39m       expect(trainableResponse[33m.[39mbody[33m.[39mdata[33m.[39mlength)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m 285 |[39m
     [90m 286 |[39m       [36mconst[39m [trainableHorse] [33m=[39m trainableResponse[33m.[39mbody[33m.[39mdata[33m;[39m[0m

      at Object.<anonymous> (tests/training-complete.test.mjs:283:40)

  ‚óè üèãÔ∏è INTEGRATION: Training System Complete - End-to-End Workflow ‚Ä∫ Training Functionality ‚Ä∫ should reject training for young horse

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 401

    [0m [90m 310 |[39m       })[33m;[39m
     [90m 311 |[39m
    [31m[1m>[22m[39m[90m 312 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m400[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 313 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m 314 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoBe([32m'Training not allowed: Horse is under age'[39m)[33m;[39m
     [90m 315 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (tests/training-complete.test.mjs:312:31)

PASS tests/simple-db.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:50:44] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:44] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:44] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

FAIL tests/cronJobsIntegration.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:50:44] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:44] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:44] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:50:45] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:45] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:45] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:45] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:45] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:45] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:45] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:45] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:45] info: [GET] /api/admin/cron/status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:45] warn: [MemoryMonitoring] Memory threshold exceeded: 626MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:45] info: [adminRoutes] GET /api/admin/cron/status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:45] info: [GET] /api/admin/cron/status - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:45] info: [POST] /api/admin/traits/evaluate

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:45] warn: [MemoryMonitoring] Memory threshold exceeded: 627MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:45] info: [adminRoutes] POST /api/admin/traits/evaluate - Manual trait evaluation triggered

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:45] info: [POST] /api/admin/traits/evaluate - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:45] info: [GET] /api/admin/foals/development

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:45] warn: [MemoryMonitoring] Memory threshold exceeded: 624MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:45] info: [adminRoutes] GET /api/admin/foals/development

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:45] error: [adminRoutes] GET /api/admin/foals/development error: Cannot read properties of undefined (reading 'length')

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:50:45] info: [GET] /api/admin/foals/development - 500

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:45] info: [GET] /api/admin/traits/definitions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:45] warn: [MemoryMonitoring] Memory threshold exceeded: 623MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:45] info: [adminRoutes] GET /api/admin/traits/definitions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:45] info: [GET] /api/admin/traits/definitions - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:45] info: [POST] /api/admin/cron/start

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:45] warn: [MemoryMonitoring] Memory threshold exceeded: 629MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:45] info: [adminRoutes] POST /api/admin/cron/start

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:45] info: [POST] /api/admin/cron/start - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:45] info: [POST] /api/admin/cron/stop

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:45] warn: [MemoryMonitoring] Memory threshold exceeded: 627MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:45] info: [adminRoutes] POST /api/admin/cron/stop

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:45] info: [POST] /api/admin/cron/stop - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

  ‚óè ‚è∞ INTEGRATION: Cron Jobs System - Automated Trait Evaluation & Admin API ‚Ä∫ Admin API Endpoints ‚Ä∫ should get foals in development

    expected 200 "OK", got 500 "Internal Server Error"

    [0m [90m 446 |[39m       mockPrisma[33m.[39mhorse[33m.[39mfindMany[33m.[39mmockResolvedValueOnce(mockFoals)[33m;[39m
     [90m 447 |[39m
    [31m[1m>[22m[39m[90m 448 |[39m       [36mconst[39m response [33m=[39m [36mawait[39m request(app)[33m.[39m[36mget[39m([32m'/api/admin/foals/development'[39m)[33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m                                                                               [31m[1m^[22m[39m
     [90m 449 |[39m
     [90m 450 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 451 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoHaveProperty([32m'foals'[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/cronJobsIntegration.test.mjs:448:79)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

PASS tests/auth-simple.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:50:45] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:45] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:45] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:50:46] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:46] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:46] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: test@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=280e45014fee07a6b900e86ae4bf84ce34000993a7b7d80729858e89f1851ff4

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:50:46] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:46] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:46] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:46] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: login-test@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=7967e32718d8f36c05bf153d21200a8ca50d18568c4791313f2f7749a6b4b09f

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:50:46] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:47] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS __tests__/routes/apiOptimizationRoutes.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:50:47] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:47] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:47] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:50:47] info: [auth] Authenticated user 5f6059ed-0612-491c-8a8e-6805c0276533 for GET /metrics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:47] warn: [auth] Missing token for GET /metrics from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:47] info: [auth] Authenticated user 5f6059ed-0612-491c-8a8e-6805c0276533 for GET /performance

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:47] info: [ApiOptimization] Getting performance metrics for timeframe: 24h

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:47] info: [auth] Authenticated user 5f6059ed-0612-491c-8a8e-6805c0276533 for GET /performance

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:47] info: [ApiOptimization] Getting performance metrics for timeframe: 1h

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:47] info: [auth] Authenticated user 5f6059ed-0612-491c-8a8e-6805c0276533 for GET /performance

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:47] info: [ApiOptimization] Getting performance metrics for timeframe: 24h

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:47] info: [auth] Authenticated user 5f6059ed-0612-491c-8a8e-6805c0276533 for GET /performance

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:47] info: [ApiOptimization] Getting performance metrics for timeframe: 7d

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:48] info: [auth] Authenticated user 5f6059ed-0612-491c-8a8e-6805c0276533 for GET /performance

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:48] info: [ApiOptimization] Getting performance metrics for timeframe: 30d

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:48] info: [auth] Authenticated user 5f6059ed-0612-491c-8a8e-6805c0276533 for GET /performance

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:48] info: [auth] Authenticated user 5f6059ed-0612-491c-8a8e-6805c0276533 for GET /compression-stats

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:48] info: [ApiOptimization] Getting compression statistics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:48] info: [auth] Authenticated user 5f6059ed-0612-491c-8a8e-6805c0276533 for GET /cache-analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:48] info: [ApiOptimization] Getting cache analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:48] info: [auth] Authenticated user 5f6059ed-0612-491c-8a8e-6805c0276533 for POST /test-compression

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:48] info: [ApiOptimization] Testing compression with algorithm: gzip

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:48] info: [auth] Authenticated user 5f6059ed-0612-491c-8a8e-6805c0276533 for POST /test-compression

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:48] info: [auth] Authenticated user 5f6059ed-0612-491c-8a8e-6805c0276533 for POST /test-compression

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:48] info: [ApiOptimization] Testing compression with algorithm: gzip

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:48] info: [auth] Authenticated user 5f6059ed-0612-491c-8a8e-6805c0276533 for POST /test-compression

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:48] info: [ApiOptimization] Testing compression with algorithm: brotli

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:48] info: [auth] Authenticated user 5f6059ed-0612-491c-8a8e-6805c0276533 for POST /test-compression

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:48] info: [ApiOptimization] Testing compression with algorithm: deflate

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:48] info: [auth] Authenticated user 5f6059ed-0612-491c-8a8e-6805c0276533 for POST /test-pagination

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:48] info: [ApiOptimization] Testing offset pagination with 100 items

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:48] info: [auth] Authenticated user 5f6059ed-0612-491c-8a8e-6805c0276533 for POST /test-pagination

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:48] info: [ApiOptimization] Testing cursor pagination with 100 items

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:48] info: [auth] Authenticated user 5f6059ed-0612-491c-8a8e-6805c0276533 for POST /test-pagination

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:48] info: [auth] Authenticated user 5f6059ed-0612-491c-8a8e-6805c0276533 for POST /test-pagination

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:48] info: [auth] Authenticated user 5f6059ed-0612-491c-8a8e-6805c0276533 for POST /test-pagination

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:48] info: [auth] Authenticated user 5f6059ed-0612-491c-8a8e-6805c0276533 for GET /recommendations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:48] info: [ApiOptimization] Generating optimization recommendations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:48] warn: [auth] Invalid token for GET /metrics from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:48] warn: [auth] Missing token for GET /metrics from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:48] info: [auth] Authenticated user 5f6059ed-0612-491c-8a8e-6805c0276533 for POST /test-compression

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:48] info: [ApiOptimization] Testing compression with algorithm: gzip

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:48] info: [auth] Authenticated user 5f6059ed-0612-491c-8a8e-6805c0276533 for POST /test-pagination

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:48] info: [ApiOptimization] Testing offset pagination with 1000 items

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/competitionController-business-logic.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:50:48] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:48] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:48] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:50:48] info: [calculateCompetitionScore] Horse Competition Star: Base score for Racing: 165

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:48] info: [calculateCompetitionScore] Horse Competition Star: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:48] info: [calculateCompetitionScore] Horse Competition Star: Luck modifier: -3.7%, adjustment: -6.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:48] info: [calculateCompetitionScore] Horse Competition Star: Final score: 164 (base: 165, trait: +5, luck: -6.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:48] info: [calculateCompetitionScore] Horse Competition Novice: Base score for Racing: 115

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:48] info: [calculateCompetitionScore] Horse Competition Novice: Luck modifier: 3.6%, adjustment: 4.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:48] info: [calculateCompetitionScore] Horse Competition Novice: Final score: 119 (base: 115, trait: +0, luck: 4.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:48] info: [calculateCompetitionScore] Horse Competition Star: Base score for Racing: 165

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:48] info: [calculateCompetitionScore] Horse Competition Star: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:48] info: [calculateCompetitionScore] Horse Competition Star: Luck modifier: -3.0%, adjustment: -5.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:48] info: [calculateCompetitionScore] Horse Competition Star: Final score: 165 (base: 165, trait: +5, luck: -5.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:48] info: [calculateCompetitionScore] Horse Competition Novice: Base score for Racing: 115

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:48] info: [calculateCompetitionScore] Horse Competition Novice: Luck modifier: -5.6%, adjustment: -6.4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:48] info: [calculateCompetitionScore] Horse Competition Novice: Final score: 109 (base: 115, trait: +0, luck: -6.4)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:48] info: [resultModel.saveResult] Successfully created new result for horse 10943 in show 528 with score 85.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:48] info: [resultModel.saveResult] Successfully created new result for horse 10943 in show 528 with score 90

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:48] info: [resultModel.saveResult] Successfully created new result for horse 10944 in show 528 with score 85

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:48] info: [resultModel.getResultsByShow] Found 3 results for show 528

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:49] info: [resultModel.saveResult] Successfully created new result for horse 10943 in show 528 with score 88

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:49] info: [resultModel.getResultsByShow] Found 0 results for show 99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:49] info: [resultModel.saveResult] Successfully created new result for horse 10943 in show 528 with score 92

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      [2025-11-21 17:50:49] info: [resultModel.saveResult] Successfully created new result for horse 10944 in show 528 with score 88

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      [2025-11-21 17:50:49] info: [resultModel.saveResult] Successfully created new result for horse 10945 in show 528 with score 84

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 2)

PASS tests/data-check.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:50:49] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:49] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:49] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      Users in database: [
        {
          "id": "1658b87f-3830-4e0e-b006-264e6db9bc49",
          "email": "other_1763765438993@example.com"
        },
        {
          "id": "cba78f5e-764a-4390-a907-57333251c7a8",
          "email": "competitionapi_1763765438648@example.com"
        },
        {
          "id": "571f77c5-2533-44fc-a249-373c8dfe4292",
          "email": "nonhost_1763765439229@example.com"
        },
        {
          "id": "c49ddf98-7068-4c79-9115-738cb9a66bd3",
          "email": "optimization@test.com"
        }
      ]

      at Object.<anonymous> (tests/data-check.test.mjs:54:13)

    console.log
      Players in database (from user table): [
        {
          "id": "1658b87f-3830-4e0e-b006-264e6db9bc49",
          "username": "otheruser_1763765438993",
          "email": "other_1763765438993@example.com",
          "firstName": "Test",
          "lastName": "User",
          "money": 5000,
          "level": 1,
          "xp": 100
        },
        {
          "id": "cba78f5e-764a-4390-a907-57333251c7a8",
          "username": "competitionapi_1763765438648",
          "email": "competitionapi_1763765438648@example.com",
          "firstName": "Test",
          "lastName": "User",
          "money": 10400,
          "level": 5,
          "xp": 541
        },
        {
          "id": "571f77c5-2533-44fc-a249-373c8dfe4292",
          "username": "nonhost_1763765439229",
          "email": "nonhost_1763765439229@example.com",
          "firstName": "Test",
          "lastName": "User",
          "money": 5000,
          "level": 1,
          "xp": 100
        },
        {
          "id": "c49ddf98-7068-4c79-9115-738cb9a66bd3",
          "username": "optimizationTestUser",
          "email": "optimization@test.com",
          "firstName": "Test",
          "lastName": "User",
          "money": 1000,
          "level": 1,
          "xp": 0
        }
      ]

      at Object.<anonymous> (tests/data-check.test.mjs:86:13)

    console.log
      Horses in database: [
        {
          "id": 10936,
          "name": "Other Horse",
          "sex": "Female",
          "dateOfBirth": "2020-11-22T00:00:00.000Z",
          "breedId": 2395,
          "ownerId": "1658b87f-3830-4e0e-b006-264e6db9bc49",
          "stableId": null,
          "genotype": null,
          "phenotypicMarkings": null,
          "finalDisplayColor": null,
          "shade": null,
          "imageUrl": "/images/samplehorse.JPG",
          "trait": null,
          "temperament": null,
          "personality": null,
          "epigeneticFlags": [],
          "precision": 50,
          "strength": 0,
          "speed": 50,
          "agility": 50,
          "endurance": 0,
          "intelligence": 50,
          "stamina": 50,
          "balance": 50,
          "coordination": 50,
          "boldness": 50,
          "flexibility": 50,
          "obedience": 50,
          "focus": 50,
          "totalEarnings": 0,
          "sireId": null,
          "damId": null,
          "studStatus": "Not at Stud",
          "studFee": 0,
          "lastBredDate": null,
          "forSale": false,
          "salePrice": 0,
          "healthStatus": "Good",
          "lastVettedDate": "2025-11-21T00:00:00.000Z",
          "bondScore": 0,
          "stressLevel": 20,
          "daysGroomedInARow": 0,
          "burnoutStatus": "none",
          "taskLog": null,
          "consecutiveDaysFoalCare": 0,
          "lastGroomed": null,
          "tack": {},
          "age": 5,
          "userId": "1658b87f-3830-4e0e-b006-264e6db9bc49",
          "trainingCooldown": null,
          "earnings": "0",
          "rider": null,
          "disciplineScores": {},
          "epigeneticModifiers": {
            "negative": [],
            "positive": []
          },
          "ultraRareTraits": {
            "exotic": [],
            "ultraRare": []
          },
          "conformationScores": {
            "back": 20,
            "head": 20,
            "legs": 20,
            "neck": 20,
            "hooves": 20,
            "topline": 20,
            "shoulders": 20,
            "hindquarters": 20
          },
          "horseXp": 0,
          "availableStatPoints": 0,
          "createdAt": "2025-11-21T22:50:39.002Z",
          "updatedAt": "2025-11-21T22:50:39.002Z",
          "user": {
            "id": "1658b87f-3830-4e0e-b006-264e6db9bc49",
            "username": "otheruser_1763765438993",
            "email": "other_1763765438993@example.com"
          }
        },
        {
          "id": 10935,
          "name": "API Test Horse",
          "sex": "Female",
          "dateOfBirth": "2020-11-22T00:00:00.000Z",
          "breedId": 2395,
          "ownerId": "cba78f5e-764a-4390-a907-57333251c7a8",
          "stableId": null,
          "genotype": null,
          "phenotypicMarkings": null,
          "finalDisplayColor": null,
          "shade": null,
          "imageUrl": "/images/samplehorse.JPG",
          "trait": null,
          "temperament": null,
          "personality": null,
          "epigeneticFlags": [],
          "precision": 65,
          "strength": 0,
          "speed": 80,
          "agility": 70,
          "endurance": 0,
          "intelligence": 50,
          "stamina": 75,
          "balance": 60,
          "coordination": 50,
          "boldness": 50,
          "flexibility": 50,
          "obedience": 50,
          "focus": 70,
          "totalEarnings": 0,
          "sireId": null,
          "damId": null,
          "studStatus": "Not at Stud",
          "studFee": 0,
          "lastBredDate": null,
          "forSale": false,
          "salePrice": 0,
          "healthStatus": "Excellent",
          "lastVettedDate": "2025-11-21T00:00:00.000Z",
          "bondScore": 0,
          "stressLevel": 20,
          "daysGroomedInARow": 0,
          "burnoutStatus": "none",
          "taskLog": null,
          "consecutiveDaysFoalCare": 0,
          "lastGroomed": null,
          "tack": {},
          "age": 35,
          "userId": "cba78f5e-764a-4390-a907-57333251c7a8",
          "trainingCooldown": null,
          "earnings": "0",
          "rider": null,
          "disciplineScores": {
            "Racing": 100,
            "Dressage": 80,
            "Show Jumping": 90
          },
          "epigeneticModifiers": {
            "negative": [],
            "positive": [
              "fast",
              "athletic",
              "focused"
            ]
          },
          "ultraRareTraits": {
            "exotic": [],
            "ultraRare": []
          },
          "conformationScores": {
            "back": 20,
            "head": 20,
            "legs": 20,
            "neck": 20,
            "hooves": 20,
            "topline": 20,
            "shoulders": 20,
            "hindquarters": 20
          },
          "horseXp": 30,
          "availableStatPoints": 0,
          "createdAt": "2025-11-21T22:50:38.812Z",
          "updatedAt": "2025-11-21T22:50:39.211Z",
          "user": {
            "id": "cba78f5e-764a-4390-a907-57333251c7a8",
            "username": "competitionapi_1763765438648",
            "email": "competitionapi_1763765438648@example.com"
          }
        },
        {
          "id": 10946,
          "name": "OptimizationHorse0",
          "sex": "Stallion",
          "dateOfBirth": "2022-11-22T00:00:00.000Z",
          "breedId": 2396,
          "ownerId": "c49ddf98-7068-4c79-9115-738cb9a66bd3",
          "stableId": null,
          "genotype": null,
          "phenotypicMarkings": null,
          "finalDisplayColor": null,
          "shade": null,
          "imageUrl": "/images/samplehorse.JPG",
          "trait": null,
          "temperament": "confident",
          "personality": null,
          "epigeneticFlags": [
            "BRAVE",
            "INTELLIGENT"
          ],
          "precision": 50,
          "strength": 0,
          "speed": 50,
          "agility": 50,
          "endurance": 0,
          "intelligence": 50,
          "stamina": 50,
          "balance": 50,
          "coordination": 0,
          "boldness": 50,
          "flexibility": 50,
          "obedience": 50,
          "focus": 50,
          "totalEarnings": 0,
          "sireId": null,
          "damId": null,
          "studStatus": "Not at Stud",
          "studFee": 0,
          "lastBredDate": null,
          "forSale": false,
          "salePrice": 0,
          "healthStatus": "Good",
          "lastVettedDate": "2025-11-21T00:00:00.000Z",
          "bondScore": 0,
          "stressLevel": 0,
          "daysGroomedInARow": 0,
          "burnoutStatus": "none",
          "taskLog": null,
          "consecutiveDaysFoalCare": 0,
          "lastGroomed": null,
          "tack": {},
          "age": 3,
          "userId": null,
          "trainingCooldown": null,
          "earnings": "0",
          "rider": null,
          "disciplineScores": {
            "Racing": 50,
            "Dressage": 40
          },
          "epigeneticModifiers": {
            "hidden": [],
            "negative": [],
            "positive": []
          },
          "ultraRareTraits": {
            "exotic": [],
            "ultraRare": []
          },
          "conformationScores": {
            "back": 20,
            "head": 20,
            "legs": 20,
            "neck": 20,
            "hooves": 20,
            "topline": 20,
            "shoulders": 20,
            "hindquarters": 20
          },
          "horseXp": 0,
          "availableStatPoints": 0,
          "createdAt": "2025-11-21T22:50:49.469Z",
          "updatedAt": "2025-11-21T22:50:49.469Z",
          "user": null
        },
        {
          "id": 10947,
          "name": "OptimizationHorse1",
          "sex": "Mare",
          "dateOfBirth": "2021-11-22T00:00:00.000Z",
          "breedId": 2396,
          "ownerId": "c49ddf98-7068-4c79-9115-738cb9a66bd3",
          "stableId": null,
          "genotype": null,
          "phenotypicMarkings": null,
          "finalDisplayColor": null,
          "shade": null,
          "imageUrl": "/images/samplehorse.JPG",
          "trait": null,
          "temperament": "confident",
          "personality": null,
          "epigeneticFlags": [
            "BRAVE",
            "INTELLIGENT"
          ],
          "precision": 51,
          "strength": 0,
          "speed": 51,
          "agility": 51,
          "endurance": 0,
          "intelligence": 51,
          "stamina": 51,
          "balance": 51,
          "coordination": 0,
          "boldness": 51,
          "flexibility": 51,
          "obedience": 51,
          "focus": 51,
          "totalEarnings": 0,
          "sireId": null,
          "damId": null,
          "studStatus": "Not at Stud",
          "studFee": 0,
          "lastBredDate": null,
          "forSale": false,
          "salePrice": 0,
          "healthStatus": "Good",
          "lastVettedDate": "2025-11-21T00:00:00.000Z",
          "bondScore": 0,
          "stressLevel": 0,
          "daysGroomedInARow": 0,
          "burnoutStatus": "none",
          "taskLog": null,
          "consecutiveDaysFoalCare": 0,
          "lastGroomed": null,
          "tack": {},
          "age": 4,
          "userId": null,
          "trainingCooldown": null,
          "earnings": "0",
          "rider": null,
          "disciplineScores": {
            "Racing": 51,
            "Dressage": 41
          },
          "epigeneticModifiers": {
            "hidden": [],
            "negative": [],
            "positive": []
          },
          "ultraRareTraits": {
            "exotic": [],
            "ultraRare": []
          },
          "conformationScores": {
            "back": 20,
            "head": 20,
            "legs": 20,
            "neck": 20,
            "hooves": 20,
            "topline": 20,
            "shoulders": 20,
            "hindquarters": 20
          },
          "horseXp": 0,
          "availableStatPoints": 0,
          "createdAt": "2025-11-21T22:50:49.480Z",
          "updatedAt": "2025-11-21T22:50:49.480Z",
          "user": null
        },
        {
          "id": 10948,
          "name": "OptimizationHorse2",
          "sex": "Stallion",
          "dateOfBirth": "2020-11-22T00:00:00.000Z",
          "breedId": 2396,
          "ownerId": "c49ddf98-7068-4c79-9115-738cb9a66bd3",
          "stableId": null,
          "genotype": null,
          "phenotypicMarkings": null,
          "finalDisplayColor": null,
          "shade": null,
          "imageUrl": "/images/samplehorse.JPG",
          "trait": null,
          "temperament": "confident",
          "personality": null,
          "epigeneticFlags": [
            "BRAVE",
            "INTELLIGENT"
          ],
          "precision": 52,
          "strength": 0,
          "speed": 52,
          "agility": 52,
          "endurance": 0,
          "intelligence": 52,
          "stamina": 52,
          "balance": 52,
          "coordination": 0,
          "boldness": 52,
          "flexibility": 52,
          "obedience": 52,
          "focus": 52,
          "totalEarnings": 0,
          "sireId": null,
          "damId": null,
          "studStatus": "Not at Stud",
          "studFee": 0,
          "lastBredDate": null,
          "forSale": false,
          "salePrice": 0,
          "healthStatus": "Good",
          "lastVettedDate": "2025-11-21T00:00:00.000Z",
          "bondScore": 0,
          "stressLevel": 0,
          "daysGroomedInARow": 0,
          "burnoutStatus": "none",
          "taskLog": null,
          "consecutiveDaysFoalCare": 0,
          "lastGroomed": null,
          "tack": {},
          "age": 5,
          "userId": null,
          "trainingCooldown": null,
          "earnings": "0",
          "rider": null,
          "disciplineScores": {
            "Racing": 52,
            "Dressage": 42
          },
          "epigeneticModifiers": {
            "hidden": [],
            "negative": [],
            "positive": []
          },
          "ultraRareTraits": {
            "exotic": [],
            "ultraRare": []
          },
          "conformationScores": {
            "back": 20,
            "head": 20,
            "legs": 20,
            "neck": 20,
            "hooves": 20,
            "topline": 20,
            "shoulders": 20,
            "hindquarters": 20
          },
          "horseXp": 0,
          "availableStatPoints": 0,
          "createdAt": "2025-11-21T22:50:49.485Z",
          "updatedAt": "2025-11-21T22:50:49.485Z",
          "user": null
        },
        {
          "id": 10949,
          "name": "OptimizationHorse3",
          "sex": "Mare",
          "dateOfBirth": "2019-11-23T00:00:00.000Z",
          "breedId": 2396,
          "ownerId": "c49ddf98-7068-4c79-9115-738cb9a66bd3",
          "stableId": null,
          "genotype": null,
          "phenotypicMarkings": null,
          "finalDisplayColor": null,
          "shade": null,
          "imageUrl": "/images/samplehorse.JPG",
          "trait": null,
          "temperament": "confident",
          "personality": null,
          "epigeneticFlags": [
            "BRAVE",
            "INTELLIGENT"
          ],
          "precision": 53,
          "strength": 0,
          "speed": 53,
          "agility": 53,
          "endurance": 0,
          "intelligence": 53,
          "stamina": 53,
          "balance": 53,
          "coordination": 0,
          "boldness": 53,
          "flexibility": 53,
          "obedience": 53,
          "focus": 53,
          "totalEarnings": 0,
          "sireId": null,
          "damId": null,
          "studStatus": "Not at Stud",
          "studFee": 0,
          "lastBredDate": null,
          "forSale": false,
          "salePrice": 0,
          "healthStatus": "Good",
          "lastVettedDate": "2025-11-21T00:00:00.000Z",
          "bondScore": 0,
          "stressLevel": 0,
          "daysGroomedInARow": 0,
          "burnoutStatus": "none",
          "taskLog": null,
          "consecutiveDaysFoalCare": 0,
          "lastGroomed": null,
          "tack": {},
          "age": 6,
          "userId": null,
          "trainingCooldown": null,
          "earnings": "0",
          "rider": null,
          "disciplineScores": {
            "Racing": 53,
            "Dressage": 43
          },
          "epigeneticModifiers": {
            "hidden": [],
            "negative": [],
            "positive": []
          },
          "ultraRareTraits": {
            "exotic": [],
            "ultraRare": []
          },
          "conformationScores": {
            "back": 20,
            "head": 20,
            "legs": 20,
            "neck": 20,
            "hooves": 20,
            "topline": 20,
            "shoulders": 20,
            "hindquarters": 20
          },
          "horseXp": 0,
          "availableStatPoints": 0,
          "createdAt": "2025-11-21T22:50:49.491Z",
          "updatedAt": "2025-11-21T22:50:49.491Z",
          "user": null
        },
        {
          "id": 10950,
          "name": "OptimizationHorse4",
          "sex": "Stallion",
          "dateOfBirth": "2018-11-23T00:00:00.000Z",
          "breedId": 2396,
          "ownerId": "c49ddf98-7068-4c79-9115-738cb9a66bd3",
          "stableId": null,
          "genotype": null,
          "phenotypicMarkings": null,
          "finalDisplayColor": null,
          "shade": null,
          "imageUrl": "/images/samplehorse.JPG",
          "trait": null,
          "temperament": "confident",
          "personality": null,
          "epigeneticFlags": [
            "BRAVE",
            "INTELLIGENT"
          ],
          "precision": 54,
          "strength": 0,
          "speed": 54,
          "agility": 54,
          "endurance": 0,
          "intelligence": 54,
          "stamina": 54,
          "balance": 54,
          "coordination": 0,
          "boldness": 54,
          "flexibility": 54,
          "obedience": 54,
          "focus": 54,
          "totalEarnings": 0,
          "sireId": null,
          "damId": null,
          "studStatus": "Not at Stud",
          "studFee": 0,
          "lastBredDate": null,
          "forSale": false,
          "salePrice": 0,
          "healthStatus": "Good",
          "lastVettedDate": "2025-11-21T00:00:00.000Z",
          "bondScore": 0,
          "stressLevel": 0,
          "daysGroomedInARow": 0,
          "burnoutStatus": "none",
          "taskLog": null,
          "consecutiveDaysFoalCare": 0,
          "lastGroomed": null,
          "tack": {},
          "age": 7,
          "userId": null,
          "trainingCooldown": null,
          "earnings": "0",
          "rider": null,
          "disciplineScores": {
            "Racing": 54,
            "Dressage": 44
          },
          "epigeneticModifiers": {
            "hidden": [],
            "negative": [],
            "positive": []
          },
          "ultraRareTraits": {
            "exotic": [],
            "ultraRare": []
          },
          "conformationScores": {
            "back": 20,
            "head": 20,
            "legs": 20,
            "neck": 20,
            "hooves": 20,
            "topline": 20,
            "shoulders": 20,
            "hindquarters": 20
          },
          "horseXp": 0,
          "availableStatPoints": 0,
          "createdAt": "2025-11-21T22:50:49.496Z",
          "updatedAt": "2025-11-21T22:50:49.496Z",
          "user": null
        },
        {
          "id": 10951,
          "name": "OptimizationHorse5",
          "sex": "Mare",
          "dateOfBirth": "2017-11-23T00:00:00.000Z",
          "breedId": 2396,
          "ownerId": "c49ddf98-7068-4c79-9115-738cb9a66bd3",
          "stableId": null,
          "genotype": null,
          "phenotypicMarkings": null,
          "finalDisplayColor": null,
          "shade": null,
          "imageUrl": "/images/samplehorse.JPG",
          "trait": null,
          "temperament": "confident",
          "personality": null,
          "epigeneticFlags": [
            "BRAVE",
            "INTELLIGENT"
          ],
          "precision": 55,
          "strength": 0,
          "speed": 55,
          "agility": 55,
          "endurance": 0,
          "intelligence": 55,
          "stamina": 55,
          "balance": 55,
          "coordination": 0,
          "boldness": 55,
          "flexibility": 55,
          "obedience": 55,
          "focus": 55,
          "totalEarnings": 0,
          "sireId": null,
          "damId": null,
          "studStatus": "Not at Stud",
          "studFee": 0,
          "lastBredDate": null,
          "forSale": false,
          "salePrice": 0,
          "healthStatus": "Good",
          "lastVettedDate": "2025-11-21T00:00:00.000Z",
          "bondScore": 0,
          "stressLevel": 0,
          "daysGroomedInARow": 0,
          "burnoutStatus": "none",
          "taskLog": null,
          "consecutiveDaysFoalCare": 0,
          "lastGroomed": null,
          "tack": {},
          "age": 8,
          "userId": null,
          "trainingCooldown": null,
          "earnings": "0",
          "rider": null,
          "disciplineScores": {
            "Racing": 55,
            "Dressage": 45
          },
          "epigeneticModifiers": {
            "hidden": [],
            "negative": [],
            "positive": []
          },
          "ultraRareTraits": {
            "exotic": [],
            "ultraRare": []
          },
          "conformationScores": {
            "back": 20,
            "head": 20,
            "legs": 20,
            "neck": 20,
            "hooves": 20,
            "topline": 20,
            "shoulders": 20,
            "hindquarters": 20
          },
          "horseXp": 0,
          "availableStatPoints": 0,
          "createdAt": "2025-11-21T22:50:49.502Z",
          "updatedAt": "2025-11-21T22:50:49.502Z",
          "user": null
        },
        {
          "id": 10952,
          "name": "OptimizationHorse6",
          "sex": "Stallion",
          "dateOfBirth": "2016-11-23T00:00:00.000Z",
          "breedId": 2396,
          "ownerId": "c49ddf98-7068-4c79-9115-738cb9a66bd3",
          "stableId": null,
          "genotype": null,
          "phenotypicMarkings": null,
          "finalDisplayColor": null,
          "shade": null,
          "imageUrl": "/images/samplehorse.JPG",
          "trait": null,
          "temperament": "confident",
          "personality": null,
          "epigeneticFlags": [
            "BRAVE",
            "INTELLIGENT"
          ],
          "precision": 56,
          "strength": 0,
          "speed": 56,
          "agility": 56,
          "endurance": 0,
          "intelligence": 56,
          "stamina": 56,
          "balance": 56,
          "coordination": 0,
          "boldness": 56,
          "flexibility": 56,
          "obedience": 56,
          "focus": 56,
          "totalEarnings": 0,
          "sireId": null,
          "damId": null,
          "studStatus": "Not at Stud",
          "studFee": 0,
          "lastBredDate": null,
          "forSale": false,
          "salePrice": 0,
          "healthStatus": "Good",
          "lastVettedDate": "2025-11-21T00:00:00.000Z",
          "bondScore": 0,
          "stressLevel": 0,
          "daysGroomedInARow": 0,
          "burnoutStatus": "none",
          "taskLog": null,
          "consecutiveDaysFoalCare": 0,
          "lastGroomed": null,
          "tack": {},
          "age": 9,
          "userId": null,
          "trainingCooldown": null,
          "earnings": "0",
          "rider": null,
          "disciplineScores": {
            "Racing": 56,
            "Dressage": 46
          },
          "epigeneticModifiers": {
            "hidden": [],
            "negative": [],
            "positive": []
          },
          "ultraRareTraits": {
            "exotic": [],
            "ultraRare": []
          },
          "conformationScores": {
            "back": 20,
            "head": 20,
            "legs": 20,
            "neck": 20,
            "hooves": 20,
            "topline": 20,
            "shoulders": 20,
            "hindquarters": 20
          },
          "horseXp": 0,
          "availableStatPoints": 0,
          "createdAt": "2025-11-21T22:50:49.508Z",
          "updatedAt": "2025-11-21T22:50:49.508Z",
          "user": null
        },
        {
          "id": 10953,
          "name": "OptimizationHorse7",
          "sex": "Mare",
          "dateOfBirth": "2015-11-24T00:00:00.000Z",
          "breedId": 2396,
          "ownerId": "c49ddf98-7068-4c79-9115-738cb9a66bd3",
          "stableId": null,
          "genotype": null,
          "phenotypicMarkings": null,
          "finalDisplayColor": null,
          "shade": null,
          "imageUrl": "/images/samplehorse.JPG",
          "trait": null,
          "temperament": "confident",
          "personality": null,
          "epigeneticFlags": [
            "BRAVE",
            "INTELLIGENT"
          ],
          "precision": 57,
          "strength": 0,
          "speed": 57,
          "agility": 57,
          "endurance": 0,
          "intelligence": 57,
          "stamina": 57,
          "balance": 57,
          "coordination": 0,
          "boldness": 57,
          "flexibility": 57,
          "obedience": 57,
          "focus": 57,
          "totalEarnings": 0,
          "sireId": null,
          "damId": null,
          "studStatus": "Not at Stud",
          "studFee": 0,
          "lastBredDate": null,
          "forSale": false,
          "salePrice": 0,
          "healthStatus": "Good",
          "lastVettedDate": "2025-11-21T00:00:00.000Z",
          "bondScore": 0,
          "stressLevel": 0,
          "daysGroomedInARow": 0,
          "burnoutStatus": "none",
          "taskLog": null,
          "consecutiveDaysFoalCare": 0,
          "lastGroomed": null,
          "tack": {},
          "age": 10,
          "userId": null,
          "trainingCooldown": null,
          "earnings": "0",
          "rider": null,
          "disciplineScores": {
            "Racing": 57,
            "Dressage": 47
          },
          "epigeneticModifiers": {
            "hidden": [],
            "negative": [],
            "positive": []
          },
          "ultraRareTraits": {
            "exotic": [],
            "ultraRare": []
          },
          "conformationScores": {
            "back": 20,
            "head": 20,
            "legs": 20,
            "neck": 20,
            "hooves": 20,
            "topline": 20,
            "shoulders": 20,
            "hindquarters": 20
          },
          "horseXp": 0,
          "availableStatPoints": 0,
          "createdAt": "2025-11-21T22:50:49.512Z",
          "updatedAt": "2025-11-21T22:50:49.512Z",
          "user": null
        },
        {
          "id": 10954,
          "name": "OptimizationHorse8",
          "sex": "Stallion",
          "dateOfBirth": "2014-11-24T00:00:00.000Z",
          "breedId": 2396,
          "ownerId": "c49ddf98-7068-4c79-9115-738cb9a66bd3",
          "stableId": null,
          "genotype": null,
          "phenotypicMarkings": null,
          "finalDisplayColor": null,
          "shade": null,
          "imageUrl": "/images/samplehorse.JPG",
          "trait": null,
          "temperament": "confident",
          "personality": null,
          "epigeneticFlags": [
            "BRAVE",
            "INTELLIGENT"
          ],
          "precision": 58,
          "strength": 0,
          "speed": 58,
          "agility": 58,
          "endurance": 0,
          "intelligence": 58,
          "stamina": 58,
          "balance": 58,
          "coordination": 0,
          "boldness": 58,
          "flexibility": 58,
          "obedience": 58,
          "focus": 58,
          "totalEarnings": 0,
          "sireId": null,
          "damId": null,
          "studStatus": "Not at Stud",
          "studFee": 0,
          "lastBredDate": null,
          "forSale": false,
          "salePrice": 0,
          "healthStatus": "Good",
          "lastVettedDate": "2025-11-21T00:00:00.000Z",
          "bondScore": 0,
          "stressLevel": 0,
          "daysGroomedInARow": 0,
          "burnoutStatus": "none",
          "taskLog": null,
          "consecutiveDaysFoalCare": 0,
          "lastGroomed": null,
          "tack": {},
          "age": 11,
          "userId": null,
          "trainingCooldown": null,
          "earnings": "0",
          "rider": null,
          "disciplineScores": {
            "Racing": 58,
            "Dressage": 48
          },
          "epigeneticModifiers": {
            "hidden": [],
            "negative": [],
            "positive": []
          },
          "ultraRareTraits": {
            "exotic": [],
            "ultraRare": []
          },
          "conformationScores": {
            "back": 20,
            "head": 20,
            "legs": 20,
            "neck": 20,
            "hooves": 20,
            "topline": 20,
            "shoulders": 20,
            "hindquarters": 20
          },
          "horseXp": 0,
          "availableStatPoints": 0,
          "createdAt": "2025-11-21T22:50:49.518Z",
          "updatedAt": "2025-11-21T22:50:49.518Z",
          "user": null
        },
        {
          "id": 10955,
          "name": "OptimizationHorse9",
          "sex": "Mare",
          "dateOfBirth": "2013-11-24T00:00:00.000Z",
          "breedId": 2396,
          "ownerId": "c49ddf98-7068-4c79-9115-738cb9a66bd3",
          "stableId": null,
          "genotype": null,
          "phenotypicMarkings": null,
          "finalDisplayColor": null,
          "shade": null,
          "imageUrl": "/images/samplehorse.JPG",
          "trait": null,
          "temperament": "confident",
          "personality": null,
          "epigeneticFlags": [
            "BRAVE",
            "INTELLIGENT"
          ],
          "precision": 59,
          "strength": 0,
          "speed": 59,
          "agility": 59,
          "endurance": 0,
          "intelligence": 59,
          "stamina": 59,
          "balance": 59,
          "coordination": 0,
          "boldness": 59,
          "flexibility": 59,
          "obedience": 59,
          "focus": 59,
          "totalEarnings": 0,
          "sireId": null,
          "damId": null,
          "studStatus": "Not at Stud",
          "studFee": 0,
          "lastBredDate": null,
          "forSale": false,
          "salePrice": 0,
          "healthStatus": "Good",
          "lastVettedDate": "2025-11-21T00:00:00.000Z",
          "bondScore": 0,
          "stressLevel": 0,
          "daysGroomedInARow": 0,
          "burnoutStatus": "none",
          "taskLog": null,
          "consecutiveDaysFoalCare": 0,
          "lastGroomed": null,
          "tack": {},
          "age": 12,
          "userId": null,
          "trainingCooldown": null,
          "earnings": "0",
          "rider": null,
          "disciplineScores": {
            "Racing": 59,
            "Dressage": 49
          },
          "epigeneticModifiers": {
            "hidden": [],
            "negative": [],
            "positive": []
          },
          "ultraRareTraits": {
            "exotic": [],
            "ultraRare": []
          },
          "conformationScores": {
            "back": 20,
            "head": 20,
            "legs": 20,
            "neck": 20,
            "hooves": 20,
            "topline": 20,
            "shoulders": 20,
            "hindquarters": 20
          },
          "horseXp": 0,
          "availableStatPoints": 0,
          "createdAt": "2025-11-21T22:50:49.523Z",
          "updatedAt": "2025-11-21T22:50:49.523Z",
          "user": null
        },
        {
          "id": 10956,
          "name": "OptimizationHorse10",
          "sex": "Stallion",
          "dateOfBirth": "2022-11-22T00:00:00.000Z",
          "breedId": 2396,
          "ownerId": "c49ddf98-7068-4c79-9115-738cb9a66bd3",
          "stableId": null,
          "genotype": null,
          "phenotypicMarkings": null,
          "finalDisplayColor": null,
          "shade": null,
          "imageUrl": "/images/samplehorse.JPG",
          "trait": null,
          "temperament": "confident",
          "personality": null,
          "epigeneticFlags": [
            "BRAVE",
            "INTELLIGENT"
          ],
          "precision": 60,
          "strength": 0,
          "speed": 60,
          "agility": 60,
          "endurance": 0,
          "intelligence": 60,
          "stamina": 60,
          "balance": 60,
          "coordination": 0,
          "boldness": 60,
          "flexibility": 60,
          "obedience": 60,
          "focus": 60,
          "totalEarnings": 0,
          "sireId": null,
          "damId": null,
          "studStatus": "Not at Stud",
          "studFee": 0,
          "lastBredDate": null,
          "forSale": false,
          "salePrice": 0,
          "healthStatus": "Good",
          "lastVettedDate": "2025-11-21T00:00:00.000Z",
          "bondScore": 0,
          "stressLevel": 0,
          "daysGroomedInARow": 0,
          "burnoutStatus": "none",
          "taskLog": null,
          "consecutiveDaysFoalCare": 0,
          "lastGroomed": null,
          "tack": {},
          "age": 3,
          "userId": null,
          "trainingCooldown": null,
          "earnings": "0",
          "rider": null,
          "disciplineScores": {
            "Racing": 60,
            "Dressage": 50
          },
          "epigeneticModifiers": {
            "hidden": [],
            "negative": [],
            "positive": []
          },
          "ultraRareTraits": {
            "exotic": [],
            "ultraRare": []
          },
          "conformationScores": {
            "back": 20,
            "head": 20,
            "legs": 20,
            "neck": 20,
            "hooves": 20,
            "topline": 20,
            "shoulders": 20,
            "hindquarters": 20
          },
          "horseXp": 0,
          "availableStatPoints": 0,
          "createdAt": "2025-11-21T22:50:49.529Z",
          "updatedAt": "2025-11-21T22:50:49.529Z",
          "user": null
        }
      ]

      at Object.<anonymous> (tests/data-check.test.mjs:113:13)

PASS tests/horseModelTask7.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:50:49] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:49] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:49] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:50:49] info: [horseModel.hasTrait] Checking if horse invalid has trait 'trait'

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:49] error: [horseModel.hasTrait] Error checking trait: Invalid horse ID provided

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:50:49] info: [horseModel.hasTrait] Checking if horse -1 has trait 'trait'

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:49] error: [horseModel.hasTrait] Error checking trait: Invalid horse ID provided

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:50:49] info: [horseModel.hasTrait] Checking if horse 0 has trait 'trait'

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:49] error: [horseModel.hasTrait] Error checking trait: Invalid horse ID provided

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:50:49] info: [horseModel.hasTrait] Checking if horse null has trait 'trait'

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:49] error: [horseModel.hasTrait] Error checking trait: Invalid horse ID provided

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:50:49] info: [horseModel.hasTrait] Checking if horse 1 has trait ''

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:49] error: [horseModel.hasTrait] Error checking trait: Trait name must be a non-empty string

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:50:49] info: [horseModel.hasTrait] Checking if horse 1 has trait 'null'

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:49] error: [horseModel.hasTrait] Error checking trait: Trait name must be a non-empty string

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:50:49] info: [horseModel.hasTrait] Checking if horse 1 has trait 'undefined'

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:49] error: [horseModel.hasTrait] Error checking trait: Trait name must be a non-empty string

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:50:49] info: [horseModel.hasTrait] Checking if horse 1 has trait '123'

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:49] error: [horseModel.hasTrait] Error checking trait: Trait name must be a non-empty string

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:50:49] info: [horseModel.getPositiveTraitsArray] Getting positive traits for horse invalid

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:49] error: [horseModel.getPositiveTraitsArray] Error getting positive traits: Invalid horse ID provided

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:50:49] info: [horseModel.getPositiveTraitsArray] Getting positive traits for horse -1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:49] error: [horseModel.getPositiveTraitsArray] Error getting positive traits: Invalid horse ID provided

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:50:49] info: [horseModel.getPositiveTraitsArray] Getting positive traits for horse 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:49] error: [horseModel.getPositiveTraitsArray] Error getting positive traits: Invalid horse ID provided

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:50:49] info: [horseModel.getNegativeTraitsArray] Getting negative traits for horse invalid

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:49] error: [horseModel.getNegativeTraitsArray] Error getting negative traits: Invalid horse ID provided

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:50:49] info: [horseModel.getNegativeTraitsArray] Getting negative traits for horse -1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:49] error: [horseModel.getNegativeTraitsArray] Error getting negative traits: Invalid horse ID provided

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:50:49] info: [horseModel.getNegativeTraitsArray] Getting negative traits for horse 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:49] error: [horseModel.getNegativeTraitsArray] Error getting negative traits: Invalid horse ID provided

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:50:49] info: [horseModel.addTrait] Adding trait 'trait' to category 'positive' for horse invalid

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:49] error: [horseModel.addTrait] Error adding trait: Invalid horse ID provided

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:50:49] info: [horseModel.addTrait] Adding trait 'trait' to category 'positive' for horse -1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:49] error: [horseModel.addTrait] Error adding trait: Invalid horse ID provided

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:50:49] info: [horseModel.addTrait] Adding trait 'trait' to category 'positive' for horse 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:49] error: [horseModel.addTrait] Error adding trait: Invalid horse ID provided

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:50:49] info: [horseModel.addTrait] Adding trait '' to category 'positive' for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:49] error: [horseModel.addTrait] Error adding trait: Trait name must be a non-empty string

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:50:49] info: [horseModel.addTrait] Adding trait 'null' to category 'positive' for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:49] error: [horseModel.addTrait] Error adding trait: Trait name must be a non-empty string

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:50:49] info: [horseModel.addTrait] Adding trait '123' to category 'positive' for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:49] error: [horseModel.addTrait] Error adding trait: Trait name must be a non-empty string

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:50:49] info: [horseModel.addTrait] Adding trait 'trait' to category 'invalid' for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:49] error: [horseModel.addTrait] Error adding trait: Invalid category 'invalid'. Must be one of: positive, negative

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:50:49] info: [horseModel.addTrait] Adding trait 'trait' to category 'hidden' for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:49] error: [horseModel.addTrait] Error adding trait: Invalid category 'hidden'. Must be one of: positive, negative

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:50:49] info: [horseModel.addTrait] Adding trait 'trait' to category '' for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:49] error: [horseModel.addTrait] Error adding trait: Invalid category ''. Must be one of: positive, negative

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:50:49] info: [horseModel.hasTrait] Checking if horse 999999 has trait 'trait'

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:50] error: [horseModel.hasTrait] Error checking trait: Horse with ID 999999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:50:50] info: [horseModel.getPositiveTraitsArray] Getting positive traits for horse 999999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:50] error: [horseModel.getPositiveTraitsArray] Error getting positive traits: Horse with ID 999999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:50:50] info: [horseModel.getNegativeTraitsArray] Getting negative traits for horse 999999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:50] error: [horseModel.getNegativeTraitsArray] Error getting negative traits: Horse with ID 999999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:50:50] info: [horseModel.hasTrait] Checking if horse 999999 has trait 'trait'

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:50] error: [horseModel.hasTrait] Error checking trait: Horse with ID 999999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:50:50] info: [horseModel.getPositiveTraitsArray] Getting positive traits for horse 999999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:50] error: [horseModel.getPositiveTraitsArray] Error getting positive traits: Horse with ID 999999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:50:50] info: [horseModel.getNegativeTraitsArray] Getting negative traits for horse 999999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:50] error: [horseModel.getNegativeTraitsArray] Error getting negative traits: Horse with ID 999999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

PASS tests/services/personalityEvolutionSystem.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:50:50] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:50] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:50] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:50:50] info: [personalityEvolutionSystem.evolveGroomPersonality] Starting evolution analysis for groom 4562

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:50] info: [personalityEvolutionSystem.applyPersonalityEvolutionEffects] Applying effects for groom 4562

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:50] info: [personalityEvolutionSystem.evolveGroomPersonality] Starting evolution analysis for groom 4563

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:50] info: [personalityEvolutionSystem.calculatePersonalityEvolutionTriggers] Analyzing triggers for groom 4562

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:50] info: [personalityEvolutionSystem.evolveHorseTemperament] Starting evolution analysis for horse 10971

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:50] info: [personalityEvolutionSystem.applyPersonalityEvolutionEffects] Applying effects for horse 10971

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:50] info: [personalityEvolutionSystem.evolveHorseTemperament] Starting evolution analysis for horse 10972

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:50] info: [personalityEvolutionSystem.analyzePersonalityStability] Analyzing stability for horse 10971

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:50] info: [personalityEvolutionSystem.predictPersonalityEvolution] Predicting evolution for groom 4562 over 30 days

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:50] info: [personalityEvolutionSystem.getPersonalityEvolutionHistory] Getting history for groom 4562

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:50] info: [personalityEvolutionSystem.applyPersonalityEvolutionEffects] Applying effects for groom 4562

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:50] info: [personalityEvolutionSystem.analyzePersonalityStability] Analyzing stability for horse 10971

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/services/weeklyFlagEvaluationService.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:50:50] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:51] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:51] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:50:51] info: Found 3 horses eligible for flag evaluation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:51] info: Found 3 horses eligible for flag evaluation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:51] info: Flag insecure triggered for horse Test Foal Week 1763765451120: Frequent groom changes with declining bond or neglect

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:51] info: Flag aloof triggered for horse Test Foal Week 1763765451120: Generic negative flag evaluation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:51] info: Flag skittish triggered for horse Test Foal Week 1763765451120: Generic negative flag evaluation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:51] info: Assigned 3 new flags to horse Test Foal Week 1763765451120: insecure, aloof, skittish

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:51] info: Starting weekly flag evaluation process

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:51] info: Found 3 horses eligible for flag evaluation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:51] info: Flag aloof triggered for horse Test Foal Month 1763765451120: Generic negative flag evaluation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:51] info: Flag skittish triggered for horse Test Foal Month 1763765451120: Generic negative flag evaluation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:51] info: Assigned 2 new flags to horse Test Foal Month 1763765451120: aloof, skittish

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:51] info: Flag aloof triggered for horse Test Horse 2yo 1763765451120: Generic negative flag evaluation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:51] info: Flag skittish triggered for horse Test Horse 2yo 1763765451120: Generic negative flag evaluation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:51] info: Assigned 2 new flags to horse Test Horse 2yo 1763765451120: aloof, skittish

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:51] info: Weekly flag evaluation completed: 4 flags assigned to 3 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:51] info: Starting weekly flag evaluation process

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:51] info: Found 3 horses eligible for flag evaluation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:51] info: Weekly flag evaluation completed: 0 flags assigned to 3 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/schema-field-test.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:50:51] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:51] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:51] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

PASS tests/services/flagEffectIntegration.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:50:51] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:51] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:51] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

PASS tests/services/carePatternAnalyzerEnhanced.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:50:52] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:52] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:52] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

PASS tests/services/groomTalentService.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:50:52] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:52] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:52] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:50:52] info: Groom 4575 selected talent gentle_hands for tier1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:52] info: Groom 4577 selected talent gentle_hands for tier1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:52] info: Groom 4578 selected talent gentle_hands for tier1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:52] info: Groom 4578 selected talent stress_whisperer for tier2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:52] info: Groom 4578 selected talent master_bonding for tier3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:52] error: Error selecting talent for groom 4579: Invalid talent selection: invalid_talent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:50:52] error: Error selecting talent for groom 4581: Invalid talent selection: insufficient_level

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:50:52] info: Groom 4582 selected talent gentle_hands for tier1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:52] info: Groom 4583 selected talent gentle_hands for tier1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:52] info: Groom 4583 selected talent stress_whisperer for tier2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:53] info: Groom 4585 selected talent gentle_hands for tier1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/dbConnection.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:50:53] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:53] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:53] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

PASS tests/schema-validation.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:50:53] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:53] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:53] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

PASS tests/unit/breedingAnalyticsService.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:50:54] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:54] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:54] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

PASS tests/services/flagAssignmentEngineEnhanced.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:50:54] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:54] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:54] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:50:54] info: Flag brave triggered for horse Test Foal 6mo 1763765454569: Consistent care with good stress management and task diversity

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:54] info: Flag confident triggered for horse Test Foal 6mo 1763765454569: Strong bond growth with diverse, high-quality experiences

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:54] info: Flag resilient triggered for horse Test Foal 6mo 1763765454569: Generic positive flag evaluation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:54] error: Error evaluating triggers for flag fearful: Cannot read properties of undefined (reading 'length')

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:50:54] error: Error evaluating triggers for flag insecure: Cannot read properties of undefined (reading 'neglectRatio')

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

PASS tests/unit/trainingAnalyticsService.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:50:54] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:54] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:54] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

PASS tests/services/groomLegacyService.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:50:55] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:55] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:55] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:50:55] info: Created legacy prot√©g√© Young Apprentice (ID: 4601) from mentor Retired Master Groom 1763765455452 (ID: 4600)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:55] info: Inherited perk: Gentle Hands

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:55] error: Error generating legacy prot√©g√© for mentor 4603: Mentor groom 4603 is not eligible for legacy creation: insufficient_level

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:50:55] info: Created legacy prot√©g√© History Test Apprentice (ID: 4607) from mentor Retired Master Groom 1763765455508 (ID: 4606)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:55] info: Inherited perk: Gentle Hands

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/unit/performanceAnalyticsService.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:50:55] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:55] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:55] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

PASS tests/horseXpIntegration.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:50:56] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:56] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:56] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:50:56] info: [horseXpModel.addXpToHorse] Added 30 XP to horse XP Test Horse (ID: 11005). New XP: 30, Stat points gained: 0, Available: 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:56] info: [horseXpModel.addXpToHorse] Added 30 XP to horse XP Test Horse (ID: 11005). New XP: 30, Stat points gained: 0, Available: 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:56] info: [horseXpModel.addXpToHorse] Added 30 XP to horse XP Test Horse (ID: 11005). New XP: 60, Stat points gained: 0, Available: 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:56] info: [horseXpModel.addXpToHorse] Added 27 XP to horse XP Test Horse (ID: 11005). New XP: 87, Stat points gained: 0, Available: 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:56] info: [horseXpModel.addXpToHorse] Added 25 XP to horse XP Test Horse (ID: 11005). New XP: 112, Stat points gained: 1, Available: 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:56] info: [horseXpModel.addXpToHorse] Added 150 XP to horse XP Test Horse (ID: 11005). New XP: 150, Stat points gained: 1, Available: 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:56] info: [horseXpModel.addXpToHorse] Added 200 XP to horse XP Test Horse (ID: 11005). New XP: 200, Stat points gained: 2, Available: 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:56] info: [horseXpModel.allocateStatPoint] Allocated 1 stat point to speed for horse XP Test Horse (ID: 11005). New speed: 76, Remaining points: 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:56] info: [horseXpModel.addXpToHorse] Added 50 XP to horse XP Test Horse (ID: 11005). New XP: 50, Stat points gained: 0, Available: 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:56] info: [horseXpModel.addXpToHorse] Added 30 XP to horse XP Test Horse (ID: 11005). New XP: 80, Stat points gained: 0, Available: 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:56] info: [horseXpModel.addXpToHorse] Added 25 XP to horse XP Test Horse (ID: 11005). New XP: 105, Stat points gained: 1, Available: 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:56] info: [horseXpModel.getHorseXpHistory] Retrieved 3 XP events for horse 11005

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:56] info: [horseXpModel.addXpToHorse] Added 30 XP to horse XP Test Horse (ID: 11005). New XP: 30, Stat points gained: 0, Available: 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:56] info: [horseXpModel.addXpToHorse] Added 27 XP to horse XP Test Horse (ID: 11005). New XP: 57, Stat points gained: 0, Available: 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:56] info: [horseXpModel.addXpToHorse] Added 30 XP to horse XP Test Horse (ID: 11005). New XP: 87, Stat points gained: 0, Available: 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:56] info: [horseXpModel.addXpToHorse] Added 25 XP to horse XP Test Horse (ID: 11005). New XP: 112, Stat points gained: 1, Available: 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:56] info: [horseXpModel.allocateStatPoint] Allocated 1 stat point to speed for horse XP Test Horse (ID: 11005). New speed: 77, Remaining points: 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:56] info: [horseXpModel.getHorseXpHistory] Retrieved 4 XP events for horse 11005

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

FAIL tests/integration/documentation-system-integration.test.mjs (5.383 s)
  ‚óè Console

    console.log
      [2025-11-21 17:50:56] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:56] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:56] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:50:57] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:57] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:57] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:57] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:57] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:57] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:57] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:57] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: docintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=dcc09e44af0595888f5660352df4fd2ebc2eb0664d8cdcd251bb3ec6d6ed6591

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:50:57] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:57] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:57] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:57] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: docintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=41e1bdfa8997f91fdfe0d39783ac86ee7a8213f6e07d988efcd63737586c3784

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:50:57] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:58] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:58] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:58] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: docintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=4d17d8f8733a8d61c838732131e8e9532835ff0ffb7cf5a3cbe109015753b35f

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:50:58] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:58] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:58] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:58] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: docintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=9f7e5b039bd8bf7680409e3ab794a7413151e22494956fb9f8fb5a1fd2ac9fe1

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:50:58] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:58] warn: [auth] Invalid token for POST /endpoints from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:58] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:58] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:58] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: docintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=593818ae8df5ade9b81aac8ec44d5572dfed2b819837214adc9fb0fe7380c7ac

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:50:58] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:58] warn: [auth] Invalid token for POST /schemas from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:59] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:59] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:59] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: docintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=f1451941fad9aec2cb9554e2b2973977a19e6abb20a9820462b79a8ddf399d77

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:50:59] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:59] warn: [auth] Invalid token for POST /endpoints from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:59] warn: [auth] Invalid token for POST /schemas from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:59] warn: [auth] Invalid token for POST /generate from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:59] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:59] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:59] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: docintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=bd77e342294878aaa570f68351fa106598b55893a11b115c419aa8a0909f275a

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:50:59] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:50:59] warn: [auth] Invalid token for GET /metrics from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:00] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:00] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:00] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: docintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=f7ce715ac7f1f45212b64941493cd8076c0112584c5402383c3a982310df11fa

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:00] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:00] warn: [auth] Invalid token for GET /health from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:00] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:00] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:00] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: docintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=60f56cfda480b9443e6138c140a87e9295cbe7f746bb5649c122435152f43de2

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:00] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:00] warn: [auth] Invalid token for GET /coverage from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:00] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:00] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:00] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: docintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=18a8e78efb712491a4d9854635e351b253e7214ac331f1a0846e9f94ebefec5f

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:00] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:01] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:01] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:01] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: docintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=26f15dfd081912ccd69e234c97b46a2988af207626ef27c6202af521c9f39a50

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:01] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:01] warn: [auth] Invalid token for GET /api/test/documented from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:01] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:01] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:01] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: docintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=e1664dc1f1f730f8f9913627ddc7f4f0cd377786f6f439d63455e78601012888

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:01] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:01] warn: [auth] Missing token for POST /endpoints from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:01] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:01] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:01] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: docintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=3389b6218756bd350507fa3f99a2176959abc4662526f4e635e6e11edd04b0fd

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:01] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:01] warn: [auth] Invalid token for POST /endpoints from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

  ‚óè üìö Documentation System Integration Tests ‚Ä∫ üîç API Documentation Service Integration ‚Ä∫ should register and validate endpoint documentation

    expect(received).toBe(expected) // Object.is equality

    Expected: 201
    Received: 401

    [0m [90m 250 |[39m         [33m.[39msend(endpointData)[33m;[39m
     [90m 251 |[39m
    [31m[1m>[22m[39m[90m 252 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m201[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 253 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 254 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoBeDefined()[33m;[39m
     [90m 255 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mmethod)[33m.[39mtoBe([32m'GET'[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/integration/documentation-system-integration.test.mjs:252:31)

  ‚óè üìö Documentation System Integration Tests ‚Ä∫ üîç API Documentation Service Integration ‚Ä∫ should register and validate schema documentation

    expect(received).toBe(expected) // Object.is equality

    Expected: 201
    Received: 401

    [0m [90m 276 |[39m         [33m.[39msend(schemaData)[33m;[39m
     [90m 277 |[39m
    [31m[1m>[22m[39m[90m 278 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m201[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 279 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 280 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoBeDefined()[33m;[39m
     [90m 281 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mname)[33m.[39mtoBe([32m'TestSchema'[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/integration/documentation-system-integration.test.mjs:278:31)

  ‚óè üìö Documentation System Integration Tests ‚Ä∫ üîç API Documentation Service Integration ‚Ä∫ should generate documentation with metrics

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

    [0m [90m 308 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 309 |[39m
    [31m[1m>[22m[39m[90m 310 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 311 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 312 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mendpointsGenerated)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m 313 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mschemasGenerated)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/integration/documentation-system-integration.test.mjs:310:31)

  ‚óè üìö Documentation System Integration Tests ‚Ä∫ üìä Documentation Coverage and Health ‚Ä∫ should provide documentation metrics and coverage

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

    [0m [90m 323 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 324 |[39m
    [31m[1m>[22m[39m[90m 325 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 326 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 327 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoBeDefined()[33m;[39m
     [90m 328 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mmetrics)[33m.[39mtoBeDefined()[33m;[39m[0m

      at Object.<anonymous> (tests/integration/documentation-system-integration.test.mjs:325:31)

  ‚óè üìö Documentation System Integration Tests ‚Ä∫ üìä Documentation Coverage and Health ‚Ä∫ should provide documentation health status

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

    [0m [90m 338 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 339 |[39m
    [31m[1m>[22m[39m[90m 340 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 341 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 342 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoBeDefined()[33m;[39m
     [90m 343 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mstatus)[33m.[39mtoBeDefined()[33m;[39m[0m

      at Object.<anonymous> (tests/integration/documentation-system-integration.test.mjs:340:31)

  ‚óè üìö Documentation System Integration Tests ‚Ä∫ üìä Documentation Coverage and Health ‚Ä∫ should analyze documentation coverage by system

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

    [0m [90m 351 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 352 |[39m
    [31m[1m>[22m[39m[90m 353 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 354 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 355 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoBeDefined()[33m;[39m
     [90m 356 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39moverall)[33m.[39mtoBeDefined()[33m;[39m[0m

      at Object.<anonymous> (tests/integration/documentation-system-integration.test.mjs:353:31)

  ‚óè üìö Documentation System Integration Tests ‚Ä∫ üîó Live API Integration Validation ‚Ä∫ should validate documented endpoint response format

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

    [0m [90m 384 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 385 |[39m
    [31m[1m>[22m[39m[90m 386 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 387 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 388 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoBeDefined()[33m;[39m
     [90m 389 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoBeDefined()[33m;[39m[0m

      at Object.<anonymous> (tests/integration/documentation-system-integration.test.mjs:386:31)

  ‚óè üìö Documentation System Integration Tests ‚Ä∫ üõ°Ô∏è Documentation Security and Access ‚Ä∫ should validate documentation input data

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 401

    [0m [90m 428 |[39m         [33m.[39msend(invalidEndpointData)[33m;[39m
     [90m 429 |[39m
    [31m[1m>[22m[39m[90m 430 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m400[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 431 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m 432 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoBe([32m'Validation failed'[39m)[33m;[39m
     [90m 433 |[39m       expect(response[33m.[39mbody[33m.[39merrors)[33m.[39mtoBeDefined()[33m;[39m[0m

      at Object.<anonymous> (tests/integration/documentation-system-integration.test.mjs:430:31)

FAIL tests/integration/health-monitoring-integration.test.mjs (6.401 s)
  ‚óè Console

    console.log
      [2025-11-21 17:51:02] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:02] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:02] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:51:02] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:02] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:02] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:02] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: healthintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=f573cf22010b331f6ea44c6138657c21a948e3460164496936bcfe2e3dbb49b9

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:02] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:03] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:03] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:03] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: healthintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=44cdd4023a6752f40c1685af2d2c054a7827faac894635bce930b60d5511bc27

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:03] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:03] warn: [MemoryManager] Memory threshold alert: 890MB used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:03] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:03] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:03] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: healthintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=3ad2d69528de779b3ddf01e94cedf88c0dd8b4e0be3ee3d9aaa6d3824c0fad1e

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:03] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:03] info: [health] Health check passed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:03] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:03] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:03] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: healthintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=e1ba3f7cb5874b5d3f1abf070cacaeedcfd7c72c4e0fac86299c08f6ea2cac74

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:03] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:04] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:04] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:04] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: healthintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=3f222bdcd15c0f98ad931d7d49441bbecac65e9df3ecb8840999761bc4c69d6e

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:04] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:04] warn: [auth] Invalid token for GET /health from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:04] warn: [MemoryManager] Memory threshold alert: 884MB used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:04] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:04] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:04] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: healthintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=950e130a5637fda18a896dcac5468378de9f12c06339b09d4e629416455eb38f

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:04] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:04] warn: [auth] Invalid token for GET /health from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:04] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:04] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:04] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: healthintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=4d5f986394c24822466c325995f218d01b337c17943b29756749c2b4dd03aed8

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:04] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:04] warn: [auth] Invalid token for GET /health from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:05] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:05] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:05] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: healthintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=75bd62a31e6acbeb7de9838b13d0cfafec3de042c407db856d528154732737bf

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:05] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:05] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:05] info: [UserDocService] Built search index with 1244 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:05] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:05] warn: [MemoryManager] Memory threshold alert: 884MB used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:05] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:05] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:05] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: healthintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=daab591e9b58c0f6ef417a60b67eb3f1015115bbd58a038f4d2bf7d0197d3beb

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:05] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:05] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:05] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:05] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: healthintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=9dbe6252abb60b1c4f2e22826e113eb91e17a44582fa2d54bba60e065ef2f3ae

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:05] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:05] info: [health] Health check passed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:05] warn: [auth] Invalid token for GET /health from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:06] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:06] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:06] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: healthintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=d6fc0cd8e12c9d4d422ce3f217da51e42bf5d8a302754173ed6411cc6b05a59b

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:06] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:06] warn: [auth] Invalid token for GET /health from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:06] info: [health] Health check passed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:06] warn: [MemoryManager] Memory threshold alert: 896MB used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:06] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:06] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:06] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: healthintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=8366404f6d921e3f1062aecf40fb18d2e6d45fae8a5e5d73addbfc4939e3bfb3

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:06] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:06] info: [health] Health check passed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:06] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:06] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:06] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: healthintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=c7e510c38551a60e509bb0f7bf2daf8940853186cada2ef440086e2c3f100185

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:06] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:06] info: [health] Health check passed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:07] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:07] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:07] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: healthintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=16498f4ac75f92478906dec1612af3e6a41a8a4ee6beacb23ce473ed3c55be03

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:07] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:07] warn: [auth] Missing token for GET /health from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:07] warn: [auth] Missing token for GET /health from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:07] warn: [auth] Missing token for GET /api/test/health-status from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:07] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:07] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:07] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: healthintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=787730b7855e06285a8f9be589ed72558e4caba118dba334d7e99284150b31d8

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:07] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:07] info: [health] Health check passed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:07] warn: [MemoryManager] Memory threshold alert: 886MB used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:07] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:07] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:07] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: healthintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=f67af87b2287998d1979a6751c8a2e7ced1352e091a74c52230dee41d6068443

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:07] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:07] warn: [auth] Invalid token for GET /api/test/health-status from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:08] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:08] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:08] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: healthintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=d8377d0ad6816ee10bdfb675f96bb5a09c7f15f751858dadae62ab983e46157e

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:08] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:08] warn: [auth] Invalid token for GET /health from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:08] info: [MemoryManager] Stopping memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:08] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:08] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

  ‚óè üè• Health Monitoring Integration Tests ‚Ä∫ üß† Memory Management Health ‚Ä∫ should provide memory system health assessment

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

    [0m [90m 246 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 247 |[39m
    [31m[1m>[22m[39m[90m 248 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 249 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 250 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoBeDefined()[33m;[39m
     [90m 251 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mscore)[33m.[39mtoBeDefined()[33m;[39m[0m

      at Object.<anonymous> (tests/integration/health-monitoring-integration.test.mjs:248:31)

  ‚óè üè• Health Monitoring Integration Tests ‚Ä∫ üß† Memory Management Health ‚Ä∫ should validate memory health score ranges

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

    [0m [90m 264 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 265 |[39m
    [31m[1m>[22m[39m[90m 266 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 267 |[39m       [36mconst[39m healthData [33m=[39m response[33m.[39mbody[33m.[39mdata[33m;[39m
     [90m 268 |[39m
     [90m 269 |[39m       expect(healthData[33m.[39mscore)[33m.[39mtoBeGreaterThanOrEqual([35m0[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/integration/health-monitoring-integration.test.mjs:266:31)

  ‚óè üè• Health Monitoring Integration Tests ‚Ä∫ üìö Documentation System Health ‚Ä∫ should provide API documentation health status

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

    [0m [90m 280 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 281 |[39m
    [31m[1m>[22m[39m[90m 282 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 283 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 284 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoBeDefined()[33m;[39m
     [90m 285 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mstatus)[33m.[39mtoBeDefined()[33m;[39m[0m

      at Object.<anonymous> (tests/integration/health-monitoring-integration.test.mjs:282:31)

  ‚óè üè• Health Monitoring Integration Tests ‚Ä∫ üîó Cross-System Health Integration ‚Ä∫ should validate health across all systems

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

    [0m [90m 336 |[39m         [36mconst[39m response [33m=[39m [36mawait[39m request_builder[33m;[39m
     [90m 337 |[39m
    [31m[1m>[22m[39m[90m 338 |[39m         expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 339 |[39m         expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 340 |[39m
     [90m 341 |[39m         [90m// Validate common health response structure[39m[0m

      at Object.<anonymous> (tests/integration/health-monitoring-integration.test.mjs:338:33)

  ‚óè üè• Health Monitoring Integration Tests ‚Ä∫ üîó Cross-System Health Integration ‚Ä∫ should provide consistent health response formats

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

    [0m [90m 356 |[39m
     [90m 357 |[39m       responses[33m.[39mforEach(response [33m=>[39m {
    [31m[1m>[22m[39m[90m 358 |[39m         expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 359 |[39m         expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 360 |[39m         expect(response[33m.[39mbody)[33m.[39mtoHaveProperty([32m'success'[39m)[33m;[39m
     [90m 361 |[39m[0m

      at tests/integration/health-monitoring-integration.test.mjs:358:33
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (tests/integration/health-monitoring-integration.test.mjs:357:17)

  ‚óè üè• Health Monitoring Integration Tests ‚Ä∫ üö® Error Handling and Reporting ‚Ä∫ should handle health check errors gracefully

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

    [0m [90m 440 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 441 |[39m
    [31m[1m>[22m[39m[90m 442 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 443 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 444 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39msystemStatus)[33m.[39mtoBe([32m'operational'[39m)[33m;[39m
     [90m 445 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (tests/integration/health-monitoring-integration.test.mjs:442:31)

FAIL tests/auth.test.mjs (6.46 s)
  ‚óè Console

    console.log
      [2025-11-21 17:51:08] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:08] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:08] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:51:09] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:09] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:09] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:09] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:09] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:09] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:09] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:09] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:09] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:09] warn: [MemoryMonitoring] Memory threshold exceeded: 924MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:09] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:09] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:09] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: newuser@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=b54239f353b86dad1090af4f3f458ccc0ec2cb91fecaefcac8ac6499809504cb

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:09] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:09] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:09] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:09] warn: [MemoryMonitoring] Memory threshold exceeded: 934MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:09] warn: [Validation] Input validation failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:09] info: [POST] /api/auth/register - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:09] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:09] warn: [MemoryMonitoring] Memory threshold exceeded: 931MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:09] warn: [Validation] Input validation failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:09] info: [POST] /api/auth/register - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:09] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:09] warn: [MemoryMonitoring] Memory threshold exceeded: 927MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:09] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:09] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:09] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: duplicate@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=86618b617ff63951e4cdaccc5badef9eebd50e646030bfa915c3eba46becef53

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:09] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:09] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:09] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:09] warn: [MemoryMonitoring] Memory threshold exceeded: 926MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:09] error: [authController.register] Error registering user: User with this email or username already exists

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:51:09] error: [POST] /api/auth/register - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:51:09] error: Error User with this email or username already exists

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:51:09] info: [POST] /api/auth/register - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:09] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:09] warn: [MemoryMonitoring] Memory threshold exceeded: 928MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:10] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:10] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:10] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: logintest@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=c0d675a00772ce8940c6a748df085edb40becf7796d692e730082718732f3972

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:10] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:10] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:10] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:10] warn: [MemoryMonitoring] Memory threshold exceeded: 931MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:10] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:10] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:10] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:10] warn: [MemoryMonitoring] Memory threshold exceeded: 937MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:10] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:10] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:10] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: logintest@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=4a62b8d5d29c4f48e5d0aa1aafcd7a9408288a6a43cbbdd3b27fe8fb82a2abc8

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:10] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:10] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:10] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:10] warn: [MemoryMonitoring] Memory threshold exceeded: 937MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:10] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:51:10] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:51:10] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:51:10] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:10] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:10] warn: [MemoryMonitoring] Memory threshold exceeded: 938MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:11] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:11] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:11] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: logintest@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=64ba53c888800bea936384121eff2d3294e2ab009527908fec3feee1c1ace317

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:11] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:11] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:11] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:11] warn: [MemoryMonitoring] Memory threshold exceeded: 938MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:11] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:51:11] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:51:11] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:51:11] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:11] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:11] warn: [MemoryMonitoring] Memory threshold exceeded: 933MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:11] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:11] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:11] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: logintest@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=2bd891a797d6581f6f596d83deac7622ced6ec855e29755acb4d9137561a9558

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:11] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:11] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:11] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:11] warn: [MemoryMonitoring] Memory threshold exceeded: 935MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:11] warn: [Validation] Input validation failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:11] info: [POST] /api/auth/login - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:11] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:11] warn: [MemoryMonitoring] Memory threshold exceeded: 931MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:12] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:12] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:12] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: refreshtest@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=b29ef7d9ad6d9aec155534bc47508b4f017cc4f7ba1678e255f11b6da618b08e

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:12] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:12] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:12] info: [POST] /api/auth/refresh

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:12] warn: [MemoryMonitoring] Memory threshold exceeded: 934MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:12] warn: [Validation] Input validation failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:12] info: [POST] /api/auth/refresh - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:12] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:12] warn: [MemoryMonitoring] Memory threshold exceeded: 931MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:12] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:12] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:12] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: refreshtest@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=5e7c0f6f3aa4070c32eed28bb314d6b105077bda5753f634a1f122caa700859a

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:12] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:12] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:12] info: [POST] /api/auth/refresh

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:12] warn: [MemoryMonitoring] Memory threshold exceeded: 931MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:12] error: [authController.refreshToken] Error refreshing token: Refresh token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:51:12] error: [POST] /api/auth/refresh - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:51:12] error: Error Refresh token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:51:12] info: [POST] /api/auth/refresh - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:12] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:12] warn: [MemoryMonitoring] Memory threshold exceeded: 932MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:12] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:12] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:12] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: refreshtest@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=7adaba421b969f66de30eeaf234f2d69c295d4d373dc1ce852f6766800975cf6

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:12] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:12] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:12] info: [POST] /api/auth/refresh

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:12] warn: [MemoryMonitoring] Memory threshold exceeded: 936MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:12] warn: [Validation] Input validation failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:12] info: [POST] /api/auth/refresh - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:12] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:12] warn: [MemoryMonitoring] Memory threshold exceeded: 933MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:13] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:13] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:13] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: profiletest@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=7f0978e84e63b454bfb1f295b2042a703b6a2d480e28c48b0a787e35176ee36a

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:13] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:13] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:13] info: [GET] /api/auth/me

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:13] warn: [MemoryMonitoring] Memory threshold exceeded: 935MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:13] warn: [auth] Invalid token for GET /me from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:13] info: [GET] /api/auth/me - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:13] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:13] warn: [MemoryMonitoring] Memory threshold exceeded: 935MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:13] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:13] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:13] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: profiletest@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=57100fe25c8a1dbc85e5d08377917810aa9d9d29466b1739468027e4d745f475

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:13] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:13] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:13] info: [GET] /api/auth/me

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:13] warn: [MemoryMonitoring] Memory threshold exceeded: 937MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:13] warn: [auth] Missing token for GET /me from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:13] info: [GET] /api/auth/me - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:13] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:13] warn: [MemoryMonitoring] Memory threshold exceeded: 938MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:14] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:14] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:14] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: profiletest@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=d7a46b7aad70f577047d94f0fa46eeebb404dc907801f93be7f883a6a1998a09

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:14] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:14] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:14] info: [GET] /api/auth/me

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:14] warn: [MemoryMonitoring] Memory threshold exceeded: 939MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:14] warn: [auth] Invalid token for GET /me from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:14] info: [GET] /api/auth/me - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:14] warn: [MemoryManager] Memory threshold alert: 937MB used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:14] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:14] warn: [MemoryMonitoring] Memory threshold exceeded: 940MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:14] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:14] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:14] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: logouttest@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=fbdb174868d16a59de30d8fa661b588d018a80948287d3f60e93591ed8f538f1

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:14] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:14] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:14] info: [POST] /api/auth/logout

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:14] warn: [MemoryMonitoring] Memory threshold exceeded: 933MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:14] warn: [auth] Invalid token for POST /logout from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:14] info: [POST] /api/auth/logout - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:14] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:14] warn: [MemoryMonitoring] Memory threshold exceeded: 933MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:14] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:14] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:14] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: logouttest@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=da03db92f8e6ab8c99cf7394f2d168ca5eac42731ba244fd19572fcf54d003f7

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:14] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:14] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:14] info: [POST] /api/auth/logout

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:14] warn: [MemoryMonitoring] Memory threshold exceeded: 933MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:14] warn: [auth] Missing token for POST /logout from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:14] info: [POST] /api/auth/logout - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

  ‚óè üîê INTEGRATION: Authentication System - User Registration & Session Management ‚Ä∫ POST /api/auth/register ‚Ä∫ should register a new user and player successfully

    expect(received).toBe(expected) // Object.is equality

    Expected: "User registered successfully"
    Received: "User registered successfully. Please check your email to verify your account."

    [0m [90m 121 |[39m       [36mconst[39m response [33m=[39m [36mawait[39m request(app)[33m.[39mpost([32m'/api/auth/register'[39m)[33m.[39msend(userData)[33m.[39mexpect([35m201[39m)[33m;[39m
     [90m 122 |[39m       expect(response[33m.[39mbody[33m.[39mstatus)[33m.[39mtoBe([32m'success'[39m)[33m;[39m [90m// Check for status field[39m
    [31m[1m>[22m[39m[90m 123 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoBe([32m'User registered successfully'[39m)[33m;[39m
     [90m     |[39m                                     [31m[1m^[22m[39m
     [90m 124 |[39m
     [90m 125 |[39m       [90m// User details assertions[39m
     [90m 126 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39muser[33m.[39memail)[33m.[39mtoBe(userData[33m.[39memail)[33m;[39m[0m

      at Object.<anonymous> (tests/auth.test.mjs:123:37)

  ‚óè üîê INTEGRATION: Authentication System - User Registration & Session Management ‚Ä∫ POST /api/auth/login ‚Ä∫ should login successfully with valid credentials

    expect(received).toBeDefined()

    Received: undefined

    [0m [90m 209 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoBe([32m'Login successful'[39m)[33m;[39m
     [90m 210 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39muser[33m.[39memail)[33m.[39mtoBe(loginData[33m.[39memail)[33m;[39m
    [31m[1m>[22m[39m[90m 211 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mtoken)[33m.[39mtoBeDefined()[33m;[39m
     [90m     |[39m                                        [31m[1m^[22m[39m
     [90m 212 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mrefreshToken)[33m.[39mtoBeDefined()[33m;[39m
     [90m 213 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39muser[33m.[39mpassword)[33m.[39mtoBeUndefined()[33m;[39m
     [90m 214 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (tests/auth.test.mjs:211:40)

  ‚óè üîê INTEGRATION: Authentication System - User Registration & Session Management ‚Ä∫ POST /api/auth/login ‚Ä∫ should reject login with invalid email

    expect(received).toBe(expected) // Object.is equality

    Expected: "Invalid email or password"
    Received: "Invalid credentials"

    [0m [90m 222 |[39m
     [90m 223 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 224 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoBe([32m'Invalid email or password'[39m)[33m;[39m
     [90m     |[39m                                     [31m[1m^[22m[39m
     [90m 225 |[39m     })[33m;[39m
     [90m 226 |[39m
     [90m 227 |[39m     it([32m'should reject login with invalid password'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.<anonymous> (tests/auth.test.mjs:224:37)

  ‚óè üîê INTEGRATION: Authentication System - User Registration & Session Management ‚Ä∫ POST /api/auth/login ‚Ä∫ should reject login with invalid password

    expect(received).toBe(expected) // Object.is equality

    Expected: "Invalid email or password"
    Received: "Invalid credentials"

    [0m [90m 234 |[39m
     [90m 235 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 236 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoBe([32m'Invalid email or password'[39m)[33m;[39m
     [90m     |[39m                                     [31m[1m^[22m[39m
     [90m 237 |[39m     })[33m;[39m
     [90m 238 |[39m
     [90m 239 |[39m     it([32m'should reject login with malformed email'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.<anonymous> (tests/auth.test.mjs:236:37)

  ‚óè üîê INTEGRATION: Authentication System - User Registration & Session Management ‚Ä∫ POST /api/auth/refresh ‚Ä∫ should refresh token successfully with valid refresh token

    expected 200 "OK", got 400 "Bad Request"

    [0m [90m 269 |[39m         [33m.[39mpost([32m'/api/auth/refresh'[39m)
     [90m 270 |[39m         [33m.[39msend({ refreshToken[33m:[39m refreshTokenValue })
    [31m[1m>[22m[39m[90m 271 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 272 |[39m       expect(response[33m.[39mbody[33m.[39mstatus)[33m.[39mtoBe([32m'success'[39m)[33m;[39m
     [90m 273 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoBe([32m'Token refreshed successfully'[39m)[33m;[39m
     [90m 274 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mtoken)[33m.[39mtoBeDefined()[33m;[39m[0m

      at Object.<anonymous> (tests/auth.test.mjs:271:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè üîê INTEGRATION: Authentication System - User Registration & Session Management ‚Ä∫ POST /api/auth/refresh ‚Ä∫ should reject refresh with invalid token

    expected 401 "Unauthorized", got 400 "Bad Request"

    [0m [90m 277 |[39m
     [90m 278 |[39m     it([32m'should reject refresh with invalid token'[39m[33m,[39m [36masync[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 279 |[39m       [36mconst[39m response [33m=[39m [36mawait[39m request(app)[33m.[39mpost([32m'/api/auth/refresh'[39m)[33m.[39msend({ refreshToken[33m:[39m [32m'invalid-token'[39m })[33m.[39mexpect([35m401[39m)[33m;[39m
     [90m     |[39m                                                                                                             [31m[1m^[22m[39m
     [90m 280 |[39m
     [90m 281 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m 282 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoBe([32m'Invalid or expired refresh token'[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/auth.test.mjs:279:109)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè üîê INTEGRATION: Authentication System - User Registration & Session Management ‚Ä∫ GET /api/auth/me ‚Ä∫ should get user profile successfully with valid token

    expected 200 "OK", got 401 "Unauthorized"

    [0m [90m 310 |[39m
     [90m 311 |[39m     it([32m'should get user profile successfully with valid token'[39m[33m,[39m [36masync[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 312 |[39m       [36mconst[39m response [33m=[39m [36mawait[39m request(app)[33m.[39m[36mget[39m([32m'/api/auth/me'[39m)[33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m                                                                                                           [31m[1m^[22m[39m
     [90m 313 |[39m
     [90m 314 |[39m       expect(response[33m.[39mbody[33m.[39mstatus)[33m.[39mtoBe([32m'success'[39m)[33m;[39m
     [90m 315 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39muser)[33m.[39mtoBeDefined()[33m;[39m[0m

      at Object.<anonymous> (tests/auth.test.mjs:312:107)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè üîê INTEGRATION: Authentication System - User Registration & Session Management ‚Ä∫ POST /api/auth/logout ‚Ä∫ should logout successfully with valid token

    expected 200 "OK", got 401 "Unauthorized"

    [0m [90m 354 |[39m         [33m.[39mpost([32m'/api/auth/logout'[39m)
     [90m 355 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)
    [31m[1m>[22m[39m[90m 356 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 357 |[39m
     [90m 358 |[39m       expect(response[33m.[39mbody[33m.[39mstatus)[33m.[39mtoBe([32m'success'[39m)[33m;[39m
     [90m 359 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoBe([32m'Logout successful'[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/auth.test.mjs:356:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

FAIL tests/integration/api-response-integration.test.mjs (7.664 s)
  ‚óè Console

    console.log
      [2025-11-21 17:51:15] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:15] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:15] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:51:16] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:16] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:16] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=31e608f46ca16f20d107db53021f44e4b3f5e83e64acfbca1e865ab0c7e7b71c

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:16] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:16] warn: [auth] Invalid token for GET /api/test/success from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:16] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:16] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:16] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=54ce992044a95682464907d5c066d776180c301d4bd8e0cf8ac14cd4d149c1f5

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:16] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:16] warn: [auth] Invalid token for GET /api/test/error from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:16] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:16] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:16] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=8a4a9c646e77a5ac7fcf9ac3adf327f0a1448381b2a51730ed96115c8276ceae

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:16] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:16] warn: [auth] Invalid token for GET /api/test/not-found from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:17] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:17] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:17] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=c686deb81b9f5287f6b37ace1985de105495ede08b840c4b823fa8abc27af6f7

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:17] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:17] warn: [auth] Invalid token for GET /api/test/validation-error from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:17] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:17] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:17] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=fcf096780e0578a108632ab5d2114de6db832ba29f2c62ece81c123c5ffa59ff

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:17] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:17] warn: [auth] Invalid token for GET /api/test/paginated from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:17] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:17] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:17] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=4a86a37ace9a87ab9c7042e34bd14ad1926f2fb882dc025f965130e8c637068c

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:17] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:17] warn: [auth] Invalid token for GET /api/test/paginated from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:18] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:18] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:18] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=74d8b7dcf6bd2407b46b440a94b7c5f4047e35000dcc1575ea2f8cb764a48654

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:18] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:18] warn: [auth] Invalid token for GET /api/test/success from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:18] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:18] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:18] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=4cefc70b19a857ee038ce041a64e3a8b7ac30a72eb20baa0cef1110ea5ebb22b

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:18] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:18] warn: [auth] Invalid token for GET /api/test/large-data from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:18] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:18] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:18] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=8467678d6fc6ceaaa31950c464e8c7ef6b64672fe3c385a66c999a3c60796c03

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:18] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:18] warn: [auth] Invalid token for GET /api/test/field-selection from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:19] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:19] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:19] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=eeedcda7a14f1721bf6f08fb814b88264515d5d388cb4e61dd5b61b197a3490d

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:19] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:19] warn: [auth] Invalid token for GET /api/test/field-selection from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:19] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:19] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:19] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=57271fe56d6f7cbb05f5f123b9b49937ea59ab64aa5e707224b3e6bb0cc4700b

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:19] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:19] warn: [auth] Invalid token for GET /api/test/etag from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:19] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:20] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:20] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=b6df448b17d6b2da144f4235b052f6a31238d683122ab83c555b99359885b208

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:20] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:20] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:20] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:20] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:20] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=3a4c7ca806dde327bd799b277e66675bf9cd68324e95a65f450001c24dcdbe87

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:20] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:20] info: [health] Health check passed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:21] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:21] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:21] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=f1781e5456537f9150f12ed3b3b04585b07f7b1b8fd3c050d841913573f12046

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:21] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:21] warn: [auth] Missing token for GET /api/test/success from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:21] warn: [auth] Missing token for GET /api/test/error from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:21] warn: [auth] Missing token for GET /api/test/large-data from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:21] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:21] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:21] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=94ac46f8e6e4979661424d5a54af5df65d66dfae2bc625423fe7e23f82d2c420

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:21] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:21] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:21] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:21] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=9e25f965d2aa91c1898adafeca724069a407798f0a8812e21d8f053b6f08a09e

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:21] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:21] warn: [Validation] Input validation failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:22] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:22] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:22] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=30f98bced9f513ceadbb9402b580fa601324f202a364ce418030cae94401d117

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:22] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:22] warn: [auth] Invalid token for GET /api/test/success from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:22] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:22] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:22] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=bd2e8b85ac66e71047b76fb7c610b9728e7a2b4b2a6eb43126729c40b8171221

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:22] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:22] warn: [auth] Invalid token for GET /api/test/large-data from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

  ‚óè üîÑ API Response Integration Tests ‚Ä∫ üìã Response Format Standardization ‚Ä∫ should provide consistent success response format

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

    [0m [90m 243 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 244 |[39m
    [31m[1m>[22m[39m[90m 245 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 246 |[39m       expect(response[33m.[39mbody)[33m.[39mtoHaveProperty([32m'success'[39m[33m,[39m [36mtrue[39m)[33m;[39m
     [90m 247 |[39m       expect(response[33m.[39mbody)[33m.[39mtoHaveProperty([32m'message'[39m)[33m;[39m
     [90m 248 |[39m       expect(response[33m.[39mbody)[33m.[39mtoHaveProperty([32m'data'[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/integration/api-response-integration.test.mjs:245:31)

  ‚óè üîÑ API Response Integration Tests ‚Ä∫ üìã Response Format Standardization ‚Ä∫ should provide consistent error response format

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 401

    [0m [90m 256 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 257 |[39m
    [31m[1m>[22m[39m[90m 258 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m400[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 259 |[39m       expect(response[33m.[39mbody)[33m.[39mtoHaveProperty([32m'success'[39m[33m,[39m [36mfalse[39m)[33m;[39m
     [90m 260 |[39m       expect(response[33m.[39mbody)[33m.[39mtoHaveProperty([32m'message'[39m)[33m;[39m
     [90m 261 |[39m       expect(response[33m.[39mbody)[33m.[39mtoHaveProperty([32m'data'[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/integration/api-response-integration.test.mjs:258:31)

  ‚óè üîÑ API Response Integration Tests ‚Ä∫ üìã Response Format Standardization ‚Ä∫ should provide consistent not found response format

    expect(received).toBe(expected) // Object.is equality

    Expected: 404
    Received: 401

    [0m [90m 269 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 270 |[39m
    [31m[1m>[22m[39m[90m 271 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m404[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 272 |[39m       expect(response[33m.[39mbody)[33m.[39mtoHaveProperty([32m'success'[39m[33m,[39m [36mfalse[39m)[33m;[39m
     [90m 273 |[39m       expect(response[33m.[39mbody)[33m.[39mtoHaveProperty([32m'message'[39m[33m,[39m [32m'Test resource not found'[39m)[33m;[39m
     [90m 274 |[39m       expect(response[33m.[39mbody)[33m.[39mtoHaveProperty([32m'timestamp'[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/integration/api-response-integration.test.mjs:271:31)

  ‚óè üîÑ API Response Integration Tests ‚Ä∫ üìã Response Format Standardization ‚Ä∫ should provide consistent validation error response format

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 401

    [0m [90m 280 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 281 |[39m
    [31m[1m>[22m[39m[90m 282 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m400[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 283 |[39m       expect(response[33m.[39mbody)[33m.[39mtoHaveProperty([32m'success'[39m[33m,[39m [36mfalse[39m)[33m;[39m
     [90m 284 |[39m       expect(response[33m.[39mbody)[33m.[39mtoHaveProperty([32m'message'[39m[33m,[39m [32m'Test validation failed'[39m)[33m;[39m
     [90m 285 |[39m       expect(response[33m.[39mbody)[33m.[39mtoHaveProperty([32m'meta'[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/integration/api-response-integration.test.mjs:282:31)

  ‚óè üîÑ API Response Integration Tests ‚Ä∫ üìä Pagination Response Validation ‚Ä∫ should provide consistent paginated response format

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

    [0m [90m 295 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 296 |[39m
    [31m[1m>[22m[39m[90m 297 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 298 |[39m       expect(response[33m.[39mbody)[33m.[39mtoHaveProperty([32m'success'[39m[33m,[39m [36mtrue[39m)[33m;[39m
     [90m 299 |[39m       expect(response[33m.[39mbody)[33m.[39mtoHaveProperty([32m'message'[39m)[33m;[39m
     [90m 300 |[39m       expect(response[33m.[39mbody)[33m.[39mtoHaveProperty([32m'data'[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/integration/api-response-integration.test.mjs:297:31)

  ‚óè üîÑ API Response Integration Tests ‚Ä∫ üìä Pagination Response Validation ‚Ä∫ should handle pagination edge cases correctly

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

    [0m [90m 316 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 317 |[39m
    [31m[1m>[22m[39m[90m 318 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 319 |[39m       [36mconst[39m { pagination } [33m=[39m response[33m.[39mbody[33m.[39mmeta[33m;[39m
     [90m 320 |[39m       expect(pagination[33m.[39mpage)[33m.[39mtoBe([35m20[39m)[33m;[39m
     [90m 321 |[39m       expect(pagination[33m.[39mhasNext)[33m.[39mtoBe([36mfalse[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/integration/api-response-integration.test.mjs:318:31)

  ‚óè üîÑ API Response Integration Tests ‚Ä∫ ‚ö° Performance Monitoring Integration ‚Ä∫ should include performance headers in responses

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

    [0m [90m 330 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 331 |[39m
    [31m[1m>[22m[39m[90m 332 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 333 |[39m       expect(response[33m.[39mheaders[[32m'x-processing-time'[39m])[33m.[39mtoBeDefined()[33m;[39m
     [90m 334 |[39m       expect(response[33m.[39mheaders[[32m'x-response-time'[39m])[33m.[39mtoBeDefined()[33m;[39m
     [90m 335 |[39m       expect(response[33m.[39mheaders[[32m'x-timestamp'[39m])[33m.[39mtoBeDefined()[33m;[39m[0m

      at Object.<anonymous> (tests/integration/api-response-integration.test.mjs:332:31)

  ‚óè üîÑ API Response Integration Tests ‚Ä∫ ‚ö° Performance Monitoring Integration ‚Ä∫ should monitor large response performance

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

    [0m [90m 341 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 342 |[39m
    [31m[1m>[22m[39m[90m 343 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 344 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoHaveLength([35m1000[39m)[33m;[39m
     [90m 345 |[39m       expect(response[33m.[39mheaders[[32m'x-processing-time'[39m])[33m.[39mtoBeDefined()[33m;[39m
     [90m 346 |[39m       expect(response[33m.[39mheaders[[32m'x-response-size'[39m])[33m.[39mtoBeDefined()[33m;[39m[0m

      at Object.<anonymous> (tests/integration/api-response-integration.test.mjs:343:31)

  ‚óè üîÑ API Response Integration Tests ‚Ä∫ üîß Response Optimization Features ‚Ä∫ should support field selection optimization

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

    [0m [90m 357 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 358 |[39m
    [31m[1m>[22m[39m[90m 359 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 360 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoHaveProperty([32m'id'[39m)[33m;[39m
     [90m 361 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoHaveProperty([32m'name'[39m)[33m;[39m
     [90m 362 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mnot[33m.[39mtoHaveProperty([32m'description'[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/integration/api-response-integration.test.mjs:359:31)

  ‚óè üîÑ API Response Integration Tests ‚Ä∫ üîß Response Optimization Features ‚Ä∫ should support field exclusion optimization

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

    [0m [90m 369 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 370 |[39m
    [31m[1m>[22m[39m[90m 371 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 372 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoHaveProperty([32m'id'[39m)[33m;[39m
     [90m 373 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoHaveProperty([32m'name'[39m)[33m;[39m
     [90m 374 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoHaveProperty([32m'description'[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/integration/api-response-integration.test.mjs:371:31)

  ‚óè üîÑ API Response Integration Tests ‚Ä∫ üîß Response Optimization Features ‚Ä∫ should generate and validate ETags correctly

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

    [0m [90m 383 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 384 |[39m
    [31m[1m>[22m[39m[90m 385 |[39m       expect(response1[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 386 |[39m       expect(response1[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 387 |[39m       expect(response1[33m.[39mbody[33m.[39mdata)[33m.[39mtoBeDefined()[33m;[39m
     [90m 388 |[39m[0m

      at Object.<anonymous> (tests/integration/api-response-integration.test.mjs:385:32)

  ‚óè üîÑ API Response Integration Tests ‚Ä∫ üîó Cross-System Response Consistency ‚Ä∫ should maintain consistent response format across auth endpoints

    expect(received).toHaveProperty(path)

    Expected path: "token"
    Received path: []

    Received value: {"user": {"email": "apiresponseintegration@test.com", "id": "b5189076-fec6-483f-a724-d10313117630", "username": "apiresponseintegrationuser"}}

    [0m [90m 422 |[39m       expect(loginResponse[33m.[39mbody)[33m.[39mtoHaveProperty([32m'data'[39m)[33m;[39m
     [90m 423 |[39m       [90m// Auth endpoints may not have timestamp in root, check for consistent structure[39m
    [31m[1m>[22m[39m[90m 424 |[39m       expect(loginResponse[33m.[39mbody[33m.[39mdata)[33m.[39mtoHaveProperty([32m'token'[39m)[33m;[39m
     [90m     |[39m                                       [31m[1m^[22m[39m
     [90m 425 |[39m       expect(loginResponse[33m.[39mbody[33m.[39mdata)[33m.[39mtoHaveProperty([32m'user'[39m)[33m;[39m
     [90m 426 |[39m     })[33m;[39m
     [90m 427 |[39m[0m

      at Object.<anonymous> (tests/integration/api-response-integration.test.mjs:424:39)

  ‚óè üîÑ API Response Integration Tests ‚Ä∫ üìà Response Performance Benchmarking ‚Ä∫ should meet performance benchmarks for simple responses

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

    [0m [90m 504 |[39m       [36mconst[39m responseTime [33m=[39m [33mDate[39m[33m.[39mnow() [33m-[39m startTime[33m;[39m
     [90m 505 |[39m
    [31m[1m>[22m[39m[90m 506 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 507 |[39m       expect(responseTime)[33m.[39mtoBeLessThan([35m1000[39m)[33m;[39m [90m// Should respond within 1 second[39m
     [90m 508 |[39m     })[33m;[39m
     [90m 509 |[39m[0m

      at Object.<anonymous> (tests/integration/api-response-integration.test.mjs:506:31)

  ‚óè üîÑ API Response Integration Tests ‚Ä∫ üìà Response Performance Benchmarking ‚Ä∫ should meet performance benchmarks for large responses

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

    [0m [90m 517 |[39m       [36mconst[39m responseTime [33m=[39m [33mDate[39m[33m.[39mnow() [33m-[39m startTime[33m;[39m
     [90m 518 |[39m
    [31m[1m>[22m[39m[90m 519 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 520 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoHaveLength([35m1000[39m)[33m;[39m
     [90m 521 |[39m       expect(responseTime)[33m.[39mtoBeLessThan([35m5000[39m)[33m;[39m [90m// Should respond within 5 seconds[39m
     [90m 522 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (tests/integration/api-response-integration.test.mjs:519:31)

FAIL tests/integration/memory-management-integration.test.mjs (5.963 s)
  ‚óè Console

    console.log
      [2025-11-21 17:51:23] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:23] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:23] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:51:23] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:23] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:23] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:23] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: memoryintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=daa15d702cffc405322977f5a5970224acbf462ecfb7d53052443ebd1c1becb4

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:23] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:23] warn: [auth] Invalid token for GET /status from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:24] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:24] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:24] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: memoryintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=57a6c8a95dc3c320eaefe9cc4b966d7f61900c47ff666d281837e91d99f6c0da

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:24] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:24] warn: [auth] Invalid token for GET /metrics from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:24] warn: [MemoryManager] Memory threshold alert: 981MB used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:24] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:24] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:24] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: memoryintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=f71fa25bfd0df227ac8a21e14e7346b424cd543e93a95c1edd170c0e6686376c

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:24] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:24] warn: [auth] Invalid token for GET /status from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:25] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:25] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:25] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: memoryintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=5ae1c5065accf8d7172474d578a9f15728f67a518d5167fb5d808a22be61b3a4

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:25] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:25] warn: [auth] Invalid token for GET /resources from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:25] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:25] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:25] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: memoryintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=2d2f99fbe34b69eab494284006267440d2f4df2389724351b8cf9e37c8773478

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:25] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:25] warn: [auth] Invalid token for GET /resources from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:25] warn: [MemoryManager] Memory threshold alert: 982MB used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:25] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:25] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:25] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: memoryintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=c743f173c2fc35185fad0320ae180ec1e205ce584d1de297c43ef5ca31ec287e

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:25] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:25] warn: [auth] Invalid token for POST /gc from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:26] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:26] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:26] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: memoryintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=393ca15923fda2a73d0e4318995a31e7c5fc8020597c09e0ae721efe1e44d95b

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:26] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:26] warn: [auth] Invalid token for POST /gc from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:26] warn: [MemoryManager] Memory threshold alert: 985MB used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:26] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:26] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:26] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: memoryintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=b7a1298de224019f54c24152eb12e4719e1749b5573ff5d9f858fc7e8e810541

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:26] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:26] warn: [auth] Invalid token for GET /alerts from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:27] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:27] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:27] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: memoryintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=80a1592b9123d40c72894e36de2163006f7db2169ea99915aeeb487a65932487

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:27] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:27] warn: [auth] Invalid token for GET /alerts from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:27] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:27] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:27] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: memoryintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=07061c703736e073f7cd2ee141c1d935767832ec070c8c78942d8229c920394a

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:27] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:27] warn: [MemoryManager] Memory threshold alert: 991MB used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:27] warn: [auth] Missing token for GET /status from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:27] warn: [auth] Missing token for GET /metrics from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:27] warn: [auth] Missing token for GET /resources from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:27] warn: [auth] Missing token for GET /alerts from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:27] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:27] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:27] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: memoryintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=17b5994313f724cdcd1f8a1c6b45262752ce99206cbe67b4e4a0d1f990e2c98c

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:27] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:27] warn: [auth] Invalid token for POST /gc from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:28] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:28] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:28] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: memoryintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=986bdd474de80e403c25d0d8c46439bac6c1a8de3f7c6d0e604f8279a3142307

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:28] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:28] warn: [MemoryManager] Memory threshold alert: 989MB used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:28] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:28] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:28] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: memoryintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=6678f02ebc97e7b256da515c4e2d08f2181229b82bdfff983b6fc76cfdaaf16b

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:28] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:28] info: [MemoryManager] Stopping memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:28] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:28] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

  ‚óè üß† Memory Management Integration Tests ‚Ä∫ üîç Memory Monitoring Integration ‚Ä∫ should monitor memory usage and provide reports

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

    [0m [90m 198 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 199 |[39m
    [31m[1m>[22m[39m[90m 200 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 201 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 202 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoBeDefined()[33m;[39m
     [90m 203 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mmemory)[33m.[39mtoBeDefined()[33m;[39m[0m

      at Object.<anonymous> (tests/integration/memory-management-integration.test.mjs:200:31)

  ‚óè üß† Memory Management Integration Tests ‚Ä∫ üîç Memory Monitoring Integration ‚Ä∫ should provide detailed memory metrics

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

    [0m [90m 214 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 215 |[39m
    [31m[1m>[22m[39m[90m 216 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 217 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 218 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoBeDefined()[33m;[39m
     [90m 219 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39manalytics)[33m.[39mtoBeDefined()[33m;[39m[0m

      at Object.<anonymous> (tests/integration/memory-management-integration.test.mjs:216:31)

  ‚óè üß† Memory Management Integration Tests ‚Ä∫ üîç Memory Monitoring Integration ‚Ä∫ should track memory usage during load operations

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

    [0m [90m 228 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 229 |[39m
    [31m[1m>[22m[39m[90m 230 |[39m       expect(initialResponse[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                                      [31m[1m^[22m[39m
     [90m 231 |[39m       [36mconst[39m initialMemory [33m=[39m initialResponse[33m.[39mbody[33m.[39mdata[33m.[39mmemory[33m.[39mcurrent[33m.[39mheapUsed[33m;[39m
     [90m 232 |[39m
     [90m 233 |[39m       [90m// Create memory load[39m[0m

      at Object.<anonymous> (tests/integration/memory-management-integration.test.mjs:230:38)

  ‚óè üß† Memory Management Integration Tests ‚Ä∫ üîß Resource Management Integration ‚Ä∫ should track and cleanup resources correctly

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

    [0m [90m 266 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 267 |[39m
    [31m[1m>[22m[39m[90m 268 |[39m       expect(initialResponse[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                                      [31m[1m^[22m[39m
     [90m 269 |[39m       expect(initialResponse[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 270 |[39m       expect(initialResponse[33m.[39mbody[33m.[39mdata[33m.[39mcurrent)[33m.[39mtoBeDefined()[33m;[39m
     [90m 271 |[39m[0m

      at Object.<anonymous> (tests/integration/memory-management-integration.test.mjs:268:38)

  ‚óè üß† Memory Management Integration Tests ‚Ä∫ üîß Resource Management Integration ‚Ä∫ should provide resource analytics and counts

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

    [0m [90m 297 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 298 |[39m
    [31m[1m>[22m[39m[90m 299 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 300 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 301 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoBeDefined()[33m;[39m
     [90m 302 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mcurrent)[33m.[39mtoBeDefined()[33m;[39m[0m

      at Object.<anonymous> (tests/integration/memory-management-integration.test.mjs:299:31)

  ‚óè üß† Memory Management Integration Tests ‚Ä∫ üóëÔ∏è Garbage Collection Integration ‚Ä∫ should trigger garbage collection when available

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 401

    [0m [90m 320 |[39m         expect(response[33m.[39mbody[33m.[39mdata[33m.[39mgcTriggered)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 321 |[39m       } [36melse[39m {
    [31m[1m>[22m[39m[90m 322 |[39m         expect(response[33m.[39mstatus)[33m.[39mtoBe([35m400[39m)[33m;[39m
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 323 |[39m         expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m 324 |[39m         expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoContain([32m'Garbage collection not exposed'[39m)[33m;[39m
     [90m 325 |[39m       }[0m

      at Object.<anonymous> (tests/integration/memory-management-integration.test.mjs:322:33)

  ‚óè üß† Memory Management Integration Tests ‚Ä∫ üóëÔ∏è Garbage Collection Integration ‚Ä∫ should handle GC unavailability gracefully

    expect(received).toContain(expected) // indexOf

    Expected value: 401
    Received array: [200, 400]

    [0m [90m 334 |[39m
     [90m 335 |[39m       [90m// Should either succeed (if GC available) or fail gracefully[39m
    [31m[1m>[22m[39m[90m 336 |[39m       expect([[35m200[39m[33m,[39m [35m400[39m])[33m.[39mtoContain(response[33m.[39mstatus)[33m;[39m
     [90m     |[39m                          [31m[1m^[22m[39m
     [90m 337 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBeDefined()[33m;[39m
     [90m 338 |[39m     })[33m;[39m
     [90m 339 |[39m   })[33m;[39m[0m

      at Object.<anonymous> (tests/integration/memory-management-integration.test.mjs:336:26)

  ‚óè üß† Memory Management Integration Tests ‚Ä∫ üö® Memory Alert System Integration ‚Ä∫ should provide memory alerts and warnings

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

    [0m [90m 345 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 346 |[39m
    [31m[1m>[22m[39m[90m 347 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 348 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 349 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoBeDefined()[33m;[39m
     [90m 350 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39malerts)[33m.[39mtoBeDefined()[33m;[39m[0m

      at Object.<anonymous> (tests/integration/memory-management-integration.test.mjs:347:31)

  ‚óè üß† Memory Management Integration Tests ‚Ä∫ üö® Memory Alert System Integration ‚Ä∫ should filter alerts by severity

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

    [0m [90m 358 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 359 |[39m
    [31m[1m>[22m[39m[90m 360 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 361 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 362 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39malerts)[33m.[39mtoBeDefined()[33m;[39m
     [90m 363 |[39m       expect([33mArray[39m[33m.[39misArray(response[33m.[39mbody[33m.[39mdata[33m.[39malerts))[33m.[39mtoBe([36mtrue[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/integration/memory-management-integration.test.mjs:360:31)

  ‚óè üß† Memory Management Integration Tests ‚Ä∫ üîí Memory Management Security ‚Ä∫ should validate input for memory operations

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 401

    [0m [90m 389 |[39m         [33m.[39msend({ force[33m:[39m [32m'invalid'[39m })[33m;[39m
     [90m 390 |[39m
    [31m[1m>[22m[39m[90m 391 |[39m       expect(invalidGcRequest[33m.[39mstatus)[33m.[39mtoBe([35m400[39m)[33m;[39m
     [90m     |[39m                                       [31m[1m^[22m[39m
     [90m 392 |[39m       expect(invalidGcRequest[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m 393 |[39m       expect(invalidGcRequest[33m.[39mbody[33m.[39mmessage)[33m.[39mtoBe([32m'Validation failed'[39m)[33m;[39m
     [90m 394 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (tests/integration/memory-management-integration.test.mjs:391:39)

FAIL tests/integration/advancedBreedingGeneticsAPI.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:51:29] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:29] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:29] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:51:29] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:29] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:29] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:29] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:29] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:29] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:29] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:29] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:29] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:29] warn: [MemoryMonitoring] Memory threshold exceeded: 1030MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:29] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:29] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:29] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: genetics@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=de49afadc8e09d2e7490e9169f0ecc9d2f02e8eb775144772359f883713c9836

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:29] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:29] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:29] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:29] warn: [MemoryMonitoring] Memory threshold exceeded: 1032MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1029MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1028MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1027MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1023MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1026MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1025MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1025MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1021MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1023MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1023MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1023MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1035MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1023MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1024MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1024MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1036MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1036MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1031MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1031MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1027MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [GET] /api/breeding/lineage-analysis/99999/99998

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1029MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] warn: [auth] Invalid token for GET /breeding/lineage-analysis/99999/99998 from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [GET] /api/breeding/lineage-analysis/99999/99998 - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1029MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1028MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1027MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1039MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1027MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1027MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1027MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1039MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:30] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1039MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1039MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1038MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1034MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1036MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1034MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1034MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1030MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] info: [GET] /api/genetics/diversity-report/b9459665-9b7a-4aa2-95e1-0bbd4d8fc1ee

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1029MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] warn: [auth] Invalid token for GET /genetics/diversity-report/b9459665-9b7a-4aa2-95e1-0bbd4d8fc1ee from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] info: [GET] /api/genetics/diversity-report/b9459665-9b7a-4aa2-95e1-0bbd4d8fc1ee - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1029MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1030MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1030MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1041MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1042MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1041MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1040MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1036MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1037MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1036MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1035MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1031MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] info: [POST] /api/breeding/genetic-probability

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1032MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] warn: [auth] Invalid token for POST /breeding/genetic-probability from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] info: [POST] /api/breeding/genetic-probability - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1032MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1032MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1033MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1044MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1044MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: other@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=93b00bdf4b5b0594f4aaae8c97ec9578482afb79c6b95d9c72ba1ff6cc430de5

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:31] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1041MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:32] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:32] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

  ‚óè üß¨ Advanced Breeding Genetics API Integration ‚Ä∫ üéØ Enhanced Genetic Probability API ‚Ä∫ POST /api/breeding/genetic-probability should calculate breeding probabilities

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 131 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)
     [90m 132 |[39m         [33m.[39msend({
    [31m[1m>[22m[39m[90m 133 |[39m           stallionId[33m:[39m testStallion[33m.[39mdata[33m.[39mid[33m,[39m
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 134 |[39m           mareId[33m:[39m testMare[33m.[39mdata[33m.[39mid[33m,[39m
     [90m 135 |[39m           includeLineage[33m:[39m [36mtrue[39m[33m,[39m
     [90m 136 |[39m         })[33m;[39m[0m

      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:133:41)

  ‚óè üß¨ Advanced Breeding Genetics API Integration ‚Ä∫ üéØ Enhanced Genetic Probability API ‚Ä∫ POST /api/breeding/genetic-probability should calculate breeding probabilities

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 112 |[39m     [36mfor[39m ([36mconst[39m horse [36mof[39m testPopulation) {
     [90m 113 |[39m       [36mawait[39m request(app)
    [31m[1m>[22m[39m[90m 114 |[39m         [33m.[39m[36mdelete[39m([32m`/api/horses/${horse.id}`[39m)
     [90m     |[39m                                      [31m[1m^[22m[39m
     [90m 115 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 116 |[39m     }
     [90m 117 |[39m     testPopulation [33m=[39m [][33m;[39m[0m

      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:114:38)

  ‚óè üß¨ Advanced Breeding Genetics API Integration ‚Ä∫ üéØ Enhanced Genetic Probability API ‚Ä∫ POST /api/breeding/genetic-probability should handle invalid horse IDs

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 160 |[39m         [33m.[39msend({
     [90m 161 |[39m           stallionId[33m:[39m [35m99999[39m[33m,[39m
    [31m[1m>[22m[39m[90m 162 |[39m           mareId[33m:[39m testMare[33m.[39mdata[33m.[39mid[33m,[39m
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 163 |[39m         })[33m;[39m
     [90m 164 |[39m
     [90m 165 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m404[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:162:33)

  ‚óè üß¨ Advanced Breeding Genetics API Integration ‚Ä∫ üéØ Enhanced Genetic Probability API ‚Ä∫ POST /api/breeding/genetic-probability should handle invalid horse IDs

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 112 |[39m     [36mfor[39m ([36mconst[39m horse [36mof[39m testPopulation) {
     [90m 113 |[39m       [36mawait[39m request(app)
    [31m[1m>[22m[39m[90m 114 |[39m         [33m.[39m[36mdelete[39m([32m`/api/horses/${horse.id}`[39m)
     [90m     |[39m                                      [31m[1m^[22m[39m
     [90m 115 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 116 |[39m     }
     [90m 117 |[39m     testPopulation [33m=[39m [][33m;[39m[0m

      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:114:38)

  ‚óè üß¨ Advanced Breeding Genetics API Integration ‚Ä∫ üéØ Enhanced Genetic Probability API ‚Ä∫ POST /api/breeding/genetic-probability should require authentication

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 172 |[39m         [33m.[39mpost([32m'/api/breeding/genetic-probability'[39m)
     [90m 173 |[39m         [33m.[39msend({
    [31m[1m>[22m[39m[90m 174 |[39m           stallionId[33m:[39m testStallion[33m.[39mdata[33m.[39mid[33m,[39m
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 175 |[39m           mareId[33m:[39m testMare[33m.[39mdata[33m.[39mid[33m,[39m
     [90m 176 |[39m         })[33m;[39m
     [90m 177 |[39m[0m

      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:174:41)

  ‚óè üß¨ Advanced Breeding Genetics API Integration ‚Ä∫ üéØ Enhanced Genetic Probability API ‚Ä∫ POST /api/breeding/genetic-probability should require authentication

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 112 |[39m     [36mfor[39m ([36mconst[39m horse [36mof[39m testPopulation) {
     [90m 113 |[39m       [36mawait[39m request(app)
    [31m[1m>[22m[39m[90m 114 |[39m         [33m.[39m[36mdelete[39m([32m`/api/horses/${horse.id}`[39m)
     [90m     |[39m                                      [31m[1m^[22m[39m
     [90m 115 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 116 |[39m     }
     [90m 117 |[39m     testPopulation [33m=[39m [][33m;[39m[0m

      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:114:38)

  ‚óè üß¨ Advanced Breeding Genetics API Integration ‚Ä∫ üå≥ Advanced Lineage Analysis API ‚Ä∫ GET /api/breeding/lineage-analysis/:stallionId/:mareId should generate lineage tree

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 183 |[39m     test([32m'GET /api/breeding/lineage-analysis/:stallionId/:mareId should generate lineage tree'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 184 |[39m       [36mconst[39m response [33m=[39m [36mawait[39m request(app)
    [31m[1m>[22m[39m[90m 185 |[39m         [33m.[39m[36mget[39m([32m`/api/breeding/lineage-analysis/${testStallion.data.id}/${testMare.data.id}`[39m)
     [90m     |[39m                                                                  [31m[1m^[22m[39m
     [90m 186 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)
     [90m 187 |[39m         [33m.[39mquery({ generations[33m:[39m [35m3[39m })[33m;[39m
     [90m 188 |[39m[0m

      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:185:66)

  ‚óè üß¨ Advanced Breeding Genetics API Integration ‚Ä∫ üå≥ Advanced Lineage Analysis API ‚Ä∫ GET /api/breeding/lineage-analysis/:stallionId/:mareId should generate lineage tree

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 112 |[39m     [36mfor[39m ([36mconst[39m horse [36mof[39m testPopulation) {
     [90m 113 |[39m       [36mawait[39m request(app)
    [31m[1m>[22m[39m[90m 114 |[39m         [33m.[39m[36mdelete[39m([32m`/api/horses/${horse.id}`[39m)
     [90m     |[39m                                      [31m[1m^[22m[39m
     [90m 115 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 116 |[39m     }
     [90m 117 |[39m     testPopulation [33m=[39m [][33m;[39m[0m

      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:114:38)

  ‚óè üß¨ Advanced Breeding Genetics API Integration ‚Ä∫ üå≥ Advanced Lineage Analysis API ‚Ä∫ GET /api/breeding/lineage-analysis should handle missing horses gracefully

    expect(received).toBe(expected) // Object.is equality

    Expected: 404
    Received: 401

    [0m [90m 210 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 211 |[39m
    [31m[1m>[22m[39m[90m 212 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m404[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 213 |[39m       expect(response[33m.[39mbody)[33m.[39mtoHaveProperty([32m'success'[39m[33m,[39m [36mfalse[39m)[33m;[39m
     [90m 214 |[39m     })[33m;[39m
     [90m 215 |[39m[0m

      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:212:31)

  ‚óè üß¨ Advanced Breeding Genetics API Integration ‚Ä∫ üå≥ Advanced Lineage Analysis API ‚Ä∫ GET /api/breeding/lineage-analysis should handle missing horses gracefully

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 112 |[39m     [36mfor[39m ([36mconst[39m horse [36mof[39m testPopulation) {
     [90m 113 |[39m       [36mawait[39m request(app)
    [31m[1m>[22m[39m[90m 114 |[39m         [33m.[39m[36mdelete[39m([32m`/api/horses/${horse.id}`[39m)
     [90m     |[39m                                      [31m[1m^[22m[39m
     [90m 115 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 116 |[39m     }
     [90m 117 |[39m     testPopulation [33m=[39m [][33m;[39m[0m

      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:114:38)

  ‚óè üß¨ Advanced Breeding Genetics API Integration ‚Ä∫ üå≥ Advanced Lineage Analysis API ‚Ä∫ POST /api/breeding/breeding-recommendations should generate comprehensive recommendations

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 219 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)
     [90m 220 |[39m         [33m.[39msend({
    [31m[1m>[22m[39m[90m 221 |[39m           stallionId[33m:[39m testStallion[33m.[39mdata[33m.[39mid[33m,[39m
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 222 |[39m           mareId[33m:[39m testMare[33m.[39mdata[33m.[39mid[33m,[39m
     [90m 223 |[39m         })[33m;[39m
     [90m 224 |[39m[0m

      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:221:41)

  ‚óè üß¨ Advanced Breeding Genetics API Integration ‚Ä∫ üå≥ Advanced Lineage Analysis API ‚Ä∫ POST /api/breeding/breeding-recommendations should generate comprehensive recommendations

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 112 |[39m     [36mfor[39m ([36mconst[39m horse [36mof[39m testPopulation) {
     [90m 113 |[39m       [36mawait[39m request(app)
    [31m[1m>[22m[39m[90m 114 |[39m         [33m.[39m[36mdelete[39m([32m`/api/horses/${horse.id}`[39m)
     [90m     |[39m                                      [31m[1m^[22m[39m
     [90m 115 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 116 |[39m     }
     [90m 117 |[39m     testPopulation [33m=[39m [][33m;[39m[0m

      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:114:38)

  ‚óè üß¨ Advanced Breeding Genetics API Integration ‚Ä∫ üìä Genetic Diversity Tracking API ‚Ä∫ POST /api/genetics/population-analysis should analyze population genetics

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 243 |[39m   describe([32m'üìä Genetic Diversity Tracking API'[39m[33m,[39m () [33m=>[39m {
     [90m 244 |[39m     test([32m'POST /api/genetics/population-analysis should analyze population genetics'[39m[33m,[39m [36masync[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 245 |[39m       [36mconst[39m horseIds [33m=[39m testPopulation[33m.[39mmap(h [33m=>[39m h[33m.[39mid)[33m;[39m
     [90m     |[39m                                                  [31m[1m^[22m[39m
     [90m 246 |[39m
     [90m 247 |[39m       [36mconst[39m response [33m=[39m [36mawait[39m request(app)
     [90m 248 |[39m         [33m.[39mpost([32m'/api/genetics/population-analysis'[39m)[0m

      at tests/integration/advancedBreedingGeneticsAPI.test.mjs:245:50
          at Array.map (<anonymous>)
      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:245:39)

  ‚óè üß¨ Advanced Breeding Genetics API Integration ‚Ä∫ üìä Genetic Diversity Tracking API ‚Ä∫ POST /api/genetics/population-analysis should analyze population genetics

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 112 |[39m     [36mfor[39m ([36mconst[39m horse [36mof[39m testPopulation) {
     [90m 113 |[39m       [36mawait[39m request(app)
    [31m[1m>[22m[39m[90m 114 |[39m         [33m.[39m[36mdelete[39m([32m`/api/horses/${horse.id}`[39m)
     [90m     |[39m                                      [31m[1m^[22m[39m
     [90m 115 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 116 |[39m     }
     [90m 117 |[39m     testPopulation [33m=[39m [][33m;[39m[0m

      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:114:38)

  ‚óè üß¨ Advanced Breeding Genetics API Integration ‚Ä∫ üìä Genetic Diversity Tracking API ‚Ä∫ POST /api/genetics/inbreeding-analysis should calculate detailed inbreeding

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 274 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)
     [90m 275 |[39m         [33m.[39msend({
    [31m[1m>[22m[39m[90m 276 |[39m           stallionId[33m:[39m testStallion[33m.[39mdata[33m.[39mid[33m,[39m
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 277 |[39m           mareId[33m:[39m testMare[33m.[39mdata[33m.[39mid[33m,[39m
     [90m 278 |[39m         })[33m;[39m
     [90m 279 |[39m[0m

      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:276:41)

  ‚óè üß¨ Advanced Breeding Genetics API Integration ‚Ä∫ üìä Genetic Diversity Tracking API ‚Ä∫ POST /api/genetics/inbreeding-analysis should calculate detailed inbreeding

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 112 |[39m     [36mfor[39m ([36mconst[39m horse [36mof[39m testPopulation) {
     [90m 113 |[39m       [36mawait[39m request(app)
    [31m[1m>[22m[39m[90m 114 |[39m         [33m.[39m[36mdelete[39m([32m`/api/horses/${horse.id}`[39m)
     [90m     |[39m                                      [31m[1m^[22m[39m
     [90m 115 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 116 |[39m     }
     [90m 117 |[39m     testPopulation [33m=[39m [][33m;[39m[0m

      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:114:38)

  ‚óè üß¨ Advanced Breeding Genetics API Integration ‚Ä∫ üìä Genetic Diversity Tracking API ‚Ä∫ GET /api/genetics/diversity-report/:userId should generate comprehensive report

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

    [0m [90m 300 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 301 |[39m
    [31m[1m>[22m[39m[90m 302 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 303 |[39m       expect(response[33m.[39mbody)[33m.[39mtoHaveProperty([32m'success'[39m[33m,[39m [36mtrue[39m)[33m;[39m
     [90m 304 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoHaveProperty([32m'executiveSummary'[39m)[33m;[39m
     [90m 305 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoHaveProperty([32m'currentStatus'[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:302:31)

  ‚óè üß¨ Advanced Breeding Genetics API Integration ‚Ä∫ üìä Genetic Diversity Tracking API ‚Ä∫ GET /api/genetics/diversity-report/:userId should generate comprehensive report

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 112 |[39m     [36mfor[39m ([36mconst[39m horse [36mof[39m testPopulation) {
     [90m 113 |[39m       [36mawait[39m request(app)
    [31m[1m>[22m[39m[90m 114 |[39m         [33m.[39m[36mdelete[39m([32m`/api/horses/${horse.id}`[39m)
     [90m     |[39m                                      [31m[1m^[22m[39m
     [90m 115 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 116 |[39m     }
     [90m 117 |[39m     testPopulation [33m=[39m [][33m;[39m[0m

      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:114:38)

  ‚óè üß¨ Advanced Breeding Genetics API Integration ‚Ä∫ üìä Genetic Diversity Tracking API ‚Ä∫ POST /api/genetics/optimal-breeding should recommend optimal breeding pairs

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 320 |[39m
     [90m 321 |[39m     test([32m'POST /api/genetics/optimal-breeding should recommend optimal breeding pairs'[39m[33m,[39m [36masync[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 322 |[39m       [36mconst[39m horseIds [33m=[39m testPopulation[33m.[39mmap(h [33m=>[39m h[33m.[39mid)[33m;[39m
     [90m     |[39m                                                  [31m[1m^[22m[39m
     [90m 323 |[39m
     [90m 324 |[39m       [36mconst[39m response [33m=[39m [36mawait[39m request(app)
     [90m 325 |[39m         [33m.[39mpost([32m'/api/genetics/optimal-breeding'[39m)[0m

      at tests/integration/advancedBreedingGeneticsAPI.test.mjs:322:50
          at Array.map (<anonymous>)
      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:322:39)

  ‚óè üß¨ Advanced Breeding Genetics API Integration ‚Ä∫ üìä Genetic Diversity Tracking API ‚Ä∫ POST /api/genetics/optimal-breeding should recommend optimal breeding pairs

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 112 |[39m     [36mfor[39m ([36mconst[39m horse [36mof[39m testPopulation) {
     [90m 113 |[39m       [36mawait[39m request(app)
    [31m[1m>[22m[39m[90m 114 |[39m         [33m.[39m[36mdelete[39m([32m`/api/horses/${horse.id}`[39m)
     [90m     |[39m                                      [31m[1m^[22m[39m
     [90m 115 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 116 |[39m     }
     [90m 117 |[39m     testPopulation [33m=[39m [][33m;[39m[0m

      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:114:38)

  ‚óè üß¨ Advanced Breeding Genetics API Integration ‚Ä∫ üîí API Security and Validation ‚Ä∫ All genetic endpoints should require authentication

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 352 |[39m       [36mconst[39m endpoints [33m=[39m [
     [90m 353 |[39m         { method[33m:[39m [32m'post'[39m[33m,[39m path[33m:[39m [32m'/api/breeding/genetic-probability'[39m }[33m,[39m
    [31m[1m>[22m[39m[90m 354 |[39m         { method[33m:[39m [32m'get'[39m[33m,[39m path[33m:[39m [32m`/api/breeding/lineage-analysis/${testStallion.data.id}/${testMare.data.id}`[39m }[33m,[39m
     [90m     |[39m                                                                                    [31m[1m^[22m[39m
     [90m 355 |[39m         { method[33m:[39m [32m'post'[39m[33m,[39m path[33m:[39m [32m'/api/breeding/breeding-recommendations'[39m }[33m,[39m
     [90m 356 |[39m         { method[33m:[39m [32m'post'[39m[33m,[39m path[33m:[39m [32m'/api/genetics/population-analysis'[39m }[33m,[39m
     [90m 357 |[39m         { method[33m:[39m [32m'post'[39m[33m,[39m path[33m:[39m [32m'/api/genetics/inbreeding-analysis'[39m }[33m,[39m[0m

      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:354:84)

  ‚óè üß¨ Advanced Breeding Genetics API Integration ‚Ä∫ üîí API Security and Validation ‚Ä∫ All genetic endpoints should require authentication

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 112 |[39m     [36mfor[39m ([36mconst[39m horse [36mof[39m testPopulation) {
     [90m 113 |[39m       [36mawait[39m request(app)
    [31m[1m>[22m[39m[90m 114 |[39m         [33m.[39m[36mdelete[39m([32m`/api/horses/${horse.id}`[39m)
     [90m     |[39m                                      [31m[1m^[22m[39m
     [90m 115 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 116 |[39m     }
     [90m 117 |[39m     testPopulation [33m=[39m [][33m;[39m[0m

      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:114:38)

  ‚óè üß¨ Advanced Breeding Genetics API Integration ‚Ä∫ üîí API Security and Validation ‚Ä∫ Genetic endpoints should validate input parameters

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 401

    [0m [90m 373 |[39m         [33m.[39msend({})[33m;[39m
     [90m 374 |[39m
    [31m[1m>[22m[39m[90m 375 |[39m       expect(response1[33m.[39mstatus)[33m.[39mtoBe([35m400[39m)[33m;[39m
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 376 |[39m
     [90m 377 |[39m       [90m// Test invalid horse IDs[39m
     [90m 378 |[39m       [36mconst[39m response2 [33m=[39m [36mawait[39m request(app)[0m

      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:375:32)

  ‚óè üß¨ Advanced Breeding Genetics API Integration ‚Ä∫ üîí API Security and Validation ‚Ä∫ Genetic endpoints should validate input parameters

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 112 |[39m     [36mfor[39m ([36mconst[39m horse [36mof[39m testPopulation) {
     [90m 113 |[39m       [36mawait[39m request(app)
    [31m[1m>[22m[39m[90m 114 |[39m         [33m.[39m[36mdelete[39m([32m`/api/horses/${horse.id}`[39m)
     [90m     |[39m                                      [31m[1m^[22m[39m
     [90m 115 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 116 |[39m     }
     [90m 117 |[39m     testPopulation [33m=[39m [][33m;[39m[0m

      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:114:38)

  ‚óè üß¨ Advanced Breeding Genetics API Integration ‚Ä∫ üîí API Security and Validation ‚Ä∫ Genetic endpoints should handle ownership validation

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 421 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${otherToken}`[39m)
     [90m 422 |[39m         [33m.[39msend({
    [31m[1m>[22m[39m[90m 423 |[39m           stallionId[33m:[39m testStallion[33m.[39mdata[33m.[39mid[33m,[39m
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 424 |[39m           mareId[33m:[39m testMare[33m.[39mdata[33m.[39mid[33m,[39m
     [90m 425 |[39m         })[33m;[39m
     [90m 426 |[39m[0m

      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:423:41)

  ‚óè üß¨ Advanced Breeding Genetics API Integration ‚Ä∫ üîí API Security and Validation ‚Ä∫ Genetic endpoints should handle ownership validation

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 112 |[39m     [36mfor[39m ([36mconst[39m horse [36mof[39m testPopulation) {
     [90m 113 |[39m       [36mawait[39m request(app)
    [31m[1m>[22m[39m[90m 114 |[39m         [33m.[39m[36mdelete[39m([32m`/api/horses/${horse.id}`[39m)
     [90m     |[39m                                      [31m[1m^[22m[39m
     [90m 115 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 116 |[39m     }
     [90m 117 |[39m     testPopulation [33m=[39m [][33m;[39m[0m

      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:114:38)

PASS __tests__/performance/databaseOptimization.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:51:32] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:32] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:32] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:51:33] info: [databaseOptimization] Running database benchmarks

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:33] info: [databaseOptimization] Analyzing query performance for epigenetic_trait_search

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:33] info: [databaseOptimization] Analyzing query performance for jsonb_discipline_scores

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:33] info: [databaseOptimization] Analyzing query performance for user_horses_with_results

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:33] info: [databaseOptimization] Creating optimized indexes

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:33] warn: [databaseOptimization] Index creation failed: CREATE INDEX IF NOT EXISTS idx_epigenetic_flags_search ON horses ("epigenetic_flags_search") 
      Invalid `prisma.$executeRawUnsafe()` invocation:
      
      
      Raw query failed. Code: `42703`. Message: `column "epigenetic_flags_search" does not exist`

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:33] warn: [databaseOptimization] Index creation failed: CREATE INDEX IF NOT EXISTS idx_discipline_scores_filter ON horses ("discipline_scores_filter") 
      Invalid `prisma.$executeRawUnsafe()` invocation:
      
      
      Raw query failed. Code: `42703`. Message: `column "discipline_scores_filter" does not exist`

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:33] warn: [databaseOptimization] Index creation failed: CREATE INDEX IF NOT EXISTS idx_age_and_training_status ON horses ("age_and_training_status") 
      Invalid `prisma.$executeRawUnsafe()` invocation:
      
      
      Raw query failed. Code: `42703`. Message: `column "age_and_training_status" does not exist`

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:33] warn: [databaseOptimization] Index creation failed: CREATE INDEX IF NOT EXISTS idx_user_horse_lookup ON horses ("user_horse_lookup") 
      Invalid `prisma.$executeRawUnsafe()` invocation:
      
      
      Raw query failed. Code: `42703`. Message: `column "user_horse_lookup" does not exist`

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:33] info: [databaseOptimization] Creating optimized indexes

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:33] warn: [databaseOptimization] Index creation failed: CREATE INDEX IF NOT EXISTS idx_horses_stats_gin ON horses USING GIN ("stats") 
      Invalid `prisma.$executeRawUnsafe()` invocation:
      
      
      Raw query failed. Code: `42703`. Message: `column "stats" does not exist`

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:33] info: [databaseOptimization] Creating optimized indexes

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:33] info: [databaseOptimization] Configuring connection pooling

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:33] info: [databaseOptimization] Connection pool configured:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:33] info: [databaseOptimization] Configuring connection pooling

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:33] info: [databaseOptimization] Configuring connection pooling

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:33] info: [databaseOptimization] Setting up query caching

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:33] info: [databaseOptimization] Running database benchmarks

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:33] info: [databaseOptimization] Running database benchmarks

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:33] info: [databaseOptimization] Running database benchmarks

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:34] info: [databaseOptimization] Running database benchmarks

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:34] info: [databaseOptimization] Running database benchmarks

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:34] info: [databaseOptimization] Running database benchmarks

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:34] info: [databaseOptimization] Running database benchmarks

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

FAIL __tests__/integration/systemWideIntegration.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:51:34] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:34] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:34] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:51:34] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:34] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:34] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:34] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:34] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:34] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:34] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:34] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:34] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:34] warn: [MemoryMonitoring] Memory threshold exceeded: 887MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: integration1763765494838@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=671dcc463f9ac7d0b8f5b535aee306edbbe335e40e87be4254fdec7bba56dd66

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:51:35] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [GET] /health

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] warn: [MemoryMonitoring] Memory threshold exceeded: 877MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [GET] /health - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [GET] /api/user-docs/health

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] warn: [MemoryMonitoring] Memory threshold exceeded: 889MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [UserDocService] Built search index with 1244 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [GET] /api/user-docs/health - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [GET] /api/user-docs/analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] warn: [MemoryMonitoring] Memory threshold exceeded: 879MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [UserDocRoutes] Getting documentation analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [GET] /api/user-docs/analytics - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [POST] /api/grooms/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] warn: [MemoryMonitoring] Memory threshold exceeded: 880MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [groomController.recordInteraction] Recording early_touch interaction for foal 11056

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] warn: [groomPersonalityEffects.calculatePersonalityEffects] Unknown personality: calm

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for calm: none

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [groomController.recordInteraction] Interaction recorded: 3 bonding, -3 stress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 4609 for interaction_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [groomProgressionService.awardGroomXP] Groom 4609 gained 2 XP: 0 ‚Üí 2 (Level 1 ‚Üí 1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [groomController.recordInteraction] Awarded 2 XP to groom 4609 for interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [POST] /api/grooms/interact - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [GET] /api/grooms/user/37674e80-8d15-4f8d-bdf2-402a07c4cf56

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] warn: [MemoryMonitoring] Memory threshold exceeded: 886MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [groomController.getUserGrooms] Getting grooms for user 37674e80-8d15-4f8d-bdf2-402a07c4cf56

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [GET] /api/grooms/user/37674e80-8d15-4f8d-bdf2-402a07c4cf56 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [GET] /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] warn: [MemoryMonitoring] Memory threshold exceeded: 888MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [GET] /api-docs/swagger.json - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [GET] /api/user-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] warn: [MemoryMonitoring] Memory threshold exceeded: 887MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [UserDocRoutes] Getting all documentation list

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [GET] /api/user-docs - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [GET] /api/user-docs/search?q=horse

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] warn: [MemoryMonitoring] Memory threshold exceeded: 886MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [UserDocRoutes] Searching documentation for: "horse"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [GET] /api/user-docs/search?q=horse - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [GET] /api/user-docs/analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] warn: [MemoryMonitoring] Memory threshold exceeded: 883MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [UserDocRoutes] Getting documentation analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [GET] /api/user-docs/analytics - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] warn: [MemoryMonitoring] Memory threshold exceeded: 893MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] warn: [MemoryMonitoring] Memory threshold exceeded: 883MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] warn: [MemoryMonitoring] Memory threshold exceeded: 888MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] warn: [MemoryMonitoring] Memory threshold exceeded: 893MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] warn: [MemoryMonitoring] Memory threshold exceeded: 883MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] warn: [MemoryMonitoring] Memory threshold exceeded: 888MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] warn: [MemoryMonitoring] Memory threshold exceeded: 893MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] warn: [MemoryMonitoring] Memory threshold exceeded: 883MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] warn: [MemoryMonitoring] Memory threshold exceeded: 888MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] warn: [MemoryMonitoring] Memory threshold exceeded: 893MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [GET] /api/user-docs/search?q=horse&includeContent=true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] warn: [MemoryMonitoring] Memory threshold exceeded: 887MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [UserDocRoutes] Searching documentation for: "horse"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [GET] /api/user-docs/search?q=horse&includeContent=true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] warn: [MemoryMonitoring] Memory threshold exceeded: 893MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [UserDocRoutes] Searching documentation for: "horse"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] info: [GET] /api/user-docs/search?q=horse&includeContent=true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:35] warn: [MemoryMonitoring] Memory threshold exceeded: 884MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [UserDocRoutes] Searching documentation for: "horse"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [GET] /api/user-docs/search?q=horse&includeContent=true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] warn: [MemoryMonitoring] Memory threshold exceeded: 891MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [UserDocRoutes] Searching documentation for: "horse"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [GET] /api/user-docs/search?q=horse&includeContent=true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] warn: [MemoryMonitoring] Memory threshold exceeded: 897MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [UserDocRoutes] Searching documentation for: "horse"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [GET] /api/user-docs/search?q=horse&includeContent=true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] warn: [MemoryMonitoring] Memory threshold exceeded: 888MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [UserDocRoutes] Searching documentation for: "horse"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [GET] /api/user-docs/search?q=horse&includeContent=true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] warn: [MemoryMonitoring] Memory threshold exceeded: 894MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [UserDocRoutes] Searching documentation for: "horse"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [GET] /api/user-docs/search?q=horse&includeContent=true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] warn: [MemoryMonitoring] Memory threshold exceeded: 885MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [UserDocRoutes] Searching documentation for: "horse"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [GET] /api/user-docs/search?q=horse&includeContent=true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] warn: [MemoryMonitoring] Memory threshold exceeded: 891MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [UserDocRoutes] Searching documentation for: "horse"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [GET] /api/user-docs/search?q=horse&includeContent=true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] warn: [MemoryMonitoring] Memory threshold exceeded: 898MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [UserDocRoutes] Searching documentation for: "horse"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [GET] /api/user-docs/search?q=horse&includeContent=true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] warn: [MemoryMonitoring] Memory threshold exceeded: 888MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [UserDocRoutes] Searching documentation for: "horse"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [GET] /api/user-docs/search?q=horse&includeContent=true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] warn: [MemoryMonitoring] Memory threshold exceeded: 895MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [UserDocRoutes] Searching documentation for: "horse"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [GET] /api/user-docs/search?q=horse&includeContent=true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] warn: [MemoryMonitoring] Memory threshold exceeded: 885MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [UserDocRoutes] Searching documentation for: "horse"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [GET] /api/user-docs/search?q=horse&includeContent=true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] warn: [MemoryMonitoring] Memory threshold exceeded: 892MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [UserDocRoutes] Searching documentation for: "horse"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [GET] /api/user-docs/search?q=horse&includeContent=true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] warn: [MemoryMonitoring] Memory threshold exceeded: 898MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [UserDocRoutes] Searching documentation for: "horse"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [GET] /api/user-docs/search?q=horse&includeContent=true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] warn: [MemoryMonitoring] Memory threshold exceeded: 889MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [UserDocRoutes] Searching documentation for: "horse"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [GET] /api/user-docs/search?q=horse&includeContent=true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] warn: [MemoryMonitoring] Memory threshold exceeded: 895MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [UserDocRoutes] Searching documentation for: "horse"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [GET] /api/user-docs/search?q=horse&includeContent=true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] warn: [MemoryMonitoring] Memory threshold exceeded: 886MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [UserDocRoutes] Searching documentation for: "horse"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [GET] /api/user-docs/search?q=horse&includeContent=true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] warn: [MemoryMonitoring] Memory threshold exceeded: 892MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [UserDocRoutes] Searching documentation for: "horse"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [GET] /api/user-docs/search?q=horse&includeContent=true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] warn: [MemoryMonitoring] Memory threshold exceeded: 899MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [UserDocRoutes] Searching documentation for: "horse"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] warn: [MemoryMonitoring] Memory threshold exceeded: 898MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [auth] Authenticated user 37674e80-8d15-4f8d-bdf2-402a07c4cf56 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [horseModel.createHorse] Successfully created horse: Consistency Test Horse (ID: 11057)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [horseRoutes] Created new horse: Consistency Test Horse (ID: 11057)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [GET] /api/users/37674e80-8d15-4f8d-bdf2-402a07c4cf56/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] warn: [MemoryMonitoring] Memory threshold exceeded: 892MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [auth] Authenticated user 37674e80-8d15-4f8d-bdf2-402a07c4cf56 for GET /37674e80-8d15-4f8d-bdf2-402a07c4cf56/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [userController.getUserProgressAPI] Getting comprehensive progress for user 37674e80-8d15-4f8d-bdf2-402a07c4cf56

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [userController.getUserProgressAPI] Successfully retrieved progress for user globaltest494821 (Level 1, XP: 0/200, 0% progress)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:36] info: [GET] /api/users/37674e80-8d15-4f8d-bdf2-402a07c4cf56/progress - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:37] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:37] warn: [MemoryMonitoring] Memory threshold exceeded: 898MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:37] info: [trainingController.trainRouteHandler] Training request for horse 11058 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:37] info: [trainingController.trainHorse] Attempting to train horse 11058 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:37] info: [trainingController.canTrain] Checking training eligibility for horse 11058 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:37] info: [trainingModel.getHorseAge] Getting age for horse 11058

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:37] info: [trainingModel.getHorseAge] Horse 11058 is 5 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:37] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11058 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:37] info: [trainingModel.getAnyRecentTraining] No training records found for horse 11058

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:37] info: [trainingController.canTrain] Horse 11058 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:37] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 11058)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:37] info: [trainingController.trainHorse] Horse 11058 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:37] info: [trainingModel.logTrainingSession] Logging training session for horse 11058 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:37] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 823

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:37] info: [horseModel.updateHorseStat] Updating focus by 2 for horse 11058

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:37] info: [horseModel.updateHorseStat] Updated focus for horse 11058: 0 -> 2 (+2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:37] info: [trainingController.trainHorse] Stat gain: focus +2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:37] info: [horseModel.incrementDisciplineScore] Incrementing Dressage score for horse 11058 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:37] info: [horseModel.updateDisciplineScore] Updating Dressage score for horse 11058 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:37] info: [horseModel.updateDisciplineScore] Successfully updated Dressage score for horse 11058: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:37] info: [horseModel.incrementDisciplineScore] Successfully incremented Dressage score for horse 11058

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:37] info: [xpLogModel.logXpEvent] Logging XP event: User 37674e80-8d15-4f8d-bdf2-402a07c4cf56, Amount: 5, Reason: Trained horse Progress Test Horse in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:37] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 587, User 37674e80-8d15-4f8d-bdf2-402a07c4cf56, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:37] info: [trainingController.trainHorse] Awarded 5 XP to user 37674e80-8d15-4f8d-bdf2-402a07c4cf56 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:37] info: [trainingController.trainHorse] Successfully trained horse 11058 in Dressage (Log ID: 823, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:37] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:37] info: [GET] /api/users/37674e80-8d15-4f8d-bdf2-402a07c4cf56/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:37] warn: [MemoryMonitoring] Memory threshold exceeded: 900MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:37] info: [auth] Authenticated user 37674e80-8d15-4f8d-bdf2-402a07c4cf56 for GET /37674e80-8d15-4f8d-bdf2-402a07c4cf56/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:37] info: [userController.getUserProgressAPI] Getting comprehensive progress for user 37674e80-8d15-4f8d-bdf2-402a07c4cf56

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:37] info: [userController.getUserProgressAPI] Successfully retrieved progress for user globaltest494821 (Level 1, XP: 5/200, 3% progress)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:37] info: [GET] /api/users/37674e80-8d15-4f8d-bdf2-402a07c4cf56/progress - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

  ‚óè System-Wide Integration Tests ‚Ä∫ Complete User Journey: Registration to Competition ‚Ä∫ End-to-end user workflow: registration ‚Üí horse purchase ‚Üí training ‚Üí competition

    expect(received).toBeDefined()

    Received: undefined

    [0m [90m 127 |[39m       expect(registerResponse[33m.[39mbody[33m.[39mstatus)[33m.[39mtoBe([32m'success'[39m)[33m;[39m
     [90m 128 |[39m       expect(registerResponse[33m.[39mbody[33m.[39mdata[33m.[39muser)[33m.[39mtoBeDefined()[33m;[39m
    [31m[1m>[22m[39m[90m 129 |[39m       expect(registerResponse[33m.[39mbody[33m.[39mdata[33m.[39mtoken)[33m.[39mtoBeDefined()[33m;[39m
     [90m     |[39m                                                [31m[1m^[22m[39m
     [90m 130 |[39m
     [90m 131 |[39m       testUser [33m=[39m registerResponse[33m.[39mbody[33m.[39mdata[33m.[39muser[33m;[39m
     [90m 132 |[39m       authToken [33m=[39m registerResponse[33m.[39mbody[33m.[39mdata[33m.[39mtoken[33m;[39m[0m

      at Object.<anonymous> (__tests__/integration/systemWideIntegration.test.mjs:129:48)

FAIL __tests__/unit/email-verification.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:51:38] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:38] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:38] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:51:38] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:38] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:38] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:38] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:38] error: [EmailVerification] Error creating verification token: Maximum pending verification tokens (5) reached

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:51:38] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:38] error: [EmailVerification] Error creating verification token: Please wait 300 seconds before requesting another verification email

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:51:39] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:39] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:39] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:39] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:39] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:39] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:39] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:39] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:39] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:39] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:39] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:40] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:40] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:40] info: [EmailVerification] Verification status check

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:40] info: [EmailVerification] Verification status check

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:40] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:40] info: [EmailVerification] Resent verification email

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:40] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:40] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:40] error: [EmailVerification] Error resending verification email: Email is already verified

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:51:40] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:40] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:40] info: [EmailVerification] Resent verification email

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:40] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:40] info: [EmailVerification] Resent verification email

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:40] error: [EmailVerification] Error creating verification token: Please wait 300 seconds before requesting another verification email

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:51:40] error: [EmailVerification] Error resending verification email: Please wait 300 seconds before requesting another verification email

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:51:40] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:40] info: [EmailVerification] Token cleanup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:40] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:40] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:40] info: [EmailVerification] Token cleanup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:40] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:40] info: [EmailVerification] Token cleanup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:40] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

  ‚óè Email Verification Service - Unit Tests ‚Ä∫ verifyEmailToken() ‚Ä∫ should_reject_already_used_token

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.create()` invocation:


    Unique constraint failed on the fields: (`username`)

    [0m [90m 39 |[39m   [36mconst[39m hashedPassword [33m=[39m [36mawait[39m bcrypt[33m.[39mhash(userData[33m.[39mpassword[33m,[39m [35m10[39m)[33m;[39m
     [90m 40 |[39m
    [31m[1m>[22m[39m[90m 41 |[39m   [36mconst[39m user [33m=[39m [36mawait[39m prisma[33m.[39muser[33m.[39mcreate({
     [90m    |[39m                [31m[1m^[22m[39m
     [90m 42 |[39m     data[33m:[39m {
     [90m 43 |[39m       username[33m:[39m userData[33m.[39musername[33m,[39m
     [90m 44 |[39m       email[33m:[39m userData[33m.[39memail[33m,[39m[0m

      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7459)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at createTestUser (__tests__/config/test-helpers.mjs:41:16)
      at Object.<anonymous> (__tests__/unit/email-verification.test.mjs:35:22)

PASS tests/services/groomRetirementService.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:51:41] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:51:41] info: Incremented career weeks for groom 4610 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] info: Incremented career weeks for groom 4611 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] info: Incremented career weeks for groom 4611 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] info: Incremented career weeks for groom 4611 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] error: Error incrementing career weeks for groom 99999: 
      Invalid `prisma.groom.update()` invocation:
      
      
      An operation failed because it depends on one or more records that were required but not found. No record was found for an update.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:51:41] info: Processed retirement for groom 4619 with reason: mandatory_career_limit

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] info: Processed retirement for groom 4620 with reason: voluntary

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] info: Processed retirement for groom 4621 with reason: voluntary

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] error: Error processing retirement for groom 4622: Groom 4622 is not eligible for retirement

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:51:41] info: Starting weekly career progression processing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] info: Incremented career weeks for groom 4537 to 51

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] info: Incremented career weeks for groom 4539 to 51

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] info: Incremented career weeks for groom 4541 to 51

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] info: Incremented career weeks for groom 4543 to 51

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] info: Incremented career weeks for groom 4545 to 51

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] info: Incremented career weeks for groom 4547 to 51

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] info: Incremented career weeks for groom 4549 to 51

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] info: Incremented career weeks for groom 4557 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] info: Incremented career weeks for groom 4558 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] info: Incremented career weeks for groom 4569 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] info: Incremented career weeks for groom 4570 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] info: Incremented career weeks for groom 4571 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] info: Incremented career weeks for groom 4572 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] info: Incremented career weeks for groom 4574 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] info: Incremented career weeks for groom 4610 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] info: Incremented career weeks for groom 4611 to 4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] info: Incremented career weeks for groom 4612 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] info: Incremented career weeks for groom 4613 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] info: Incremented career weeks for groom 4614 to 105

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] info: Processed retirement for groom 4614 with reason: mandatory_career_limit

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] info: Groom Test Groom 1763765501629 (ID: 4614) retired: mandatory_career_limit

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] info: Incremented career weeks for groom 4615 to 51

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] info: Processed retirement for groom 4615 with reason: early_level_cap

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] info: Groom Test Groom 1763765501636 (ID: 4615) retired: early_level_cap

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] info: Incremented career weeks for groom 4616 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] info: Incremented career weeks for groom 4617 to 104

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] info: Processed retirement for groom 4617 with reason: mandatory_career_limit

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] info: Groom Test Groom 1763765501662 (ID: 4617) retired: mandatory_career_limit

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] info: Incremented career weeks for groom 4622 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] info: Incremented career weeks for groom 4623 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] info: Incremented career weeks for groom 4624 to 11

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] info: Incremented career weeks for groom 4625 to 51

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] info: Incremented career weeks for groom 4626 to 104

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] info: Processed retirement for groom 4626 with reason: mandatory_career_limit

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] info: Groom Test Groom Near Retirement 1763765501730 (ID: 4626) retired: mandatory_career_limit

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] info: Incremented career weeks for groom 4627 to 81

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] info: Processed retirement for groom 4627 with reason: early_level_cap

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] info: Groom Test Groom Level 10 1763765501730 (ID: 4627) retired: early_level_cap

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] info: Incremented career weeks for groom 4533 to 51

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] info: Incremented career weeks for groom 4525 to 51

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] info: Incremented career weeks for groom 4527 to 51

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] info: Incremented career weeks for groom 4529 to 51

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] info: Incremented career weeks for groom 4531 to 51

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] info: Incremented career weeks for groom 4535 to 51

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] info: Incremented career weeks for groom 4575 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] info: Incremented career weeks for groom 4576 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] info: Incremented career weeks for groom 4577 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] info: Incremented career weeks for groom 4578 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:41] info: Incremented career weeks for groom 4579 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4580 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4582 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4583 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4584 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4585 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4586 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4587 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4588 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4589 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Weekly career progression completed: 48 processed, 5 retired, 0 errors

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Starting weekly career progression processing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4537 to 52

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4539 to 52

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4541 to 52

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4543 to 52

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4545 to 52

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4547 to 52

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4549 to 52

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4557 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4558 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4569 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4570 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4571 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4572 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4574 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4610 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4611 to 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4612 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4613 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4616 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4622 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4623 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4624 to 12

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4625 to 52

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4533 to 52

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4525 to 52

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4527 to 52

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4529 to 52

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4531 to 52

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4535 to 52

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4628 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4629 to 11

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4630 to 51

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4575 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4576 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4577 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4578 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4579 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4580 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4582 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4583 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4584 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4585 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4586 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4587 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4588 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4589 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4631 to 104

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Processed retirement for groom 4631 with reason: mandatory_career_limit

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Groom Test Groom Near Retirement 1763765502054 (ID: 4631) retired: mandatory_career_limit

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4632 to 81

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Processed retirement for groom 4632 with reason: early_level_cap

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Groom Test Groom Level 10 1763765502054 (ID: 4632) retired: early_level_cap

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4633 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Weekly career progression completed: 49 processed, 2 retired, 0 errors

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Starting weekly career progression processing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4537 to 53

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4539 to 53

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4541 to 53

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4543 to 53

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4545 to 53

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4547 to 53

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4549 to 53

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4557 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4558 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4569 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4570 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4571 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4572 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4574 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4611 to 6

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4612 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4613 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4616 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4622 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4623 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4624 to 13

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4625 to 53

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4533 to 53

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4525 to 53

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4527 to 53

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4529 to 53

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4531 to 53

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4535 to 53

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4628 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4629 to 12

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4630 to 52

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4610 to 4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4575 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4576 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4577 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4578 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4579 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4580 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4582 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4583 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4584 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4585 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4586 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4587 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4588 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4589 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4634 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4636 to 51

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4637 to 104

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Processed retirement for groom 4637 with reason: mandatory_career_limit

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Groom Test Groom Near Retirement 1763765502379 (ID: 4637) retired: mandatory_career_limit

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4638 to 81

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Processed retirement for groom 4638 with reason: early_level_cap

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Groom Test Groom Level 10 1763765502379 (ID: 4638) retired: early_level_cap

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Weekly career progression completed: 50 processed, 2 retired, 0 errors

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Starting weekly career progression processing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4537 to 54

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4539 to 54

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4541 to 54

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4543 to 54

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4545 to 54

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4547 to 54

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4549 to 54

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4557 to 4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4558 to 4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4569 to 4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4570 to 4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4571 to 4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4572 to 4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4574 to 4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4611 to 7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4612 to 4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4613 to 4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4616 to 4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4622 to 4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4623 to 4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4624 to 14

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4625 to 54

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4533 to 54

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4525 to 54

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4527 to 54

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4529 to 54

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4531 to 54

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4535 to 54

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4628 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4629 to 13

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4630 to 53

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4610 to 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4575 to 4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4576 to 4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4577 to 4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4578 to 4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4579 to 4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4580 to 4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4582 to 4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4583 to 4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4584 to 4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4585 to 4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4586 to 4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4587 to 4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4588 to 4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4589 to 4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:42] info: Incremented career weeks for groom 4634 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:43] info: Incremented career weeks for groom 4636 to 52

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:43] info: Incremented career weeks for groom 4639 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:43] info: Incremented career weeks for groom 4640 to 11

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:43] info: Incremented career weeks for groom 4641 to 51

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:43] info: Incremented career weeks for groom 4642 to 104

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:43] info: Processed retirement for groom 4642 with reason: mandatory_career_limit

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:43] info: Groom Test Groom Near Retirement 1763765502712 (ID: 4642) retired: mandatory_career_limit

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:43] info: Incremented career weeks for groom 4643 to 81

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:43] info: Processed retirement for groom 4643 with reason: early_level_cap

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:43] info: Groom Test Groom Level 10 1763765502712 (ID: 4643) retired: early_level_cap

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:43] info: Weekly career progression completed: 53 processed, 2 retired, 0 errors

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS __tests__/middleware/security.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:51:43] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:43] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:43] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:51:43] warn: [HTTPS] Insecure HTTP request detected, redirecting to HTTPS

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:43] warn: [HTTPS] Insecure HTTP request detected, redirecting to HTTPS

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:43] warn: [API Key] Invalid or missing API key

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:43] warn: [API Key] Invalid or missing API key

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:43] warn: [API Key] Invalid or missing API key

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:43] warn: [API Key] API_KEY not configured - requests with no origin are allowed (INSECURE)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:43] warn: [API Key] API_KEY not configured - requests with no origin are allowed (INSECURE)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:43] warn: CORS blocked request from origin: https://evil.com

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:43] warn: [CORS] Request with no origin detected - API key validation required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:43] warn: [CORS] Request with no origin detected - API key validation required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS __tests__/routes/memoryManagementRoutes.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:51:44] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:44] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:44] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:51:44] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:44] info: [auth] Authenticated user 34578018-2acb-42a8-b312-467cad5db42c for GET /status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:44] info: [MemoryManagement] Getting memory status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:44] warn: [auth] Missing token for GET /status from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:44] info: [auth] Authenticated user 34578018-2acb-42a8-b312-467cad5db42c for GET /metrics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:44] info: [MemoryManagement] Getting memory metrics for timeframe: 1h

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:44] info: [auth] Authenticated user 34578018-2acb-42a8-b312-467cad5db42c for GET /metrics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:44] info: [MemoryManagement] Getting memory metrics for timeframe: 1h

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:44] info: [auth] Authenticated user 34578018-2acb-42a8-b312-467cad5db42c for GET /metrics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:44] info: [MemoryManagement] Getting memory metrics for timeframe: 6h

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:44] info: [auth] Authenticated user 34578018-2acb-42a8-b312-467cad5db42c for GET /metrics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:44] info: [MemoryManagement] Getting memory metrics for timeframe: 24h

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:44] info: [auth] Authenticated user 34578018-2acb-42a8-b312-467cad5db42c for GET /metrics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:44] info: [MemoryManagement] Getting memory metrics for timeframe: 7d

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:44] info: [auth] Authenticated user 34578018-2acb-42a8-b312-467cad5db42c for GET /metrics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:44] info: [MemoryManagement] Getting memory metrics for timeframe: 1h

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:44] info: [auth] Authenticated user 34578018-2acb-42a8-b312-467cad5db42c for GET /metrics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:44] info: [auth] Authenticated user 34578018-2acb-42a8-b312-467cad5db42c for GET /resources

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:44] info: [MemoryManagement] Getting resource analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:44] info: [auth] Authenticated user 34578018-2acb-42a8-b312-467cad5db42c for POST /gc

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:44] info: [MemoryManagement] Manual GC trigger requested (force: false)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:44] info: [auth] Authenticated user 34578018-2acb-42a8-b312-467cad5db42c for POST /gc

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:44] info: [auth] Authenticated user 34578018-2acb-42a8-b312-467cad5db42c for POST /cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:44] info: [MemoryManagement] Resource cleanup requested for: all

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:44] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:44] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:44] info: [auth] Authenticated user 34578018-2acb-42a8-b312-467cad5db42c for POST /cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:44] info: [MemoryManagement] Resource cleanup requested for: timers, intervals

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:44] warn: [MemoryManagement] Selective cleanup not yet implemented

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:44] info: [auth] Authenticated user 34578018-2acb-42a8-b312-467cad5db42c for POST /cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:44] info: [auth] Authenticated user 34578018-2acb-42a8-b312-467cad5db42c for GET /alerts

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:44] info: [MemoryManagement] Getting memory alerts

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:44] info: [auth] Authenticated user 34578018-2acb-42a8-b312-467cad5db42c for GET /alerts

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:44] info: [MemoryManagement] Getting memory alerts

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:44] info: [auth] Authenticated user 34578018-2acb-42a8-b312-467cad5db42c for GET /alerts

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:44] info: [MemoryManagement] Getting memory alerts

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:44] info: [auth] Authenticated user 34578018-2acb-42a8-b312-467cad5db42c for GET /alerts

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:44] info: [MemoryManagement] Getting memory alerts

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:44] info: [auth] Authenticated user 34578018-2acb-42a8-b312-467cad5db42c for GET /alerts

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:44] info: [MemoryManagement] Getting memory alerts

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:44] info: [auth] Authenticated user 34578018-2acb-42a8-b312-467cad5db42c for GET /alerts

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:44] info: [auth] Authenticated user 34578018-2acb-42a8-b312-467cad5db42c for GET /alerts

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:44] info: [auth] Authenticated user 34578018-2acb-42a8-b312-467cad5db42c for GET /health

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:44] info: [MemoryManagement] Getting system health assessment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:44] info: [auth] Authenticated user 34578018-2acb-42a8-b312-467cad5db42c for GET /health

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:44] info: [MemoryManagement] Getting system health assessment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:44] info: [auth] Authenticated user 34578018-2acb-42a8-b312-467cad5db42c for GET /health

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:44] info: [MemoryManagement] Getting system health assessment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:44] warn: [auth] Invalid token for GET /status from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:44] warn: [auth] Missing token for GET /status from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:44] info: [auth] Authenticated user 34578018-2acb-42a8-b312-467cad5db42c for GET /metrics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:44] info: [MemoryManagement] Getting memory metrics for timeframe: 1h

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:44] info: [auth] Authenticated user 34578018-2acb-42a8-b312-467cad5db42c for GET /resources

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:44] info: [MemoryManagement] Getting resource analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:44] info: [auth] Authenticated user 34578018-2acb-42a8-b312-467cad5db42c for GET /health

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:44] info: [MemoryManagement] Getting system health assessment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:45] info: [auth] Authenticated user 34578018-2acb-42a8-b312-467cad5db42c for GET /status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:45] info: [MemoryManagement] Getting memory status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:45] warn: [MemoryManager] Memory threshold alert: 959MB used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:46] warn: [MemoryManager] Memory threshold alert: 966MB used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:46] info: [auth] Authenticated user 34578018-2acb-42a8-b312-467cad5db42c for GET /metrics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:46] info: [MemoryManagement] Getting memory metrics for timeframe: 1h

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:46] info: [MemoryManager] Stopping memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:46] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:46] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/integration/leaderboardRoutes.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:51:46] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:46] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:46] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:51:47] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:47] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:47] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:47] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:47] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:47] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:47] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:47] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:47] info: [GET] /api/leaderboards/players/level?limit=10&offset=0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:47] warn: [MemoryMonitoring] Memory threshold exceeded: 993MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:47] info: [auth] Authenticated user e18e705b-0591-41cb-a2c8-76d048c59d4e for GET /players/level

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:47] info: [GET] /api/leaderboards/players/level?limit=10&offset=0 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:47] info: [GET] /api/leaderboards/players/level

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:47] warn: [MemoryMonitoring] Memory threshold exceeded: 998MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:47] warn: [auth] Missing token for GET /players/level from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:47] info: [GET] /api/leaderboards/players/level - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:47] info: [GET] /api/leaderboards/horses/earnings

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1002MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:47] info: [auth] Authenticated user 57366207-d4c0-431d-904a-a6d64aa90b9a for GET /horses/earnings

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:47] info: [GET] /api/leaderboards/horses/earnings - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:47] info: [GET] /api/leaderboards/recent-winners

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:47] warn: [MemoryMonitoring] Memory threshold exceeded: 992MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:47] info: [auth] Authenticated user af662b04-da41-4ccc-8e03-ca997f326e77 for GET /recent-winners

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:47] info: [GET] /api/leaderboards/recent-winners - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:47] info: [GET] /api/leaderboards/recent-winners?discipline=Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:47] warn: [MemoryMonitoring] Memory threshold exceeded: 997MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:47] info: [auth] Authenticated user 008b5a71-2d24-422f-b09a-d95ea145b0c2 for GET /recent-winners

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:47] info: [GET] /api/leaderboards/recent-winners?discipline=Dressage - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:47] info: [GET] /api/leaderboards/stats

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1003MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:47] info: [auth] Authenticated user a033ae99-3d5e-442c-8fc6-b46f4f7e58b4 for GET /stats

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:47] info: [GET] /api/leaderboards/stats - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS __tests__/middleware/validationErrorHandler.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:51:47] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:47] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:47] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:51:48] warn: [Validation] Input validation failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:48] warn: [Validation] Input validation failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:48] warn: [Validation] Input validation failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS __tests__/integration/crossSystemValidation.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:51:48] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:48] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:48] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:51:48] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:48] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:48] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:48] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:48] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:48] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [POST] /api/horses/foals

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1039MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [auth] Authenticated user 3ece9401-37aa-49ba-b4cc-de6e00e5aa93 for POST /foals

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [horseController.createFoal] Creating foal: Trait Test Foal with sire 11078 and dam 11078

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [horseModel.getHorseById] Successfully found horse: Cross System Test Horse (ID: 11078)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      [2025-11-21 17:51:49] info: [horseModel.getHorseById] Successfully found horse: Cross System Test Horse (ID: 11078)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      [2025-11-21 17:51:49] info: [horseController.gatherLineage] Gathering lineage for sire 11078 and dam 11078, 3 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [horseController.gatherLineage] Gathered 1 ancestors

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [horseController.assessFeedQualityFromMare] Mare Cross System Test Horse feed quality: 75 (health: Good, bond: 50)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [horseController.createFoal] Mare stress: 50, Feed quality: 75, Lineage count: 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [applyEpigeneticTraitsAtBirth] Starting trait assignment at birth

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [applyEpigeneticTraitsAtBirth] Mare stress: 50, Feed quality: 75

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [applyEpigeneticTraitsAtBirth] Final traits assigned: {"positive":[],"negative":[]}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [horseController.createFoal] Applied epigenetic traits: {"positive":[],"negative":[]}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [horseModel.createHorse] Applying at-birth traits for newborn with sire 11078 and dam 11078

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [atBirthTraits.applyEpigeneticTraitsAtBirth] Applying at-birth traits for sire 11078 and dam 11078

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [atBirthTraits.assessFeedQuality] Mare 11078 feed quality: 70

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [atBirthTraits.applyEpigeneticTraitsAtBirth] Mare stress: 50, Feed quality: 70

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [atBirthTraits.analyzeLineage] Analyzing lineage for sire 11078 and dam 11078

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [atBirthTraits.analyzeLineage] Found 0 ancestors, 0 competitions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [atBirthTraits.detectInbreeding] Checking for inbreeding between sire 11078 and dam 11078

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [atBirthTraits.detectInbreeding] Inbreeding not detected

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [atBirthTraits.applyEpigeneticTraitsAtBirth] Breeding conditions: {"mareStress":50,"feedQuality":70,"disciplineSpecialization":false,"inbreedingDetected":false,"noInbreeding":true}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [atBirthTraits.applyEpigeneticTraitsAtBirth] Final traits: {"positive":[],"negative":[],"hidden":[]}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [horseModel.createHorse] Applied at-birth traits: {"positive":[],"negative":[],"hidden":[]}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [horseModel.createHorse] Breeding analysis - Lineage specialization: false, Inbreeding: false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [horseModel.createHorse] Successfully created horse: Trait Test Foal (ID: 11079)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [horseController.createFoal] Successfully created foal: Trait Test Foal (ID: 11079)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [POST] /api/horses/foals - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [POST] /api/foals/11079/enrichment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1045MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [foalRoutes] POST /api/foals/11079/enrichment - Day 1, Activity: Feeding Assistance

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [foalModel.completeEnrichmentActivity] Processing enrichment activity "Feeding Assistance" for foal 11079 on day 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [foalModel.completeEnrichmentActivity] Activity completed successfully. Bond: 0 -> 7, Stress: 0 -> 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [POST] /api/foals/11079/enrichment - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 11079

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [traitDiscovery.revealTraits] Found 0 hidden traits for horse 11079

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [traitDiscovery.revealTraits] No hidden traits to reveal for horse 11079

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [POST] /api/traits/discover/11079

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1046MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [traitController.discoverTraits] Triggering trait discovery for horse 11079

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 11079

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [traitDiscovery.revealTraits] Found 0 hidden traits for horse 11079

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [traitDiscovery.revealTraits] No hidden traits to reveal for horse 11079

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [POST] /api/traits/discover/11079 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [GET] /api/traits/discovery-status/11079

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1045MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [traitController.getDiscoveryStatus] Getting discovery status for horse 11079

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [GET] /api/traits/discovery-status/11079 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [POST] /api/milestones/evaluate-milestone

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1044MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [auth] Authenticated user 3ece9401-37aa-49ba-b4cc-de6e00e5aa93 for POST /evaluate-milestone

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [enhancedMilestoneController.evaluateMilestone] Evaluating milestone imprinting for horse 11079

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [enhancedMilestoneEvaluationSystem.evaluateEnhancedMilestone] Starting evaluation for horse 11079, milestone imprinting

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [enhancedMilestoneEvaluationSystem] No personality effects applied - missing groom personality or horse temperament

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [enhancedMilestoneEvaluationSystem.evaluateEnhancedMilestone] Completed evaluation for horse 11079: withdrawn (score: -5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [POST] /api/milestones/evaluate-milestone - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [GET] /api/horses/11078/environmental-analysis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1047MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [auth] Authenticated user 3ece9401-37aa-49ba-b4cc-de6e00e5aa93 for GET /horses/11078/environmental-analysis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: Environmental analysis generated for horse 11078 by user 3ece9401-37aa-49ba-b4cc-de6e00e5aa93

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [GET] /api/horses/11078/environmental-analysis - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [GET] /api/horses/11078/trait-matrix

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1041MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [auth] Authenticated user 3ece9401-37aa-49ba-b4cc-de6e00e5aa93 for GET /horses/11078/trait-matrix

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: Trait interaction matrix generated for horse 11078 by user 3ece9401-37aa-49ba-b4cc-de6e00e5aa93

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [GET] /api/horses/11078/trait-matrix - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [GET] /api/horses/11078

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1046MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [horseModel.getHorseById] Successfully found horse: Cross System Test Horse (ID: 11078)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [GET] /api/horses/11078 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1045MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [trainingController.trainRouteHandler] Training request for horse 11078 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [trainingController.trainHorse] Attempting to train horse 11078 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [trainingController.canTrain] Checking training eligibility for horse 11078 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [trainingModel.getHorseAge] Getting age for horse 11078

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [trainingModel.getHorseAge] Horse 11078 is 28 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11078 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [trainingModel.getAnyRecentTraining] No training records found for horse 11078

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [trainingController.canTrain] Horse 11078 is eligible to train in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [horseModel.getHorseById] Successfully found horse: Cross System Test Horse (ID: 11078)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [trainingController.trainHorse] Horse 11078 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [trainingModel.logTrainingSession] Logging training session for horse 11078 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 824

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [horseModel.incrementDisciplineScore] Incrementing Racing score for horse 11078 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [horseModel.updateDisciplineScore] Updating Racing score for horse 11078 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [horseModel.updateDisciplineScore] Successfully updated Racing score for horse 11078: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [horseModel.incrementDisciplineScore] Successfully incremented Racing score for horse 11078

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [xpLogModel.logXpEvent] Logging XP event: User 3ece9401-37aa-49ba-b4cc-de6e00e5aa93, Amount: 5, Reason: Trained horse Cross System Test Horse in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 588, User 3ece9401-37aa-49ba-b4cc-de6e00e5aa93, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [trainingController.trainHorse] Awarded 5 XP to user 3ece9401-37aa-49ba-b4cc-de6e00e5aa93 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [trainingController.trainHorse] Successfully trained horse 11078 in Racing (Log ID: 824, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [GET] /api/horses/11078

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1043MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [horseModel.getHorseById] Successfully found horse: Cross System Test Horse (ID: 11078)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [GET] /api/horses/11078 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [GET] /api/competition/eligibility/11078/Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1041MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [auth] Authenticated user 3ece9401-37aa-49ba-b4cc-de6e00e5aa93 for GET /eligibility/11078/Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [competitionRoutes.GET /eligibility] Checking eligibility for horse 11078 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [horseModel.getHorseById] Successfully found horse: Cross System Test Horse (ID: 11078)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [competitionRoutes.GET /eligibility] Horse 11078 eligibility checked for Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [GET] /api/competition/eligibility/11078/Racing - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [POST] /api/competition/enter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1043MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [auth] Authenticated user 3ece9401-37aa-49ba-b4cc-de6e00e5aa93 for POST /enter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [competitionRoutes.POST /enter] User 3ece9401-37aa-49ba-b4cc-de6e00e5aa93 entering horse 11078 in show 548

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [horseModel.getHorseById] Successfully found horse: Cross System Test Horse (ID: 11078)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [competitionRoutes.POST /enter] Successfully entered horse 11078 in show 548

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [POST] /api/competition/enter - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [POST] /api/competition/execute

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1044MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [auth] Authenticated user 3ece9401-37aa-49ba-b4cc-de6e00e5aa93 for POST /execute

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [competitionRoutes.POST /execute] User 3ece9401-37aa-49ba-b4cc-de6e00e5aa93 executing competition for show 548

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [competitionRoutes.POST /execute] Executing competition with 1 entries

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [enhancedCompetitionSimulation] Executing competition: Cross System Test Show 1763765509540 (Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [calculateCompetitionScore] Horse Cross System Test Horse: Base score for Racing: 240

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:51:49] info: [calculateCompetitionScore] Horse Cross System Test Horse: Luck modifier: -5.6%, adjustment: -13.4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:51:49] info: [calculateCompetitionScore] Horse Cross System Test Horse: Final score: 227 (base: 240, trait: +0, luck: -13.4)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:51:49] info: [enhancedCompetitionSimulation] Horse Cross System Test Horse (ID: 11078) scored 227 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:51:49] info: [resultModel.saveResult] Successfully updated placeholder result for horse 11078 in show 548 with score 227

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [horseXpModel.addXpToHorse] Added 30 XP to horse Cross System Test Horse (ID: 11078). New XP: 30, Stat points gained: 0, Available: 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [enhancedCompetitionSimulation] Awarded 30 Horse XP to Cross System Test Horse for 1st place

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [enhancedCompetitionSimulation] Competition completed. 1 entries processed.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [competitionRoutes.POST /execute] Competition executed successfully for show 548

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [POST] /api/competition/execute - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [GET] /api/horses/11078/xp

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1051MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [auth] Authenticated user 3ece9401-37aa-49ba-b4cc-de6e00e5aa93 for GET /11078/xp

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [horseXpController.getHorseXpStatus] Retrieved XP status for horse Cross System Test Horse (ID: 11078)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [GET] /api/horses/11078/xp - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [GET] /api/leaderboards/competition?discipline=Racing&timeframe=all

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1049MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [auth] Authenticated user 3ece9401-37aa-49ba-b4cc-de6e00e5aa93 for GET /competition

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [leaderboardRoutes.GET /competition] Getting competition leaderboard: discipline=Racing, period=all, metric=wins

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [leaderboardRoutes.GET /competition] Retrieved 0 leaderboard entries

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [GET] /api/leaderboards/competition?discipline=Racing&timeframe=all - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [GET] /api/grooms/user/3ece9401-37aa-49ba-b4cc-de6e00e5aa93

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1049MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [groomController.getUserGrooms] Getting grooms for user 3ece9401-37aa-49ba-b4cc-de6e00e5aa93

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [GET] /api/grooms/user/3ece9401-37aa-49ba-b4cc-de6e00e5aa93 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [POST] /api/grooms/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1046MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [groomController.recordInteraction] Recording brushing interaction for foal 11078

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] warn: [groomPersonalityEffects.calculatePersonalityEffects] Unknown personality: methodical

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for methodical: none

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [groomController.recordInteraction] Interaction recorded: 10 bonding, -1 stress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 4644 for interaction_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [groomProgressionService.awardGroomXP] Groom 4644 gained 2 XP: 200 ‚Üí 202 (Level 4 ‚Üí 2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [groomController.recordInteraction] Awarded 2 XP to groom 4644 for interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [POST] /api/grooms/interact - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [GET] /api/grooms/user/3ece9401-37aa-49ba-b4cc-de6e00e5aa93

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1053MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [groomController.getUserGrooms] Getting grooms for user 3ece9401-37aa-49ba-b4cc-de6e00e5aa93

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [GET] /api/grooms/user/3ece9401-37aa-49ba-b4cc-de6e00e5aa93 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [GET] /api/grooms/4644/retirement/eligibility

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1049MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [auth] Authenticated user 3ece9401-37aa-49ba-b4cc-de6e00e5aa93 for GET /4644/retirement/eligibility

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [GET] /api/grooms/4644/retirement/eligibility - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [POST] /api/grooms/assign

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1054MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [auth] Authenticated user 3ece9401-37aa-49ba-b4cc-de6e00e5aa93 for POST /assign

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [groomController.assignGroom] Assigning groom 4644 to foal 11078

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [groomSystem.assignGroomToFoal] Assigning groom 4644 to foal 11078

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [groomSystem.assignGroomToFoal] Successfully assigned Cross System Test Groom to foal Cross System Test Horse

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [POST] /api/grooms/assign - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [GET] /api/grooms/assignments/11078

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1055MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [groomController.getFoalAssignments] Getting assignments for foal 11078

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [GET] /api/grooms/assignments/11078 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [GET] /api/memory/status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1052MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [auth] Authenticated user 3ece9401-37aa-49ba-b4cc-de6e00e5aa93 for GET /status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [MemoryManagement] Getting memory status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [GET] /api/memory/status - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1048MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1053MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1058MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1047MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1052MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1057MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1047MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1052MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1057MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1047MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [GET] /api/memory/status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1054MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [auth] Authenticated user 3ece9401-37aa-49ba-b4cc-de6e00e5aa93 for GET /status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [MemoryManagement] Getting memory status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [GET] /api/memory/status - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [POST] /api/memory/gc

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1055MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [auth] Authenticated user 3ece9401-37aa-49ba-b4cc-de6e00e5aa93 for POST /gc

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [MemoryManagement] Manual GC trigger requested (force: false)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [POST] /api/memory/gc - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1053MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [GET] /api/horses?page=1&limit=5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1049MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [GET] /api/horses?page=1&limit=5 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [GET] /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1049MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [GET] /api-docs/swagger.json - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [GET] /api/docs/health

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1049MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [auth] Authenticated user 3ece9401-37aa-49ba-b4cc-de6e00e5aa93 for GET /health

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [DocumentationRoutes] Getting documentation health status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [ApiDocService] OpenAPI specification validation passed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [GET] /api/docs/health - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [GET] /api/user-docs/search?q=competition

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1056MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [UserDocRoutes] Searching documentation for: "competition"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [UserDocService] Built search index with 1244 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [GET] /api/user-docs/search?q=competition - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [GET] /api/user-docs/feature-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1055MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [UserDocRoutes] Getting document: feature-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [GET] /api/user-docs/feature-guide - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [GET] /api/user-docs/analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1054MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [UserDocRoutes] Getting documentation analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [GET] /api/user-docs/analytics - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [GET] /health

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1055MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [GET] /health - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [GET] /ping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1054MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [GET] /ping - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [GET] /api/memory/health

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1050MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [auth] Authenticated user 3ece9401-37aa-49ba-b4cc-de6e00e5aa93 for GET /health

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [MemoryManagement] Getting system health assessment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [GET] /api/memory/health - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [GET] /api/user-docs/health

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1052MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [GET] /api/user-docs/health - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/horseAgingIntegration.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:51:50] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:50] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

PASS tests/controllers/personalityEvolutionController.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:51:51] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:51] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:51] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:51:51] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:51] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:51] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:51] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:51] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:51] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:51] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:51] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [POST] /api/personality-evolution/groom/4645/evolve

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1105MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [auth] Authenticated user test-user-uuid-123 for POST /groom/4645/evolve

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [personalityEvolutionController.evolveGroomPersonalityController] Processing groom evolution for ID: 4645

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [personalityEvolutionSystem.evolveGroomPersonality] Starting evolution analysis for groom 4645

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [personalityEvolutionSystem.applyPersonalityEvolutionEffects] Applying effects for groom 4645

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [POST] /api/personality-evolution/groom/4645/evolve - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [POST] /api/personality-evolution/groom/invalid/evolve

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1106MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [auth] Authenticated user test-user-uuid-123 for POST /groom/invalid/evolve

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] warn: [personalityEvolutionRoutes] Validation errors: [{"type":"field","value":"invalid","msg":"Groom ID must be a positive integer","path":"groomId","location":"params"}]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [POST] /api/personality-evolution/groom/invalid/evolve - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [POST] /api/personality-evolution/groom/4645/evolve

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1104MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] warn: [auth] Missing token for POST /groom/4645/evolve from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [POST] /api/personality-evolution/groom/4645/evolve - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [POST] /api/personality-evolution/horse/11087/evolve

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1103MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [auth] Authenticated user test-user-uuid-123 for POST /horse/11087/evolve

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [personalityEvolutionController.evolveHorseTemperamentController] Processing horse evolution for ID: 11087

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [personalityEvolutionSystem.evolveHorseTemperament] Starting evolution analysis for horse 11087

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [personalityEvolutionSystem.applyPersonalityEvolutionEffects] Applying effects for horse 11087

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [POST] /api/personality-evolution/horse/11087/evolve - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [POST] /api/personality-evolution/horse/invalid/evolve

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1107MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [auth] Authenticated user test-user-uuid-123 for POST /horse/invalid/evolve

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] warn: [personalityEvolutionRoutes] Validation errors: [{"type":"field","value":"invalid","msg":"Horse ID must be a positive integer","path":"horseId","location":"params"}]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [POST] /api/personality-evolution/horse/invalid/evolve - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [GET] /api/personality-evolution/groom/4645/triggers

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1105MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [auth] Authenticated user test-user-uuid-123 for GET /groom/4645/triggers

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [personalityEvolutionController.getEvolutionTriggersController] Analyzing triggers for groom ID: 4645

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [personalityEvolutionSystem.calculatePersonalityEvolutionTriggers] Analyzing triggers for groom 4645

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [GET] /api/personality-evolution/groom/4645/triggers - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [GET] /api/personality-evolution/horse/11087/triggers

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1107MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [auth] Authenticated user test-user-uuid-123 for GET /horse/11087/triggers

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [personalityEvolutionController.getEvolutionTriggersController] Analyzing triggers for horse ID: 11087

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [personalityEvolutionSystem.calculatePersonalityEvolutionTriggers] Analyzing triggers for horse 11087

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [GET] /api/personality-evolution/horse/11087/triggers - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [GET] /api/personality-evolution/invalid/4645/triggers

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1112MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [auth] Authenticated user test-user-uuid-123 for GET /invalid/4645/triggers

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] warn: [personalityEvolutionRoutes] Validation errors: [{"type":"field","value":"invalid","msg":"Entity type must be either \"groom\" or \"horse\"","path":"entityType","location":"params"}]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [GET] /api/personality-evolution/invalid/4645/triggers - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [GET] /api/personality-evolution/groom/4645/stability

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1110MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [auth] Authenticated user test-user-uuid-123 for GET /groom/4645/stability

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [personalityEvolutionController.getPersonalityStabilityController] Analyzing stability for groom ID: 4645

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [personalityEvolutionSystem.analyzePersonalityStability] Analyzing stability for groom 4645

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [GET] /api/personality-evolution/groom/4645/stability - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [GET] /api/personality-evolution/horse/11087/stability

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1110MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [auth] Authenticated user test-user-uuid-123 for GET /horse/11087/stability

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [personalityEvolutionController.getPersonalityStabilityController] Analyzing stability for horse ID: 11087

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [personalityEvolutionSystem.analyzePersonalityStability] Analyzing stability for horse 11087

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [GET] /api/personality-evolution/horse/11087/stability - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [GET] /api/personality-evolution/groom/4645/predict

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1109MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [auth] Authenticated user test-user-uuid-123 for GET /groom/4645/predict

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [personalityEvolutionController.predictPersonalityEvolutionController] Predicting evolution for groom ID: 4645 over 30 days

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [personalityEvolutionSystem.predictPersonalityEvolution] Predicting evolution for groom 4645 over 30 days

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [GET] /api/personality-evolution/groom/4645/predict - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [GET] /api/personality-evolution/horse/11087/predict?timeframeDays=60

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1108MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [auth] Authenticated user test-user-uuid-123 for GET /horse/11087/predict

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [personalityEvolutionController.predictPersonalityEvolutionController] Predicting evolution for horse ID: 11087 over 60 days

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [personalityEvolutionSystem.predictPersonalityEvolution] Predicting evolution for horse 11087 over 60 days

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [GET] /api/personality-evolution/horse/11087/predict?timeframeDays=60 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [GET] /api/personality-evolution/groom/4645/predict?timeframeDays=500

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1107MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [auth] Authenticated user test-user-uuid-123 for GET /groom/4645/predict

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] warn: [personalityEvolutionRoutes] Validation errors: [{"type":"field","value":"500","msg":"Timeframe must be between 1 and 365 days","path":"timeframeDays","location":"query"}]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [GET] /api/personality-evolution/groom/4645/predict?timeframeDays=500 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [GET] /api/personality-evolution/groom/4645/history

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1106MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [auth] Authenticated user test-user-uuid-123 for GET /groom/4645/history

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [personalityEvolutionController.getPersonalityEvolutionHistoryController] Getting evolution history for groom ID: 4645

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [personalityEvolutionSystem.getPersonalityEvolutionHistory] Getting history for groom 4645

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [GET] /api/personality-evolution/groom/4645/history - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [POST] /api/personality-evolution/apply-effects

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1108MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [auth] Authenticated user test-user-uuid-123 for POST /apply-effects

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [personalityEvolutionController.applyPersonalityEvolutionEffectsController] Applying evolution effects for groom ID: 4645

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [personalityEvolutionSystem.applyPersonalityEvolutionEffects] Applying effects for groom 4645

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [POST] /api/personality-evolution/apply-effects - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [POST] /api/personality-evolution/apply-effects

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1108MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [auth] Authenticated user test-user-uuid-123 for POST /apply-effects

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] warn: [personalityEvolutionRoutes] Validation errors: [{"type":"field","msg":"Entity type must be either \"groom\" or \"horse\"","path":"entityType","location":"body"},{"type":"field","msg":"Invalid evolution type","path":"evolutionType","location":"body"}]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [POST] /api/personality-evolution/apply-effects - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [POST] /api/personality-evolution/batch-evolve

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1108MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [auth] Authenticated user test-user-uuid-123 for POST /batch-evolve

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [personalityEvolutionController.batchEvolvePersonalitiesController] Processing batch evolution for 2 entities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [personalityEvolutionSystem.evolveGroomPersonality] Starting evolution analysis for groom 4645

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [personalityEvolutionSystem.applyPersonalityEvolutionEffects] Applying effects for groom 4645

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [personalityEvolutionSystem.evolveHorseTemperament] Starting evolution analysis for horse 11087

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [personalityEvolutionSystem.applyPersonalityEvolutionEffects] Applying effects for horse 11087

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [POST] /api/personality-evolution/batch-evolve - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [POST] /api/personality-evolution/batch-evolve

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1115MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [auth] Authenticated user test-user-uuid-123 for POST /batch-evolve

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] warn: [personalityEvolutionRoutes] Validation errors: [{"type":"field","value":[],"msg":"Entities must be an array with 1-50 items","path":"entities","location":"body"}]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [POST] /api/personality-evolution/batch-evolve - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [GET] /api/personality-evolution/config

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1113MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [auth] Authenticated user test-user-uuid-123 for GET /config

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:52] info: [GET] /api/personality-evolution/config - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/traitTimeline.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:51:53] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:53] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:53] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:51:53] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:53] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:53] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:53] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:53] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:53] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:53] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:53] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:53] info: [traitTimelineService.generateTraitTimeline] Generating trait timeline for horse 11088

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:53] info: [traitTimelineService.generateTraitTimeline] Generated timeline with 5 events for horse 11088

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:53] info: [traitTimelineService.generateTraitTimeline] Generating trait timeline for horse 11089

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:53] info: [traitTimelineService.generateTraitTimeline] Generated timeline with 1 events for horse 11089

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:53] info: [traitTimelineService.generateTraitTimeline] Generating trait timeline for horse 11090

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:53] info: [traitTimelineService.generateTraitTimeline] Generated timeline with 1 events for horse 11090

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:53] info: [traitTimelineService.generateTraitTimeline] Generating trait timeline for horse 11091

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:53] info: [traitTimelineService.generateTraitTimeline] Generated timeline with 4 events for horse 11091

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:53] info: [traitTimelineService.generateTraitTimeline] Generating trait timeline for horse 11092

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:53] info: [traitTimelineService.generateTraitTimeline] Generated timeline with 0 events for horse 11092

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:53] info: [traitTimelineService.generateTraitTimeline] Generating trait timeline for horse 11093

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:53] info: [traitTimelineService.generateTraitTimeline] Generated timeline with 6 events for horse 11093

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:53] info: [traitTimelineService.generateTraitTimeline] Generating trait timeline for horse 11094

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:53] info: [traitTimelineService.generateTraitTimeline] Generated timeline with 4 events for horse 11094

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:54] info: [GET] /api/horses/11095/trait-card

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:54] warn: [MemoryMonitoring] Memory threshold exceeded: 1146MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:54] info: [auth] Authenticated user 45cdf952-e7d6-4953-a690-a827c8be49a4 for GET /11095/trait-card

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:54] info: [traitTimelineService.generateTraitTimeline] Generating trait timeline for horse 11095

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:54] info: [traitTimelineService.generateTraitTimeline] Generated timeline with 1 events for horse 11095

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:54] info: [GET] /api/horses/11095/trait-card - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:54] info: [GET] /api/horses/11096/trait-card

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:54] warn: [MemoryMonitoring] Memory threshold exceeded: 1151MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:54] warn: [auth] Missing token for GET /11096/trait-card from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:54] info: [GET] /api/horses/11096/trait-card - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:54] info: [GET] /api/horses/99999/trait-card

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:54] warn: [MemoryMonitoring] Memory threshold exceeded: 1152MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:54] info: [auth] Authenticated user eb6c1cc9-b3c4-4e00-b0b3-86a385bdef06 for GET /99999/trait-card

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:54] info: [traitTimelineService.generateTraitTimeline] Generating trait timeline for horse 99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:54] info: [traitTimelineService.generateTraitTimeline] Generated timeline with 0 events for horse 99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:54] info: [GET] /api/horses/99999/trait-card - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:54] info: [GET] /api/horses/11098/trait-card

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:54] warn: [MemoryMonitoring] Memory threshold exceeded: 1153MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:54] info: [auth] Authenticated user 9e680195-096b-4351-b3fa-dd956cb4b16b for GET /11098/trait-card

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:54] info: [traitTimelineService.generateTraitTimeline] Generating trait timeline for horse 11098

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:54] info: [traitTimelineService.generateTraitTimeline] Generated timeline with 0 events for horse 11098

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:54] info: [GET] /api/horses/11098/trait-card - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/training.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:51:54] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:54] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:54] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:51:55] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] warn: [MemoryMonitoring] Memory threshold exceeded: 1180MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.trainRouteHandler] Training request for horse 11100 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.trainHorse] Attempting to train horse 11100 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.canTrain] Checking training eligibility for horse 11100 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingModel.getHorseAge] Getting age for horse 11100

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingModel.getHorseAge] Horse 11100 is 2 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.canTrain] Horse 11100 is too young (2 years old)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] warn: [trainingController.trainHorse] Training rejected: Horse is under age

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [POST] /api/training/train - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] warn: [MemoryMonitoring] Memory threshold exceeded: 1183MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.trainRouteHandler] Training request for horse 11099 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.trainHorse] Attempting to train horse 11099 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.canTrain] Checking training eligibility for horse 11099 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingModel.getHorseAge] Getting age for horse 11099

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingModel.getHorseAge] Horse 11099 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11099 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingModel.getAnyRecentTraining] No training records found for horse 11099

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.canTrain] Horse 11099 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [horseModel.getHorseById] Successfully found horse: Test Adult Horse (ID: 11099)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.trainHorse] Horse 11099 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingModel.logTrainingSession] Logging training session for horse 11099 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 826

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [horseModel.incrementDisciplineScore] Incrementing Dressage score for horse 11099 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [horseModel.updateDisciplineScore] Updating Dressage score for horse 11099 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [horseModel.updateDisciplineScore] Successfully updated Dressage score for horse 11099: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [horseModel.incrementDisciplineScore] Successfully incremented Dressage score for horse 11099

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [xpLogModel.logXpEvent] Logging XP event: User 33ba8229-8e07-4095-b374-98dacee4b68c, Amount: 5, Reason: Trained horse Test Adult Horse in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 590, User 33ba8229-8e07-4095-b374-98dacee4b68c, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.trainHorse] Awarded 5 XP to user 33ba8229-8e07-4095-b374-98dacee4b68c for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.trainHorse] Successfully trained horse 11099 in Dressage (Log ID: 826, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] warn: [MemoryMonitoring] Memory threshold exceeded: 1184MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.trainRouteHandler] Training request for horse 11102 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.trainHorse] Attempting to train horse 11102 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.canTrain] Checking training eligibility for horse 11102 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingModel.getHorseAge] Getting age for horse 11102

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingModel.getHorseAge] Horse 11102 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11102 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingModel.getAnyRecentTraining] No training records found for horse 11102

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.canTrain] Horse 11102 is eligible to train in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [horseModel.getHorseById] Successfully found horse: Score Test Horse (ID: 11102)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.trainHorse] Horse 11102 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingModel.logTrainingSession] Logging training session for horse 11102 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 827

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [horseModel.incrementDisciplineScore] Incrementing Show Jumping score for horse 11102 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [horseModel.updateDisciplineScore] Updating Show Jumping score for horse 11102 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [horseModel.updateDisciplineScore] Successfully updated Show Jumping score for horse 11102: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [horseModel.incrementDisciplineScore] Successfully incremented Show Jumping score for horse 11102

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [xpLogModel.logXpEvent] Logging XP event: User 33ba8229-8e07-4095-b374-98dacee4b68c, Amount: 5, Reason: Trained horse Score Test Horse in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 591, User 33ba8229-8e07-4095-b374-98dacee4b68c, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.trainHorse] Awarded 5 XP to user 33ba8229-8e07-4095-b374-98dacee4b68c for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.trainHorse] Successfully trained horse 11102 in Show Jumping (Log ID: 827, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] warn: [MemoryMonitoring] Memory threshold exceeded: 1186MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.trainRouteHandler] Training request for horse 11103 in Cross Country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.trainHorse] Attempting to train horse 11103 in Cross Country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.canTrain] Checking training eligibility for horse 11103 in Cross Country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingModel.getHorseAge] Getting age for horse 11103

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingModel.getHorseAge] Horse 11103 is 5 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11103 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingModel.getAnyRecentTraining] No training records found for horse 11103

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.canTrain] Horse 11103 is eligible to train in Cross Country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [horseModel.getHorseById] Successfully found horse: Accumulation Test Horse 1 (ID: 11103)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.trainHorse] Horse 11103 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingModel.logTrainingSession] Logging training session for horse 11103 in Cross Country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 828

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [horseModel.incrementDisciplineScore] Incrementing Cross Country score for horse 11103 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [horseModel.updateDisciplineScore] Updating Cross Country score for horse 11103 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [horseModel.updateDisciplineScore] Successfully updated Cross Country score for horse 11103: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [horseModel.incrementDisciplineScore] Successfully incremented Cross Country score for horse 11103

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [xpLogModel.logXpEvent] Logging XP event: User 33ba8229-8e07-4095-b374-98dacee4b68c, Amount: 5, Reason: Trained horse Accumulation Test Horse 1 in Cross Country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 592, User 33ba8229-8e07-4095-b374-98dacee4b68c, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.trainHorse] Awarded 5 XP to user 33ba8229-8e07-4095-b374-98dacee4b68c for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.trainHorse] Successfully trained horse 11103 in Cross Country (Log ID: 828, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] warn: [MemoryMonitoring] Memory threshold exceeded: 1186MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.trainRouteHandler] Training request for horse 11101 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.trainHorse] Attempting to train horse 11101 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.canTrain] Checking training eligibility for horse 11101 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingModel.getHorseAge] Getting age for horse 11101

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingModel.getHorseAge] Horse 11101 is 5 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11101 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 11101: Fri Nov 21 2025 17:51:55 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.canTrain] Horse 11101 still in cooldown for any training (7 days remaining)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] warn: [trainingController.trainHorse] Training rejected: Training cooldown active for this horse

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [POST] /api/training/train - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] warn: [MemoryMonitoring] Memory threshold exceeded: 1189MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.trainRouteHandler] Training request for horse 11105 in Endurance

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.trainHorse] Attempting to train horse 11105 in Endurance

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.canTrain] Checking training eligibility for horse 11105 in Endurance

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingModel.getHorseAge] Getting age for horse 11105

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingModel.getHorseAge] Horse 11105 is 6 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11105 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 11105: Thu Nov 13 2025 17:51:55 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.canTrain] Horse 11105 is eligible to train in Endurance

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [horseModel.getHorseById] Successfully found horse: Old Trained Horse (ID: 11105)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.trainHorse] Horse 11105 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingModel.logTrainingSession] Logging training session for horse 11105 in Endurance

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 830

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [horseModel.incrementDisciplineScore] Incrementing Endurance score for horse 11105 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [horseModel.updateDisciplineScore] Updating Endurance score for horse 11105 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [horseModel.updateDisciplineScore] Successfully updated Endurance score for horse 11105: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [horseModel.incrementDisciplineScore] Successfully incremented Endurance score for horse 11105

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [xpLogModel.logXpEvent] Logging XP event: User 33ba8229-8e07-4095-b374-98dacee4b68c, Amount: 5, Reason: Trained horse Old Trained Horse in Endurance

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 593, User 33ba8229-8e07-4095-b374-98dacee4b68c, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.trainHorse] Awarded 5 XP to user 33ba8229-8e07-4095-b374-98dacee4b68c for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.trainHorse] Successfully trained horse 11105 in Endurance (Log ID: 830, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] warn: [MemoryMonitoring] Memory threshold exceeded: 1189MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.trainRouteHandler] Training request for horse 11106 in Trail

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.trainHorse] Attempting to train horse 11106 in Trail

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.canTrain] Checking training eligibility for horse 11106 in Trail

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingModel.getHorseAge] Getting age for horse 11106

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingModel.getHorseAge] Horse 11106 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11106 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingModel.getAnyRecentTraining] No training records found for horse 11106

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.canTrain] Horse 11106 is eligible to train in Trail

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [horseModel.getHorseById] Successfully found horse: XP Test Horse (ID: 11106)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.trainHorse] Horse 11106 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingModel.logTrainingSession] Logging training session for horse 11106 in Trail

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 831

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [horseModel.incrementDisciplineScore] Incrementing Trail score for horse 11106 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [horseModel.updateDisciplineScore] Updating Trail score for horse 11106 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [horseModel.updateDisciplineScore] Successfully updated Trail score for horse 11106: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [horseModel.incrementDisciplineScore] Successfully incremented Trail score for horse 11106

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [xpLogModel.logXpEvent] Logging XP event: User 33ba8229-8e07-4095-b374-98dacee4b68c, Amount: 5, Reason: Trained horse XP Test Horse in Trail

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 594, User 33ba8229-8e07-4095-b374-98dacee4b68c, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.trainHorse] Awarded 5 XP to user 33ba8229-8e07-4095-b374-98dacee4b68c for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.trainHorse] Successfully trained horse 11106 in Trail (Log ID: 831, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] warn: [MemoryMonitoring] Memory threshold exceeded: 1190MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.trainRouteHandler] Training request for horse 11107 in Reining

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.trainHorse] Attempting to train horse 11107 in Reining

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.canTrain] Checking training eligibility for horse 11107 in Reining

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingModel.getHorseAge] Getting age for horse 11107

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingModel.getHorseAge] Horse 11107 is 5 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11107 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingModel.getAnyRecentTraining] No training records found for horse 11107

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.canTrain] Horse 11107 is eligible to train in Reining

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [horseModel.getHorseById] Successfully found horse: Log Test Horse (ID: 11107)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.trainHorse] Horse 11107 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingModel.logTrainingSession] Logging training session for horse 11107 in Reining

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 832

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [horseModel.incrementDisciplineScore] Incrementing Reining score for horse 11107 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [horseModel.updateDisciplineScore] Updating Reining score for horse 11107 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [horseModel.updateDisciplineScore] Successfully updated Reining score for horse 11107: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [horseModel.incrementDisciplineScore] Successfully incremented Reining score for horse 11107

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [xpLogModel.logXpEvent] Logging XP event: User 33ba8229-8e07-4095-b374-98dacee4b68c, Amount: 5, Reason: Trained horse Log Test Horse in Reining

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 595, User 33ba8229-8e07-4095-b374-98dacee4b68c, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.trainHorse] Awarded 5 XP to user 33ba8229-8e07-4095-b374-98dacee4b68c for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.trainHorse] Successfully trained horse 11107 in Reining (Log ID: 832, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] warn: [MemoryMonitoring] Memory threshold exceeded: 1189MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.trainRouteHandler] Training request for horse 99999 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.trainHorse] Attempting to train horse 99999 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.canTrain] Checking training eligibility for horse 99999 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingModel.getHorseAge] Getting age for horse 99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingModel.getHorseAge] Horse 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] warn: [trainingController.canTrain] Horse 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] warn: [trainingController.trainHorse] Training rejected: Horse not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [POST] /api/training/train - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] warn: [MemoryMonitoring] Memory threshold exceeded: 1190MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] warn: [trainingRoutes] Validation errors: [{"type":"field","value":"invalid","msg":"Horse ID must be a positive integer","path":"horseId","location":"body"},{"type":"field","value":"","msg":"Discipline is required","path":"discipline","location":"body"},{"type":"field","value":"","msg":"Discipline must be between 1 and 50 characters","path":"discipline","location":"body"}]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [POST] /api/training/train - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] warn: [MemoryMonitoring] Memory threshold exceeded: 1185MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.trainRouteHandler] Training request for horse 11108 in Driving

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.trainHorse] Attempting to train horse 11108 in Driving

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.canTrain] Checking training eligibility for horse 11108 in Driving

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingModel.getHorseAge] Getting age for horse 11108

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingModel.getHorseAge] Horse 11108 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11108 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingModel.getAnyRecentTraining] No training records found for horse 11108

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.canTrain] Horse 11108 is eligible to train in Driving

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [horseModel.getHorseById] Successfully found horse: Date Test Horse (ID: 11108)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.trainHorse] Horse 11108 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingModel.logTrainingSession] Logging training session for horse 11108 in Driving

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 833

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [horseModel.incrementDisciplineScore] Incrementing Driving score for horse 11108 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [horseModel.updateDisciplineScore] Updating Driving score for horse 11108 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [horseModel.updateDisciplineScore] Successfully updated Driving score for horse 11108: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [horseModel.incrementDisciplineScore] Successfully incremented Driving score for horse 11108

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [xpLogModel.logXpEvent] Logging XP event: User 33ba8229-8e07-4095-b374-98dacee4b68c, Amount: 5, Reason: Trained horse Date Test Horse in Driving

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 596, User 33ba8229-8e07-4095-b374-98dacee4b68c, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.trainHorse] Awarded 5 XP to user 33ba8229-8e07-4095-b374-98dacee4b68c for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [trainingController.trainHorse] Successfully trained horse 11108 in Driving (Log ID: 833, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:55] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/breedingPrediction.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:51:56] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:56] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:56] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:51:56] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:56] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:56] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:56] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:56] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:56] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:56] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:56] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:56] info: [breedingPredictionService.calculateInheritanceProbabilities] Calculating inheritance for stallion 11109 and mare 11110

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:56] info: [breedingPredictionService.calculateInheritanceProbabilities] Calculated 6 trait probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:56] info: [breedingPredictionService.calculateFlagInheritanceScore] Calculating flag inheritance for stallion 11111 and mare 11112

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:56] info: [breedingPredictionService.calculateInheritanceProbabilities] Calculating inheritance for stallion 11111 and mare 11112

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:56] info: [breedingPredictionService.calculateInheritanceProbabilities] Calculated 2 trait probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:56] info: [breedingPredictionService.calculateFlagInheritanceScore] Calculated flag inheritance score: 13.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:56] info: [breedingPredictionService.calculateInheritanceProbabilities] Calculating inheritance for stallion 11113 and mare 11114

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:56] info: [breedingPredictionService.calculateInheritanceProbabilities] Calculated 0 trait probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:56] info: [breedingPredictionService.calculateTemperamentInfluence] Calculating temperament influence for stallion 11115 and mare 11116

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:56] info: [breedingPredictionService.calculateTemperamentInfluence] Calculated temperament compatibility: 70

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:57] info: [breedingPredictionService.predictOffspringTraits] Predicting offspring traits for stallion 11117 and mare 11118

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:57] info: [breedingPredictionService.calculateInheritanceProbabilities] Calculating inheritance for stallion 11117 and mare 11118

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:57] info: [breedingPredictionService.calculateInheritanceProbabilities] Calculated 4 trait probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:57] info: [breedingPredictionService.calculateFlagInheritanceScore] Calculating flag inheritance for stallion 11117 and mare 11118

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:57] info: [breedingPredictionService.calculateInheritanceProbabilities] Calculating inheritance for stallion 11117 and mare 11118

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:57] info: [breedingPredictionService.calculateInheritanceProbabilities] Calculated 4 trait probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:57] info: [breedingPredictionService.calculateFlagInheritanceScore] Calculated flag inheritance score: 26.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:57] info: [breedingPredictionService.predictOffspringTraits] Predicted 2 traits with medium confidence

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:57] info: [breedingPredictionService.calculateInheritanceProbabilities] Calculating inheritance for stallion 11119 and mare 11120

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:57] info: [breedingPredictionService.calculateInheritanceProbabilities] Calculated 2 trait probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:57] info: [GET] /api/horses/11121/breeding-data

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1217MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:57] info: [auth] Authenticated user 422df82a-0b97-44a5-bedc-2418e8d2ec5b for GET /11121/breeding-data

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:57] info: [breedingPredictionService.generateBreedingData] Generating breeding data for horse 11121

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:57] info: [breedingPredictionService.generateBreedingData] Generated breeding data for horse 11121 with 1 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:57] info: [GET] /api/horses/11121/breeding-data - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:57] info: [GET] /api/horses/11123/breeding-data

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1225MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:57] warn: [auth] Missing token for GET /11123/breeding-data from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:57] info: [GET] /api/horses/11123/breeding-data - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:57] info: [GET] /api/horses/11125/breeding-data

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1214MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:57] info: [auth] Authenticated user 9e4efd85-5b9a-4d15-a868-05b4989043ba for GET /11125/breeding-data

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:57] info: [breedingPredictionService.generateBreedingData] Generating breeding data for horse 11125

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:57] info: [breedingPredictionService.generateBreedingData] Generated breeding data for horse 11125 with 0 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:57] info: [GET] /api/horses/11125/breeding-data - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/routes/advancedEpigeneticRoutes.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:51:57] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:57] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:57] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:51:58] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: [GET] /api/horses/11127/environmental-analysis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1253MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: [auth] Authenticated user f2f436cb-99bf-4b68-8c2d-453761966cf4 for GET /horses/11127/environmental-analysis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: Environmental analysis generated for horse 11127 by user f2f436cb-99bf-4b68-8c2d-453761966cf4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: [GET] /api/horses/11127/environmental-analysis - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: [GET] /api/horses/11127/environmental-forecast?days=30

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1251MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: [auth] Authenticated user f2f436cb-99bf-4b68-8c2d-453761966cf4 for GET /horses/11127/environmental-forecast

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: Environmental forecast generated for horse 11127 (30 days) by user f2f436cb-99bf-4b68-8c2d-453761966cf4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: [GET] /api/horses/11127/environmental-forecast?days=30 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: [POST] /api/horses/11127/evaluate-trait-opportunity

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1253MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: [auth] Authenticated user f2f436cb-99bf-4b68-8c2d-453761966cf4 for POST /horses/11127/evaluate-trait-opportunity

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: Trait opportunity evaluated for horse 11127 (confident in early_socialization) by user f2f436cb-99bf-4b68-8c2d-453761966cf4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: [POST] /api/horses/11127/evaluate-trait-opportunity - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: [GET] /api/horses/11127/environmental-analysis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1255MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] warn: [auth] Missing token for GET /horses/11127/environmental-analysis from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: [GET] /api/horses/11127/environmental-analysis - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: [GET] /api/horses/11129/environmental-analysis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1255MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: [auth] Authenticated user f2f436cb-99bf-4b68-8c2d-453761966cf4 for GET /horses/11129/environmental-analysis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: [GET] /api/horses/11129/environmental-analysis - 403

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: [GET] /api/horses/11128/trait-interactions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1255MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: [auth] Authenticated user f2f436cb-99bf-4b68-8c2d-453761966cf4 for GET /horses/11128/trait-interactions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: Trait interactions analyzed for horse 11128 by user f2f436cb-99bf-4b68-8c2d-453761966cf4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: [GET] /api/horses/11128/trait-interactions - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: [GET] /api/horses/11128/trait-matrix

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1260MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: [auth] Authenticated user f2f436cb-99bf-4b68-8c2d-453761966cf4 for GET /horses/11128/trait-matrix

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: Trait interaction matrix generated for horse 11128 by user f2f436cb-99bf-4b68-8c2d-453761966cf4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: [GET] /api/horses/11128/trait-matrix - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: [GET] /api/horses/11128/trait-stability

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1251MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: [auth] Authenticated user f2f436cb-99bf-4b68-8c2d-453761966cf4 for GET /horses/11128/trait-stability

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: Trait stability analyzed for horse 11128 by user f2f436cb-99bf-4b68-8c2d-453761966cf4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: [GET] /api/horses/11128/trait-stability - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: [GET] /api/horses/11127/developmental-windows

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1251MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: [auth] Authenticated user f2f436cb-99bf-4b68-8c2d-453761966cf4 for GET /horses/11127/developmental-windows

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: Developmental windows identified for horse 11127 by user f2f436cb-99bf-4b68-8c2d-453761966cf4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: [GET] /api/horses/11127/developmental-windows - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: [GET] /api/horses/11127/developmental-forecast?days=60

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1254MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: [auth] Authenticated user f2f436cb-99bf-4b68-8c2d-453761966cf4 for GET /horses/11127/developmental-forecast

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: Developmental forecast generated for horse 11127 (60 days) by user f2f436cb-99bf-4b68-8c2d-453761966cf4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: [GET] /api/horses/11127/developmental-forecast?days=60 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: [GET] /api/horses/11127/critical-period-analysis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1255MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: [auth] Authenticated user f2f436cb-99bf-4b68-8c2d-453761966cf4 for GET /horses/11127/critical-period-analysis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: Critical period analysis generated for horse 11127 by user f2f436cb-99bf-4b68-8c2d-453761966cf4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: [GET] /api/horses/11127/critical-period-analysis - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: [POST] /api/horses/11127/coordinate-development

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1262MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: [auth] Authenticated user f2f436cb-99bf-4b68-8c2d-453761966cf4 for POST /horses/11127/coordinate-development

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: Development coordination generated for horse 11127 by user f2f436cb-99bf-4b68-8c2d-453761966cf4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: [POST] /api/horses/11127/coordinate-development - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: [POST] /api/horses/11127/evaluate-trait-opportunity

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1262MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: [auth] Authenticated user f2f436cb-99bf-4b68-8c2d-453761966cf4 for POST /horses/11127/evaluate-trait-opportunity

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: [POST] /api/horses/11127/evaluate-trait-opportunity - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: [GET] /api/horses/11127/developmental-forecast?days=-5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1259MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: [auth] Authenticated user f2f436cb-99bf-4b68-8c2d-453761966cf4 for GET /horses/11127/developmental-forecast

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: [GET] /api/horses/11127/developmental-forecast?days=-5 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: [GET] /api/horses/99999/environmental-analysis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1256MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: [auth] Authenticated user f2f436cb-99bf-4b68-8c2d-453761966cf4 for GET /horses/99999/environmental-analysis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:58] info: [GET] /api/horses/99999/environmental-analysis - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

FAIL tests/integration/epigeneticTraitSystem.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:51:59] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:59] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:59] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:51:59] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:59] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:59] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:59] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:59] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:59] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:59] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:59] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:59] info: [GET] /api/epigenetic-traits/definitions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1096MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:51:59] info: [GET] /api/epigenetic-traits/definitions - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:00] info: [POST] /api/epigenetic-traits/evaluate-milestone/11130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1097MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:00] info: [auth] Authenticated user 3f63bdbc-1732-4d4b-abf8-c80be883f467 for POST /evaluate-milestone/11130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:00] info: [ultraRareTriggerEngine] Evaluating ultra-rare triggers for horse 11130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:00] info: [ultraRareTriggerEngine] Evaluating exotic unlocks for horse 11130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:00] error: [ultraRareTriggerEngine] Error evaluating Soulbonded conditions: Cannot read properties of undefined (reading 'map')

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:00] info: [POST] /api/epigenetic-traits/evaluate-milestone/11130 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:00] info: [POST] /api/epigenetic-traits/log-trait

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1098MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:00] info: [auth] Authenticated user 3f63bdbc-1732-4d4b-abf8-c80be883f467 for POST /log-trait

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.error
      Error logging trait assignment: PrismaClientKnownRequestError: 
      Invalid `prisma.traitHistoryLog.create()` invocation in
      C:\Users\heirr\OneDrive\Desktop\Equoria\backend\services\traitHistoryService.mjs:46:53
      
        43 );
        44 
        45 // Create the trait history log entry
      ‚Üí 46 const historyEntry = await prisma.traitHistoryLog.create(
      Foreign key constraint violated on the constraint: `trait_history_logs_groomId_fkey`
          at Zn.handleRequestError (C:\Users\heirr\OneDrive\Desktop\Equoria\packages\database\node_modules\@prisma\client\runtime\library.js:121:7459)
          at Zn.handleAndLogRequestError (C:\Users\heirr\OneDrive\Desktop\Equoria\packages\database\node_modules\@prisma\client\runtime\library.js:121:6784)
          at Zn.request (C:\Users\heirr\OneDrive\Desktop\Equoria\packages\database\node_modules\@prisma\client\runtime\library.js:121:6491)
          at l (C:\Users\heirr\OneDrive\Desktop\Equoria\packages\database\node_modules\@prisma\client\runtime\library.js:130:9778)
          at logTraitAssignment (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\services\traitHistoryService.mjs:46:24)
          at C:\Users\heirr\OneDrive\Desktop\Equoria\backend\routes\epigeneticTraitRoutes.mjs:191:28 {
        code: 'P2003',
        meta: {
          modelName: 'TraitHistoryLog',
          constraint: 'trait_history_logs_groomId_fkey'
        },
        clientVersion: '6.8.2'
      }

    [0m [90m 197 |[39m
     [90m 198 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 199 |[39m       console[33m.[39merror([32m'Error logging trait assignment:'[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 200 |[39m       res[33m.[39mstatus([35m500[39m)[33m.[39mjson({
     [90m 201 |[39m         success[33m:[39m [36mfalse[39m[33m,[39m
     [90m 202 |[39m         error[33m:[39m [32m'Failed to log trait assignment'[39m[33m,[39m[0m

      at routes/epigeneticTraitRoutes.mjs:199:15

    console.log
      [2025-11-21 17:52:00] info: [POST] /api/epigenetic-traits/log-trait - 500

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:00] info: [GET] /api/epigenetic-traits/history/11130?limit=10&isEpigenetic=true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1098MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:00] info: [auth] Authenticated user 3f63bdbc-1732-4d4b-abf8-c80be883f467 for GET /history/11130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:00] info: [GET] /api/epigenetic-traits/history/11130?limit=10&isEpigenetic=true - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:00] info: [GET] /api/epigenetic-traits/summary/11130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1097MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:00] info: [auth] Authenticated user 3f63bdbc-1732-4d4b-abf8-c80be883f467 for GET /summary/11130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:00] info: [GET] /api/epigenetic-traits/summary/11130 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:00] info: [GET] /api/epigenetic-traits/breeding-insights/11130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1096MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:00] info: [auth] Authenticated user 3f63bdbc-1732-4d4b-abf8-c80be883f467 for GET /breeding-insights/11130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:00] info: [GET] /api/epigenetic-traits/breeding-insights/11130 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:00] info: [GET] /api/epigenetic-traits/history/11130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1097MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:00] warn: [auth] Missing token for GET /history/11130 from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:00] info: [GET] /api/epigenetic-traits/history/11130 - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:00] info: [POST] /api/epigenetic-traits/evaluate-milestone/11130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1097MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:00] warn: [auth] Missing token for POST /evaluate-milestone/11130 from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:00] info: [POST] /api/epigenetic-traits/evaluate-milestone/11130 - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:00] info: [GET] /api/epigenetic-traits/history/11130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1098MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:00] info: [auth] Authenticated user 18b752f4-8863-4d82-9c6c-3037dd4b6359 for GET /history/11130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:00] info: [GET] /api/epigenetic-traits/history/11130 - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:00] info: [GET] /api/epigenetic-traits/history/invalid

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1098MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:00] info: [auth] Authenticated user 3f63bdbc-1732-4d4b-abf8-c80be883f467 for GET /history/invalid

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:00] info: [GET] /api/epigenetic-traits/history/invalid - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:00] info: [POST] /api/epigenetic-traits/log-trait

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1109MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:00] info: [auth] Authenticated user 3f63bdbc-1732-4d4b-abf8-c80be883f467 for POST /log-trait

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:00] info: [POST] /api/epigenetic-traits/log-trait - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:00] info: [POST] /api/epigenetic-traits/evaluate-milestone/11130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1108MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:00] info: [auth] Authenticated user 3f63bdbc-1732-4d4b-abf8-c80be883f467 for POST /evaluate-milestone/11130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:00] info: [ultraRareTriggerEngine] Evaluating ultra-rare triggers for horse 11130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:00] info: [ultraRareTriggerEngine] Evaluating exotic unlocks for horse 11130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:00] error: [ultraRareTriggerEngine] Error evaluating Soulbonded conditions: Cannot read properties of undefined (reading 'map')

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:00] info: [POST] /api/epigenetic-traits/evaluate-milestone/11130 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

  ‚óè Epigenetic Trait System Integration Tests ‚Ä∫ API Endpoints ‚Ä∫ POST /api/epigenetic-traits/evaluate-milestone/:horseId should evaluate enhanced milestone

    expect(received).toHaveProperty(path, value)

    Expected path: "currentGroom"

    Expected value: "Gentle Test Groom"
    Received value: "None assigned"

    [0m [90m 176 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoHaveProperty([32m'horseId'[39m[33m,[39m testHorse[33m.[39mid)[33m;[39m
     [90m 177 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoHaveProperty([32m'horseName'[39m[33m,[39m testHorse[33m.[39mname)[33m;[39m
    [31m[1m>[22m[39m[90m 178 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoHaveProperty([32m'currentGroom'[39m[33m,[39m testGroom[33m.[39mname)[33m;[39m
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 179 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoHaveProperty([32m'milestoneResult'[39m)[33m;[39m
     [90m 180 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mcareHistoryIncluded)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 181 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:178:34)

  ‚óè Epigenetic Trait System Integration Tests ‚Ä∫ API Endpoints ‚Ä∫ POST /api/epigenetic-traits/log-trait should log trait assignment

    expected 201 "Created", got 500 "Internal Server Error"

    [0m [90m 198 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)
     [90m 199 |[39m         [33m.[39msend(traitData)
    [31m[1m>[22m[39m[90m 200 |[39m         [33m.[39mexpect([35m201[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 201 |[39m
     [90m 202 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 203 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoHaveProperty([32m'id'[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:200:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè Epigenetic Trait System Integration Tests ‚Ä∫ API Endpoints ‚Ä∫ GET /api/epigenetic-traits/history/:horseId should return trait history

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

    [0m [90m 225 |[39m
     [90m 226 |[39m       [90m// Should have the trait we just logged[39m
    [31m[1m>[22m[39m[90m 227 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mhistory[33m.[39mlength)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m     |[39m                                                 [31m[1m^[22m[39m
     [90m 228 |[39m       [36mconst[39m affectionateTrait [33m=[39m response[33m.[39mbody[33m.[39mdata[33m.[39mhistory[33m.[39mfind(h [33m=>[39m h[33m.[39mtraitName [33m===[39m [32m'Affectionate'[39m)[33m;[39m
     [90m 229 |[39m       expect(affectionateTrait)[33m.[39mtoBeDefined()[33m;[39m
     [90m 230 |[39m       expect(affectionateTrait[33m.[39misEpigenetic)[33m.[39mtoBe([36mtrue[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:227:49)

  ‚óè Epigenetic Trait System Integration Tests ‚Ä∫ API Endpoints ‚Ä∫ GET /api/epigenetic-traits/summary/:horseId should return development summary

    expect(received).toHaveProperty(path)

    Expected path: "traitTimeline"
    Received path: []

    Received value: {"developmentalStages": {}, "epigeneticTraits": 0, "groomContributions": {}, "groomInfluencedTraits": 0, "horseId": 11130, "sourceBreakdown": {}, "totalTraits": 0}

    [0m [90m 249 |[39m       expect(summary)[33m.[39mtoHaveProperty([32m'sourceBreakdown'[39m)[33m;[39m
     [90m 250 |[39m       expect(summary)[33m.[39mtoHaveProperty([32m'groomContributions'[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 251 |[39m       expect(summary)[33m.[39mtoHaveProperty([32m'traitTimeline'[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 252 |[39m
     [90m 253 |[39m       [90m// Verify our logged trait appears in the summary[39m
     [90m 254 |[39m       expect(summary[33m.[39mtotalTraits)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:251:23)

  ‚óè Epigenetic Trait System Integration Tests ‚Ä∫ API Endpoints ‚Ä∫ GET /api/epigenetic-traits/breeding-insights/:horseId should return breeding insights

    expect(received).toHaveProperty(path)

    Expected path: "Affectionate"
    Received path: []

    Received value: {}

    [0m [90m 275 |[39m
     [90m 276 |[39m       [90m// Should have our Affectionate trait in the epigenetic profile[39m
    [31m[1m>[22m[39m[90m 277 |[39m       expect(insights[33m.[39mepigeneticProfile)[33m.[39mtoHaveProperty([32m'Affectionate'[39m)[33m;[39m
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 278 |[39m       expect(insights[33m.[39mepigeneticProfile[33m.[39m[33mAffectionate[39m)[33m.[39mtoHaveProperty([32m'source'[39m[33m,[39m [32m'groom'[39m)[33m;[39m
     [90m 279 |[39m     })[33m;[39m
     [90m 280 |[39m[0m

      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:277:42)

  ‚óè Epigenetic Trait System Integration Tests ‚Ä∫ Epigenetic Flag System ‚Ä∫ Should apply epigenetic flags based on care patterns

    PrismaClientKnownRequestError: 
    Invalid `prisma.groomInteraction.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:344:39

      341 test('Should apply epigenetic flags based on care patterns', async () => {
      342   // Create multiple positive interactions to trigger AFFECTIONATE flag
      343   for (let i = 0; i < 7; i++) {
    ‚Üí 344     await prisma.groomInteraction.create(
    Foreign key constraint violated on the constraint: `groom_interactions_groomId_fkey`

    [0m [90m 342 |[39m       [90m// Create multiple positive interactions to trigger AFFECTIONATE flag[39m
     [90m 343 |[39m       [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m7[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 344 |[39m         [36mawait[39m prisma[33m.[39mgroomInteraction[33m.[39mcreate({
     [90m     |[39m         [31m[1m^[22m[39m
     [90m 345 |[39m           data[33m:[39m {
     [90m 346 |[39m             foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 347 |[39m             groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7459)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:344:9)

  ‚óè Epigenetic Trait System Integration Tests ‚Ä∫ Enhanced Milestone Evaluation ‚Ä∫ Should factor in groom personality bonuses

    expect(received).toHaveProperty(path, value)

    Expected path: "groomPersonality"

    Expected value: "gentle"
    Received value: "balanced"

    [0m [90m 390 |[39m       [36mconst[39m { milestoneResult } [33m=[39m response[33m.[39mbody[33m.[39mdata[33m;[39m
     [90m 391 |[39m       expect(milestoneResult)[33m.[39mtoHaveProperty([32m'enhancementFactors'[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 392 |[39m       expect(milestoneResult[33m.[39menhancementFactors)[33m.[39mtoHaveProperty([32m'groomPersonality'[39m[33m,[39m [32m'gentle'[39m)[33m;[39m
     [90m     |[39m                                                  [31m[1m^[22m[39m
     [90m 393 |[39m       expect(milestoneResult[33m.[39menhancementFactors)[33m.[39mtoHaveProperty([32m'careQuality'[39m)[33m;[39m
     [90m 394 |[39m       expect(milestoneResult[33m.[39menhancementFactors)[33m.[39mtoHaveProperty([32m'bondStability'[39m)[33m;[39m
     [90m 395 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:392:50)

PASS tests/integration/enhancedGroomInteractions.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:52:01] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:01] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:01] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:52:01] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:01] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:01] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:01] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:01] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:01] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:01] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:01] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:01] info: [GET] /api/grooms/enhanced/interactions/4696/11132

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:01] warn: [MemoryMonitoring] Memory threshold exceeded: 1135MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:01] info: [auth] Authenticated user fb37b877-3bbb-4f4e-8ea7-302cc2d0423a for GET /interactions/4696/11132

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:01] info: [enhancedGroomController] Getting enhanced interactions for groom 4696 and horse 11132

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:01] info: [GET] /api/grooms/enhanced/interactions/4696/11132 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:01] info: [GET] /api/grooms/enhanced/interactions/99999/11132

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:01] warn: [MemoryMonitoring] Memory threshold exceeded: 1133MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:01] info: [auth] Authenticated user fb37b877-3bbb-4f4e-8ea7-302cc2d0423a for GET /interactions/99999/11132

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:01] info: [enhancedGroomController] Getting enhanced interactions for groom 99999 and horse 11132

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:01] info: [GET] /api/grooms/enhanced/interactions/99999/11132 - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:01] info: [GET] /api/grooms/enhanced/interactions/4696/99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:01] warn: [MemoryMonitoring] Memory threshold exceeded: 1133MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:01] info: [auth] Authenticated user fb37b877-3bbb-4f4e-8ea7-302cc2d0423a for GET /interactions/4696/99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:01] info: [enhancedGroomController] Getting enhanced interactions for groom 4696 and horse 99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:01] info: [GET] /api/grooms/enhanced/interactions/4696/99999 - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:01] info: [POST] /api/grooms/enhanced/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:01] warn: [MemoryMonitoring] Memory threshold exceeded: 1135MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:01] info: [auth] Authenticated user fb37b877-3bbb-4f4e-8ea7-302cc2d0423a for POST /interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:01] info: [enhancedGroomController] Performing enhanced daily_care interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:01] info: [enhancedGroomInteractions] Calculated effects: +5 bonding, -2 stress, quality: fair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:01] info: [enhancedGroomController] Enhanced interaction completed: +5 bonding, -2 stress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:01] info: [POST] /api/grooms/enhanced/interact - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:01] info: [POST] /api/grooms/enhanced/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:01] warn: [MemoryMonitoring] Memory threshold exceeded: 1139MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:01] info: [auth] Authenticated user fb37b877-3bbb-4f4e-8ea7-302cc2d0423a for POST /interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:01] info: [enhancedGroomController] Performing enhanced enrichment interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:01] info: [enhancedGroomInteractions] Special event triggered: Learning Moment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:01] info: [enhancedGroomInteractions] Calculated effects: +14 bonding, -10 stress, quality: exceptional

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:01] info: [enhancedGroomController] Enhanced interaction completed: +14 bonding, -10 stress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:01] info: [enhancedGroomController] Special event occurred: Learning Moment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:01] info: [POST] /api/grooms/enhanced/interact - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:01] info: [POST] /api/grooms/enhanced/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:01] warn: [MemoryMonitoring] Memory threshold exceeded: 1145MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:01] info: [auth] Authenticated user fb37b877-3bbb-4f4e-8ea7-302cc2d0423a for POST /interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:01] info: [enhancedGroomController] Performing enhanced bonding_time interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:01] info: [enhancedGroomInteractions] Special event triggered: Learning Moment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:01] info: [enhancedGroomInteractions] Calculated effects: +16 bonding, -9 stress, quality: exceptional

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:01] info: [enhancedGroomController] Enhanced interaction completed: +16 bonding, -9 stress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:01] info: [enhancedGroomController] Special event occurred: Learning Moment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:01] info: [POST] /api/grooms/enhanced/interact - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:02] info: [POST] /api/grooms/enhanced/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1146MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:02] info: [auth] Authenticated user fb37b877-3bbb-4f4e-8ea7-302cc2d0423a for POST /interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:02] info: [enhancedGroomController] Performing enhanced bonding_time interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:02] info: [POST] /api/grooms/enhanced/interact - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:02] info: [POST] /api/grooms/enhanced/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1145MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:02] info: [auth] Authenticated user fb37b877-3bbb-4f4e-8ea7-302cc2d0423a for POST /interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:02] warn: [enhancedGroomRoutes] Validation errors: [{"type":"field","msg":"Invalid value","path":"interactionType","location":"body"},{"type":"field","msg":"Interaction type must be a non-empty string (max 50 characters)","path":"interactionType","location":"body"},{"type":"field","msg":"Invalid value","path":"variation","location":"body"},{"type":"field","msg":"Variation must be a non-empty string (max 100 characters)","path":"variation","location":"body"},{"type":"field","msg":"Duration must be between 5 and 180 minutes","path":"duration","location":"body"}]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:02] info: [POST] /api/grooms/enhanced/interact - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:02] info: [POST] /api/grooms/enhanced/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1143MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:02] info: [auth] Authenticated user fb37b877-3bbb-4f4e-8ea7-302cc2d0423a for POST /interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:02] info: [enhancedGroomController] Performing enhanced invalid_type interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:02] info: [POST] /api/grooms/enhanced/interact - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:02] info: [POST] /api/grooms/enhanced/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1141MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:02] info: [auth] Authenticated user fb37b877-3bbb-4f4e-8ea7-302cc2d0423a for POST /interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:02] warn: [enhancedGroomRoutes] Validation errors: [{"type":"field","value":200,"msg":"Duration must be between 5 and 180 minutes","path":"duration","location":"body"}]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:02] info: [POST] /api/grooms/enhanced/interact - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:02] info: [GET] /api/grooms/enhanced/relationship/4696/11132

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1139MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:02] info: [auth] Authenticated user fb37b877-3bbb-4f4e-8ea7-302cc2d0423a for GET /relationship/4696/11132

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:02] info: [GET] /api/grooms/enhanced/relationship/4696/11132 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:02] info: [GET] /api/grooms/enhanced/interactions/types

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1138MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:02] info: [auth] Authenticated user fb37b877-3bbb-4f4e-8ea7-302cc2d0423a for GET /interactions/types

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:02] info: [GET] /api/grooms/enhanced/interactions/types - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:02] info: [GET] /api/grooms/enhanced/interactions/4696/11132

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1141MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:02] warn: [auth] Missing token for GET /interactions/4696/11132 from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:02] info: [GET] /api/grooms/enhanced/interactions/4696/11132 - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:02] info: [GET] /api/grooms/enhanced/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1139MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:02] warn: [auth] Missing token for GET /interact from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:02] info: [GET] /api/grooms/enhanced/interact - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:02] info: [GET] /api/grooms/enhanced/relationship/4696/11132

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1139MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:02] warn: [auth] Missing token for GET /relationship/4696/11132 from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:02] info: [GET] /api/grooms/enhanced/relationship/4696/11132 - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:02] info: [GET] /api/grooms/enhanced/interactions/types

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1138MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:02] warn: [auth] Missing token for GET /interactions/types from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:02] info: [GET] /api/grooms/enhanced/interactions/types - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:02] info: [GET] /api/grooms/enhanced/interactions/4696/11132

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1138MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:02] info: [auth] Authenticated user 7921fb72-c068-48a3-af1d-387a6db635df for GET /interactions/4696/11132

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:02] info: [enhancedGroomController] Getting enhanced interactions for groom 4696 and horse 11132

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:02] info: [GET] /api/grooms/enhanced/interactions/4696/11132 - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/integration/groomAssignmentSystem.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:52:02] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:02] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:02] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:52:03] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [POST] /api/groom-assignments

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1174MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [auth] Authenticated user accbbfec-8da0-41ea-b7a0-3f6b56947c31 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [groomAssignmentController] Creating assignment: groom 4697 -> horse 11135

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [groomAssignmentService] Created assignment: Assignment Test Groom 1 -> Assignment Test Horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [POST] /api/groom-assignments - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [POST] /api/groom-assignments

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1179MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [auth] Authenticated user accbbfec-8da0-41ea-b7a0-3f6b56947c31 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [groomAssignmentController] Creating assignment: groom 4697 -> horse 11136

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [groomAssignmentService] Created assignment: Assignment Test Groom 1 -> Assignment Test Horse 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [POST] /api/groom-assignments - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [POST] /api/groom-assignments

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1180MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [auth] Authenticated user accbbfec-8da0-41ea-b7a0-3f6b56947c31 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [groomAssignmentController] Creating assignment: groom 4697 -> horse 11135

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] error: [groomAssignmentService] Error creating assignment: Groom is already assigned to this horse

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:03] error: [groomAssignmentController] Error creating assignment: Groom is already assigned to this horse

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:03] info: [POST] /api/groom-assignments - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [POST] /api/groom-assignments

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1180MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [auth] Authenticated user accbbfec-8da0-41ea-b7a0-3f6b56947c31 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] warn: [groomAssignmentRoutes] Validation errors: [{"type":"field","msg":"Horse ID must be a positive integer","path":"horseId","location":"body"}]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [POST] /api/groom-assignments - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [POST] /api/groom-assignments

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1178MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [auth] Authenticated user accbbfec-8da0-41ea-b7a0-3f6b56947c31 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [groomAssignmentController] Creating assignment: groom 4697 -> horse 11137

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] error: [groomAssignmentService] Error creating assignment: You do not own this horse

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:03] error: [groomAssignmentController] Error creating assignment: You do not own this horse

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:03] info: [POST] /api/groom-assignments - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [GET] /api/groom-assignments

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1179MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [auth] Authenticated user accbbfec-8da0-41ea-b7a0-3f6b56947c31 for GET /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [groomAssignmentController] Getting assignments for user accbbfec-8da0-41ea-b7a0-3f6b56947c31

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [GET] /api/groom-assignments - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [GET] /api/groom-assignments?groomId=4697

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1180MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [auth] Authenticated user accbbfec-8da0-41ea-b7a0-3f6b56947c31 for GET /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [groomAssignmentController] Getting assignments for user accbbfec-8da0-41ea-b7a0-3f6b56947c31

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [GET] /api/groom-assignments?groomId=4697 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [GET] /api/groom-assignments/dashboard

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1180MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [auth] Authenticated user accbbfec-8da0-41ea-b7a0-3f6b56947c31 for GET /dashboard

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [groomAssignmentController] Getting assignment dashboard for user accbbfec-8da0-41ea-b7a0-3f6b56947c31

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [GET] /api/groom-assignments/dashboard - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [GET] /api/groom-assignments/groom/4697/limits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1182MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [auth] Authenticated user accbbfec-8da0-41ea-b7a0-3f6b56947c31 for GET /groom/4697/limits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [groomAssignmentController] Getting limits for groom 4697

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [GET] /api/groom-assignments/groom/4697/limits - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [POST] /api/groom-assignments

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1183MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [auth] Authenticated user accbbfec-8da0-41ea-b7a0-3f6b56947c31 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [groomAssignmentController] Creating assignment: groom 4697 -> horse 11138

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [groomAssignmentService] Created assignment: Assignment Test Groom 1 -> Limit Test Horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [POST] /api/groom-assignments - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [POST] /api/groom-assignments

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1182MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [auth] Authenticated user accbbfec-8da0-41ea-b7a0-3f6b56947c31 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [groomAssignmentController] Creating assignment: groom 4697 -> horse 11139

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] error: [groomAssignmentService] Error creating assignment: Groom Assignment Test Groom 1 has reached maximum assignments (3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:03] error: [groomAssignmentController] Error creating assignment: Groom Assignment Test Groom 1 has reached maximum assignments (3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:03] info: [POST] /api/groom-assignments - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [POST] /api/groom-assignments

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1181MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [auth] Authenticated user accbbfec-8da0-41ea-b7a0-3f6b56947c31 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [groomAssignmentController] Creating assignment: groom 4697 -> horse 11140

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] error: [groomAssignmentService] Error creating assignment: Groom Assignment Test Groom 1 has reached maximum assignments (3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:03] error: [groomAssignmentController] Error creating assignment: Groom Assignment Test Groom 1 has reached maximum assignments (3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:03] info: [POST] /api/groom-assignments - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [POST] /api/groom-assignments

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1182MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [auth] Authenticated user accbbfec-8da0-41ea-b7a0-3f6b56947c31 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [groomAssignmentController] Creating assignment: groom 4697 -> horse 11141

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] error: [groomAssignmentService] Error creating assignment: Groom Assignment Test Groom 1 has reached maximum assignments (3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:03] error: [groomAssignmentController] Error creating assignment: Groom Assignment Test Groom 1 has reached maximum assignments (3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:03] info: [POST] /api/groom-assignments - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [POST] /api/groom-assignments

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1181MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [auth] Authenticated user accbbfec-8da0-41ea-b7a0-3f6b56947c31 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [groomAssignmentController] Creating assignment: groom 4697 -> horse 11142

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] error: [groomAssignmentService] Error creating assignment: Groom Assignment Test Groom 1 has reached maximum assignments (3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:03] error: [groomAssignmentController] Error creating assignment: Groom Assignment Test Groom 1 has reached maximum assignments (3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:03] info: [POST] /api/groom-assignments - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [GET] /api/groom-assignments/salary-costs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1183MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [auth] Authenticated user accbbfec-8da0-41ea-b7a0-3f6b56947c31 for GET /salary-costs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [groomAssignmentController] Calculating salary costs for user accbbfec-8da0-41ea-b7a0-3f6b56947c31

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [GET] /api/groom-assignments/salary-costs - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [POST] /api/groom-assignments/validate

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1184MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [auth] Authenticated user accbbfec-8da0-41ea-b7a0-3f6b56947c31 for POST /validate

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [groomAssignmentController] Validating assignment: groom 4698 -> horse 11135

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [POST] /api/groom-assignments/validate - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [GET] /api/groom-assignments

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1183MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [auth] Authenticated user accbbfec-8da0-41ea-b7a0-3f6b56947c31 for GET /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [groomAssignmentController] Getting assignments for user accbbfec-8da0-41ea-b7a0-3f6b56947c31

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [GET] /api/groom-assignments - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [DELETE] /api/groom-assignments/752

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1182MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [auth] Authenticated user accbbfec-8da0-41ea-b7a0-3f6b56947c31 for DELETE /752

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [groomAssignmentController] Removing assignment 752

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [groomAssignmentService] Removed assignment: Assignment Test Groom 1 -> Assignment Test Horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [DELETE] /api/groom-assignments/752 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [DELETE] /api/groom-assignments/99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1182MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [auth] Authenticated user accbbfec-8da0-41ea-b7a0-3f6b56947c31 for DELETE /99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [groomAssignmentController] Removing assignment 99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] error: [groomAssignmentService] Error removing assignment: Assignment not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:03] error: [groomAssignmentController] Error removing assignment: Assignment not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:03] info: [DELETE] /api/groom-assignments/99999 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [GET] /api/groom-assignments/config

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1182MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [auth] Authenticated user accbbfec-8da0-41ea-b7a0-3f6b56947c31 for GET /config

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [GET] /api/groom-assignments/config - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [GET] /api/groom-assignments/statistics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1180MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [auth] Authenticated user accbbfec-8da0-41ea-b7a0-3f6b56947c31 for GET /statistics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [groomAssignmentRoutes] Getting assignment statistics for user accbbfec-8da0-41ea-b7a0-3f6b56947c31

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [GET] /api/groom-assignments/statistics - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [GET] /api/groom-assignments

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1182MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] warn: [auth] Missing token for GET / from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [GET] /api/groom-assignments - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [POST] /api/groom-assignments

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1180MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] warn: [auth] Missing token for POST / from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [POST] /api/groom-assignments - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [GET] /api/groom-assignments/dashboard

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1179MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] warn: [auth] Missing token for GET /dashboard from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [GET] /api/groom-assignments/dashboard - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [GET] /api/groom-assignments/salary-costs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1178MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] warn: [auth] Missing token for GET /salary-costs from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:03] info: [GET] /api/groom-assignments/salary-costs - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/routes/enhancedReportingRoutes.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:52:04] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:04] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:04] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:52:04] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:04] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:04] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:04] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:04] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:04] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:04] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:04] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:05] info: [GET] /api/horses/11154/enhanced-trait-history

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:05] warn: [MemoryMonitoring] Memory threshold exceeded: 1218MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:05] info: [auth] Authenticated user b45820a2-af42-4cb4-9e52-515d6a1e2332 for GET /horses/11154/enhanced-trait-history

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:05] info: Enhanced trait history generated for horse 11154 by user b45820a2-af42-4cb4-9e52-515d6a1e2332

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:05] info: [GET] /api/horses/11154/enhanced-trait-history - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:05] info: [GET] /api/horses/11155/epigenetic-insights

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:05] warn: [MemoryMonitoring] Memory threshold exceeded: 1215MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:05] info: [auth] Authenticated user b45820a2-af42-4cb4-9e52-515d6a1e2332 for GET /horses/11155/epigenetic-insights

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:05] info: Epigenetic insights generated for horse 11155 by user b45820a2-af42-4cb4-9e52-515d6a1e2332

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:05] info: [GET] /api/horses/11155/epigenetic-insights - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:05] info: [GET] /api/horses/11154/trait-timeline

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:05] warn: [MemoryMonitoring] Memory threshold exceeded: 1216MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:05] info: [auth] Authenticated user b45820a2-af42-4cb4-9e52-515d6a1e2332 for GET /horses/11154/trait-timeline

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:05] info: Trait timeline generated for horse 11154 by user b45820a2-af42-4cb4-9e52-515d6a1e2332

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:05] info: [GET] /api/horses/11154/trait-timeline - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:05] info: [GET] /api/users/b45820a2-af42-4cb4-9e52-515d6a1e2332/stable-epigenetic-report

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:05] warn: [MemoryMonitoring] Memory threshold exceeded: 1220MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:05] info: [auth] Authenticated user b45820a2-af42-4cb4-9e52-515d6a1e2332 for GET /users/b45820a2-af42-4cb4-9e52-515d6a1e2332/stable-epigenetic-report

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:05] info: Stable epigenetic report generated for user b45820a2-af42-4cb4-9e52-515d6a1e2332

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:05] info: [GET] /api/users/b45820a2-af42-4cb4-9e52-515d6a1e2332/stable-epigenetic-report - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:05] info: [POST] /api/horses/compare-epigenetics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:05] warn: [MemoryMonitoring] Memory threshold exceeded: 1224MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:05] info: [auth] Authenticated user b45820a2-af42-4cb4-9e52-515d6a1e2332 for POST /horses/compare-epigenetics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:05] info: Horse comparison generated for 3 horses by user b45820a2-af42-4cb4-9e52-515d6a1e2332

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:05] info: [POST] /api/horses/compare-epigenetics - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:05] info: [GET] /api/horses/trait-trends?userId=b45820a2-af42-4cb4-9e52-515d6a1e2332&timeframe=30

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:05] warn: [MemoryMonitoring] Memory threshold exceeded: 1224MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:05] info: [auth] Authenticated user b45820a2-af42-4cb4-9e52-515d6a1e2332 for GET /trait-trends

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:05] info: Trait trends analyzed for user b45820a2-af42-4cb4-9e52-515d6a1e2332 (30 days)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:05] info: [GET] /api/horses/trait-trends?userId=b45820a2-af42-4cb4-9e52-515d6a1e2332&timeframe=30 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:05] info: [GET] /api/horses/11154/enhanced-trait-history?traitType=positive&discoveryMethod=milestone_evaluation&dateFrom=2025-11-11T22%3A52%3A05.447Z&dateTo=2025-11-21T22%3A52%3A05.447Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:05] warn: [MemoryMonitoring] Memory threshold exceeded: 1223MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:05] info: [auth] Authenticated user b45820a2-af42-4cb4-9e52-515d6a1e2332 for GET /horses/11154/enhanced-trait-history

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:05] info: Enhanced trait history generated for horse 11154 by user b45820a2-af42-4cb4-9e52-515d6a1e2332

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:05] info: [GET] /api/horses/11154/enhanced-trait-history?traitType=positive&discoveryMethod=milestone_evaluation&dateFrom=2025-11-11T22%3A52%3A05.447Z&dateTo=2025-11-21T22%3A52%3A05.447Z - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:05] info: [GET] /api/horses/11155/epigenetic-report-export?format=detailed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:05] warn: [MemoryMonitoring] Memory threshold exceeded: 1223MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:05] info: [auth] Authenticated user b45820a2-af42-4cb4-9e52-515d6a1e2332 for GET /horses/11155/epigenetic-report-export

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:05] info: Epigenetic report export generated for horse 11155 (detailed) by user b45820a2-af42-4cb4-9e52-515d6a1e2332

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:05] info: [GET] /api/horses/11155/epigenetic-report-export?format=detailed - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:05] info: [GET] /api/horses/11153/enhanced-trait-history

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:05] warn: [MemoryMonitoring] Memory threshold exceeded: 1224MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:05] warn: [auth] Missing token for GET /horses/11153/enhanced-trait-history from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:05] info: [GET] /api/horses/11153/enhanced-trait-history - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:05] info: [GET] /api/horses/11161/enhanced-trait-history

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:05] warn: [MemoryMonitoring] Memory threshold exceeded: 1223MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:05] info: [auth] Authenticated user b45820a2-af42-4cb4-9e52-515d6a1e2332 for GET /horses/11161/enhanced-trait-history

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:05] info: [GET] /api/horses/11161/enhanced-trait-history - 403

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:05] info: [POST] /api/horses/compare-epigenetics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:05] warn: [MemoryMonitoring] Memory threshold exceeded: 1222MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:05] info: [auth] Authenticated user b45820a2-af42-4cb4-9e52-515d6a1e2332 for POST /horses/compare-epigenetics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:05] info: [POST] /api/horses/compare-epigenetics - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:05] info: [GET] /api/horses/99999/enhanced-trait-history

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:05] warn: [MemoryMonitoring] Memory threshold exceeded: 1219MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:05] info: [auth] Authenticated user b45820a2-af42-4cb4-9e52-515d6a1e2332 for GET /horses/99999/enhanced-trait-history

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:05] info: [GET] /api/horses/99999/enhanced-trait-history - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/integration/userRoutes.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:52:05] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:05] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:05] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:52:06] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] info: [GET] /api/users/b1d4c9bf-d496-4925-b538-8b66b954ca0e/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] warn: [MemoryMonitoring] Memory threshold exceeded: 1252MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] info: [auth] Authenticated user b1d4c9bf-d496-4925-b538-8b66b954ca0e for GET /b1d4c9bf-d496-4925-b538-8b66b954ca0e/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] info: [userController.getUserProgressAPI] Getting comprehensive progress for user b1d4c9bf-d496-4925-b538-8b66b954ca0e

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] info: [userController.getUserProgressAPI] Successfully retrieved progress for user userroutes_1763765526493 (Level 2, XP: 100/300, -100% progress)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] info: [GET] /api/users/b1d4c9bf-d496-4925-b538-8b66b954ca0e/progress - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] info: [GET] /api/users/550e8400-e29b-41d4-a716-446655440999/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] warn: [MemoryMonitoring] Memory threshold exceeded: 1254MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] info: [auth] Authenticated user b1d4c9bf-d496-4925-b538-8b66b954ca0e for GET /550e8400-e29b-41d4-a716-446655440999/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] info: [userController.getUserProgressAPI] Getting comprehensive progress for user 550e8400-e29b-41d4-a716-446655440999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] error: [userController.getUserProgressAPI] Error getting user progress: Progress fetch failed: User not found.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:06] error: [GET] /api/users/550e8400-e29b-41d4-a716-446655440999/progress - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:06] error: Error Progress fetch failed: User not found.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:06] info: [GET] /api/users/550e8400-e29b-41d4-a716-446655440999/progress - 500

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] info: [GET] /api/users//progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] warn: [MemoryMonitoring] Memory threshold exceeded: 1257MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] warn: [userRoutes] Validation errors for /:id: [{"type":"field","value":"progress","msg":"User ID must be a valid UUID","path":"id","location":"params"}]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] info: [GET] /api/users//progress - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] info: [GET] /api/users/a/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] warn: [MemoryMonitoring] Memory threshold exceeded: 1254MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] info: [auth] Authenticated user b1d4c9bf-d496-4925-b538-8b66b954ca0e for GET /a/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] warn: [userRoutes] Validation errors for /:id: [{"type":"field","value":"a","msg":"User ID must be a valid UUID","path":"id","location":"params"}]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] info: [GET] /api/users/a/progress - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] info: [GET] /api/users/aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] warn: [MemoryMonitoring] Memory threshold exceeded: 1252MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] info: [auth] Authenticated user b1d4c9bf-d496-4925-b538-8b66b954ca0e for GET /aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] warn: [userRoutes] Validation errors for /:id: [{"type":"field","value":"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa","msg":"User ID must be a valid UUID","path":"id","location":"params"}]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] info: [GET] /api/users/aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa/progress - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] info: [GET] /api/users/550e8400-e29b-41d4-a716-446655440998/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] warn: [MemoryMonitoring] Memory threshold exceeded: 1252MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] info: [auth] Authenticated user b1d4c9bf-d496-4925-b538-8b66b954ca0e for GET /550e8400-e29b-41d4-a716-446655440998/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] info: [userController.getUserProgressAPI] Getting comprehensive progress for user 550e8400-e29b-41d4-a716-446655440998

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] error: [userController.getUserProgressAPI] Error getting user progress: Progress fetch failed: User not found.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:06] error: [GET] /api/users/550e8400-e29b-41d4-a716-446655440998/progress - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:06] error: Error Progress fetch failed: User not found.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:06] info: [GET] /api/users/550e8400-e29b-41d4-a716-446655440998/progress - 500

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] info: [GET] /api/users/b1d4c9bf-d496-4925-b538-8b66b954ca0e/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] warn: [MemoryMonitoring] Memory threshold exceeded: 1262MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] info: [auth] Authenticated user b1d4c9bf-d496-4925-b538-8b66b954ca0e for GET /b1d4c9bf-d496-4925-b538-8b66b954ca0e/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] info: [userController.getUserProgressAPI] Getting comprehensive progress for user b1d4c9bf-d496-4925-b538-8b66b954ca0e

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] info: [userController.getUserProgressAPI] Successfully retrieved progress for user userroutes_1763765526493 (Level 2, XP: 100/300, -100% progress)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] info: [GET] /api/users/b1d4c9bf-d496-4925-b538-8b66b954ca0e/progress - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] info: [GET] /api/users/b1d4c9bf-d496-4925-b538-8b66b954ca0e/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] warn: [MemoryMonitoring] Memory threshold exceeded: 1261MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] info: [auth] Authenticated user b1d4c9bf-d496-4925-b538-8b66b954ca0e for GET /b1d4c9bf-d496-4925-b538-8b66b954ca0e/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] info: [userController.getUserProgressAPI] Getting comprehensive progress for user b1d4c9bf-d496-4925-b538-8b66b954ca0e

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] info: [userController.getUserProgressAPI] Successfully retrieved progress for user userroutes_1763765526493 (Level 2, XP: 100/300, -100% progress)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] info: [GET] /api/users/b1d4c9bf-d496-4925-b538-8b66b954ca0e/progress - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] info: [GET] /api/users/user-123_test/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] warn: [MemoryMonitoring] Memory threshold exceeded: 1261MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] info: [auth] Authenticated user b1d4c9bf-d496-4925-b538-8b66b954ca0e for GET /user-123_test/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] warn: [userRoutes] Validation errors for /:id: [{"type":"field","value":"user-123_test","msg":"User ID must be a valid UUID","path":"id","location":"params"}]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] info: [GET] /api/users/user-123_test/progress - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] info: [GET] /api/users/966a2f04-717c-48f2-8372-058b66cdb332

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] warn: [MemoryMonitoring] Memory threshold exceeded: 1259MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] info: [userController.getUser] Getting user 966a2f04-717c-48f2-8372-058b66cdb332

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] info: [GET] /api/users/966a2f04-717c-48f2-8372-058b66cdb332 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] info: [GET] /api/users/550e8400-e29b-41d4-a716-446655440001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] warn: [MemoryMonitoring] Memory threshold exceeded: 1257MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] info: [userController.getUser] Getting user 550e8400-e29b-41d4-a716-446655440001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] info: [GET] /api/users/550e8400-e29b-41d4-a716-446655440001 - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] info: [POST] /api/users

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] warn: [MemoryMonitoring] Memory threshold exceeded: 1255MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] info: [userController.createUser] Creating user NewUser_1763765526952

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] info: [createUser] User created: NewUser_1763765526952

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] info: [POST] /api/users - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] info: [POST] /api/users

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:06] warn: [MemoryMonitoring] Memory threshold exceeded: 1255MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:07] info: [POST] /api/users - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:07] info: [PUT] /api/users/966a2f04-717c-48f2-8372-058b66cdb332

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:07] warn: [MemoryMonitoring] Memory threshold exceeded: 1265MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:07] info: [userController.updateUser] Updating user 966a2f04-717c-48f2-8372-058b66cdb332

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:07] info: [PUT] /api/users/966a2f04-717c-48f2-8372-058b66cdb332 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:07] info: [PUT] /api/users/550e8400-e29b-41d4-a716-446655440001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:07] warn: [MemoryMonitoring] Memory threshold exceeded: 1262MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:07] info: [userController.updateUser] Updating user 550e8400-e29b-41d4-a716-446655440001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:07] error: [updateUser] User not found for update: ID 550e8400-e29b-41d4-a716-446655440001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:07] info: [PUT] /api/users/550e8400-e29b-41d4-a716-446655440001 - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:07] info: [DELETE] /api/users/3f4d2a1c-970c-4b14-a25c-0e13bb71483e

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:07] warn: [MemoryMonitoring] Memory threshold exceeded: 1260MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:07] info: [userController.deleteUser] Deleting user 3f4d2a1c-970c-4b14-a25c-0e13bb71483e

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:07] info: [DELETE] /api/users/3f4d2a1c-970c-4b14-a25c-0e13bb71483e - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:07] info: [DELETE] /api/users/550e8400-e29b-41d4-a716-446655440001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:07] warn: [MemoryMonitoring] Memory threshold exceeded: 1256MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:07] info: [userController.deleteUser] Deleting user 550e8400-e29b-41d4-a716-446655440001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:07] error: [deleteUser] User not found for deletion: ID 550e8400-e29b-41d4-a716-446655440001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:07] info: [DELETE] /api/users/550e8400-e29b-41d4-a716-446655440001 - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:07] info: [POST] /api/users/966a2f04-717c-48f2-8372-058b66cdb332/add-xp

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:07] warn: [MemoryMonitoring] Memory threshold exceeded: 1268MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:07] info: [userController.addXp] Adding 50 XP to user 966a2f04-717c-48f2-8372-058b66cdb332

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:07] info: [POST] /api/users/966a2f04-717c-48f2-8372-058b66cdb332/add-xp - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:07] info: [POST] /api/users/550e8400-e29b-41d4-a716-446655440001/add-xp

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:07] warn: [MemoryMonitoring] Memory threshold exceeded: 1264MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:07] info: [userController.addXp] Adding 50 XP to user 550e8400-e29b-41d4-a716-446655440001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:07] error: [addXpToUser] Error: User not found.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:07] info: [POST] /api/users/550e8400-e29b-41d4-a716-446655440001/add-xp - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/unit/geneticDiversityTracking.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:52:07] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:07] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:07] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:52:07] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:07] info: [geneticDiversityTrackingService.calculateEffectivePopulationSize] Calculating for 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:07] info: [geneticDiversityTrackingService.identifyGeneticFounders] Identifying founders in 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:07] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 11185 and mare 11186

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:07] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 11196 and mare 11193

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:07] info: [geneticDiversityTrackingService.trackPopulationGeneticHealth] Tracking health for 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:07] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:07] info: [geneticDiversityTrackingService.calculateEffectivePopulationSize] Calculating for 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:07] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 11199 and mare 11200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:07] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 11201 and mare 11202

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:07] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 11203 and mare 11200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.identifyGeneticFounders] Identifying founders in 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.analyzeGeneticTrends] Analyzing trends for 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 3 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 11206 and mare 11207

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 11208 and mare 11209

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 11210 and mare 11207

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.generateOptimalBreedingRecommendations] Generating recommendations for 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 11213 and mare 11214

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 11213 and mare 11214

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 11213 and mare 11216

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 11213 and mare 11216

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 11213 and mare 11218

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 11213 and mare 11218

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 11213 and mare 11219

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 11213 and mare 11219

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 11215 and mare 11214

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 11215 and mare 11214

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 11215 and mare 11216

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 11215 and mare 11216

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 11215 and mare 11218

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 11215 and mare 11218

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 11215 and mare 11219

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 11215 and mare 11219

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 11217 and mare 11214

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 11217 and mare 11214

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 11217 and mare 11216

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 11217 and mare 11216

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 11217 and mare 11218

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 11217 and mare 11218

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 11217 and mare 11219

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 11217 and mare 11219

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 11220 and mare 11221

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 11220 and mare 11221

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.trackGeneticDiversityOverTime] Tracking diversity for 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 3 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.trackPopulationGeneticHealth] Tracking health for 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateEffectivePopulationSize] Calculating for 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 11227 and mare 11228

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 11229 and mare 11230

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 11231 and mare 11228

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.identifyGeneticFounders] Identifying founders in 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.generateGeneticDiversityReport] Generating report for 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.trackPopulationGeneticHealth] Tracking health for 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.analyzeGeneticTrends] Analyzing trends for 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.generateOptimalBreedingRecommendations] Generating recommendations for 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.trackGeneticDiversityOverTime] Tracking diversity for 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateEffectivePopulationSize] Calculating for 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 2)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 11234 and mare 11235

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 4)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 11234 and mare 11235

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 3 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 4)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 3 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 2)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 4)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 11234 and mare 11237

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 4)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 11234 and mare 11235

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 2)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 11234 and mare 11237

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 4)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 4)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 11236 and mare 11237

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 11234 and mare 11235

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 2)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 11234 and mare 11239

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.trackPopulationGeneticHealth] Tracking health for 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 4)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 4)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 11234 and mare 11239

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateEffectivePopulationSize] Calculating for 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 4)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 11238 and mare 11235

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 2)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 11236 and mare 11237

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 2)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 11234 and mare 11240

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 11234 and mare 11235

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 4)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 2)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 11234 and mare 11240

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.identifyGeneticFounders] Identifying founders in 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 11236 and mare 11237

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 4)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 11238 and mare 11235

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 2)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 11238 and mare 11235

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 4)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 11236 and mare 11235

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 11236 and mare 11235

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 11236 and mare 11237

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.identifyGeneticFounders] Identifying founders in 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 4)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 11236 and mare 11237

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 11236 and mare 11239

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 11236 and mare 11239

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 11236 and mare 11240

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 11236 and mare 11240

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 11238 and mare 11235

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 11238 and mare 11235

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 11238 and mare 11237

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 11238 and mare 11237

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 11238 and mare 11239

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 11238 and mare 11239

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 11238 and mare 11240

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 11238 and mare 11240

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-11-21 17:52:08] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

PASS tests/groomPersonalityTraitBonus.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:52:08] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:08] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:52:09] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:09] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:09] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:09] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:09] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:09] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:09] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:09] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:09] info: [groomPersonalityTraitBonus] Compatibility: Calm + Spirited = MATCH (bond: 65)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:09] info: [groomPersonalityTraitBonus] Compatibility: Reserved + Playful = MISMATCH (bond: 40)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:09] info: [groomPersonalityTraitBonus] Compatibility: Energetic + Lazy = MATCH (bond: 45)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:09] info: [groomPersonalityTraitBonus] Compatibility: Calm + Spirited = MATCH (bond: 70)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:09] info: [personalityModifierEngine] Applied personality effects: Calm + Spirited = 2 trait modifier, 4.5 stress reduction, 10 bonding bonus

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:09] info: [enhancedMilestoneEvaluationSystem.evaluateEnhancedMilestone] Starting evaluation for horse 11246, milestone imprinting

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:09] info: [groomPersonalityTraitBonus] Compatibility: Calm + Spirited = MATCH (bond: 65)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:09] info: [personalityModifierEngine] Applied personality effects: Calm + Spirited = 2 trait modifier, 3.0 stress reduction, 10 bonding bonus

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:09] info: [enhancedMilestoneEvaluationSystem] Applied personality effects: Calm + Spirited = 2 modifier

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:09] info: [enhancedMilestoneEvaluationSystem.evaluateEnhancedMilestone] Completed evaluation for horse 11246: withdrawn (score: 0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:09] info: [enhancedMilestoneEvaluationSystem.evaluateEnhancedMilestone] Starting evaluation for horse 11247, milestone imprinting

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:09] info: [enhancedMilestoneEvaluationSystem] No personality effects applied - missing groom personality or horse temperament

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:09] info: [enhancedMilestoneEvaluationSystem.evaluateEnhancedMilestone] Completed evaluation for horse 11247: reactive (score: -2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:09] info: [GET] /api/grooms/4709/profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:09] warn: [MemoryMonitoring] Memory threshold exceeded: 1307MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:09] info: [groomController.getGroomProfile] Retrieved profile for groom 4709

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:09] info: [GET] /api/grooms/4709/profile - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:09] info: [GET] /api/grooms/99999/profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:09] warn: [MemoryMonitoring] Memory threshold exceeded: 1308MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:09] info: [GET] /api/grooms/99999/profile - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:09] info: [GET] /api/grooms/invalid/profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:09] warn: [MemoryMonitoring] Memory threshold exceeded: 1308MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:09] info: [GET] /api/grooms/invalid/profile - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:09] info: [GET] /api/horses/11253/personality-impact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:09] warn: [MemoryMonitoring] Memory threshold exceeded: 1309MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:09] info: [auth] Authenticated user 904f2eda-0833-49f4-931b-532625a12bb6 for GET /11253/personality-impact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:09] info: [groomPersonalityTraitBonus] Compatibility: Calm + Spirited = MATCH (bond: 65)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:09] info: [horseController.getHorsePersonalityImpact] Retrieved personality compatibility for horse 11253 (Spirited)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:09] info: [GET] /api/horses/11253/personality-impact - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:09] info: [GET] /api/horses/99999/personality-impact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1305MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:10] info: [auth] Authenticated user 9b13659b-fecd-4966-9958-56595054da0d for GET /99999/personality-impact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:10] info: [GET] /api/horses/99999/personality-impact - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:10] info: [GET] /api/horses/11256/personality-impact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1308MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:10] info: [auth] Authenticated user 9acbd36b-d66d-4df6-b4f7-0fe3f5c3380f for GET /11256/personality-impact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:10] info: [GET] /api/horses/11256/personality-impact - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:10] info: [POST] /api/milestones/evaluate-milestone

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1311MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:10] info: [auth] Authenticated user 7327541d-71ff-4725-8194-f473dac95d35 for POST /evaluate-milestone

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:10] info: [enhancedMilestoneController.evaluateMilestone] Evaluating milestone imprinting for horse 11257

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:10] info: [enhancedMilestoneEvaluationSystem.evaluateEnhancedMilestone] Starting evaluation for horse 11257, milestone imprinting

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:10] info: [groomPersonalityTraitBonus] Compatibility: Calm + Spirited = MATCH (bond: 65)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:10] info: [personalityModifierEngine] Applied personality effects: Calm + Spirited = 2 trait modifier, 3.0 stress reduction, 10 bonding bonus

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:10] info: [enhancedMilestoneEvaluationSystem] Applied personality effects: Calm + Spirited = 2 modifier

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:10] info: [enhancedMilestoneEvaluationSystem.evaluateEnhancedMilestone] Completed evaluation for horse 11257: bonded (score: 0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:10] info: [POST] /api/milestones/evaluate-milestone - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/integration/trainingProgression.integration.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:52:10] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:10] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:10] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:52:10] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:10] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:10] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:10] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:10] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:10] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:10] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:10] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] warn: [MemoryMonitoring] Memory threshold exceeded: 1346MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: training-integration@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=4216ce97ba2f9a1bd38033ff76e6d45c8fccdc5e687e112b9096032aa8429b36

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:52:11] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] warn: [MemoryMonitoring] Memory threshold exceeded: 1341MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [trainingController.trainRouteHandler] Training request for horse 11263 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [trainingController.trainHorse] Attempting to train horse 11263 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [trainingController.canTrain] Checking training eligibility for horse 11263 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [trainingModel.getHorseAge] Getting age for horse 11263

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [trainingModel.getHorseAge] Horse 11263 is 2 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [trainingController.canTrain] Horse 11263 is too young (2 years old)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] warn: [trainingController.trainHorse] Training rejected: Horse is under age

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [POST] /api/training/train - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] warn: [MemoryMonitoring] Memory threshold exceeded: 1344MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [trainingController.trainRouteHandler] Training request for horse 11264 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [trainingController.trainHorse] Attempting to train horse 11264 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [trainingController.canTrain] Checking training eligibility for horse 11264 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [trainingModel.getHorseAge] Getting age for horse 11264

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [trainingModel.getHorseAge] Horse 11264 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11264 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [trainingModel.getAnyRecentTraining] No training records found for horse 11264

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [trainingController.canTrain] Horse 11264 is eligible to train in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [horseModel.getHorseById] Successfully found horse: Training Integration Mature Horse (ID: 11264)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [trainingController.trainHorse] Horse 11264 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [trainingModel.logTrainingSession] Logging training session for horse 11264 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 847

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [horseModel.updateHorseStat] Updating speed by 3 for horse 11264

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [horseModel.updateHorseStat] Updated speed for horse 11264: 0 -> 3 (+3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [trainingController.trainHorse] Stat gain: speed +3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [horseModel.incrementDisciplineScore] Incrementing Racing score for horse 11264 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [horseModel.updateDisciplineScore] Updating Racing score for horse 11264 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [horseModel.updateDisciplineScore] Successfully updated Racing score for horse 11264: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [horseModel.incrementDisciplineScore] Successfully incremented Racing score for horse 11264

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [xpLogModel.logXpEvent] Logging XP event: User 792af1b5-97cd-40bb-bdbd-e71fdea0e515, Amount: 5, Reason: Trained horse Training Integration Mature Horse in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 613, User 792af1b5-97cd-40bb-bdbd-e71fdea0e515, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [trainingController.trainHorse] Awarded 5 XP to user 792af1b5-97cd-40bb-bdbd-e71fdea0e515 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [trainingController.trainHorse] Successfully trained horse 11264 in Racing (Log ID: 847, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] warn: [MemoryMonitoring] Memory threshold exceeded: 1351MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [trainingController.trainRouteHandler] Training request for horse 11264 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [trainingController.trainHorse] Attempting to train horse 11264 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [trainingController.canTrain] Checking training eligibility for horse 11264 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [trainingModel.getHorseAge] Getting age for horse 11264

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [trainingModel.getHorseAge] Horse 11264 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11264 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 11264: Fri Nov 21 2025 17:52:11 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [trainingController.canTrain] Horse 11264 still in cooldown for any training (7 days remaining)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] warn: [trainingController.trainHorse] Training rejected: Training cooldown active for this horse

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [POST] /api/training/train - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] warn: [MemoryMonitoring] Memory threshold exceeded: 1354MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [trainingController.trainRouteHandler] Training request for horse 11264 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [trainingController.trainHorse] Attempting to train horse 11264 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [trainingController.canTrain] Checking training eligibility for horse 11264 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [trainingModel.getHorseAge] Getting age for horse 11264

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [trainingModel.getHorseAge] Horse 11264 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11264 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 11264: Fri Nov 21 2025 17:52:11 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [trainingController.canTrain] Horse 11264 still in cooldown for any training (7 days remaining)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] warn: [trainingController.trainHorse] Training rejected: Training cooldown active for this horse

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [POST] /api/training/train - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] warn: [MemoryMonitoring] Memory threshold exceeded: 1343MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [trainingController.trainRouteHandler] Training request for horse 11264 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [trainingController.trainHorse] Attempting to train horse 11264 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [trainingController.canTrain] Checking training eligibility for horse 11264 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [trainingModel.getHorseAge] Getting age for horse 11264

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [trainingModel.getHorseAge] Horse 11264 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11264 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 11264: Thu Nov 13 2025 17:52:11 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [trainingController.canTrain] Horse 11264 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [horseModel.getHorseById] Successfully found horse: Training Integration Mature Horse (ID: 11264)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [trainingController.trainHorse] Horse 11264 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [trainingModel.logTrainingSession] Logging training session for horse 11264 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 848

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [horseModel.incrementDisciplineScore] Incrementing Dressage score for horse 11264 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [horseModel.updateDisciplineScore] Updating Dressage score for horse 11264 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [horseModel.updateDisciplineScore] Successfully updated Dressage score for horse 11264: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [horseModel.incrementDisciplineScore] Successfully incremented Dressage score for horse 11264

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [xpLogModel.logXpEvent] Logging XP event: User 792af1b5-97cd-40bb-bdbd-e71fdea0e515, Amount: 5, Reason: Trained horse Training Integration Mature Horse in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 614, User 792af1b5-97cd-40bb-bdbd-e71fdea0e515, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [trainingController.trainHorse] Awarded 5 XP to user 792af1b5-97cd-40bb-bdbd-e71fdea0e515 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [trainingController.trainHorse] Successfully trained horse 11264 in Dressage (Log ID: 848, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/foalTaskLogStreakData.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:52:11] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:11] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

PASS tests/competitionScore.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:52:12] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 210

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -6.5%, adjustment: -13.8

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 196 (base: 210, trait: +0, luck: -13.8)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 210

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.4%, adjustment: 0.9

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 211 (base: 210, trait: +0, luck: 0.9)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 210

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 2.0%, adjustment: 4.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 214 (base: 210, trait: +0, luck: 4.1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 210

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.5%, adjustment: 1.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 211 (base: 210, trait: +0, luck: 1.1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -6.0%, adjustment: -18.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 282 (base: 300, trait: +0, luck: -18.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 2.1%, adjustment: 6.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 306 (base: 300, trait: +0, luck: 6.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -4.7%, adjustment: -14.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 286 (base: 300, trait: +0, luck: -14.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -7.5%, adjustment: -22.6

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 277 (base: 300, trait: +0, luck: -22.6)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 5.2%, adjustment: 15.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 316 (base: 300, trait: +0, luck: 15.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 10.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 311 (base: 300, trait: +0, luck: 10.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.3%, adjustment: -4.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 296 (base: 300, trait: +0, luck: -4.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.2%, adjustment: 9.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 310 (base: 300, trait: +0, luck: 9.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.9%, adjustment: -11.8

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 288 (base: 300, trait: +0, luck: -11.8)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.7%, adjustment: 2.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 302 (base: 300, trait: +0, luck: 2.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 2.4%, adjustment: 7.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 307 (base: 300, trait: +0, luck: 7.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -5.3%, adjustment: -15.8

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 284 (base: 300, trait: +0, luck: -15.8)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -4.7%, adjustment: -14.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 286 (base: 300, trait: +0, luck: -14.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -2.8%, adjustment: -8.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 292 (base: 300, trait: +0, luck: -8.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -2.0%, adjustment: -6.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 294 (base: 300, trait: +0, luck: -6.1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 7.3%, adjustment: 21.8

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 322 (base: 300, trait: +0, luck: 21.8)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -5.9%, adjustment: -17.8

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 282 (base: 300, trait: +0, luck: -17.8)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 2.3%, adjustment: 7.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 307 (base: 300, trait: +0, luck: 7.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -2.1%, adjustment: -6.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 294 (base: 300, trait: +0, luck: -6.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -4.5%, adjustment: -13.4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 287 (base: 300, trait: +0, luck: -13.4)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.7%, adjustment: 11.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 311 (base: 300, trait: +0, luck: 11.1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 4.9%, adjustment: 14.6

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 315 (base: 300, trait: +0, luck: 14.6)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.9%, adjustment: 11.8

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 312 (base: 300, trait: +0, luck: 11.8)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 6.8%, adjustment: 20.4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 320 (base: 300, trait: +0, luck: 20.4)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 7.4%, adjustment: 22.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 322 (base: 300, trait: +0, luck: 22.1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -8.4%, adjustment: -25.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 275 (base: 300, trait: +0, luck: -25.1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -4.4%, adjustment: -13.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 287 (base: 300, trait: +0, luck: -13.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -4.6%, adjustment: -13.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 286 (base: 300, trait: +0, luck: -13.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 8.7%, adjustment: 26.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 326 (base: 300, trait: +0, luck: 26.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -2.9%, adjustment: -8.8

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 291 (base: 300, trait: +0, luck: -8.8)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 4.5%, adjustment: 13.6

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 314 (base: 300, trait: +0, luck: 13.6)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 7.6%, adjustment: 22.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 323 (base: 300, trait: +0, luck: 22.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -6.6%, adjustment: -19.8

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 280 (base: 300, trait: +0, luck: -19.8)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 8.8%, adjustment: 26.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 326 (base: 300, trait: +0, luck: 26.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -5.9%, adjustment: -17.6

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 282 (base: 300, trait: +0, luck: -17.6)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 6.0%, adjustment: 17.9

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 318 (base: 300, trait: +0, luck: 17.9)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 6.1%, adjustment: 18.4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 318 (base: 300, trait: +0, luck: 18.4)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -5.7%, adjustment: -17.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 283 (base: 300, trait: +0, luck: -17.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -6.2%, adjustment: -18.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 281 (base: 300, trait: +0, luck: -18.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.2%, adjustment: 0.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 301 (base: 300, trait: +0, luck: 0.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -5.8%, adjustment: -17.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 283 (base: 300, trait: +0, luck: -17.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -6.6%, adjustment: -19.9

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 280 (base: 300, trait: +0, luck: -19.9)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -7.5%, adjustment: -22.6

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 277 (base: 300, trait: +0, luck: -22.6)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -7.2%, adjustment: -21.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 278 (base: 300, trait: +0, luck: -21.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 2.8%, adjustment: 8.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 308 (base: 300, trait: +0, luck: 8.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.0%, adjustment: 2.9

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 303 (base: 300, trait: +0, luck: 2.9)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.1%, adjustment: -9.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 291 (base: 300, trait: +0, luck: -9.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.2%, adjustment: 9.6

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 310 (base: 300, trait: +0, luck: 9.6)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.3%, adjustment: 4.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 304 (base: 300, trait: +0, luck: 4.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -2.3%, adjustment: -6.8

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 293 (base: 300, trait: +0, luck: -6.8)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 80

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -7.5%, adjustment: -6.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 74 (base: 80, trait: +0, luck: -6.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -4.5%, adjustment: -5.9

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 124 (base: 130, trait: +0, luck: -5.9)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -0.5%, adjustment: -0.6

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 129 (base: 130, trait: +0, luck: -0.6)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -2.7%, adjustment: -3.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 127 (base: 130, trait: +0, luck: -3.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -6.5%, adjustment: -8.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 121 (base: 130, trait: +0, luck: -8.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] error: [calculateCompetitionScore] Error calculating score for horse undefined: Horse object is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:12] error: [calculateCompetitionScore] Error calculating score for horse undefined: Horse object is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:12] error: [calculateCompetitionScore] Error calculating score for horse undefined: Horse object is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:12] error: [calculateCompetitionScore] Error calculating score for horse Test Horse: Event type is required and must be a string

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:12] error: [calculateCompetitionScore] Error calculating score for horse Test Horse: Event type is required and must be a string

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:12] error: [calculateCompetitionScore] Error calculating score for horse Test Horse: Event type is required and must be a string

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:12] warn: [calculateCompetitionScore] Unknown event type: Unknown Event, using default calculation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Unknown Event: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -6.8%, adjustment: -12.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 168 (base: 180, trait: +0, luck: -12.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 6.8%, adjustment: 12.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +0, luck: 12.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:12] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:13] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -9.0%, adjustment: -27.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Final score: 273 (base: 300, trait: +0, luck: -27.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 9.0%, adjustment: 27.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Final score: 327 (base: 300, trait: +0, luck: 27.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:14] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/competition.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:52:15] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:15] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:15] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:15] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:52:16] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

PASS tests/traitDiscoveryIntegration.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:52:17] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:17] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:17] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:52:17] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:17] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:17] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:17] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:17] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:17] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [POST] /api/trait-discovery/discover/11288

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] warn: [MemoryMonitoring] Memory threshold exceeded: 1451MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [traitController.discoverTraits] Triggering trait discovery for horse 11288

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 11288

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [traitDiscovery.revealTraits] Found 5 hidden traits for horse 11288

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [traitDiscovery.revealTraits] Successfully revealed 3 traits for horse 11288: calm, bold, resilient

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [traitController.discoverTraits] Discovered 3 traits for horse 11288 (High Bond Foal)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [POST] /api/trait-discovery/discover/11288 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [POST] /api/trait-discovery/discover/11289

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] warn: [MemoryMonitoring] Memory threshold exceeded: 1454MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [traitController.discoverTraits] Triggering trait discovery for horse 11289

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 11289

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [traitDiscovery.revealTraits] Found 3 hidden traits for horse 11289

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [traitDiscovery.revealTraits] No discovery conditions met for horse 11289

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [POST] /api/trait-discovery/discover/11289 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [POST] /api/trait-discovery/discover/11290

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] warn: [MemoryMonitoring] Memory threshold exceeded: 1454MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [traitController.discoverTraits] Triggering trait discovery for horse 11290

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 11290

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [traitDiscovery.revealTraits] Found 0 hidden traits for horse 11290

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [traitDiscovery.revealTraits] No hidden traits to reveal for horse 11290

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [POST] /api/trait-discovery/discover/11290 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [POST] /api/trait-discovery/discover/99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] warn: [MemoryMonitoring] Memory threshold exceeded: 1455MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [traitController.discoverTraits] Triggering trait discovery for horse 99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [POST] /api/trait-discovery/discover/99999 - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [POST] /api/trait-discovery/discover/invalid

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] warn: [MemoryMonitoring] Memory threshold exceeded: 1452MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] warn: [Validation] Input validation failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [POST] /api/trait-discovery/discover/invalid - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [GET] /api/trait-discovery/progress/11288

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] warn: [MemoryMonitoring] Memory threshold exceeded: 1463MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [traitDiscoveryRoutes] GET /progress/11288 - Getting discovery progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [GET] /api/trait-discovery/progress/11288 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [GET] /api/trait-discovery/progress/99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] warn: [MemoryMonitoring] Memory threshold exceeded: 1461MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [traitDiscoveryRoutes] GET /progress/99999 - Getting discovery progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] error: [traitDiscovery.getDiscoveryProgress] Error for horse 99999: Horse with ID 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:18] error: [traitDiscoveryRoutes] GET /progress/99999 error: Horse with ID 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:18] info: [GET] /api/trait-discovery/progress/99999 - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Batch test foal IDs: [ 11288, 11289 ]

      at Object.<anonymous> (tests/traitDiscoveryIntegration.test.mjs:263:15)

    console.log
      [2025-11-21 17:52:18] info: [POST] /api/trait-discovery/discover/batch

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] warn: [MemoryMonitoring] Memory threshold exceeded: 1460MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [traitDiscoveryRoutes] POST /discover/batch - Processing 2 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 11288

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [traitDiscovery.revealTraits] Found 2 hidden traits for horse 11288

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [traitDiscovery.revealTraits] Successfully revealed 2 traits for horse 11288: athletic, intelligent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 11289

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [traitDiscovery.revealTraits] Found 3 hidden traits for horse 11289

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [traitDiscovery.revealTraits] No discovery conditions met for horse 11289

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [POST] /api/trait-discovery/discover/batch - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [POST] /api/trait-discovery/discover/batch

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] warn: [MemoryMonitoring] Memory threshold exceeded: 1465MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [traitDiscoveryRoutes] POST /discover/batch - Processing 3 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 11288

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [traitDiscovery.revealTraits] Found 0 hidden traits for horse 11288

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [traitDiscovery.revealTraits] No hidden traits to reveal for horse 11288

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] error: [traitDiscovery.revealTraits] Error revealing traits for horse 99999: Horse with ID 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:18] error: [traitDiscovery.batchRevealTraits] Error for horse 99999: Horse with ID 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:18] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 11290

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [traitDiscovery.revealTraits] Found 0 hidden traits for horse 11290

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [traitDiscovery.revealTraits] No hidden traits to reveal for horse 11290

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [POST] /api/trait-discovery/discover/batch - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [POST] /api/trait-discovery/discover/batch

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] warn: [MemoryMonitoring] Memory threshold exceeded: 1454MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [POST] /api/trait-discovery/discover/batch - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [GET] /api/trait-discovery/conditions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] warn: [MemoryMonitoring] Memory threshold exceeded: 1464MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [traitDiscoveryRoutes] GET /conditions - Getting discovery conditions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [GET] /api/trait-discovery/conditions - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [POST] /api/trait-discovery/check-conditions/11288

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] warn: [MemoryMonitoring] Memory threshold exceeded: 1467MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [traitDiscoveryRoutes] POST /check-conditions/11288 - Checking conditions without discovery

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [POST] /api/trait-discovery/check-conditions/11288 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [POST] /api/trait-discovery/check-conditions/99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] warn: [MemoryMonitoring] Memory threshold exceeded: 1455MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [traitDiscoveryRoutes] POST /check-conditions/99999 - Checking conditions without discovery

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] error: [traitDiscovery.getDiscoveryProgress] Error for horse 99999: Horse with ID 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:18] error: [traitDiscoveryRoutes] POST /check-conditions/99999 error: Horse with ID 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:18] info: [POST] /api/trait-discovery/check-conditions/99999 - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [GET] /api/trait-discovery/progress/11291

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] warn: [MemoryMonitoring] Memory threshold exceeded: 1455MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [traitDiscoveryRoutes] GET /progress/11291 - Getting discovery progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [GET] /api/trait-discovery/progress/11291 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Initial hidden count: 5

      at Object.<anonymous> (tests/traitDiscoveryIntegration.test.mjs:440:15)

    console.log
      Progress response: {
        "horseId": 11291,
        "horseName": "Fresh Workflow Foal",
        "discoveredTraits": 5,
        "totalPossibleTraits": 7,
        "progressPercentage": 71,
        "traits": [
          "intelligent",
          "calm",
          "athletic",
          "resilient",
          "bold"
        ],
        "hiddenTraitsCount": 5,
        "visibleTraitsCount": 0,
        "currentStats": {
          "bondScore": 85,
          "stressLevel": 15,
          "developmentDay": 3
        },
        "conditions": {
          "high_bond": {
            "name": "High Bond",
            "description": "Strong bond formed",
            "met": true,
            "progress": 100,
            "revealableTraits": [
              "loyal",
              "trusting",
              "calm"
            ]
          },
          "excellent_bond": {
            "name": "Excellent Bond",
            "description": "Exceptional bond achieved",
            "met": false,
            "progress": 0,
            "revealableTraits": [
              "devoted",
              "empathetic",
              "intuitive"
            ]
          },
          "low_stress": {
            "name": "Low Stress",
            "description": "Stress levels minimized",
            "met": true,
            "progress": 100,
            "revealableTraits": [
              "calm",
              "relaxed",
              "confident"
            ]
          },
          "minimal_stress": {
            "name": "Minimal Stress",
            "description": "Perfect stress management",
            "met": false,
            "progress": 0,
            "revealableTraits": [
              "zen",
              "unflappable",
              "serene"
            ]
          },
          "perfect_care": {
            "name": "Perfect Care",
            "description": "Perfect care conditions achieved",
            "met": true,
            "progress": 100,
            "revealableTraits": [
              "exceptional",
              "thriving",
              "balanced"
            ]
          },
          "mature_bond": {
            "name": "Mature Bond",
            "description": "Mature relationship developed with adult horse",
            "met": false,
            "progress": 0,
            "revealableTraits": [
              "resilient",
              "calm",
              "confident",
              "bonded"
            ]
          },
          "consistent_training": {
            "name": "Consistent Training",
            "description": "Consistent training regimen maintained",
            "met": false,
            "progress": 0,
            "revealableTraits": [
              "disciplined",
              "focused",
              "trainable"
            ]
          }
        }
      }

      at Object.<anonymous> (tests/traitDiscoveryIntegration.test.mjs:441:15)

    console.log
      [2025-11-21 17:52:18] info: [POST] /api/trait-discovery/check-conditions/11291

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] warn: [MemoryMonitoring] Memory threshold exceeded: 1467MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [traitDiscoveryRoutes] POST /check-conditions/11291 - Checking conditions without discovery

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [POST] /api/trait-discovery/check-conditions/11291 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [POST] /api/trait-discovery/discover/11291

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] warn: [MemoryMonitoring] Memory threshold exceeded: 1464MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [traitController.discoverTraits] Triggering trait discovery for horse 11291

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 11291

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [traitDiscovery.revealTraits] Found 5 hidden traits for horse 11291

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [traitDiscovery.revealTraits] Successfully revealed 3 traits for horse 11291: calm, athletic, resilient

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [traitController.discoverTraits] Discovered 3 traits for horse 11291 (Fresh Workflow Foal)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [POST] /api/trait-discovery/discover/11291 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [GET] /api/trait-discovery/progress/11291

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] warn: [MemoryMonitoring] Memory threshold exceeded: 1465MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [traitDiscoveryRoutes] GET /progress/11291 - Getting discovery progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [GET] /api/trait-discovery/progress/11291 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/integration/groomPerformanceSystem.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:52:18] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:18] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:52:19] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] info: [groomPerformanceService] Updated metrics for groom 4717

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] info: [groomPerformanceService] Recorded performance for groom 4717: grooming

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] info: [groomPerformanceService] Updated metrics for groom 4717

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] info: [groomPerformanceService] Recorded performance for groom 4717: training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] info: [groomPerformanceService] Updated metrics for groom 4717

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] info: [groomPerformanceService] Recorded performance for groom 4717: training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] info: [groomPerformanceService] Updated metrics for groom 4717

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] info: [groomPerformanceService] Recorded performance for groom 4717: training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] info: [POST] /api/groom-performance/record

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] warn: [MemoryMonitoring] Memory threshold exceeded: 1492MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] info: [auth] Authenticated user 70c1418b-01e3-4eb3-bac7-9f933b18bf3a for POST /record

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] info: [groomPerformanceController] Recording performance for groom 4717

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] info: [groomPerformanceService] Updated metrics for groom 4717

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] info: [groomPerformanceService] Recorded performance for groom 4717: enrichment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] info: [POST] /api/groom-performance/record - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] info: [GET] /api/groom-performance/groom/4717

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] warn: [MemoryMonitoring] Memory threshold exceeded: 1496MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] info: [auth] Authenticated user 70c1418b-01e3-4eb3-bac7-9f933b18bf3a for GET /groom/4717

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] info: [groomPerformanceController] Getting performance for groom 4717

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] info: [GET] /api/groom-performance/groom/4717 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] info: [GET] /api/groom-performance/top?limit=5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] warn: [MemoryMonitoring] Memory threshold exceeded: 1498MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] info: [auth] Authenticated user 70c1418b-01e3-4eb3-bac7-9f933b18bf3a for GET /top

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] info: [groomPerformanceController] Getting top performers for user 70c1418b-01e3-4eb3-bac7-9f933b18bf3a

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] info: [GET] /api/groom-performance/top?limit=5 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] info: [GET] /api/groom-performance/config

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] warn: [MemoryMonitoring] Memory threshold exceeded: 1497MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] info: [auth] Authenticated user 70c1418b-01e3-4eb3-bac7-9f933b18bf3a for GET /config

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] info: [groomPerformanceController] Getting performance config for user 70c1418b-01e3-4eb3-bac7-9f933b18bf3a

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] info: [GET] /api/groom-performance/config - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] info: [GET] /api/groom-performance/analytics/4717?days=30

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] warn: [MemoryMonitoring] Memory threshold exceeded: 1499MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] info: [auth] Authenticated user 70c1418b-01e3-4eb3-bac7-9f933b18bf3a for GET /analytics/4717

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] info: [groomPerformanceController] Getting analytics for groom 4717, last 30 days

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] info: [GET] /api/groom-performance/analytics/4717?days=30 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] info: [GET] /api/groom-performance/groom/4718

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] warn: [MemoryMonitoring] Memory threshold exceeded: 1500MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] info: [auth] Authenticated user 70c1418b-01e3-4eb3-bac7-9f933b18bf3a for GET /groom/4718

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] info: [groomPerformanceController] Getting performance for groom 4718

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] info: [GET] /api/groom-performance/groom/4718 - 403

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] info: [POST] /api/groom-performance/record

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] warn: [MemoryMonitoring] Memory threshold exceeded: 1498MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] info: [auth] Authenticated user 70c1418b-01e3-4eb3-bac7-9f933b18bf3a for POST /record

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] warn: [Validation] Input validation failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] info: [POST] /api/groom-performance/record - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] info: [POST] /api/groom-performance/record

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] warn: [MemoryMonitoring] Memory threshold exceeded: 1496MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] info: [auth] Authenticated user 70c1418b-01e3-4eb3-bac7-9f933b18bf3a for POST /record

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] warn: [Validation] Input validation failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] info: [POST] /api/groom-performance/record - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] info: [POST] /api/groom-performance/record

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] warn: [MemoryMonitoring] Memory threshold exceeded: 1495MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] info: [auth] Authenticated user 70c1418b-01e3-4eb3-bac7-9f933b18bf3a for POST /record

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] warn: [Validation] Input validation failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] info: [POST] /api/groom-performance/record - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] info: [POST] /api/groom-performance/record

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] warn: [MemoryMonitoring] Memory threshold exceeded: 1496MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] warn: [auth] Missing token for POST /record from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] info: [POST] /api/groom-performance/record - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] info: [GET] /api/groom-performance/groom/4717

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] warn: [MemoryMonitoring] Memory threshold exceeded: 1496MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] warn: [auth] Missing token for GET /groom/4717 from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] info: [GET] /api/groom-performance/groom/4717 - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] info: [GET] /api/groom-performance/top

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] warn: [MemoryMonitoring] Memory threshold exceeded: 1496MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] warn: [auth] Missing token for GET /top from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] info: [GET] /api/groom-performance/top - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] info: [GET] /api/groom-performance/config

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] warn: [MemoryMonitoring] Memory threshold exceeded: 1496MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] warn: [auth] Missing token for GET /config from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] info: [GET] /api/groom-performance/config - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:19] info: [GET] /api/groom-performance/analytics/4717

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:20] warn: [MemoryMonitoring] Memory threshold exceeded: 1496MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:20] warn: [auth] Missing token for GET /analytics/4717 from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:20] info: [GET] /api/groom-performance/analytics/4717 - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS __tests__/routes/documentationRoutes.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:52:20] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:20] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:20] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:52:20] info: [auth] Authenticated user 7d2b86b6-64d7-4601-9b2c-e96eac4b874b for GET /health

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:20] info: [DocumentationRoutes] Getting documentation health status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:20] info: [ApiDocService] OpenAPI specification validation passed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:20] warn: [auth] Missing token for GET /health from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:20] info: [auth] Authenticated user 7d2b86b6-64d7-4601-9b2c-e96eac4b874b for GET /metrics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:20] info: [DocumentationRoutes] Getting documentation metrics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:20] info: [auth] Authenticated user 7d2b86b6-64d7-4601-9b2c-e96eac4b874b for GET /metrics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:20] info: [DocumentationRoutes] Getting documentation metrics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:20] info: [auth] Authenticated user 7d2b86b6-64d7-4601-9b2c-e96eac4b874b for GET /validation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:20] info: [DocumentationRoutes] Validating OpenAPI specification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:20] info: [ApiDocService] OpenAPI specification validation passed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:20] info: [auth] Authenticated user 7d2b86b6-64d7-4601-9b2c-e96eac4b874b for POST /generate

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:20] info: [DocumentationRoutes] Generating API documentation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:20] info: [ApiDocService] OpenAPI specification saved successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:20] info: [ApiDocService] Documentation generated for 1 endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:20] info: [auth] Authenticated user 7d2b86b6-64d7-4601-9b2c-e96eac4b874b for POST /endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:20] info: [DocumentationRoutes] Registering endpoint: POST /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:20] info: [auth] Authenticated user 7d2b86b6-64d7-4601-9b2c-e96eac4b874b for POST /endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:20] info: [auth] Authenticated user 7d2b86b6-64d7-4601-9b2c-e96eac4b874b for POST /endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:20] info: [DocumentationRoutes] Registering endpoint: GET /api/test-get

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:20] info: [auth] Authenticated user 7d2b86b6-64d7-4601-9b2c-e96eac4b874b for POST /endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:20] info: [DocumentationRoutes] Registering endpoint: POST /api/test-post

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:21] info: [auth] Authenticated user 7d2b86b6-64d7-4601-9b2c-e96eac4b874b for POST /endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:21] info: [DocumentationRoutes] Registering endpoint: PUT /api/test-put

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:21] info: [auth] Authenticated user 7d2b86b6-64d7-4601-9b2c-e96eac4b874b for POST /endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:21] info: [DocumentationRoutes] Registering endpoint: DELETE /api/test-delete

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:21] info: [auth] Authenticated user 7d2b86b6-64d7-4601-9b2c-e96eac4b874b for POST /endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:21] info: [DocumentationRoutes] Registering endpoint: PATCH /api/test-patch

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:21] info: [auth] Authenticated user 7d2b86b6-64d7-4601-9b2c-e96eac4b874b for POST /schemas

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:21] info: [DocumentationRoutes] Registering schema: Horse

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:21] info: [auth] Authenticated user 7d2b86b6-64d7-4601-9b2c-e96eac4b874b for POST /schemas

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:21] info: [auth] Authenticated user 7d2b86b6-64d7-4601-9b2c-e96eac4b874b for GET /coverage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:21] info: [DocumentationRoutes] Getting documentation coverage analysis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:21] info: [auth] Authenticated user 7d2b86b6-64d7-4601-9b2c-e96eac4b874b for GET /analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:21] info: [DocumentationRoutes] Getting documentation analytics for timeframe: 30d

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:21] info: [ApiDocService] OpenAPI specification validation passed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:21] info: [auth] Authenticated user 7d2b86b6-64d7-4601-9b2c-e96eac4b874b for GET /analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:21] info: [DocumentationRoutes] Getting documentation analytics for timeframe: 1d

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:21] info: [ApiDocService] OpenAPI specification validation passed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:21] info: [auth] Authenticated user 7d2b86b6-64d7-4601-9b2c-e96eac4b874b for GET /analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:21] info: [DocumentationRoutes] Getting documentation analytics for timeframe: 7d

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:21] info: [ApiDocService] OpenAPI specification validation passed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:21] info: [auth] Authenticated user 7d2b86b6-64d7-4601-9b2c-e96eac4b874b for GET /analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:21] info: [DocumentationRoutes] Getting documentation analytics for timeframe: 30d

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:21] info: [ApiDocService] OpenAPI specification validation passed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:21] info: [auth] Authenticated user 7d2b86b6-64d7-4601-9b2c-e96eac4b874b for GET /analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:21] warn: [auth] Invalid token for GET /health from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:21] warn: [auth] Missing token for GET /health from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:21] info: [auth] Authenticated user 7d2b86b6-64d7-4601-9b2c-e96eac4b874b for POST /endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:21] info: [DocumentationRoutes] Registering endpoint: GET /api/users

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:21] info: [auth] Authenticated user 7d2b86b6-64d7-4601-9b2c-e96eac4b874b for POST /endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:21] info: [DocumentationRoutes] Registering endpoint: POST /api/users

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:21] info: [auth] Authenticated user 7d2b86b6-64d7-4601-9b2c-e96eac4b874b for POST /endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:21] info: [DocumentationRoutes] Registering endpoint: GET /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:21] info: [auth] Authenticated user 7d2b86b6-64d7-4601-9b2c-e96eac4b874b for GET /metrics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:21] info: [DocumentationRoutes] Getting documentation metrics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:21] info: [auth] Authenticated user 7d2b86b6-64d7-4601-9b2c-e96eac4b874b for POST /schemas

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:21] info: [DocumentationRoutes] Registering schema: User

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:21] info: [auth] Authenticated user 7d2b86b6-64d7-4601-9b2c-e96eac4b874b for POST /schemas

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:21] info: [DocumentationRoutes] Registering schema: Horse

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:21] info: [auth] Authenticated user 7d2b86b6-64d7-4601-9b2c-e96eac4b874b for POST /generate

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:21] info: [DocumentationRoutes] Generating API documentation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:21] info: [ApiDocService] OpenAPI specification saved successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:21] info: [ApiDocService] Documentation generated for 0 endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/integration/epigeneticFlagRoutes.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:52:21] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:21] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:21] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:52:22] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:22] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:22] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:22] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:22] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:22] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:22] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:22] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:22] info: [GET] /api/flags/health

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1341MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:22] info: [GET] /api/flags/health - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:22] info: [POST] /api/flags/evaluate

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1340MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:22] warn: [auth] Missing token for POST /evaluate from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:22] info: [POST] /api/flags/evaluate - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:22] info: [GET] /api/flags/horses/123/flags

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1339MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:22] warn: [auth] Missing token for GET /horses/123/flags from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:22] info: [GET] /api/flags/horses/123/flags - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:22] info: [GET] /api/flags/definitions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1338MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:22] warn: [auth] Missing token for GET /definitions from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:22] info: [GET] /api/flags/definitions - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:22] info: [POST] /api/flags/batch-evaluate

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1338MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:22] warn: [auth] Missing token for POST /batch-evaluate from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:22] info: [POST] /api/flags/batch-evaluate - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:22] info: [GET] /api/flags/horses/123/care-patterns

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1336MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:22] warn: [auth] Missing token for GET /horses/123/care-patterns from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:22] info: [GET] /api/flags/horses/123/care-patterns - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:22] info: [POST] /api/flags/evaluate

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1336MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:22] warn: [auth] Missing token for POST /evaluate from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:22] info: [POST] /api/flags/evaluate - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:22] info: [GET] /api/flags/horses/123/flags

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1336MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:22] warn: [auth] Missing token for GET /horses/123/flags from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:22] info: [GET] /api/flags/horses/123/flags - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:22] info: [GET] /api/flags/definitions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1335MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:22] warn: [auth] Missing token for GET /definitions from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:22] info: [GET] /api/flags/definitions - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:22] info: [POST] /api/flags/batch-evaluate

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1335MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:22] warn: [auth] Missing token for POST /batch-evaluate from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:22] info: [POST] /api/flags/batch-evaluate - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:22] info: [GET] /api/flags/horses/123/care-patterns

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1335MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:22] warn: [auth] Missing token for GET /horses/123/care-patterns from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:22] info: [GET] /api/flags/horses/123/care-patterns - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:22] info: [GET] /api/flags/health

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1335MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:22] info: [GET] /api/flags/health - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:22] info: [GET] /api/flags/health

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1347MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:22] info: [GET] /api/flags/health - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:22] info: [GET] /api/flags/health

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1343MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:22] info: [GET] /api/flags/health - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS __tests__/routes/userDocumentationRoutes.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:52:23] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:23] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:23] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.log
      [2025-11-21 17:52:23] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:23] info: [UserDocService] Built search index with 1244 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:23] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:23] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:23] info: [UserDocService] Built search index with 111 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:23] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:23] info: [UserDocRoutes] Getting all documentation list

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:23] info: [UserDocRoutes] Getting all documentation list

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:23] info: [UserDocRoutes] Searching documentation for: "horse training"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:23] info: [UserDocRoutes] Searching documentation for: "horse"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:23] info: [UserDocRoutes] Searching documentation for: "nonexistentterm12345"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:23] info: [UserDocRoutes] Getting document: feature-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:23] info: [UserDocRoutes] Getting document: strategy-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:23] info: [UserDocRoutes] Searching documentation for: "horse"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:23] info: [UserDocRoutes] Getting documentation analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:23] info: [UserDocRoutes] Getting table of contents

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:23] info: [UserDocRoutes] Getting document: feature-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:23] info: [UserDocRoutes] Getting document: non-existent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:23] warn: [UserDocService] Document not found: non-existent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:23] info: [UserDocRoutes] Getting document: feature-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:23] info: [UserDocRoutes] Getting document: feature-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:23] info: [UserDocRoutes] Getting document: feature-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:23] info: [UserDocRoutes] Getting document: feature-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:23] info: [UserDocRoutes] Getting document: feature-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:23] info: [UserDocRoutes] Getting sections for document: feature-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:23] info: [UserDocRoutes] Getting sections for document: non-existent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:23] warn: [UserDocService] Document not found: non-existent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:23] info: [UserDocRoutes] Searching in document "feature-guide" for: "training"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:23] info: [UserDocRoutes] Searching in document "feature-guide" for: "horse"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:23] info: [UserDocRoutes] Searching in document "non-existent" for: "test"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:23] warn: [UserDocService] Document not found: non-existent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:23] info: [UserDocRoutes] Refreshing documentation cache

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:23] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:23] info: [UserDocService] Built search index with 111 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:23] info: [UserDocService] Documentation refreshed successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:23] info: [UserDocRoutes] Searching documentation for: "horse"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:23] info: [UserDocRoutes] Searching documentation for: "training"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:23] info: [UserDocRoutes] Searching documentation for: "competition"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:23] info: [UserDocRoutes] Getting documentation analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:23] info: [UserDocRoutes] Getting document: feature-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:23] info: [UserDocRoutes] Getting document: feature-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:23] info: [UserDocRoutes] Getting document: strategy-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:23] info: [UserDocRoutes] Getting documentation analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:23] info: [UserDocRoutes] Getting document: feature-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:23] info: [UserDocRoutes] Getting document: feature-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/foalTaskLogStreakIntegration.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:52:24] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:24] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:24] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

PASS __tests__/middleware/sessionManagement.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:52:24] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:24] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:24] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:52:24] warn: [Session] Session expired due to inactivity

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:24] warn: [Session] Session expired due to inactivity

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:25] warn: [Session] Too many concurrent sessions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:25] info: [Session] Removed oldest sessions to enforce limit

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:25] warn: [Session] Too many concurrent sessions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:25] info: [Session] Removed oldest sessions to enforce limit

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:25] warn: [Session] Too many concurrent sessions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:25] info: [Session] Removed oldest sessions to enforce limit

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:25] error: [Session] Error fetching active sessions: Database connection lost

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:25] info: [Session] Session revoked by user

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:25] error: [Session] Error revoking session: 
      Invalid `prisma.refreshToken.deleteMany()` invocation:
      
      {
        where: {
          userId: "invalid-user",
      +   id: {
      +     equals: Int | IntFieldRefInput,
      +     in: Int[] | ListIntFieldRefInput,
      +     notIn: Int[] | ListIntFieldRefInput,
      +     lt: Int | IntFieldRefInput,
      +     lte: Int | IntFieldRefInput,
      +     gt: Int | IntFieldRefInput,
      +     gte: Int | IntFieldRefInput,
      +     not: Int | NestedIntFilter
      +   }
        }
      }
      
      Argument `id` is missing.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

PASS tests/integration/traitRoutes.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:52:25] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:25] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:25] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:52:26] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [POST] /api/trait-discovery/discover/1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] warn: [MemoryMonitoring] Memory threshold exceeded: 1423MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [traitController.discoverTraits] Triggering trait discovery for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [traitDiscovery.revealTraits] Found 2 hidden traits for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] warn: [traitDiscovery.checkDiscoveryConditions] Error checking condition CONSISTENT_TRAINING: Cannot read properties of undefined (reading 'count')

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [traitDiscovery.revealTraits] Successfully revealed 1 traits for horse 1: bold

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [traitController.discoverTraits] Discovered 1 traits for horse 1 (Test Discovery Horse 1763765546433)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [POST] /api/trait-discovery/discover/1 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [POST] /api/traits/discover/2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] warn: [MemoryMonitoring] Memory threshold exceeded: 1415MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [traitController.discoverTraits] Triggering trait discovery for horse 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [traitDiscovery.revealTraits] Found 2 hidden traits for horse 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] warn: [traitDiscovery.checkDiscoveryConditions] Error checking condition CONSISTENT_TRAINING: Cannot read properties of undefined (reading 'count')

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [traitDiscovery.revealTraits] Successfully revealed 2 traits for horse 2: calm, resilient

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [traitController.discoverTraits] Discovered 2 traits for horse 2 (Adult Test Horse)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [POST] /api/traits/discover/2 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [POST] /api/trait-discovery/discover/invalid

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] warn: [MemoryMonitoring] Memory threshold exceeded: 1419MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] warn: [Validation] Input validation failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [POST] /api/trait-discovery/discover/invalid - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [POST] /api/trait-discovery/discover/99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] warn: [MemoryMonitoring] Memory threshold exceeded: 1416MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [traitController.discoverTraits] Triggering trait discovery for horse 99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [POST] /api/trait-discovery/discover/99999 - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [POST] /api/trait-discovery/discover/1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] warn: [MemoryMonitoring] Memory threshold exceeded: 1427MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [traitController.discoverTraits] Triggering trait discovery for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [traitDiscovery.revealTraits] Found 2 hidden traits for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] warn: [traitDiscovery.checkDiscoveryConditions] Error checking condition CONSISTENT_TRAINING: Cannot read properties of undefined (reading 'count')

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [traitDiscovery.revealTraits] Successfully revealed 1 traits for horse 1: bold

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [traitController.discoverTraits] Discovered 1 traits for horse 1 (Test Discovery Horse 1763765546433)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [POST] /api/trait-discovery/discover/1 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [GET] /api/traits/horse/1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] warn: [MemoryMonitoring] Memory threshold exceeded: 1427MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [traitController.getHorseTraits] Getting traits for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [GET] /api/traits/horse/1 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [GET] /api/traits/horse/invalid

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] warn: [MemoryMonitoring] Memory threshold exceeded: 1424MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] warn: [traitRoutes] Validation errors: [{"type":"field","value":"invalid","msg":"Horse ID must be a positive integer","path":"horseId","location":"params"}]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [GET] /api/traits/horse/invalid - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [GET] /api/traits/horse/99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] warn: [MemoryMonitoring] Memory threshold exceeded: 1420MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [traitController.getHorseTraits] Getting traits for horse 99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [GET] /api/traits/horse/99999 - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [GET] /api/traits/definitions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] warn: [MemoryMonitoring] Memory threshold exceeded: 1417MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [traitController.getTraitDefinitions] Getting trait definitions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [GET] /api/traits/definitions - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [GET] /api/traits/definitions?type=positive

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] warn: [MemoryMonitoring] Memory threshold exceeded: 1418MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [traitController.getTraitDefinitions] Getting trait definitions for type: positive

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [GET] /api/traits/definitions?type=positive - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [GET] /api/traits/definitions?type=invalid

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] warn: [MemoryMonitoring] Memory threshold exceeded: 1418MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] warn: [traitRoutes] Validation errors: [{"type":"field","value":"invalid","msg":"Type must be either \"all\", \"positive\", or \"negative\"","path":"type","location":"query"}]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [GET] /api/traits/definitions?type=invalid - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [GET] /api/trait-discovery/discovery-status/1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] warn: [MemoryMonitoring] Memory threshold exceeded: 1429MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [traitController.getDiscoveryStatus] Getting discovery status for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] warn: [traitDiscovery.checkDiscoveryConditions] Error checking condition CONSISTENT_TRAINING: Cannot read properties of undefined (reading 'count')

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [GET] /api/trait-discovery/discovery-status/1 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [GET] /api/trait-discovery/discovery-status/invalid

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] warn: [MemoryMonitoring] Memory threshold exceeded: 1426MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] warn: [Validation] Input validation failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [GET] /api/trait-discovery/discovery-status/invalid - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [GET] /api/trait-discovery/discovery-status/99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] warn: [MemoryMonitoring] Memory threshold exceeded: 1422MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [traitController.getDiscoveryStatus] Getting discovery status for horse 99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [GET] /api/trait-discovery/discovery-status/99999 - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [POST] /api/trait-discovery/batch-discover

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] warn: [MemoryMonitoring] Memory threshold exceeded: 1419MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [traitController.batchDiscoverTraits] Processing batch discovery for 1 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [traitDiscovery.revealTraits] Found 2 hidden traits for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] warn: [traitDiscovery.checkDiscoveryConditions] Error checking condition CONSISTENT_TRAINING: Cannot read properties of undefined (reading 'count')

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [traitDiscovery.revealTraits] Successfully revealed 1 traits for horse 1: bold

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [POST] /api/trait-discovery/batch-discover - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [POST] /api/trait-discovery/batch-discover

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] warn: [MemoryMonitoring] Memory threshold exceeded: 1422MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] warn: [Validation] Input validation failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [POST] /api/trait-discovery/batch-discover - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [POST] /api/trait-discovery/batch-discover

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] warn: [MemoryMonitoring] Memory threshold exceeded: 1420MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] warn: [Validation] Input validation failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [POST] /api/trait-discovery/batch-discover - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [POST] /api/trait-discovery/batch-discover

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] warn: [MemoryMonitoring] Memory threshold exceeded: 1431MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] warn: [Validation] Input validation failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [POST] /api/trait-discovery/batch-discover - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [POST] /api/trait-discovery/batch-discover

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] warn: [MemoryMonitoring] Memory threshold exceeded: 1426MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [traitController.batchDiscoverTraits] Processing batch discovery for 2 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [traitDiscovery.revealTraits] Found 2 hidden traits for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] warn: [traitDiscovery.checkDiscoveryConditions] Error checking condition CONSISTENT_TRAINING: Cannot read properties of undefined (reading 'count')

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [traitDiscovery.revealTraits] Successfully revealed 1 traits for horse 1: bold

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:26] error: [traitDiscovery.revealTraits] Error revealing traits for horse 99999: Horse with ID 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:26] error: [traitController.batchDiscoverTraits] Error processing horse 99999: Horse with ID 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:26] info: [POST] /api/trait-discovery/batch-discover - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/foalEnrichmentIntegration.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:52:27] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:27] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:27] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:52:27] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:27] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:27] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:27] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:27] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:27] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:27] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:27] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:27] info: [POST] /api/foals/1/enrichment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:27] warn: [MemoryMonitoring] Memory threshold exceeded: 1467MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:27] info: [foalRoutes] POST /api/foals/1/enrichment - Day 3, Activity: Trailer Exposure

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:27] info: [foalModel.completeEnrichmentActivity] Processing enrichment activity "Trailer Exposure" for foal 1 on day 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:27] info: [foalModel.completeEnrichmentActivity] Activity completed successfully. Bond: 50 -> 53, Stress: 20 -> 26

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:27] info: [POST] /api/foals/1/enrichment - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:27] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:27] info: [traitDiscovery.revealTraits] Found 0 hidden traits for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:27] info: [traitDiscovery.revealTraits] No hidden traits to reveal for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:27] info: [POST] /api/foals/1/enrichment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:27] warn: [MemoryMonitoring] Memory threshold exceeded: 1455MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:27] info: [foalRoutes] POST /api/foals/1/enrichment - Day 3, Activity: Halter Introduction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:27] info: [foalModel.completeEnrichmentActivity] Processing enrichment activity "Halter Introduction" for foal 1 on day 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:27] info: [foalModel.completeEnrichmentActivity] Activity completed successfully. Bond: 50 -> 55, Stress: 20 -> 24

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:27] info: [POST] /api/foals/1/enrichment - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:27] info: [POST] /api/foals/1/enrichment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:27] warn: [MemoryMonitoring] Memory threshold exceeded: 1455MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:27] info: [POST] /api/foals/1/enrichment - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:27] info: [POST] /api/foals/1/enrichment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:27] warn: [MemoryMonitoring] Memory threshold exceeded: 1465MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:27] info: [POST] /api/foals/1/enrichment - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:27] info: [POST] /api/foals/1/enrichment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:27] warn: [MemoryMonitoring] Memory threshold exceeded: 1459MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:27] info: [POST] /api/foals/1/enrichment - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:27] info: [POST] /api/foals/1/enrichment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:27] warn: [MemoryMonitoring] Memory threshold exceeded: 1456MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:27] info: [POST] /api/foals/1/enrichment - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:27] info: [POST] /api/foals/1/enrichment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:27] warn: [MemoryMonitoring] Memory threshold exceeded: 1465MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:27] info: [POST] /api/foals/1/enrichment - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:27] info: [POST] /api/foals/99999/enrichment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:27] warn: [MemoryMonitoring] Memory threshold exceeded: 1460MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:27] info: [foalRoutes] POST /api/foals/99999/enrichment - Day 3, Activity: Trailer Exposure

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:27] info: [foalModel.completeEnrichmentActivity] Processing enrichment activity "Trailer Exposure" for foal 99999 on day 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:27] error: [foalModel.completeEnrichmentActivity] Error: Foal not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:27] error: [foalRoutes] POST /api/foals/:foalId/enrichment error: Foal not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:27] info: [POST] /api/foals/99999/enrichment - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:27] info: [POST] /api/foals/1/enrichment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:27] warn: [MemoryMonitoring] Memory threshold exceeded: 1460MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:27] info: [foalRoutes] POST /api/foals/1/enrichment - Day 0, Activity: Trailer Exposure

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:27] info: [foalModel.completeEnrichmentActivity] Processing enrichment activity "Trailer Exposure" for foal 1 on day 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:27] error: [foalModel.completeEnrichmentActivity] Error: Activity "Trailer Exposure" is not appropriate for day 0. Available activities: Gentle Touch, Quiet Presence, Soft Voice

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:27] error: [foalRoutes] POST /api/foals/:foalId/enrichment error: Activity "Trailer Exposure" is not appropriate for day 0. Available activities: Gentle Touch, Quiet Presence, Soft Voice

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:27] info: [POST] /api/foals/1/enrichment - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] info: [POST] /api/foals/1/enrichment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] warn: [MemoryMonitoring] Memory threshold exceeded: 1458MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] info: [foalRoutes] POST /api/foals/1/enrichment - Day 3, Activity: leading_practice

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] info: [foalModel.completeEnrichmentActivity] Processing enrichment activity "leading_practice" for foal 1 on day 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] info: [foalModel.completeEnrichmentActivity] Activity completed successfully. Bond: 50 -> 59, Stress: 20 -> 24

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] info: [POST] /api/foals/1/enrichment - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] info: [POST] /api/foals/1/enrichment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] warn: [MemoryMonitoring] Memory threshold exceeded: 1470MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] info: [foalRoutes] POST /api/foals/1/enrichment - Day 3, Activity: Leading Practice

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] info: [foalModel.completeEnrichmentActivity] Processing enrichment activity "Leading Practice" for foal 1 on day 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] info: [foalModel.completeEnrichmentActivity] Activity completed successfully. Bond: 50 -> 56, Stress: 20 -> 23

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] info: [POST] /api/foals/1/enrichment - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] info: [POST] /api/foals/1/enrichment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] warn: [MemoryMonitoring] Memory threshold exceeded: 1466MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] info: [foalRoutes] POST /api/foals/1/enrichment - Day 3, Activity: HANDLING EXERCISES

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] info: [foalModel.completeEnrichmentActivity] Processing enrichment activity "HANDLING EXERCISES" for foal 1 on day 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] info: [foalModel.completeEnrichmentActivity] Activity completed successfully. Bond: 50 -> 54, Stress: 20 -> 22

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] info: [POST] /api/foals/1/enrichment - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] info: [POST] /api/foals/1/enrichment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] warn: [MemoryMonitoring] Memory threshold exceeded: 1463MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] info: [foalRoutes] POST /api/foals/1/enrichment - Day 3, Activity: Halter Introduction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] info: [foalModel.completeEnrichmentActivity] Processing enrichment activity "Halter Introduction" for foal 1 on day 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] info: [foalModel.completeEnrichmentActivity] Activity completed successfully. Bond: 50 -> 57, Stress: 20 -> 22

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] info: [POST] /api/foals/1/enrichment - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] info: [POST] /api/foals/1/enrichment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] warn: [MemoryMonitoring] Memory threshold exceeded: 1460MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] info: [foalRoutes] POST /api/foals/1/enrichment - Day 3, Activity: Leading Practice

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] info: [foalModel.completeEnrichmentActivity] Processing enrichment activity "Leading Practice" for foal 1 on day 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] info: [foalModel.completeEnrichmentActivity] Activity completed successfully. Bond: 50 -> 58, Stress: 20 -> 24

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] info: [POST] /api/foals/1/enrichment - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] info: [POST] /api/foals/1/enrichment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] warn: [MemoryMonitoring] Memory threshold exceeded: 1458MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] info: [foalRoutes] POST /api/foals/1/enrichment - Day 3, Activity: Handling Exercises

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] info: [foalModel.completeEnrichmentActivity] Processing enrichment activity "Handling Exercises" for foal 1 on day 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] info: [foalModel.completeEnrichmentActivity] Activity completed successfully. Bond: 50 -> 55, Stress: 20 -> 20

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] info: [POST] /api/foals/1/enrichment - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] info: [POST] /api/foals/1/enrichment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] warn: [MemoryMonitoring] Memory threshold exceeded: 1470MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] info: [foalRoutes] POST /api/foals/1/enrichment - Day 3, Activity: Trailer Exposure

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] info: [foalModel.completeEnrichmentActivity] Processing enrichment activity "Trailer Exposure" for foal 1 on day 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] info: [foalModel.completeEnrichmentActivity] Activity completed successfully. Bond: 50 -> 55, Stress: 20 -> 23

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] info: [POST] /api/foals/1/enrichment - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] info: [POST] /api/foals/1/enrichment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] warn: [MemoryMonitoring] Memory threshold exceeded: 1468MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] info: [foalRoutes] POST /api/foals/1/enrichment - Day 1, Activity: Feeding Assistance

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] info: [foalModel.completeEnrichmentActivity] Processing enrichment activity "Feeding Assistance" for foal 1 on day 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] info: [foalModel.completeEnrichmentActivity] Activity completed successfully. Bond: 50 -> 58, Stress: 20 -> 20

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] info: [POST] /api/foals/1/enrichment - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] info: [POST] /api/foals/999/enrichment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] warn: [MemoryMonitoring] Memory threshold exceeded: 1465MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] info: [foalRoutes] POST /api/foals/999/enrichment - Day 3, Activity: Trailer Exposure

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] info: [foalModel.completeEnrichmentActivity] Processing enrichment activity "Trailer Exposure" for foal 999 on day 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] info: [foalModel.completeEnrichmentActivity] Activity completed successfully. Bond: 95 -> 99, Stress: 5 -> 9

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] info: [POST] /api/foals/999/enrichment - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] info: [traitDiscovery.revealTraits] Found 0 hidden traits for horse 999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] info: [traitDiscovery.revealTraits] No hidden traits to reveal for horse 999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/integration/horseRoutes.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:52:28] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:52:28] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:28] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] info: [GET] /api/horses/trainable/test-user-uuid-123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] warn: [MemoryMonitoring] Memory threshold exceeded: 1492MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] info: [trainingController.getTrainableHorses] Getting trainable horses for user test-user-uuid-123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 1 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] error: [trainingModel.getAnyRecentTraining] Database error: Cannot read properties of undefined (reading 'findFirst')

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:29] warn: [trainingController.getTrainableHorses] Error checking training eligibility for horse 1: Database error: Cannot read properties of undefined (reading 'findFirst')

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 2 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] error: [trainingModel.getAnyRecentTraining] Database error: Cannot read properties of undefined (reading 'findFirst')

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:29] warn: [trainingController.getTrainableHorses] Error checking training eligibility for horse 2: Database error: Cannot read properties of undefined (reading 'findFirst')

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] info: [trainingController.getTrainableHorses] Found 0 trainable horses for user test-user-uuid-123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] info: [GET] /api/horses/trainable/test-user-uuid-123 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] info: [GET] /api/horses/trainable/nonexistent-user-uuid-456

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] warn: [MemoryMonitoring] Memory threshold exceeded: 1493MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] info: [trainingController.getTrainableHorses] Getting trainable horses for user nonexistent-user-uuid-456

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] warn: [trainingController.getTrainableHorses] User nonexistent-user-uuid-456 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] info: [GET] /api/horses/trainable/nonexistent-user-uuid-456 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] info: [GET] /api/horses/trainable/

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] warn: [MemoryMonitoring] Memory threshold exceeded: 1504MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] info: [GET] /api/horses/trainable/ - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] info: [GET] /api/horses/trainable/aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] warn: [MemoryMonitoring] Memory threshold exceeded: 1499MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] info: [GET] /api/horses/trainable/aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] info: [GET] /api/horses/trainable/test-user-uuid-123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] warn: [MemoryMonitoring] Memory threshold exceeded: 1494MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] info: [trainingController.getTrainableHorses] Getting trainable horses for user test-user-uuid-123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 1 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] error: [trainingModel.getAnyRecentTraining] Database error: Cannot read properties of undefined (reading 'findFirst')

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:29] warn: [trainingController.getTrainableHorses] Error checking training eligibility for horse 1: Database error: Cannot read properties of undefined (reading 'findFirst')

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 2 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] error: [trainingModel.getAnyRecentTraining] Database error: Cannot read properties of undefined (reading 'findFirst')

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:29] warn: [trainingController.getTrainableHorses] Error checking training eligibility for horse 2: Database error: Cannot read properties of undefined (reading 'findFirst')

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] info: [trainingController.getTrainableHorses] Found 0 trainable horses for user test-user-uuid-123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] info: [GET] /api/horses/trainable/test-user-uuid-123 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

FAIL tests/integration/groomWorkflowIntegration.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:52:29] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:52:29] info: [groomController.hireGroom] Hiring new groom Sarah Johnson for user test-user-groom-integration

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] info: [groomController.hireGroom] Successfully hired groom Sarah Johnson (ID: 4720) for 750 coins

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] info: [groomController.hireGroom] Hiring new groom Expert Groom for user test-user-groom-integration

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] info: [groomController.hireGroom] Successfully hired groom Expert Groom (ID: 4721) for 750 coins

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] info: [groomController.hireGroom] Hiring new groom Novice Groom for user test-user-groom-integration

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] info: [groomController.hireGroom] Successfully hired groom Novice Groom (ID: 4722) for 350 coins

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] info: [groomController.assignGroom] Assigning groom 4723 to foal 11315

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] info: [groomSystem.assignGroomToFoal] Assigning groom 4723 to foal 11315

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] info: [groomSystem.assignGroomToFoal] Successfully assigned Test Assignment Groom to foal Test Foal

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] info: [groomController.assignGroom] Assigning groom 4725 to foal 11318

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] info: [groomSystem.assignGroomToFoal] Assigning groom 4725 to foal 11318

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] info: [groomSystem.assignGroomToFoal] Successfully assigned Second Test Groom to foal Test Foal

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] info: [groomController.assignGroom] Assigning groom 4726 to foal 11321

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] info: [groomController.recordInteraction] Recording trust_building interaction for foal 11324

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task trust_building

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] info: [groomController.recordInteraction] Interaction recorded: 6 bonding, -4 stress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 4727 for interaction_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] info: [groomProgressionService.awardGroomXP] Groom 4727 gained 2 XP: 0 ‚Üí 2 (Level 1 ‚Üí 1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] info: [groomController.recordInteraction] Awarded 2 XP to groom 4727 for interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] info: [groomController.recordInteraction] Recording hoof_handling interaction for foal 11328

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task hoof_handling

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] info: [groomController.recordInteraction] Interaction recorded: 4 bonding, -4 stress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 4728 for interaction_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] info: [groomProgressionService.awardGroomXP] Groom 4728 gained 2 XP: 0 ‚Üí 2 (Level 1 ‚Üí 1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] info: [groomController.recordInteraction] Awarded 2 XP to groom 4728 for interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] info: [groomController.recordInteraction] Recording brushing interaction for foal 11332

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:29] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task brushing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:30] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: task_specialty

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:30] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: task_specialty

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:30] info: [groomController.recordInteraction] Interaction recorded: 10 bonding, -10 stress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:30] info: [groomController.recordInteraction] Personality effects applied (gentle): task_specialty - 10% increased success rate on nervous or timid horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:30] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 4729 for interaction_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:30] info: [groomProgressionService.awardGroomXP] Groom 4729 gained 2 XP: 0 ‚Üí 2 (Level 1 ‚Üí 1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:30] info: [groomController.recordInteraction] Awarded 2 XP to groom 4729 for interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

  ‚óè Groom Workflow Integration Tests ‚Ä∫ 1. Complete Groom Hiring Workflow ‚Ä∫ should validate required fields and reject invalid groom data

    PrismaClientKnownRequestError: 
    Invalid `prisma.horse.create()` invocation:


    Foreign key constraint violated on the constraint: `horses_userId_fkey`

    [0m [90m 111 |[39m     })[33m;[39m
     [90m 112 |[39m
    [31m[1m>[22m[39m[90m 113 |[39m     testYoungHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 114 |[39m       data[33m:[39m {
     [90m 115 |[39m         name[33m:[39m [32m'Test Young Horse'[39m[33m,[39m
     [90m 116 |[39m         sex[33m:[39m [32m'Colt'[39m[33m,[39m[0m

      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7459)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomWorkflowIntegration.test.mjs:113:22)

PASS __tests__/middleware/resourceManagement.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:52:30] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:30] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:30] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.log
      [2025-11-21 17:52:30] warn: [ResourceManagement] Slow request detected: GET /test-slow took 12ms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1524MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1518MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:30] warn: [DatabaseMonitoring] High query count: 15 queries in 1ms for GET /test-many-queries

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:30] warn: [ResourceManagement] Request timeout: GET /test-timeout

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1529MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1522MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] warn: [ResourceManagement] Slow request detected: GET /test-thresholds took 6ms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] warn: [ResourceManagement] High memory usage: GET /test-thresholds used 2MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/trainingController.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:52:31] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:52:31] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.canTrain] Horse 1 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.canTrain] Horse 1 is too young (2 years old)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.canTrain] Horse 1 still in cooldown for any training (4 days remaining)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.canTrain] Horse 1 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.canTrain] Checking training eligibility for horse 999 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] warn: [trainingController.canTrain] Horse 999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] error: [trainingController.canTrain] Error checking training eligibility: Horse ID must be a positive integer

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:31] error: [trainingController.canTrain] Error checking training eligibility: Discipline is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:31] error: [trainingController.canTrain] Error checking training eligibility: Horse ID is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] error: [trainingController.canTrain] Error checking training eligibility: Database connection failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.canTrain] Horse 1 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.trainHorse] Attempting to train horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.canTrain] Horse 1 is eligible to train in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.trainHorse] Horse 1 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.trainHorse] Stat gain: speed +1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [xpLogModel.logXpEvent] Logging XP event: User test-player-123, Amount: 5, Reason: Trained horse Test Horse in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] error: [xpLogModel.logXpEvent] Error logging XP event: 
      Invalid `prisma.xpEvent.create()` invocation:
      
      
      Foreign key constraint violated on the constraint: `xp_events_userId_fkey`

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:31] error: [trainingController.trainHorse] Failed to award training XP: 
      Invalid `prisma.xpEvent.create()` invocation:
      
      
      Foreign key constraint violated on the constraint: `xp_events_userId_fkey`

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.trainHorse] Successfully trained horse 1 in Racing (Log ID: 1, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.trainHorse] Attempting to train horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.canTrain] Horse 1 is too young (2 years old)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] warn: [trainingController.trainHorse] Training rejected: Horse is under age

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.trainHorse] Attempting to train horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.canTrain] Horse 1 still in cooldown for any training (4 days remaining)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] warn: [trainingController.trainHorse] Training rejected: Training cooldown active for this horse

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.trainHorse] Attempting to train horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.canTrain] Horse 1 is eligible to train in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.trainHorse] Horse 1 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] error: [trainingController.trainHorse] Training failed: Failed to log training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.trainHorse] Attempting to train horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.canTrain] Horse 1 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.trainHorse] Horse 1 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [xpLogModel.logXpEvent] Logging XP event: User xp-test-player, Amount: 5, Reason: Trained horse XP Test Horse in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] error: [xpLogModel.logXpEvent] Error logging XP event: 
      Invalid `prisma.xpEvent.create()` invocation:
      
      
      Foreign key constraint violated on the constraint: `xp_events_userId_fkey`

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:31] error: [trainingController.trainHorse] Failed to award training XP: 
      Invalid `prisma.xpEvent.create()` invocation:
      
      
      Foreign key constraint violated on the constraint: `xp_events_userId_fkey`

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.trainHorse] Successfully trained horse 1 in Dressage (Log ID: 1, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.trainHorse] Attempting to train horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.canTrain] Horse 1 is eligible to train in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.trainHorse] Horse 1 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] error: [trainingController.trainHorse] Failed to award training XP: XP system unavailable

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.trainHorse] Successfully trained horse 1 in Racing (Log ID: 1, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.getTrainingStatus] Getting training status for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.canTrain] Horse 1 is eligible to train in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.getTrainingStatus] Training status retrieved for horse 1: eligible=true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.getTrainingStatus] Getting training status for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.canTrain] Horse 1 still in cooldown for any training (5 days remaining)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.getTrainingStatus] Training status retrieved for horse 1: eligible=false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.getTrainingStatus] Getting training status for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.canTrain] Horse 1 is eligible to train in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.getTrainingStatus] Training status retrieved for horse 1: eligible=true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.getTrainingStatus] Getting training status for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.canTrain] Horse 1 is too young (2 years old)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.getTrainingStatus] Training status retrieved for horse 1: eligible=false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.getTrainingStatus] Getting training status for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] error: [trainingController.canTrain] Error checking training eligibility: Database error

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:31] error: [trainingController.getTrainingStatus] Error getting training status: Training eligibility check failed: Database error

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.canTrain] Horse 1 still in cooldown for any training (5 days remaining)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.canTrain] Horse 1 still in cooldown for any training (5 days remaining)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.canTrain] Horse 1 is eligible to train in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.trainHorse] Attempting to train horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.canTrain] Horse 1 is eligible to train in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.trainHorse] Horse 1 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [xpLogModel.logXpEvent] Logging XP event: User test-player-123, Amount: 5, Reason: Trained horse Test Horse in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] error: [xpLogModel.logXpEvent] Error logging XP event: 
      Invalid `prisma.xpEvent.create()` invocation:
      
      
      Foreign key constraint violated on the constraint: `xp_events_userId_fkey`

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:31] error: [trainingController.trainHorse] Failed to award training XP: 
      Invalid `prisma.xpEvent.create()` invocation:
      
      
      Foreign key constraint violated on the constraint: `xp_events_userId_fkey`

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.trainHorse] Successfully trained horse 1 in Racing (Log ID: 1, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.getTrainingStatus] Getting training status for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.canTrain] Horse 1 still in cooldown for any training (7 days remaining)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.getTrainingStatus] Training status retrieved for horse 1: eligible=false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.getTrainableHorses] Getting trainable horses for user test-player-123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.getTrainableHorses] Found 2 trainable horses for user test-player-123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.getTrainableHorses] Getting trainable horses for user test-player-123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.getTrainableHorses] User test-player-123 has no horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.getTrainableHorses] Getting trainable horses for user non-existent-player

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] warn: [trainingController.getTrainableHorses] User non-existent-player not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.getTrainableHorses] Getting trainable horses for user test-player-123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.getTrainableHorses] Found 1 trainable horses for user test-player-123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.getTrainableHorses] Getting trainable horses for user test-player-123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.getTrainableHorses] Found 0 trainable horses for user test-player-123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.getTrainableHorses] Getting trainable horses for user test-player-123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] warn: [trainingController.getTrainableHorses] Error checking training eligibility for horse 1: Database error for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.getTrainableHorses] Found 1 trainable horses for user test-player-123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] error: [trainingController.getTrainableHorses] Error getting trainable horses: User ID is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:31] error: [trainingController.getTrainableHorses] Error getting trainable horses: User ID is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.getTrainableHorses] Getting trainable horses for user test-player-123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] error: [trainingController.getTrainableHorses] Error getting trainable horses: Player database error

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.trainRouteHandler] Training request for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.trainHorse] Attempting to train horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.canTrain] Horse 1 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.trainHorse] Horse 1 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [xpLogModel.logXpEvent] Logging XP event: User test-player-123, Amount: 5, Reason: Trained horse Nova in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] error: [xpLogModel.logXpEvent] Error logging XP event: 
      Invalid `prisma.xpEvent.create()` invocation:
      
      
      Foreign key constraint violated on the constraint: `xp_events_userId_fkey`

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:31] error: [trainingController.trainHorse] Failed to award training XP: 
      Invalid `prisma.xpEvent.create()` invocation:
      
      
      Foreign key constraint violated on the constraint: `xp_events_userId_fkey`

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.trainHorse] Successfully trained horse 1 in Dressage (Log ID: 1, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.trainRouteHandler] Training request for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.trainHorse] Attempting to train horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.canTrain] Horse 1 is too young (2 years old)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] warn: [trainingController.trainHorse] Training rejected: Horse is under age

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.trainRouteHandler] Training request for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.trainHorse] Attempting to train horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.canTrain] Horse 1 still in cooldown for any training (5 days remaining)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] warn: [trainingController.trainHorse] Training rejected: Training cooldown active for this horse

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.trainRouteHandler] Training request for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.trainHorse] Attempting to train horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.canTrain] Horse 1 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.trainHorse] Horse 1 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [xpLogModel.logXpEvent] Logging XP event: User test-player-123, Amount: 5, Reason: Trained horse Nova in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] error: [xpLogModel.logXpEvent] Error logging XP event: 
      Invalid `prisma.xpEvent.create()` invocation:
      
      
      Foreign key constraint violated on the constraint: `xp_events_userId_fkey`

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:31] error: [trainingController.trainHorse] Failed to award training XP: 
      Invalid `prisma.xpEvent.create()` invocation:
      
      
      Foreign key constraint violated on the constraint: `xp_events_userId_fkey`

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.trainHorse] Successfully trained horse 1 in Dressage (Log ID: 1, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.trainRouteHandler] Training request for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.trainHorse] Attempting to train horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] error: [trainingController.canTrain] Error checking training eligibility: Database connection failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:31] error: [trainingController.trainHorse] Training failed: Training eligibility check failed: Database connection failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:31] error: [trainingController.trainRouteHandler] Error: Training failed: Training eligibility check failed: Database connection failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.trainRouteHandler] Training request for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.trainHorse] Attempting to train horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.canTrain] Horse 1 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.trainHorse] Horse 1 has traits: intelligent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.trainHorse] Trait XP modifier applied: 25.0%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.trainHorse] Stat gain chance modified by traits: 30.0%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [xpLogModel.logXpEvent] Logging XP event: User test-player-123, Amount: 6, Reason: Trained horse Intelligent Horse in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] error: [xpLogModel.logXpEvent] Error logging XP event: 
      Invalid `prisma.xpEvent.create()` invocation:
      
      
      Foreign key constraint violated on the constraint: `xp_events_userId_fkey`

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:31] error: [trainingController.trainHorse] Failed to award training XP: 
      Invalid `prisma.xpEvent.create()` invocation:
      
      
      Foreign key constraint violated on the constraint: `xp_events_userId_fkey`

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.trainHorse] Training cooldown reduced by trait effects to 6 days

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [trainingController.trainHorse] Successfully trained horse 1 in Dressage (Log ID: 1, Score +6)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/foalCreationIntegration.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:52:31] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:31] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:52:32] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:32] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:32] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:32] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:32] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:32] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:32] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:32] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:32] info: [POST] /api/horses/foals

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:32] warn: [MemoryMonitoring] Memory threshold exceeded: 1568MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:32] warn: [auth] Missing token for POST /foals from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:32] info: [POST] /api/horses/foals - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/horseAgingSystem.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:52:32] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:32] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:32] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

PASS tests/groomHiringWorkflow.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:52:33] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:33] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:33] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.error
      Error testing speciality foalCare: JestAssertionError: expect(jest.fn()).toHaveBeenCalledWith(...expected)
      
      Expected: 201
      Received: 400
      
      Number of calls: 1
          at Object.<anonymous> (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomHiringWorkflow.test.mjs:347:30) {
        matcherResult: {
          message: 'expect(jest.fn()).toHaveBeenCalledWith(...expected)\n' +
            '\n' +
            'Expected: 201\n' +
            'Received: 400\n' +
            '\n' +
            'Number of calls: 1',
          pass: false
        }
      }

    [0m [90m 355 |[39m           )[33m;[39m
     [90m 356 |[39m         } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 357 |[39m           console[33m.[39merror([32m`Error testing speciality ${speciality}:`[39m[33m,[39m error)[33m;[39m
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 358 |[39m         }
     [90m 359 |[39m       }
     [90m 360 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (tests/groomHiringWorkflow.test.mjs:357:19)

PASS tests/unit/facilityManagementSystem.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:52:34] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:34] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:34] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.getUserFacilities] Getting facilities for user 23248187-7b6c-49e8-9324-723e6e0c74d4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.getUserFacilities] Getting facilities for user 43b660c0-9fca-4818-84f5-92e033051127

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for advanced_training upgrade from 1 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for invalid_upgrade upgrade from 1 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:34] error: [facilityManagementService.calculateUpgradeCost] Error: Invalid upgrade type: invalid_upgrade

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for advanced_training upgrade from 5 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:34] error: [facilityManagementService.calculateUpgradeCost] Error: Target level must be higher than current level

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for medical_center upgrade from 1 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for medical_center upgrade from 2 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for medical_center upgrade from 3 to 4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.purchaseFacilityUpgrade] User ce21dbcd-2e2b-43b1-91f4-08ec143bd12d purchasing automated_care upgrade to level 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for automated_care upgrade from 0 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.purchaseFacilityUpgrade] User 41244626-5cce-4c73-a8df-dbba8e9505b8 purchasing competition_hosting upgrade to level 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for competition_hosting upgrade from 0 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.purchaseFacilityUpgrade] User 76f5419f-e1c9-4bc0-b658-e7499e617270 purchasing ventilation upgrade to level 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.assessFacilityEffectiveness] Assessing facility 906

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.assessFacilityEffectiveness] Assessing facility 908

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.generateFacilityRecommendations] Generating recommendations for user 340676f5-5a7d-4273-bd1c-9bb76d3cd325

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.getUserFacilities] Getting facilities for user 340676f5-5a7d-4273-bd1c-9bb76d3cd325

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for advanced_training upgrade from 1 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for recovery_center upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for specialized_grounds upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for automated_care upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for medical_center upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for feed_laboratory upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for breeding_optimization upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for genetic_analysis upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for foal_development upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for stable_management upgrade from 1 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for competition_hosting upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for prestige_stable upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for tack_workshop upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for visitor_center upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for advanced_training upgrade from 3 to 4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for recovery_center upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for specialized_grounds upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for automated_care upgrade from 2 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for medical_center upgrade from 2 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for feed_laboratory upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for breeding_optimization upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for genetic_analysis upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for foal_development upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for stable_management upgrade from 3 to 4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for competition_hosting upgrade from 1 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for prestige_stable upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for tack_workshop upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for visitor_center upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.generateFacilityRecommendations] Generating recommendations for user ae7fa2fc-2afc-471e-917f-f2c30f7c9d4a

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.getUserFacilities] Getting facilities for user ae7fa2fc-2afc-471e-917f-f2c30f7c9d4a

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for advanced_training upgrade from 1 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for recovery_center upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for specialized_grounds upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for automated_care upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for medical_center upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for feed_laboratory upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for breeding_optimization upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for genetic_analysis upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for foal_development upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for stable_management upgrade from 1 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for competition_hosting upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for prestige_stable upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for tack_workshop upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for visitor_center upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for advanced_training upgrade from 3 to 4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for recovery_center upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for specialized_grounds upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for automated_care upgrade from 2 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for medical_center upgrade from 2 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for feed_laboratory upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for breeding_optimization upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for genetic_analysis upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for foal_development upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for stable_management upgrade from 3 to 4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for competition_hosting upgrade from 1 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for prestige_stable upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for tack_workshop upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for visitor_center upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateMaintenanceCosts] Calculating maintenance for facility 914

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.purchaseFacilityUpgrade] User 280ad208-6d37-4583-98ec-937c51dbcf7c purchasing stable_management upgrade to level 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for stable_management upgrade from 1 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.getFacilityUpgradeHistory] Getting history for facility 915

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateFacilityROI] Calculating ROI for facility 918

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.getFacilityUpgradeHistory] Getting history for facility 918

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.calculateFacilityROI] Calculating ROI for facility 920

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:34] info: [facilityManagementService.getFacilityUpgradeHistory] Getting history for facility 920

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/trainingController-business-logic.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:52:34] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:34] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:34] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:52:35] info: [trainingController.canTrain] Checking training eligibility for horse 11353 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getHorseAge] Getting age for horse 11353

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getHorseAge] Horse 11353 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11353 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getAnyRecentTraining] No training records found for horse 11353

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.canTrain] Horse 11353 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.canTrain] Checking training eligibility for horse 11354 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getHorseAge] Getting age for horse 11354

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getHorseAge] Horse 11354 is 2 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.canTrain] Horse 11354 is too young (2 years old)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.canTrain] Checking training eligibility for horse 11355 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getHorseAge] Getting age for horse 11355

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getHorseAge] Horse 11355 is 5 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11355 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 11355: Fri Nov 21 2025 17:52:35 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.canTrain] Horse 11355 still in cooldown for any training (7 days remaining)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.canTrain] Checking training eligibility for horse 99999 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getHorseAge] Getting age for horse 99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getHorseAge] Horse 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] warn: [trainingController.canTrain] Horse 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] error: [trainingController.canTrain] Error checking training eligibility: Horse ID must be a positive integer

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:35] error: [trainingController.canTrain] Error checking training eligibility: Discipline is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:35] error: [trainingController.canTrain] Error checking training eligibility: Horse ID is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.getTrainingStatus] Getting training status for horse 11358 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.canTrain] Checking training eligibility for horse 11358 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getHorseAge] Getting age for horse 11358

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getHorseAge] Horse 11358 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11358 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getAnyRecentTraining] No training records found for horse 11358

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.canTrain] Horse 11358 is eligible to train in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getHorseAge] Getting age for horse 11358

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getHorseAge] Horse 11358 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 11358 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getLastTrainingDate] No training records found for horse 11358 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11358 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getAnyRecentTraining] No training records found for horse 11358

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.getTrainingStatus] Training status retrieved for horse 11358: eligible=true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.trainHorse] Attempting to train horse 11358 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.canTrain] Checking training eligibility for horse 11358 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getHorseAge] Getting age for horse 11358

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getHorseAge] Horse 11358 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11358 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getAnyRecentTraining] No training records found for horse 11358

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.canTrain] Horse 11358 is eligible to train in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [horseModel.getHorseById] Successfully found horse: Workflow Test Horse (ID: 11358)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.trainHorse] Horse 11358 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.logTrainingSession] Logging training session for horse 11358 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 851

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [horseModel.incrementDisciplineScore] Incrementing Racing score for horse 11358 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [horseModel.updateDisciplineScore] Updating Racing score for horse 11358 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [horseModel.updateDisciplineScore] Successfully updated Racing score for horse 11358: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [horseModel.incrementDisciplineScore] Successfully incremented Racing score for horse 11358

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [xpLogModel.logXpEvent] Logging XP event: User e2db5073-27bd-459c-a8cd-e5b29e5fa56e, Amount: 5, Reason: Trained horse Workflow Test Horse in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 621, User e2db5073-27bd-459c-a8cd-e5b29e5fa56e, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.trainHorse] Awarded 5 XP to user e2db5073-27bd-459c-a8cd-e5b29e5fa56e for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.trainHorse] Successfully trained horse 11358 in Racing (Log ID: 851, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.getTrainingStatus] Getting training status for horse 11358 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.canTrain] Checking training eligibility for horse 11358 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getHorseAge] Getting age for horse 11358

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getHorseAge] Horse 11358 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11358 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 11358: Fri Nov 21 2025 17:52:35 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.canTrain] Horse 11358 still in cooldown for any training (7 days remaining)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getHorseAge] Getting age for horse 11358

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getHorseAge] Horse 11358 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 11358 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getLastTrainingDate] Last training date for horse 11358 in Racing: Fri Nov 21 2025 17:52:35 GMT-0500 (Eastern Standard Time)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11358 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 11358: Fri Nov 21 2025 17:52:35 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.getTrainingStatus] Training status retrieved for horse 11358: eligible=false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.trainHorse] Attempting to train horse 11354 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.canTrain] Checking training eligibility for horse 11354 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getHorseAge] Getting age for horse 11354

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getHorseAge] Horse 11354 is 2 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.canTrain] Horse 11354 is too young (2 years old)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] warn: [trainingController.trainHorse] Training rejected: Horse is under age

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.trainHorse] Attempting to train horse 11355 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.canTrain] Checking training eligibility for horse 11355 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getHorseAge] Getting age for horse 11355

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getHorseAge] Horse 11355 is 5 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11355 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 11355: Fri Nov 21 2025 17:52:35 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.canTrain] Horse 11355 still in cooldown for any training (7 days remaining)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] warn: [trainingController.trainHorse] Training rejected: Training cooldown active for this horse

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.trainHorse] Attempting to train horse 99999 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.canTrain] Checking training eligibility for horse 99999 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getHorseAge] Getting age for horse 99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getHorseAge] Horse 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] warn: [trainingController.canTrain] Horse 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] warn: [trainingController.trainHorse] Training rejected: Horse not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.trainHorse] Attempting to train horse 11353 in

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] error: [trainingController.canTrain] Error checking training eligibility: Discipline is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:35] error: [trainingController.trainHorse] Training failed: Training eligibility check failed: Discipline is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.getTrainingStatus] Getting training status for horse 11353 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.canTrain] Checking training eligibility for horse 11353 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getHorseAge] Getting age for horse 11353

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getHorseAge] Horse 11353 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11353 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getAnyRecentTraining] No training records found for horse 11353

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.canTrain] Horse 11353 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getHorseAge] Getting age for horse 11353

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getHorseAge] Horse 11353 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 11353 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getLastTrainingDate] No training records found for horse 11353 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11353 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getAnyRecentTraining] No training records found for horse 11353

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.getTrainingStatus] Training status retrieved for horse 11353: eligible=true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.getTrainingStatus] Getting training status for horse 11355 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.canTrain] Checking training eligibility for horse 11355 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getHorseAge] Getting age for horse 11355

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getHorseAge] Horse 11355 is 5 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11355 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 11355: Fri Nov 21 2025 17:52:35 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.canTrain] Horse 11355 still in cooldown for any training (7 days remaining)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getHorseAge] Getting age for horse 11355

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getHorseAge] Horse 11355 is 5 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 11355 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getLastTrainingDate] Last training date for horse 11355 in Racing: Fri Nov 21 2025 17:52:35 GMT-0500 (Eastern Standard Time)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11355 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 11355: Fri Nov 21 2025 17:52:35 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.getTrainingStatus] Training status retrieved for horse 11355: eligible=false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.getTrainingStatus] Getting training status for horse 99999 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.canTrain] Checking training eligibility for horse 99999 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getHorseAge] Getting age for horse 99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getHorseAge] Horse 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] warn: [trainingController.canTrain] Horse 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getHorseAge] Getting age for horse 99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getHorseAge] Horse 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 99999 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getLastTrainingDate] No training records found for horse 99999 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 99999 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getAnyRecentTraining] No training records found for horse 99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.getTrainingStatus] Training status retrieved for horse 99999: eligible=false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.getTrainableHorses] Getting trainable horses for user e2db5073-27bd-459c-a8cd-e5b29e5fa56e1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] warn: [trainingController.getTrainableHorses] User e2db5073-27bd-459c-a8cd-e5b29e5fa56e1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.getTrainableHorses] Getting trainable horses for user e2db5073-27bd-459c-a8cd-e5b29e5fa56e

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11356 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getAnyRecentTraining] No training records found for horse 11356

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11357 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getAnyRecentTraining] No training records found for horse 11357

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11358 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 11358: Fri Nov 21 2025 17:52:35 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.getTrainableHorses] Found 2 trainable horses for user e2db5073-27bd-459c-a8cd-e5b29e5fa56e

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.trainHorse] Attempting to train horse 11353 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.canTrain] Checking training eligibility for horse 11353 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getHorseAge] Getting age for horse 11353

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getHorseAge] Horse 11353 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11353 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getAnyRecentTraining] No training records found for horse 11353

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.canTrain] Horse 11353 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [horseModel.getHorseById] Successfully found horse: Controller Adult Horse (ID: 11353)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.trainHorse] Horse 11353 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.logTrainingSession] Logging training session for horse 11353 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 852

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [horseModel.incrementDisciplineScore] Incrementing Dressage score for horse 11353 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [horseModel.updateDisciplineScore] Updating Dressage score for horse 11353 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [horseModel.updateDisciplineScore] Successfully updated Dressage score for horse 11353: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [horseModel.incrementDisciplineScore] Successfully incremented Dressage score for horse 11353

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [xpLogModel.logXpEvent] Logging XP event: User 6514a3a0-1bf5-4cfd-906a-7c2bb3263c95, Amount: 5, Reason: Trained horse Controller Adult Horse in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 622, User 6514a3a0-1bf5-4cfd-906a-7c2bb3263c95, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.trainHorse] Awarded 5 XP to user 6514a3a0-1bf5-4cfd-906a-7c2bb3263c95 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.trainHorse] Successfully trained horse 11353 in Dressage (Log ID: 852, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.getTrainableHorses] Getting trainable horses for user 6514a3a0-1bf5-4cfd-906a-7c2bb3263c95

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11355 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 11355: Fri Nov 21 2025 17:52:35 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11353 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 11353: Fri Nov 21 2025 17:52:35 GMT-0500 (Eastern Standard Time) (discipline: Dressage)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.getTrainableHorses] Found 0 trainable horses for user 6514a3a0-1bf5-4cfd-906a-7c2bb3263c95

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.trainRouteHandler] Training request for horse 11359 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.trainHorse] Attempting to train horse 11359 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.canTrain] Checking training eligibility for horse 11359 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getHorseAge] Getting age for horse 11359

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getHorseAge] Horse 11359 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11359 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getAnyRecentTraining] No training records found for horse 11359

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.canTrain] Horse 11359 is eligible to train in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [horseModel.getHorseById] Successfully found horse: Fresh Route Test Horse (ID: 11359)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.trainHorse] Horse 11359 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.logTrainingSession] Logging training session for horse 11359 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 853

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [horseModel.incrementDisciplineScore] Incrementing Show Jumping score for horse 11359 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [horseModel.updateDisciplineScore] Updating Show Jumping score for horse 11359 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [horseModel.updateDisciplineScore] Successfully updated Show Jumping score for horse 11359: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [horseModel.incrementDisciplineScore] Successfully incremented Show Jumping score for horse 11359

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [xpLogModel.logXpEvent] Logging XP event: User 6514a3a0-1bf5-4cfd-906a-7c2bb3263c95, Amount: 5, Reason: Trained horse Fresh Route Test Horse in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 623, User 6514a3a0-1bf5-4cfd-906a-7c2bb3263c95, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.trainHorse] Awarded 5 XP to user 6514a3a0-1bf5-4cfd-906a-7c2bb3263c95 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.trainHorse] Successfully trained horse 11359 in Show Jumping (Log ID: 853, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.trainRouteHandler] Training request for horse 11354 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.trainHorse] Attempting to train horse 11354 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.canTrain] Checking training eligibility for horse 11354 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getHorseAge] Getting age for horse 11354

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getHorseAge] Horse 11354 is 2 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.canTrain] Horse 11354 is too young (2 years old)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] warn: [trainingController.trainHorse] Training rejected: Horse is under age

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.trainRouteHandler] Training request for horse 11355 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.trainHorse] Attempting to train horse 11355 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.canTrain] Checking training eligibility for horse 11355 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getHorseAge] Getting age for horse 11355

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getHorseAge] Horse 11355 is 5 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11355 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 11355: Fri Nov 21 2025 17:52:35 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.canTrain] Horse 11355 still in cooldown for any training (7 days remaining)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] warn: [trainingController.trainHorse] Training rejected: Training cooldown active for this horse

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.trainRouteHandler] Training request for horse 99999 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.trainHorse] Attempting to train horse 99999 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.canTrain] Checking training eligibility for horse 99999 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getHorseAge] Getting age for horse 99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingModel.getHorseAge] Horse 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] warn: [trainingController.canTrain] Horse 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] warn: [trainingController.trainHorse] Training rejected: Horse not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.trainRouteHandler] Training request for horse 11353 in

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [trainingController.trainHorse] Attempting to train horse 11353 in

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] error: [trainingController.canTrain] Error checking training eligibility: Discipline is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:35] error: [trainingController.trainHorse] Training failed: Training eligibility check failed: Discipline is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:35] error: [trainingController.trainRouteHandler] Error: Training failed: Training eligibility check failed: Discipline is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

FAIL tests/services/environmentalTriggerSystem.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:52:35] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:35] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

  ‚óè Environmental Trigger System ‚Ä∫ generateEnvironmentalReport ‚Ä∫ should generate comprehensive environmental analysis report

    PrismaClientKnownRequestError: 
    Invalid `prisma.groomInteraction.create()` invocation:


    Foreign key constraint violated on the constraint: `groom_interactions_groomId_fkey`

    [0m [90m 461 |[39m
     [90m 462 |[39m       [90m// Create some environmental interactions[39m
    [31m[1m>[22m[39m[90m 463 |[39m       [36mawait[39m prisma[33m.[39mgroomInteraction[33m.[39mcreate({
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 464 |[39m         data[33m:[39m {
     [90m 465 |[39m           groomId[33m:[39m testGrooms[[35m0[39m][33m.[39mid[33m,[39m
     [90m 466 |[39m           foalId[33m:[39m horse[33m.[39mid[33m,[39m[0m

      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7459)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/services/environmentalTriggerSystem.test.mjs:463:7)

FAIL tests/services/dynamicCompatibilityScoring.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:52:36] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:36] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:52:36] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:52:36] error: Error getting groom personality traits for groom 4767: Groom not found: 4767

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:36] error: Error calculating personality modifiers: Groom not found: 4767

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:36] error: Error calculating dynamic compatibility: Groom not found: 4767

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:36] error: Error getting groom personality traits for groom 4768: Groom not found: 4768

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:36] error: Error calculating personality modifiers: Groom not found: 4768

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:36] error: Error calculating dynamic compatibility: Groom not found: 4768

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:36] error: Error getting groom personality traits for groom 4769: Groom not found: 4769

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:36] error: Error calculating personality modifiers: Groom not found: 4769

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:36] error: Error calculating dynamic compatibility: Groom not found: 4769

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:36] error: Error getting groom personality traits for groom 4767: Groom not found: 4767

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:36] error: Error calculating personality modifiers: Groom not found: 4767

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:36] error: Error calculating dynamic compatibility: Groom not found: 4767

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:36] error: Error getting groom personality traits for groom 4767: Groom not found: 4767

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:36] error: Error analyzing compatibility factors: Groom not found: 4767

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:36] error: Error getting groom personality traits for groom 4768: Groom not found: 4768

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:36] error: Error analyzing compatibility factors: Groom not found: 4768

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:36] error: Error getting groom personality traits for groom 4767: Groom not found: 4767

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:36] error: Error calculating personality modifiers: Groom not found: 4767

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:36] error: Error calculating dynamic compatibility: Groom not found: 4767

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:36] error: Error predicting interaction outcome: Groom not found: 4767

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:36] error: Error getting groom personality traits for groom 4768: Groom not found: 4768

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:36] error: Error calculating personality modifiers: Groom not found: 4768

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:36] error: Error calculating dynamic compatibility: Groom not found: 4768

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:36] error: Error predicting interaction outcome: Groom not found: 4768

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:36] error: Error getting optimal groom recommendations: Cannot read properties of null (reading 'ownerId')

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:52:36] error: Error getting optimal groom recommendations: Cannot read properties of null (reading 'ownerId')

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

  ‚óè Dynamic Compatibility Scoring ‚Ä∫ calculateDynamicCompatibility ‚Ä∫ should calculate high compatibility for calm groom with fearful horse

    Groom not found: 4767

    [0m [90m 190 |[39m
     [90m 191 |[39m     [36mif[39m ([33m![39mgroom) {
    [31m[1m>[22m[39m[90m 192 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Groom not found: ${groomId}`[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 193 |[39m     }
     [90m 194 |[39m
     [90m 195 |[39m     [36mconst[39m personalityDef [33m=[39m [33mPERSONALITY_TRAIT_DEFINITIONS[39m[groom[33m.[39mgroomPersonality][33m;[39m[0m

      at getGroomPersonalityTraits (services/groomPersonalityTraits.mjs:192:13)
      at calculatePersonalityModifiers (services/groomPersonalityTraits.mjs:236:25)
      at calculateDynamicCompatibility (services/dynamicCompatibilityScoring.mjs:31:27)
      at Object.<anonymous> (tests/services/dynamicCompatibilityScoring.test.mjs:166:29)

  ‚óè Dynamic Compatibility Scoring ‚Ä∫ calculateDynamicCompatibility ‚Ä∫ should calculate low compatibility for energetic groom with fearful horse

    Groom not found: 4768

    [0m [90m 190 |[39m
     [90m 191 |[39m     [36mif[39m ([33m![39mgroom) {
    [31m[1m>[22m[39m[90m 192 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Groom not found: ${groomId}`[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 193 |[39m     }
     [90m 194 |[39m
     [90m 195 |[39m     [36mconst[39m personalityDef [33m=[39m [33mPERSONALITY_TRAIT_DEFINITIONS[39m[groom[33m.[39mgroomPersonality][33m;[39m[0m

      at getGroomPersonalityTraits (services/groomPersonalityTraits.mjs:192:13)
      at calculatePersonalityModifiers (services/groomPersonalityTraits.mjs:236:25)
      at calculateDynamicCompatibility (services/dynamicCompatibilityScoring.mjs:31:27)
      at Object.<anonymous> (tests/services/dynamicCompatibilityScoring.test.mjs:194:29)

  ‚óè Dynamic Compatibility Scoring ‚Ä∫ calculateDynamicCompatibility ‚Ä∫ should calculate moderate compatibility with contextual improvements

    Groom not found: 4769

    [0m [90m 190 |[39m
     [90m 191 |[39m     [36mif[39m ([33m![39mgroom) {
    [31m[1m>[22m[39m[90m 192 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Groom not found: ${groomId}`[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 193 |[39m     }
     [90m 194 |[39m
     [90m 195 |[39m     [36mconst[39m personalityDef [33m=[39m [33mPERSONALITY_TRAIT_DEFINITIONS[39m[groom[33m.[39mgroomPersonality][33m;[39m[0m

      at getGroomPersonalityTraits (services/groomPersonalityTraits.mjs:192:13)
      at calculatePersonalityModifiers (services/groomPersonalityTraits.mjs:236:25)
      at calculateDynamicCompatibility (services/dynamicCompatibilityScoring.mjs:31:27)
      at Object.<anonymous> (tests/services/dynamicCompatibilityScoring.test.mjs:215:29)

  ‚óè Dynamic Compatibility Scoring ‚Ä∫ calculateDynamicCompatibility ‚Ä∫ should apply experience bonuses correctly

    Groom not found: 4767

    [0m [90m 190 |[39m
     [90m 191 |[39m     [36mif[39m ([33m![39mgroom) {
    [31m[1m>[22m[39m[90m 192 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Groom not found: ${groomId}`[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 193 |[39m     }
     [90m 194 |[39m
     [90m 195 |[39m     [36mconst[39m personalityDef [33m=[39m [33mPERSONALITY_TRAIT_DEFINITIONS[39m[groom[33m.[39mgroomPersonality][33m;[39m[0m

      at getGroomPersonalityTraits (services/groomPersonalityTraits.mjs:192:13)
      at calculatePersonalityModifiers (services/groomPersonalityTraits.mjs:236:25)
      at calculateDynamicCompatibility (services/dynamicCompatibilityScoring.mjs:31:27)
      at Object.<anonymous> (tests/services/dynamicCompatibilityScoring.test.mjs:238:35)

  ‚óè Dynamic Compatibility Scoring ‚Ä∫ analyzeCompatibilityFactors ‚Ä∫ should analyze all compatibility factors comprehensively

    Groom not found: 4767

    [0m [90m 190 |[39m
     [90m 191 |[39m     [36mif[39m ([33m![39mgroom) {
    [31m[1m>[22m[39m[90m 192 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Groom not found: ${groomId}`[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 193 |[39m     }
     [90m 194 |[39m
     [90m 195 |[39m     [36mconst[39m personalityDef [33m=[39m [33mPERSONALITY_TRAIT_DEFINITIONS[39m[groom[33m.[39mgroomPersonality][33m;[39m[0m

      at getGroomPersonalityTraits (services/groomPersonalityTraits.mjs:192:13)
      at analyzeCompatibilityFactors (services/dynamicCompatibilityScoring.mjs:125:25)
      at Object.<anonymous> (tests/services/dynamicCompatibilityScoring.test.mjs:251:23)

  ‚óè Dynamic Compatibility Scoring ‚Ä∫ analyzeCompatibilityFactors ‚Ä∫ should identify risk factors for poor matches

    Groom not found: 4768

    [0m [90m 190 |[39m
     [90m 191 |[39m     [36mif[39m ([33m![39mgroom) {
    [31m[1m>[22m[39m[90m 192 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Groom not found: ${groomId}`[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 193 |[39m     }
     [90m 194 |[39m
     [90m 195 |[39m     [36mconst[39m personalityDef [33m=[39m [33mPERSONALITY_TRAIT_DEFINITIONS[39m[groom[33m.[39mgroomPersonality][33m;[39m[0m

      at getGroomPersonalityTraits (services/groomPersonalityTraits.mjs:192:13)
      at analyzeCompatibilityFactors (services/dynamicCompatibilityScoring.mjs:125:25)
      at Object.<anonymous> (tests/services/dynamicCompatibilityScoring.test.mjs:274:23)

  ‚óè Dynamic Compatibility Scoring ‚Ä∫ predictInteractionOutcome ‚Ä∫ should predict positive outcome for good compatibility

    Groom not found: 4767

    [0m [90m 190 |[39m
     [90m 191 |[39m     [36mif[39m ([33m![39mgroom) {
    [31m[1m>[22m[39m[90m 192 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Groom not found: ${groomId}`[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 193 |[39m     }
     [90m 194 |[39m
     [90m 195 |[39m     [36mconst[39m personalityDef [33m=[39m [33mPERSONALITY_TRAIT_DEFINITIONS[39m[groom[33m.[39mgroomPersonality][33m;[39m[0m

      at getGroomPersonalityTraits (services/groomPersonalityTraits.mjs:192:13)
      at calculatePersonalityModifiers (services/groomPersonalityTraits.mjs:236:25)
      at calculateDynamicCompatibility (services/dynamicCompatibilityScoring.mjs:31:27)
      at predictInteractionOutcome (services/dynamicCompatibilityScoring.mjs:178:27)
      at Object.<anonymous> (tests/services/dynamicCompatibilityScoring.test.mjs:294:26)

  ‚óè Dynamic Compatibility Scoring ‚Ä∫ predictInteractionOutcome ‚Ä∫ should predict negative outcome for poor compatibility

    Groom not found: 4768

    [0m [90m 190 |[39m
     [90m 191 |[39m     [36mif[39m ([33m![39mgroom) {
    [31m[1m>[22m[39m[90m 192 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Groom not found: ${groomId}`[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 193 |[39m     }
     [90m 194 |[39m
     [90m 195 |[39m     [36mconst[39m personalityDef [33m=[39m [33mPERSONALITY_TRAIT_DEFINITIONS[39m[groom[33m.[39mgroomPersonality][33m;[39m[0m

      at getGroomPersonalityTraits (services/groomPersonalityTraits.mjs:192:13)
      at calculatePersonalityModifiers (services/groomPersonalityTraits.mjs:236:25)
      at calculateDynamicCompatibility (services/dynamicCompatibilityScoring.mjs:31:27)
      at predictInteractionOutcome (services/dynamicCompatibilityScoring.mjs:178:27)
      at Object.<anonymous> (tests/services/dynamicCompatibilityScoring.test.mjs:321:26)

  ‚óè Dynamic Compatibility Scoring ‚Ä∫ updateCompatibilityHistory ‚Ä∫ should update compatibility history with interaction results

    PrismaClientKnownRequestError: 
    Invalid `prisma.groomInteraction.create()` invocation:


    Foreign key constraint violated on the constraint: `groom_interactions_foalId_fkey`

    [0m [90m 334 |[39m
     [90m 335 |[39m       [90m// Create an interaction first[39m
    [31m[1m>[22m[39m[90m 336 |[39m       [36mconst[39m interaction [33m=[39m [36mawait[39m prisma[33m.[39mgroomInteraction[33m.[39mcreate({
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 337 |[39m         data[33m:[39m {
     [90m 338 |[39m           groomId[33m:[39m groom[33m.[39mid[33m,[39m
     [90m 339 |[39m           foalId[33m:[39m horse[33m.[39mid[33m,[39m[0m

      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7459)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/services/dynamicCompatibilityScoring.test.mjs:336:27)

  ‚óè Dynamic Compatibility Scoring ‚Ä∫ getOptimalGroomRecommendations ‚Ä∫ should recommend optimal grooms for specific horse and context

    TypeError: Cannot read properties of null (reading 'ownerId')

    [0m [90m 311 |[39m
     [90m 312 |[39m     [36mconst[39m availableGrooms [33m=[39m [36mawait[39m prisma[33m.[39mgroom[33m.[39mfindMany({
    [31m[1m>[22m[39m[90m 313 |[39m       where[33m:[39m { userId[33m:[39m horse[33m.[39mownerId }[33m,[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 314 |[39m       select[33m:[39m {
     [90m 315 |[39m         id[33m:[39m [36mtrue[39m[33m,[39m
     [90m 316 |[39m         name[33m:[39m [36mtrue[39m[33m,[39m[0m

      at getOptimalGroomRecommendations (services/dynamicCompatibilityScoring.mjs:313:30)
      at Object.<anonymous> (tests/services/dynamicCompatibilityScoring.test.mjs:374:31)

  ‚óè Dynamic Compatibility Scoring ‚Ä∫ getOptimalGroomRecommendations ‚Ä∫ should provide alternative recommendations

    TypeError: Cannot read properties of null (reading 'ownerId')

    [0m [90m 311 |[39m
     [90m 312 |[39m     [36mconst[39m availableGrooms [33m=[39m [36mawait[39m prisma[33m.[39mgroom[33m.[39mfindMany({
    [31m[1m>[22m[39m[90m 313 |[39m       where[33m:[39m { userId[33m:[39m horse[33m.[39mownerId }[33m,[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 314 |[39m       select[33m:[39m {
     [90m 315 |[39m         id[33m:[39m [36mtrue[39m[33m,[39m
     [90m 316 |[39m         name[33m:[39m [36mtrue[39m[33m,[39m[0m

      at getOptimalGroomRecommendations (services/dynamicCompatibilityScoring.mjs:313:30)
      at Object.<anonymous> (tests/services/dynamicCompatibilityScoring.test.mjs:401:31)

  ‚óè Dynamic Compatibility Scoring ‚Ä∫ analyzeCompatibilityTrends ‚Ä∫ should analyze compatibility trends over time

    PrismaClientKnownRequestError: 
    Invalid `prisma.groomInteraction.create()` invocation:


    Foreign key constraint violated on the constraint: `groom_interactions_foalId_fkey`

    [0m [90m 416 |[39m       [90m// Create a series of interactions showing trend[39m
     [90m 417 |[39m       [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m3[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 418 |[39m         [36mawait[39m prisma[33m.[39mgroomInteraction[33m.[39mcreate({
     [90m     |[39m         [31m[1m^[22m[39m
     [90m 419 |[39m           data[33m:[39m {
     [90m 420 |[39m             groomId[33m:[39m groom[33m.[39mid[33m,[39m
     [90m 421 |[39m             foalId[33m:[39m horse[33m.[39mid[33m,[39m[0m

      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7459)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/services/dynamicCompatibilityScoring.test.mjs:418:9)


  ‚óè Test suite failed to run

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation:


    An operation failed because it depends on one or more records that were required but not found. No record was found for a delete.

    [0m [90m 148 |[39m       where[33m:[39m { id[33m:[39m { [36min[39m[33m:[39m testHorses[33m.[39mmap(h [33m=>[39m h[33m.[39mid) } }[33m,[39m
     [90m 149 |[39m     })[33m;[39m
    [31m[1m>[22m[39m[90m 150 |[39m     [36mawait[39m prisma[33m.[39muser[33m.[39m[36mdelete[39m({ where[33m:[39m { id[33m:[39m testUser[33m.[39mid } })[33m;[39m
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 151 |[39m   })[33m;[39m
     [90m 152 |[39m
     [90m 153 |[39m   describe([32m'calculateDynamicCompatibility'[39m[33m,[39m () [33m=>[39m {[0m

      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7459)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/services/dynamicCompatibilityScoring.test.mjs:150:5)

C:\Users\heirr\OneDrive\Desktop\Equoria\backend\__tests__\services\userDocumentation.test.mjs:132
    docService.contentCache.clear();
               ^

TypeError: Cannot read properties of undefined (reading 'contentCache')
    at C:\Users\heirr\OneDrive\Desktop\Equoria\backend\__tests__\services\userDocumentation.test.mjs:132:16
    at global.afterEach (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\jest.setup.mjs:46:13)
    at C:\Users\heirr\OneDrive\Desktop\Equoria\backend\__tests__\services\userDocumentation.test.mjs:119:3
    at _dispatchDescribe (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\index.js:91:26)
    at describe (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\index.js:55:5)
    at C:\Users\heirr\OneDrive\Desktop\Equoria\backend\__tests__\services\userDocumentation.test.mjs:34:1
    at SourceTextModule.evaluate (node:internal/vm/module:227:23)
    at Runtime.linkAndEvaluateModule (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-runtime\build\index.js:710:20)
    at jestAdapter (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:75:5)
    at runTestInternal (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-runner\build\runTest.js:444:34)

Node.js v22.13.0
